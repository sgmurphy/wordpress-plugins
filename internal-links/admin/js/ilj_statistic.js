function iljCreateModal(t,a){var e=jQuery("<div/>").addClass("ilj_modal show"),i=jQuery("<div/>").addClass("ilj_modal_wrap").append(e).on("click",function(t){n(t)}),t=jQuery("<div/>").addClass("ilj_modal_header").append(jQuery("<h2 />").text(t)),a=jQuery("<div/>").addClass("ilj_modal_body").html(a),s=jQuery("<div/>").addClass("ilj_modal_footer").append(jQuery("<button/>").text("OK").addClass("button button-primary").on("click",function(t){n(t)})),n=function(t){t.preventDefault(),e.removeClass("show").addClass("hide"),jQuery("body").css({overflowY:"auto"}),setTimeout(function(){i.remove()},200)}.bind(i);e.append(t),e.append(a),e.append(s),jQuery("body").append(i).css({overflowY:"hidden"})}!function(c){c.fn.ilj_tabnav=function(){var t=this;c(this).find(".nav-tab-wrapper").on("click","a",function(){c(this).addClass("nav-tab-active"),c(this).siblings("a").removeClass("nav-tab-active"),t.find(".tab-content").removeClass("active"),t.find(".tab-content#"+c(this).data("target")).addClass("active")})};var r={width:"",maxWidth:"200",useTitle:!0,delay:100,speed:500,background:"#32373c",color:"#eeeeee",size:"small"},d={aria:{sortAscending:ilj_statistic_translation.datatables_aria_sortAscending,sortDescending:ilj_statistic_translation.datatables_aria_sortDescending},paginate:{first:ilj_statistic_translation.datatables_paginate_first,last:ilj_statistic_translation.datatables_paginate_last,next:ilj_statistic_translation.datatables_paginate_next,previous:ilj_statistic_translation.datatables_paginate_previous},emptyTable:ilj_statistic_translation.datatables_empty_table,info:ilj_statistic_translation.datatables_info,infoEmpty:ilj_statistic_translation.datatables_info_empty,infoFiltered:ilj_statistic_translation.datatables_info_filtered,lengthMenu:ilj_statistic_translation.datatables_length_menu,loadingRecords:ilj_statistic_translation.datatables_loading_records,processing:ilj_statistic_translation.datatables_processing,search:ilj_statistic_translation.datatables_search,zeroRecords:ilj_statistic_translation.datatables_zero_records},p="",u="",_=1e3;c(document).ready(function(){var t,a=c(".warning-tip");a.length&&(t=c.extend(Object.assign({},r),{tooltipHover:!0,useTitle:!1,content:c("<div/>").html(a.find(".the-tip").html()).css({margin:"10px 20px",display:"block"}),maxWidth:"250px"}),a.iljtipso(t))}),c(document).ready(function(){var l=function(o){i={},(e=o).dataTable().api().rows().every(function(t){var t=e.dataTable().api().row(t).data(),t=c(t[2].display),a=t.attr("data-type"),t=t.text();void 0===i[a]&&(i[a]=[]),i[a].push(t)}),c.each(i,function(t,a){i[t]=i[t].filter(function(t,a,e){return e.indexOf(t)==a})});var e,i,t=i,a=c("<div/>").addClass("ilj-type-filter-wrapper"),r=c("<ul/>"),s=c("<a/>").addClass("ilj-type-filter-dropdown").text(ilj_statistic_translation.filter_type).on("click",function(){a.toggleClass("show")});return a.append(s,r),r.activeTypes=[],r.activeTypes.remove=function(t){t=this.indexOf(t);-1<t&&this.splice(t,1)},c.each(t,function(n,t){var a=function(t){switch(t){case"post":t=ilj_statistic_translation.filter_section_posts_pages;break;case"term":t=ilj_statistic_translation.filter_section_taxonomies;break;case"custom":t=ilj_statistic_translation.filter_section_custom_links}return t}(n),a=c("<li/>").html(c("<span/>").text(a)),l=c("<ul/>");r.append(a),t.length&&a.append(l),c.each(t,function(t,e){var a=c("<input/>").attr({type:"checkbox",checked:"checked"}).on("change",function(){var t=n+";"+e,t=(!0===c(this).prop("checked")?r.activeTypes.push(t):r.activeTypes.remove(t),o.dataTable().api().column("th.type")),a=r.activeTypes.length?r.activeTypes.join("|"):null;t.search(a,!0,!1).draw()}),i=c("<label/>").html(c("<span/>").text(e).attr("data-type",n)),s=c("<li/>").addClass("type").html(i);r.activeTypes.push(n+";"+e),i.prepend(a),l.append(s)})}),a},o=c(".ilj-statistic").find(".nav-tab-wrapper");o.length&&c(".ilj-statistic").ilj_tabnav(),c(".tip").iljtipso(r),function s(n){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"load_statistics_chunk",nonce:ilj_dashboard.nonce,start_count:n,chunk_size:_},success:function(t){var a,e,i;"null"!=t&&(p+=t),n+=_,"null"!=t?s(n):((t=document.createElement("table")).className="ilj-statistic-table-links display",a=document.createElement("thead"),e=document.createElement("tr"),header_titles.forEach(t=>{var a=document.createElement("th");"Type"===t&&(a.className="type"),a.textContent=t,e.appendChild(a)}),a.appendChild(e),i=document.createElement("tbody"),t.appendChild(a),t.appendChild(i),(a=document.getElementById("statistic-links"))&&a.appendChild(t),$table=jQuery(".ilj-statistic-table-links"),jQuery(".ilj-statistic-table-links tbody").append(p),o.show(),c("#statistic-links").html($table),$table.DataTable({stateSave:!1,columnDefs:[{orderable:!1,targets:5},{responsivePriority:1,targets:0},{responsivePriority:2,targets:3},{responsivePriority:3,targets:4},{responsivePriority:4,targets:5}],language:d,stateLoaded:function(t,a){$table.find(".tip").iljtipso(r)},initComplete:function(){var t=l($table);c("#statistic-links .dataTables_wrapper .dataTables_filter").append(t)},responsive:!0}),$table.find(".tip").iljtipso(r),$table.on("click",".ilj-statistic-detail",function(){c(".ilj-statistic-cover").show();var t=c(this).data("id"),a=c(this).data("type"),e=c(this).data("direction"),i="",s=0,n=c(this).closest("tr").find("td.asset-title").text(),t=("to"==e?(i=ilj_statistic_translation.incoming_links,s=c(this).closest('a[data-direction="to"]').text()):"from"==e&&(i=ilj_statistic_translation.outgoing_links,s=c(this).closest('a[data-direction="from"]').text()),{action:"ilj_render_link_detail_statistic",id:t,type:a,direction:e});c.ajax({url:ajaxurl,type:"POST",data:t}).done(function(t){iljCreateModal(i+' "'+n+'" ('+s+")",c("<div/>").addClass("ilj-statistic").html(t)),c(".ilj-statistic-cover").hide()})}))},error:function(t){console.log("Error loading statistics: ",t)}})}(0),function s(n){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"load_anchor_statistics_chunk",nonce:ilj_dashboard.nonce,start_count:n,chunk_size:_},success:function(t){var a,e,i;"null"!=t&&(u+=t),n+=_,"null"!=t?s(n):((t=document.createElement("table")).className="ilj-statistic-table-anchors display",a=document.createElement("thead"),e=document.createElement("tr"),"undefined"!=typeof headerLabels&&headerLabels.forEach(function(t){var a=document.createElement("th");a.textContent=t,e.appendChild(a)}),a.appendChild(e),i=document.createElement("tbody"),t.appendChild(a),t.appendChild(i),(a=document.getElementById("statistic-anchors"))&&a.appendChild(t),$table=jQuery(".ilj-statistic-table-anchors"),jQuery(".ilj-statistic-table-anchors tbody").append(u),c("#statistic-anchors").html($table),$table.DataTable({stateSave:!1,language:d,stateLoaded:function(t,a){$table.find(".tip").iljtipso(r)},columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:3},{responsivePriority:3,targets:2},{responsivePriority:4,targets:1}],responsive:!0}),$table.on("click",".ilj-statistic-detail",function(){c(".ilj-statistic-cover").show();var a=c(this).data("anchor"),e=c(this).text();c.ajax({url:ajaxurl,type:"POST",data:{action:"ilj_render_anchor_detail_statistic",anchor:a}}).done(function(t){iljCreateModal(ilj_statistic_translation.anchor_text+' "'+a+'" ('+e+")",c("<div/>").addClass("ilj-statistic").html(t)),c(".ilj-statistic-cover").hide()})}))},error:function(t){console.log("Error loading statistics: ",t)}})}(0)}),c(document).on("mouseup",function(t){var a=c(".ilj-type-filter-wrapper");a.is(t.target)||0!==a.has(t.target).length||a.removeClass("show")})}(jQuery);