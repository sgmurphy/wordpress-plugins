"use strict";var __webpack_exports__={},__webpack_modules__={"./assets/admin/js/components/ilj_modal.js":(t,e,a)=>{function i(t,e){var a=jQuery("<div/>").addClass("ilj_modal show"),i=jQuery("<div/>").addClass("ilj_modal_wrap").append(a),n=jQuery("<div/>").addClass("ilj_modal_header").append(jQuery("<h2 />").text(t)),s=jQuery("<div/>").addClass("ilj_modal_body").html(e),r=jQuery("<div/>").addClass("ilj_modal_footer").append(jQuery("<button/>").text("OK").addClass("button button-primary").on("click",(function(t){l(t)}))),l=function(){a.removeClass("show").addClass("hide"),jQuery("body").css({overflowY:"auto"}),setTimeout((function(){i.remove()}),200)}.bind(i);a.append(n),a.append(s),a.append(r),jQuery("body").append(i).css({overflowY:"hidden"})}a.r(e),a.d(e,{iljCreateModal:()=>i})}},__webpack_module_cache__={};function __nested_webpack_require_1850__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var a=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](a,a.exports,__nested_webpack_require_1850__),a.exports}__nested_webpack_require_1850__.d=(t,e)=>{for(var a in e)__nested_webpack_require_1850__.o(e,a)&&!__nested_webpack_require_1850__.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},__nested_webpack_require_1850__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__nested_webpack_require_1850__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __nested_webpack_exports__={};__nested_webpack_require_1850__.r(__nested_webpack_exports__);var components_ilj_modal__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_1850__("./assets/admin/js/components/ilj_modal.js");!function(t){t.fn.ilj_tabnav=function(){var e=this;t(this).find(".nav-tab-wrapper").on("click","a",(function(){t(this).addClass("nav-tab-active"),t(this).siblings("a").removeClass("nav-tab-active"),e.find(".tab-content").removeClass("active"),e.find(".tab-content#"+t(this).data("target")).addClass("active")}))};var e={width:"",maxWidth:"200",useTitle:!0,delay:100,speed:500,background:"#32373c",color:"#eeeeee",size:"small"},a={aria:{sortAscending:ilj_statistic_translation.datatables_aria_sortAscending,sortDescending:ilj_statistic_translation.datatables_aria_sortDescending},paginate:{first:ilj_statistic_translation.datatables_paginate_first,last:ilj_statistic_translation.datatables_paginate_last,next:ilj_statistic_translation.datatables_paginate_next,previous:ilj_statistic_translation.datatables_paginate_previous},emptyTable:ilj_statistic_translation.datatables_empty_table,info:ilj_statistic_translation.datatables_info,infoEmpty:ilj_statistic_translation.datatables_info_empty,infoFiltered:ilj_statistic_translation.datatables_info_filtered,lengthMenu:ilj_statistic_translation.datatables_length_menu,loadingRecords:ilj_statistic_translation.datatables_loading_records,processing:ilj_statistic_translation.datatables_processing,search:ilj_statistic_translation.datatables_search,zeroRecords:ilj_statistic_translation.datatables_zero_records},i="";t(document).ready((function(){var a=t(".warning-tip");if(a.length){var i=t.extend(Object.assign({},e),{tooltipHover:!0,useTitle:!1,content:t("<div/>").html(a.find(".the-tip").html()).css({margin:"10px 20px",display:"block"}),maxWidth:"250px"});a.iljtipso(i)}})),t(document).ready((function(){var n=ilj_link_statistic_filter_types.reduce((function(t,e){return void 0===t[e.main_type]&&(t[e.main_type]=new Set),t[e.main_type].add(e.sub_type),t}),{}),s={};Object.keys(n).forEach((function(t,e){s[t]=Array.from(new Set(n[t]))}));var r=function(){var e=t('<div id="ilj-type-filter-wrapper" class="ilj-type-filter-wrapper"/>'),a=t('<ul id="ilj-link-statistics-filter" />'),i=t("<a/>").addClass("ilj-type-filter-dropdown").text(ilj_statistic_translation.filter_type).on("click",(function(){e.toggleClass("show")}));return e.append(i,a),t.each(s,(function(e,i){var s=function(t){switch(t){case"post":t=ilj_statistic_translation.filter_section_posts_pages;break;case"term":t=ilj_statistic_translation.filter_section_taxonomies;break;case"custom":t=ilj_statistic_translation.filter_section_custom_links}return t}(e),r=t("<li/>").html(t("<span/>").text(s)),l=t("<ul/>");a.append(r),i.length&&r.append(l),t.each(i,(function(a,i){var s=t("<input/>").attr({type:"checkbox"}).on("change",(function(){!0===t(this).prop("checked")?n[e].add(i):n[e].delete(i),jQuery(".ilj-statistic-table-links").dataTable().api().ajax.reload()}));n[e].has(i)&&s.attr("checked",!0);var r=t("<label/>").html(t("<span/>").text(i).attr("data-type",e)),o=t("<li/>").addClass("type").html(r);r.prepend(s),l.append(o)}))})),e},l=t(".ilj-statistic").find(".nav-tab-wrapper");function o(t,e,a){const i=document.createElement(t);e&&(i.innerText=e),Object.entries(a).forEach((function([t,e]){i.setAttribute(t,e)}));const n=i.outerHTML;return i.remove(),n}l.length&&t(".ilj-statistic").ilj_tabnav(),t(".tip").iljtipso(e),function(){!function(){var t=document.createElement("table");t.className="ilj-statistic-table-links display";var e=document.createElement("thead"),a=document.createElement("tr");header_titles.forEach((t=>{var e=document.createElement("th");"Type"===t&&(e.className="type"),e.textContent=t,a.appendChild(e)})),e.appendChild(a);var i=document.createElement("tbody");t.appendChild(e),t.appendChild(i);var n=document.getElementById("statistic-links");n&&n.appendChild(t)}();var i=jQuery(".ilj-statistic-table-links");jQuery(".ilj-statistic-table-links tbody").append(""),l.show(),t("#statistic-links").append(i);var s=i.DataTable({stateSave:!1,serverSide:!0,processing:!0,searchDelay:800,ajax:{beforeSend:function(){t("#link-statistics-loader").show()},url:ajaxurl,type:"POST",data:{action:"load_link_statistics",nonce:ilj_dashboard.nonce,main_types:function(){return Object.keys(n)},sub_types:function(){var t=Object.values(n).reduce((function(t,e){return t.concat(Array.from(e))}),[]);return Array.from(new Set(t))}}},columnDefs:[{className:"asset-title",responsivePriority:1,targets:0,data:null,render:function(t,e,a){return a.title.replace(/<\/?[^>]+(>|$)/g,"")}},{targets:1,data:null,render:function(t,e,a){return a.keywords_count}},{className:"type",responsivePriority:2,data:null,targets:2,render:function(t,e,a){return o("span",a.sub_type?a.sub_type:a.main_type,{"data-type":a.main_type})}},{responsivePriority:3,data:null,targets:3,render:function(t,e,a){return 0===parseInt(a.incoming_links)?"-":o("a",a.incoming_links,{"data-type":a.main_type,title:ilj_statistic_translation.show_incoming_links,class:"tip ilj-statistic-detail","data-id":a.id,"data-direction":"to"})}},{responsivePriority:4,data:null,targets:4,render:function(t,e,a){return 0===parseInt(a.outgoing_links)?"-":o("a",a.outgoing_links,{"data-type":a.main_type,title:ilj_statistic_translation.show_outgoing_links,class:"tip ilj-statistic-detail","data-id":a.id,"data-direction":"from"})}},{responsivePriority:5,data:null,targets:5,orderable:!1,render:function(t,e,a){return`<a href="${a.edit_link}" class="tip"><span class="dashicons dashicons-edit"></span></a> <a class="tip"  target="_blank" rel="noopener" href="${a.permalink}"><span class="dashicons dashicons-external"></span></a>`}}],language:a,stateLoaded:function(t,a){i.find(".tip").iljtipso(e)},drawCallback:function(e){const a=document.getElementById("ilj-type-filter-wrapper");a&&a.parentNode.removeChild(a),t("#statistic-links .dataTables_wrapper .dataTables_filter").append(r()),t("#link-statistics-loader").hide()},responsive:!0});t(".dataTables_filter input",i.closest(".dataTables_wrapper")).off(),t(".dataTables_filter input",i.closest(".dataTables_wrapper")).on("keyup",(function(t){13===t.keyCode&&s.search(this.value).draw()})),i.find(".tip").iljtipso(e),i.on("click",".ilj-statistic-detail",(function(){t(".ilj-statistic-cover").show();var e=t(this).data("id"),a=t(this).data("type"),i=t(this).data("direction"),n="",s=0,r=t(this).closest("tr").find("td.asset-title").text();"to"==i?(n=ilj_statistic_translation.incoming_links,s=t(this).closest('a[data-direction="to"]').text()):"from"==i&&(n=ilj_statistic_translation.outgoing_links,s=t(this).closest('a[data-direction="from"]').text());var l={action:"ilj_render_link_detail_statistic",nonce:ilj_dashboard.nonce,id:e,type:a,direction:i};t.ajax({url:ajaxurl,type:"POST",data:l}).done((function(e){(0,components_ilj_modal__WEBPACK_IMPORTED_MODULE_0__.iljCreateModal)(n+' "'+r+'" ('+s+")",t("<div/>").addClass("ilj-statistic").html(e)),t(".ilj-statistic-cover").hide()}))}))}(),function n(s){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"load_anchor_statistics_chunk",nonce:ilj_dashboard.nonce,start_count:s,chunk_size:1e3},success:function(r){"null"!=r&&(i+=r),s+=1e3,"null"!=r?n(s):function(){!function(){var t=document.createElement("table");t.className="ilj-statistic-table-anchors display";var e=document.createElement("thead"),a=document.createElement("tr");"undefined"!=typeof headerLabels&&headerLabels.forEach((function(t){var e=document.createElement("th");e.textContent=t,a.appendChild(e)})),e.appendChild(a);var i=document.createElement("tbody");t.appendChild(e),t.appendChild(i);var n=document.getElementById("statistic-anchors");n&&n.appendChild(t)}();var n=jQuery(".ilj-statistic-table-anchors");jQuery(".ilj-statistic-table-anchors tbody").append(i),t("#statistic-anchors").html(n),n.DataTable({stateSave:!1,language:a,stateLoaded:function(t,a){n.find(".tip").iljtipso(e)},columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:3},{responsivePriority:3,targets:2},{responsivePriority:4,targets:1}],responsive:!0}),n.on("click",".ilj-statistic-detail",(function(){t(".ilj-statistic-cover").show();var e=t(this).data("anchor"),a=t(this).text(),i={action:"ilj_render_anchor_detail_statistic",nonce:ilj_dashboard.nonce,anchor:e};t.ajax({url:ajaxurl,type:"POST",data:i}).done((function(i){(0,components_ilj_modal__WEBPACK_IMPORTED_MODULE_0__.iljCreateModal)(ilj_statistic_translation.anchor_text+' "'+e+'" ('+a+")",t("<div/>").addClass("ilj-statistic").html(i)),t(".ilj-statistic-cover").hide()}))}))}()},error:function(t){console.log("Error loading statistics: ",t)}})}(0)})),t(document).on("mouseup",(function(e){var a=t("#ilj-type-filter-wrapper");a.is(e.target)||0!==a.has(e.target).length||a.removeClass("show")}))}(jQuery);
//# sourceMappingURL=ilj_statistic.min.js.map