(()=>{var e=function(e){var t="#hcaptcha-message",a=e(t),c=e("form.hcaptcha-general"),n=e('[name="hcaptcha_settings[site_key]"]'),s=e('[name="hcaptcha_settings[secret_key]"]'),o=e('[name="hcaptcha_settings[theme]"]'),i=e('[name="hcaptcha_settings[size]"]'),r=e('[name="hcaptcha_settings[language]"]'),h=e('[name="hcaptcha_settings[mode]"]'),l=e('[name="hcaptcha_settings[custom_themes][]"]'),d=e('[name="hcaptcha_settings[config_params]"]'),p=c.find("#submit"),u={},f=n.val(),g=s.val();function m(){a.remove(),e('<div id="hcaptcha-message"></div>').insertAfter("#hcaptcha-options h2"),a=e(t)}function v(t,c){a.removeClass(),a.addClass(c+" notice is-dismissible");var n=t.split("\n").map((function(e){return"<p>".concat(e,"</p>")}));a.html(n.join("")),e(document).trigger("wp-updates-notice-added");var s=e("#wpwrap").position().top;e("html, body").animate({scrollTop:a.offset().top-s-parseInt(a.css("margin-bottom"))},1e3)}function b(e){v(e,"notice-error")}function C(e){var t=Object.assign(hCaptcha.getParams(),e);hCaptcha.setParams(t);var a=document.querySelector("#hcaptcha-options .h-captcha");for(var c in a.innerHTML="",e)a.setAttribute("data-".concat(c),"".concat(e[c]));hCaptcha.bindEvents()}function j(){var e,t=d.val().trim();t=t||null;try{e=JSON.parse(t)}catch(e){return d.css("background-color","#ffabaf"),p.attr("disabled",!0),void b("Bad JSON!")}l.prop("checked")||(e={sitekey:n.val(),theme:o.val(),size:i.val(),hl:r.val()}),C(e)}function O(){m(),p.attr("disabled",!0);var t={action:HCaptchaGeneralObject.checkConfigAction,nonce:HCaptchaGeneralObject.checkConfigNonce,mode:h.val(),siteKey:n.val(),secretKey:s.val(),"h-captcha-response":e('textarea[name="h-captcha-response"]').val()};return e.post({url:HCaptchaGeneralObject.ajaxUrl,data:t}).done((function(e){e.success?(!function(e){v(e,"notice-success")}(e.data),p.attr("disabled",!1)):b(e.data)})).fail((function(e){b(e.statusText)})).always((function(){C({})}))}function y(){n.val()===f&&s.val()===g?(m(),p.attr("disabled",!1)):(b(HCaptchaGeneralObject.checkConfigNotice),p.attr("disabled",!0))}u[HCaptchaGeneralObject.modeLive]=HCaptchaGeneralObject.siteKey,u[HCaptchaGeneralObject.modeTestPublisher]=HCaptchaGeneralObject.modeTestPublisherSiteKey,u[HCaptchaGeneralObject.modeTestEnterpriseSafeEndUser]=HCaptchaGeneralObject.modeTestEnterpriseSafeEndUserSiteKey,u[HCaptchaGeneralObject.modeTestEnterpriseBotDetected]=HCaptchaGeneralObject.modeTestEnterpriseBotDetectedSiteKey,e("#check_config").on("click",(function(e){e.preventDefault(),O()})),n.on("change",(function(t){C({sitekey:e(t.target).val()}),y()})),s.on("change",(function(){y()})),o.on("change",(function(t){C({theme:e(t.target).val()})})),i.on("change",(function(t){var a=e("#hcaptcha-invisible-notice"),c=e(t.target).val();"invisible"===c?a.show():a.hide(),C({size:c})})),r.on("change",(function(t){C({hl:e(t.target).val()})})),h.on("change",(function(t){var a=e(t.target).val();u.hasOwnProperty(a)&&(a===HCaptchaGeneralObject.modeLive?(n.attr("disabled",!1),s.attr("disabled",!1)):(n.attr("disabled",!0),s.attr("disabled",!0)),C({sitekey:u[a]}))})),l.on("change",(function(){j()})),d.on("blur",(function(){j()})),d.on("focus",(function(){d.css("background-color","unset"),p.attr("disabled",!1)})),e(".hcaptcha-general h3").on("click",(function(t){var a=e(t.currentTarget);a.toggleClass("closed");var c={action:HCaptchaGeneralObject.toggleSectionAction,nonce:HCaptchaGeneralObject.toggleSectionNonce,section:a.attr("class").replaceAll(/(hcaptcha-section-|closed)/g,"").trim(),status:!a.hasClass("closed")};e.post({url:HCaptchaGeneralObject.ajaxUrl,data:c}).done((function(e){e.success||b(e.data)})).fail((function(e){b(e.statusText)}))}))};window.hCaptchaGeneral=e,jQuery(document).ready(e)})();