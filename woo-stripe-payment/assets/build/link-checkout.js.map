{"version":3,"file":"link-checkout.js","mappings":"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","sources":["webpack://woo-stripe-payment/external window \"jQuery\"","webpack://woo-stripe-payment/external window [\"wc_stripe\"]","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/typeof.js","webpack://woo-stripe-payment/webpack/bootstrap","webpack://woo-stripe-payment/./assets/js/frontend/link-checkout.js"],"sourcesContent":["module.exports = window[\"jQuery\"];","module.exports = window[\"wc_stripe\"];","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import $ from 'jquery';\nimport wc_stripe from '@paymentplugins/wc-stripe';\n\nconst {credit_card: creditCard} = wc_stripe;\n\nconst addLinkIcon = () => {\n\n    $('#billing_email').addClass('stripe-link-icon-container');\n    $('#billing_email').after($(wcStripeLinkParams.linkIcon));\n}\n\n$(() => {\n    if (wcStripeLinkParams === 'undefined' || !wcStripeLinkParams?.elementOptions?.mode) {\n        return false;\n    }\n    if (!creditCard.is_payment_element_enabled()) {\n        return;\n    }\n    try {\n\n        if (wcStripeLinkParams.popupEnabled) {\n            const stripe = creditCard.stripe;\n            const link = stripe.linkAutofillModal(creditCard.elements);\n\n            $(document.body).on('keyup', '[name=\"billing_email\"]', (e) => {\n                link.launch({email: e.currentTarget.value});\n            });\n\n            if (wcStripeLinkParams.launchLink) {\n                link.launch({email: $('[name=\"billing_email\"]').val()});\n            }\n\n            link.on('autofill', (event) => {\n                const {shippingAddress = null, billingAddress} = event.value;\n                // populate the address fields\n                if (shippingAddress) {\n                    const address = {name: shippingAddress.name, ...shippingAddress.address};\n                    creditCard.populate_shipping_fields(address);\n                }\n                if (billingAddress) {\n                    const address = {name: billingAddress.name, ...billingAddress.address};\n                    creditCard.populate_billing_fields(address);\n                }\n                creditCard.fields.toFormFields();\n                creditCard.set_payment_method(creditCard.gateway_id);\n                creditCard.show_new_payment_method();\n                creditCard.hide_save_card();\n                if (shippingAddress) {\n                    creditCard.maybe_set_ship_to_different();\n                }\n                $('[name=\"terms\"]').prop('checked', true);\n                if (!creditCard.fields.required('billing_phone') || !creditCard.fields.isEmpty('billing_phone')) {\n                    creditCard.get_form().trigger('submit');\n                }\n            });\n        }\n\n        if (wcStripeLinkParams.linkIconEnabled) {\n            addLinkIcon();\n        }\n    } catch (error) {\n        console.log(error);\n    }\n});"],"names":["module","exports","window","toPropertyKey","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","_typeof","t","r","e","Symbol","toPrimitive","i","call","TypeError","String","Number","o","iterator","constructor","prototype","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","_jquery","_interopRequireDefault","require","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","creditCard","wc_stripe","credit_card","$","_wcStripeLinkParams","wcStripeLinkParams","elementOptions","mode","is_payment_element_enabled","popupEnabled","link","stripe","linkAutofillModal","elements","document","body","on","launch","email","currentTarget","launchLink","val","event","_event$value","_event$value$shipping","shippingAddress","billingAddress","address","name","populate_shipping_fields","populate_billing_fields","fields","toFormFields","set_payment_method","gateway_id","show_new_payment_method","hide_save_card","maybe_set_ship_to_different","prop","required","isEmpty","get_form","trigger","linkIconEnabled","addClass","after","linkIcon","error","console","log"],"sourceRoot":""}