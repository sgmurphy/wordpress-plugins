(()=>{"use strict";window["jquery-effects-shake"],function(e,i){const t=e.document,r={add_btn:"",new_ip:"",ip_list_wrap:"",empty_ip:"",restrict_radio:"",table:"",header:"",redirect_choice:"",message_choice:"",page_choice:"",redirect_fields:"",message_field:"",page_field:"",error_field:"",submit_btn:""};i((function(){!function(){r.add_btn=i(t.getElementById("addip")),r.new_ip=t.getElementById("newip"),r.new_ip_comment=t.getElementById("newipcomment"),r.ip_list_wrap=t.getElementById("ip_list"),r.empty_ip=i(t.getElementById("ip_list_empty")),r.restrict_radio=t.getElementById("blog-restricted"),r.error_field=t.getElementById("rsa-error-container"),r.table=i(t.getElementById("rsa-send-to-login")).closest("table"),r.header=r.table.prev("h2"),r.redirect_choice=t.getElementById("rsa-redirect-visitor"),r.message_choice=t.getElementById("rsa-display-message"),r.page_choice=t.getElementById("rsa-unblocked-page"),r.redirect_fields=i(t.querySelectorAll(".rsa_redirect_field")).closest("tr"),r.message_field=i(t.getElementById("rsa_message")).closest("tr"),r.page_field=i(t.getElementById("rsa_page")).closest("tr"),r.submit_btn=i("#submit"),r.restrict_radio&&!r.restrict_radio.checked&&(r.table.hide(),r.header.hide()),r.redirect_choice&&!r.redirect_choice.checked&&r.redirect_fields.hide(),r.message_choice&&!r.message_choice.checked&&r.message_field.hide(),r.page_choice&&!r.page_choice.checked&&r.page_field.hide(),i(t.querySelectorAll("#rsa_handle_fields input")).on("change",(function(){r.redirect_choice.checked?r.redirect_fields.show():r.redirect_fields.hide(),r.message_choice.checked?r.message_field.show():r.message_field.hide(),r.page_choice.checked?r.page_field.show():r.page_field.hide()})),i(t.querySelectorAll(".option-site-visibility input")).on("change",(function(){r.restrict_radio.checked?(r.header.show(),r.table.show()):(r.header.hide(),r.table.hide())})),r.add_btn.on("click",(function(){r.empty_ip.clone().appendTo(r.ip_list_wrap).removeAttr("id").slideDown(250)})),i(r.ip_list_wrap).on("blur",".ip.code",(function(){!function(e,c,s){if(r.submit_btn.prop("disabled",!0),""===i.trim(e))return void r.submit_btn.prop("disabled",!1);const d=i(t.querySelectorAll("#ip_list input"));for(let t=0;t<d.length;t++)if(!s.is(d[t])&&d[t].value===e)return i(d[t]).parent().effect("shake",600),void i(s).focus();jQuery.post(ajaxurl,{action:"rsa_ip_check",ip_address:e,ip_address_comment:c,nonce:rsaSettings.nonce},(function(e){return e.success?(i(r.error_field).text(""),r.submit_btn.prop("disabled",!1),!0):(i(s).effect("shake",600).focus(),i(r.error_field).text(e.data),!1)}))}(i(this).val(),i(this).next().val(),i(this))}));const e=t.getElementById("rsa_myip");null!==e&&i(e).on("click",(function(){i(".ip.code:last").val(i(this).data("myip")).blur()})),i(r.ip_list_wrap).on("click",".remove_btn",(function(){i(this.parentNode).slideUp(250,(function(){i(this).remove()}))}))}()}))}(window,jQuery)})();