!function(){var e,i;window.germanized=window.germanized||{},window.germanized.shipments_pickup_locations=window.germanized.shipments_pickup_locations||{},e=jQuery,(i=window.germanized).shipments_pickup_locations={params:{},pickupLocations:{},init:function(){var o=i.shipments_pickup_locations;o.params=wc_gzd_shipments_pickup_locations_params;var t=o.getPickupLocationSelect();t.length>0&&(o.pickupLocations=t.data("locations"),e(document.body).on("updated_checkout",o.afterRefreshCheckout),e(document).on("change","#pickup_location_field #pickup_location",o.onSelectPickupLocation),o.afterRefreshCheckout())},maybeInitSelect2:function(){e().selectWoo&&e("select#pickup_location:visible, select#pickup_location:visible").each((function(){var i=e(this),o={placeholder:i.attr("data-placeholder")||i.attr("placeholder")||"",label:i.attr("data-label")||null,width:"100%",allowClear:!0};e(this).on("select2:select",(function(){e(this).trigger("focus")})).selectWoo(o)}))},onSelectPickupLocation:function(){var o=i.shipments_pickup_locations,t=o.getPickupLocationSelect(),a=e("#pickup_location_customer_number_field"),c=t.val();if(t.val()){var n=o.getPickupLocation(c);n&&o.updateCustomerNumberField(n)}else a.addClass("hidden"),a.hide();e(document.body).trigger("update_checkout")},updateCustomerNumberField:function(i){var o=e("#pickup_location_customer_number_field");i.supports_customer_number?(o.find("label")[0].firstChild.nodeValue=i.customer_number_field_label+" ",i.customer_number_is_mandatory?(o.find("label .required").length||o.find("label").append(' <abbr class="required">*</abbr>'),o.find("label .optional").hide(),o.addClass("validate-required")):(o.find("label .required").remove(),o.find("label .optional").show(),o.removeClass("validate-required woocommerce-invalid woocommerce-invalid-required-field")),o.removeClass("hidden"),o.show()):(o.addClass("hidden"),o.hide())},getPickupLocationSelect:function(){return e("#pickup_location")},getPickupLocation:function(e){var o=i.shipments_pickup_locations;return!!o.pickupLocations.hasOwnProperty(e)&&o.pickupLocations[e]},afterRefreshCheckout:function(o,t){var a=i.shipments_pickup_locations,c=a.getPickupLocationSelect(),n=c.parents("#pickup_location_field"),s=e("#pickup_location_customer_number_field"),p=c.val();if((t=void 0===t?{fragments:{".gzd-shipments-pickup-locations":JSON.stringify(a.pickupLocations)}}:t).hasOwnProperty("fragments")&&t.fragments.hasOwnProperty(".gzd-shipments-pickup-locations")?a.pickupLocations=JSON.parse(t.fragments[".gzd-shipments-pickup-locations"]):a.pickupLocations={},c.attr("data-locations",a.pickupLocations),Object.keys(a.pickupLocations).length){n.show(),n.removeClass("hidden"),c.find('option:not([value=""])').remove(),e.each(a.pickupLocations,(function(i,o){var t=e("<textarea />").html(o.formatted_address).text();c.append(e("<option></option>").attr("value",i).text(t))}));var r=a.getPickupLocation(p);r?(c.find('option[value="'+r.code+'"')[0].selected=!0,a.replaceShippingAddress(r.address_replacements),a.updateCustomerNumberField(r)):(s.addClass("hidden"),s.hide(),c.val(""))}else{if(""!==p){e("#shipping_address_1").val("");var d=e("form.checkout");d.find(".woocommerce-NoticeGroup-updateOrderReview").length<=0&&d.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-updateOrderReview"></div>'),d.find(".woocommerce-NoticeGroup-updateOrderReview").prepend('<div class="woocommerce-info">Your selected pickup location is not available any longer. Please review your shipping address.</div>');var l=e(".woocommerce-NoticeGroup-updateOrderReview");e.scroll_to_notices(l)}n.addClass("hidden"),n.hide(),s.addClass("hidden"),s.hide(),c.val("")}a.maybeInitSelect2()},replaceShippingAddress:function(o){i.shipments_pickup_locations;var t=e("#ship-to-different-address input"),a=[];Object.keys(o).forEach((i=>{var t=o[i];t&&e("#shipping_"+i).length>0&&(e("#shipping_"+i).val()!==t&&a.push(i),e("#shipping_"+i).val(t))})),t.is(":checked")||(t.prop("checked",!0),t.trigger("change")),a.length>0&&-1!==e.inArray("postcode",a)&&e("#shipping_postcode").trigger("change")}},e(document).ready((function(){i.shipments_pickup_locations.init()})),((window.wcGzdShipments=window.wcGzdShipments||{}).static=window.wcGzdShipments.static||{})["pickup-locations"]={}}();