(()=>{"use strict";var e,t,n,a,r,o,i,l={694:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonsPanel=function(e){return React.createElement("div",null,e.children)}},561:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxControl=void 0;var a=n(610),r=n(537);t.CheckboxControl=function(e){var t,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,a.useState)(e.checked||!1),2),o=n[0],i=n[1];return t=e.unescapedDescription?React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.description}}):React.createElement("p",{className:"description"},e.description),React.createElement(a.Fragment,null,React.createElement(r.CheckboxControl,{label:e.label,name:e.name,id:e.name,className:e.className,checked:o||!1,onChange:function(t){i(t),e.onChange&&e.onChange(t)}}),t)}},730:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DateTimePicker=void 0;var a=n(500),r=n(537);t.DateTimePicker=function(e){var t=e.currentDate,n=e.onChange,o=e.is12Hour,i=e.startOfWeek;return"number"==typeof t&&(t=(0,a.normalizeUnixTimeToMilliseconds)(t)),React.createElement(r.DateTimePicker,{currentDate:t,onChange:n,__nextRemoveHelpButton:!0,is12Hour:o,startOfWeek:i})}},409:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FutureActionPanel=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(37),i=n(76),l=wp.components,u=l.PanelRow,c=l.CheckboxControl,s=l.SelectControl,d=l.FormTokenField,m=l.Spinner,p=l.BaseControl,f=wp.element,y=f.Fragment,g=f.useEffect,v=f.useState,b=wp.htmlEntities.decodeEntities,h=wp.url.addQueryArgs,E=wp.data,S=E.useSelect,_=E.useDispatch,x=wp.apiFetch;t.FutureActionPanel=function(e){var t=S((function(t){return t(e.storeName).getAction()}),[]),n=S((function(t){return t(e.storeName).getDate()}),[]),l=S((function(t){return t(e.storeName).getEnabled()}),[]),f=S((function(t){return t(e.storeName).getTerms()}),[]),E=S((function(t){return t(e.storeName).getTaxonomy()}),[]),R=S((function(t){return t(e.storeName).getTaxonomyName()}),[]),T=S((function(t){return t(e.storeName).getTermsListByName()}),[]),N=S((function(t){return t(e.storeName).getTermsListById()}),[]),C=S((function(t){return t(e.storeName).getIsFetchingTerms()}),[]),w=S((function(t){return t(e.storeName).getCalendarIsVisible()}),[]),P=S((function(t){return t(e.storeName).getHasValidData()}),[]),O=S((function(t){return t(e.storeName).getNewStatus()}),[]),k=v(""),F=r(k,2),D=F[0],A=F[1],j=_(e.storeName),I=j.setAction,B=j.setDate,M=j.setEnabled,V=j.setTerms,L=j.setTaxonomy,H=j.setTermsListByName,W=j.setTermsListById,Q=j.setTaxonomyName,U=j.setIsFetchingTerms,q=j.setCalendarIsVisible,z=j.setHasValidData,G=j.setNewStatus,Y=function(e){T[e]={id:e,count:0,description:"",link:"",name:e,slug:e,taxonomy:E},N[e]=e,H(T),W(N),V([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(f),[e]))},J=function(t,n){"function"==typeof e.onChangeData&&e.onChangeData(t,n)},K=function(t){M(t),t&&(I(e.action),B(e.date),G(e.newStatus),V(e.terms),L(e.taxonomy),X()),J("enabled",t)},X=function(){var e={},t={};E&&(U(!0),x({path:h("publishpress-future/v1/terms/"+E)}).then((function(n){n.terms.forEach((function(n){e[b(n.name)]=n,t[n.id]=b(n.name)})),H(e),W(t),Q(b(n.taxonomyName)),U(!1)})))},Z=function(){return localStorage.getItem("FUTURE_ACTION_CALENDAR_IS_VISIBLE_"+e.context)};g((function(){e.autoEnableAndHideCheckbox?M(!0):M(e.enabled),I(e.action),G(e.newStatus),B(e.date),V(e.terms),L(e.taxonomy),null===Z()?q(e.calendarIsVisible):q("1"===Z()),e.enabled&&(e.isCleanNewPost&&K(!0),X())}),[]),g((function(){var t;t=w,localStorage.setItem("FUTURE_ACTION_CALENDAR_IS_VISIBLE_"+e.context,t?"1":"0")}),[w]),g((function(){P&&e.onDataIsValid&&e.onDataIsValid(),!P&&e.onDataIsInvalid&&e.onDataIsInvalid()}),[P]);var $=[];f&&f.length>0&&N&&($=(0,o.compact)(function(e){return"object"!==(void 0===e?"undefined":a(e))||null===e?{}:e.map((function(e){return N[e]}))}(f)),"string"==typeof $&&($=[]));var ee=[];"object"===(void 0===T?"undefined":a(T))&&null!==T&&(ee=Object.keys(T));var te,ne=w?"future-action-panel":"future-action-panel hidden-calendar",ae=w?"future-action-panel-content":"future-action-panel-content hidden-calendar",re=w?"future-action-date-panel":"future-action-date-panel hidden-calendar";te="inherited"===e.timeFormat?!e.is12Hour:"24h"===e.timeFormat;var oe=e.actionsSelectOptions;e.taxonomy||(oe=e.actionsSelectOptions.filter((function(e){return-1===["category","category-add","category-remove","category-remove-all"].indexOf(e.value)})));var ie=function(e,t,n){var a=e.split("{"),o=[];o.push(a.shift());var i=!0,l=!1,u=void 0;try{for(var c,s=a[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var d=c.value.split("}"),m=r(d,2),p=m[0],f=m[1];o.push(React.createElement("a",{href:t,target:"_blank",key:t},p)),o.push(f)}}catch(e){l=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(l)throw u}}return o}(e.strings.timezoneSettingsHelp,"/wp-admin/options-general.php#timezone_string"),le=String(t).includes("category")&&"category-remove-all"!==t,ue=R;switch(t){case"category":ue=e.strings.newTerms.replace("%s",R);break;case"category-remove":ue=e.strings.removeTerms.replace("%s",R);break;case"category-add":ue=e.strings.addTerms.replace("%s",R)}return g((function(){if(!l)return z(!0),void A("");z(function(){var a=!0;if(!l)return A(""),!0;t||(A(e.strings.errorActionRequired),a=!1),n||(A(e.strings.errorDateRequired),a=!1),n&&new Date(n)<new Date&&(A(e.strings.errorDateInPast),a=!1);var r=["category","category-add","category-remove"].includes(t),o=0===f.length||1===f.length&&(""===f[0]||"0"===f[0]);return r&&o&&(A(e.strings.errorTermsRequired),a=!1),a&&A(""),a}())}),[t,n,l,f,E]),React.createElement("div",{className:ne},e.autoEnableAndHideCheckbox&&React.createElement("input",{type:"hidden",name:"future_action_enabled",value:1}),!e.autoEnableAndHideCheckbox&&React.createElement(u,null,React.createElement(c,{label:e.strings.enablePostExpiration,checked:l||!1,onChange:K})),l&&React.createElement(y,null,React.createElement(u,{className:ae+" future-action-full-width"},React.createElement(s,{label:e.strings.action,value:t,options:oe,onChange:function(e){I(e),J("action",e)}})),"change-status"===t&&React.createElement(u,{className:"new-status"},React.createElement(s,{label:e.strings.newStatus,options:e.statusesSelectOptions,value:O,onChange:function(e){G(e),J("newStatus",e)}})),le&&(C&&React.createElement(u,null,React.createElement(p,{label:R},e.strings.loading+" ("+R+")",React.createElement(m,null)))||!E&&React.createElement(u,null,React.createElement(p,{label:R,className:"future-action-warning"},React.createElement("div",null,React.createElement("i",{className:"dashicons dashicons-warning"})," ",e.strings.noTaxonomyFound)))||0===ee.length&&React.createElement(u,null,React.createElement(p,{label:R,className:"future-action-warning"},React.createElement("div",null,React.createElement("i",{className:"dashicons dashicons-warning"})," ",e.strings.noTermsFound)))||React.createElement(u,{className:"future-action-full-width"},React.createElement(p,null,React.createElement(d,{label:ue,value:$,suggestions:ee,onChange:function(e){e=function(e){return"object"!==(void 0===e?"undefined":a(e))||null===e?{}:e.map((function(e){return T[e]?T[e].id:(Y(e),e)}))}(e),V(e),J("terms",e)},placeholder:e.strings.addTermsPlaceholder,maxSuggestions:1e3,onFocus:function(e){jQuery(e.target).addClass("cancel")},__experimentalExpandOnFocus:!0,__experimentalAutoSelectFirstMatch:!0})))),React.createElement(u,{className:re},React.createElement(i.ToggleCalendarDatePicker,{currentDate:n,onChangeDate:function(e){B(e),J("date",e)},onToggleCalendar:function(){return q(!w)},is12Hour:!te,startOfWeek:e.startOfWeek,isExpanded:w,strings:e.strings})),React.createElement(u,null,React.createElement("div",{className:"future-action-help-text"},React.createElement("hr",null),React.createElement("span",{className:"dashicons dashicons-info"})," ",ie)),!P&&React.createElement(u,null,React.createElement(p,{className:"notice notice-error"},React.createElement("div",null,D)))))}},738:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FutureActionPanelBlockEditor=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(352);t.FutureActionPanelBlockEditor=function(e){var t=wp.editPost.PluginDocumentSettingPanel,n=wp.data,o=n.useDispatch,i=n.select,l=o("core/editor").editPost,u=i("core/editor").getEditedPostAttribute("publishpress_future_action"),c=o("core/editor"),s=c.lockPostSaving,d=c.unlockPostSaving;return React.createElement(t,{name:"publishpress-future-action-panel",title:e.strings.panelTitle,icon:"calendar",initialOpen:e.postTypeDefaultConfig.autoEnable,className:"post-expirator-panel"},React.createElement("div",{id:"publishpress-future-block-editor"},React.createElement(r.FutureActionPanel,{context:"block-editor",postType:e.postType,isCleanNewPost:e.isCleanNewPost,actionsSelectOptions:e.actionsSelectOptions,statusesSelectOptions:e.statusesSelectOptions,enabled:u.enabled,calendarIsVisible:!0,action:u.action,newStatus:u.newStatus,date:u.date,terms:u.terms,taxonomy:u.taxonomy,taxonomyName:e.taxonomyName,onChangeData:function(t,n){var r=i(e.storeName),o={enabled:r.getEnabled()};o.enabled&&(o.action=r.getAction(),o.newStatus=r.getNewStatus(),o.date=r.getDate(),o.terms=r.getTerms(),o.taxonomy=r.getTaxonomy()),function(e){var t={publishpress_future_action:{}},n=!0,r=!1,o=void 0;try{for(var i,u=Object.entries(e)[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var c=i.value,s=a(c,2),d=s[0],m=s[1];t.publishpress_future_action[d]=m}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}l(t)}(o)},is12Hour:e.is12Hour,timeFormat:e.timeFormat,startOfWeek:e.startOfWeek,storeName:e.storeName,strings:e.strings,onDataIsValid:function(){d("future-action")},onDataIsInvalid:function(){s("future-action")}})))}},27:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FutureActionPanelBulkEdit=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(352),o=n(37);t.FutureActionPanelBulkEdit=function(e){var t=wp.data,n=t.useSelect,i=t.useDispatch,l=t.select,u=wp.element.useEffect,c=n((function(t){return t(e.storeName).getDate()}),[]),s=n((function(t){return t(e.storeName).getEnabled()}),[]),d=n((function(t){return t(e.storeName).getAction()}),[]),m=n((function(t){return t(e.storeName).getNewStatus()}),[]),p=n((function(t){return t(e.storeName).getTerms()}),[]),f=n((function(t){return t(e.storeName).getTaxonomy()}),[]),y=n((function(t){return t(e.storeName).getChangeAction()}),[]),g=n((function(t){return t(e.storeName).getHasValidData()}),[]),v=i(e.storeName).setChangeAction,b=p;"object"===(void 0===p?"undefined":a(p))&&(b=p.join(","));var h=[{value:"no-change",label:e.strings.noChange},{value:"change-add",label:e.strings.changeAdd},{value:"add-only",label:e.strings.addOnly},{value:"change-only",label:e.strings.changeOnly},{value:"remove-only",label:e.strings.removeOnly}];return u((function(){g||"no-change"===y?jQuery("#bulk_edit").prop("disabled",!1):jQuery("#bulk_edit").prop("disabled",!0)}),[g,y]),React.createElement("div",{className:"post-expirator-panel"},React.createElement(r.SelectControl,{label:e.strings.futureActionUpdate,name:"future_action_bulk_change_action",value:y,options:h,onChange:function(e){v(e)}}),["change-add","add-only","change-only"].includes(y)&&React.createElement(r.FutureActionPanel,{context:"bulk-edit",autoEnableAndHideCheckbox:!0,postType:e.postType,isCleanNewPost:e.isNewPost,actionsSelectOptions:e.actionsSelectOptions,statusesSelectOptions:e.statusesSelectOptions,enabled:!0,calendarIsVisible:!1,action:d,newStatus:m,date:c,terms:p,taxonomy:f,taxonomyName:e.taxonomyName,onChangeData:function(t,n){(0,o.getElementByName)("future_action_bulk_enabled").value=l(e.storeName).getEnabled()?1:0,(0,o.getElementByName)("future_action_bulk_action").value=l(e.storeName).getAction(),(0,o.getElementByName)("future_action_bulk_new_status").value=l(e.storeName).getNewStatus(),(0,o.getElementByName)("future_action_bulk_date").value=l(e.storeName).getDate(),(0,o.getElementByName)("future_action_bulk_terms").value=l(e.storeName).getTerms().join(","),(0,o.getElementByName)("future_action_bulk_taxonomy").value=l(e.storeName).getTaxonomy()},is12Hour:e.is12Hour,timeFormat:e.timeFormat,startOfWeek:e.startOfWeek,storeName:e.storeName,strings:e.strings}),React.createElement("input",{type:"hidden",name:"future_action_bulk_enabled",value:s?1:0}),React.createElement("input",{type:"hidden",name:"future_action_bulk_action",value:d}),React.createElement("input",{type:"hidden",name:"future_action_bulk_new_status",value:m}),React.createElement("input",{type:"hidden",name:"future_action_bulk_date",value:c}),React.createElement("input",{type:"hidden",name:"future_action_bulk_terms",value:b}),React.createElement("input",{type:"hidden",name:"future_action_bulk_taxonomy",value:f}),React.createElement("input",{type:"hidden",name:"future_action_bulk_view",value:"bulk-edit"}),React.createElement("input",{type:"hidden",name:"_future_action_nonce",value:e.nonce}))}},21:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FutureActionPanelClassicEditor=void 0;var a=n(352),r=n(284);n(610),t.FutureActionPanelClassicEditor=function(e){(new Date).getTimezoneOffset();var t=function(e){return document.getElementsByName(e)[0]},n=function(e){var n=t(e);return n?n.value:""},o={enabled:"1"===n("future_action_enabled"),action:n("future_action_action"),newStatus:n("future_action_new_status"),date:n("future_action_date"),terms:function(e){var n=t("future_action_terms");if(!n)return[];var a=n.value.split(",");return 1===a.length&&""===a[0]&&(a=[]),a.map((function(e){return parseInt(e)}))}(),taxonomy:n("future_action_taxonomy")};return React.createElement("div",{className:"post-expirator-panel"},React.createElement(a.FutureActionPanel,{context:"classic-editor",postType:e.postType,isCleanNewPost:e.isNewPost,actionsSelectOptions:e.actionsSelectOptions,statusesSelectOptions:e.statusesSelectOptions,enabled:o.enabled,calendarIsVisible:!0,action:o.action,newStatus:o.newStatus,date:o.date,terms:o.terms,taxonomy:o.taxonomy,taxonomyName:e.taxonomyName,onChangeData:function(n,a){var o=(0,r.select)(e.storeName);t("future_action_enabled").value=o.getEnabled()?1:0,t("future_action_action").value=o.getAction(),t("future_action_new_status").value=o.getNewStatus(),t("future_action_date").value=o.getDate(),t("future_action_terms").value=o.getTerms().join(","),t("future_action_taxonomy").value=o.getTaxonomy()},is12Hour:e.is12Hour,timeFormat:e.timeFormat,startOfWeek:e.startOfWeek,storeName:e.storeName,strings:e.strings,onDataIsValid:function(){jQuery("#publish").prop("disabled",!1)},onDataIsInvalid:function(){jQuery("#publish").prop("disabled",!0)}}))}},990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FutureActionPanelQuickEdit=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(352),o=n(284);n(610),t.FutureActionPanelQuickEdit=function(e){var t=(0,o.useSelect)((function(t){return t(e.storeName).getDate()}),[]),n=(0,o.useSelect)((function(t){return t(e.storeName).getEnabled()}),[]),i=(0,o.useSelect)((function(t){return t(e.storeName).getAction()}),[]),l=(0,o.useSelect)((function(t){return t(e.storeName).getTerms()}),[]),u=(0,o.useSelect)((function(t){return t(e.storeName).getTaxonomy()}),[]),c=((0,o.useSelect)((function(t){return t(e.storeName).getHasValidData()}),[]),(0,o.useSelect)((function(t){return t(e.storeName).getNewStatus()}),[])),s=l;return"object"===(void 0===l?"undefined":a(l))&&(s=l.join(",")),React.createElement("div",{className:"post-expirator-panel"},React.createElement(r.FutureActionPanel,{context:"quick-edit",postType:e.postType,isCleanNewPost:e.isNewPost,actionsSelectOptions:e.actionsSelectOptions,statusesSelectOptions:e.statusesSelectOptions,enabled:n,calendarIsVisible:!1,action:i,newStatus:c,date:t,terms:l,taxonomy:u,taxonomyName:e.taxonomyName,onChangeData:function(e,t){},is12Hour:e.is12Hour,timeFormat:e.timeFormat,startOfWeek:e.startOfWeek,storeName:e.storeName,strings:e.strings,onDataIsValid:function(){jQuery(".button-primary.save").prop("disabled",!1)},onDataIsInvalid:function(){jQuery(".button-primary.save").prop("disabled",!0)}}),React.createElement("input",{type:"hidden",name:"future_action_enabled",value:n?1:0}),React.createElement("input",{type:"hidden",name:"future_action_action",value:i||""}),React.createElement("input",{type:"hidden",name:"future_action_new_status",value:c||""}),React.createElement("input",{type:"hidden",name:"future_action_date",value:t||""}),React.createElement("input",{type:"hidden",name:"future_action_terms",value:s||""}),React.createElement("input",{type:"hidden",name:"future_action_taxonomy",value:u||""}),React.createElement("input",{type:"hidden",name:"future_action_view",value:"quick-edit"}),React.createElement("input",{type:"hidden",name:"_future_action_nonce",value:e.nonce}))}},549:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonceControl=void 0;var a=n(610);t.NonceControl=function(e){return e.name||(e.name="_wpnonce"),e.referrer||(e.referrer=!0),React.createElement(a.Fragment,null,React.createElement("input",{type:"hidden",name:e.name,id:e.name,value:e.nonce}),e.referrer&&React.createElement("input",{type:"hidden",name:"_wp_http_referer",value:e.referrer}))}},406:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PostTypeSettingsPanel=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(352),o=n(610),i=n(368),l=n(882),u=n(998),c=wp.components,s=c.PanelRow,d=c.BaseControl,m=null;t.PostTypeSettingsPanel=function(e){var t=e.expireTypeList[e.postType],n=(0,o.useState)(e.settings.taxonomy),c=a(n,2),p=c[0],f=c[1],y=(0,o.useState)([]),g=a(y,2),v=g[0],b=g[1],h=(0,o.useState)(!1),E=a(h,2),S=E[0],_=E[1],x=(0,o.useState)([]),R=a(x,2),T=R[0],N=R[1],C=(0,o.useState)(e.settings.howToExpire),w=a(C,2),P=w[0],O=w[1],k=(0,o.useState)(e.settings.active),F=a(k,2),D=F[0],A=F[1],j=(0,o.useState)(e.settings.defaultExpireOffset),I=a(j,2),B=I[0],M=I[1],V=(0,o.useState)(e.settings.emailNotification),L=a(V,2),H=L[0],W=L[1],Q=(0,o.useState)(e.settings.autoEnabled),U=a(Q,2),q=U[0],z=U[1],G=(0,o.useState)(!1),Y=a(G,2),J=Y[0],K=Y[1],X=(0,o.useState)(""),Z=a(X,2),$=Z[0],ee=Z[1],te=(0,o.useState)(""),ne=a(te,2),ae=ne[0],re=ne[1],oe=(0,o.useState)(t),ie=a(oe,2),le=ie[0],ue=ie[1],ce=(0,o.useState)(e.settings.newStatus),se=a(ce,2),de=se[0],me=se[1],pe=(0,o.useState)(!1),fe=a(pe,2),ye=fe[0],ge=fe[1],ve=(0,o.useState)(""),be=a(ve,2),he=be[0],Ee=be[1],Se=["category","category-add","category-remove","category-remove-all"];(0,o.useEffect)((function(){var t;0===e.taxonomiesList.length&&(t=le.filter((function(e){return-1===Se.indexOf(e.value)})),ue(t))}),[]),(0,o.useEffect)((function(){p&&e.taxonomiesList&&(_(!0),(0,u.apiFetch)({path:(0,i.addQueryArgs)("publishpress-future/v1/terms/"+p)}).then((function(t){var n=[],a=null,r=void 0;t.terms.forEach((function(t){r={value:t.id,label:t.name},n.push(r),p===e.settings.taxonomy&&e.settings.terms.includes(t.id)&&(null===a&&(a=[]),a.push(r.label))})),b(n),N(a),_(!1)})),e.taxonomiesList.forEach((function(e){e.value===p&&re(e.label)})))}),[p]),(0,o.useEffect)((function(){K(function(){if(!D)return ee(""),!0;if(B){m&&m.abort();var e=(m="undefined"==typeof AbortController?void 0:new AbortController)?m.signal:void 0;ge(!0),(0,u.apiFetch)({path:(0,i.addQueryArgs)("publishpress-future/v1/settings/validate-expire-offset"),method:"POST",data:{offset:B},signal:e}).then((function(e){ge(!1),K(e.isValid),ee(e.message),e.isValid?Ee(e.preview):Ee("")}))}return ee(""),!0}())}),[D,p,T,P,ae,B]),(0,o.useEffect)((function(){if(ae){var e=[];t.forEach((function(t){var n=t.label;-1!==Se.indexOf(t.value)&&(n=n.replace("%s",ae.toLowerCase())),e.push({value:t.value,label:n})})),ue(e)}}),[ae]),(0,o.useEffect)((function(){J&&e.onDataIsValid&&e.onDataIsValid(e.postType),!J&&e.onDataIsInvalid&&e.onDataIsInvalid(e.postType)}),[J]),(0,o.useEffect)((function(){ye&&e.onValidationStarted&&e.onValidationStarted(e.postType),!ye&&e.onValidationFinished&&e.onValidationFinished(e.postType)}),[ye]);var _e=v.map((function(e){return e.label})),xe=[React.createElement(r.SettingRow,{label:e.text.fieldActive,key:"expirationdate_activemeta-"+e.postType},React.createElement(r.CheckboxControl,{name:"expirationdate_activemeta-"+e.postType,checked:D||!1,label:e.text.fieldActiveLabel,onChange:function(e){A(e)}}))];return D&&(xe.push(React.createElement(r.SettingRow,{label:e.text.fieldAutoEnable,key:"expirationdate_autoenable-"+e.postType},React.createElement(r.CheckboxControl,{name:"expirationdate_autoenable-"+e.postType,checked:q||!1,label:e.text.fieldAutoEnableLabel,onChange:function(e){z(e)}}))),xe.push(React.createElement(r.SettingRow,{label:e.text.fieldTaxonomy,key:"expirationdate_taxonomy-"+e.postType},React.createElement(r.SelectControl,{name:"expirationdate_taxonomy-"+e.postType,options:e.taxonomiesList,selected:p,noItemFoundMessage:e.text.noItemsfound,description:e.text.fieldTaxonomyDescription,data:e.postType,onChange:function(e){f(e)}}))),xe.push(React.createElement(r.SettingRow,{label:e.text.fieldHowToExpire,key:"expirationdate_expiretype-"+e.postType},React.createElement(r.SelectControl,{name:"expirationdate_expiretype-"+e.postType,className:"pe-howtoexpire",options:le,description:e.text.fieldHowToExpireDescription,selected:P,onChange:function(e){O(e)}}),"change-status"===P&&React.createElement(r.SelectControl,{name:"expirationdate_newstatus-"+e.postType,options:e.statusesList,selected:de,onChange:me}),e.taxonomiesList.length>0&&["category","category-add","category-remove"].indexOf(P)>-1&&React.createElement(r.TokensControl,{label:e.text.fieldTerm,name:"expirationdate_terms-"+e.postType,options:_e,value:T,isLoading:S,onChange:function(e){N(e)},description:e.text.fieldTermDescription,maxSuggestions:1e3,expandOnFocus:!0,autoSelectFirstMatch:!0}))),xe.push(React.createElement(r.SettingRow,{label:e.text.fieldDefaultDateTimeOffset,key:"expired-custom-date-"+e.postType},React.createElement(r.TextControl,{name:"expired-custom-date-"+e.postType,value:B,loading:ye,placeholder:e.settings.globalDefaultExpireOffset,description:e.text.fieldDefaultDateTimeOffsetDescription,unescapedDescription:!0,onChange:function(e){M(e)}}),he&&React.createElement(o.Fragment,null,React.createElement("h4",null,e.text.datePreview),React.createElement("code",null,he)))),xe.push(React.createElement(r.SettingRow,{label:e.text.fieldWhoToNotify,key:"expirationdate_emailnotification-"+e.postType},React.createElement(r.TextControl,{name:"expirationdate_emailnotification-"+e.postType,className:"large-text",value:H,description:e.text.fieldWhoToNotifyDescription,onChange:function(e){W(e)}})))),xe=(0,l.applyFilters)("expirationdate_settings_posttype",xe,e,D,o.useState),React.createElement(r.SettingsFieldset,{legend:e.legend},React.createElement(r.SettingsTable,{bodyChildren:xe}),!J&&React.createElement(s,null,React.createElement(d,{className:"notice notice-error"},React.createElement("div",null,$))))}},438:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PostTypesSettingsPanels=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(352);t.PostTypesSettingsPanels=function(e){var t=[],n=!0,o=!1,i=void 0;try{for(var l,u=Object.entries(e.settings)[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value,s=a(c,2),d=s[0],m=s[1];t.push(React.createElement(r.PostTypeSettingsPanel,{legend:m.label,text:e.text,postType:d,settings:m,expireTypeList:e.expireTypeList,taxonomiesList:e.taxonomiesList[d],statusesList:e.statusesList[d],key:d+"-panel",onDataIsValid:e.onDataIsValid,onDataIsInvalid:e.onDataIsInvalid,onValidationStarted:e.onValidationStarted,onValidationFinished:e.onValidationFinished}))}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return t}},182:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectControl=void 0;var a=n(610),r=n(537);t.SelectControl=function(e){return React.createElement(a.Fragment,null,0===e.options.length&&React.createElement("div",null,e.noItemFoundMessage),e.options.length>0&&React.createElement(r.SelectControl,{label:e.label,name:e.name,id:e.name,className:e.className,value:e.selected,onChange:function(t){e.onChange(t)},"data-data":e.data,options:e.options}),e.children,React.createElement("p",{className:"description"},e.description))}},97:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingRow=void 0,n(610),t.SettingRow=function(e){return React.createElement("tr",{valign:"top"},React.createElement("th",{scope:"row"},React.createElement("label",{htmlFor:""},e.label)),React.createElement("td",null,e.children))}},248:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsFieldset=function(e){return React.createElement("fieldset",null,React.createElement("legend",null,e.legend),e.children)}},65:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsForm=function(e){return React.createElement("form",{method:"post"},e.children)}},56:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsSection=void 0;var a=n(610);t.SettingsSection=function(e){return React.createElement(a.Fragment,null,React.createElement("h2",null,e.title),React.createElement("p",null,e.description),e.children)}},54:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsTable=function(e){return React.createElement("table",{className:"form-table"},React.createElement("tbody",null,e.bodyChildren))}},181:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=function(e){return React.createElement("span",{className:"publishpress-future-spinner"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null))}},774:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubmitButton=function(e){return React.createElement("input",{type:"submit",name:e.name,value:e.text,disabled:e.disabled,className:"button-primary"})}},236:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextControl=void 0;var a=n(610),r=n(537),o=n(352);t.TextControl=function(e){var t;t=e.unescapedDescription?React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.description}}):React.createElement("p",{className:"description"},e.description);var n=e.className?e.className:"";return e.loading&&(n+=" publishpress-future-loading publishpress-future-loading-input"),React.createElement(a.Fragment,null,React.createElement("div",{className:n},React.createElement(r.TextControl,{type:"text",label:e.label,name:e.name,id:e.name,className:e.className,value:e.value,placeholder:e.placeholder,onChange:function(t){e.onChange&&e.onChange(t)}}),e.loading&&React.createElement(o.Spinner,null),t))}},28:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleArrowButton=void 0;var a=n(537);t.ToggleArrowButton=function(e){var t=e.iconExpanded?e.iconExpanded:"arrow-up-alt2",n=e.iconCollapsed?e.iconCollapsed:"arrow-down-alt2",r=e.isExpanded?t:n,o=e.isExpanded?e.titleExpanded:e.titleCollapsed;return React.createElement(a.Button,{isSmall:!0,title:o,icon:r,onClick:function(){e.onClick&&e.onClick()},className:e.className})}},76:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleCalendarDatePicker=void 0;var a=n(28),r=n(730),o=n(610);t.ToggleCalendarDatePicker=function(e){var t=e.isExpanded,n=e.strings,i=e.onToggleCalendar,l=e.currentDate,u=e.onChangeDate,c=e.is12Hour,s=e.startOfWeek;return(0,o.useEffect)((function(){var e=document.querySelector(".future-action-calendar-toggle");if(e){var t=e.nextElementSibling;if(t){var n=t.querySelector(".components-datetime__time");if(n){var a=n.nextSibling;a&&t.insertBefore(e,a)}}}})),React.createElement(o.Fragment,null,React.createElement(a.ToggleArrowButton,{className:"future-action-calendar-toggle",isExpanded:t,iconExpanded:"arrow-up-alt2",iconCollapsed:"calendar",titleExpanded:n.hideCalendar,titleCollapsed:n.showCalendar,onClick:i}),React.createElement(r.DateTimePicker,{currentDate:l,onChange:u,__nextRemoveHelpButton:!0,is12Hour:c,startOfWeek:s}))}},303:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokensControl=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(610),o=n(537);t.TokensControl=function(e){var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,r.useState)(""),2),n=t[0],i=t[1];(0,r.useEffect)((function(){e.value&&i(e.value.join(","))}),[e.value]);var l=void 0;e.description&&(l=e.unescapedDescription?React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.description}}):React.createElement("p",{className:"description"},e.description));var u=e.value?e.value:[];return React.createElement(r.Fragment,null,React.createElement(o.FormTokenField,{label:e.label,value:u,suggestions:e.options,onChange:function(t){e.onChange&&e.onChange(t),"object"===(void 0===t?"undefined":a(t))?i(t.join(",")):i("")},maxSuggestions:e.maxSuggestions,className:"publishpres-future-token-field",__experimentalExpandOnFocus:e.expandOnFocus,__experimentalAutoSelectFirstMatch:e.autoSelectFirstMatch}),React.createElement("input",{type:"hidden",name:e.name,value:n}),l)}},366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TrueFalseControl=function(e){var t=wp.element.Fragment,n=function(t){e.onChange&&e.onChange(t.target.value===e.trueValue&&jQuery(t.target).is(":checked"))};return React.createElement(t,null,React.createElement("input",{type:"radio",name:e.name,id:e.name+"-true",value:e.trueValue,defaultChecked:e.selected,onChange:n}),React.createElement("label",{htmlFor:e.name+"-true"},e.trueLabel),"  ",React.createElement("input",{type:"radio",name:e.name,defaultChecked:!e.selected,id:e.name+"-false",value:e.falseValue,onChange:n}),React.createElement("label",{htmlFor:e.name+"-false"},e.falseLabel),React.createElement("p",{className:"description"},e.description))}},352:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(694);Object.defineProperty(t,"ButtonsPanel",{enumerable:!0,get:function(){return a.ButtonsPanel}});var r=n(409);Object.defineProperty(t,"FutureActionPanel",{enumerable:!0,get:function(){return r.FutureActionPanel}});var o=n(738);Object.defineProperty(t,"FutureActionPanelBlockEditor",{enumerable:!0,get:function(){return o.FutureActionPanelBlockEditor}});var i=n(21);Object.defineProperty(t,"FutureActionPanelClassicEditor",{enumerable:!0,get:function(){return i.FutureActionPanelClassicEditor}});var l=n(990);Object.defineProperty(t,"FutureActionPanelQuickEdit",{enumerable:!0,get:function(){return l.FutureActionPanelQuickEdit}});var u=n(27);Object.defineProperty(t,"FutureActionPanelBulkEdit",{enumerable:!0,get:function(){return u.FutureActionPanelBulkEdit}});var c=n(406);Object.defineProperty(t,"PostTypeSettingsPanel",{enumerable:!0,get:function(){return c.PostTypeSettingsPanel}});var s=n(438);Object.defineProperty(t,"PostTypesSettingsPanels",{enumerable:!0,get:function(){return s.PostTypesSettingsPanels}});var d=n(97);Object.defineProperty(t,"SettingRow",{enumerable:!0,get:function(){return d.SettingRow}});var m=n(248);Object.defineProperty(t,"SettingsFieldset",{enumerable:!0,get:function(){return m.SettingsFieldset}});var p=n(65);Object.defineProperty(t,"SettingsForm",{enumerable:!0,get:function(){return p.SettingsForm}});var f=n(56);Object.defineProperty(t,"SettingsSection",{enumerable:!0,get:function(){return f.SettingsSection}});var y=n(54);Object.defineProperty(t,"SettingsTable",{enumerable:!0,get:function(){return y.SettingsTable}});var g=n(774);Object.defineProperty(t,"SubmitButton",{enumerable:!0,get:function(){return g.SubmitButton}});var v=n(561);Object.defineProperty(t,"CheckboxControl",{enumerable:!0,get:function(){return v.CheckboxControl}});var b=n(182);Object.defineProperty(t,"SelectControl",{enumerable:!0,get:function(){return b.SelectControl}});var h=n(236);Object.defineProperty(t,"TextControl",{enumerable:!0,get:function(){return h.TextControl}});var E=n(303);Object.defineProperty(t,"TokensControl",{enumerable:!0,get:function(){return E.TokensControl}});var S=n(549);Object.defineProperty(t,"NonceControl",{enumerable:!0,get:function(){return S.NonceControl}});var _=n(366);Object.defineProperty(t,"TrueFalseControl",{enumerable:!0,get:function(){return _.TrueFalseControl}});var x=n(181);Object.defineProperty(t,"Spinner",{enumerable:!0,get:function(){return x.Spinner}})},500:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=t.getCurrentTimeInSeconds=function(){return o((new Date).getTime())},a=(t.getCurrentTimeAsTimestamp=function(){return a(n())},t.formatUnixTimeToTimestamp=function(e){var t=new Date(o(e));return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}),r=(t.formatTimestampToUnixTime=function(e){var t=new Date(e);return o(t.getTime())},t.timeIsInSeconds=function(e){return parseInt(e).toString().length<=10}),o=t.normalizeUnixTimeToSeconds=function(e){return e=parseInt(e),r()?e:e/1e3};t.normalizeUnixTimeToMilliseconds=function(e){return e=parseInt(e),r()?1e3*e:e}},37:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(t.compact=function(e){return e?(Array.isArray(e)||"object"!==(void 0===e?"undefined":n(e))||(e=Object.values(e)),e.filter((function(e){return null!=e&&""!==e}))):[]},t.debugLogFactory=function(e){return function(t){for(var n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o;console&&e.isDebugEnabled&&(o=console).debug.apply(o,["[Future]",t].concat(a))}},t.isGutenbergEnabled=function(){return document.body.classList.contains("block-editor-page")},t.getElementByName=function(e){return document.getElementsByName(e)[0]},t.getFieldByName=function(e,t){return document.querySelector("#the-list tr#post-"+t+" .column-expirationdate input#future_action_"+e+"-"+t)});t.getFieldValueByName=function(e,t){var n=a(e,t);return n?n.value:null},t.getFieldValueByNameAsArrayOfInt=function(e,t){var n=a(e,t);return n&&n.value?("number"==typeof n.value&&(n.value=n.value.toString()),n.value.split(",").map((function(e){return parseInt(e)}))):[]},t.getFieldValueByNameAsBool=function(e,t){var n=a(e,t);return!!n&&("1"===n.value||"true"===n.value)},t.getActionSettingsFromColumnData=function(e){var t=document.querySelector("#post-expire-column-"+e);return{enabled:"1"===t.dataset.actionEnabled,action:t.dataset.actionType,date:t.dataset.actionDate,dateUnix:t.dataset.actionDateUnix,taxonomy:t.dataset.actionTaxonomy,terms:t.dataset.actionTerms,newStatus:t.dataset.actionNewStatus}},t.isNumber=function(e){return!isNaN(e)}},533:e=>{e.exports=ReactDOM},890:e=>{e.exports=publishpressFutureSettingsConfig},998:e=>{e.exports=wp},537:e=>{e.exports=wp.components},284:e=>{e.exports=wp.data},610:e=>{e.exports=wp.element},882:e=>{e.exports=wp.hooks},368:e=>{e.exports=wp.url}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={exports:{}};return l[e](n,n.exports,c),n.exports}e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=c(352),a=c(610),r=c(890),c(533),o=document.getElementById("publishpress-future-settings-post-types"),i=React.createElement((function(o){var i=(0,a.useState)({}),l=t(i,2),u=l[0],c=l[1],s=(0,a.useState)({}),d=t(s,2),m=d[0],p=d[1],f=(0,a.useState)(!0),y=t(f,2),g=y[0],v=y[1],b=(0,a.useState)(!0),h=t(b,2),E=h[0],S=h[1];(0,a.useEffect)((function(){var e=!0,n=!0,a=!1,r=void 0;try{for(var o,i=Object.entries(u)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value,c=t(l,2);if(c[0],!c[1]){e=!1;break}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}v(e)}),[u]),(0,a.useEffect)((function(){var e=!0,n=!0,a=!1,r=void 0;try{for(var o,i=Object.entries(m)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value,u=t(l,2);if(u[0],u[1]){e=!1;break}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}S(e)}),[m]);var _=E?r.text.saveChanges:r.text.saveChangesPendingValidation;return React.createElement(a.StrictMode,null,React.createElement(n.SettingsForm,null,React.createElement(n.NonceControl,{name:"_postExpiratorMenuDefaults_nonce",nonce:r.nonce,referrer:r.referrer}),React.createElement(n.SettingsSection,{title:r.text.settingsSectionTitle,description:r.text.settingsSectionDescription},React.createElement(n.PostTypesSettingsPanels,{settings:r.settings,text:r.text,expireTypeList:r.expireTypeList,taxonomiesList:r.taxonomiesList,statusesList:r.statusesList,onDataIsValid:function(t){u[t]=!0,c(e({},u))},onDataIsInvalid:function(t){u[t]=!1,c(e({},u))},onValidationStarted:function(t){m[t]=!0,p(e({},m))},onValidationFinished:function(t){m[t]=!1,p(e({},m))}})),React.createElement(n.ButtonsPanel,null,React.createElement(n.SubmitButton,{id:"expirationdateSaveDefaults",name:"expirationdateSaveDefaults",disabled:!g||!E,text:_}))))}),null),(0,a.createRoot)(o).render(i)})();
//# sourceMappingURL=settings-post-types.js.map