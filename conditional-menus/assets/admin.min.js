!function($,a,o){"use strict";var t,c,n,s=[],i="";function l(e=a.body){let t=e.getElementsByClassName("themify_cm_loader")[0];t||((t=a.createElement("div")).className="themify_cm_loader",e.prepend(t)),t.classList.add("busy")}function m(e=a.body){const t=e.getElementsByClassName("themify_cm_loader")[0];t&&t.classList.remove("busy")}function r(e){const t=(e=e||c).querySelectorAll('input[type="checkbox"]');for(let e=0;e<t.length;e++)t[e].checked=i.includes(t[e].name+"=on")}function u(){var e=a;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function d(t){$.ajax({url:ajaxurl,type:"POST",data:{action:"themify_cm_parse_conditions",nonce:o.nonce,selected:t.value},success:function(e){$(t).closest(".menu-location-menus").find(".themify_cm_conditions").remove().end().append(e)}})}function f(e,t,n,i){var e=e.clone().removeClass("cm-location"),a=(e.find(".menu-location-title").empty(),e.find("select").attr("name").match(/menu-locations\[(.*)\]/)[1]),n=(null==t&&(void 0!==s[a]||(s[a]=parseInt($(function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}(o.options[a])).last()[0]),function(e){return!isNaN(parseFloat(e))&&isFinite(e)}(s[a]))||(s[a]=1),t=s[a]++),e.find("select").find('option[value="0"]').text(o.lang.disable_menu).before('<option value=""></option>').end().val(n).attr("name","themify_cm["+a+"]["+t+"][menu]"),(e=function(e,t,n,i){return i=i||"",e.find(".locations-row-links").empty().html('<input type="hidden" data-id="'+n+'" name="'+t+"\" value='"+i+'\' /><a href="#" class="themify-cm-conditions">'+o.lang.conditions+'</a> <a class="themify-cm-remove" href="#">x</a>'),e}(e,"themify_cm["+a+"]["+t+"][condition]",t,i)).insertBefore(jQuery('.menu-locations tr[data-menu="'+a+'"]')),$(".menu-location-menus select").length),i=$(".cm-replacement-button").length+1;e.find(".menu-location-menus").attr("data-item",a+t),n===i&&$(".themify-cm-conditions-container:first").addClass("themify-cm-conditions-container-"+a+t).data("item",a+t),i<n&&$(".themify-cm-conditions-container:first").clone().removeClass().addClass("themify-cm-conditions-container themify-admin-lightbox tf_clearfix themify-cm-conditions-container-"+a+t).data("item",a+t).insertAfter(".themify-cm-conditions-container:last"),d(e[0].querySelector('input[name^="themify_cm"]'))}$(".menu-locations .locations-row-links").empty(),$("body").on("click",".themify-cm-conditions",function(e){e.preventDefault(),t=this.previousElementSibling,i=decodeURI(t.value);e=$(a).scrollTop()+80;return c||(l(),$.ajax({type:"POST",url:ajaxurl,async:!1,data:{action:"themify_cm_get_conditions",nonce:o.nonce},success(e){m();const t=a.createElement("template");t.innerHTML=e,a.body.appendChild(t.content)}}),c=a.getElementById("themify-cm-conditions"),n=a.getElementById("themify-cm-overlay")),r(),n.style.display="block",$(c).show().css("top",u()).animate({top:e},800),$("#visibility-tabs",c).tabs(),$("#visibility-tabs .themify-visibility-inner-tabs",c).tabs(),!1}).on("click","#visibility-tabs .themify_cm_load_ajax, #visibility-tabs .inline-tabs a",function(e){let t=this.dataset.type,n=c.querySelector(this.getAttribute("href"));t?n.getElementsByClassName("themify-visibility-items-page-1")[0]||$.ajax({url:ajaxurl,type:"post",data:{action:"themify_cm_create_inner_page",nonce:o.nonce,type:t},beforeSend:function(){l()},success:function(e){m(),n.firstElementChild.innerHTML=e,r(n)}}):n.querySelector(".inline-tabs .ui-tabs-active a").click()}).on("click",".themify-visibility-pagination a.page-numbers",function(e){e.preventDefault();const t=parseInt(this.getAttribute("href")),n=this.closest(".themify-visibility-items-inner"),i=n.getElementsByClassName("themify-visibility-items-page");n.getElementsByClassName("themify-visibility-items-page-"+t)[0]||$.ajax({url:ajaxurl,async:!1,type:"post",data:{action:"themify_cm_create_inner_page",type:(this.closest(".themify-visibility-inner-tab")?this.closest(".themify-visibility-inner-tabs"):c).querySelector(".ui-tabs-active a").dataset.type,paged:t,nonce:o.nonce},beforeSend:function(){l()},success:function(e){m();const t=a.createElement("template");t.innerHTML=e,r(t.content),n.appendChild(t.content)}});for(let e=0;e<i.length;e++)i[e].style.display=i[e].classList.contains("themify-visibility-items-page-"+t)?"block":"none"}).on("change",'.themify-cm-conditions-container input[type="checkbox"]',function(){this.checked?i+="&"+this.name+"=on":i=i.replace(this.name+"=on","")}).on("click",".themify-cm-conditions-container .themify-cm-close, #themify-cm-overlay",function(e){return e.preventDefault(),$(c).animate({top:u()},800,function(){n.style.display="none",c.style.display="none",i="",r()}),!1}).on("click",".themify-mc-add-assignment",function(){return f($("#locations-"+$(this).closest("tr").attr("data-menu")).closest("tr")),!1}).on("click",".themify-cm-save",function(){return t.value=i,$(".menu-location-menus[data-item="+t.dataset.id+"]").val(i),d(t),n.click(),!1}).on("click",".themify-cm-remove",function(){return $(this).closest("tr").fadeOut(function(){$(this).remove()}),!1}).on("click",".themify-cm-conditions-container .uncheck-all",function(e){e.preventDefault(),i="",r()}).on("mouseover",".themify_cm_conditions li",function(){if(!this.getElementsByClassName("remove-item")[0]){const e=a.createElement("a"),t=a.createElement("span");e.className="remove-item",t.className="themify-cm-close",e.appendChild(t),this.appendChild(e)}}).on("click",".themify_cm_conditions .remove-item",function(e){e.preventDefault();const t=this.closest(".menu-location-menus").querySelector('input[name^="themify_cm"]'),n=this.closest("li");t.value=decodeURIComponent(t.value).replace(n.dataset.id+"=on",""),n.remove()}),window.addEventListener("load",function(){$.each(o.nav_menus,function(e,t){$("#locations-"+t).closest("tr").after('<tr class="cm-replacement-button" data-menu="'+t+'"><td>&nbsp;</td><td><a href="#" class="themify-mc-add-assignment">'+o.lang.add_assignment+"</a></td></tr>")}),$.each(o.options,function(n,e){"object"==typeof e&&$.each(e,function(e,t){f($("#locations-"+n).closest("tr"),e,t.menu,t.condition),s[n]=++e})})})}(jQuery,document,themify_cm);