function iljCreateModal(t,a){var i=jQuery("<div/>").addClass("ilj_modal show"),e=jQuery("<div/>").addClass("ilj_modal_wrap").append(i).on("click",function(t){n(t)}),t=jQuery("<div/>").addClass("ilj_modal_header").append(jQuery("<h2 />").text(t)),a=jQuery("<div/>").addClass("ilj_modal_body").html(a),s=jQuery("<div/>").addClass("ilj_modal_footer").append(jQuery("<button/>").text("OK").addClass("button button-primary").on("click",function(t){n(t)})),n=function(t){t.preventDefault(),i.removeClass("show").addClass("hide"),jQuery("body").css({overflowY:"auto"}),setTimeout(function(){e.remove()},200)}.bind(e);i.append(t),i.append(a),i.append(s),jQuery("body").append(e).css({overflowY:"hidden"})}!function(d){d.fn.ilj_tabnav=function(){var t=this;d(this).find(".nav-tab-wrapper").on("click","a",function(){d(this).addClass("nav-tab-active"),d(this).siblings("a").removeClass("nav-tab-active"),t.find(".tab-content").removeClass("active"),t.find(".tab-content#"+d(this).data("target")).addClass("active")})};var s={width:"",maxWidth:"200",useTitle:!0,delay:100,speed:500,background:"#32373c",color:"#eeeeee",size:"small"},n={aria:{sortAscending:ilj_statistic_translation.datatables_aria_sortAscending,sortDescending:ilj_statistic_translation.datatables_aria_sortDescending},paginate:{first:ilj_statistic_translation.datatables_paginate_first,last:ilj_statistic_translation.datatables_paginate_last,next:ilj_statistic_translation.datatables_paginate_next,previous:ilj_statistic_translation.datatables_paginate_previous},emptyTable:ilj_statistic_translation.datatables_empty_table,info:ilj_statistic_translation.datatables_info,infoEmpty:ilj_statistic_translation.datatables_info_empty,infoFiltered:ilj_statistic_translation.datatables_info_filtered,lengthMenu:ilj_statistic_translation.datatables_length_menu,loadingRecords:ilj_statistic_translation.datatables_loading_records,processing:ilj_statistic_translation.datatables_processing,search:ilj_statistic_translation.datatables_search,zeroRecords:ilj_statistic_translation.datatables_zero_records};d(document).ready(function(){var t,a=d(".warning-tip");a.length&&(t=d.extend(Object.assign({},s),{tooltipHover:!0,useTitle:!1,content:d("<div/>").html(a.find(".the-tip").html()).css({margin:"10px 20px",display:"block"}),maxWidth:"250px"}),a.iljtipso(t))}),d(document).ready(function(){function a(o){e={},(i=o).dataTable().api().rows().every(function(t){var t=i.dataTable().api().row(t).data(),t=d(t[2].display),a=t.attr("data-type"),t=t.text();void 0===e[a]&&(e[a]=[]),e[a].push(t)}),d.each(e,function(t,a){e[t]=e[t].filter(function(t,a,i){return i.indexOf(t)==a})});var i,e,t=e,a=d("<div/>").addClass("ilj-type-filter-wrapper"),r=d("<ul/>"),s=d("<a/>").addClass("ilj-type-filter-dropdown").text(ilj_statistic_translation.filter_type).on("click",function(){a.toggleClass("show")});return a.append(s,r),r.activeTypes=[],r.activeTypes.remove=function(t){t=this.indexOf(t);-1<t&&this.splice(t,1)},d.each(t,function(n,t){var a=function(t){switch(t){case"post":t=ilj_statistic_translation.filter_section_posts_pages;break;case"term":t=ilj_statistic_translation.filter_section_taxonomies;break;case"custom":t=ilj_statistic_translation.filter_section_custom_links}return t}(n),a=d("<li/>").html(d("<span/>").text(a)),l=d("<ul/>");r.append(a),t.length&&a.append(l),d.each(t,function(t,i){var a=d("<input/>").attr({type:"checkbox",checked:"checked"}).on("change",function(){var t=n+";"+i,t=(!0===d(this).prop("checked")?r.activeTypes.push(t):r.activeTypes.remove(t),o.dataTable().api().column("th.type")),a=r.activeTypes.length?r.activeTypes.join("|"):null;t.search(a,!0,!1).draw()}),e=d("<label/>").html(d("<span/>").text(i).attr("data-type",n)),s=d("<li/>").addClass("type").html(e);r.activeTypes.push(n+";"+i),e.prepend(a),l.append(s)})}),a}var t,e=d(".ilj-statistic").find(".nav-tab-wrapper");e.length&&d(".ilj-statistic").ilj_tabnav(),d(".tip").iljtipso(s),d("#statistic-links").length&&(t={action:"ilj_render_links_statistic"},d.ajax({url:ajaxurl,type:"POST",data:t}).done(function(t){var i=d(t);"TABLE"==i.prop("tagName")&&i.find("tbody").find("tr").length?(e.show(),d("#statistic-links").html(i),i.DataTable({stateSave:!1,columnDefs:[{orderable:!1,targets:5},{responsivePriority:1,targets:0},{responsivePriority:2,targets:3},{responsivePriority:3,targets:4},{responsivePriority:4,targets:5}],language:n,stateLoaded:function(t,a){i.find(".tip").iljtipso(s)},initComplete:function(){var t=a(i);d("#statistic-links .dataTables_wrapper .dataTables_filter").append(t)},responsive:!0}),i.find(".tip").iljtipso(s),i.on("click",".ilj-statistic-detail",function(){d(".ilj-statistic-cover").show();var t=d(this).data("id"),a=d(this).data("type"),i=d(this).data("direction"),e="",s=0,n=d(this).closest("tr").find("td.asset-title").text(),t=("to"==i?(e=ilj_statistic_translation.incoming_links,s=d(this).closest('a[data-direction="to"]').text()):"from"==i&&(e=ilj_statistic_translation.outgoing_links,s=d(this).closest('a[data-direction="from"]').text()),{action:"ilj_render_link_detail_statistic",id:t,type:a,direction:i});d.ajax({url:ajaxurl,type:"POST",data:t}).done(function(t){iljCreateModal(e+' "'+n+'" ('+s+")",d("<div/>").addClass("ilj-statistic").html(t)),d(".ilj-statistic-cover").hide()})})):d(".ilj-statistic").html(i)})),d("#statistic-anchors").length&&(t={action:"ilj_render_anchors_statistic"},d.ajax({url:ajaxurl,type:"POST",data:t}).done(function(t){var i=d(t);"TABLE"==i.prop("tagName")&&i.find("tbody").find("tr").length&&(d("#statistic-anchors").html(i),i.DataTable({stateSave:!1,language:n,stateLoaded:function(t,a){i.find(".tip").iljtipso(s)},columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:3},{responsivePriority:3,targets:2},{responsivePriority:4,targets:1}],responsive:!0}),i.on("click",".ilj-statistic-detail",function(){d(".ilj-statistic-cover").show();var a=d(this).data("anchor"),i=d(this).text();d.ajax({url:ajaxurl,type:"POST",data:{action:"ilj_render_anchor_detail_statistic",anchor:a}}).done(function(t){iljCreateModal(ilj_statistic_translation.anchor_text+' "'+a+'" ('+i+")",d("<div/>").addClass("ilj-statistic").html(t)),d(".ilj-statistic-cover").hide()})}))}))}),d(document).on("mouseup",function(t){var a=d(".ilj-type-filter-wrapper");a.is(t.target)||0!==a.has(t.target).length||a.removeClass("show")})}(jQuery);