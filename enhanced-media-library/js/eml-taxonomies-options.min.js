window.eml=window.eml||{l10n:{}},function(e,t){function n(e){return!!new RegExp("^(?=.{3,32}$)[a-z0-9_]*[a-z][a-z0-9_]*$").test(e)}function m(e){const t={"а":"a","б":"b","в":"v","г":"g","ґ":"g","д":"d","е":"e","є":"ie","ж":"zh","з":"z","и":"y","і":"i","ї":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"shch","ь":"","ю":"iu","я":"ia","ё":"e","ы":"y","ъ":"","э":"e","ä":"a","á":"a","à":"a","â":"a","ã":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ı":"i","ğ":"g","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ş":"s","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u"};return e=e.split("").map((e=>t[e]||e)).join("")}function s(t,n){n.attr("id",t),(""!==t&&e(".wpuxss-eml-clone-taxonomy[id="+t+"], .wpuxss-eml-taxonomy[id="+t+"], .wpuxss-non-eml-taxonomy[id="+t+"]").length>1||-1!==e.inArray(t,["link_category","post_format","wp_theme","wp_pattern_category","wp_template_part_area"]))&&(n.attr("id",""),emlAlertDialog(eml.l10n.tax_error_duplicate_title,eml.l10n.tax_error_duplicate_text,eml.l10n.okay,"button button-primary").done((function(){return!1})))}function o(t,n){e.each({assigned:".wpuxss-eml-assigned",eml_media:".wpuxss-eml-eml_media",create_taxonomy:".wpuxss-eml-create_taxonomy"},(function(e,m){n.find(m).attr("name","wpuxss_eml_taxonomies["+t+"]["+e+"]")})),e.each({labels:["singular_name","name","menu_name","all_items","edit_item","view_item","update_item","add_new_item","new_item_name","parent_item","search_items"],hierarchical:"hierarchical",show_admin_column:"show_admin_column",admin_filter:"admin_filter",media_uploader_filter:"media_uploader_filter",media_popup_taxonomy_edit:"media_popup_taxonomy_edit",sort:"sort",show_in_rest:"show_in_rest",rewrite:["slug","with_front"]},(function(m,s){m===s?n.find(".wpuxss-eml-"+s).attr("name","wpuxss_eml_taxonomies["+t+"]["+s+"]"):e.each(s,(function(e,s){n.find(".wpuxss-eml-"+s).attr("name","wpuxss_eml_taxonomies["+t+"]["+m+"]["+s+"]")}))}))}function l(t,n){var m={edit:".wpuxss-eml-edit_item",view:".wpuxss-eml-view_item",update:".wpuxss-eml-update_item",add_new:".wpuxss-eml-add_new_item",new:".wpuxss-eml-new_item_name",parent:".wpuxss-eml-parent_item"};""!==t?e.each(m,(function(e,m){n.find(m).val(eml.l10n[e]+" "+t)})):e.each(m,(function(e,t){n.find(t).val("")}))}t.extend(eml.l10n,wpuxss_eml_taxonomies_options_l10n_data),e(document).on("click","li .wpuxss-eml-button-remove",(function(){var t=e(this).parent();return t.hasClass("wpuxss-eml-clone-taxonomy")?t.hide(300,(function(){e(this).remove()})):emlConfirmDialog(eml.l10n.tax_deletion_confirm_title,eml.l10n.tax_deletion_confirm_text_p1+eml.l10n.tax_deletion_confirm_text_p2+eml.l10n.tax_deletion_confirm_text_p3+eml.l10n.tax_deletion_confirm_text_p4,eml.l10n.tax_deletion_yes,eml.l10n.cancel,"button button-primary eml-warning-button").done((function(){t.hide(300,(function(){e(this).remove()}))})).fail((function(){return!1})),!1})),e(document).on("click",".wpuxss-eml-button-create-taxonomy",(function(){return e(".wpuxss-eml-media-taxonomy-list").find(".wpuxss-eml-clone").clone().attr("class","wpuxss-eml-clone-taxonomy").appendTo(".wpuxss-eml-media-taxonomy-list").show(300),!1})),e(document).on("click",".wpuxss-eml-button-edit",(function(){return e(this).parent().find(".wpuxss-eml-taxonomy-edit").toggle(300),e(this).html((function(e,t){return t==eml.l10n.edit+" ↓"?eml.l10n.close+" ↑":eml.l10n.edit+" ↓"})),!1})),e(document).on("blur",".wpuxss-eml-clone-taxonomy .wpuxss-eml-taxonomy-name",(function(){var t=e(this).val().toLowerCase(),l=e(this).parents(".wpuxss-eml-clone-taxonomy"),i=l.find(".wpuxss-eml-slug").val();return""===t?(s("",l),void o("",l)):(""!==(t=t.replace(/[^a-z0-9_]/g,""))&&"year"==(t=m(t))&&(t="media_year"),e(this).val(t),""===i&&l.find(".wpuxss-eml-slug").val(t),n(t)?(s(t,l),void o(t,l)):(s("",l),o("",l),void emlAlertDialog(eml.l10n.tax_error_wrong_taxname_title,eml.l10n.tax_error_wrong_taxname,eml.l10n.okay,"button button-primary").done((function(){return!1}))))})),e(document).on("blur",".wpuxss-eml-slug",(function(){var t=e(this).val().toLowerCase(),n=e(this).parents(".wpuxss-eml-taxonomy-edit").find(".wpuxss-eml-taxonomy-name").val().toLowerCase();""!==(t=t||n)&&(t=t.replace(/^[_-]+|[^a-z0-9_-]|[_-]+$/g,"").replace(/([_-])+/g,"$1"),e(this).val(t),""===t&&(e(this).val(n),emlAlertDialog(eml.l10n.tax_error_wrong_slug_title,eml.l10n.tax_error_wrong_slug,eml.l10n.okay,"button button-primary").done((function(){return!1}))))})),e(document).on("blur",".wpuxss-eml-clone-taxonomy .wpuxss-eml-singular_name",(function(){var t,i=e(this).val().trim().replace(/(<([^>]+)>)/g,""),u=e(this).closest(".wpuxss-eml-clone-taxonomy"),a=e(this).parents(".wpuxss-eml-taxonomy-edit"),r=a.find(".wpuxss-eml-taxonomy-name"),p=a.find(".wpuxss-eml-slug").val();if(e(this).val(i),""!==i){if(l(i,a),t=m(t=i.toLowerCase().replace(/[ &-]+/g,"_").replace(/[^a-z0-9_]/g,"")),r.val(t),""===p&&(p=t.replace(/^[_-]+|[^a-z0-9_-]|[_-]+$/g,"").replace(/([_-])+/g,"$1"),a.find(".wpuxss-eml-slug").val(p)),n(t))return s(t,u),void o(t,u);s("",u),o("",u)}else l("",a)})),e(document).on("blur",".wpuxss-eml-taxonomy .wpuxss-eml-singular_name",(function(){var t=e(this).val().trim().replace(/(<([^>]+)>)/g,""),n=e(this).parents(".wpuxss-eml-taxonomy-edit");e(this).val(t),l(t,n)})),e(document).on("blur",".wpuxss-eml-clone-taxonomy .wpuxss-eml-name, .wpuxss-eml-taxonomy .wpuxss-eml-name",(function(){var t=e(this).val().trim().replace(/(<([^>]+)>)/g,""),n=e(this).parents(".wpuxss-eml-taxonomy-edit"),m=e(this).closest(".wpuxss-eml-clone-taxonomy").find(".wpuxss-eml-taxonomy-label span");e(this).val(t),function(t,n,m){var s={all:".wpuxss-eml-all_items",search:".wpuxss-eml-search_items"};""!==t?(n.find(".wpuxss-eml-menu_name").val(t),m.text(t),e.each(s,(function(e,m){n.find(m).val(eml.l10n[e]+" "+t)}))):(n.find(".wpuxss-eml-menu_name").val(""),m.text(eml.l10n.tax_new),e.each(s,(function(e,t){n.find(t).val("")})))}(t,n,m)})),e("#wpuxss-eml-form-taxonomies").on("submit",(function(t){var n,m,s,o,l=["link_category","post_format","wp_theme","wp_pattern_category","wp_template_part_area"],i=!0,u=eml.l10n.tax_error_empty_fileds_title,a="";return e(".wpuxss-eml-clone-taxonomy, .wpuxss-eml-taxonomy").each((function(t){n=e(this).attr("id"),m=e(".wpuxss-eml-singular_name",this).val(),s=e(".wpuxss-eml-name",this).val(),o=e(".wpuxss-eml-slug",this).val(),n?o?m||s?m?s?(e(".wpuxss-eml-clone-taxonomy[id="+n+"], .wpuxss-eml-taxonomy[id="+n+"], .wpuxss-non-eml-taxonomy[id="+n+"]").length>1||-1!==e.inArray(n,l))&&(i=!1,u=eml.l10n.tax_error_duplicate_title,a=eml.l10n.tax_error_duplicate_text):(i=!1,a=eml.l10n.tax_error_empty_plural):(i=!1,a=eml.l10n.tax_error_empty_singular):(i=!1,a=eml.l10n.tax_error_empty_both):e(".wpuxss-eml-slug",this).val(n):(i=!1,a="<p>"+eml.l10n.tax_error_empty_taxname+"</p><p>"+eml.l10n.tax_error_wrong_taxname+"</p>")})),i||emlAlertDialog(u,a,eml.l10n.okay,"button button-primary").done((function(){return e(".wpuxss-eml-clone-taxonomy, .wpuxss-eml-taxonomy-name").trigger("focus"),!1})),i})),e(document).on("click",".eml-button-synchronize-terms",(function(t){var n,m,s;if((n=e(t.target)).hasClass("disabled"))return t.preventDefault(),!1;emlConfirmDialog(eml.l10n.sync_warning_title,eml.l10n.sync_warning_text,eml.l10n.sync_warning_yes,eml.l10n.sync_warning_no,"button button-primary").done((function(){m=n.attr("data-post-type"),s=n.attr("data-taxonomy"),emlFullscreenSpinnerStart(eml.l10n.in_progress_sync_text),e.post(ajaxurl,{nonce:eml.l10n.bulk_edit_nonce,action:"eml-synchronize-terms",post_type:m,taxonomy:s},(function(e){emlFullscreenSpinnerStop()}))})).fail((function(){return!1}))})),e(document).on("click","input[readonly], .disabled .submit input.button",(function(e){e.preventDefault()}))}(jQuery,_);