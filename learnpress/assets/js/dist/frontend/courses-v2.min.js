(()=>{"use strict";const e={};"undefined"!=typeof lpDataAdmin&&(e.admin={apiAdminNotice:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/admin-notices",apiAdminOrderStatic:lpDataAdmin.lp_rest_url+"lp/v1/orders/statistic",apiAddons:lpDataAdmin.lp_rest_url+"lp/v1/addon/all",apiAddonAction:lpDataAdmin.lp_rest_url+"lp/v1/addon/action",apiAddonsPurchase:lpDataAdmin.lp_rest_url+"lp/v1/addon/info-addons-purchase",apiSearchCourses:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-course",apiSearchUsers:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-user",apiAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/assign-user-course",apiUnAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/unassign-user-course"}),"undefined"!=typeof lpData&&(e.frontend={apiWidgets:lpData.lp_rest_url+"lp/v1/widgets/api",apiCourses:lpData.lp_rest_url+"lp/v1/courses/archive-course",apiAJAX:lpData.lp_rest_url+"lp/v1/load_content_via_ajax/"});const t=e,s=()=>{let e=window.location.href;return e.includes("?")&&(e=e.split("?")[0]),e},a=(e,t)=>{const s=new URL(e);return Object.keys(t).forEach((e=>{s.searchParams.set(e,t[e])})),s},r=(e,t)=>{new IntersectionObserver((function(e){for(const s of e)s.isIntersecting&&t(s)})).observe(e)};let n;"undefined"==typeof lpData&&console.log("lpData is undefined"),document.addEventListener("change",(function(e){const t=e.target;window.lpCoursesList.onChangeSortBy(e,t),window.lpCoursesList.onChangeTypeLayout(e,t)})),document.addEventListener("click",(function(e){const t=e.target;window.lpCoursesList.clickNumberPage(e,t),window.lpCoursesList.LoadMore(e,t)})),document.addEventListener("keyup",(function(e){const t=e.target;window.lpCoursesList.searchCourse(e,t)})),document.addEventListener("submit",(function(e){e.target})),window.lpCoursesList=(()=>{const e=".learn-press-courses",o=".lp-target",l="courses-btn-load-more",i=s();return{clickNumberPage:(e,s)=>{const r=s.closest(".page-numbers");if(!r)return;const n=r.closest(`${o}`);if(!n)return;const l={...JSON.parse(n.dataset.send)};if(l.args.hasOwnProperty("paged")||(l.args.paged=1),0===l.args.courses_load_ajax)return;e.preventDefault(),r.classList.contains("prev")?l.args.paged--:r.classList.contains("next")?l.args.paged++:l.args.paged=r.textContent,n.dataset.send=JSON.stringify(l),lpData.urlParams.paged=l.args.paged,window.history.pushState({},"",a(i,lpData.urlParams));const c=n.closest("div:not(.lp-target)").querySelector(".lp-loading-change");c&&(c.style.display="block");const d=n.closest(".learn-press-courses-wrapper");if(d){const e={behavior:"smooth"};d.scrollIntoView(e)}const p={success:e=>{const{status:t,message:s,data:a}=e;n.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{c&&(c.style.display="none")}};window.lpAJAXG.fetchAPI(t.frontend.apiAJAX,l,p)},LoadMore:(s,a)=>{const r=a.closest(`.${l}`);if(!a.classList.contains(l)){if(!r)return;a=r}const n=a.closest(`${o}`);if(!n)return;s.preventDefault();const i=a.querySelector(".lp-loading-circle"),c={...JSON.parse(n.dataset.send)};c.args.hasOwnProperty("paged")||(c.args.paged=1),c.args.paged++,n.dataset.send=JSON.stringify(c),i.classList.remove("hide");const d={success:t=>{const{status:s,message:a,data:r}=t,o=document.createElement("div");o.innerHTML=r.content||"",n.querySelector(`${e}`).insertAdjacentHTML("beforeend",o.querySelector(`${e}`).innerHTML),r.total_pages===r.paged&&n.querySelector(".learn-press-pagination").remove()},error:e=>{console.log(e)},completed:()=>{console.log("completed"),i.classList.add("hide")}};window.lpAJAXG.fetchAPI(t.frontend.apiAJAX,c,d)},LoadInfinite:()=>{const s=s=>{const a=s.target;a.querySelector(".lp-loading-circle").classList.remove("hide");const r=a.closest(o);if(!r)return;const n={...JSON.parse(r.dataset.send)};n.args.hasOwnProperty("paged")||(n.args.paged=1),n.args.paged++,r.dataset.send=JSON.stringify(n);const l={success:t=>{const{status:s,message:n,data:o}=t,l=document.createElement("div");l.innerHTML=o.content||"",r.querySelector(e).insertAdjacentHTML("beforeend",l.querySelector(e).innerHTML),o.total_pages===o.paged&&a.remove()},error:e=>{console.log(e)},completed:()=>{}};window.lpAJAXG.fetchAPI(t.frontend.apiAJAX,n,l)};var a;a=e=>{e.classList.contains("courses-load-infinite")&&r(e,s)},new MutationObserver((function(e){e.forEach((function(e){e.addedNodes&&e.addedNodes.forEach((function(e){1===e.nodeType&&a(e)}))}))})).observe(document,{childList:!0,subtree:!0});const n=document.querySelector(".courses-load-infinite");n&&r(n,s)},onChangeSortBy:(e,s)=>{if(!s.classList.contains("courses-order-by"))return;const r=s.closest(o);if(!r)return lpData.urlParams.paged=1,lpData.urlParams.order_by=s.value||"",void(window.location.href=a(i,lpData.urlParams));e.preventDefault();const n={...JSON.parse(r.dataset.send)};n.args.paged=1,n.args.order_by=s.value||"",r.dataset.send=JSON.stringify(n),lpData.urlParams.paged=n.args.paged,lpData.urlParams.order_by=n.args.order_by,window.history.pushState({},"",a(i,lpData.urlParams));const l=r.closest("div:not(.lp-target)").querySelector(".lp-loading-change");l&&(l.style.display="block");const c={success:e=>{const{status:t,message:s,data:a}=e;r.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{l&&(l.style.display="none")}};window.lpAJAXG.fetchAPI(t.frontend.apiAJAX,n,c)},onChangeTypeLayout:(t,s)=>{if("lp-switch-layout-btn"!==s.getAttribute("name"))return;const a=document.querySelector(e);if(!a)return;t.preventDefault();const r=s.value;r&&(a.dataset.layout=r,window.wpCookies.set("courses-layout",r,86400,"/"))},searchCourse:(e,r)=>{if("c_search"!==r.name)return;const l=r.closest(o);if(!l)return;e.preventDefault();const i={...JSON.parse(l.dataset.send)},c=r.value;i.args.c_search=c||"",i.args.paged=1,l.dataset.send=JSON.stringify(i),lpData.urlParams.paged=i.args.paged,lpData.urlParams.c_search=i.args.c_search,window.history.pushState({},"",a(s(),lpData.urlParams)),(!c||c&&c.length>2)&&(void 0!==n&&clearTimeout(n),n=setTimeout((function(){const e={success:e=>{const{status:t,message:s,data:a}=e;l.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{}};window.lpAJAXG.fetchAPI(t.frontend.apiAJAX,i,e)}),800))}}})(),window.lpCoursesList.LoadInfinite()})();