(function(e){function t(t){for(var i,l,o=t[0],r=t[1],c=t[2],d=0,h=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&h.push(s[l][0]),s[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,o=1;o<n.length;o++){var r=n[o];0!==s[r]&&(i=!1)}i&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},s={app:0},a=[];function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},5100:function(e,t,n){},"5c0b":function(e,t,n){"use strict";n("9c0c")},"763d":function(e,t,n){"use strict";n("5100")},"8b39":function(e,t,n){},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("LeadConnector Settings")]),n("Settings",{attrs:{enableTextWidget:e.settings.enable_text_widget,apiKey:e.settings.api_key,baseURL:e.settings.base_URL}})],1)},a=[],l=n("5530"),o=n("d4ec"),r=n("bee2"),c=n("262e"),u=n("2caf"),d=n("9ab4"),h=n("1b40"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lead-connector-settings",attrs:{id:"lead-connector-settings"}},[n("div",{staticClass:"api-key-input-contaier"},[n("b-form-group",{attrs:{id:"fieldset-api-input",description:"You'll find the API key under location level -> settings -> Company page",label:"API key","label-for":"api-key-input","label-align":"left","invalid-feedback":e.apiErrorMessage}},[n("b-col",{staticStyle:{padding:"0"},attrs:{sm:"12",lg:"6"}},[n("b-form-input",{attrs:{id:"api-key-input",placeholder:"enter API key",state:e.isvalidApi},model:{value:e.api_key,callback:function(t){e.api_key=t},expression:"api_key"}}),n("b-form-invalid-feedback",{attrs:{id:"api-key-input-feedback"}},[n("span",{domProps:{innerHTML:e._s(e.apiErrorMessage)}})])],1)],1),this.isAPIsaving?n("b-spinner",{staticClass:"align-middle text-success my-2"}):n("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.saveAPI()}}},[e._v(" Save")])],1),n("div",{staticClass:"accordion",attrs:{role:"tablist"}},[n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],staticClass:"hl_wrapper-text-widget--toggle",attrs:{block:"",variant:"info"}},[n("div",[n("b-icon-chat-left"),n("span",{staticClass:"header-text"},[e._v("Chat Widget")])],1),e.visible1?n("b-icon",{attrs:{icon:"chevron-down"}}):e._e(),e.visible1?e._e():n("b-icon",{attrs:{icon:"chevron-right"}})],1)]),n("b-collapse",{attrs:{id:"accordion-1",accordion:"my-accordion",role:"tabpanel"},model:{value:e.visible1,callback:function(t){e.visible1=t},expression:"visible1"}},[n("b-card-body",[n("div",{staticClass:"chat-widget-setting-root"},[n("input",{attrs:{type:"hidden",name:"enable_text_widget",value:"0"}}),n("b-form-checkbox",{attrs:{id:"lead_connector_setting_enable_text_widget",name:"enable_text_widget",value:"1","unchecked-value":"0"},model:{value:e.chatWidgetEnable,callback:function(t){e.chatWidgetEnable=t},expression:"chatWidgetEnable"}},[e._v(" Enable Chat-widget ")]),this.isAPIsaving?n("b-spinner",{staticClass:"align-middle text-primary my-2"}):n("b-button",{on:{click:function(t){return e.saveAPI(t)}}},[e._v(" "+e._s("1"===e.chatWidgetEnable?"Pull and Save":"Save"))]),n("label",{staticStyle:{"font-size":"10px"}},[n("p",{staticStyle:{"margin-top":"5px"}},[e._v(" We will fetch the latest settings from your account ")])]),n("p",{staticClass:"text-warning mb-0"},[e._v(e._s(this.chatWidgetWarning))])],1)])],1)],1),n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],staticClass:"hl_wrapper-text-widget--toggle",attrs:{block:"",variant:"info"}},[n("div",[n("b-icon-funnel"),n("span",{staticClass:"header-text"},[e._v("Funnels")])],1),e.visible2?n("b-icon",{attrs:{icon:"chevron-down"}}):e._e(),e.visible2?e._e():n("b-icon",{attrs:{icon:"chevron-right"}})],1)]),n("b-collapse",{attrs:{id:"accordion-2",accordion:"my-accordion",role:"tabpanel"},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[n("b-card-body",[n("div",[n("b-table",{ref:"selectableTable",attrs:{striped:"",hover:"",busy:e.isBusy,items:this.publishedPages,"sticky-header":"",fields:e.publishedPageTablefields,"select-mode":"single","selected-variant":""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-success my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(slug)",fn:function(t){return[e._v(" "+e._s("/"+t.item.slug)+" ")]}},{key:"cell(url)",fn:function(t){return[n("div",[n("a",{attrs:{active:"false",href:""+t.item.url,target:"_blank"}},[e._v("View ")]),n("b-icon-box-arrow-up-right")],1)]}},{key:"cell(context)",fn:function(t){return[n("b-button",{staticClass:"no-border",attrs:{variant:"outline-danger"},on:{click:function(n){return e.deletePost(n,t.item)}}},[n("b-icon-trash",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-post-delete",modifiers:{"confirm-post-delete":!0}}]})],1),n("b-button",{staticClass:"no-border",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.editFunnel(n,t.item)}}},[n("b-icon-pencil-square")],1)]}},{key:"cell(edit_url)",fn:function(t){return[n("div",[n("a",{attrs:{href:e.hostURL+"/location/"+e.location_id+"/funnels-websites/funnels/"+t.item.lc_funnel_id+"/steps/"+t.item.lc_step_id,target:"_blank"}},[e._v("Edit")]),n("b-icon-box-arrow-up-right")],1)]}},{key:"cell(selected)",fn:function(t){var i=t.rowSelected,s=t.index;return[i?[n("input",{key:s+"selected",attrs:{type:"checkbox",checked:""},on:{change:function(t){return e.onTableCheckBox(t,s)}}}),n("span",{staticClass:"sr-only"},[e._v("Selected")])]:[n("input",{key:s+"un - selected",attrs:{type:"checkbox"},on:{change:function(t){return e.onTableCheckBox(t,s)}}}),n("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}}])}),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){return e.handleAddNewFunnel(t,1)}}},[e._v("Add New")])],1)])],1)],1)],1),this.showAddNewFunnelModal?n("PublishFunnel",{attrs:{showModal:this.showAddNewFunnelModal,onClose:this.onModalClose,funnelOptions:this.funnels,editPost:this.editPost,home_url:this.home_url,host_url:this.hostURL}}):e._e(),n("b-modal",{attrs:{id:"confirm-post-delete",title:"Delete Page ?",centered:""},on:{ok:this.onPostDelete}},[n("p",{staticClass:"my-4"},[e._v(" Are you sure you want to delete this page from wordpress? ")])]),n("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{dismissible:"",variant:e.alertVariant},model:{value:e.showAlertTimer,callback:function(t){e.showAlertTimer=t},expression:"showAlertTimer"}},[e._v(" "+e._s(this.alertTitle)+" ")])],1)},b=[],f=(n("caad"),n("d3b7"),n("2532"),n("498a"),n("96cf"),n("1da1")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{title:"Add New Page",size:"lg",visible:this.showModal,"ok-only":"","ok-title":"Save Page","ok-variant":"success",busy:!(e.selectedFunnel&&e.selectedStep&&e.selectedMethod&&e.pageSlug),scrollable:"",centered:""},on:{close:this.onCloseModal,change:this.onModalChange,ok:this.onOk},scopedSlots:e._u([this.isSubmitting?{key:"modal-footer",fn:function(){return[n("div",{staticClass:"text-center text-success my-2"},[n("b-spinner",{staticClass:"loadgin-spinner"}),n("strong",[e._v("Publishing Funnel...")])],1)]},proxy:!0}:null],null,!0)},[n("p",{staticClass:"my-4"},[n("b-form-group",{attrs:{id:"fieldset-funnel-input",description:"Choose the funnel you want to publish as wordpress page",label:"Choose funnel","label-for":"funnel-input"}},[n("b-form-select",{attrs:{id:"funnel-input",options:this.funnels,"value-field":"id","text-field":"name"},on:{change:this.onFunnelChange},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Please select a Funnel --")])]},proxy:!0}]),model:{value:e.selectedFunnel,callback:function(t){e.selectedFunnel=t},expression:"selectedFunnel"}})],1),n("b-form-group",{attrs:{id:"fieldset-funnel-step-input",description:"Choose the funnel step",label:"Choose Step","label-for":"funnel-step-input"}},[n("b-form-select",{attrs:{id:"funnel-step-input",disabled:!this.selectedFunnel,options:this.steps,"value-field":"id","text-field":"name"},on:{change:this.onStepChange},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null,disabled:""}},[e.loadingStep?n("span",[e._v("loading funnel steps...")]):n("span",[e._v("-- Please select a Funnel step--")])])]},proxy:!0}]),model:{value:e.selectedStep,callback:function(t){e.selectedStep=t},expression:"selectedStep"}}),e.loadingStep?n("span",{staticClass:"loading-steps-spinner"},[n("b-spinner",{staticClass:"loading-steps-spinner",attrs:{small:"",label:"Loading..."}})],1):e._e()],1),n("b-form-group",{attrs:{id:"fieldset-funnel-display-method-input",description:"Choose the display method",label:"Page Display Method","label-for":"funnel-display-method-input"}},[n("b-form-select",{attrs:{id:"funnel-display-method-input",disabled:!this.selectedFunnel,options:this.displayMethod},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Please select a Page Display Method--")])]},proxy:!0}]),model:{value:e.selectedMethod,callback:function(t){e.selectedMethod=t},expression:"selectedMethod"}})],1),"iframe"===this.selectedMethod?n("b-form-group",{attrs:{id:"fieldset-funnel-include-tracking-code",description:"If enabled, the tracking code in funnel will track wordpress as well",label:"Tracking code","label-for":"include-tracking-code-input"}},[n("b-form-checkbox",{attrs:{id:"include-tracking-code-input",disabled:!e.selectedFunnel,name:"tracking-code-input",value:"1","unchecked-value":"0"},model:{value:e.includeTrackingCode,callback:function(t){e.includeTrackingCode=t},expression:"includeTrackingCode"}},[e._v(" Include Tracking Code ")])],1):e._e(),"iframe"===this.selectedMethod?n("b-form-group",{attrs:{id:"fieldset-funnel-use-site-favicon",description:"If enabled, funnel will use wordpress site favicon",label:"Favicon","label-for":"use-site-favicon"}},[n("b-form-checkbox",{attrs:{id:"use-site-favicon",disabled:!e.selectedFunnel,name:"use-site-favicon-input",value:"1","unchecked-value":"0"},model:{value:e.useSiteFavicon,callback:function(t){e.useSiteFavicon=t},expression:"useSiteFavicon"}},[e._v(" Use site favicon ")])],1):e._e(),n("b-form-group",{attrs:{id:"fieldset-funnel-slug_input",description:this.home_url+"/"+(this.pageSlug?this.pageSlug:""),label:"Custom Slug","label-for":"funnel-slug-input","invalid-feedback":e.inValidSlugMessage}},[n("b-form-input",{attrs:{id:"funnel-slug-input",placeholder:"enter slug",disabled:!this.selectedFunnel,formatter:this.slugFormatter,state:e.isvalidSlug},model:{value:e.pageSlug,callback:function(t){e.pageSlug=t},expression:"pageSlug"}})],1),n("b-form-group",{attrs:{id:"fieldset-funnel-preview-url",description:"For referene only *",label:"Preview URL","label-for":"funnel-preview-input"}},[n("b-form-input",{attrs:{id:"funnel-preview-input",placeholder:"Preview URL",disabled:""},model:{value:e.pagePreviewURL,callback:function(t){e.pagePreviewURL=t},expression:"pagePreviewURL"}})],1)],1)])},v=[],_=(n("99af"),n("7db0"),n("b0c0"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),"It seems like your account's Permalink Settings set to 'plain', please change it in order to use this plugin, more info <a href='https://wordpress.org/support/article/settings-permalinks-screen/' target='_blank'>here.</a>"),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=window.lc_admin_settings,s="".concat(i.proxy_url,"?endpoint=").concat(encodeURIComponent(e),"&_wpnonce=").concat(i.nonce,"&direct_endpoint=").concat(String(n));return t&&(s+="&data=".concat(JSON.stringify(t))),s},y={STEP_NAME:"lc_step_name",FUNNEL_NAME:"lc_funnel_name",PAGE_URL:"url",EDIT_URL:"edit_url",MODIFIED_DATE:"human_modified_date",CONTEXT:"context",SLUG:"slug"},k=[{key:y.STEP_NAME,label:"Page",sortable:!0},{key:y.FUNNEL_NAME,label:"Funnel Name",sortable:!0},{key:y.SLUG,label:"Slug",sortable:!0},{key:y.PAGE_URL,label:"View",sortable:!0},{key:y.EDIT_URL,label:"Edit",sortable:!1},{key:y.MODIFIED_DATE,label:"Last Modified",sortable:!0},{key:y.CONTEXT,label:"",sortable:!1}],w=["iframe","redirect"],S=[{value:w[0],text:"Embed Full Page iFrame"},{value:w[1],text:"Redirect to Funnel URL"}],P={INVALID_API_KEY:"API key is invalid",FUNNELS_API_FAIL:"Failed to fetch the funnels from you account",NO_FUNNELS:"You don't have any funnels in your account",POSTS_API_FAIL:"Failed to fetch the Pages",DELETE_POST_API_FAIL:"Failed to delete the post",POST_DELETED_SUCCESS:"Post deleted successfully",POST_CREATED_SUCCESS:"Post created successfully",POST_UPDATED_SUCCESS:"Post updated successfully"},x=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.selectedFunnel=null,e.selectedStep=null,e.loadingStep=!1,e.selectedMethod=w[0],e.pageSlug=null,e.pagePreviewURL=null,e.selecetdFunnelDetails=null,e.selecetdStepDetails=null,e.editablePost=!1,e.isBusy=!0,e.funnels=[],e.steps=[],e.displayMethod=S,e.isvalidSlug=null,e.inValidSlugMessage="",e.isSubmitting=!1,e.includeTrackingCode="1",e.useSiteFavicon="1",e}return Object(r["a"])(n,[{key:"mounted",value:function(){this.funnels=this.funnelOptions,this.editPost&&(this.editablePost=!0,this.editPost.slug&&(this.pageSlug=this.editPost.slug),this.editPost.lc_funnel_id&&(this.selectedFunnel=this.editPost.lc_funnel_id,this.onFunnelChange(this.selectedFunnel)),this.editPost.lc_step_id&&(this.selectedStep=this.editPost.lc_step_id,this.pagePreviewURL="".concat(this.host_url,"/v2/preview/").concat(this.editPost.lc_step_id)),this.editPost.lc_display_method&&(this.selectedMethod=this.editPost.lc_display_method),this.editPost.lc_include_tracking_code&&"0"!==this.editPost.lc_include_tracking_code||(this.includeTrackingCode="0"),this.editPost.lc_use_site_favicon&&"0"!==this.editPost.lc_use_site_favicon||(this.useSiteFavicon="0"))}},{key:"onFunnelChange",value:function(e){var t=this;this.selectedFunnel=e,this.selectedStep=null,this.pagePreviewURL="";var n=this.funnels.find((function(t){return t.id===e}));n&&(this.selecetdFunnelDetails=n,this.steps=[],this.loadingStep=!0,fetch(m("v1/funnels/".concat(this.selecetdFunnelDetails.id,"/pages/?includeMeta=true&includePageDataDownloadURL=true"))).then((function(e){e.ok&&e.json().then((function(e){t.steps=e.funnelPages,t.selectedStep&&t.onStepChange(t.selectedStep)})),t.loadingStep=!1})))}},{key:"onStepChange",value:function(e){var t=this;this.selectedStep=e;var n=this.steps.find((function(e){return e.id===t.selectedStep}));this.selecetdStepDetails=n,this.selecetdStepDetails&&(this.selecetdFunnelDetails&&this.selecetdFunnelDetails.domainURL?this.pagePreviewURL="https://".concat(this.selecetdFunnelDetails.domainURL).concat(this.selecetdStepDetails.url):this.pagePreviewURL="".concat(this.host_url,"/v2/preview/").concat(this.selecetdStepDetails.id))}},{key:"slugFormatter",value:function(e){e=e.toLowerCase().replace(/\s/g,"-");var t=e.replace(/^\s+|\s+$/g,"");t=t.toLowerCase();for(var n="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",i="aaaaeeeeiiiioooouuuunc------",s=0,a=n.length;s<a;s++)t=t.replace(new RegExp(n.charAt(s),"g"),i.charAt(s));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t}},{key:"onCloseModal",value:function(){this.onClose&&this.onClose(!1)}},{key:"onModalChange",value:function(e){e||this.onClose&&this.onClose(!1)}},{key:"onOk",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,i,s,a,l,o,r,c,u,d=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),this.isvalidSlug=null,this.inValidSlugMessage="",this.isSubmitting=!0,e.next=6,fetch(m("wp_insert_post"),{method:"POST",body:JSON.stringify({lc_step_url:this.pagePreviewURL,lc_slug:this.pageSlug,lc_step_id:null===(n=this.selecetdStepDetails)||void 0===n?void 0:n.id,lc_funnel_id:null===(i=this.selecetdFunnelDetails)||void 0===i?void 0:i.id,lc_step_name:null===(s=this.selecetdStepDetails)||void 0===s?void 0:s.name,lc_funnel_name:null===(a=this.selecetdFunnelDetails)||void 0===a?void 0:a.name,template_id:this.editablePost&&this.editPost?this.editPost.template_id:-1,lc_display_method:this.selectedMethod,lc_step_meta:null===(l=this.selecetdStepDetails)||void 0===l?void 0:l.meta,lc_step_page_download_url:null===(o=this.selecetdStepDetails)||void 0===o?void 0:o.pageDataDownloadURL,lc_include_tracking_code:this.includeTrackingCode,lc_use_site_favicon:this.useSiteFavicon,lc_funnel_tracking_code:{headerCode:btoa((null===(r=this.selecetdFunnelDetails)||void 0===r?void 0:r.tracking_code_head)||""),footerCode:btoa((null===(c=this.selecetdFunnelDetails)||void 0===c?void 0:c.tracking_code_body)||"")}})});case 6:u=e.sent,this.isSubmitting=!1,u.ok&&u.text().then((function(e){var t={};try{t=JSON.parse(e)}catch(i){return void console.log("fail to parse response",e,i)}if(t.error){if(1009===t.code){d.isvalidSlug=!1;var n=d.pageSlug+"-"+~~(10*Math.random());d.inValidSlugMessage=t.message+", try using "+n,d.pageSlug=n}}else d.onClose&&d.onClose(!0)}));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],x.prototype,"showModal",void 0),Object(d["a"])([Object(h["b"])()],x.prototype,"onClose",void 0),Object(d["a"])([Object(h["b"])()],x.prototype,"funnelOptions",void 0),Object(d["a"])([Object(h["b"])()],x.prototype,"editPost",void 0),Object(d["a"])([Object(h["b"])()],x.prototype,"home_url",void 0),Object(d["a"])([Object(h["b"])()],x.prototype,"host_url",void 0),x=Object(d["a"])([h["a"]],x);var C=x,O=C,E=(n("763d"),n("2877")),F=Object(E["a"])(O,g,v,!1,null,"ef457246",null),A=F.exports,T=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.showAddNewFunnelModal=!1,e.isBusy=!1,e.visible1=!0,e.visible2=!1,e.showConfirmPostDelete=!1,e.isAPIsaving=!1,e.isvalidApi=null,e.editPost=null,e.chatWidgetEnable=String(e.enableTextWidget),e.api_key="",e.location_id="",e.home_url="",e.apiErrorMessage="",e.chatWidgetWarning="",e.alertTitle="",e.showAlertTimer=0,e.alertVariant="warning",e.hostURL="",e.selectedTableRows=[],e.funnels=[],e.publishedPages=[],e.publishedPageTablefields=k,e}return Object(r["a"])(n,[{key:"onEnableTextWidget",value:function(e){this.chatWidgetEnable=String(e)}},{key:"onApiKey",value:function(e){this.api_key=String(e)}},{key:"saveAPI",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.api_key=this.api_key&&this.api_key.trim(),i={api_key:this.api_key},void 0!==t&&null!==t&&(i.enable_text_widget=this.chatWidgetEnable),this.isvalidApi=null,this.isAPIsaving=!0,s={},e.next=8,fetch(m("wp_save_options"),{method:"POST",body:JSON.stringify(i)});case 8:if(s=e.sent,console.log(s),null===(n=s)||void 0===n||!n.ok){e.next=18;break}return e.next=13,s.json();case 13:a=e.sent,a.error&&(this.isvalidApi=!1,this.apiErrorMessage=a.message?P.INVALID_API_KEY:""),a.success&&(this.init(),this.isvalidApi=!0,a.warning_msg?void 0!==t&&null!==t&&"1"===this.chatWidgetEnable?this.chatWidgetWarning=a.warning_msg:(this.apiErrorMessage=a.warning_msg,this.chatWidgetWarning=""):this.chatWidgetWarning="",a.location_id&&(this.location_id=a.location_id),a.home_url&&(this.home_url=a.home_url),a.white_label_url?this.hostURL=a.white_label_url:this.hostURL=String(this.baseURL)),e.next=24;break;case 18:return 404===s.status&&(this.isvalidApi=!1,this.apiErrorMessage=_),e.t0=console,e.next=22,s.text();case 22:e.t1=e.sent,e.t0.error.call(e.t0,e.t1);case 24:this.isAPIsaving=!1;case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(m("v1/funnels/?includeDomainId=true&includeTrackingCode=true"));case 2:if(t=e.sent,!t.ok){e.next=14;break}return e.next=6,t.json();case 6:if(n=e.sent,!n.error){e.next=10;break}return this.showToast(P.FUNNELS_API_FAIL,!1),e.abrupt("return");case 10:this.funnels=n.funnels,0===this.funnels.length&&this.showToast(P.NO_FUNNELS,!1,"warning"),e.next=20;break;case 14:return e.t0=console,e.next=17,t.text();case 17:e.t1=e.sent,e.t0.error.call(e.t0,e.t1),this.showToast(P.FUNNELS_API_FAIL,!1);case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchUserSettings",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(m("wp_get_lc_options"));case 2:if(n=e.sent,!n.ok){e.next=17;break}return e.next=6,n.json();case 6:i=e.sent,t&&t(i),i.api_key&&(this.api_key=i.api_key,this.isvalidApi=!i.text_widget_error&&i.api_key.length>0||null),i.enable_text_widget&&(this.chatWidgetEnable=i.enable_text_widget),i.location_id&&(this.location_id=i.location_id),i.text_widget_error&&(this.isvalidApi=!1,this.apiErrorMessage=i.warning_msg?i.warning_msg:P.INVALID_API_KEY),"1"===i.enable_text_widget&&i.warning_msg&&i.warning_msg.includes("chat")&&(this.chatWidgetWarning=i.warning_msg),i.home_url&&(this.home_url=i.home_url),i.white_label_url?this.hostURL=i.white_label_url:this.hostURL=String(this.baseURL),e.next=23;break;case 17:return 404===n.status&&(this.isvalidApi=!1,this.apiErrorMessage=_),e.t0=console,e.next=21,n.text();case 21:e.t1=e.sent,e.t0.error.call(e.t0,e.t1);case 23:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchPublishedPages",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isBusy=!0,e.next=3,fetch(m("wp_get_all_posts"));case 3:if(t=e.sent,!t.ok){e.next=11;break}return e.next=7,t.json();case 7:n=e.sent,this.publishedPages=n,e.next=17;break;case 11:return e.t0=console,e.next=14,t.text();case 14:e.t1=e.sent,e.t0.error.call(e.t0,e.t1),this.showToast(P.POSTS_API_FAIL,!1);case 17:this.isBusy=!1;case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mounted",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chatWidgetEnable=String(this.enableTextWidget),this.api_key=this.apiKey,this.hostURL=String(this.baseURL),this.fetchUserSettings((function(e){e.api_key&&!e.text_widget_error&&(t.init(),t.fetchPublishedPages())}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAddNewFunnel",value:function(){this.showAddNewFunnelModal=!0}},{key:"editFunnel",value:function(e,t){this.editPost=t,this.showAddNewFunnelModal=!0}},{key:"onPostDelete",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.editPost){e.next=10;break}return e.next=3,fetch(m("wp_delete_post",{post_id:null===(t=this.editPost)||void 0===t?void 0:t.template_id,force_delete:!0}));case 3:if(n=e.sent,!n.ok){e.next=9;break}return e.next=7,n.json();case 7:i=e.sent,i&&i.error?this.showToast(P.DELETE_POST_API_FAIL,!1):(this.showToast(P.POST_DELETED_SUCCESS,!0),this.fetchPublishedPages());case 9:this.editPost=null;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deletePost",value:function(e,t){this.editPost=t}},{key:"onRowSelected",value:function(e){this.selectedTableRows=e}},{key:"showToast",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;this.alertTitle=e,n||(n=t?"success":"danger"),this.alertVariant=n,this.showAlertTimer=5}},{key:"onModalClose",value:function(e){this.showAddNewFunnelModal=!1,e&&(this.showToast(this.editPost?P.POST_UPDATED_SUCCESS:P.POST_CREATED_SUCCESS),this.fetchPublishedPages()),this.editPost=null}}]),n}(h["c"]);Object(d["a"])([Object(h["b"])()],T.prototype,"enableTextWidget",void 0),Object(d["a"])([Object(h["b"])()],T.prototype,"apiKey",void 0),Object(d["a"])([Object(h["b"])()],T.prototype,"baseURL",void 0),Object(d["a"])([Object(h["d"])("enableTextWidget")],T.prototype,"onEnableTextWidget",null),Object(d["a"])([Object(h["d"])("apiKey")],T.prototype,"onApiKey",null),T=Object(d["a"])([Object(h["a"])({components:{PublishFunnel:A}})],T);var j=T,L=j,R=(n("daa0"),Object(E["a"])(L,p,b,!1,null,"30307324",null)),U=R.exports,D="https://app.leadconnectorhq.com",M=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.settings={base_URL:D},e}return Object(r["a"])(n,[{key:"mounted",value:function(){var e=document.getElementById("lead-connecter-settings-holder"),t=e?e.getAttribute("data-settings"):"";if(null!==t)try{this.settings=Object(l["a"])(Object(l["a"])({},this.settings),JSON.parse(t)),this.settings.api_key=atob(this.settings.api_key||""),null!==e&&e.parentNode&&e.parentNode.removeChild(e)}catch(n){console.error(n)}}}]),n}(h["c"]);M=Object(d["a"])([Object(h["a"])({components:{Settings:U}})],M);var I=M,N=I,W=(n("5c0b"),Object(E["a"])(N,s,a,!1,null,null,null)),V=W.exports,K=n("5f5b"),B=n("b1e0");n("f9e3"),n("2dd8");i["default"].config.productionTip=!1,i["default"].use(K["a"]),i["default"].use(B["a"]),new i["default"]({render:function(e){return e(V)}}).$mount("#app")},daa0:function(e,t,n){"use strict";n("8b39")}});