System.register([],(function(e,t){"use strict";return{execute:function(){e({a:function(){const{registerPlugin:e}=wp.plugins;e("acfw-coupons-summary",{render:_,scope:"woocommerce-checkout"})},i:function(){acfwfObj.components=c,acfwfObj.wc=a,acfwfObj.utils=f},r:function(){const{registerPlugin:e}=wp.plugins;e("acfwf-notices",{render:I,scope:"woocommerce-checkout"})}});const t=e=>{const{label:t,value:c,children:o}=e;return React.createElement("div",{className:"wp-block-woocommerce-checkout-order-summary-subtotal-block wc-block-components-totals-wrapper"},React.createElement("div",{className:"wc-block-components-totals-item"},React.createElement("span",{className:"wc-block-components-totals-item__label"},t),React.createElement("span",{className:"wc-block-components-totals-item__value"},React.createElement("div",{dangerouslySetInnerHTML:{__html:c}})),React.createElement("div",{className:"wc-block-components-totals-item__description"},o)))},c={Accordion:e=>{const{useState:t,useEffect:c,useRef:o}=wp.element,{title:a,children:n,caret_img_src:r,auto_display_store_credits_redeem_form:s}=e,[i,l]=t(!1),u=o(null),m=()=>{if(l(!i),u.current){let e=u.current.style.maxHeight;e=parseInt(e.replace("px","")),e=e>0?0:u.current.scrollHeight,u.current.style.maxHeight=`${e}px`}};return c((()=>{"yes"===s&&(l(!0),m())}),[s]),React.createElement("div",{className:"acfw-accordion"},React.createElement("div",{className:"acfw-accordion acfw-store-credits-checkout-ui "+(i?"show":"")},React.createElement("h3",{onClick:m},React.createElement("span",{className:"acfw-accordion-title"},a),(()=>{if(r)return React.createElement("span",{className:"caret"},React.createElement("img",{src:r}))})()),React.createElement("div",{className:"acfw-accordion-inner",ref:u},React.createElement("div",{className:"acfw-accordion-content"},n))))},OrderSummarySubtotalBlock:t},{extensionCartUpdate:o}=wc.blocksCheckout,a={dummyUpdateCart:()=>o({namespace:"acfwf_dummy_update",data:{}})},{subscribe:n,select:r,dispatch:s,useSelect:i,useDispatch:l}=wp.data,{VALIDATION_STORE_KEY:u}=wc.wcBlocksData,m="wc/store/cart",d=e("s",r("wc/store/cart")),f={debounce:(e,t)=>{let c;return function(...o){clearTimeout(c),c=setTimeout((()=>e(...o)),t)}},hasBOGOCoupon:()=>!!d.getCartData().coupons.filter((e=>"acfw_bogo"===e.discount_type)).length},_=()=>{const e=i((e=>{var t;const c=e("wc/store/cart").getCartData(),{acfwf_block:o}=c.extensions;return o&&o.couponSummaries&&null!==(t=o.couponSummaries)&&void 0!==t?t:[]})),{ExperimentalDiscountsMeta:c}=wc.blocksCheckout;return e.length?React.createElement(c,null,e.map((e=>React.createElement(t,{label:e.coupon_code},React.createElement("div",{className:"acfwf-bogo-discount-summary-block",dangerouslySetInnerHTML:{__html:e.content}}))))):null},p="wc/checkout",w="wc/cart",C="core/notices",g={ACFWF_NOTICE_BOGO:"ACFWF_NOTICE_BOGO",ACFWF_NOTICE_CART_CONDITIONS:"ACFWF_NOTICE_CART_CONDITIONS",ACFWF_NOTICE_STORE_CREDIT:"ACFWF_NOTICE_STORE_CREDIT"},E=e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText},O=e("c",{integration:"acfwf-wc-checkout-block"}),{wcSettings:b}=wc,h=e("g",(e=>b.getSetting(`${e}_data`))),N=jQuery,T=()=>{const e=N(".acfw-checkout-ui-block"),t=e.find(".acfw-store-credits-checkout-ui"),c=e.find("h3");t.hasClass("show")||c.trigger("click"),setTimeout((function(){var t;window.scroll({top:null==e||null===(t=e.offset())||void 0===t?void 0:t.top,behavior:"smooth"}),e.find("input").trigger("focus")}),400)};function k(){const e=i((e=>e(m).getHasCalculatedShipping())),{store_credits:t}=h(O.integration);if(!t)return null;const{apply_type:c,notice_store_credits_text:o}=t,{acfwf_block:a}=d.getCartData().extensions;"coupon"!==c&&e&&a.store_credits.notice&&(e=>{setTimeout((function(){s(C).createNotice("error",e,{context:p,id:g.ACFWF_NOTICE_STORE_CREDIT}),N(".acfw-reapply-sc-discount").on("click",T)}),400)})(o)}const R=[w,p],I=()=>{R.forEach((e=>{s(C).removeNotices(Object.values(g).filter((e=>e)),e)})),function(){const e=i((e=>e(m).getCartErrors())),t=i((e=>e(u).getValidationError("coupon"))),c=e.find((e=>{return"woocommerce_rest_cart_coupon_error"===e.code&&(t=e.message,/<[^>]+>|&[a-z]+;/i.test(t));var t}));if(c&&t){s(u).setValidationErrors({coupon:{message:" ",hidden:!1}});const e=c.message||"";s(C).createNotice("error",E(e),{context:w,id:g.ACFWF_NOTICE_CART_CONDITIONS})}}(),function(){const e=i((e=>e(m).getCartData())),{dummyUpdateCart:t}=acfwfObj.wc,c=r(m).isApplyingCoupon(),o=r(m).isRemovingCoupon();(c||o)&&t();const{acfwf_block:a}=e.extensions;if(!a||!a.bogo_deals)return null;const n=a.bogo_deals;n&&n.forEach((e=>{s(C).createNotice("info",E(e),{context:w,id:g.ACFWF_NOTICE_BOGO})}))}(),k()}}}}));
