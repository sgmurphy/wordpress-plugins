import{g as va,r as E,e as ba,u as ee,j as me,R as u,L as Ut,d as ze,B as We,k as Ke,l as Aa}from"../../common/reactLib.deb836f9.js";import{f as jt,t as wa,d as Oa,s as Na,e as Da,m as Pa,g as I,h as $,i as F,p as j,j as Ft,k as Gt,l as qt,n as Ht,o as Vt,P as Qe}from"../../common/redux.29e38e1a.js";import{aa as Ia,ab as $a,ac as Yt,ad as Je,ae as zt,af as ka,ag as xa,ah as Ma,ai as Wt,aj as La,ak as Ba,al as Ua,am as ja,an as Fa,ao as Ga,ap as Xe,aq as Kt,ar as Qt,as as Jt,at as qa,au as Ha,av as Va,aw as Ya,ax as O,ay as G,az as za,aA as he,aB as ne,aC as W,aD as P,aE as K,n as Xt,aF as se,aG as De,F as Wa,aH as Ze,aI as X,X as et,aJ as Te,aK as Y,aL as k,aM as Pe,aN as ye,aO as ge,aP as Q,V as Ka,aQ as tt,aR as de,aS as Be,aT as Zt,aU as Et,aV as Qa,R as _t,aW as ea,aX as Ja,aY as Xa,aZ as Za,o as en,a_ as Ue,a$ as tn,b0 as an}from"../../common/antd.22a5bbde.js";import{T as ta,R as nn,S as aa,C as rn,I as cn,W as on,A as na,F as sn,G as ln,a as un,b as dn,M as mn,D as pn,L as fn,U as En,c as _n,d as gn,e as hn,f as Rn,g as yn,B as Sn,h as Tn}from"../../common/antdIcons.b227bdcc.js";function pm(){import.meta.url,import("_").catch(()=>1);async function*t(){}}var gt=function(e){return{done:!0,value:e}},je={};function Cn(t){return Oa(t)?"channel":Na(t)?String(t):Da(t)?t.name:String(t)}function vn(t,e,a){var n,r,c,o=e;function s(l,i){if(o===je)return gt(l);if(i&&!r)throw o=je,i;n&&n(l);var d=i?t[r](i):t[o]();return o=d.nextState,c=d.effect,n=d.stateUpdater,r=d.errorState,o===je?gt(l):c}return Pa(s,function(l){return s(null,l)},a)}function bn(t,e){for(var a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];var c={done:!1,value:wa(t)},o=function(d){return{done:!1,value:jt.apply(void 0,[e].concat(n,[d]))}},s,l=function(d){return s=d};return vn({q1:function(){return{nextState:"q2",effect:c,stateUpdater:l}},q2:function(){return{nextState:"q1",effect:o(s)}}},"q1","takeEvery("+Cn(t)+", "+e.name+")")}function U(t,e){for(var a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];return jt.apply(void 0,[bn,t,e].concat(n))}function An(t,e){for(var a=-1,n=t==null?0:t.length;++a<n&&e(t[a],a,t)!==!1;);return t}var wn=An,On=Ia,Nn=function(){try{var t=On(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Dn=Nn,ht=Dn;function Pn(t,e,a){e=="__proto__"&&ht?ht(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}var ra=Pn,In=ra,$n=$a,kn=Object.prototype,xn=kn.hasOwnProperty;function Mn(t,e,a){var n=t[e];(!(xn.call(t,e)&&$n(n,a))||a===void 0&&!(e in t))&&In(t,e,a)}var ca=Mn,Ln=ca,Bn=ra;function Un(t,e,a,n){var r=!a;a||(a={});for(var c=-1,o=e.length;++c<o;){var s=e[c],l=n?n(a[s],t[s],s,a,t):void 0;l===void 0&&(l=t[s]),r?Bn(a,s,l):Ln(a,s,l)}return a}var Ie=Un,jn=Ie,Fn=Yt;function Gn(t,e){return t&&jn(e,Fn(e),t)}var qn=Gn;function Hn(t){var e=[];if(t!=null)for(var a in Object(t))e.push(a);return e}var Vn=Hn,Yn=Je,zn=zt,Wn=Vn,Kn=Object.prototype,Qn=Kn.hasOwnProperty;function Jn(t){if(!Yn(t))return Wn(t);var e=zn(t),a=[];for(var n in t)n=="constructor"&&(e||!Qn.call(t,n))||a.push(n);return a}var Xn=Jn,Zn=ka,er=Xn,tr=xa;function ar(t){return tr(t)?Zn(t,!0):er(t)}var at=ar,nr=Ie,rr=at;function cr(t,e){return t&&nr(e,rr(e),t)}var or=cr,Ae={exports:{}};Ae.exports;(function(t,e){var a=Ma,n=e&&!e.nodeType&&e,r=n&&!0&&t&&!t.nodeType&&t,c=r&&r.exports===n,o=c?a.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(i,d){if(d)return i.slice();var p=i.length,f=s?s(p):new i.constructor(p);return i.copy(f),f}t.exports=l})(Ae,Ae.exports);var sr=Ae.exports;function lr(t,e){var a=-1,n=t.length;for(e||(e=Array(n));++a<n;)e[a]=t[a];return e}var ir=lr,ur=Ie,dr=Wt;function mr(t,e){return ur(t,dr(t),e)}var pr=mr,fr=La,Er=fr(Object.getPrototypeOf,Object),oa=Er,_r=Ba,gr=oa,hr=Wt,Rr=Ua,yr=Object.getOwnPropertySymbols,Sr=yr?function(t){for(var e=[];t;)_r(e,hr(t)),t=gr(t);return e}:Rr,sa=Sr,Tr=Ie,Cr=sa;function vr(t,e){return Tr(t,Cr(t),e)}var br=vr,Ar=ja,wr=sa,Or=at;function Nr(t){return Ar(t,Or,wr)}var Dr=Nr,Pr=Object.prototype,Ir=Pr.hasOwnProperty;function $r(t){var e=t.length,a=new t.constructor(e);return e&&typeof t[0]=="string"&&Ir.call(t,"index")&&(a.index=t.index,a.input=t.input),a}var kr=$r,Rt=Fa;function xr(t){var e=new t.constructor(t.byteLength);return new Rt(e).set(new Rt(t)),e}var nt=xr,Mr=nt;function Lr(t,e){var a=e?Mr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}var Br=Lr,Ur=/\w*$/;function jr(t){var e=new t.constructor(t.source,Ur.exec(t));return e.lastIndex=t.lastIndex,e}var Fr=jr,yt=Ga,St=yt?yt.prototype:void 0,Tt=St?St.valueOf:void 0;function Gr(t){return Tt?Object(Tt.call(t)):{}}var qr=Gr,Hr=nt;function Vr(t,e){var a=e?Hr(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}var Yr=Vr,zr=nt,Wr=Br,Kr=Fr,Qr=qr,Jr=Yr,Xr="[object Boolean]",Zr="[object Date]",ec="[object Map]",tc="[object Number]",ac="[object RegExp]",nc="[object Set]",rc="[object String]",cc="[object Symbol]",oc="[object ArrayBuffer]",sc="[object DataView]",lc="[object Float32Array]",ic="[object Float64Array]",uc="[object Int8Array]",dc="[object Int16Array]",mc="[object Int32Array]",pc="[object Uint8Array]",fc="[object Uint8ClampedArray]",Ec="[object Uint16Array]",_c="[object Uint32Array]";function gc(t,e,a){var n=t.constructor;switch(e){case oc:return zr(t);case Xr:case Zr:return new n(+t);case sc:return Wr(t,a);case lc:case ic:case uc:case dc:case mc:case pc:case fc:case Ec:case _c:return Jr(t,a);case ec:return new n;case tc:case rc:return new n(t);case ac:return Kr(t);case nc:return new n;case cc:return Qr(t)}}var hc=gc,Rc=Je,Ct=Object.create,yc=function(){function t(){}return function(e){if(!Rc(e))return{};if(Ct)return Ct(e);t.prototype=e;var a=new t;return t.prototype=void 0,a}}(),Sc=yc,Tc=Sc,Cc=oa,vc=zt;function bc(t){return typeof t.constructor=="function"&&!vc(t)?Tc(Cc(t)):{}}var Ac=bc,wc=Xe,Oc=Kt,Nc="[object Map]";function Dc(t){return Oc(t)&&wc(t)==Nc}var Pc=Dc,Ic=Pc,$c=Jt,vt=Qt,bt=vt&&vt.isMap,kc=bt?$c(bt):Ic,xc=kc,Mc=Xe,Lc=Kt,Bc="[object Set]";function Uc(t){return Lc(t)&&Mc(t)==Bc}var jc=Uc,Fc=jc,Gc=Jt,At=Qt,wt=At&&At.isSet,qc=wt?Gc(wt):Fc,Hc=qc,Vc=qa,Yc=wn,zc=ca,Wc=qn,Kc=or,Qc=sr,Jc=ir,Xc=pr,Zc=br,eo=Va,to=Dr,ao=Xe,no=kr,ro=hc,co=Ac,oo=Ya,so=Ha,lo=xc,io=Je,uo=Hc,mo=Yt,po=at,fo=1,Eo=2,_o=4,la="[object Arguments]",go="[object Array]",ho="[object Boolean]",Ro="[object Date]",yo="[object Error]",ia="[object Function]",So="[object GeneratorFunction]",To="[object Map]",Co="[object Number]",ua="[object Object]",vo="[object RegExp]",bo="[object Set]",Ao="[object String]",wo="[object Symbol]",Oo="[object WeakMap]",No="[object ArrayBuffer]",Do="[object DataView]",Po="[object Float32Array]",Io="[object Float64Array]",$o="[object Int8Array]",ko="[object Int16Array]",xo="[object Int32Array]",Mo="[object Uint8Array]",Lo="[object Uint8ClampedArray]",Bo="[object Uint16Array]",Uo="[object Uint32Array]",L={};L[la]=L[go]=L[No]=L[Do]=L[ho]=L[Ro]=L[Po]=L[Io]=L[$o]=L[ko]=L[xo]=L[To]=L[Co]=L[ua]=L[vo]=L[bo]=L[Ao]=L[wo]=L[Mo]=L[Lo]=L[Bo]=L[Uo]=!0;L[yo]=L[ia]=L[Oo]=!1;function ve(t,e,a,n,r,c){var o,s=e&fo,l=e&Eo,i=e&_o;if(a&&(o=r?a(t,n,r,c):a(t)),o!==void 0)return o;if(!io(t))return t;var d=oo(t);if(d){if(o=no(t),!s)return Jc(t,o)}else{var p=ao(t),f=p==ia||p==So;if(so(t))return Qc(t,s);if(p==ua||p==la||f&&!r){if(o=l||f?{}:co(t),!s)return l?Zc(t,Kc(o,t)):Xc(t,Wc(o,t))}else{if(!L[p])return r?t:{};o=ro(t,p,s)}}c||(c=new Vc);var g=c.get(t);if(g)return g;c.set(t,o),uo(t)?t.forEach(function(A){o.add(ve(A,e,a,A,t,c))}):lo(t)&&t.forEach(function(A,w){o.set(w,ve(A,e,a,w,t,c))});var R=i?l?to:eo:l?po:mo,T=d?void 0:R(t);return Yc(T||t,function(A,w){T&&(w=A,A=t[w]),zc(o,w,ve(A,e,a,w,t,c))}),o}var jo=ve,Fo=jo,Go=1,qo=4;function Ho(t){return Fo(t,Go|qo)}var Vo=Ho;const we=va(Vo);var Ee=(t=>(t.READ_SECTIONS="READ_SECTIONS",t.READ_SECTION="READ_SECTION",t.SET_STORE_SECTIONS="SET_STORE_SECTIONS",t.SET_STORE_SECTION="SET_STORE_SECTION",t.TOGGLE_MODULE_SECTION="TOGGLE_MODULE_SECTION",t))(Ee||{});const $e={readSections:t=>({type:"READ_SECTIONS",payload:t}),readSection:t=>({type:"READ_SECTION",payload:t}),setStoreSectionItems:t=>({type:"SET_STORE_SECTIONS",payload:t}),setStoreSectionItem:t=>({type:"SET_STORE_SECTION",payload:t}),toggleModuleSection:t=>({type:"TOGGLE_MODULE_SECTION",payload:t})},Yo=(t=[],e)=>{switch(e.type){case Ee.SET_STORE_SECTIONS:{const{data:a}=e.payload;return a}case Ee.SET_STORE_SECTION:{const{data:a}=e.payload,n=t.findIndex(c=>c.id===a.id);if(n<0)return t;const r=we(t);return r[n]={...r[n],...a},r}case Ee.TOGGLE_MODULE_SECTION:{const{module:a,show:n}=e.payload,r=t.findIndex(o=>o.module&&o.module===a);if(r<0)return t;const c=we(t);return c[r].show=n,c}default:return t}};var oe=(t=>(t.CREATE_SETTING="CREATE_SETTING",t.UPDATE_SETTING="UPDATE_SETTING",t.DELETE_SETTING="DELETE_SETTING",t.READ_SETTINGS="READ_SETTINGS",t.REHYDRATE_STORE_SETTINGS="REHYDRATE_STORE_SETTINGS",t.REHYDRATE_STORE_SETTING="REHYDRATE_STORE_SETTING",t.SET_STORE_SETTINGS="SET_STORE_SETTINGS",t.SET_STORE_SETTING="SET_STORE_SETTING",t))(oe||{});const ae={createSetting:t=>({type:"CREATE_SETTING",payload:t}),updateSetting:t=>({type:"UPDATE_SETTING",payload:t}),deleteSetting:t=>({type:"DELETE_SETTING",payload:t}),readSettings:t=>({type:"READ_SETTINGS",payload:t}),rehydrateStoreSettings:t=>({type:"REHYDRATE_STORE_SETTINGS",payload:t}),rehydrateStoreSetting:t=>({type:"REHYDRATE_STORE_SETTING",payload:t}),setStoreSettingItems:t=>({type:"SET_STORE_SETTINGS",payload:t}),setStoreSettingItem:t=>({type:"SET_STORE_SETTING",payload:t})},zo=(t=[],e)=>{switch(e.type){case oe.SET_STORE_SETTINGS:{const{data:a}=e.payload;let n=we(t);for(const r of a){let c=t.findIndex(o=>o.id===r.id);n[c]?n[c]=r:n.push(r)}return n}case oe.SET_STORE_SETTING:{const{data:a}=e.payload,n=t.findIndex(c=>c.id===a.id);if(n<0)return t;const r=we(t);return r[n]={...r[n],...a},r}default:return t}};var da=(t=>(t.SET_STORE_PAGE="SET_STORE_PAGE",t))(da||{});const pe={setStorePage:t=>({type:"SET_STORE_PAGE",payload:t})},Wo=(t="",e)=>{switch(e.type){case da.SET_STORE_PAGE:{const{data:a}=e.payload;return a}default:return t}};var Re=(t=>(t.READ_STORE_CREDITS_DASHBOARD_DATA="READ_STORE_CREDITS_DASHBOARD_DATA",t.READ_STORE_CREDITS_HISTORY_DATA="READ_STORE_CREDITS_HISTORY",t.SET_STORE_CREDITS_DASHBOARD_DATA="SET_STORE_CREDITS_DASHBOARD_DATA",t.SET_STORE_CREDITS_HISTORY_DATA="SET_STORE_CREDITS_HISTORY_DATA",t))(Re||{});const ke={readStoreCreditsDashboardData:t=>({type:"READ_STORE_CREDITS_DASHBOARD_DATA",payload:t}),readStoreCreditsHistoryData:t=>({type:"READ_STORE_CREDITS_HISTORY",payload:t}),setStoreCreditsDashboardData:t=>({type:"SET_STORE_CREDITS_DASHBOARD_DATA",payload:t}),setStoreCreditsHistoryData:t=>({type:"SET_STORE_CREDITS_HISTORY_DATA",payload:t})},Ko=(t=null,e)=>{switch(e.type){case Re.SET_STORE_CREDITS_DASHBOARD_DATA:{const{status:a}=e.payload;return{...t,status:a}}case Re.SET_STORE_CREDITS_HISTORY_DATA:{const{data:a}=e.payload;return{...t,history:a}}default:return t}};var ie=(t=>(t.READ_STORE_CREDITS_CUSTOMERS="READ_STORE_CREDITS_CUSTOMERS",t.READ_STORE_CREDITS_CUSTOMER_STATUS="READ_STORE_CREDITS_CUSTOMER_STATUS",t.READ_STORE_CREDITS_CUSTOMER_ENTRIES="READ_STORE_CREDITS_CUSTOMER_ENTRIES",t.ADJUST_CUSTOMER_STORE_CREDITS="ADJUST_CUSTOMER_STORE_CREDITS",t.SET_STORE_CREDITS_CUSTOMERS="SET_STORE_CREDITS_CUSTOMERS",t.SET_STORE_CREDITS_CUSTOMER_STATUS="SET_STORE_CREDITS_CUSTOMER_STATUS",t.SET_STORE_CREDITS_CUSTOMER_BALANCE="SET_STORE_CREDITS_CUSTOMER_BALANCE",t))(ie||{});const Se={readStoreCreditsCustomers:t=>({type:"READ_STORE_CREDITS_CUSTOMERS",payload:t}),readStoreCreditsCustomerStatus:t=>({type:"READ_STORE_CREDITS_CUSTOMER_STATUS",payload:t}),readStoreCreditsCustomerEntries:t=>({type:"READ_STORE_CREDITS_CUSTOMER_ENTRIES",payload:t}),adjustCustomerStoreCredits:t=>({type:"ADJUST_CUSTOMER_STORE_CREDITS",payload:t}),setStoreCreditsCustomers:t=>({type:"SET_STORE_CREDITS_CUSTOMERS",payload:t}),setStoreCreditsCustomerStatus:t=>({type:"SET_STORE_CREDITS_CUSTOMER_STATUS",payload:t}),setStoreCreditsCustomerBalance:t=>({type:"SET_STORE_CREDITS_CUSTOMER_BALANCE",payload:t})},Qo=(t=[],e)=>{let a;switch(e.type){case ie.SET_STORE_CREDITS_CUSTOMERS:const{data:n}=e.payload;return n;case ie.SET_STORE_CREDITS_CUSTOMER_STATUS:const{id:r,status:c,sources:o}=e.payload;return a=t.findIndex(i=>i.id===r),t[a]={...t[a],status:c,sources:o},[...t];case ie.SET_STORE_CREDITS_CUSTOMER_BALANCE:const{balance:s,balance_raw:l}=e.payload;return a=t.findIndex(i=>i.id===e.payload.id),t[a]={...t[a],balance:s,balance_raw:l,status:[],sources:[]},[...t];default:return t}};var rt=(t=>(t.READ_DASHBOARD_WIDGETS_DATA="READ_DASHBOARD_WIDGETS_DATA",t.SET_DASHBOARD_WIDGETS_DATA="SET_DASHBOARD_WIDGETS_DATA",t))(rt||{});const ma={readDashboardWidgetsData:t=>({type:"READ_DASHBOARD_WIDGETS_DATA",payload:t}),setDashboardWidgetsData:t=>({type:"SET_DASHBOARD_WIDGETS_DATA",payload:t})},Jo=(t=null,e)=>{switch(e.type){case rt.SET_DASHBOARD_WIDGETS_DATA:{const{widgets:a}=e.payload;return a}default:return t}};var Oe=(t=>(t.READ_ADMIN_NOTICES="READ_ADMIN_NOTICES",t.SET_ADMIN_NOTICES="SET_ADMIN_NOTICES",t.DISMISS_ADMIN_NOTICE="DISMISS_ADMIN_NOTICE",t.READ_ADMIN_NOTICE="READ_ADMIN_NOTICE",t))(Oe||{});const ct={readAdminNotices:t=>({type:"READ_ADMIN_NOTICES",payload:t}),setAdminNotices:t=>({type:"SET_ADMIN_NOTICES",payload:t}),dismissAdminNotice:t=>({type:"DISMISS_ADMIN_NOTICE",payload:t}),readAdminNotice:t=>({type:"READ_ADMIN_NOTICE",payload:t})},Xo=(t=[],e)=>{switch(e.type){case Oe.SET_ADMIN_NOTICES:{const{notices:a}=e.payload;return a}case Oe.DISMISS_ADMIN_NOTICE:{const{slug:a}=e.payload;return t.filter(r=>r.slug!==a)}default:return t}};var H=(t=>(t.READ_COUPON_TEMPLATES="READ_COUPON_TEMPLATES",t.READ_COUPON_TEMPLATE="READ_COUPON_TEMPLATE",t.READ_RECENT_COUPON_TEMPLATES="READ_RECENT_COUPON_TEMPLATES",t.READ_COUPON_TEMPLATE_CATEGORIES="READ_COUPON_TEMPLATE_CATEGORIES",t.READ_COUPON_TEMPLATE_CATEGORY="READ_COUPON_TEMPLATE_CATEGORY",t.CREATE_COUPON_FROM_TEMPLATE="CREATE_COUPON_FROM_TEMPLATE",t.DELETE_RECENT_COUPON_TEMPLATE="DELETE_RECENT_COUPON_TEMPLATE",t.SET_COUPON_TEMPLATES="SET_COUPON_TEMPLATES",t.SET_COUPON_TEMPLATE_CATEGORIES="SET_COUPON_TEMPLATE_CATEGORIES",t.UNSET_RECENT_COUPON_TEMPLATE="UNSET_RECENT_COUPON_TEMPLATE",t.SET_COUPON_TEMPLATES_LOADING="SET_COUPON_TEMPLATES_LOADING",t.SET_EDIT_COUPON_TEMPLATE="SET_EDIT_COUPON_TEMPLATE",t.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE="SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",t.SET_CART_CONDITION_ITEM_DATA="SET_CART_CONDITION_ITEM_DATA",t.VALIDATE_EDIT_COUPON_TEMPLATE_DATA="VALIDATE_EDIT_COUPON_TEMPLATE_DATA",t.VALIDATE_CART_CONDITIONS_DATA="VALIDATE_CART_CONDITIONS_DATA",t.SET_COUPON_CREATED_RESPONSE_DATA="SET_COUPON_CREATED_RESPONSE_DATA",t.CLEAR_COUPON_CREATED_RESPONSE_DATA="CLEAR_COUPON_CREATED_RESPONSE_DATA",t.TOGGLE_PREMIUM_MODAL="TOGGLE_PREMIUM_MODAL",t))(H||{});const z={readCouponTemplates:t=>({type:"READ_COUPON_TEMPLATES",payload:t}),readCouponTemplate:t=>({type:"READ_COUPON_TEMPLATE",payload:t}),readRecentCouponTemplates:t=>({type:"READ_RECENT_COUPON_TEMPLATES",payload:t}),readCouponTemplateCategories:t=>({type:"READ_COUPON_TEMPLATE_CATEGORIES",payload:t}),readCouponTemplateCategory:t=>({type:"READ_COUPON_TEMPLATE_CATEGORY",payload:t}),createCouponFromTemplate:t=>({type:"CREATE_COUPON_FROM_TEMPLATE",payload:t}),deleteRecentCouponTemplate:t=>({type:"DELETE_RECENT_COUPON_TEMPLATE",payload:t}),setCouponTemplates:t=>({type:"SET_COUPON_TEMPLATES",payload:t}),setCouponTemplateCategories:t=>({type:"SET_COUPON_TEMPLATE_CATEGORIES",payload:t}),unsetRecentCouponTemplate:t=>({type:"UNSET_RECENT_COUPON_TEMPLATE",payload:t}),setCouponTemplatesLoading:t=>({type:"SET_COUPON_TEMPLATES_LOADING",payload:t}),setEditCouponTemplate:t=>({type:"SET_EDIT_COUPON_TEMPLATE",payload:t}),setEditCouponTemplateFieldValue:t=>({type:"SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",payload:t}),validateEditCouponTemplateData:()=>({type:"VALIDATE_EDIT_COUPON_TEMPLATE_DATA"}),validateCartConditionsData:()=>({type:"VALIDATE_CART_CONDITIONS_DATA"}),setCreatedCouponResponseData:t=>({type:"SET_COUPON_CREATED_RESPONSE_DATA",payload:t}),setCartConditionItemData:t=>({type:"SET_CART_CONDITION_ITEM_DATA",payload:t}),clearCreatedCouponResponseData:()=>({type:"CLEAR_COUPON_CREATED_RESPONSE_DATA"}),togglePremiumModal:t=>({type:"TOGGLE_PREMIUM_MODAL",payload:t})},pa=t=>{const{value:e,onChange:a}=t,n=[{value:"and",label:"AND"},{value:"or",label:"OR"}];return React.createElement("div",{className:"condition-logic centered-line"},React.createElement("div",{className:"field-control"},React.createElement(O,{value:e,options:n,onSelect:a})))},re=function(){return acfwAdminApp.admin_url.replace(location.origin,"")},fa=t=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t),Zo=t=>{let e=window.moment().startOf("month"),a=window.moment().startOf("day");switch(t){case"week_to_date":e=window.moment().startOf("week"),a=window.moment().startOf("day");break;case"month_to_date":e=window.moment().startOf("month"),a=window.moment().startOf("day");break;case"quarter_to_date":e=window.moment().startOf("quarter"),a=window.moment().startOf("day");break;case"year_to_date":e=window.moment().startOf("year"),a=window.moment().startOf("day");break;case"last_week":e=window.moment().subtract(1,"weeks").startOf("week"),a=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":e=window.moment().subtract(1,"months").startOf("month"),a=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":e=window.moment().subtract(1,"quarters").startOf("quarter"),a=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":e=window.moment().subtract(1,"years").startOf("year"),a=window.moment().subtract(1,"years").endOf("year");break}return[e,a]};async function ot(t,e){const a=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:t,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:e}});return Object.keys(a).map(n=>({label:a[n].name,value:a[n].term_id}))}async function st(t,e){const a=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products",term:t,security:acfwAdminApp.nonces.search_products,exclude:e}});return Object.keys(a).map(n=>({label:a[n],value:n}))}function Ea(t){return t.type==="increase"?"+":"-"}function J(t="default"){return t==="atleast"?[{value:"atleast",label:acfwAdminApp.condition_options.atleast},{value:"all",label:acfwAdminApp.condition_options.all}]:t==="period"?[{value:"within-a-period",label:acfwAdminApp.condition_options.withinaperiod},{value:"number-of-orders",label:acfwAdminApp.condition_options.numberoforders}]:[{value:"=",label:acfwAdminApp.condition_options.exactly},{value:"!=",label:acfwAdminApp.condition_options.anyexcept},{value:">",label:acfwAdminApp.condition_options.morethan},{value:"<",label:acfwAdminApp.condition_options.lessthan}]}const es=t=>{var c,o;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(s,l)=>{const i={...e.data,[s]:l};a(i)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:s=>r("condition",s),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.field),React.createElement(G,{value:e.data.value,onChange:s=>r("value",s!=null?s:void 0),min:0,status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":""}))))},ts=t=>{const e=t,a=[];return(e.value<0||typeof e.value!="number")&&a.push("value"),e.condition||a.push("condition"),a},as=t=>{var c,o;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(s,l)=>{const i={...e.data,[s]:l};a(i)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:s=>r("condition",s),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.field),React.createElement(G,{type:"number",value:e.data.value,onChange:s=>r("value",s!=null?s:void 0),status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":""}))))},ns=t=>{const e=t,a=[];return(e.value<0||typeof e.value!="number")&&a.push("value"),e.condition||a.push("condition"),a},rs=t=>{var c,o;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(s,l)=>{const i={...e.data,[s]:l};a(i)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:s=>r("condition",s),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.field),React.createElement(G,{value:e.data.value,onChange:s=>{var l,i;return r("value",(i=(l=s==null?void 0:s.target)==null?void 0:l.value)!=null?i:0)},min:0,status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":""}))))},cs=t=>{const e=t,a=[];return(e.value<0||typeof e.value!="number")&&a.push("value"),e.condition||a.push("condition"),a},Z=({fetchOptions:t,optionMapper:e,debounceTimeout:a=800,...n})=>{const[r,c]=E.useState(!1),[o,s]=E.useState([]),l=E.useRef(0),i=E.useMemo(()=>za(p=>{l.current+=1;const f=l.current;s([]),c(!0),t(p).then(g=>{f===l.current&&(s(g),c(!1))})},a),[t,a]);return React.createElement(O,{labelInValue:!0,filterOption:!1,onSearch:i,notFoundContent:r?React.createElement(he,{size:"small"}):null,...n,options:o})},os=t=>{var o,s,l;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=async i=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:i,security:acfwAdminApp.nonces.search_products,include:!0,exclude:e.data.value}});return Object.keys(d).map(p=>({label:d[p],value:p}))},c=(i,d)=>{const p={...e.data,[i]:d};a(p)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.coupons_label),React.createElement(Z,{mode:"multiple",placeholder:e.i18n.select_coupons,value:e.data.value,style:{width:"100%"},fetchOptions:r,status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":"",onChange:i=>c("value",i.map(d=>d.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,onSelect:i=>c("condition",i),status:(s=e==null?void 0:e.errors)!=null&&s.includes("condition")?"error":""},React.createElement(O.Option,{value:"atleast"},acfwAdminApp.condition_options.atleast),React.createElement(O.Option,{value:"all"},acfwAdminApp.condition_options.all))),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.quantity_label),React.createElement(G,{value:e.data.quantity,onChange:i=>c("quantity",i!=null?i:void 0),min:1,status:(l=e==null?void 0:e.errors)!=null&&l.includes("quantity")?"error":""}))))},ss=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.value.length<1&&a.push("value"),a},ls=t=>{const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(o,s)=>{const l=[...e.data];l[o]=s,a(l)},c=[{title:e.i18n.product_col,dataIndex:"product_id",key:"product_id",render:(o,s,l)=>{var i;return React.createElement(Z,{value:s.product_id?{value:s.product_id,label:s.product_label}:void 0,onChange:d=>r(l,{...s,product_id:parseInt(d.value),product_label:d.label}),showSearch:!0,fetchOptions:d=>st(d,[]),placeholder:n.search_product,status:(i=e==null?void 0:e.errors)!=null&&i.includes("product_id_".concat(l))?"error":""})}},{title:e.i18n.condition_col,dataIndex:"condition",key:"condition",render:(o,s,l)=>{var i;return React.createElement(O,{value:s.condition,options:J(),onSelect:d=>r(l,{...s,condition:d.toString()}),status:(i=e==null?void 0:e.errors)!=null&&i.includes("condition_".concat(l))?"error":""})}},{title:e.i18n.quantity_col,dataIndex:"quantity",key:"quantity",render:(o,s,l)=>{var i;return React.createElement(G,{value:s.quantity,onChange:d=>r(l,{...s,quantity:d!=null?d:0}),min:0,status:(i=e==null?void 0:e.errors)!=null&&i.includes("quantity_".concat(l))?"error":""})}}];return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-table"},React.createElement(ne,{columns:c,dataSource:e.data,bordered:!0,pagination:!1})))},is=t=>{const e=t,a=[];return e.forEach((n,r)=>{n.product_id===0&&a.push("product_id_".concat(r)),(n.quantity<0||typeof n.quantity!="number")&&a.push("quantity_".concat(r)),n.condition||a.push("condition_".concat(r))}),a},us=t=>{const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(s,l)=>{const i=[...e.data.products];i[s]=l,a({products:i})},c=E.useMemo(()=>_.map(e.i18n.products.options.conditions,(s,l)=>({value:l,label:s})),[e.i18n.products.options]),o=[{title:n.product,dataIndex:"product_id",key:"product_id",render:(s,l,i)=>{var d;return React.createElement(Z,{value:l!=null&&l.product?{value:l.product.id,label:l.product.label}:void 0,onChange:p=>r(i,{...l,product:{id:p.value,label:p.label}}),showSearch:!0,fetchOptions:p=>st(p,[]),placeholder:n.search_product,status:(d=e==null?void 0:e.errors)!=null&&d.includes("product_id_".concat(i))?"error":""})}},{title:n.condition,dataIndex:"condition",key:"condition",render:(s,l,i)=>{var d;return React.createElement(O,{labelInValue:!0,value:l!=null&&l.condition?{value:l.condition.id,label:l.condition.label}:void 0,options:c,onChange:p=>r(i,{...l,condition:{id:p.value,label:p.label}}),status:(d=e==null?void 0:e.errors)!=null&&d.includes("condition_".concat(i))?"error":""})}}];return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-table"},React.createElement(ne,{columns:o,dataSource:e.data.products,bordered:!0,pagination:!1})))},ds=t=>{const{products:e}=t,a=[];return e.forEach((n,r)=>{(!n.product.id||n.product.id==="0")&&a.push("product_id_".concat(r)),n.condition.id||a.push("condition_".concat(r))}),a},ms=t=>{var i,d;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,[r,c]=E.useState(e.i18n.within_a_period),o=(p,f)=>{const g={...e.data,[p]:f};a(g),p==="condition"&&c(f==="within-a-period"?e.i18n.within_a_period:e.i18n.number_of_orders)},s=(p,f)=>{const g=[...e.data.products];g[p]=f,a({...e.data,products:g})},l=[{title:n.product,dataIndex:"product_id",key:"product_id",render:(p,f,g)=>{var R;return React.createElement(Z,{value:f.product_id?{value:f.product_id,label:f.product_label}:void 0,onChange:T=>s(g,{...f,product_id:parseInt(T.value),product_label:T.label}),showSearch:!0,fetchOptions:T=>st(T,[]),placeholder:n.search_product,status:(R=e==null?void 0:e.errors)!=null&&R.includes("product_id_".concat(g))?"error":""})}},{title:n.condition,dataIndex:"condition",key:"condition",render:(p,f,g)=>{var R;return React.createElement(O,{value:f.condition,options:J(),onSelect:T=>s(g,{...f,condition:T.toString()}),status:(R=e==null?void 0:e.errors)!=null&&R.includes("condition_".concat(g))?"error":""})}},{title:n.quantity,dataIndex:"quantity",key:"quantity",render:(p,f,g)=>{var R;return React.createElement(G,{value:f.quantity,onChange:T=>s(g,{...f,quantity:T!=null?T:0}),min:0,status:(R=e==null?void 0:e.errors)!=null&&R.includes("quantity_".concat(g))?"error":""})}}];return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.type),React.createElement(O,{value:e.data.condition,options:J("period"),onSelect:p=>o("condition",p),status:(i=e==null?void 0:e.errors)!=null&&i.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,r),React.createElement(G,{value:e.data.value,onChange:p=>o("value",p),min:0,status:(d=e==null?void 0:e.errors)!=null&&d.includes("value")?"error":""}))),React.createElement("div",{className:"condition-field-table"},React.createElement(ne,{columns:l,dataSource:e.data.products,bordered:!0,pagination:!1})))},ps=t=>{const e=t,a=[];return e.condition||a.push("condition"),(e.value<0||typeof e.value!="number")&&a.push("value"),e.products.forEach((n,r)=>{n.product_id===0&&a.push("product_id_".concat(r)),(n.quantity<0||typeof n.quantity!="number")&&a.push("quantity_".concat(r)),n.condition||a.push("condition_".concat(r))}),a},fs=t=>{var c,o,s;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(l,i)=>{const d={...e.data,[l]:i};a(d)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(Z,{mode:"multiple",placeholder:"Select categories",value:e.data.value,style:{width:"100%"},fetchOptions:l=>ot(l,e.data.value),status:(c=e==null?void 0:e.errors)!=null&&c.includes("value")?"error":"",onChange:l=>r("value",l.map(i=>i.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:l=>r("condition",l),status:(o=e==null?void 0:e.errors)!=null&&o.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,n.quantity),React.createElement(G,{value:e.data.quantity,onChange:l=>r("quantity",l!=null?l:0),min:0,status:(s=e==null?void 0:e.errors)!=null&&s.includes("quantity")?"error":""}))))},Es=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.value.length<1&&a.push("value"),a},_s=t=>{var o,s,l;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=async i=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:i,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:e.data.value}});return Object.keys(d).map(p=>({label:d[p].name,value:d[p].term_id}))},c=(i,d)=>{const p={...e.data,[i]:d};a(p)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(Z,{mode:"multiple",placeholder:"Select categories",value:e.data.value,style:{width:"100%"},fetchOptions:r,status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":"",onChange:i=>c("value",i.map(d=>d.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:i=>c("condition",i),status:(s=e==null?void 0:e.errors)!=null&&s.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,n.quantity),React.createElement(G,{value:parseInt(e.data.quantity),onChange:i=>{var d;return c("quantity",(d=i==null?void 0:i.toString())!=null?d:void 0)},min:0,status:(l=e==null?void 0:e.errors)!=null&&l.includes("quantity")?"error":""}))))},gs=t=>{var s,l,i,d,p;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,[r,c]=E.useState(e.i18n.within_a_period),o=(f,g)=>{const R={...e.data,[f]:g};a(R),f==="type"&&c(g.condition==="within-a-period"?e.i18n.within_a_period:e.i18n.number_of_orders)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.type),React.createElement(O,{value:e.data.type.condition,options:J("period"),onSelect:f=>o("type",{...e.data.type,condition:f}),status:(s=e==null?void 0:e.errors)!=null&&s.includes("type_condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,r),React.createElement(G,{value:e.data.type.value,onChange:f=>o("type",{...e.data.type,value:f}),min:0,status:(l=e==null?void 0:e.errors)!=null&&l.includes("type_value")?"error":""}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(Z,{mode:"multiple",placeholder:"Select categories",value:e.data.categories,style:{width:"100%"},fetchOptions:f=>ot(f,e.data.categories),status:(i=e==null?void 0:e.errors)!=null&&i.includes("categories")?"error":"",onChange:f=>o("categories",f.map(g=>g.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:f=>o("condition",f),status:(d=e==null?void 0:e.errors)!=null&&d.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,n.quantity),React.createElement(G,{value:e.data.quantity,onChange:f=>o("quantity",f!=null?f:0),min:0,status:(p=e==null?void 0:e.errors)!=null&&p.includes("quantity")?"error":""}))))},hs=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.categories.length<1&&a.push("categories"),e.type.condition||a.push("type_condition"),(e.type.value<0||typeof e.type.value!="number")&&a.push("type_value"),a},Rs=t=>{const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(c,o)=>{const s={...e.data,[c]:o};a(s)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement("label",null,e.i18n.field),React.createElement(Z,{mode:"multiple",placeholder:"Select categories",value:e.data.value,style:{width:"100%"},fetchOptions:c=>ot(c,e.data.value),onChange:c=>r("value",c.map(o=>o.value))}))),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:c=>r("condition",c)})),React.createElement("div",{className:"field-control"},React.createElement("label",null,n.quantity),React.createElement(G,{value:e.data.quantity,onChange:c=>r("quantity",c!=null?c:0),min:0}))))},ys=t=>{const e=t,a=[];return(e.quantity<0||typeof e.quantity!="number")&&a.push("quantity"),e.condition||a.push("condition"),e.value.length<1&&a.push("value"),a},Ss=t=>{var n;const{field:e,onChange:a}=t;return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement(O,{value:e.data,onSelect:a,status:(n=e.errors)!=null&&n.includes("value")?"error":""},React.createElement(O.Option,{value:"logged-in"},e.i18n.options["logged-in"]),React.createElement(O.Option,{value:"guest"},e.i18n.options.guest)))))},Ts=t=>{const e=t,a=[];return e||a.push("value"),a},Cs=t=>{var r;const{field:e,onChange:a}=t,n=E.useMemo(()=>_.map(e.i18n.options,(c,o)=>({value:o,label:c})),[e.i18n.options]);return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control full-width"},React.createElement(O,{mode:"multiple",placeholder:e.i18n.placeholder,value:e.data,options:n,onChange:a,status:(r=e.errors)!=null&&r.includes("value")?"error":""}))))},vs=t=>{const e=t,a=[];return e.length<1&&a.push("value"),a},Ot=t=>{var r;const{field:e,min:a,onChange:n}=t;return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement(G,{type:"number",value:e.data,onChange:c=>n(c!=null?c:1),min:a,addonAfter:e.i18n.hours,status:(r=e.errors)!=null&&r.includes("value")?"error":""}))))},bs=t=>{const e=t,a=[];return e||a.push("value"),a},As=t=>{var c,o,s;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(l,i)=>{const d={...e.data,[l]:i};a(d)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:l=>r("condition",l),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.total_spend),React.createElement(G,{value:parseFloat(e.data.value),onChange:l=>r("value",l!=null?l:""),decimalSeparator:".",parser:l=>parseFloat(l!=null?l:""),status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.days_offset),React.createElement(G,{value:e.data.offset,onChange:l=>r("offset",l!=null?l:void 0),min:0,status:(s=e==null?void 0:e.errors)!=null&&s.includes("offset")?"error":""}))))},ws=t=>{const e=t,a=[];return(parseInt(e.value)<0||e.value==="")&&a.push("value"),(e.offset<0||typeof e.offset!="number")&&a.push("offset"),e.condition||a.push("condition"),a},Os=t=>{var c,o,s;const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(l,i)=>{const d={...e.data,[l]:i};a(d)};return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("p",null,e.i18n.desc),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:J(),onSelect:l=>r("condition",l),status:(c=e==null?void 0:e.errors)!=null&&c.includes("condition")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.count_label),React.createElement(G,{value:parseInt(e.data.value),onChange:l=>r("value",l!=null?l:0),min:0,status:(o=e==null?void 0:e.errors)!=null&&o.includes("value")?"error":""})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.prev_days_label),React.createElement(G,{value:e.data.offset,onChange:l=>r("offset",l!=null?l:0),min:0,status:(s=e==null?void 0:e.errors)!=null&&s.includes("offset")?"error":""}))))},Ns=t=>{const e=t,a=[];return(e.offset<0||typeof e.offset!="number")&&a.push("offset"),(parseInt(e.value)<0||e.value==="")&&a.push("value"),e.condition||a.push("condition"),a},Ds=t=>{const{value:e,type:a,handleChange:n}=t;return a==="number"?React.createElement(G,{value:parseInt(e),onChange:r=>n("value",r==null?void 0:r.toString())}):a==="price"?React.createElement(G,{value:parseFloat(e),onChange:r=>n("value",r==null?void 0:r.toString()),decimalSeparator:".",parser:r=>parseFloat(r!=null?r:"")}):React.createElement(W,{value:e,onChange:r=>n("value",r.target.value)})},Ps=t=>{const{field:e,onChange:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,r=(o,s)=>{const l={...e.data,[o]:s};a(l)},c=E.useMemo(()=>J().map(o=>({...o,disabled:["<",">"].includes(o.value)&&e.data.type==="string"})),[e.data.type]);return React.createElement("div",{className:"condition-field"},React.createElement("h3",null,e.i18n.title),React.createElement("div",{className:"condition-field-form"},React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.value_type),React.createElement(O,{value:e.data.type,onSelect:o=>r("type",o)},React.createElement(O.Option,{value:"string"},e.i18n.type_options.string),React.createElement(O.Option,{value:"number"},e.i18n.type_options.number),React.createElement(O.Option,{value:"price"},e.i18n.type_options.price))),React.createElement("div",{className:"field-control"},React.createElement("label",null,n.condition),React.createElement(O,{value:e.data.condition,options:c,onSelect:o=>r("condition",o)})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.meta_key),React.createElement(W,{value:e.data.key,onChange:o=>r("key",o)})),React.createElement("div",{className:"field-control"},React.createElement("label",null,e.i18n.meta_value),React.createElement(Ds,{value:e.data.value,type:e.data.type,handleChange:r}))))},Is=t=>{const e=t,a=[];return e.type||a.push("type"),(e.type==="string"&&!e.value||parseInt(e.value)<0||e.value==="")&&a.push("value"),e.key||a.push("key"),e.condition||a.push("condition"),a},{setCartConditionItemData:$s}=z,ks=t=>{const{field:e,groupKey:a,fieldKey:n,actions:r}=t,c=o=>{r.setCartConditionItemData({groupKey:a,fieldKey:n,data:o})};switch(e.type){case"logic":return React.createElement(pa,{value:e.data,onChange:c});case"cart-quantity":return React.createElement(es,{field:e,onChange:c});case"cart-subtotal":return React.createElement(as,{field:e,onChange:c});case"cart-weight":return React.createElement(rs,{field:e,onChange:c});case"coupons-applied-in-cart":return React.createElement(os,{field:e,onChange:c});case"product-quantity":return React.createElement(ls,{field:e,onChange:c});case"product-stock-availability-exists-in-cart":return React.createElement(us,{field:e,onChange:c});case"has-ordered-before":return React.createElement(ms,{field:e,onChange:c});case"product-category":return React.createElement(fs,{field:e,onChange:c});case"custom-taxonomy":return React.createElement(_s,{field:e,onChange:c});case"has-ordered-product-categories-before":return React.createElement(gs,{field:e,onChange:c});case"total-customer-spend-on-product-category":return React.createElement(Rs,{field:e,onChange:c});case"customer-logged-in-status":return React.createElement(Ss,{field:e,onChange:c});case"customer-user-role":case"disallowed-customer-user-role":return React.createElement(Cs,{field:e,onChange:c});case"customer-registration-date":return React.createElement(Ot,{field:e,onChange:c,min:1});case"customer-last-ordered":return React.createElement(Ot,{field:e,onChange:c,min:0});case"total-customer-spend":return React.createElement(As,{field:e,onChange:c});case"number-of-orders":return React.createElement(Os,{field:e,onChange:c});case"custom-user-meta":case"custom-cart-item-meta":return React.createElement(Ps,{field:e,onChange:c})}return React.createElement("div",null,"Unknown field type")},xs=t=>({actions:$({setCartConditionItemData:$s},t)}),Ms=I(null,xs)(ks);function Ls(t,e){switch(t){case"cart-quantity":return ts(e);case"cart-subtotal":return ns(e);case"cart-weight":return cs(e);case"coupons-applied-in-cart":return ss(e);case"product-quantity":return is(e);case"product-stock-availability-exists-in-cart":return ds(e);case"has-ordered-before":return ps(e);case"product-category":return Es(e);case"has-ordered-product-categories-before":return hs(e);case"total-customer-spend-on-product-category":return ys(e);case"customer-logged-in-status":return Ts(e);case"customer-user-role":case"disallowed-customer-user-role":return vs(e);case"customer-registration-date":case"customer-last-ordered":return bs(e);case"total-customer-spend":return ws(e);case"number-of-orders":return Ns(e);case"custom-user-meta":case"custom-cart-item-meta":return Is(e)}return[]}const Bs=(t={loading:!1,templates:[],recent:[],review:[],edit:null,categories:[],formResponse:null,premiumModal:!1},e)=>{let a;switch(e.type){case H.SET_COUPON_TEMPLATES:{const{data:n,type:r="main"}=e.payload;switch(r){case"main":return{...t,templates:n};case"recent":return{...t,recent:n};case"review":return{...t,review:n}}}case H.SET_COUPON_TEMPLATE_CATEGORIES:{const{data:n}=e.payload;return{...t,categories:n}}case H.UNSET_RECENT_COUPON_TEMPLATE:{const{id:n}=e.payload,r=[...t.recent];return a=r.findIndex(c=>c.id===n),r.splice(a,1),{...t,recent:r}}case H.SET_COUPON_TEMPLATES_LOADING:{const{loading:n}=e.payload;return{...t,loading:n}}case H.SET_EDIT_COUPON_TEMPLATE:{const{data:n}=e.payload;return{...t,edit:n}}case H.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE:{const{field:n,value:r}=e.payload,c={...t.edit};if(!c||!c.fields)return t;const o=c.fields.findIndex(s=>s.field===n);return o>-1&&(c.fields[o].value=r),{...t,edit:{...c}}}case H.VALIDATE_EDIT_COUPON_TEMPLATE_DATA:{const n={...t.edit};if(!n||!n.fields)return t;const r=n.fields.map(c=>(c.is_required&&!c.value?c.error="This field is required":c.error=void 0,c));return{...t,edit:{...n,fields:r}}}case H.VALIDATE_CART_CONDITIONS_DATA:{const n={...t.edit};if(!n||!n.cart_conditions||!n.cart_conditions.length)return t;let r=window.lodash.cloneDeep(n.cart_conditions);return r=r.map(c=>{if(c.type==="group_logic")return c;let o=c.fields;return o=o.map(s=>(s.type==="logic"||(s.errors=Ls(s.type,s.data)),s)),{...c,fields:o}}),{...t,edit:{...n,cart_conditions:r}}}case H.SET_COUPON_CREATED_RESPONSE_DATA:{const{data:n}=e.payload;return{...t,formResponse:n}}case H.SET_CART_CONDITION_ITEM_DATA:{const{groupKey:n,fieldKey:r,data:c}=e.payload,o={...t.edit};if(!o||!o.cart_conditions)return t;const s=window.lodash.cloneDeep(o.cart_conditions),l=s[n].type==="group_logic"?s[n]:null,i=s[n].type==="group"?s[n]:null;return r===null&&l!==null?(l.value=c,s[n]=l):r!==null&&(i==null?void 0:i.type)==="group"&&(i.fields[r].data=c,s[n]=i),{...t,edit:{...o,cart_conditions:s}}}case H.CLEAR_COUPON_CREATED_RESPONSE_DATA:{const n={...t.edit};return n.fields=n.fields.map(r=>{var c;return r.value=(c=r.pre_filled_value)!=null?c:"",r}),{...t,formResponse:null,edit:null}}case H.TOGGLE_PREMIUM_MODAL:{const{show:n}=e.payload;return{...t,premiumModal:n}}}return t};(function(){(function(t){(function(e){var a={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(m){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(m){return m&&DataView.prototype.isPrototypeOf(m)}if(a.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(m){return m&&r.indexOf(Object.prototype.toString.call(m))>-1};function o(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function s(m){return typeof m!="string"&&(m=String(m)),m}function l(m){var h={next:function(){var b=m.shift();return{done:b===void 0,value:b}}};return a.iterable&&(h[Symbol.iterator]=function(){return h}),h}function i(m){this.map={},m instanceof i?m.forEach(function(h,b){this.append(b,h)},this):Array.isArray(m)?m.forEach(function(h){this.append(h[0],h[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(h){this.append(h,m[h])},this)}i.prototype.append=function(m,h){m=o(m),h=s(h);var b=this.map[m];this.map[m]=b?b+", "+h:h},i.prototype.delete=function(m){delete this.map[o(m)]},i.prototype.get=function(m){return m=o(m),this.has(m)?this.map[m]:null},i.prototype.has=function(m){return this.map.hasOwnProperty(o(m))},i.prototype.set=function(m,h){this.map[o(m)]=s(h)},i.prototype.forEach=function(m,h){for(var b in this.map)this.map.hasOwnProperty(b)&&m.call(h,this.map[b],b,this)},i.prototype.keys=function(){var m=[];return this.forEach(function(h,b){m.push(b)}),l(m)},i.prototype.values=function(){var m=[];return this.forEach(function(h){m.push(h)}),l(m)},i.prototype.entries=function(){var m=[];return this.forEach(function(h,b){m.push([b,h])}),l(m)},a.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);function d(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function p(m){return new Promise(function(h,b){m.onload=function(){h(m.result)},m.onerror=function(){b(m.error)}})}function f(m){var h=new FileReader,b=p(h);return h.readAsArrayBuffer(m),b}function g(m){var h=new FileReader,b=p(h);return h.readAsText(m),b}function R(m){for(var h=new Uint8Array(m),b=new Array(h.length),x=0;x<h.length;x++)b[x]=String.fromCharCode(h[x]);return b.join("")}function T(m){if(m.slice)return m.slice(0);var h=new Uint8Array(m.byteLength);return h.set(new Uint8Array(m)),h.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:a.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:a.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():a.arrayBuffer&&a.blob&&n(m)?(this._bodyArrayBuffer=T(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||c(m))?this._bodyArrayBuffer=T(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var m=d(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var m=d(this);if(m)return m;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function N(m){var h=m.toUpperCase();return w.indexOf(h)>-1?h:m}function C(m,h){h=h||{};var b=h.body;if(m instanceof C){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,h.headers||(this.headers=new i(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!b&&m._bodyInit!=null&&(b=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=h.credentials||this.credentials||"same-origin",(h.headers||!this.headers)&&(this.headers=new i(h.headers)),this.method=N(h.method||this.method||"GET"),this.mode=h.mode||this.mode||null,this.signal=h.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function S(m){var h=new FormData;return m.trim().split("&").forEach(function(b){if(b){var x=b.split("="),q=x.shift().replace(/\+/g," "),D=x.join("=").replace(/\+/g," ");h.append(decodeURIComponent(q),decodeURIComponent(D))}}),h}function y(m){var h=new i,b=m.replace(/\r?\n[\t ]+/g," ");return b.split(/\r?\n/).forEach(function(x){var q=x.split(":"),D=q.shift().trim();if(D){var fe=q.join(":").trim();h.append(D,fe)}}),h}A.call(C.prototype);function v(m,h){h||(h={}),this.type="default",this.status=h.status===void 0?200:h.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in h?h.statusText:"OK",this.headers=new i(h.headers),this.url=h.url||"",this._initBody(m)}A.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var m=new v(null,{status:0,statusText:""});return m.type="error",m};var M=[301,302,303,307,308];v.redirect=function(m,h){if(M.indexOf(h)===-1)throw new RangeError("Invalid status code");return new v(null,{status:h,headers:{location:m}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(m){e.DOMException=function(h,b){this.message=h,this.name=b;var x=Error(h);this.stack=x.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function V(m,h){return new Promise(function(b,x){var q=new C(m,h);if(q.signal&&q.signal.aborted)return x(new e.DOMException("Aborted","AbortError"));var D=new XMLHttpRequest;function fe(){D.abort()}D.onload=function(){var ce={status:D.status,statusText:D.statusText,headers:y(D.getAllResponseHeaders()||"")};ce.url="responseURL"in D?D.responseURL:ce.headers.get("X-Request-URL");var Le="response"in D?D.response:D.responseText;b(new v(Le,ce))},D.onerror=function(){x(new TypeError("Network request failed"))},D.ontimeout=function(){x(new TypeError("Network request failed"))},D.onabort=function(){x(new e.DOMException("Aborted","AbortError"))},D.open(q.method,q.url,!0),q.credentials==="include"?D.withCredentials=!0:q.credentials==="omit"&&(D.withCredentials=!1),"responseType"in D&&a.blob&&(D.responseType="blob"),q.headers.forEach(function(ce,Le){D.setRequestHeader(Le,ce)}),q.signal&&(q.signal.addEventListener("abort",fe),D.onreadystatechange=function(){D.readyState===4&&q.signal.removeEventListener("abort",fe)}),D.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return V.polyfill=!0,t.fetch||(t.fetch=V,t.Headers=i,t.Request=C,t.Response=v),e.Headers=i,e.Request=C,e.Response=v,e.fetch=V,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:ba)})();const Us=axios.CancelToken,B=axios.create({baseURL:wpApiSettings.root,timeout:0,headers:{"X-WP-Nonce":wpApiSettings.nonce,"X-ACFW-Context":"admin"}}),Fe=new Map,xe=t=>{const e=Fe.get(t);e&&(e(),Fe.delete(t))},te=t=>new Us(e=>Fe.set(t,e));function*js(t){const{id:e,processingCB:a,successCB:n,failCB:r}=t.payload,c=e||"general_section";try{typeof a=="function"&&a();const o=yield F(()=>B.get("coupons/v1/settings/sections",{headers:{section:c}}));if(o&&o.data){const s=c?o.data.findIndex(l=>l.id===c):0;yield j(ae.rehydrateStoreSettings({data:o.data[s]})),yield j($e.setStoreSectionItems({data:o.data})),typeof n=="function"&&n(o)}}catch(o){typeof r=="function"&&r({error:o})}}function*Fs(t){const{id:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=e||"general_section",o=yield F(()=>B.get("coupons/v1/settings/sections/".concat(c)));o&&o.data&&(yield j(ae.rehydrateStoreSettings({data:o.data})),yield j($e.setStoreSectionItem({data:o.data})),typeof n=="function"&&n(o))}catch(c){typeof r=="function"&&r({error:c})}}const Gs=[U(Ee.READ_SECTIONS,js),U(Ee.READ_SECTION,Fs)];function*qs(t){const{data:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=yield F(()=>B.post("coupons/v1/setting/sections",e));c&&c.data&&(yield j(ae.rehydrateStoreSettings({})),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c,payload:e})}}function*Hs(t){const{data:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{if(typeof a=="function"&&a(),!e.id)throw new Error("Can not update survey. No survey id provided.");const c=yield F(()=>{const{id:o,...s}=e;return B.put("coupons/v1/settings/".concat(o),s)});c&&c.data&&(yield j(ae.rehydrateStoreSetting({id:c.data.id,data:c.data})),e.type==="module"&&(yield j($e.toggleModuleSection({module:e.id,show:e.value==="yes"}))),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c,payload:e})}}function*Vs(t){const{id:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=yield F(()=>B.delete("coupons/v1/settings/".concat(e)));c&&c.data&&(yield j(ae.rehydrateStoreSettings({})),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c})}}function*Ys(t){const{processingCB:e,successCB:a,failCB:n}=t.payload;try{typeof e=="function"&&e();const r=yield F(()=>B.get("coupons/v1/settings/"));r&&r.data&&(yield j(ae.rehydrateStoreSettings({data:r.data})),typeof a=="function"&&a(r))}catch(r){typeof n=="function"&&n({error:r})}}function*zs(t){const{data:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{if(typeof a=="function"&&a(),e){let c=e.fields.filter(o=>o.type!=="title"&&o.type!=="sectionend");c=c.map(o=>({id:o.id,value:o.value})),yield j(ae.setStoreSettingItems({data:c})),typeof n=="function"&&n(c)}}catch(c){typeof r=="function"&&r({error:c})}}function*Ws(t){const{id:e,data:a,processingCB:n,successCB:r,failCB:c}=t.payload;try{if(typeof n=="function"&&n(),a)yield j(ae.setStoreSettingItem({data:a})),typeof r=="function"&&r(a);else{const o=yield F(()=>B.get("coupons/v1/settings/".concat(e)));o&&o.data&&(yield j(ae.setStoreSettingItem({data:o.data})),typeof r=="function"&&r(o))}}catch(o){typeof c=="function"&&c({error:o})}}const Ks=[U(oe.CREATE_SETTING,qs),U(oe.UPDATE_SETTING,Hs),U(oe.DELETE_SETTING,Vs),U(oe.READ_SETTINGS,Ys),U(oe.REHYDRATE_STORE_SETTINGS,zs),U(oe.REHYDRATE_STORE_SETTING,Ws)];function*Qs(t){const{startPeriod:e,endPeriod:a,processingCB:n,successCB:r,failCB:c}=t.payload;try{typeof n=="function"&&n();const o=yield F(()=>B.get("store-credits/v1/customers/status",{params:{startPeriod:e,endPeriod:a},cancelToken:te("scdashboard")}));o&&o.data&&(yield j(ke.setStoreCreditsDashboardData({status:o.data})),typeof r=="function"&&r(o))}catch(o){typeof c=="function"&&c({error:o})}}function*Js(t){const{page:e,startPeriod:a,endPeriod:n,processingCB:r,successCB:c,failCB:o}=t.payload;try{typeof r=="function"&&r();const s=yield F(()=>B.get("store-credits/v1/entries",{params:{page:e,startPeriod:a,endPeriod:n,is_admin:!0}}));s&&s.data&&j&&(yield j(ke.setStoreCreditsHistoryData({data:s.data})),typeof c=="function"&&c(s))}catch(s){typeof o=="function"&&o({error:s})}}const Xs=[U(Re.READ_STORE_CREDITS_DASHBOARD_DATA,Qs),U(Re.READ_STORE_CREDITS_HISTORY_DATA,Js)];function*Zs(t){const{params:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=yield F(()=>B.get("store-credits/v1/customers",{params:e,cancelToken:te("customer_search")}));c&&c.data&&(yield j(Se.setStoreCreditsCustomers({data:c.data})),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c})}}function*el(t){const{id:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{if(typeof a=="function"&&a(),!e)throw new Error("Can't fetch data. No customer ID was provided.");const c=yield F(()=>B.get("store-credits/v1/customers/".concat(e)));c&&c.data&&(yield j(Se.setStoreCreditsCustomerStatus({id:e,status:c.data.status,sources:c.data.sources})),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c})}}function*tl(t){const{id:e,page:a,processingCB:n,successCB:r,failCB:c}=t.payload;try{if(typeof n=="function"&&n(),!e)throw new Error("Can't fetch data. No customer ID was provided.");const o=yield F(()=>B.get("store-credits/v1/entries",{params:{user_id:e,page:a!=null?a:1,is_admin:!0}}));o&&o.data&&typeof r=="function"&&r(o)}catch(o){typeof c=="function"&&c({error:o})}}function*al(t){const{id:e,type:a,amount:n,note:r,processingCB:c,successCB:o,failCB:s}=t.payload;try{if(typeof c=="function"&&c(),!e)throw new Error("Can't adjust store credits. No customer ID was provided.");const l=yield F(()=>B.post("store-credits/v1/entries",{user_id:e,type:a,amount:n,note:r!=null?r:"",action:"admin_".concat(a)}));l&&l.data&&typeof o=="function"&&o(l)}catch(l){typeof s=="function"&&s({error:l})}}const nl=[U(ie.READ_STORE_CREDITS_CUSTOMERS,Zs),U(ie.READ_STORE_CREDITS_CUSTOMER_STATUS,el),U(ie.READ_STORE_CREDITS_CUSTOMER_ENTRIES,tl),U(ie.ADJUST_CUSTOMER_STORE_CREDITS,al)];function*rl(t){const{startPeriod:e,endPeriod:a,processingCB:n,successCB:r,failCB:c}=t.payload;try{typeof n=="function"&&n();const o=yield F(()=>B.get("coupons/v1/reports",{params:{startPeriod:e,endPeriod:a},cancelToken:te("dashboardwidgets")}));o&&o.data&&(yield j(ma.setDashboardWidgetsData({widgets:o.data})),typeof r=="function"&&r(o))}catch(o){typeof c=="function"&&c({error:o})}}const cl=[U(rt.READ_DASHBOARD_WIDGETS_DATA,rl)];function*ol(t){const{processingCB:e,successCB:a,failCB:n}=t.payload;try{typeof e=="function"&&e();const r=yield F(()=>B.get("coupons/v1/reports/notices"));r&&r.data&&(yield j(ct.setAdminNotices({notices:r.data})),typeof a=="function"&&a(r))}catch(r){typeof n=="function"&&n({error:r})}}const sl=[U(Oe.READ_ADMIN_NOTICES,ol)];function*ll(t){const{isReview:e=!1,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=yield F(()=>B.get("coupons/v1/templates",{cancelToken:te("coupon_templates"),params:e?{is_review:1}:{}}));c&&c.data&&(yield j(z.setCouponTemplates({data:c.data,type:e?"review":"main"})),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c})}}function*il(t){const{id:e,isReview:a,processingCB:n,successCB:r,failCB:c}=t.payload;try{typeof n=="function"&&n();const o=yield F(()=>B.get("coupons/v1/templates/".concat(e),{cancelToken:te("coupon_template"),params:a?{is_review:1}:{}}));o&&o.data&&(o.data.fields=o.data.fields.map(s=>{var l;return s.value=(l=s.pre_filled_value)!=null?l:"",s}),typeof r=="function"&&r(o))}catch(o){typeof c=="function"&&c({error:o})}}function*ul(t){const{processingCB:e,successCB:a,failCB:n}=t.payload;try{typeof e=="function"&&e();const r=yield F(()=>B.get("coupons/v1/templates/recent",{cancelToken:te("recent_coupon_templates")}));r&&r.data&&(yield j(z.setCouponTemplates({data:r.data,type:"recent"})),typeof a=="function"&&a(r))}catch(r){typeof n=="function"&&n({error:r})}}function*dl(t){const{processingCB:e,successCB:a,failCB:n}=t.payload;try{typeof e=="function"&&e();const r=yield F(()=>B.get("coupons/v1/templates/categories",{cancelToken:te("coupon_template_categories")}));r&&r.data&&(yield j(z.setCouponTemplateCategories({data:r.data})),typeof a=="function"&&a(r))}catch(r){typeof n=="function"&&n({error:r})}}function*ml(t){const{slug:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=yield F(()=>B.get("coupons/v1/templates/categories/".concat(e),{cancelToken:te("coupon_template_category")}));c&&c.data&&(yield j(z.setCouponTemplates({data:c.data})),typeof n=="function"&&n(c))}catch(c){typeof r=="function"&&r({error:c})}}function*pl(t){const{data:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c={...e};c.cart_conditions=e.cart_conditions.map(s=>{if(s.type==="group_logic")return s;const l=s.fields;return{type:s.type,fields:l.map(({type:i,data:d})=>({type:i,data:d}))}});const o=yield F(()=>B.post("coupons/v1/templates",c,{cancelToken:te("coupon_template_create")}));o&&o.data&&typeof n=="function"&&n(o)}catch(c){typeof r=="function"&&r({error:c})}}function*fl(t){const{id:e,processingCB:a,successCB:n,failCB:r}=t.payload;try{typeof a=="function"&&a();const c=yield F(()=>B.delete("coupons/v1/templates/recent/".concat(e),{cancelToken:te("coupon_template_delete")}));typeof n=="function"&&n(c)}catch(c){typeof r=="function"&&r({error:c})}}const El=[U(H.READ_COUPON_TEMPLATES,ll),U(H.READ_COUPON_TEMPLATE,il),U(H.READ_RECENT_COUPON_TEMPLATES,ul),U(H.READ_COUPON_TEMPLATE_CATEGORIES,dl),U(H.READ_COUPON_TEMPLATE_CATEGORY,ml),U(H.CREATE_COUPON_FROM_TEMPLATE,pl),U(H.DELETE_RECENT_COUPON_TEMPLATE,fl)];function*_l(){yield Ft([...Gs,...Ks,...nl,...Xs,...cl,...sl,...El])}const gl=t=>Vt(...t);function hl(t=void 0){const e=Gt(),a=qt(Ht({sections:Yo,settingValues:zo,page:Wo,storeCreditsDashboard:Ko,storeCreditsCustomers:Qo,dashboardWidgets:Jo,adminNotices:Xo,couponTemplates:Bs}),t,gl([e]));return e.run(_l),a}const lt=t=>{const{hideUpgrade:e}=t,{app_pages:a,premium_page:n}=acfwAdminApp,[r]=a.filter(c=>c.slug==="acfw-premium");return React.createElement("div",{className:"acfw-logo-div"},r?React.createElement(React.Fragment,null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"})),!e&&React.createElement("a",{className:"acfw-header-upgrade-btn",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=upgrade",target:"_blank",rel:"noreferrer"},n.upgrade)):React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"}))},ue=t=>{var r;const{title:e,className:a,description:n}=t;return(r=t.hideUpgrade)!=null,React.createElement("div",{className:"page-header ".concat(a!=null?a:"")},React.createElement(lt,{hideUpgrade:!0}),!!e&&React.createElement("h1",null,e),!!n&&React.createElement("p",null,n))},Rl=()=>{const{admin_url:t,dashboard_page:{create_coupon:e}}=acfwAdminApp;return React.createElement("div",{className:"quick-create-coupon"},React.createElement("span",{className:"label"},"".concat(e.label,":")),React.createElement(P,{type:"primary",href:"".concat(t,"post-new.php?post_type=shop_coupon&type=percent"),target:"_blank",size:"small",ghost:!0},e.percentage),React.createElement(P,{type:"primary",href:"".concat(t,"post-new.php?post_type=shop_coupon&type=fixed_cart"),target:"_blank",size:"small",ghost:!0},e.fixed),React.createElement(P,{type:"primary",href:"".concat(t,"post-new.php?post_type=shop_coupon&type=acfw_bogo"),target:"_blank",size:"small",ghost:!0},e.bogo))},yl=t=>{const{notice:{slug:e,content:a,type:n,nonce:r,actions:c,is_dismissable:o,is_in_app_notifications:s},onDismiss:l,onRead:i}=t,{dashboard_page:{labels:d}}=acfwAdminApp;return React.createElement(K,{className:"single-notice notice-".concat(n," ").concat(e,"-notice"),onMouseEnter:s?()=>i(e,r):void 0},React.createElement("div",{className:"notice-content"},a.map((p,f)=>React.createElement("p",{key:f,dangerouslySetInnerHTML:{__html:p}}))),React.createElement("div",{className:"notice-actions"},c.map((p,f)=>React.createElement(P,{key:p.key,type:f===0?"primary":"default",href:p.link?p.link.replace(/&amp;/g,"&"):void 0,target:p!=null&&p.is_external?"_blank":void 0,onClick:p!=null&&p.response?()=>l(e,r,p.response):void 0},p.text)),o&&e!=="review_request"&&React.createElement(P,{onClick:()=>l(e,r)},d.dismiss)),o&&React.createElement(P,{className:"dismiss-notice-icon",icon:React.createElement(Xt,null),size:"small",type:"text",shape:"circle",onClick:()=>l(e,r,e==="review_request"?"snooze":"dismissed")}))};const{dismissAdminNotice:Sl,readAdminNotice:Tl}=ct,Cl=t=>{const{notices:e,actions:a}=t,[n,r]=E.useState(1),[c,o]=E.useState(0),s=E.useRef(null),{dashboard_page:{labels:l}}=acfwAdminApp,i=(p,f,g="yes")=>{a.dismissAdminNotice({slug:p}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_dismiss_admin_notice",notice:p,nonce:f,response:g},dataType:"json"})},d=(p,f)=>{a.readAdminNotice({slug:p}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_read_admin_notice",notice:p,nonce:f},dataType:"json"})};return E.useEffect(()=>{e.length&&!window.lodash.isNull(s)&&o(s.current.clientHeight)}),0>=e.length?null:React.createElement("div",{className:"dashboard-notices"},React.createElement("h2",null,l.notices),React.createElement("div",{className:"list-overflow",style:{height:0<c?c+5:"auto"}},React.createElement("div",{className:"notices-list",ref:s},e.slice(0,n).map(p=>React.createElement(yl,{key:p.slug,notice:p,onRead:d,onDismiss:i})))),1<e.length&&React.createElement(se,null,React.createElement(P,{className:"toggle-view-all",size:"small",type:"primary",onClick:()=>r(1>=n?e.length:1),ghost:!0},1>=n?l.view_all:l.hide)))},vl=t=>({notices:t.adminNotices}),bl=t=>({actions:$({dismissAdminNotice:Sl,readAdminNotice:Tl},t)}),Al=I(vl,bl)(Cl),_a=()=>React.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{clipPath:"url(#clip0_559_38)"},React.createElement("path",{d:"M7.5 1.875C7.5 1.35732 7.91895 0.9375 8.4375 0.9375H12.1611C12.3135 0.9375 12.4365 0.962695 12.5449 1.00869C12.6299 1.0541 12.7588 1.12119 12.8496 1.20996C12.8496 1.21143 12.8496 1.21289 12.8525 1.21406C13.0342 1.39629 13.0986 1.63418 13.125 1.87207C13.125 1.87324 13.125 1.87412 13.125 1.875V5.625C13.125 6.14355 12.7061 6.5625 12.1875 6.5625C11.6689 6.5625 11.25 6.14355 11.25 5.625V4.13965L6.28711 9.09961C5.9209 9.46582 5.3291 9.46582 4.96289 9.09961C4.59668 8.7334 4.59668 8.1416 4.96289 7.77539L9.92285 2.8125H8.4375C7.91895 2.8125 7.5 2.39268 7.5 1.875ZM0 3.75C0 2.71436 0.839356 1.875 1.875 1.875H4.6875C5.20605 1.875 5.625 2.29482 5.625 2.8125C5.625 3.33105 5.20605 3.75 4.6875 3.75H1.875V12.1875H10.3125V9.375C10.3125 8.85645 10.7314 8.4375 11.25 8.4375C11.7686 8.4375 12.1875 8.85645 12.1875 9.375V12.1875C12.1875 13.2217 11.3467 14.0625 10.3125 14.0625H1.875C0.839356 14.0625 0 13.2217 0 12.1875V3.75Z",fill:"#4A86FB"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0_559_38"},React.createElement("rect",{width:"13.125",height:"15",fill:"white"})))),ga=t=>{const{content:e}=t;return React.createElement("span",{className:"tooltip"},React.createElement(De,{overlayClassName:"dashboard-tooltip",placement:"top",content:React.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),trigger:"click"},React.createElement(Wa,null)))},wl=t=>{var r;const{widget:e,onClickLink:a}=t,n=(r=e.page_link)!=null?r:!1;return React.createElement(K,{className:"widget big-number-widget"},React.createElement("p",{className:"title"},React.createElement("span",{className:"widget-value",dangerouslySetInnerHTML:{__html:e.title_html}}),e!=null&&e.tooltip_html?React.createElement(ga,{content:e.tooltip_html}):null),React.createElement("p",{className:"description"},React.createElement("span",{className:"widget-name",dangerouslySetInnerHTML:{__html:e.description_html}}),n?React.createElement("a",{onClick:()=>a(n),href:"javascript:void(0);"},React.createElement(_a,null)):null))},Ol=t=>{const{widget:e}=t,{dashboard_page:{labels:a,coupons_list_link:n},admin_url:r}=acfwAdminApp,c=[{title:a.coupon,dataIndex:"coupon",key:"coupon",render:(o,s)=>React.createElement("a",{href:"".concat(r,"post.php?post=").concat(s.id,"&action=edit"),target:"_blank",rel:"noreferrer"},o)},{title:a.uses,dataIndex:"usage_total",key:"usage_total"},{title:React.createElement(React.Fragment,null,React.createElement("span",{className:"discounted-label"},a.discounted),e!=null&&e.tooltip_html?React.createElement(ga,{content:e.tooltip_html}):null),dataIndex:"discount_total",key:"discount_total"}];return React.createElement("div",{className:"widget coupon-table-widget"},React.createElement("div",{className:"widget-header"},React.createElement("h3",{className:"widget-name",dangerouslySetInnerHTML:{__html:e.title_html}}),React.createElement("a",{href:n,target:"_blank",rel:"noreferrer"},React.createElement(_a,null))),e.table_data&&React.createElement(ne,{bordered:!0,dataSource:e.table_data,columns:c,pagination:!1}))},Nl=t=>{const{widget:e}=t;return React.createElement(K,{className:"widget upsell-widget"},React.createElement("p",{className:"title widget-name",dangerouslySetInnerHTML:{__html:e.title_html}}),React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:e.description_html}}))},{setStorePage:Dl}=pe,Pl=t=>{const{widgets:e,actions:a}=t,n=ee(),r=c=>{n.push("".concat(re(),"admin.php?page=").concat(c)),a.setStorePage({data:c})};return e?React.createElement("div",{className:"report-widgets"},e.map(c=>{switch(c.type){case"big_number":return React.createElement(wl,{key:c.key,widget:c,onClickLink:r});case"table":return React.createElement(Ol,{key:c.key,widget:c});case"upsell":return React.createElement(Nl,{key:c.key,widget:c});case"section_title":return React.createElement("h2",{key:c.key,className:"section-title"},c.title_html)}return null})):null},Il=t=>({actions:$({setStorePage:Dl},t)}),$l=I(null,Il)(Pl),kl=t=>{const{store_credits_page:{labels:e,period_options:a}}=acfwAdminApp,{className:n,periodValue:r,startPeriod:c,endPeriod:o,onPeriodChange:s,onCustomDateRange:l}=t;return React.createElement("div",{className:"report-date-range-picker ".concat(n)},React.createElement(O,{value:r,onSelect:s},a.map((i,d)=>React.createElement(O.Option,{key:d,value:i.value},i.label))),React.createElement(Ze.RangePicker,{value:[c,o],onChange:l}))},xl=()=>React.createElement("div",{className:"report-widgets"},[...Array(8)].map((t,e)=>React.createElement(K,{key:e,className:"widget widget-skeleton"},React.createElement(X,{active:!0})))),Ge=t=>{const{iconKey:e}=t;return e==="getting_started"?React.createElement(ta,null):e==="documentation"?React.createElement(nn,null):e==="settings"?React.createElement(aa,null):e==="support"?React.createElement(et,null):e==="active"?React.createElement(rn,null):e==="inactive"?React.createElement(cn,null):e==="expired"?React.createElement(on,null):e==="learn_more"?React.createElement(na,null):null},Ml=t=>{const{slug:e,label:a,link:n,onClick:r}=t;return n.includes("http")?React.createElement("a",{href:n,target:"_blank",rel:"noreferrer"},React.createElement(Ge,{iconKey:e}),a):React.createElement("a",{onClick:()=>r&&r(n),href:"javascript:void(0);"},React.createElement(Ge,{iconKey:e}),a)},Ll=t=>{const{name:e,campaign:a,status:n}=t,{dashboard_page:{labels:r}}=acfwAdminApp;let c;if(n==="learn_more"){const o="https://advancedcouponsplugin.com/pricing/?tab=premium&utm_source=acfwf&utm_medium=dashboard&utm_campaign=".concat(a);c='<a class="'.concat(n,'" href="').concat(o,'" target="_blank" href="javascript:void(0);">').concat(r[n],"</a>")}else c='<span class="plugin-status '.concat(n,'">').concat(r[n],"</span>");return React.createElement(React.Fragment,null,React.createElement(Ge,{iconKey:n}),React.createElement("span",{className:"plugin-name",dangerouslySetInnerHTML:{__html:"".concat(e," (").concat(c,")")}}))},{setStorePage:Bl}=pe,Ul=re(),jl=t=>{const{actions:e}=t,a=ee(),[n,r]=E.useState([]),[c,o]=E.useState(!0),{dashboard_page:{labels:s,resources_links:l}}=acfwAdminApp;E.useEffect(()=>{B.get("coupons/v1/reports/license").then(d=>{r(d.data),o(!1)})},[]);const i=d=>{a.push("".concat(Ul,"admin.php?page=").concat(d)),e.setStorePage({data:d})};return React.createElement("div",{className:"sidebar-inner"},React.createElement(Te,{className:"resources-section sidebar-section",header:React.createElement("h2",null,"".concat(s.helpful_resources,":")),dataSource:l,renderItem:d=>React.createElement(Te.Item,{key:d.key},React.createElement(Ml,{...d,onClick:i}))}),React.createElement(Te,{className:"plugins-section sidebar-section",header:React.createElement("h2",null,"".concat(s.license_activation_status,":")),loading:c,dataSource:n,renderItem:d=>React.createElement(Te.Item,{key:d.key},React.createElement(Ll,{...d}))}),React.createElement("p",{className:"view-licenses"},React.createElement("a",{onClick:()=>i("acfw-license")},s.view_licenses)))},Fl=t=>({actions:$({setStorePage:Bl},t)}),Gl=I(null,Fl)(jl);const{readDashboardWidgetsData:ql}=ma,Hl=t=>{const{widgets:e,actions:a}=t,[n,r]=E.useState("month_to_date"),[c,o]=E.useState(window.moment().startOf("month")),[s,l]=E.useState(window.moment().startOf("day")),[i,d]=E.useState(!1),{dashboard_page:{title:p}}=acfwAdminApp;E.useEffect(()=>{d(!0),xe("dashboardwidgets"),a.readDashboardWidgetsData({startPeriod:c.format("YYYY-MM-DD"),endPeriod:s.format("YYYY-MM-DD"),successCB:()=>d(!1)})},[c,s]);const f=R=>{if(R===n)return;const[T,A]=Zo(R);r(R),o(T),l(A)},g=R=>{var T,A;R&&(o((T=R[0])!=null?T:""),l((A=R[1])!=null?A:""),r("custom"))};return React.createElement("div",{className:"dashboard-page"},React.createElement(ue,{title:p,className:"dashboard-header"}),React.createElement(Y,{gutter:16},React.createElement(k,{className:"dashboard-content",span:18},React.createElement(Al,null),React.createElement(Rl,null),React.createElement(kl,{periodValue:n,startPeriod:c,endPeriod:s,onPeriodChange:f,onCustomDateRange:g}),i?React.createElement(xl,null):React.createElement($l,{widgets:e})),React.createElement(k,{className:"dashboard-sidebar",span:6},React.createElement(Gl,null))))},Vl=t=>({widgets:t.dashboardWidgets}),Yl=t=>({actions:$({readDashboardWidgetsData:ql},t)}),zl=I(Vl,Yl)(Hl),{readStoreCreditsHistoryData:Wl}=ke,Kl=t=>{const{entries:e,actions:a,filter:n}=t,{store_credits_page:{labels:r}}=acfwAdminApp,[c,o]=E.useState(1),[s,l]=E.useState(!0),[i,d]=E.useState(0),{beforeDate:p,afterDate:f}=n;E.useEffect(()=>{l(!0),a.readStoreCreditHistory({page:c,startPeriod:p.format("YYYY-MM-DD"),endPeriod:f.format("YYYY-MM-DD"),successCB:R=>{d(R.headers["x-total"]),l(!1)}})},[c,p,f]),E.useEffect(()=>{e&&e.length&&l(!1)},[e,l]);const g=[{title:r.customer_name,dataIndex:"customer_name",key:"customer_name"},{title:r.email,dataIndex:"customer_email",key:"customer_email"},{title:r.amount,dataIndex:"amount",key:"amount",render:(R,T)=>"".concat(Ea(T)).concat(R)},{title:r.activity,dataIndex:"activity",key:"activity"},{title:r.related,dataIndex:"rel_label",key:"rel_label",render:(R,T)=>T.rel_link?React.createElement("a",{href:T.rel_link,target:"_blank"},R):R},{title:r.date,dataIndex:"date",key:"date"}];return React.createElement(K,{className:"acfw-dashboard-history",title:r.history},React.createElement(ne,{loading:s,pagination:!1,dataSource:e,columns:g}),i>10&&React.createElement(Pe,{disabled:s,current:c,total:i,onChange:o,showSizeChanger:!1}))},Ql=t=>{var e;return{entries:(e=t.storeCreditsDashboard)==null?void 0:e.history}},Jl=t=>({actions:$({readStoreCreditHistory:Wl},t)}),Xl=I(Ql,Jl)(Kl);const{readStoreCreditsDashboardData:Zl}=ke,ei=t=>{const{status:e,actions:a}=t,{store_credits_page:{labels:n,period_options:r}}=acfwAdminApp,[c,o]=E.useState(!1),[s,l]=E.useState("month_to_date"),[i,d]=E.useState(window.moment().startOf("month")),[p,f]=E.useState(window.moment().startOf("day")),[g,R]=E.useState({periodValue:"month_to_date",beforeDate:window.moment().startOf("month"),afterDate:window.moment().startOf("day")}),T=C=>{R(C)},A=[{title:n.statistics,dataIndex:"label",key:"label"},{title:n.amount,dataIndex:"amount",key:"amount"}];E.useEffect(()=>{o(!0),xe("scdashboard"),a.readDashboardData({startPeriod:i.format("YYYY-MM-DD"),endPeriod:p.format("YYYY-MM-DD"),successCB:()=>o(!1)})},[i,p]);const w=C=>{l(C);let S,y;switch(C){case"week_to_date":S=window.moment().startOf("week"),y=window.moment().startOf("day");break;case"month_to_date":S=window.moment().startOf("month"),y=window.moment().startOf("day");break;case"quarter_to_date":S=window.moment().startOf("quarter"),y=window.moment().startOf("day");break;case"year_to_date":S=window.moment().startOf("year"),y=window.moment().startOf("day");break;case"last_week":S=window.moment().subtract(1,"weeks").startOf("week"),y=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":S=window.moment().subtract(1,"months").startOf("month"),y=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":S=window.moment().subtract(1,"quarters").startOf("quarter"),y=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":S=window.moment().subtract(1,"years").startOf("year"),y=window.moment().subtract(1,"years").endOf("year");break;default:S=window.moment().startOf("day"),y=window.moment().startOf("day");break}d(S),f(y),T({periodValue:C,beforeDate:S,afterDate:y})},N=C=>{d(C[0]),f(C[1]),l("custom"),T({periodValue:"custom",beforeDate:C[0],afterDate:C[1]})};return React.createElement(React.Fragment,null,React.createElement("div",{className:"store-credits-period-selector"},React.createElement(O,{value:s,onSelect:w},r.map(C=>React.createElement(O.Option,{value:C.value},C.label))),React.createElement(Ze.RangePicker,{value:[i,p],onChange:N})),React.createElement(K,{title:n.status},React.createElement(ne,{loading:c,pagination:!1,dataSource:e,columns:A})),React.createElement(se,null),React.createElement(Xl,{filter:g}))},ti=t=>{var e;return{status:(e=t.storeCreditsDashboard)==null?void 0:e.status}},ai=t=>({actions:$({readDashboardData:Zl},t)}),ni=I(ti,ai)(ei),ri=(t,e)=>{switch(e.type){case"SET_PAGE":return{...t,page:e.value};case"SET_PER_PAGE":return{...t,per_page:e.value};case"SET_SEARCH":return{...t,search:e.value,page:1};case"SET_SORT_BY":return{...t,sort_by:e.value};case"SET_SORT_ORDER":return{...t,sort_order:e.value};case"SET_META_KEY":return{...t,meta_key:e.value};case"SET_QUERY":return e.value}return t},ha=E.createContext({params:{page:1},dispatchParams:t=>{}}),ci=({children:t})=>{const e={page:1},[a,n]=E.useReducer(ri,e);return React.createElement(ha.Provider,{value:{params:a,dispatchParams:n}},t)},oi=t=>{const{status:e}=t,[a,n]=E.useState(!0),{store_credits_page:{labels:r}}=acfwAdminApp,c=[{title:r.statistics,dataIndex:"label",key:"label"},{title:r.amount,dataIndex:"amount",key:"amount"}];return E.useEffect(()=>{e&&e.length?n(!1):n(!0)},[e,n]),React.createElement(K,{className:"customer-status",title:r.status},React.createElement(ne,{loading:a,pagination:!1,dataSource:e,columns:c}))},si=t=>{const{sources:e}=t,{store_credits_page:{labels:a}}=acfwAdminApp,n=[{title:a.source,dataIndex:"label",key:"label"},{title:a.amount,dataIndex:"amount",key:"amount"}];return React.createElement(K,{className:"customer-sources",title:a.sources},React.createElement(ne,{loading:!e||!e.length,pagination:!1,dataSource:e,columns:n}))},li=t=>{const{entries:e,total:a,loadEntries:n,loaded:r}=t,{store_credits_page:{labels:c}}=acfwAdminApp,[o,s]=E.useState(1),l=[{title:c.date,dataIndex:"date",key:"date"},{title:c.activity,dataIndex:"activity",key:"activity",render:(d,p)=>[d,p.note?React.createElement(De,{placement:"top",content:p.note,trigger:"click",overlayClassName:"entry-note-popover"},React.createElement(sn,{style:{paddingLeft:"5px"}})):null]},{title:c.amount,dataIndex:"amount",key:"amount",render:(d,p)=>"".concat(Ea(p)).concat(d)},{title:c.related,dataIndex:"rel_label",key:"rel_label",render:(d,p)=>p.rel_link?React.createElement("a",{href:p.rel_link,target:"_blank"},d):d}],i=d=>{s(d),n(d)};return React.createElement(K,{className:"customer-entries",title:c.history},React.createElement(ne,{loading:!r,columns:l,dataSource:e,pagination:!1}),0<a&&React.createElement(Pe,{defaultCurrent:o,current:o,hideOnSinglePage:!0,disabled:!e||!e.length,total:a,pageSize:10,showSizeChanger:!1,onChange:i}))},{readStoreCreditsCustomerStatus:ii,readStoreCreditsCustomerEntries:ui}=Se,di=t=>{var A,w;const{customer:e,setCustomer:a,actions:n}=t,[r,c]=E.useState((A=e==null?void 0:e.status)!=null?A:[]),[o,s]=E.useState((w=e==null?void 0:e.sources)!=null?w:[]),[l,i]=E.useState([]),[d,p]=E.useState(0),[f,g]=E.useState(!1),R=(N=1)=>{e!=null&&e.id&&(g(!1),n.readStoreCreditsCustomerEntries({id:e==null?void 0:e.id,page:N,successCB:C=>{i(C.data),p(C.headers["x-total"]),g(!0)}}))},T=()=>{a(null),s([]),i([])};return E.useEffect(()=>{if(!(e!=null&&e.id)){c([]),s([]),i([]),p(0);return}n.readStoreCreditsCustomerStatus({id:e==null?void 0:e.id,successCB:N=>{c(N.data.status),s(N.data.sources)}}),R()},[e]),e?React.createElement(ye,{width:1100,visible:!window.lodash.isNull(e),footer:!1,onCancel:()=>T(),onOk:()=>T()},React.createElement("h2",null,"".concat(e.first_name," ").concat(e.last_name," Stats")),React.createElement(Y,{gutter:16},React.createElement(k,{span:12},React.createElement(oi,{status:r})),React.createElement(k,{span:12},React.createElement(si,{sources:o}))),React.createElement(se,null),React.createElement(li,{entries:l,total:d,loadEntries:R,loaded:f})):null},mi=t=>({actions:$({readStoreCreditsCustomerStatus:ii,readStoreCreditsCustomerEntries:ui},t)}),pi=I(null,mi)(di);function fi({precision:t=null,decimalSeparator:e=".",thousandSeparator:a=","},n){if(window.lodash.isNull(t)){const[,l]=n.toString().split(".");t=l?l.length:0}let r=n.toFixed(t),[c,o]=r.split(".");const s=/(\d+)(\d{3})/;for(;s.test(c);)c=c.replace(s,"$1"+a+"$2");return"".concat(c).concat(e).concat(o)}function Ei(t,e=!1){const{currency:a}=acfwAdminApp.store_credits_page,n={precision:a.decimals,decimalSeparator:a.decimal_separator,thousandSeparator:a.thousand_separator},r=fi(n,t);return r===""?r:"".concat(a.symbol).concat(r)}function _i(t){const{currency:e}=acfwAdminApp.store_credits_page,a=new RegExp("[^-0-9%\\".concat(e.decimal_separator,"]+"),"gi"),n=new RegExp("[^\\".concat(e.decimal_separator,'"]'),"gi");let r=t.replace(a,"");1<r.replace(n,"").length&&(r=r.replace(n,""));const c=parseFloat(r.replace(e.decimal_separator,"."));return t===r&&c>0}function be(t){const{currency:e}=acfwAdminApp.store_credits_page;return parseFloat(t.replace(e.decimal_separator,"."))}const{adjustCustomerStoreCredits:gi,setStoreCreditsCustomerBalance:hi}=Se,Ri=t=>{const{customer:e,setAdjustCustomer:a,actions:n}=t,{adjust_modal:r,currency:c}=acfwAdminApp.store_credits_page,[o,s]=E.useState(!1),[l,i]=E.useState("increase"),[d,p]=E.useState(""),[f,g]=E.useState(""),[R,T]=E.useState(""),[A,w]=E.useState(!1),N=E.useRef(null),C=()=>{w(!A),setTimeout(()=>{var y;return(y=N.current)==null?void 0:y.focus()},400)},S=()=>{if(e){if(!_i(d)){Q.error(r.invalid_price);return}s(!0),n.adjustCustomerStoreCredits({id:e==null?void 0:e.id,type:l,amount:be(d),note:A&&R?R:"",successCB:y=>{s(!1),Q.success(y.data.message),n.setStoreCreditsCustomerBalance({id:e==null?void 0:e.id,balance:y.data.balance,balance_raw:y.data.balance_raw}),a(null),p(""),i("increase"),T("")},failCB:({error:y})=>{s(!1),Q.error(y.response.data.message)}})}};return E.useEffect(()=>{if(!e||!d){g("");return}const y=l==="increase"?e.balance_raw+be(d):e.balance_raw-be(d);g(Ei(Math.max(0,y)))},[e,d,l]),e?React.createElement("div",{className:"adjust-store-credits"},React.createElement("h2",null,r.title),React.createElement("p",{className:"description"},r.description),React.createElement("h3",{className:"current-balance"},r.current_balance.replace("{balance}",e.balance)),React.createElement("div",{className:"adjust-store-credits-form"},React.createElement(O,{value:l,onSelect:y=>i(y)},React.createElement(O.Option,{value:"increase"},r.increase),React.createElement(O.Option,{value:"decrease"},r.decrease)),React.createElement(W,{value:d,onChange:y=>p(y.target.value),addonBefore:c.symbol,allowClear:!0}),React.createElement(ge.Compact,{direction:"vertical",className:"entry-note-wrap"},React.createElement("a",{onClick:C,style:{marginBottom:"0px"}},r.add_note),A?React.createElement(W.TextArea,{ref:N,rows:2,placeholder:r.note_placeholder,value:R!=null?R:void 0,onChange:y=>T(y.target.value),maxLength:255}):null)),f?React.createElement("h3",{className:"new-balance",dangerouslySetInnerHTML:{__html:r.new_balance.replace("{balance}","<span>".concat(f,"</span>"))}}):null,React.createElement(P,{className:"make-adjustment-btn",type:"primary",size:"large",loading:o,onClick:S},r.make_adjustment)):null},yi=t=>({actions:$({adjustCustomerStoreCredits:gi,setStoreCreditsCustomerBalance:hi},t)}),Si=I(null,yi)(Ri),Ti=t=>{var A,w,N,C,S,y;const{store_credits_page:{rest_url:e,labels:a,nonce:n}}=acfwAdminApp,{customer:r}=t,[c,o]=E.useState(!1),[s,l]=E.useState(!1),[i,d]=Q.useMessage(),p=()=>{o(!0)},f=()=>{let v="".concat(acfwAdminApp.admin_url,"admin-ajax.php?action=acfwp_store_credit_reminder_preview_email");return v+=r!=null&&r.first_name&&(r!=null&&r.last_name)?"&args[name]=".concat(r==null?void 0:r.first_name," ").concat(r==null?void 0:r.last_name):"",v+=r!=null&&r.email?"&args[email]=".concat(r==null?void 0:r.email):"",v+=r!=null&&r.id?"&args[user_id]=".concat(r==null?void 0:r.id):"",v+="&_wpnonce=".concat(n==null?void 0:n.preview),v},g=()=>{o(!1)},R=()=>{o(!1),window.open(f())},T=()=>{l(!0);const v=()=>{l(!1),o(!1)};jQuery.ajax({type:"GET",url:e,data:{user_id:r==null?void 0:r.id},success:function(M){var V,m,h,b;!M.status||M.status==="error"?i.open({type:"error",content:"".concat((m=(V=a==null?void 0:a.modal)==null?void 0:V.error)==null?void 0:m.heading,": ").concat(M==null?void 0:M.message)}):i.open({type:"success",content:React.createElement(React.Fragment,null,(b=(h=a==null?void 0:a.modal)==null?void 0:h.success)==null?void 0:b.text,r!=null&&r.email?" <".concat(r==null?void 0:r.email,">."):"")}),v()},error:function(M,V,m){var h,b,x;(h=M==null?void 0:M.responseJSON)!=null&&h.message&&(m=M.responseJSON.message),i.open({type:"error",content:"".concat((x=(b=a==null?void 0:a.modal)==null?void 0:b.error)==null?void 0:x.heading,": ").concat(m)}),v()}})};return a!=null&&a.remind?React.createElement(React.Fragment,null,d,React.createElement(P,{onClick:p},a.remind),React.createElement(ye,{title:(A=a==null?void 0:a.modal)==null?void 0:A.heading,className:"acfw-modal send-a-reminder-modal",width:500,open:c,onCancel:g,footer:[React.createElement(P,{key:"preview",className:"action-preview",onClick:R,"data-url":f()},(N=(w=a==null?void 0:a.modal)==null?void 0:w.button)==null?void 0:N.preview),React.createElement(P,{key:"send",className:"action-send",type:"primary",onClick:T,disabled:s},s?"".concat(a==null?void 0:a.loading,"..."):(S=(C=a==null?void 0:a.modal)==null?void 0:C.button)==null?void 0:S.send)]},React.createElement("p",null,(y=a==null?void 0:a.modal)==null?void 0:y.text),React.createElement("p",null,r==null?void 0:r.first_name," ",r==null?void 0:r.last_name,r!=null&&r.email?" <".concat(r==null?void 0:r.email,">"):""))):null};const{readStoreCreditsCustomers:Ci,adjustCustomerStoreCredits:vi}=Se,bi=t=>{var v;const{customers:e,actions:a}=t,{store_credits_page:{labels:n}}=acfwAdminApp,{params:r,dispatchParams:c}=E.useContext(ha),[o,s]=E.useState(!1),[l,i]=E.useState(0),[d,p]=E.useState(r.search),[f,g]=E.useState(null),[R,T]=E.useState(null),[A,w]=E.useState(null),N=[{title:n.customer_name,dataIndex:"first_name",key:"first_name",sorter:!0,render:(M,V)=>"".concat(V.first_name," ").concat(V.last_name)},{title:n.email,dataIndex:"email",key:"email",sorter:!0},{title:n.balance,dataIndex:"balance",key:"balance",sorter:!0},{title:"",dataIndex:"id",key:"id",render:(M,V)=>React.createElement(React.Fragment,null,React.createElement(P,{onClick:()=>T(V)},n.view_stats),React.createElement(P,{onClick:()=>w(V)},n.adjust),React.createElement(Ti,{customer:V}))}],C=M=>{p(M),f&&(xe("customer_search"),clearTimeout(f)),g(setTimeout(()=>c({type:"SET_SEARCH",value:M}),1e3))},S=M=>{c({type:"SET_PAGE",value:M})},y=(M,V,m)=>{if(m.columnKey){switch(m.columnKey){case"first_name":c({type:"SET_META_KEY",value:"billing_first_name"}),c({type:"SET_SORT_BY",value:"meta_value"});break;case"balance":c({type:"SET_META_KEY",value:"acfw_store_credit_balance"}),c({type:"SET_SORT_BY",value:"meta_value_num"});break;default:c({type:"SET_SORT_BY",value:m.columnKey});break}c({type:"SET_SORT_ORDER",value:m.order==="descend"?"desc":"asc"})}};return E.useEffect(()=>{s(!0),a.readCustomers({params:r,successCB:M=>{i(M.headers["x-total"]),s(!1)}})},[r]),React.createElement(React.Fragment,null,React.createElement(K,{title:n.customers_list},React.createElement("div",{className:"customer-search"},React.createElement("label",null,n.search_label),React.createElement(W.Search,{allowClear:!0,value:d,onChange:M=>C(M.target.value)})),React.createElement(ne,{className:"customers-list-table",loading:o,pagination:!1,dataSource:e,columns:N,onChange:y}),0<l&&React.createElement(Pe,{className:"customers-list-pagination",defaultCurrent:r.page,current:r.page,hideOnSinglePage:!0,disabled:o,total:l,pageSize:(v=r.per_page)!=null?v:10,showSizeChanger:!1,onChange:S})),React.createElement(pi,{customer:R,setCustomer:T}),React.createElement(ye,{width:500,visible:!window.lodash.isNull(A),footer:!1,onCancel:()=>w(null),onOk:()=>w(null)},React.createElement(Si,{customer:A,setAdjustCustomer:w})))},Ai=t=>({customers:t.storeCreditsCustomers}),wi=t=>({actions:$({readCustomers:Ci,adjustCustomerStoreCredits:vi},t)}),Oi=I(Ai,wi)(bi),Ni=t=>{const{slug:e}=t,{img_path:a}=acfwAdminApp.uncanny_automator;let n,r="";switch(e){case"woocommerce":n="woo-logo.png",r="WooCommerce";break;case"twilio":n="twilio-logo.png",r="Twilio";break;case"google_sheets":n="gsheets-logo.png",r="Google Sheets";break;default:n="Advanced-Coupons-Icon-WC-Marketing.png",r="Advanced Coupon";break}return React.createElement("div",{className:"icon-text ".concat(e)},React.createElement("img",{src:"".concat(a).concat(n)}),React.createElement("span",null,r))},Ra=t=>{const{pluginSlug:e,className:a,type:n,size:r,text:c,successMessage:o,nonce:s,afterInstall:l}=t,[i,d]=E.useState(!1),p=()=>{d(!0),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"acfw_install_activate_plugin",plugin_slug:e,nonce:s}}).done(f=>{d(!1),f!=null&&f.success&&!f.success?Q.error(f.data):(typeof l=="function"&&l(),Q.success(o))}).fail(f=>{Q.error(f.responseJSON.data)})};return React.createElement(P,{className:a,type:n,size:r,loading:i,onClick:p},c)};const Di=()=>{const{logo:t,main_content:e,action_text:a,action_url:n,is_plugin_active:r,nonce:c,labels:o,triggers_actions:s,sample_automations:l}=acfwAdminApp.uncanny_automator,[i,d]=E.useState(!!r);return React.createElement("div",{className:"store-credit-automations"},React.createElement("div",{className:"store-credit-automations__inner"},React.createElement("div",{className:"store-credit-automations__header"},React.createElement("img",{src:t}),React.createElement("p",{dangerouslySetInnerHTML:{__html:e}}),i?React.createElement(P,{className:"main-cta-btn",type:"primary",size:"large",href:n,icon:React.createElement(Ka,null)},o.add_new_recipe):React.createElement(Ra,{pluginSlug:"uncanny-automator",className:"main-cta-btn",type:"primary",size:"large",text:a,nonce:c,successMessage:o.success_message,afterInstall:()=>d(!0)})),React.createElement("div",{className:"triggers-actions"},React.createElement(Y,{gutter:16},s.map((p,f)=>React.createElement(k,{key:f,span:12},React.createElement(K,null,React.createElement("span",{className:"trigger-action__type"},p.type," ",p.is_pro&&React.createElement(tt,{color:"#1393A6"},o.pro)),React.createElement("span",{className:"trigger-action__desc"},p.desc)))))),React.createElement(se,null),React.createElement("div",{className:"sample-automations"},React.createElement("p",null,o.sample_automations),React.createElement(Y,{gutter:16},l.map((p,f)=>React.createElement(k,{key:f,span:8},React.createElement(K,{bordered:!1},React.createElement("h3",null,p.title),React.createElement("p",null,o.requires),React.createElement("ul",null,p.requires.map((g,R)=>React.createElement("li",{key:R},React.createElement(Ni,{slug:g})))))))))))};const Pi=t=>{const{tabKey:e}=t;switch(e){case"dashboard":return React.createElement(ni,null);case"customers":return React.createElement(ci,null,React.createElement(Oi,null));case"automations":return React.createElement(Di,null)}return null},Ii=()=>{var o;const{store_credits_page:{title:t,tabs:e}}=acfwAdminApp,a=ee(),r=(o=new URLSearchParams(me().search).get("tab"))!=null?o:"dashboard",c=s=>{a.push("".concat(re(),"admin.php?page=acfw-store-credits&tab=").concat(s))};return React.createElement("div",{className:"store-credits-page"},React.createElement(ue,{title:t,className:"store-credits-header"}),React.createElement(de,{defaultActiveKey:r,onTabClick:c},e.map(s=>React.createElement(de.TabPane,{tab:s.label,key:s.key},React.createElement(Pi,{tabKey:s.key})))))};const Nt=t=>{const{section:e}=t;switch(e){case"modules_section":return React.createElement(Rn,null);case"general_section":return React.createElement(aa,null);case"checkout_section":return React.createElement(hn,null);case"bogo_deals_section":return React.createElement(gn,null);case"scheduler_section":return React.createElement(_n,null);case"role_restrictions_section":return React.createElement(En,null);case"url_coupons_section":return React.createElement(fn,null);case"store_credits_section":return React.createElement(pn,null);case"advanced_section":return React.createElement(ta,null);case"help_page":return React.createElement(mn,null);case"license_page":return React.createElement(na,null);case"premium_upgrade":return React.createElement(dn,null);case"loyalty_program_section":case"loyalty_program":return React.createElement(un,null);case"advanced_gift_cards":return React.createElement(ln,null)}return null},{setStorePage:$i}=pe,Dt=re(),ki=t=>{const{sections:e,currentSection:a,actions:n}=t,{app_pages:r}=acfwAdminApp,c=a||"general_section",o=ee();if(e.length<1)return u.createElement("div",{className:"settings-nav-skeleton"},u.createElement(X,{active:!0,paragraph:!1}),u.createElement(X,{active:!0,paragraph:!1}),u.createElement(X,{active:!0,paragraph:!1}),u.createElement(X,{active:!0,paragraph:!1}),u.createElement(X,{active:!0,paragraph:!1}));const s=d=>{o.push("".concat(Dt,"admin.php?page=").concat(d)),n.setStorePage({data:d})},l=e.filter(({show:d})=>d),i=["acfw-settings","acfw-about","acfw-store-credits"];return u.createElement(Be,{className:"acfw-settings-nav",defaultSelectedKeys:[c]},l.map(({id:d,title:p})=>u.createElement(Be.Item,{key:d},u.createElement(Ut,{to:"".concat(Dt,"admin.php?page=acfw-settings&section=").concat(d)},u.createElement(Nt,{section:d}),p))),r.filter(({slug:d})=>!i.includes(d)).map(({slug:d,label:p,page:f})=>u.createElement(Be.Item,{key:f,className:f},u.createElement("button",{className:"buttonlink",onClick:()=>s(d)},u.createElement(Nt,{section:f}),p))))},xi=t=>({sections:t.sections}),Mi=t=>({actions:$({setStorePage:$i},t)}),Li=I(xi,Mi)(ki),Bi=t=>{const{classname:e,title:a,description:n,button_text:r,image:c,nonce:o,success_message:s}=t.noticeData;return React.createElement("p",{className:"acfw-dyk-notice acfw-funnelkit-upsell-notice ".concat(e)},!!c&&React.createElement("img",{src:c}),React.createElement("span",{className:"title"},a),React.createElement("br",null),React.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:n}}),React.createElement("span",{className:"button-wrap"},React.createElement(Ra,{pluginSlug:"funnel-builder",className:"install-funnelkit-btn",type:"primary",size:"middle",text:r,nonce:o,successMessage:s,afterInstall:()=>window.location.href="".concat(acfwAdminApp.admin_url,"admin.php?page=bwf")})))};const ya=E.createContext({showModal:!1,setShowModal:t=>{}}),Ui=t=>{const{data:{title:e,content:a,buttonTxt:n},showModal:r,setShowModal:c}=t,o=ee(),s=re(),l=()=>{o.push("".concat(s,"admin.php?page=acfw-premium"))};return u.createElement(ye,{className:"acfw-upsell-modal",centered:!0,width:600,visible:r,onCancel:()=>c(!1),footer:null},u.createElement(yn,null),u.createElement("h2",null,e),a.map(i=>u.createElement("p",null,i)),u.createElement(P,{type:"primary",onClick:l},n))},ji=t=>{const{children:e}=t,[a,n]=E.useState(!1);return u.createElement(ya.Provider,{value:{showModal:a,setShowModal:n}},e,acfwAdminApp!=null&&acfwAdminApp.upsellModal?u.createElement(Ui,{data:acfwAdminApp==null?void 0:acfwAdminApp.upsellModal,showModal:a,setShowModal:n}):null)},Fi=t=>{const{id:e}=t.field,a=E.useContext(ya);return u.createElement(Zt,{key:e,checked:!1,defaultChecked:!1,onChange:()=>a.setShowModal(!0)})},{updateSetting:Gi,setStoreSettingItem:qi}=ae,{action_notices:Pt}=acfwAdminApp,Hi=t=>{const{field:e,setShowSpinner:a,validateInput:n,value:r,actions:c,order:o}=t,{id:s,title:l,type:i,placeholder:d,default:p,suffix:f,format:g,min:R,max:T}=e,[A,w]=E.useState(null),N=r!==void 0&&r!==!1?r:p,C=(S,y=!1)=>{const v=()=>{n(S)&&(c.setStoreSettingItem({data:{id:s,value:S}}),c.updateSetting({data:{id:s,value:S,type:i},processingCB:()=>a(!0),successCB:()=>{Q.success(u.createElement(u.Fragment,null,u.createElement("strong",null,e.title)," ",Pt.success)),a(!1)},failCB:()=>{Q.error(u.createElement(u.Fragment,null,u.createElement("strong",null,e.title)," ",Pt.fail)),a(!1)}}))};y?(A&&(clearTimeout(A),w(null)),w(setTimeout(v,1e3))):v()};if(i==="checkbox"||i==="module")return u.createElement(Zt,{key:s,checked:N==="yes",defaultChecked:N==="yes",onChange:S=>C(S?"yes":"")});if(i==="premiummodule")return u.createElement(Fi,{field:e});if(i==="textarea")return u.createElement(W.TextArea,{key:s,rows:3,placeholder:d,defaultValue:N,onChange:S=>C(S.target.value,!0)});if(i==="radio"){const{options:S}=e;return u.createElement(Et.Group,{onChange:y=>C(y.target.value),value:N},u.createElement(ge,{direction:"vertical"},(S==null?void 0:S.length)&&S.map(({key:y,label:v})=>u.createElement(Et,{key:y.toString(),value:y.toString()},v))))}if(i==="select"){let{options:S}=e,y=S||[];return y=y.map(v=>v.label.label?v.label:{value:v.key,label:v.label}),u.createElement(O,{key:s,defaultValue:N.toString(),style:{width:"50%"},placeholder:d,options:y,onSelect:v=>C(v)})}if(i==="multiselect"){let{options:S}=e,y=S||[];return y=y.map(v=>v.label.label?v.label:{value:v.key,label:v.label}),u.createElement(O,{mode:"multiple",key:s,defaultValue:N,style:{width:"100%"},placeholder:d,options:y,onChange:v=>{v.length||(v=N),C(v)}})}if(i==="timepicker"){let S=g||"HH:mm:ss",y=N||e.default;return y=y||"00:00:00",y=window.moment(y,S),u.createElement(Qa,{key:s,defaultValue:y,format:S,onChange:v=>C(v.format("HH:mm:ss"))})}if(["text","url","permalink","customurl"].indexOf(i)>-1){let S=["permalink","customurl"];return u.createElement(W,{key:s,type:S.indexOf(i)>-1?"text":i,name:s,placeholder:d,defaultValue:N,onChange:y=>C(y.target.value,!0),suffix:f})}if(i==="number")return u.createElement(G,{key:s,name:s,placeholder:d,defaultValue:N,onChange:S=>C(S,!0),min:R!=null?R:void 0,max:T!=null?T:void 0});if(i==="price")return u.createElement(W,{type:"text",className:"wc_input_price",name:s,placeholder:d,defaultValue:N,onChange:S=>C(S.target.value,!0)});if(i==="acfwflicense"){const{licenseContent:S}=e;return u.createElement("div",{className:"acfw-license-field"},S==null?void 0:S.map(y=>u.createElement("p",{dangerouslySetInnerHTML:{__html:y}})))}return i==="subtitle"?u.createElement("div",{className:"form-heading ".concat(o>0?"spacer":"")},u.createElement("h3",null,l)):null},Vi=(t,e)=>{const{id:a}=e.field,n=t.settingValues.findIndex(c=>c.id===a);return{value:n>-1?t.settingValues[n].value:""}},Yi=t=>({actions:$({updateSetting:Gi,setStoreSettingItem:qi},t)}),It=I(Vi,Yi)(Hi),{Text:$t}=ea,zi=t=>{const{field:e}=t,{id:a,title:n,type:r,desc:c,desc_tip:o}=e,{validation:s}=acfwAdminApp,[l,i]=E.useState(!1),[d,p]=E.useState(!1),f=o?u.createElement("div",{className:"setting-tooltip-content"},o):null;if(r==="title")return u.createElement("div",{className:"form-heading"},u.createElement("h1",null,n),u.createElement("p",null,c));if(r==="notice"&&(e!=null&&e.noticeData)){const{classname:A,title:w,description:N,button_text:C,button_link:S,button_class:y,image:v}=e==null?void 0:e.noticeData;return u.createElement("p",{className:"acfw-dyk-notice ".concat(A)},!!v&&u.createElement("img",{src:v}),u.createElement("span",{className:"title"},w),u.createElement("br",null),u.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:N}}),C&&S?u.createElement("a",{className:"acfw-button ".concat(y),href:S,rel:"noreferrer noopener",target:"_blank"},C):null)}if(r==="funnelkit_upsell"&&(e!=null&&e.noticeData))return u.createElement(Bi,{noticeData:e==null?void 0:e.noticeData});if(r==="sectionend")return null;const g=A=>A&&r==="url"&&!fa(A+"")?(p(!0),!1):(p(!1),!0),R=()=>u.createElement(u.Fragment,null,u.createElement(k,{span:8,className:"setting-title-column"},u.createElement("label",null,u.createElement("strong",null,n),r==="premiummodule"?u.createElement(u.Fragment,null,u.createElement("br",null),u.createElement(tt,{className:"premium-tag"},"Premium")):null),o?u.createElement(De,{placement:"right",content:f,trigger:"click"},u.createElement(et,{className:"setting-tooltip-icon"})):null),u.createElement(k,{className:"setting-field-column",span:16},u.createElement(It,{field:e,setShowSpinner:i,validateInput:g}),l?u.createElement(he,{indicator:u.createElement(_t,{style:{fontSize:24},spin:!0})}):null,u.createElement("div",{className:"invalid-input".concat(d?" show":"")},d?u.createElement($t,{type:"danger"},s[r]?s[r]:s.default):null),c?u.createElement("p",{dangerouslySetInnerHTML:{__html:c}}):null)),T=()=>u.createElement(u.Fragment,null,u.createElement(k,{className:"setting-field-column"},u.createElement(It,{field:e,setShowSpinner:i,validateInput:g}),l?u.createElement(he,{indicator:u.createElement(_t,{style:{fontSize:24},spin:!0})}):null,u.createElement("div",{className:"invalid-input".concat(d?" show":"")},d?u.createElement($t,{type:"danger"},s[r]?s[r]:s.default):null),c?u.createElement("p",{dangerouslySetInnerHTML:{__html:c}}):null));return u.createElement(Y,{gutter:16,className:"form-control",id:"".concat(a,"_field"),key:a},u.createElement(se,null),r==="subtitle"?u.createElement(T,null):u.createElement(R,null))};const it=t=>{var h,b;const{className:e,showSubtitle:a,showTag:n}=t,{free_guide:{show:r,tag:c,title:o,subtitle:s,content:l,image:i,button:d,list:p,field_values:f,placeholders:g,form_nonce:R,missing_form_fields:T,failed_form_error:A}}=acfwAdminApp,[w,N]=E.useState((h=f.name)!=null?h:""),[C,S]=E.useState((b=f.email)!=null?b:""),[y,v]=E.useState(!1),[M,V]=E.useState(r),m=async x=>{if(x.preventDefault(),!w||!C){Q.error(T);return}v(!0);const q=new Date,D=new FormData;D.append("action","acfwf_get_free_training_guide"),D.append("name",w),D.append("email",C),D.append("title",document.title),D.append("url",window.location.href),D.append("referrer",document.referrer),D.append("timestamp",q.getTime().toString()),D.append("nonce",R);try{const ce=await(await fetch(ajaxurl,{method:"post",body:D})).json();ce.status==="success"?(Q.success(ce.message),acfwAdminApp.free_guide.show=!1,V(!1)):Q.error(ce.error_msg)}catch(fe){Q.error(A)}v(!1)};return M?u.createElement("div",{className:"coupons-free-guide ".concat(e)},u.createElement("div",{className:"inner"},u.createElement("form",{onSubmit:m},n?u.createElement(tt,{color:"#1693A7"},c):null,u.createElement("h2",null,o),u.createElement("img",{src:i,alt:o}),a?u.createElement("h3",null,s):null,u.createElement("p",{dangerouslySetInnerHTML:{__html:l}}),u.createElement("ul",null,p.map((x,q)=>u.createElement("li",{key:q},u.createElement(Sn,null),x))),u.createElement("p",{className:"form-fields"},u.createElement(W,{value:w,onChange:x=>N(x.target.value),placeholder:g.name}),u.createElement(W,{value:C,type:"email",onChange:x=>S(x.target.value),placeholder:g.email})),u.createElement("p",{className:"form-actions"},u.createElement(P,{type:"link",htmlType:"submit",className:"cta",size:"large",loading:y},d.text))))):null};it.defaultProps={className:"",showSubtitle:!1,showTag:!0};const Wi=t=>{const{sections:e,settingValues:a,currentSection:n}=t,r=n?e.findIndex(s=>s.id===n):0,c=e.length?e[r].id:"",o=e.length?e[r].fields:[];return o.length<1||a.length<1?u.createElement(u.Fragment,null,u.createElement(X,{loading:!0,active:!0,paragraph:{rows:1}}),u.createElement(se,null),u.createElement(X,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),u.createElement(se,null),u.createElement(X,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),u.createElement(se,null),u.createElement(X,{loading:!0,active:!0,paragraph:{rows:2},title:!1})):u.createElement(ji,null,u.createElement("div",{className:"settings-form ".concat(c,"-form")},o.map(s=>u.createElement(zi,{key:s.id,field:s})),!n||n==="general_section"?u.createElement(u.Fragment,null,u.createElement(se,null),u.createElement(it,null)):null))},Ki=t=>({sections:t.sections,settingValues:t.settingValues}),Qi=t=>({actions:$({},t)}),Ji=I(Ki,Qi)(Wi),{readSections:Xi,readSection:Zi}=$e,eu=t=>{const{sections:e,actions:a}=t,r=new URLSearchParams(me().search).get("section");return E.useEffect(()=>{e.length>0||a.readSections({id:r})},[a]),E.useEffect(()=>{if(e.length<1)return;const c=r?e.findIndex(o=>o.id===r):0;e[c].fields.length<1&&a.readSection({id:r})},[e,a,r]),u.createElement(u.Fragment,null,u.createElement(ue,{title:acfwAdminApp.title,description:acfwAdminApp.desc,className:"settings-header"}),u.createElement(Y,{className:"settings-content"},u.createElement(k,{span:6},u.createElement(Li,{currentSection:r})),u.createElement(k,{span:18,className:"content-column"},u.createElement(Ji,{currentSection:r}))))},tu=t=>({sections:t.sections}),au=t=>({actions:$({readSections:Xi,readSection:Zi},t)}),nu=I(tu,au)(eu),{LicensePremium:ru}=acfwpElements,cu=parseInt(acfwpElements.is_acfwp_active),ou=()=>{const{license_page:{title:t,desc:e,feature_comparison:a,license_status:n,content:r,specs:c}}=acfwAdminApp;return cu?u.createElement(ru,null):u.createElement("div",{className:"acfw-license-box"},u.createElement("div",{className:"overview"},u.createElement("h1",null,t),u.createElement("p",null,e),u.createElement("a",{className:"action-button feature-comparison",href:a.link,target:"_blank",rel:"noopener noreferrer"},a.text)),u.createElement("div",{className:"license-info"},u.createElement("div",{className:"heading"},u.createElement("div",{className:"left"},u.createElement("span",null,n.label)),u.createElement("div",{className:"right"},u.createElement("a",{className:"action-button upgrade-premium",href:n.link,target:"_blank",rel:"noopener noreferrer"},n.text))),u.createElement("div",{className:"content"},u.createElement("h2",null,r.title),u.createElement("p",null,r.text),u.createElement("table",{className:"license-specs"},u.createElement("thead",null,u.createElement("tr",null,c.map(o=>u.createElement("th",{key:o.label},o.label)))),u.createElement("tbody",null,u.createElement("tr",null,c.map(o=>u.createElement("td",{key:o.value},o.value))))))))};const{setStorePage:su}=pe,lu=t=>{var i;const{actions:e}=t,a=ee(),r=(i=new URLSearchParams(me().search).get("tab"))!=null?i:"ACFW",[c,o]=u.useState(r),{license_tabs:s}=acfwAdminApp,l=d=>{a.push("".concat(re(),"admin.php?page=acfw-license&tab=").concat(d)),o(d),e.setStorePage({data:"acfw-license/".concat(d)})};return E.useEffect(()=>{r!=="ACFW"&&e.setStorePage({data:"acfw-license/".concat(r)})},[]),u.createElement("div",{className:"license-page"},u.createElement(ue,{className:"license-header",hideUpgrade:!0}),u.createElement(de,{defaultActiveKey:r,items:s,onTabClick:l}),c==="ACFW"&&u.createElement(ou,null))},iu=t=>({actions:$({setStorePage:su},t)}),uu=I(null,iu)(lu);const du=()=>{const{about_page:{title:t,desc:e,main_card:a,cards:n,status:r,status_texts:c,button_texts:o}}=acfwAdminApp;return u.createElement("div",{className:"about-page"},u.createElement(ue,{title:t,description:e,className:"about-header",hideUpgrade:!0}),u.createElement(Y,{className:"about-rymera-team"},u.createElement(k,{className:"content",span:12},u.createElement("div",{className:"inner"},u.createElement("h2",null,a.title),a.content.map((s,l)=>u.createElement("p",{key:l},s)))),u.createElement(k,{className:"photo",span:12},u.createElement("img",{src:a.image,alt:"Rymera Team"}))),u.createElement(Y,{className:"plugin-cards",gutter:10},n.map((s,l)=>u.createElement(k,{key:l,span:12},u.createElement(K,{actions:[u.createElement(u.Fragment,null,u.createElement("strong",null,r,": "),u.createElement("span",null,c[s.action.status])),s.action.link?u.createElement(P,{type:"primary",href:s.action.link,target:s.action.external?"_blank":void 0},o[s.action.status]):null]},u.createElement(K.Meta,{avatar:u.createElement(Ja,{src:s.icon}),title:s.title,description:s.content}))))))};const{Text:le,Link:kt}=ea,mu=()=>{const{premium_page:{image:t,title:e,desc:a,header:n,rows:r,action:c},logo_alt:o}=acfwAdminApp;return React.createElement("div",{id:"acfw-premium",className:"acfwf-upgrade-settings-block"},React.createElement("p",null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"logo",src:t,alt:o}))),React.createElement("h2",{dangerouslySetInnerHTML:{__html:e}}),React.createElement("p",null,React.createElement(kt,{className:"acfw-upgrade-button",href:c.btn_link,target:"_blank"},c.btn_text)),React.createElement("p",null,React.createElement(le,null,a)),React.createElement("div",{className:"responsive-table"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"feature"},React.createElement(le,null,n.feature)),React.createElement("th",{className:"free"},React.createElement(le,null,n.free)),React.createElement("th",{className:"premium"},React.createElement(le,null,n.premium)))),React.createElement("tbody",null,r.map(({feature:s,free:l,premium:i},d)=>React.createElement("tr",{key:d},React.createElement("td",{className:"feature"},React.createElement(le,null,s)),React.createElement("td",{className:"free dashicons-before dashicons-no"},React.createElement(le,null,l)),React.createElement("td",{className:"premium dashicons-before dashicons-yes-alt"},React.createElement(le,null,i))))))),React.createElement("div",{className:"cta-block"},React.createElement("h3",null,React.createElement(le,null,c.title)),React.createElement("p",null,React.createElement(kt,{className:"acfw-upgrade-button",href:c.btn_link,target:"_blank"},c.btn_text))))};const pu=()=>{const{help_page:{title:t,desc:e,cards:a}}=acfwAdminApp,{HelpPremium:n}=acfwpElements;return u.createElement("div",{className:"help-page"},u.createElement(ue,{title:t,description:e,className:"help-header"}),u.createElement(Y,{gutter:10},a.map((r,c)=>u.createElement(k,{key:c,className:"acfw-border-box",span:12},u.createElement(K,null,u.createElement("h2",null,r.title),u.createElement("p",null,r.content),u.createElement(P,{type:"primary",href:r.action.link,size:"large",target:"_blank"},r.action.text))))),u.createElement(Y,{gutter:10},u.createElement(k,{className:"acfw-border-box",span:24},u.createElement(it,{className:"help-guide",showSubtitle:!0,showTag:!1}))),n?u.createElement(n,null):null)};const fu=t=>{const{step_count:e,title:a,description:n,is_active:r,action_text:c,link:o,is_external:s}=t;return React.createElement("div",{className:"plugin-step ".concat(r?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,e)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},n),React.createElement("p",{className:"actions"},React.createElement(P,{href:o,target:s?"_blank":""},c))))},Eu=()=>{const{loyalty_program:{title:t,description:e,plugin_image:a,features_list:n,steps_list:r}}=acfwAdminApp;return React.createElement("div",{className:"loyalty-program-page-upsell"},React.createElement(ue,{title:t,className:"loyalty-program-header",description:e,hideUpgrade:!0}),React.createElement(Y,{className:"features-list",gutter:60},React.createElement(k,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(k,{span:12,className:"content"},React.createElement("ul",null,n.map((c,o)=>React.createElement("li",{key:o},c))))),React.createElement("div",{className:"action-steps"},r.map((c,o)=>React.createElement(fu,{key:o,...c}))))};const _u=t=>{const{step_count:e,title:a,description:n,is_active:r,action_text:c,link:o,is_external:s}=t;return React.createElement("div",{className:"plugin-step ".concat(r?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,e)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},n),React.createElement("p",{className:"actions"},React.createElement(P,{href:o,target:s?"_blank":""},c))))},gu=()=>{const{advanced_gift_cards:{title:t,description:e,plugin_image:a,features_list:n,steps_list:r}}=acfwAdminApp;return React.createElement("div",{className:"advanced-gift-cards-page-upsell"},React.createElement("div",{className:"page-header advanced-gift-cards-header"},React.createElement(lt,{hideUpgrade:!0}),React.createElement("h1",null,t),React.createElement("p",null,e)),React.createElement(Y,{className:"features-list",gutter:60},React.createElement(k,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(k,{span:12,className:"content"},React.createElement("ul",null,n.map((c,o)=>React.createElement("li",{key:o},c))))),React.createElement("div",{className:"action-steps"},r.map((c,o)=>React.createElement(_u,{key:o,...c}))))},ut=t=>{const{className:e}=t,a={rows:2,width:100};return React.createElement("div",{className:"coupon-templates-list ".concat(e)},[...Array(9)].map((n,r)=>React.createElement("div",{key:r,className:"coupon-template-card"},React.createElement("div",{className:"template-image"}),React.createElement("div",{className:"template-content"},React.createElement(X,{active:!0,paragraph:a})))))},{togglePremiumModal:hu,deleteRecentCouponTemplate:Ru,unsetRecentCouponTemplate:yu}=z,Su=t=>{const{labels:e}=acfwAdminApp.coupon_templates_page,a=ee(),{template:n,isReview:r,showClose:c,actions:o}=t,s=()=>{if(n.license_type==="premium"&&!parseInt(acfwpElements.is_acfwp_active)){o.togglePremiumModal({show:!0});return}const i=r?"id=".concat(n.id,"&is_review=true"):"id=".concat(n.id);a.push("".concat(re(),"admin.php?page=acfw-coupon-templates&").concat(i))},l=()=>{o.deleteRecentCouponTemplate({id:n.id}),o.unsetRecentCouponTemplate({id:n.id})};return React.createElement("div",{className:"coupon-template-card"},React.createElement("div",{className:"template-image",style:{backgroundColor:n.image_bg_color}},c&&React.createElement("span",{className:"close-icon",onClick:l},React.createElement(Xt,null)),React.createElement("span",{className:"image-svg",onClick:s,dangerouslySetInnerHTML:{__html:n.image_svg}}),n.license_type==="premium"&&React.createElement("span",{className:"premium-badge"},e.premium)),React.createElement("div",{className:"template-content"},React.createElement("h3",{onClick:s},n.title),React.createElement("p",null,n.description)))},Tu=t=>({actions:$({togglePremiumModal:hu,deleteRecentCouponTemplate:Ru,unsetRecentCouponTemplate:yu},t)}),Cu=I(null,Tu)(Su),dt=t=>{const{templates:e,isReview:a,showClose:n}=t,{labels:r}=acfwAdminApp.coupon_templates_page,[c,o]=E.useState(1),s=9,l=E.useMemo(()=>e.slice((c-1)*s,c*s),[e,c]);return E.useEffect(()=>{o(1)},[e]),e.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"queried-templates-list coupon-templates-list"},l.map(i=>React.createElement(Cu,{key:i.id,template:i,isReview:a,showClose:n}))),React.createElement("div",{className:"templates-list-pagination"},React.createElement(Pe,{defaultCurrent:1,pageSize:s,current:c,total:e.length,onChange:i=>o(i),hideOnSinglePage:!0,showSizeChanger:!1}))):React.createElement("div",{className:"no-templates-message"},r.no_templates_found)},vu=t=>{const{templates:e,actions:a}=t,[n,r]=E.useState(!1);return E.useEffect(()=>{r(!0),a.readRecentCouponTemplates({successCB:()=>r(!1)})},[]),n?React.createElement(ut,{className:"coupon-templates-list"}):React.createElement(dt,{templates:e,showClose:!0})},bu=t=>{var e,a;return{templates:(a=(e=t.couponTemplates)==null?void 0:e.recent)!=null?a:[]}},Au=t=>({actions:$({...z},t)}),wu=I(bu,Au)(vu),Ou=t=>{const{templates:e,loading:a,actions:n}=t;return E.useEffect(()=>{n.setCouponTemplatesLoading({loading:!0}),n.readCouponTemplates({successCB:()=>n.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(ut,{className:"queried-templates-list"}):React.createElement(dt,{templates:e})},Nu=t=>{var e,a,n,r;return{templates:(a=(e=t.couponTemplates)==null?void 0:e.templates)!=null?a:[],loading:(r=(n=t.couponTemplates)==null?void 0:n.loading)!=null?r:!1}},Du=t=>({actions:$({...z},t)}),Pu=I(Nu,Du)(Ou),Iu=t=>{const{templates:e,loading:a,actions:n}=t;return E.useEffect(()=>{n.setCouponTemplatesLoading({loading:!0}),n.readCouponTemplates({isReview:!0,successCB:()=>n.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(ut,{className:"queried-templates-list"}):React.createElement(dt,{templates:e,isReview:!0})},$u=t=>{var e,a,n,r;return{templates:(a=(e=t.couponTemplates)==null?void 0:e.review)!=null?a:[],loading:(r=(n=t.couponTemplates)==null?void 0:n.loading)!=null?r:!1}},ku=t=>({actions:$({...z},t)}),xu=I($u,ku)(Iu),{readCouponTemplateCategories:Mu,readCouponTemplateCategory:Lu,setCouponTemplatesLoading:_e,readCouponTemplates:Bu}=z,Uu=t=>{const{categories:e,actions:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page,[r,c]=E.useState(!1),[o,s]=E.useState("all"),l=i=>{if(i!==o){if(s(i),i==="all"){a.readCouponTemplates({processingCB:()=>_e({loading:!0}),successCB:()=>_e({loading:!1})});return}a.readCouponTemplateCategory({slug:i,processingCB:()=>_e({loading:!0}),successCB:()=>_e({loading:!1})})}};return E.useEffect(()=>{c(!0),a.readCouponTemplateCategories({successCB:()=>c(!1)})},[]),React.createElement("div",{className:"coupon-templates-sidebar"},React.createElement("div",{className:"sidebar-inner"},React.createElement("h3",null,n.categories),React.createElement("ul",{className:"categories-list"},r?React.createElement(he,null):React.createElement(React.Fragment,null,React.createElement("li",{className:o==="all"?"current":"",onClick:()=>l("all")},React.createElement("span",null,n.all_templates)),e.map(i=>React.createElement("li",{className:o===i.slug?"current":"",key:i.slug,onClick:()=>l(i.slug)},React.createElement("span",null,i.name)))))))},ju=t=>{var e,a;return{categories:(a=(e=t.couponTemplates)==null?void 0:e.categories)!=null?a:[]}},Fu=t=>({actions:$({readCouponTemplateCategories:Mu,readCouponTemplateCategory:Lu,setCouponTemplatesLoading:_e,readCouponTemplates:Bu},t)}),Gu=I(ju,Fu)(Uu),qu=t=>{const{defaultValue:e,onChange:a}=t,[n,r]=E.useState(e!=null?e:""),c=s=>{r(s.target.value),a(s.target.value)},o=()=>{const s="ABCDEFGHJKMNPQRSTUVWXYZ123456789";let i="";for(let d=0;d<10;d++)i+=s.charAt(Math.floor(Math.random()*s.length));r(i),a(i)};return React.createElement(ge,{direction:"horizontal",size:"middle"},React.createElement(ge.Compact,null,React.createElement(W,{allowClear:!0,value:n,onChange:c})),React.createElement(ge.Compact,null,React.createElement(P,{onClick:()=>o()},"Generate")))},Hu=t=>{const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t;return React.createElement(G,{placeholder:n==null?void 0:n.placeholder,defaultValue:e,readOnly:!a,min:n==null?void 0:n.min,max:n==null?void 0:n.max,step:n==null?void 0:n.step,onChange:r})},Vu=t=>{const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t;return React.createElement("div",null,React.createElement(W,{placeholder:n==null?void 0:n.placeholder,defaultValue:e,readOnly:!a,onChange:c=>r(c.target.value)}))},Yu=t=>{const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t,{currency:c}=acfwAdminApp.store_credits_page;return React.createElement("div",null,React.createElement(G,{placeholder:n==null?void 0:n.placeholder,defaultValue:e,readOnly:!a,decimalSeparator:c.decimal_separator,parser:o=>be(o!=null?o:"").toString(),onChange:r}))},zu=t=>{var o;const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t,c=Object.keys((o=n==null?void 0:n.options)!=null?o:{}).map(s=>({value:s,label:n!=null&&n.options?n==null?void 0:n.options[s]:""}));return React.createElement("div",null,React.createElement(O,{placeholder:n==null?void 0:n.placeholder,disabled:!a,defaultValue:e,options:c,onChange:r}))},Wu=t=>{const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t;return React.createElement("div",null,React.createElement(W.TextArea,{placeholder:n==null?void 0:n.placeholder,defaultValue:e,readOnly:!a,onChange:c=>r(c.target.value)}))},Ku=t=>{var i,d,p,f;const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t,[c,o]=E.useState(e==="yes"),s=(d=(i=n==null?void 0:n.options)==null?void 0:i.enabled)!=null?d:"yes",l=(f=(p=n==null?void 0:n.options)==null?void 0:p.disabled)!=null?f:"";return E.useEffect(()=>{e!==s&&e!==l&&(o(!1),r(l))},[]),React.createElement("div",null,React.createElement(Xa,{checked:c,disabled:!a,onChange:g=>{o(g.target.checked),r(g.target.checked?s:l)}}),React.createElement("span",null,n.description))},Qu=()=>{var c;const[t,e]=E.useState(!1),[a,n]=E.useState((c=acfwAdminApp.user_role_options)!=null?c:[]),r=async()=>{try{e(!0);const o=await B.get("coupons/v1/templates/options",{params:{type:"user_role"},cancelToken:te("fetch_user_roles")});o&&o.data&&(acfwAdminApp.user_role_options=o.data,n(o.data)),e(!1)}catch(o){console.log(o)}};return E.useEffect(()=>(acfwAdminApp.user_role_options||r(),()=>xe("fetch_user_roles")),[]),{options:a,loading:t}},Ju=t=>{const{defaultValue:e,editable:a,fixtures:n,onChange:r}=t,{options:c,loading:o}=Qu();return React.createElement("div",null,React.createElement(O,{mode:"multiple",placeholder:n==null?void 0:n.placeholder,disabled:!a,defaultValue:e.length?e:void 0,options:c,loading:o,onChange:s=>r(s)}))},Xu=t=>{const{fixtures:e,onChange:a}=t,[n,r]=E.useState([]),c=async s=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products_and_variations",term:s,security:acfwAdminApp.nonces.search_products,exclude:n.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d],value:d}))},o=s=>{r(s),a(s)};return React.createElement(Z,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:o,fixtures:e,style:{width:"100%"}})},Zu=t=>{const{fixtures:e,onChange:a}=t,[n,r]=E.useState([]),c=async s=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:s,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:n.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d].name,value:l[d].term_id}))},o=s=>{r(s),a(s)};return React.createElement(Z,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:o,fixtures:e,style:{width:"100%"}})},ed=t=>{const{defaultValue:e,editable:a,onChange:n}=t,r=e?window.moment(e):void 0,c=o=>{var s;n((s=o==null?void 0:o.format("YYYY-MM-DD HH:mm:ss"))!=null?s:"")};return React.createElement(Ze,{showTime:!0,defaultValue:r,disabled:!a,onChange:c})},td=t=>{const{fixtures:e,onChange:a}=t,[n,r]=E.useState([]),c=async s=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:s,security:acfwAdminApp.nonces.search_products,include:!0,exclude:n.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d],value:d}))},o=s=>{r(s),a(s)};return React.createElement(Z,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:o,fixtures:e,style:{width:"100%"},value:n})},ad=t=>{const{fixtures:e,onChange:a}=t,[n,r]=E.useState([]),c=async s=>{const l=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_customers",term:s,security:acfwAdminApp.nonces.search_customers,exclude:n.map(d=>d.value)}});return Object.keys(l).map(d=>({label:l[d].replace("&ndash;",""),value:d}))},o=s=>{r(s),a(s)};return React.createElement(Z,{mode:"multiple",placeholder:e==null?void 0:e.placeholder,fetchOptions:c,onChange:o,fixtures:e,style:{width:"100%"},value:n})},xt={coupon_code:qu,number:Hu,text:Vu,price:Yu,select:zu,textarea:Wu,checkbox:Ku,user_roles:Ju,products:Xu,product_categories:Zu,date:ed,coupons:td,customers:ad};function nd(t){return xt[t]?xt[t]:()=>u.createElement("div",null,"Field type not found")}const{setEditCouponTemplateFieldValue:rd}=z,cd=t=>{const{templateField:e,actions:a}=t,{field:n,value:r,field_value:c,fixtures:o}=e,s="input-field-".concat(n),l=nd(o.type),i=d=>{a.setFieldValue({field:e.field,value:d})};return React.createElement("div",{className:"template-field"},React.createElement("div",{className:"template-field-inner"},React.createElement("label",{htmlFor:s},o.label),React.createElement("div",{className:"field-input-wrap"},React.createElement(l,{defaultValue:r,editable:c!=="readonly",fixtures:o,onChange:i}),o.tooltip&&React.createElement(De,{className:"acfw-field-tooltip",placement:"right",content:o.tooltip,trigger:"click"},React.createElement(et,null))),!!(e!=null&&e.error)&&React.createElement("div",{className:"field-error"},e.error)))},od=t=>({actions:$({setFieldValue:rd},t)}),sd=I(null,od)(cd),qe=t=>{const{text:e,onClick:a,...n}=t,r=ee(),c=()=>{typeof a=="function"&&a(),r.goBack()};return React.createElement(P,{onClick:c,...n},e)},ld=t=>{const{group:e,groupKey:a}=t;return React.createElement("div",{className:"condition-group"},e.fields.length?React.createElement("div",{className:"condition-group-fields"},e.fields.map((n,r)=>React.createElement(Ms,{key:r,field:n,groupKey:a,fieldKey:r}))):React.createElement("div",{className:"empty-conditions"},"This is an empty condition group, just waiting for you to add some conditions in it..."))};const{setCartConditionItemData:id}=z,ud=t=>{const{data:e,actions:a}=t;return React.createElement("div",{className:"cart-conditions"},React.createElement("h2",null,"IF..."),React.createElement("div",{className:"condition-groups"},e.map((n,r)=>React.createElement(React.Fragment,null,n.type==="group_logic"?React.createElement(pa,{key:r,value:n.value,onChange:c=>a.setCartConditionItemData({groupKey:r,fieldKey:null,data:c})}):React.createElement(ld,{key:r,groupKey:r,group:n})))),React.createElement("h2",null,"...THEN ALLOW COUPON TO BE APPLIED"))},dd=t=>{var e,a,n;return{data:(n=(a=(e=t.couponTemplates)==null?void 0:e.edit)==null?void 0:a.cart_conditions)!=null?n:[]}},md=t=>({actions:$({setCartConditionItemData:id},t)}),pd=I(dd,md)(ud),{validateEditCouponTemplateData:fd,validateCartConditionsData:Ed,createCouponFromTemplate:_d,setCreatedCouponResponseData:gd}=z,hd=t=>{const{template:e,text:a,size:n,disabled:r,actions:c}=t,[o,s]=E.useState(!1),l=()=>{var p,f;c.validateEditCouponTemplateData(),c.validateCartConditionsData();const i=(p=e==null?void 0:e.fields)==null?void 0:p.filter(g=>g.error);if(!e||i!=null&&i.length)return;const d={id:e.id,fields:e.fields.map(g=>({key:g.field,value:g.value,type:g.fixtures.type})),cart_conditions:(f=e.cart_conditions)!=null?f:[]};s(!0),c.createCouponFromTemplate({data:d,successCB:g=>{s(!1),c.setCreatedCouponResponseData({data:g.data})}})};return React.createElement(P,{loading:o,type:"primary",onClick:l,size:n,disabled:r},a)},Rd=t=>{var e,a,n,r;return{template:(a=(e=t.couponTemplates)==null?void 0:e.edit)!=null?a:null,formResponse:(r=(n=t.couponTemplates)==null?void 0:n.formResponse)!=null?r:null}},yd=t=>({actions:$({validateEditCouponTemplateData:fd,validateCartConditionsData:Ed,createCouponFromTemplate:_d,setCreatedCouponResponseData:gd},t)}),Sd=I(Rd,yd)(hd);var Me={};function He(t){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(t)}Object.defineProperty(Me,"__esModule",{value:!0});Me.CopyToClipboard=void 0;var Ce=Sa(E),Td=Sa(Za),Cd=["text","onCopy","options","children"];function Sa(t){return t&&t.__esModule?t:{default:t}}function Mt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),a.push.apply(a,n)}return a}function Lt(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Mt(Object(a),!0).forEach(function(n){mt(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function vd(t,e){if(t==null)return{};var a=bd(t,e),n,r;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function bd(t,e){if(t==null)return{};var a={},n=Object.keys(t),r,c;for(c=0;c<n.length;c++)r=n[c],!(e.indexOf(r)>=0)&&(a[r]=t[r]);return a}function Ad(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wd(t,e,a){return e&&Bt(t.prototype,e),a&&Bt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Od(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}function Ve(t,e){return Ve=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ve(t,e)}function Nd(t){var e=Pd();return function(){var n=Ne(t),r;if(e){var c=Ne(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Dd(this,r)}}function Dd(t,e){if(e&&(He(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ta(t)}function Ta(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pd(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ne(t){return Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},Ne(t)}function mt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Ca=function(t){Od(a,t);var e=Nd(a);function a(){var n;Ad(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return n=e.call.apply(e,[this].concat(c)),mt(Ta(n),"onClick",function(s){var l=n.props,i=l.text,d=l.onCopy,p=l.children,f=l.options,g=Ce.default.Children.only(p),R=(0,Td.default)(i,f);d&&d(i,R),g&&g.props&&typeof g.props.onClick=="function"&&g.props.onClick(s)}),n}return wd(a,[{key:"render",value:function(){var r=this.props;r.text,r.onCopy,r.options;var c=r.children,o=vd(r,Cd),s=Ce.default.Children.only(c);return Ce.default.cloneElement(s,Lt(Lt({},o),{},{onClick:this.onClick}))}}]),a}(Ce.default.PureComponent);Me.CopyToClipboard=Ca;mt(Ca,"defaultProps",{onCopy:void 0,options:void 0});var Id=Me,Ye=Id.CopyToClipboard;Ye.CopyToClipboard=Ye;var $d=Ye;const kd=t=>{const{value:e,...a}=t;return React.createElement(W.Group,{className:"copy-input-field-component",compact:!0},React.createElement(W,{style:{width:"calc(100% - 46px)"},...a,value:e,readOnly:!0}),React.createElement($d.CopyToClipboard,{text:e,onCopy:()=>Q.success("Copy success")},React.createElement(P,null,React.createElement(en,null))))};const{clearCreatedCouponResponseData:xd}=z,Md=t=>{const{formResponse:e,actions:a}=t,{labels:n}=acfwAdminApp.coupon_templates_page;if(e){const{message:r,coupon_edit_url:c}=e;return React.createElement("div",{className:"coupon-template-success-page"},React.createElement("div",{className:"inner"},React.createElement("div",{className:"content-box"},React.createElement("h2",null,r),React.createElement("p",null,n.success_page_desc),React.createElement(Ue,{bordered:!0,size:"small",layout:"horizontal",column:1},e.fields.map(o=>React.createElement(Ue.Item,{key:o.key,label:o.label},["coupon_code","coupon_url"].includes(o.key)?React.createElement(kd,{value:o.value}):o.value)),!!e.cart_conditions&&React.createElement(Ue.Item,{label:n.cart_conditions},e.cart_conditions))),React.createElement("div",{className:"actions-box"},React.createElement(qe,{className:"create-another-btn",text:n.create_another_coupon,type:"primary",size:"large",onClick:()=>a.clearCreatedCouponResponseData()}),React.createElement(P,{href:"".concat(c,"&sendcoupon"),size:"large"},n.send_coupon),React.createElement(P,{href:c,size:"large"},n.edit_coupon))))}return null},Ld=t=>{var e,a;return{formResponse:(a=(e=t.couponTemplates)==null?void 0:e.formResponse)!=null?a:null}},Bd=t=>({actions:$({clearCreatedCouponResponseData:xd},t)}),Ud=I(Ld,Bd)(Md);const{readCouponTemplate:jd,setEditCouponTemplate:Fd,validateEditCouponTemplateData:Gd,setCreatedCouponResponseData:qd}=z,Hd=t=>{var T,A;const{template:e,formResponse:a,actions:n}=t,[r,c]=E.useState(!0),[o,s]=E.useState(0),{labels:l}=acfwAdminApp.coupon_templates_page,i=new URLSearchParams(me().search),d=(T=i.get("id"))!=null?T:"0",p=(A=i.get("is_review"))!=null?A:!1,f={rows:2,width:100},g=[{title:l.coupon_details}];e!=null&&e.cart_conditions&&e.cart_conditions.length>0&&g.push({title:l.cart_conditions});const R=w=>{var C;if(w==="prev"){s(o-1);return}let N=[];switch(o){case 0:n.validateEditCouponTemplateData(),N=(C=e==null?void 0:e.fields)==null?void 0:C.filter(S=>S.error);break}N.length||s(o+1)};return E.useEffect(()=>{e&&(e!=null&&e.fields)||n.readCouponTemplate({id:parseInt(d),isReview:!!p,successCB:w=>{c(!1),n.setEditCouponTemplate({data:w.data})},failCB:()=>c(!1)})},[]),e!=null&&e.fields?a?React.createElement(Ud,null):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(Y,{gutter:16},React.createElement(k,{span:18},React.createElement("div",{className:"template-form-main"},e?React.createElement(React.Fragment,null,React.createElement("div",{className:"template-heading"},React.createElement("h2",null,e.title),React.createElement("p",null,e.description)),React.createElement("div",{className:"form-instruction"},React.createElement("em",null,l.form_instruction))):React.createElement(X,{active:!0,paragraph:f}),g.length>1?React.createElement("div",{className:"template-steps"},React.createElement(tn,{current:o,items:g})):null,o===0?React.createElement("div",{className:"template-fields"},e.fields.map((w,N)=>{var C;return React.createElement(sd,{key:"".concat(w.field,"-").concat((C=w==null?void 0:w.error)!=null?C:""),templateField:w})})):null,o===1?React.createElement(pd,null):null),g.length>1?React.createElement("div",{className:"template-step-actions"},React.createElement(P,{type:"default",disabled:o===0,onClick:()=>R("prev")},"Previous"),React.createElement(P,{type:"primary",disabled:o===g.length-1,onClick:()=>R("next")},"Next")):null),React.createElement(k,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Sd,{text:l.create_coupon,size:"large",disabled:o!==g.length-1}),React.createElement(qe,{text:l.cancel,onClick:()=>n.setEditCouponTemplate({data:null}),size:"large"}))))):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(Y,{gutter:16},React.createElement(k,{span:18},React.createElement("div",{className:"template-form-main template-loading"},r?React.createElement(he,null):React.createElement("p",{className:"template-not-found"},l.template_not_found))),React.createElement(k,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(qe,{text:l.go_back,onClick:()=>n.setEditCouponTemplate({data:null}),size:"large"})))))},Vd=t=>{var e,a,n,r;return{template:(a=(e=t.couponTemplates)==null?void 0:e.edit)!=null?a:null,formResponse:(r=(n=t.couponTemplates)==null?void 0:n.formResponse)!=null?r:null}},Yd=t=>({actions:$({readCouponTemplate:jd,setEditCouponTemplate:Fd,validateEditCouponTemplateData:Gd,setCreatedCouponResponseData:qd},t)}),zd=I(Vd,Yd)(Hd);const{togglePremiumModal:Wd}=z,Kd=t=>{var g,R;const{showModal:e,actions:a}=t,{title:n,labels:r,enable_review_tab:c}=acfwAdminApp.coupon_templates_page,o=ee(),s=me(),l=new URLSearchParams(s.search),i=(g=l.get("id"))!=null?g:null,d=re(),p=(R=l.get("cttab"))!=null?R:"main",f=T=>{o.push("".concat(d,"admin.php?page=acfw-coupon-templates&cttab=").concat(T))};return React.createElement("div",{className:"coupon-templates-page"},React.createElement(ue,{title:n,className:"coupon-templates-header"}),i?React.createElement(zd,null):React.createElement(de,{defaultActiveKey:p,className:"coupon-templates-tabs",onTabClick:f},React.createElement(de.TabPane,{tab:r.recently_used_templates,key:"recent"},React.createElement(Y,{gutter:16},React.createElement(k,{span:18},React.createElement(wu,null)))),React.createElement(de.TabPane,{tab:r.available_templates,key:"main"},React.createElement(Y,{gutter:16},React.createElement(k,{span:18},React.createElement(Pu,null)),React.createElement(k,{span:6},React.createElement(Gu,null)))),c&&React.createElement(de.TabPane,{tab:r.review_templates,key:"review"},React.createElement(Y,{gutter:16},React.createElement(k,{span:18},React.createElement(xu,null))))),React.createElement(ye,{className:"coupon-templates-premium-modal",open:e,centered:!0,onCancel:()=>a.togglePremiumModal({show:!1}),footer:null},React.createElement(lt,{hideUpgrade:!0}),React.createElement("p",null,r.premium_modal_text),React.createElement(P,{type:"primary",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=coupontemplates",size:"large",target:"_blank"},r.premium_modal_btn)))},Qd=t=>{var e,a;return{showModal:(a=(e=t.couponTemplates)==null?void 0:e.premiumModal)!=null?a:!1}},Jd=t=>({actions:$({togglePremiumModal:Wd},t)}),Xd=I(Qd,Jd)(Kd),Zd=parseInt(acfwpElements.is_lpfw_active),em=parseInt(acfwpElements.is_agc_active),{setStorePage:tm}=pe,{readAdminNotices:am}=ct;acfwpElements.axiosInstance=B;const nm=t=>{const{page:e,actions:a}=t,r=new URLSearchParams(me().search).get("page");return acfwpElements.appPage=r,E.useEffect(()=>{a.setStorePage({data:r||""})},[r,a]),E.useEffect(()=>{a.readAdminNotices({})},[]),u.createElement("div",{className:"app"},e==="acfw-dashboard"?u.createElement(zl,null):null,e==="acfw-store-credits"?u.createElement(Ii,null):null,e==="acfw-coupon-templates"?u.createElement(Xd,null):null,e==="acfw-settings"?u.createElement(nu,null):null,e.includes("acfw-license")?u.createElement(uu,null):null,e==="acfw-premium"?u.createElement(mu,null):null,e==="acfw-help"?u.createElement(pu,null):null,e==="acfw-about"?u.createElement(du,null):null,e==="acfw-loyalty-program"&&!Zd?u.createElement(Eu,null):null,e==="acfw-advanced-gift-cards"&&!em?u.createElement(gu,null):null)},rm=t=>({page:t.page}),cm=t=>({actions:$({setStorePage:tm,readAdminNotices:am},t)}),om=I(rm,cm)(nm);const{setStorePage:sm}=pe,lm=t=>{const{page:e,notices:a,actions:n}=t,[r,c]=E.useState(""),o=ee(),s=re(),{coupon_nav:{toplevel:l,dashboard:i,links:d},app_pages:p}=acfwAdminApp,f=g=>{o.push("".concat(s,"admin.php?page=").concat(g)),n.setStorePage({data:g})};return E.useEffect(()=>{document.body.classList.add(e),r&&document.body.classList.remove(r),c(e)},[e]),React.createElement(React.Fragment,null,React.createElement("a",{href:"".concat(s,"edit.php?post_type=shop_coupon"),className:"wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel_page_acfw-admin"},React.createElement("div",{className:"wp-menu-arrow"},React.createElement("div",null)),React.createElement("div",{className:"wp-menu-image dashicons-before dashicons-tickets-alt"},React.createElement("br",null)),React.createElement("div",{className:"wp-menu-name"},l,0<a.length&&React.createElement(React.Fragment,null,"",React.createElement("span",{className:"update-plugins count-".concat(a.length)},React.createElement("span",{className:"notices-count"},a.length))))),React.createElement("ul",{className:"wp-submenu wp-submenu-wrap"},React.createElement("li",{className:"wp-submenu-head","aria-hidden":"true"},l),React.createElement("li",{key:"acfw-dashboard",className:"wp-first-item ".concat(e==="acfw-dashboard"?"current":"")},React.createElement("button",{className:"buttonlink dashboard-link",onClick:()=>f("acfw-dashboard")},i)),d.map(({link:g,text:R},T)=>React.createElement("li",{key:T},React.createElement("a",{href:g},R))),p.map(({slug:g,label:R})=>React.createElement("li",{key:g,className:g===e?"current":""},React.createElement("button",{className:"buttonlink ".concat(g,"-link"),onClick:()=>f(g)},R)))))},im=t=>({page:t.page,notices:t.adminNotices}),um=t=>({actions:$({setStorePage:sm},t)}),dm=I(im,um)(lm),pt=re(),ft=hl(),mm={element:u,dom:ze,router:{BrowserRouter:We,Route:Ke,useLocation:me,useHistory:ee,Link:Ut,Redirect:Aa},redux:{bindActionCreators:$,createStore:qt,combineReducers:Ht,applyMiddleware:Vt,createSagaMiddleware:Gt,connect:I,sagaEffects:{all:Ft,put:j,call:F,takeEvery:U}},lodash:window.lodash,antd:an,antdIcons:Tn,moment:window.moment,pathPrefix:pt,validateURL:fa,appStore:{Provider:Qe,store:ft,storeActions:{...pe}}};acfwpElements={...acfwpElements,...mm};document.querySelectorAll("#acfw_admin_app").forEach(t=>{ze.render(u.createElement(Qe,{store:ft},u.createElement(We,null,u.createElement(Ke,{path:"".concat(pt,"admin.php"),component:om}))),t)});document.querySelectorAll("#toplevel_page_acfw-admin").forEach(t=>{ze.render(u.createElement(Qe,{store:ft},u.createElement(We,null,u.createElement(Ke,{path:"".concat(pt,"admin.php"),component:dm}))),t)});export{pm as __vite_legacy_guard};
