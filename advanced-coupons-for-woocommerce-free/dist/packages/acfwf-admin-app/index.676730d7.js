import{g as ha,e as Ra,r as f,u as Q,j as oe,R as l,L as kt,d as Ge,B as He,k as Ve,l as ya}from"../../common/reactLib.deb836f9.js";import{f as Mt,t as Sa,d as Ta,s as Ca,e as ba,m as wa,g as U,p as B,h as xt,i as Lt,j as Bt,k as Ut,l as jt,n as I,o as $,P as Ye}from"../../common/redux.cb701b1a.js";import{aa as Aa,ab as va,ac as Ft,ad as qe,ae as Gt,af as Oa,ag as Na,ah as Da,ai as Ht,aj as Pa,ak as Ia,al as $a,am as ka,an as Ma,ao as xa,ap as ze,aq as Vt,ar as Yt,as as qt,at as La,au as Ba,av as Ua,aw as ja,ax as D,ay as V,n as zt,az as ae,aA as Ke,F as Fa,aB as le,aC as W,aD as We,aE as z,X as Qe,aF as ge,aG as H,aH as N,aI as Ae,aJ as Ee,aK as K,aL as Y,V as Ga,aM as Je,aN as ce,aO as ke,aP as Kt,aQ as ut,aR as Re,aS as Ha,aT as Xe,aU as pe,R as dt,aV as Wt,aW as Va,aX as Ya,aY as qa,aZ as za,o as Ka,a_ as mt,a$ as Wa}from"../../common/antd.bea37c17.js";import{T as Qt,R as Qa,S as Jt,C as Ja,I as Xa,W as Za,A as Xt,G as en,a as tn,b as an,M as nn,D as rn,L as sn,U as cn,c as on,d as ln,e as un,f as dn,g as mn,B as pn,h as fn}from"../../common/antdIcons.cd7a8ba8.js";function fd(){import.meta.url,import("_").catch(()=>1);async function*e(){}}var pt=function(t){return{done:!0,value:t}},Me={};function En(e){return Ta(e)?"channel":Ca(e)?String(e):ba(e)?e.name:String(e)}function _n(e,t,a){var r,n,s,c=t;function o(d,i){if(c===Me)return pt(d);if(i&&!n)throw c=Me,i;r&&r(d);var m=i?e[n](i):e[c]();return c=m.nextState,s=m.effect,r=m.stateUpdater,n=m.errorState,c===Me?pt(d):s}return wa(o,function(d){return o(null,d)},a)}function gn(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];var s={done:!1,value:Sa(e)},c=function(m){return{done:!1,value:Mt.apply(void 0,[t].concat(r,[m]))}},o,d=function(m){return o=m};return _n({q1:function(){return{nextState:"q2",effect:s,stateUpdater:d}},q2:function(){return{nextState:"q1",effect:c(o)}}},"q1","takeEvery("+En(e)+", "+t.name+")")}function L(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return Mt.apply(void 0,[gn,e,t].concat(r))}function hn(e,t){for(var a=-1,r=e==null?0:e.length;++a<r&&t(e[a],a,e)!==!1;);return e}var Rn=hn,yn=Aa,Sn=function(){try{var e=yn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Tn=Sn,ft=Tn;function Cn(e,t,a){t=="__proto__"&&ft?ft(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var Zt=Cn,bn=Zt,wn=va,An=Object.prototype,vn=An.hasOwnProperty;function On(e,t,a){var r=e[t];(!(vn.call(e,t)&&wn(r,a))||a===void 0&&!(t in e))&&bn(e,t,a)}var ea=On,Nn=ea,Dn=Zt;function Pn(e,t,a,r){var n=!a;a||(a={});for(var s=-1,c=t.length;++s<c;){var o=t[s],d=r?r(a[o],e[o],o,a,e):void 0;d===void 0&&(d=e[o]),n?Dn(a,o,d):Nn(a,o,d)}return a}var ve=Pn,In=ve,$n=Ft;function kn(e,t){return e&&In(t,$n(t),e)}var Mn=kn;function xn(e){var t=[];if(e!=null)for(var a in Object(e))t.push(a);return t}var Ln=xn,Bn=qe,Un=Gt,jn=Ln,Fn=Object.prototype,Gn=Fn.hasOwnProperty;function Hn(e){if(!Bn(e))return jn(e);var t=Un(e),a=[];for(var r in e)r=="constructor"&&(t||!Gn.call(e,r))||a.push(r);return a}var Vn=Hn,Yn=Oa,qn=Vn,zn=Na;function Kn(e){return zn(e)?Yn(e,!0):qn(e)}var Ze=Kn,Wn=ve,Qn=Ze;function Jn(e,t){return e&&Wn(t,Qn(t),e)}var Xn=Jn,Te={exports:{}};Te.exports;(function(e,t){var a=Da,r=t&&!t.nodeType&&t,n=r&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===r,c=s?a.Buffer:void 0,o=c?c.allocUnsafe:void 0;function d(i,m){if(m)return i.slice();var p=i.length,_=o?o(p):new i.constructor(p);return i.copy(_),_}e.exports=d})(Te,Te.exports);var Zn=Te.exports;function er(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}var tr=er,ar=ve,nr=Ht;function rr(e,t){return ar(e,nr(e),t)}var sr=rr,cr=Pa,or=cr(Object.getPrototypeOf,Object),ta=or,lr=Ia,ir=ta,ur=Ht,dr=$a,mr=Object.getOwnPropertySymbols,pr=mr?function(e){for(var t=[];e;)lr(t,ur(e)),e=ir(e);return t}:dr,aa=pr,fr=ve,Er=aa;function _r(e,t){return fr(e,Er(e),t)}var gr=_r,hr=ka,Rr=aa,yr=Ze;function Sr(e){return hr(e,yr,Rr)}var Tr=Sr,Cr=Object.prototype,br=Cr.hasOwnProperty;function wr(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&br.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var Ar=wr,Et=Ma;function vr(e){var t=new e.constructor(e.byteLength);return new Et(t).set(new Et(e)),t}var et=vr,Or=et;function Nr(e,t){var a=t?Or(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var Dr=Nr,Pr=/\w*$/;function Ir(e){var t=new e.constructor(e.source,Pr.exec(e));return t.lastIndex=e.lastIndex,t}var $r=Ir,_t=xa,gt=_t?_t.prototype:void 0,ht=gt?gt.valueOf:void 0;function kr(e){return ht?Object(ht.call(e)):{}}var Mr=kr,xr=et;function Lr(e,t){var a=t?xr(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Br=Lr,Ur=et,jr=Dr,Fr=$r,Gr=Mr,Hr=Br,Vr="[object Boolean]",Yr="[object Date]",qr="[object Map]",zr="[object Number]",Kr="[object RegExp]",Wr="[object Set]",Qr="[object String]",Jr="[object Symbol]",Xr="[object ArrayBuffer]",Zr="[object DataView]",es="[object Float32Array]",ts="[object Float64Array]",as="[object Int8Array]",ns="[object Int16Array]",rs="[object Int32Array]",ss="[object Uint8Array]",cs="[object Uint8ClampedArray]",os="[object Uint16Array]",ls="[object Uint32Array]";function is(e,t,a){var r=e.constructor;switch(t){case Xr:return Ur(e);case Vr:case Yr:return new r(+e);case Zr:return jr(e,a);case es:case ts:case as:case ns:case rs:case ss:case cs:case os:case ls:return Hr(e,a);case qr:return new r;case zr:case Qr:return new r(e);case Kr:return Fr(e);case Wr:return new r;case Jr:return Gr(e)}}var us=is,ds=qe,Rt=Object.create,ms=function(){function e(){}return function(t){if(!ds(t))return{};if(Rt)return Rt(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),ps=ms,fs=ps,Es=ta,_s=Gt;function gs(e){return typeof e.constructor=="function"&&!_s(e)?fs(Es(e)):{}}var hs=gs,Rs=ze,ys=Vt,Ss="[object Map]";function Ts(e){return ys(e)&&Rs(e)==Ss}var Cs=Ts,bs=Cs,ws=qt,yt=Yt,St=yt&&yt.isMap,As=St?ws(St):bs,vs=As,Os=ze,Ns=Vt,Ds="[object Set]";function Ps(e){return Ns(e)&&Os(e)==Ds}var Is=Ps,$s=Is,ks=qt,Tt=Yt,Ct=Tt&&Tt.isSet,Ms=Ct?ks(Ct):$s,xs=Ms,Ls=La,Bs=Rn,Us=ea,js=Mn,Fs=Xn,Gs=Zn,Hs=tr,Vs=sr,Ys=gr,qs=Ua,zs=Tr,Ks=ze,Ws=Ar,Qs=us,Js=hs,Xs=ja,Zs=Ba,ec=vs,tc=qe,ac=xs,nc=Ft,rc=Ze,sc=1,cc=2,oc=4,na="[object Arguments]",lc="[object Array]",ic="[object Boolean]",uc="[object Date]",dc="[object Error]",ra="[object Function]",mc="[object GeneratorFunction]",pc="[object Map]",fc="[object Number]",sa="[object Object]",Ec="[object RegExp]",_c="[object Set]",gc="[object String]",hc="[object Symbol]",Rc="[object WeakMap]",yc="[object ArrayBuffer]",Sc="[object DataView]",Tc="[object Float32Array]",Cc="[object Float64Array]",bc="[object Int8Array]",wc="[object Int16Array]",Ac="[object Int32Array]",vc="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Nc="[object Uint16Array]",Dc="[object Uint32Array]",M={};M[na]=M[lc]=M[yc]=M[Sc]=M[ic]=M[uc]=M[Tc]=M[Cc]=M[bc]=M[wc]=M[Ac]=M[pc]=M[fc]=M[sa]=M[Ec]=M[_c]=M[gc]=M[hc]=M[vc]=M[Oc]=M[Nc]=M[Dc]=!0;M[dc]=M[ra]=M[Rc]=!1;function ye(e,t,a,r,n,s){var c,o=t&sc,d=t&cc,i=t&oc;if(a&&(c=n?a(e,r,n,s):a(e)),c!==void 0)return c;if(!tc(e))return e;var m=Xs(e);if(m){if(c=Ws(e),!o)return Hs(e,c)}else{var p=Ks(e),_=p==ra||p==mc;if(Zs(e))return Gs(e,o);if(p==sa||p==na||_&&!n){if(c=d||_?{}:Js(e),!o)return d?Ys(e,Fs(c,e)):Vs(e,js(c,e))}else{if(!M[p])return n?e:{};c=Qs(e,p,o)}}s||(s=new Ls);var g=s.get(e);if(g)return g;s.set(e,c),ac(e)?e.forEach(function(w){c.add(ye(w,t,a,w,e,s))}):ec(e)&&e.forEach(function(w,v){c.set(v,ye(w,t,a,v,e,s))});var y=i?d?zs:qs:d?rc:nc,h=m?void 0:y(e);return Bs(h||e,function(w,v){h&&(v=w,w=e[v]),Us(c,v,ye(w,t,a,v,e,s))}),c}var Pc=ye,Ic=Pc,$c=1,kc=4;function Mc(e){return Ic(e,$c|kc)}var xc=Mc;const Ce=ha(xc);var de=(e=>(e.READ_SECTIONS="READ_SECTIONS",e.READ_SECTION="READ_SECTION",e.SET_STORE_SECTIONS="SET_STORE_SECTIONS",e.SET_STORE_SECTION="SET_STORE_SECTION",e.TOGGLE_MODULE_SECTION="TOGGLE_MODULE_SECTION",e))(de||{});const Oe={readSections:e=>({type:"READ_SECTIONS",payload:e}),readSection:e=>({type:"READ_SECTION",payload:e}),setStoreSectionItems:e=>({type:"SET_STORE_SECTIONS",payload:e}),setStoreSectionItem:e=>({type:"SET_STORE_SECTION",payload:e}),toggleModuleSection:e=>({type:"TOGGLE_MODULE_SECTION",payload:e})},Lc=(e=[],t)=>{switch(t.type){case de.SET_STORE_SECTIONS:{const{data:a}=t.payload;return a}case de.SET_STORE_SECTION:{const{data:a}=t.payload,r=e.findIndex(s=>s.id===a.id);if(r<0)return e;const n=Ce(e);return n[r]={...n[r],...a},n}case de.TOGGLE_MODULE_SECTION:{const{module:a,show:r}=t.payload,n=e.findIndex(c=>c.module&&c.module===a);if(n<0)return e;const s=Ce(e);return s[n].show=r,s}default:return e}};var te=(e=>(e.CREATE_SETTING="CREATE_SETTING",e.UPDATE_SETTING="UPDATE_SETTING",e.DELETE_SETTING="DELETE_SETTING",e.READ_SETTINGS="READ_SETTINGS",e.REHYDRATE_STORE_SETTINGS="REHYDRATE_STORE_SETTINGS",e.REHYDRATE_STORE_SETTING="REHYDRATE_STORE_SETTING",e.SET_STORE_SETTINGS="SET_STORE_SETTINGS",e.SET_STORE_SETTING="SET_STORE_SETTING",e))(te||{});const X={createSetting:e=>({type:"CREATE_SETTING",payload:e}),updateSetting:e=>({type:"UPDATE_SETTING",payload:e}),deleteSetting:e=>({type:"DELETE_SETTING",payload:e}),readSettings:e=>({type:"READ_SETTINGS",payload:e}),rehydrateStoreSettings:e=>({type:"REHYDRATE_STORE_SETTINGS",payload:e}),rehydrateStoreSetting:e=>({type:"REHYDRATE_STORE_SETTING",payload:e}),setStoreSettingItems:e=>({type:"SET_STORE_SETTINGS",payload:e}),setStoreSettingItem:e=>({type:"SET_STORE_SETTING",payload:e})},Bc=(e=[],t)=>{switch(t.type){case te.SET_STORE_SETTINGS:{const{data:a}=t.payload;let r=Ce(e);for(const n of a){let s=e.findIndex(c=>c.id===n.id);r[s]?r[s]=n:r.push(n)}return r}case te.SET_STORE_SETTING:{const{data:a}=t.payload,r=e.findIndex(s=>s.id===a.id);if(r<0)return e;const n=Ce(e);return n[r]={...n[r],...a},n}default:return e}};var ca=(e=>(e.SET_STORE_PAGE="SET_STORE_PAGE",e))(ca||{});const ie={setStorePage:e=>({type:"SET_STORE_PAGE",payload:e})},Uc=(e="",t)=>{switch(t.type){case ca.SET_STORE_PAGE:{const{data:a}=t.payload;return a}default:return e}};var fe=(e=>(e.READ_STORE_CREDITS_DASHBOARD_DATA="READ_STORE_CREDITS_DASHBOARD_DATA",e.READ_STORE_CREDITS_HISTORY_DATA="READ_STORE_CREDITS_HISTORY",e.SET_STORE_CREDITS_DASHBOARD_DATA="SET_STORE_CREDITS_DASHBOARD_DATA",e.SET_STORE_CREDITS_HISTORY_DATA="SET_STORE_CREDITS_HISTORY_DATA",e))(fe||{});const Ne={readStoreCreditsDashboardData:e=>({type:"READ_STORE_CREDITS_DASHBOARD_DATA",payload:e}),readStoreCreditsHistoryData:e=>({type:"READ_STORE_CREDITS_HISTORY",payload:e}),setStoreCreditsDashboardData:e=>({type:"SET_STORE_CREDITS_DASHBOARD_DATA",payload:e}),setStoreCreditsHistoryData:e=>({type:"SET_STORE_CREDITS_HISTORY_DATA",payload:e})},jc=(e=null,t)=>{switch(t.type){case fe.SET_STORE_CREDITS_DASHBOARD_DATA:{const{status:a}=t.payload;return{...e,status:a}}case fe.SET_STORE_CREDITS_HISTORY_DATA:{const{data:a}=t.payload;return{...e,history:a}}default:return e}};var re=(e=>(e.READ_STORE_CREDITS_CUSTOMERS="READ_STORE_CREDITS_CUSTOMERS",e.READ_STORE_CREDITS_CUSTOMER_STATUS="READ_STORE_CREDITS_CUSTOMER_STATUS",e.READ_STORE_CREDITS_CUSTOMER_ENTRIES="READ_STORE_CREDITS_CUSTOMER_ENTRIES",e.ADJUST_CUSTOMER_STORE_CREDITS="ADJUST_CUSTOMER_STORE_CREDITS",e.SET_STORE_CREDITS_CUSTOMERS="SET_STORE_CREDITS_CUSTOMERS",e.SET_STORE_CREDITS_CUSTOMER_STATUS="SET_STORE_CREDITS_CUSTOMER_STATUS",e.SET_STORE_CREDITS_CUSTOMER_BALANCE="SET_STORE_CREDITS_CUSTOMER_BALANCE",e))(re||{});const _e={readStoreCreditsCustomers:e=>({type:"READ_STORE_CREDITS_CUSTOMERS",payload:e}),readStoreCreditsCustomerStatus:e=>({type:"READ_STORE_CREDITS_CUSTOMER_STATUS",payload:e}),readStoreCreditsCustomerEntries:e=>({type:"READ_STORE_CREDITS_CUSTOMER_ENTRIES",payload:e}),adjustCustomerStoreCredits:e=>({type:"ADJUST_CUSTOMER_STORE_CREDITS",payload:e}),setStoreCreditsCustomers:e=>({type:"SET_STORE_CREDITS_CUSTOMERS",payload:e}),setStoreCreditsCustomerStatus:e=>({type:"SET_STORE_CREDITS_CUSTOMER_STATUS",payload:e}),setStoreCreditsCustomerBalance:e=>({type:"SET_STORE_CREDITS_CUSTOMER_BALANCE",payload:e})},Fc=(e=[],t)=>{let a;switch(t.type){case re.SET_STORE_CREDITS_CUSTOMERS:const{data:r}=t.payload;return r;case re.SET_STORE_CREDITS_CUSTOMER_STATUS:const{id:n,status:s,sources:c}=t.payload;return a=e.findIndex(i=>i.id===n),e[a]={...e[a],status:s,sources:c},[...e];case re.SET_STORE_CREDITS_CUSTOMER_BALANCE:const{balance:o,balance_raw:d}=t.payload;return a=e.findIndex(i=>i.id===t.payload.id),e[a]={...e[a],balance:o,balance_raw:d,status:[],sources:[]},[...e];default:return e}};var tt=(e=>(e.READ_DASHBOARD_WIDGETS_DATA="READ_DASHBOARD_WIDGETS_DATA",e.SET_DASHBOARD_WIDGETS_DATA="SET_DASHBOARD_WIDGETS_DATA",e))(tt||{});const oa={readDashboardWidgetsData:e=>({type:"READ_DASHBOARD_WIDGETS_DATA",payload:e}),setDashboardWidgetsData:e=>({type:"SET_DASHBOARD_WIDGETS_DATA",payload:e})},Gc=(e=null,t)=>{switch(t.type){case tt.SET_DASHBOARD_WIDGETS_DATA:{const{widgets:a}=t.payload;return a}default:return e}};var be=(e=>(e.READ_ADMIN_NOTICES="READ_ADMIN_NOTICES",e.SET_ADMIN_NOTICES="SET_ADMIN_NOTICES",e.DISMISS_ADMIN_NOTICE="DISMISS_ADMIN_NOTICE",e.READ_ADMIN_NOTICE="READ_ADMIN_NOTICE",e))(be||{});const at={readAdminNotices:e=>({type:"READ_ADMIN_NOTICES",payload:e}),setAdminNotices:e=>({type:"SET_ADMIN_NOTICES",payload:e}),dismissAdminNotice:e=>({type:"DISMISS_ADMIN_NOTICE",payload:e}),readAdminNotice:e=>({type:"READ_ADMIN_NOTICE",payload:e})},Hc=(e=[],t)=>{switch(t.type){case be.SET_ADMIN_NOTICES:{const{notices:a}=t.payload;return a}case be.DISMISS_ADMIN_NOTICE:{const{slug:a}=t.payload;return e.filter(n=>n.slug!==a)}default:return e}};var F=(e=>(e.READ_COUPON_TEMPLATES="READ_COUPON_TEMPLATES",e.READ_COUPON_TEMPLATE="READ_COUPON_TEMPLATE",e.READ_RECENT_COUPON_TEMPLATES="READ_RECENT_COUPON_TEMPLATES",e.READ_COUPON_TEMPLATE_CATEGORIES="READ_COUPON_TEMPLATE_CATEGORIES",e.READ_COUPON_TEMPLATE_CATEGORY="READ_COUPON_TEMPLATE_CATEGORY",e.CREATE_COUPON_FROM_TEMPLATE="CREATE_COUPON_FROM_TEMPLATE",e.DELETE_RECENT_COUPON_TEMPLATE="DELETE_RECENT_COUPON_TEMPLATE",e.SET_COUPON_TEMPLATES="SET_COUPON_TEMPLATES",e.SET_COUPON_TEMPLATE_CATEGORIES="SET_COUPON_TEMPLATE_CATEGORIES",e.UNSET_RECENT_COUPON_TEMPLATE="UNSET_RECENT_COUPON_TEMPLATE",e.SET_COUPON_TEMPLATES_LOADING="SET_COUPON_TEMPLATES_LOADING",e.SET_EDIT_COUPON_TEMPLATE="SET_EDIT_COUPON_TEMPLATE",e.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE="SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",e.VALIDATE_EDIT_COUPON_TEMPLATE_DATA="VALIDATE_EDIT_COUPON_TEMPLATE_DATA",e.SET_COUPON_CREATED_RESPONSE_DATA="SET_COUPON_CREATED_RESPONSE_DATA",e.CLEAR_COUPON_CREATED_RESPONSE_DATA="CLEAR_COUPON_CREATED_RESPONSE_DATA",e.TOGGLE_PREMIUM_MODAL="TOGGLE_PREMIUM_MODAL",e))(F||{});const q={readCouponTemplates:e=>({type:"READ_COUPON_TEMPLATES",payload:e}),readCouponTemplate:e=>({type:"READ_COUPON_TEMPLATE",payload:e}),readRecentCouponTemplates:e=>({type:"READ_RECENT_COUPON_TEMPLATES",payload:e}),readCouponTemplateCategories:e=>({type:"READ_COUPON_TEMPLATE_CATEGORIES",payload:e}),readCouponTemplateCategory:e=>({type:"READ_COUPON_TEMPLATE_CATEGORY",payload:e}),createCouponFromTemplate:e=>({type:"CREATE_COUPON_FROM_TEMPLATE",payload:e}),deleteRecentCouponTemplate:e=>({type:"DELETE_RECENT_COUPON_TEMPLATE",payload:e}),setCouponTemplates:e=>({type:"SET_COUPON_TEMPLATES",payload:e}),setCouponTemplateCategories:e=>({type:"SET_COUPON_TEMPLATE_CATEGORIES",payload:e}),unsetRecentCouponTemplate:e=>({type:"UNSET_RECENT_COUPON_TEMPLATE",payload:e}),setCouponTemplatesLoading:e=>({type:"SET_COUPON_TEMPLATES_LOADING",payload:e}),setEditCouponTemplate:e=>({type:"SET_EDIT_COUPON_TEMPLATE",payload:e}),setEditCouponTemplateFieldValue:e=>({type:"SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE",payload:e}),validateEditCouponTemplateData:()=>({type:"VALIDATE_EDIT_COUPON_TEMPLATE_DATA"}),setCreatedCouponResponseData:e=>({type:"SET_COUPON_CREATED_RESPONSE_DATA",payload:e}),clearCreatedCouponResponseData:()=>({type:"CLEAR_COUPON_CREATED_RESPONSE_DATA"}),togglePremiumModal:e=>({type:"TOGGLE_PREMIUM_MODAL",payload:e})},Vc=(e={loading:!1,templates:[],recent:[],review:[],edit:null,categories:[],formResponse:null,premiumModal:!1},t)=>{let a;switch(t.type){case F.SET_COUPON_TEMPLATES:{const{data:r,type:n="main"}=t.payload;switch(n){case"main":return{...e,templates:r};case"recent":return{...e,recent:r};case"review":return{...e,review:r}}}case F.SET_COUPON_TEMPLATE_CATEGORIES:{const{data:r}=t.payload;return{...e,categories:r}}case F.UNSET_RECENT_COUPON_TEMPLATE:{const{id:r}=t.payload,n=[...e.recent];return a=n.findIndex(s=>s.id===r),n.splice(a,1),{...e,recent:n}}case F.SET_COUPON_TEMPLATES_LOADING:{const{loading:r}=t.payload;return{...e,loading:r}}case F.SET_EDIT_COUPON_TEMPLATE:{const{data:r}=t.payload;return{...e,edit:r}}case F.SET_EDIT_COUPON_TEMPLATE_FIELD_VALUE:{const{field:r,value:n}=t.payload,s={...e.edit};if(!s||!s.fields)return e;const c=s.fields.findIndex(o=>o.field===r);return c>-1&&(s.fields[c].value=n),{...e,edit:{...s}}}case F.VALIDATE_EDIT_COUPON_TEMPLATE_DATA:{const r={...e.edit};if(!r||!r.fields)return e;const n=r.fields.map(s=>(s.is_required&&!s.value?s.error="This field is required":s.error=void 0,s));return{...e,edit:{...r,fields:n}}}case F.SET_COUPON_CREATED_RESPONSE_DATA:{const{data:r}=t.payload;return{...e,formResponse:r}}case F.CLEAR_COUPON_CREATED_RESPONSE_DATA:{const r={...e.edit};return r.fields=r.fields.map(n=>{var s;return n.value=(s=n.pre_filled_value)!=null?s:"",n}),{...e,formResponse:null,edit:null}}case F.TOGGLE_PREMIUM_MODAL:{const{show:r}=t.payload;return{...e,premiumModal:r}}}return e};(function(){(function(e){(function(t){var a={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(u){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function r(u){return u&&DataView.prototype.isPrototypeOf(u)}if(a.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(u){return u&&n.indexOf(Object.prototype.toString.call(u))>-1};function c(u){if(typeof u!="string"&&(u=String(u)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(u))throw new TypeError("Invalid character in header field name");return u.toLowerCase()}function o(u){return typeof u!="string"&&(u=String(u)),u}function d(u){var E={next:function(){var S=u.shift();return{done:S===void 0,value:S}}};return a.iterable&&(E[Symbol.iterator]=function(){return E}),E}function i(u){this.map={},u instanceof i?u.forEach(function(E,S){this.append(S,E)},this):Array.isArray(u)?u.forEach(function(E){this.append(E[0],E[1])},this):u&&Object.getOwnPropertyNames(u).forEach(function(E){this.append(E,u[E])},this)}i.prototype.append=function(u,E){u=c(u),E=o(E);var S=this.map[u];this.map[u]=S?S+", "+E:E},i.prototype.delete=function(u){delete this.map[c(u)]},i.prototype.get=function(u){return u=c(u),this.has(u)?this.map[u]:null},i.prototype.has=function(u){return this.map.hasOwnProperty(c(u))},i.prototype.set=function(u,E){this.map[c(u)]=o(E)},i.prototype.forEach=function(u,E){for(var S in this.map)this.map.hasOwnProperty(S)&&u.call(E,this.map[S],S,this)},i.prototype.keys=function(){var u=[];return this.forEach(function(E,S){u.push(S)}),d(u)},i.prototype.values=function(){var u=[];return this.forEach(function(E){u.push(E)}),d(u)},i.prototype.entries=function(){var u=[];return this.forEach(function(E,S){u.push([S,E])}),d(u)},a.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);function m(u){if(u.bodyUsed)return Promise.reject(new TypeError("Already read"));u.bodyUsed=!0}function p(u){return new Promise(function(E,S){u.onload=function(){E(u.result)},u.onerror=function(){S(u.error)}})}function _(u){var E=new FileReader,S=p(E);return E.readAsArrayBuffer(u),S}function g(u){var E=new FileReader,S=p(E);return E.readAsText(u),S}function y(u){for(var E=new Uint8Array(u),S=new Array(E.length),P=0;P<E.length;P++)S[P]=String.fromCharCode(E[P]);return S.join("")}function h(u){if(u.slice)return u.slice(0);var E=new Uint8Array(u.byteLength);return E.set(new Uint8Array(u)),E.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(u){this._bodyInit=u,u?typeof u=="string"?this._bodyText=u:a.blob&&Blob.prototype.isPrototypeOf(u)?this._bodyBlob=u:a.formData&&FormData.prototype.isPrototypeOf(u)?this._bodyFormData=u:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(u)?this._bodyText=u.toString():a.arrayBuffer&&a.blob&&r(u)?(this._bodyArrayBuffer=h(u.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(u)||s(u))?this._bodyArrayBuffer=h(u):this._bodyText=u=Object.prototype.toString.call(u):this._bodyText="",this.headers.get("content-type")||(typeof u=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(u)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var u=m(this);if(u)return u;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var u=m(this);if(u)return u;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(u){var E=u.toUpperCase();return v.indexOf(E)>-1?E:u}function T(u,E){E=E||{};var S=E.body;if(u instanceof T){if(u.bodyUsed)throw new TypeError("Already read");this.url=u.url,this.credentials=u.credentials,E.headers||(this.headers=new i(u.headers)),this.method=u.method,this.mode=u.mode,this.signal=u.signal,!S&&u._bodyInit!=null&&(S=u._bodyInit,u.bodyUsed=!0)}else this.url=String(u);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new i(E.headers)),this.method=O(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(S)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function R(u){var E=new FormData;return u.trim().split("&").forEach(function(S){if(S){var P=S.split("="),j=P.shift().replace(/\+/g," "),A=P.join("=").replace(/\+/g," ");E.append(decodeURIComponent(j),decodeURIComponent(A))}}),E}function C(u){var E=new i,S=u.replace(/\r?\n[\t ]+/g," ");return S.split(/\r?\n/).forEach(function(P){var j=P.split(":"),A=j.shift().trim();if(A){var ue=j.join(":").trim();E.append(A,ue)}}),E}w.call(T.prototype);function b(u,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new i(E.headers),this.url=E.url||"",this._initBody(u)}w.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},b.error=function(){var u=new b(null,{status:0,statusText:""});return u.type="error",u};var k=[301,302,303,307,308];b.redirect=function(u,E){if(k.indexOf(E)===-1)throw new RangeError("Invalid status code");return new b(null,{status:E,headers:{location:u}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(u){t.DOMException=function(E,S){this.message=E,this.name=S;var P=Error(E);this.stack=P.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function G(u,E){return new Promise(function(S,P){var j=new T(u,E);if(j.signal&&j.signal.aborted)return P(new t.DOMException("Aborted","AbortError"));var A=new XMLHttpRequest;function ue(){A.abort()}A.onload=function(){var ee={status:A.status,statusText:A.statusText,headers:C(A.getAllResponseHeaders()||"")};ee.url="responseURL"in A?A.responseURL:ee.headers.get("X-Request-URL");var $e="response"in A?A.response:A.responseText;S(new b($e,ee))},A.onerror=function(){P(new TypeError("Network request failed"))},A.ontimeout=function(){P(new TypeError("Network request failed"))},A.onabort=function(){P(new t.DOMException("Aborted","AbortError"))},A.open(j.method,j.url,!0),j.credentials==="include"?A.withCredentials=!0:j.credentials==="omit"&&(A.withCredentials=!1),"responseType"in A&&a.blob&&(A.responseType="blob"),j.headers.forEach(function(ee,$e){A.setRequestHeader($e,ee)}),j.signal&&(j.signal.addEventListener("abort",ue),A.onreadystatechange=function(){A.readyState===4&&j.signal.removeEventListener("abort",ue)}),A.send(typeof j._bodyInit>"u"?null:j._bodyInit)})}return G.polyfill=!0,e.fetch||(e.fetch=G,e.Headers=i,e.Request=T,e.Response=b),t.Headers=i,t.Request=T,t.Response=b,t.fetch=G,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:Ra)})();const Yc=axios.CancelToken,x=axios.create({baseURL:wpApiSettings.root,timeout:0,headers:{"X-WP-Nonce":wpApiSettings.nonce,"X-ACFW-Context":"admin"}}),xe=new Map,De=e=>{const t=xe.get(e);t&&(t(),xe.delete(e))},J=e=>new Yc(t=>xe.set(e,t));function*qc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload,s=t||"general_section";try{typeof a=="function"&&a();const c=yield U(()=>x.get("coupons/v1/settings/sections",{headers:{section:s}}));if(c&&c.data){const o=s?c.data.findIndex(d=>d.id===s):0;yield B(X.rehydrateStoreSettings({data:c.data[o]})),yield B(Oe.setStoreSectionItems({data:c.data})),typeof r=="function"&&r(c)}}catch(c){typeof n=="function"&&n({error:c})}}function*zc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=t||"general_section",c=yield U(()=>x.get("coupons/v1/settings/sections/".concat(s)));c&&c.data&&(yield B(X.rehydrateStoreSettings({data:c.data})),yield B(Oe.setStoreSectionItem({data:c.data})),typeof r=="function"&&r(c))}catch(s){typeof n=="function"&&n({error:s})}}const Kc=[L(de.READ_SECTIONS,qc),L(de.READ_SECTION,zc)];function*Wc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.post("coupons/v1/setting/sections",t));s&&s.data&&(yield B(X.rehydrateStoreSettings({})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s,payload:t})}}function*Qc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),!t.id)throw new Error("Can not update survey. No survey id provided.");const s=yield U(()=>{const{id:c,...o}=t;return x.put("coupons/v1/settings/".concat(c),o)});s&&s.data&&(yield B(X.rehydrateStoreSetting({id:s.data.id,data:s.data})),t.type==="module"&&(yield B(Oe.toggleModuleSection({module:t.id,show:t.value==="yes"}))),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s,payload:t})}}function*Jc(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.delete("coupons/v1/settings/".concat(t)));s&&s.data&&(yield B(X.rehydrateStoreSettings({})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*Xc(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/settings/"));n&&n.data&&(yield B(X.rehydrateStoreSettings({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*Zc(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),t){let s=t.fields.filter(c=>c.type!=="title"&&c.type!=="sectionend");s=s.map(c=>({id:c.id,value:c.value})),yield B(X.setStoreSettingItems({data:s})),typeof r=="function"&&r(s)}}catch(s){typeof n=="function"&&n({error:s})}}function*eo(e){const{id:t,data:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{if(typeof r=="function"&&r(),a)yield B(X.setStoreSettingItem({data:a})),typeof n=="function"&&n(a);else{const c=yield U(()=>x.get("coupons/v1/settings/".concat(t)));c&&c.data&&(yield B(X.setStoreSettingItem({data:c.data})),typeof n=="function"&&n(c))}}catch(c){typeof s=="function"&&s({error:c})}}const to=[L(te.CREATE_SETTING,Wc),L(te.UPDATE_SETTING,Qc),L(te.DELETE_SETTING,Jc),L(te.READ_SETTINGS,Xc),L(te.REHYDRATE_STORE_SETTINGS,Zc),L(te.REHYDRATE_STORE_SETTING,eo)];function*ao(e){const{startPeriod:t,endPeriod:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("store-credits/v1/customers/status",{params:{startPeriod:t,endPeriod:a},cancelToken:J("scdashboard")}));c&&c.data&&(yield B(Ne.setStoreCreditsDashboardData({status:c.data})),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}function*no(e){const{page:t,startPeriod:a,endPeriod:r,processingCB:n,successCB:s,failCB:c}=e.payload;try{typeof n=="function"&&n();const o=yield U(()=>x.get("store-credits/v1/entries",{params:{page:t,startPeriod:a,endPeriod:r,is_admin:!0}}));o&&o.data&&B&&(yield B(Ne.setStoreCreditsHistoryData({data:o.data})),typeof s=="function"&&s(o))}catch(o){typeof c=="function"&&c({error:o})}}const ro=[L(fe.READ_STORE_CREDITS_DASHBOARD_DATA,ao),L(fe.READ_STORE_CREDITS_HISTORY_DATA,no)];function*so(e){const{params:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("store-credits/v1/customers",{params:t,cancelToken:J("customer_search")}));s&&s.data&&(yield B(_e.setStoreCreditsCustomers({data:s.data})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*co(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{if(typeof a=="function"&&a(),!t)throw new Error("Can't fetch data. No customer ID was provided.");const s=yield U(()=>x.get("store-credits/v1/customers/".concat(t)));s&&s.data&&(yield B(_e.setStoreCreditsCustomerStatus({id:t,status:s.data.status,sources:s.data.sources})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*oo(e){const{id:t,page:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{if(typeof r=="function"&&r(),!t)throw new Error("Can't fetch data. No customer ID was provided.");const c=yield U(()=>x.get("store-credits/v1/entries",{params:{user_id:t,page:a!=null?a:1,is_admin:!0}}));c&&c.data&&typeof n=="function"&&n(c)}catch(c){typeof s=="function"&&s({error:c})}}function*lo(e){const{id:t,type:a,amount:r,processingCB:n,successCB:s,failCB:c}=e.payload;try{if(typeof n=="function"&&n(),!t)throw new Error("Can't adjust store credits. No customer ID was provided.");const o=yield U(()=>x.post("store-credits/v1/entries",{user_id:t,type:a,amount:r,action:"admin_".concat(a)}));o&&o.data&&typeof s=="function"&&s(o)}catch(o){typeof c=="function"&&c({error:o})}}const io=[L(re.READ_STORE_CREDITS_CUSTOMERS,so),L(re.READ_STORE_CREDITS_CUSTOMER_STATUS,co),L(re.READ_STORE_CREDITS_CUSTOMER_ENTRIES,oo),L(re.ADJUST_CUSTOMER_STORE_CREDITS,lo)];function*uo(e){const{startPeriod:t,endPeriod:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("coupons/v1/reports",{params:{startPeriod:t,endPeriod:a},cancelToken:J("dashboardwidgets")}));c&&c.data&&(yield B(oa.setDashboardWidgetsData({widgets:c.data})),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}const mo=[L(tt.READ_DASHBOARD_WIDGETS_DATA,uo)];function*po(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/reports/notices"));n&&n.data&&(yield B(at.setAdminNotices({notices:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}const fo=[L(be.READ_ADMIN_NOTICES,po)];function*Eo(e){const{isReview:t=!1,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("coupons/v1/templates",{cancelToken:J("coupon_templates"),params:t?{is_review:1}:{}}));s&&s.data&&(yield B(q.setCouponTemplates({data:s.data,type:t?"review":"main"})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*_o(e){const{id:t,isReview:a,processingCB:r,successCB:n,failCB:s}=e.payload;try{typeof r=="function"&&r();const c=yield U(()=>x.get("coupons/v1/templates/".concat(t),{cancelToken:J("coupon_template"),params:a?{is_review:1}:{}}));c&&c.data&&(c.data.fields=c.data.fields.map(o=>{var d;return o.value=(d=o.pre_filled_value)!=null?d:"",o}),typeof n=="function"&&n(c))}catch(c){typeof s=="function"&&s({error:c})}}function*go(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/templates/recent",{cancelToken:J("recent_coupon_templates")}));n&&n.data&&(yield B(q.setCouponTemplates({data:n.data,type:"recent"})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*ho(e){const{processingCB:t,successCB:a,failCB:r}=e.payload;try{typeof t=="function"&&t();const n=yield U(()=>x.get("coupons/v1/templates/categories",{cancelToken:J("coupon_template_categories")}));n&&n.data&&(yield B(q.setCouponTemplateCategories({data:n.data})),typeof a=="function"&&a(n))}catch(n){typeof r=="function"&&r({error:n})}}function*Ro(e){const{slug:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.get("coupons/v1/templates/categories/".concat(t),{cancelToken:J("coupon_template_category")}));s&&s.data&&(yield B(q.setCouponTemplates({data:s.data})),typeof r=="function"&&r(s))}catch(s){typeof n=="function"&&n({error:s})}}function*yo(e){const{data:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.post("coupons/v1/templates",t,{cancelToken:J("coupon_template_create")}));s&&s.data&&typeof r=="function"&&r(s)}catch(s){typeof n=="function"&&n({error:s})}}function*So(e){const{id:t,processingCB:a,successCB:r,failCB:n}=e.payload;try{typeof a=="function"&&a();const s=yield U(()=>x.delete("coupons/v1/templates/recent/".concat(t),{cancelToken:J("coupon_template_delete")}));typeof r=="function"&&r(s)}catch(s){typeof n=="function"&&n({error:s})}}const To=[L(F.READ_COUPON_TEMPLATES,Eo),L(F.READ_COUPON_TEMPLATE,_o),L(F.READ_RECENT_COUPON_TEMPLATES,go),L(F.READ_COUPON_TEMPLATE_CATEGORIES,ho),L(F.READ_COUPON_TEMPLATE_CATEGORY,Ro),L(F.CREATE_COUPON_FROM_TEMPLATE,yo),L(F.DELETE_RECENT_COUPON_TEMPLATE,So)];function*Co(){yield xt([...Kc,...to,...io,...ro,...mo,...fo,...To])}const bo=e=>jt(...e);function wo(e=void 0){const t=Lt(),a=Bt(Ut({sections:Lc,settingValues:Bc,page:Uc,storeCreditsDashboard:jc,storeCreditsCustomers:Fc,dashboardWidgets:Gc,adminNotices:Hc,couponTemplates:Vc}),e,bo([t]));return t.run(Co),a}const nt=e=>{const{hideUpgrade:t}=e,{app_pages:a,premium_page:r}=acfwAdminApp,[n]=a.filter(s=>s.slug==="acfw-premium");return React.createElement("div",{className:"acfw-logo-div"},n?React.createElement(React.Fragment,null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"})),!t&&React.createElement("a",{className:"acfw-header-upgrade-btn",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=upgrade",target:"_blank",rel:"noreferrer"},r.upgrade)):React.createElement("img",{className:"acfw-logo",src:acfwAdminApp.logo,alt:"acfw logo"}))},se=e=>{var n;const{title:t,className:a,description:r}=e;return(n=e.hideUpgrade)!=null,React.createElement("div",{className:"page-header ".concat(a!=null?a:"")},React.createElement(nt,{hideUpgrade:!0}),!!t&&React.createElement("h1",null,t),!!r&&React.createElement("p",null,r))},Ao=()=>{const{admin_url:e,dashboard_page:{create_coupon:t}}=acfwAdminApp;return React.createElement("div",{className:"quick-create-coupon"},React.createElement("span",{className:"label"},"".concat(t.label,":")),React.createElement(D,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=percent"),target:"_blank",size:"small",ghost:!0},t.percentage),React.createElement(D,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=fixed_cart"),target:"_blank",size:"small",ghost:!0},t.fixed),React.createElement(D,{type:"primary",href:"".concat(e,"post-new.php?post_type=shop_coupon&type=acfw_bogo"),target:"_blank",size:"small",ghost:!0},t.bogo))},vo=e=>{const{notice:{slug:t,content:a,type:r,nonce:n,actions:s,is_dismissable:c,is_in_app_notifications:o},onDismiss:d,onRead:i}=e,{dashboard_page:{labels:m}}=acfwAdminApp;return React.createElement(V,{className:"single-notice notice-".concat(r," ").concat(t,"-notice"),onMouseEnter:o?()=>i(t,n):void 0},React.createElement("div",{className:"notice-content"},a.map((p,_)=>React.createElement("p",{key:_,dangerouslySetInnerHTML:{__html:p}}))),React.createElement("div",{className:"notice-actions"},s.map((p,_)=>React.createElement(D,{key:p.key,type:_===0?"primary":"default",href:p.link?p.link.replace(/&amp;/g,"&"):void 0,target:p!=null&&p.is_external?"_blank":void 0,onClick:p!=null&&p.response?()=>d(t,n,p.response):void 0},p.text)),c&&t!=="review_request"&&React.createElement(D,{onClick:()=>d(t,n)},m.dismiss)),c&&React.createElement(D,{className:"dismiss-notice-icon",icon:React.createElement(zt,null),size:"small",type:"text",shape:"circle",onClick:()=>d(t,n,t==="review_request"?"snooze":"dismissed")}))};const{dismissAdminNotice:Oo,readAdminNotice:No}=at,Do=e=>{const{notices:t,actions:a}=e,[r,n]=f.useState(1),[s,c]=f.useState(0),o=f.useRef(null),{dashboard_page:{labels:d}}=acfwAdminApp,i=(p,_,g="yes")=>{a.dismissAdminNotice({slug:p}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_dismiss_admin_notice",notice:p,nonce:_,response:g},dataType:"json"})},m=(p,_)=>{a.readAdminNotice({slug:p}),jQuery.ajax({method:"post",url:ajaxurl,data:{action:"acfw_read_admin_notice",notice:p,nonce:_},dataType:"json"})};return f.useEffect(()=>{t.length&&!window.lodash.isNull(o)&&c(o.current.clientHeight)}),0>=t.length?null:React.createElement("div",{className:"dashboard-notices"},React.createElement("h2",null,d.notices),React.createElement("div",{className:"list-overflow",style:{height:0<s?s+5:"auto"}},React.createElement("div",{className:"notices-list",ref:o},t.slice(0,r).map(p=>React.createElement(vo,{key:p.slug,notice:p,onRead:m,onDismiss:i})))),1<t.length&&React.createElement(ae,null,React.createElement(D,{className:"toggle-view-all",size:"small",type:"primary",onClick:()=>n(1>=r?t.length:1),ghost:!0},1>=r?d.view_all:d.hide)))},Po=e=>({notices:e.adminNotices}),Io=e=>({actions:$({dismissAdminNotice:Oo,readAdminNotice:No},e)}),$o=I(Po,Io)(Do),la=()=>React.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{clipPath:"url(#clip0_559_38)"},React.createElement("path",{d:"M7.5 1.875C7.5 1.35732 7.91895 0.9375 8.4375 0.9375H12.1611C12.3135 0.9375 12.4365 0.962695 12.5449 1.00869C12.6299 1.0541 12.7588 1.12119 12.8496 1.20996C12.8496 1.21143 12.8496 1.21289 12.8525 1.21406C13.0342 1.39629 13.0986 1.63418 13.125 1.87207C13.125 1.87324 13.125 1.87412 13.125 1.875V5.625C13.125 6.14355 12.7061 6.5625 12.1875 6.5625C11.6689 6.5625 11.25 6.14355 11.25 5.625V4.13965L6.28711 9.09961C5.9209 9.46582 5.3291 9.46582 4.96289 9.09961C4.59668 8.7334 4.59668 8.1416 4.96289 7.77539L9.92285 2.8125H8.4375C7.91895 2.8125 7.5 2.39268 7.5 1.875ZM0 3.75C0 2.71436 0.839356 1.875 1.875 1.875H4.6875C5.20605 1.875 5.625 2.29482 5.625 2.8125C5.625 3.33105 5.20605 3.75 4.6875 3.75H1.875V12.1875H10.3125V9.375C10.3125 8.85645 10.7314 8.4375 11.25 8.4375C11.7686 8.4375 12.1875 8.85645 12.1875 9.375V12.1875C12.1875 13.2217 11.3467 14.0625 10.3125 14.0625H1.875C0.839356 14.0625 0 13.2217 0 12.1875V3.75Z",fill:"#4A86FB"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0_559_38"},React.createElement("rect",{width:"13.125",height:"15",fill:"white"})))),ia=e=>{const{content:t}=e;return React.createElement("span",{className:"tooltip"},React.createElement(Ke,{overlayClassName:"dashboard-tooltip",placement:"top",content:React.createElement("span",{dangerouslySetInnerHTML:{__html:t}}),trigger:"click"},React.createElement(Fa,null)))},ko=e=>{var n;const{widget:t,onClickLink:a}=e,r=(n=t.page_link)!=null?n:!1;return React.createElement(V,{className:"widget big-number-widget"},React.createElement("p",{className:"title"},React.createElement("span",{className:"widget-value",dangerouslySetInnerHTML:{__html:t.title_html}}),t!=null&&t.tooltip_html?React.createElement(ia,{content:t.tooltip_html}):null),React.createElement("p",{className:"description"},React.createElement("span",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.description_html}}),r?React.createElement("a",{onClick:()=>a(r),href:"javascript:void(0);"},React.createElement(la,null)):null))},Mo=e=>{const{widget:t}=e,{dashboard_page:{labels:a,coupons_list_link:r},admin_url:n}=acfwAdminApp,s=[{title:a.coupon,dataIndex:"coupon",key:"coupon",render:(c,o)=>React.createElement("a",{href:"".concat(n,"post.php?post=").concat(o.id,"&action=edit"),target:"_blank",rel:"noreferrer"},c)},{title:a.uses,dataIndex:"usage_total",key:"usage_total"},{title:React.createElement(React.Fragment,null,React.createElement("span",{className:"discounted-label"},a.discounted),t!=null&&t.tooltip_html?React.createElement(ia,{content:t.tooltip_html}):null),dataIndex:"discount_total",key:"discount_total"}];return React.createElement("div",{className:"widget coupon-table-widget"},React.createElement("div",{className:"widget-header"},React.createElement("h3",{className:"widget-name",dangerouslySetInnerHTML:{__html:t.title_html}}),React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(la,null))),t.table_data&&React.createElement(le,{bordered:!0,dataSource:t.table_data,columns:s,pagination:!1}))},xo=e=>{const{widget:t}=e;return React.createElement(V,{className:"widget upsell-widget"},React.createElement("p",{className:"title widget-name",dangerouslySetInnerHTML:{__html:t.title_html}}),React.createElement("p",{className:"description",dangerouslySetInnerHTML:{__html:t.description_html}}))},Z=function(){return acfwAdminApp.admin_url.replace(location.origin,"")},ua=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e),Lo=e=>{let t=window.moment().startOf("month"),a=window.moment().startOf("day");switch(e){case"week_to_date":t=window.moment().startOf("week"),a=window.moment().startOf("day");break;case"month_to_date":t=window.moment().startOf("month"),a=window.moment().startOf("day");break;case"quarter_to_date":t=window.moment().startOf("quarter"),a=window.moment().startOf("day");break;case"year_to_date":t=window.moment().startOf("year"),a=window.moment().startOf("day");break;case"last_week":t=window.moment().subtract(1,"weeks").startOf("week"),a=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":t=window.moment().subtract(1,"months").startOf("month"),a=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":t=window.moment().subtract(1,"quarters").startOf("quarter"),a=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":t=window.moment().subtract(1,"years").startOf("year"),a=window.moment().subtract(1,"years").endOf("year");break}return[t,a]};function da(e){return e.type==="increase"?"+":"-"}const{setStorePage:Bo}=ie,Uo=e=>{const{widgets:t,actions:a}=e,r=Q(),n=s=>{r.push("".concat(Z(),"admin.php?page=").concat(s)),a.setStorePage({data:s})};return t?React.createElement("div",{className:"report-widgets"},t.map(s=>{switch(s.type){case"big_number":return React.createElement(ko,{key:s.key,widget:s,onClickLink:n});case"table":return React.createElement(Mo,{key:s.key,widget:s});case"upsell":return React.createElement(xo,{key:s.key,widget:s});case"section_title":return React.createElement("h2",{key:s.key,className:"section-title"},s.title_html)}return null})):null},jo=e=>({actions:$({setStorePage:Bo},e)}),Fo=I(null,jo)(Uo),Go=e=>{const{store_credits_page:{labels:t,period_options:a}}=acfwAdminApp,{className:r,periodValue:n,startPeriod:s,endPeriod:c,onPeriodChange:o,onCustomDateRange:d}=e;return React.createElement("div",{className:"report-date-range-picker ".concat(r)},React.createElement(W,{value:n,onSelect:o},a.map((i,m)=>React.createElement(W.Option,{key:m,value:i.value},i.label))),React.createElement(We.RangePicker,{value:[s,c],onChange:d}))},Ho=()=>React.createElement("div",{className:"report-widgets"},[...Array(8)].map((e,t)=>React.createElement(V,{key:t,className:"widget widget-skeleton"},React.createElement(z,{active:!0})))),Le=e=>{const{iconKey:t}=e;return t==="getting_started"?React.createElement(Qt,null):t==="documentation"?React.createElement(Qa,null):t==="settings"?React.createElement(Jt,null):t==="support"?React.createElement(Qe,null):t==="active"?React.createElement(Ja,null):t==="inactive"?React.createElement(Xa,null):t==="expired"?React.createElement(Za,null):t==="learn_more"?React.createElement(Xt,null):null},Vo=e=>{const{slug:t,label:a,link:r,onClick:n}=e;return r.includes("http")?React.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},React.createElement(Le,{iconKey:t}),a):React.createElement("a",{onClick:()=>n&&n(r),href:"javascript:void(0);"},React.createElement(Le,{iconKey:t}),a)},Yo=e=>{const{name:t,campaign:a,status:r}=e,{dashboard_page:{labels:n}}=acfwAdminApp;let s;if(r==="learn_more"){const c="https://advancedcouponsplugin.com/pricing/?tab=premium&utm_source=acfwf&utm_medium=dashboard&utm_campaign=".concat(a);s='<a class="'.concat(r,'" href="').concat(c,'" target="_blank" href="javascript:void(0);">').concat(n[r],"</a>")}else s='<span class="plugin-status '.concat(r,'">').concat(n[r],"</span>");return React.createElement(React.Fragment,null,React.createElement(Le,{iconKey:r}),React.createElement("span",{className:"plugin-name",dangerouslySetInnerHTML:{__html:"".concat(t," (").concat(s,")")}}))},{setStorePage:qo}=ie,zo=Z(),Ko=e=>{const{actions:t}=e,a=Q(),[r,n]=f.useState([]),[s,c]=f.useState(!0),{dashboard_page:{labels:o,resources_links:d}}=acfwAdminApp;f.useEffect(()=>{x.get("coupons/v1/reports/license").then(m=>{n(m.data),c(!1)})},[]);const i=m=>{a.push("".concat(zo,"admin.php?page=").concat(m)),t.setStorePage({data:m})};return React.createElement("div",{className:"sidebar-inner"},React.createElement(ge,{className:"resources-section sidebar-section",header:React.createElement("h2",null,"".concat(o.helpful_resources,":")),dataSource:d,renderItem:m=>React.createElement(ge.Item,{key:m.key},React.createElement(Vo,{...m,onClick:i}))}),React.createElement(ge,{className:"plugins-section sidebar-section",header:React.createElement("h2",null,"".concat(o.license_activation_status,":")),loading:s,dataSource:r,renderItem:m=>React.createElement(ge.Item,{key:m.key},React.createElement(Yo,{...m}))}),React.createElement("p",{className:"view-licenses"},React.createElement("a",{onClick:()=>i("acfw-license")},o.view_licenses)))},Wo=e=>({actions:$({setStorePage:qo},e)}),Qo=I(null,Wo)(Ko);const{readDashboardWidgetsData:Jo}=oa,Xo=e=>{const{widgets:t,actions:a}=e,[r,n]=f.useState("month_to_date"),[s,c]=f.useState(window.moment().startOf("month")),[o,d]=f.useState(window.moment().startOf("day")),[i,m]=f.useState(!1),{dashboard_page:{title:p}}=acfwAdminApp;f.useEffect(()=>{m(!0),De("dashboardwidgets"),a.readDashboardWidgetsData({startPeriod:s.format("YYYY-MM-DD"),endPeriod:o.format("YYYY-MM-DD"),successCB:()=>m(!1)})},[s,o]);const _=y=>{if(y===r)return;const[h,w]=Lo(y);n(y),c(h),d(w)},g=y=>{var h,w;y&&(c((h=y[0])!=null?h:""),d((w=y[1])!=null?w:""),n("custom"))};return React.createElement("div",{className:"dashboard-page"},React.createElement(se,{title:p,className:"dashboard-header"}),React.createElement(H,{gutter:16},React.createElement(N,{className:"dashboard-content",span:18},React.createElement($o,null),React.createElement(Ao,null),React.createElement(Go,{periodValue:r,startPeriod:s,endPeriod:o,onPeriodChange:_,onCustomDateRange:g}),i?React.createElement(Ho,null):React.createElement(Fo,{widgets:t})),React.createElement(N,{className:"dashboard-sidebar",span:6},React.createElement(Qo,null))))},Zo=e=>({widgets:e.dashboardWidgets}),el=e=>({actions:$({readDashboardWidgetsData:Jo},e)}),tl=I(Zo,el)(Xo),{readStoreCreditsHistoryData:al}=Ne,nl=e=>{const{entries:t,actions:a,filter:r}=e,{store_credits_page:{labels:n}}=acfwAdminApp,[s,c]=f.useState(1),[o,d]=f.useState(!0),[i,m]=f.useState(0),{beforeDate:p,afterDate:_}=r;f.useEffect(()=>{d(!0),a.readStoreCreditHistory({page:s,startPeriod:p.format("YYYY-MM-DD"),endPeriod:_.format("YYYY-MM-DD"),successCB:y=>{m(y.headers["x-total"]),d(!1)}})},[s,p,_]),f.useEffect(()=>{t&&t.length&&d(!1)},[t,d]);const g=[{title:n.customer_name,dataIndex:"customer_name",key:"customer_name"},{title:n.email,dataIndex:"customer_email",key:"customer_email"},{title:n.amount,dataIndex:"amount",key:"amount",render:(y,h)=>"".concat(da(h)).concat(y)},{title:n.activity,dataIndex:"activity",key:"activity"},{title:n.related,dataIndex:"rel_label",key:"rel_label",render:(y,h)=>h.rel_link?React.createElement("a",{href:h.rel_link,target:"_blank"},y):y},{title:n.date,dataIndex:"date",key:"date"}];return React.createElement(V,{className:"acfw-dashboard-history",title:n.history},React.createElement(le,{loading:o,pagination:!1,dataSource:t,columns:g}),i>10&&React.createElement(Ae,{disabled:o,current:s,total:i,onChange:c,showSizeChanger:!1}))},rl=e=>{var t;return{entries:(t=e.storeCreditsDashboard)==null?void 0:t.history}},sl=e=>({actions:$({readStoreCreditHistory:al},e)}),cl=I(rl,sl)(nl);const{readStoreCreditsDashboardData:ol}=Ne,ll=e=>{const{status:t,actions:a}=e,{store_credits_page:{labels:r,period_options:n}}=acfwAdminApp,[s,c]=f.useState(!1),[o,d]=f.useState("month_to_date"),[i,m]=f.useState(window.moment().startOf("month")),[p,_]=f.useState(window.moment().startOf("day")),[g,y]=f.useState({periodValue:"month_to_date",beforeDate:window.moment().startOf("month"),afterDate:window.moment().startOf("day")}),h=T=>{y(T)},w=[{title:r.statistics,dataIndex:"label",key:"label"},{title:r.amount,dataIndex:"amount",key:"amount"}];f.useEffect(()=>{c(!0),De("scdashboard"),a.readDashboardData({startPeriod:i.format("YYYY-MM-DD"),endPeriod:p.format("YYYY-MM-DD"),successCB:()=>c(!1)})},[i,p]);const v=T=>{d(T);let R,C;switch(T){case"week_to_date":R=window.moment().startOf("week"),C=window.moment().startOf("day");break;case"month_to_date":R=window.moment().startOf("month"),C=window.moment().startOf("day");break;case"quarter_to_date":R=window.moment().startOf("quarter"),C=window.moment().startOf("day");break;case"year_to_date":R=window.moment().startOf("year"),C=window.moment().startOf("day");break;case"last_week":R=window.moment().subtract(1,"weeks").startOf("week"),C=window.moment().subtract(1,"weeks").endOf("week");break;case"last_month":R=window.moment().subtract(1,"months").startOf("month"),C=window.moment().subtract(1,"months").endOf("month");break;case"last_quarter":R=window.moment().subtract(1,"quarters").startOf("quarter"),C=window.moment().subtract(1,"quarters").endOf("quarter");break;case"last_year":R=window.moment().subtract(1,"years").startOf("year"),C=window.moment().subtract(1,"years").endOf("year");break;default:R=window.moment().startOf("day"),C=window.moment().startOf("day");break}m(R),_(C),h({periodValue:T,beforeDate:R,afterDate:C})},O=T=>{m(T[0]),_(T[1]),d("custom"),h({periodValue:"custom",beforeDate:T[0],afterDate:T[1]})};return React.createElement(React.Fragment,null,React.createElement("div",{className:"store-credits-period-selector"},React.createElement(W,{value:o,onSelect:v},n.map(T=>React.createElement(W.Option,{value:T.value},T.label))),React.createElement(We.RangePicker,{value:[i,p],onChange:O})),React.createElement(V,{title:r.status},React.createElement(le,{loading:s,pagination:!1,dataSource:t,columns:w})),React.createElement(ae,null),React.createElement(cl,{filter:g}))},il=e=>{var t;return{status:(t=e.storeCreditsDashboard)==null?void 0:t.status}},ul=e=>({actions:$({readDashboardData:ol},e)}),dl=I(il,ul)(ll),ml=(e,t)=>{switch(t.type){case"SET_PAGE":return{...e,page:t.value};case"SET_PER_PAGE":return{...e,per_page:t.value};case"SET_SEARCH":return{...e,search:t.value,page:1};case"SET_SORT_BY":return{...e,sort_by:t.value};case"SET_SORT_ORDER":return{...e,sort_order:t.value};case"SET_META_KEY":return{...e,meta_key:t.value};case"SET_QUERY":return t.value}return e},ma=f.createContext({params:{page:1},dispatchParams:e=>{}}),pl=({children:e})=>{const t={page:1},[a,r]=f.useReducer(ml,t);return React.createElement(ma.Provider,{value:{params:a,dispatchParams:r}},e)},fl=e=>{const{status:t}=e,[a,r]=f.useState(!0),{store_credits_page:{labels:n}}=acfwAdminApp,s=[{title:n.statistics,dataIndex:"label",key:"label"},{title:n.amount,dataIndex:"amount",key:"amount"}];return f.useEffect(()=>{t&&t.length?r(!1):r(!0)},[t,r]),React.createElement(V,{className:"customer-status",title:n.status},React.createElement(le,{loading:a,pagination:!1,dataSource:t,columns:s}))},El=e=>{const{sources:t}=e,{store_credits_page:{labels:a}}=acfwAdminApp,r=[{title:a.source,dataIndex:"label",key:"label"},{title:a.amount,dataIndex:"amount",key:"amount"}];return React.createElement(V,{className:"customer-sources",title:a.sources},React.createElement(le,{loading:!t||!t.length,pagination:!1,dataSource:t,columns:r}))},_l=e=>{const{entries:t,total:a,loadEntries:r,loaded:n}=e,{store_credits_page:{labels:s}}=acfwAdminApp,[c,o]=f.useState(1),d=[{title:s.date,dataIndex:"date",key:"date"},{title:s.activity,dataIndex:"activity",key:"activity"},{title:s.amount,dataIndex:"amount",key:"amount",render:(m,p)=>"".concat(da(p)).concat(m)},{title:s.related,dataIndex:"rel_label",key:"rel_label",render:(m,p)=>p.rel_link?React.createElement("a",{href:p.rel_link,target:"_blank"},m):m}],i=m=>{o(m),r(m)};return React.createElement(V,{className:"customer-entries",title:s.history},React.createElement(le,{loading:!n,columns:d,dataSource:t,pagination:!1}),0<a&&React.createElement(Ae,{defaultCurrent:c,current:c,hideOnSinglePage:!0,disabled:!t||!t.length,total:a,pageSize:10,showSizeChanger:!1,onChange:i}))},{readStoreCreditsCustomerStatus:gl,readStoreCreditsCustomerEntries:hl}=_e,Rl=e=>{var w,v;const{customer:t,setCustomer:a,actions:r}=e,[n,s]=f.useState((w=t==null?void 0:t.status)!=null?w:[]),[c,o]=f.useState((v=t==null?void 0:t.sources)!=null?v:[]),[d,i]=f.useState([]),[m,p]=f.useState(0),[_,g]=f.useState(!1),y=(O=1)=>{t!=null&&t.id&&(g(!1),r.readStoreCreditsCustomerEntries({id:t==null?void 0:t.id,page:O,successCB:T=>{i(T.data),p(T.headers["x-total"]),g(!0)}}))},h=()=>{a(null),o([]),i([])};return f.useEffect(()=>{if(!(t!=null&&t.id)){s([]),o([]),i([]),p(0);return}r.readStoreCreditsCustomerStatus({id:t==null?void 0:t.id,successCB:O=>{s(O.data.status),o(O.data.sources)}}),y()},[t]),t?React.createElement(Ee,{width:1100,visible:!window.lodash.isNull(t),footer:!1,onCancel:()=>h(),onOk:()=>h()},React.createElement("h2",null,"".concat(t.first_name," ").concat(t.last_name," Stats")),React.createElement(H,{gutter:16},React.createElement(N,{span:12},React.createElement(fl,{status:n})),React.createElement(N,{span:12},React.createElement(El,{sources:c}))),React.createElement(ae,null),React.createElement(_l,{entries:d,total:m,loadEntries:y,loaded:_})):null},yl=e=>({actions:$({readStoreCreditsCustomerStatus:gl,readStoreCreditsCustomerEntries:hl},e)}),Sl=I(null,yl)(Rl);function Tl({precision:e=null,decimalSeparator:t=".",thousandSeparator:a=","},r){if(window.lodash.isNull(e)){const[,d]=r.toString().split(".");e=d?d.length:0}let n=r.toFixed(e),[s,c]=n.split(".");const o=/(\d+)(\d{3})/;for(;o.test(s);)s=s.replace(o,"$1"+a+"$2");return"".concat(s).concat(t).concat(c)}function Cl(e,t=!1){const{currency:a}=acfwAdminApp.store_credits_page,r={precision:a.decimals,decimalSeparator:a.decimal_separator,thousandSeparator:a.thousand_separator},n=Tl(r,e);return n===""?n:"".concat(a.symbol).concat(n)}function bl(e){const{currency:t}=acfwAdminApp.store_credits_page,a=new RegExp("[^-0-9%\\".concat(t.decimal_separator,"]+"),"gi"),r=new RegExp("[^\\".concat(t.decimal_separator,'"]'),"gi");let n=e.replace(a,"");1<n.replace(r,"").length&&(n=n.replace(r,""));const s=parseFloat(n.replace(t.decimal_separator,"."));return e===n&&s>0}function Se(e){const{currency:t}=acfwAdminApp.store_credits_page;return parseFloat(e.replace(t.decimal_separator,"."))}const{adjustCustomerStoreCredits:wl,setStoreCreditsCustomerBalance:Al}=_e,vl=e=>{const{customer:t,setAdjustCustomer:a,actions:r}=e,{adjust_modal:n,currency:s}=acfwAdminApp.store_credits_page,[c,o]=f.useState(!1),[d,i]=f.useState("increase"),[m,p]=f.useState(""),[_,g]=f.useState(""),y=()=>{if(t){if(!bl(m)){Y.error(n.invalid_price);return}o(!0),r.adjustCustomerStoreCredits({id:t==null?void 0:t.id,type:d,amount:Se(m),successCB:h=>{o(!1),Y.success(h.data.message),r.setStoreCreditsCustomerBalance({id:t==null?void 0:t.id,balance:h.data.balance,balance_raw:h.data.balance_raw}),a(null),p(""),i("increase")},failCB:({error:h})=>{o(!1),Y.error(h.response.data.message)}})}};return f.useEffect(()=>{if(!t||!m){g("");return}const h=d==="increase"?t.balance_raw+Se(m):t.balance_raw-Se(m);g(Cl(Math.max(0,h)))},[t,m,d]),t?React.createElement("div",{className:"adjust-store-credits"},React.createElement("h2",null,n.title),React.createElement("p",{className:"description"},n.description),React.createElement("h3",{className:"current-balance"},n.current_balance.replace("{balance}",t.balance)),React.createElement("div",{className:"adjust-store-credits-form"},React.createElement(W,{value:d,onSelect:h=>i(h)},React.createElement(W.Option,{value:"increase"},n.increase),React.createElement(W.Option,{value:"decrease"},n.decrease)),React.createElement(K,{value:m,onChange:h=>p(h.target.value),addonBefore:s.symbol,allowClear:!0})),_?React.createElement("h3",{className:"new-balance",dangerouslySetInnerHTML:{__html:n.new_balance.replace("{balance}","<span>".concat(_,"</span>"))}}):null,React.createElement(D,{className:"make-adjustment-btn",type:"primary",size:"large",loading:c,onClick:y},n.make_adjustment)):null},Ol=e=>({actions:$({adjustCustomerStoreCredits:wl,setStoreCreditsCustomerBalance:Al},e)}),Nl=I(null,Ol)(vl),Dl=e=>{var w,v,O,T,R,C;const{store_credits_page:{rest_url:t,labels:a,nonce:r}}=acfwAdminApp,{customer:n}=e,[s,c]=f.useState(!1),[o,d]=f.useState(!1),[i,m]=Y.useMessage(),p=()=>{c(!0)},_=()=>{let b="".concat(acfwAdminApp.admin_url,"admin-ajax.php?action=acfwp_store_credit_reminder_preview_email");return b+=n!=null&&n.first_name&&(n!=null&&n.last_name)?"&args[name]=".concat(n==null?void 0:n.first_name," ").concat(n==null?void 0:n.last_name):"",b+=n!=null&&n.email?"&args[email]=".concat(n==null?void 0:n.email):"",b+=n!=null&&n.id?"&args[user_id]=".concat(n==null?void 0:n.id):"",b+="&_wpnonce=".concat(r==null?void 0:r.preview),b},g=()=>{c(!1)},y=()=>{c(!1),window.open(_())},h=()=>{d(!0);const b=()=>{d(!1),c(!1)};jQuery.ajax({type:"GET",url:t,data:{user_id:n==null?void 0:n.id},success:function(k){var G,u,E,S;!k.status||k.status==="error"?i.open({type:"error",content:"".concat((u=(G=a==null?void 0:a.modal)==null?void 0:G.error)==null?void 0:u.heading,": ").concat(k==null?void 0:k.message)}):i.open({type:"success",content:React.createElement(React.Fragment,null,(S=(E=a==null?void 0:a.modal)==null?void 0:E.success)==null?void 0:S.text,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">."):"")}),b()},error:function(k,G,u){var E,S,P;(E=k==null?void 0:k.responseJSON)!=null&&E.message&&(u=k.responseJSON.message),i.open({type:"error",content:"".concat((P=(S=a==null?void 0:a.modal)==null?void 0:S.error)==null?void 0:P.heading,": ").concat(u)}),b()}})};return a!=null&&a.remind?React.createElement(React.Fragment,null,m,React.createElement(D,{onClick:p},a.remind),React.createElement(Ee,{title:(w=a==null?void 0:a.modal)==null?void 0:w.heading,className:"acfw-modal send-a-reminder-modal",width:500,open:s,onCancel:g,footer:[React.createElement(D,{key:"preview",className:"action-preview",onClick:y,"data-url":_()},(O=(v=a==null?void 0:a.modal)==null?void 0:v.button)==null?void 0:O.preview),React.createElement(D,{key:"send",className:"action-send",type:"primary",onClick:h,disabled:o},o?"".concat(a==null?void 0:a.loading,"..."):(R=(T=a==null?void 0:a.modal)==null?void 0:T.button)==null?void 0:R.send)]},React.createElement("p",null,(C=a==null?void 0:a.modal)==null?void 0:C.text),React.createElement("p",null,n==null?void 0:n.first_name," ",n==null?void 0:n.last_name,n!=null&&n.email?" <".concat(n==null?void 0:n.email,">"):""))):null};const{readStoreCreditsCustomers:Pl,adjustCustomerStoreCredits:Il}=_e,$l=e=>{var b;const{customers:t,actions:a}=e,{store_credits_page:{labels:r}}=acfwAdminApp,{params:n,dispatchParams:s}=f.useContext(ma),[c,o]=f.useState(!1),[d,i]=f.useState(0),[m,p]=f.useState(n.search),[_,g]=f.useState(null),[y,h]=f.useState(null),[w,v]=f.useState(null),O=[{title:r.customer_name,dataIndex:"first_name",key:"first_name",sorter:!0,render:(k,G)=>"".concat(G.first_name," ").concat(G.last_name)},{title:r.email,dataIndex:"email",key:"email",sorter:!0},{title:r.balance,dataIndex:"balance",key:"balance",sorter:!0},{title:"",dataIndex:"id",key:"id",render:(k,G)=>React.createElement(React.Fragment,null,React.createElement(D,{onClick:()=>h(G)},r.view_stats),React.createElement(D,{onClick:()=>v(G)},r.adjust),React.createElement(Dl,{customer:G}))}],T=k=>{p(k),_&&(De("customer_search"),clearTimeout(_)),g(setTimeout(()=>s({type:"SET_SEARCH",value:k}),1e3))},R=k=>{s({type:"SET_PAGE",value:k})},C=(k,G,u)=>{if(u.columnKey){switch(u.columnKey){case"first_name":s({type:"SET_META_KEY",value:"billing_first_name"}),s({type:"SET_SORT_BY",value:"meta_value"});break;case"balance":s({type:"SET_META_KEY",value:"acfw_store_credit_balance"}),s({type:"SET_SORT_BY",value:"meta_value_num"});break;default:s({type:"SET_SORT_BY",value:u.columnKey});break}s({type:"SET_SORT_ORDER",value:u.order==="descend"?"desc":"asc"})}};return f.useEffect(()=>{o(!0),a.readCustomers({params:n,successCB:k=>{i(k.headers["x-total"]),o(!1)}})},[n]),React.createElement(React.Fragment,null,React.createElement(V,{title:r.customers_list},React.createElement("div",{className:"customer-search"},React.createElement("label",null,r.search_label),React.createElement(K.Search,{allowClear:!0,value:m,onChange:k=>T(k.target.value)})),React.createElement(le,{className:"customers-list-table",loading:c,pagination:!1,dataSource:t,columns:O,onChange:C}),0<d&&React.createElement(Ae,{className:"customers-list-pagination",defaultCurrent:n.page,current:n.page,hideOnSinglePage:!0,disabled:c,total:d,pageSize:(b=n.per_page)!=null?b:10,showSizeChanger:!1,onChange:R})),React.createElement(Sl,{customer:y,setCustomer:h}),React.createElement(Ee,{width:500,visible:!window.lodash.isNull(w),footer:!1,onCancel:()=>v(null),onOk:()=>v(null)},React.createElement(Nl,{customer:w,setAdjustCustomer:v})))},kl=e=>({customers:e.storeCreditsCustomers}),Ml=e=>({actions:$({readCustomers:Pl,adjustCustomerStoreCredits:Il},e)}),xl=I(kl,Ml)($l),Ll=e=>{const{slug:t}=e,{img_path:a}=acfwAdminApp.uncanny_automator;let r,n="";switch(t){case"woocommerce":r="woo-logo.png",n="WooCommerce";break;case"twilio":r="twilio-logo.png",n="Twilio";break;case"google_sheets":r="gsheets-logo.png",n="Google Sheets";break;default:r="Advanced-Coupons-Icon-WC-Marketing.png",n="Advanced Coupon";break}return React.createElement("div",{className:"icon-text ".concat(t)},React.createElement("img",{src:"".concat(a).concat(r)}),React.createElement("span",null,n))},pa=e=>{const{pluginSlug:t,className:a,type:r,size:n,text:s,successMessage:c,nonce:o,afterInstall:d}=e,[i,m]=f.useState(!1),p=()=>{m(!0),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"acfw_install_activate_plugin",plugin_slug:t,nonce:o}}).done(_=>{m(!1),_!=null&&_.success&&!_.success?Y.error(_.data):(typeof d=="function"&&d(),Y.success(c))}).fail(_=>{Y.error(_.responseJSON.data)})};return React.createElement(D,{className:a,type:r,size:n,loading:i,onClick:p},s)};const Bl=()=>{const{logo:e,main_content:t,action_text:a,action_url:r,is_plugin_active:n,nonce:s,labels:c,triggers_actions:o,sample_automations:d}=acfwAdminApp.uncanny_automator,[i,m]=f.useState(!!n);return React.createElement("div",{className:"store-credit-automations"},React.createElement("div",{className:"store-credit-automations__inner"},React.createElement("div",{className:"store-credit-automations__header"},React.createElement("img",{src:e}),React.createElement("p",{dangerouslySetInnerHTML:{__html:t}}),i?React.createElement(D,{className:"main-cta-btn",type:"primary",size:"large",href:r,icon:React.createElement(Ga,null)},c.add_new_recipe):React.createElement(pa,{pluginSlug:"uncanny-automator",className:"main-cta-btn",type:"primary",size:"large",text:a,nonce:s,successMessage:c.success_message,afterInstall:()=>m(!0)})),React.createElement("div",{className:"triggers-actions"},React.createElement(H,{gutter:16},o.map((p,_)=>React.createElement(N,{key:_,span:12},React.createElement(V,null,React.createElement("span",{className:"trigger-action__type"},p.type," ",p.is_pro&&React.createElement(Je,{color:"#1393A6"},c.pro)),React.createElement("span",{className:"trigger-action__desc"},p.desc)))))),React.createElement(ae,null),React.createElement("div",{className:"sample-automations"},React.createElement("p",null,c.sample_automations),React.createElement(H,{gutter:16},d.map((p,_)=>React.createElement(N,{key:_,span:8},React.createElement(V,{bordered:!1},React.createElement("h3",null,p.title),React.createElement("p",null,c.requires),React.createElement("ul",null,p.requires.map((g,y)=>React.createElement("li",{key:y},React.createElement(Ll,{slug:g})))))))))))};const Ul=e=>{const{tabKey:t}=e;switch(t){case"dashboard":return React.createElement(dl,null);case"customers":return React.createElement(pl,null,React.createElement(xl,null));case"automations":return React.createElement(Bl,null)}return null},jl=()=>{var c;const{store_credits_page:{title:e,tabs:t}}=acfwAdminApp,a=Q(),n=(c=new URLSearchParams(oe().search).get("tab"))!=null?c:"dashboard",s=o=>{a.push("".concat(Z(),"admin.php?page=acfw-store-credits&tab=").concat(o))};return React.createElement("div",{className:"store-credits-page"},React.createElement(se,{title:e,className:"store-credits-header"}),React.createElement(ce,{defaultActiveKey:n,onTabClick:s},t.map(o=>React.createElement(ce.TabPane,{tab:o.label,key:o.key},React.createElement(Ul,{tabKey:o.key})))))};const bt=e=>{const{section:t}=e;switch(t){case"modules_section":return React.createElement(dn,null);case"general_section":return React.createElement(Jt,null);case"checkout_section":return React.createElement(un,null);case"bogo_deals_section":return React.createElement(ln,null);case"scheduler_section":return React.createElement(on,null);case"role_restrictions_section":return React.createElement(cn,null);case"url_coupons_section":return React.createElement(sn,null);case"store_credits_section":return React.createElement(rn,null);case"advanced_section":return React.createElement(Qt,null);case"help_page":return React.createElement(nn,null);case"license_page":return React.createElement(Xt,null);case"premium_upgrade":return React.createElement(an,null);case"loyalty_program_section":case"loyalty_program":return React.createElement(tn,null);case"advanced_gift_cards":return React.createElement(en,null)}return null},{setStorePage:Fl}=ie,wt=Z(),Gl=e=>{const{sections:t,currentSection:a,actions:r}=e,{app_pages:n}=acfwAdminApp,s=a||"general_section",c=Q();if(t.length<1)return l.createElement("div",{className:"settings-nav-skeleton"},l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}),l.createElement(z,{active:!0,paragraph:!1}));const o=m=>{c.push("".concat(wt,"admin.php?page=").concat(m)),r.setStorePage({data:m})},d=t.filter(({show:m})=>m),i=["acfw-settings","acfw-about","acfw-store-credits"];return l.createElement(ke,{className:"acfw-settings-nav",defaultSelectedKeys:[s]},d.map(({id:m,title:p})=>l.createElement(ke.Item,{key:m},l.createElement(kt,{to:"".concat(wt,"admin.php?page=acfw-settings&section=").concat(m)},l.createElement(bt,{section:m}),p))),n.filter(({slug:m})=>!i.includes(m)).map(({slug:m,label:p,page:_})=>l.createElement(ke.Item,{key:_,className:_},l.createElement("button",{className:"buttonlink",onClick:()=>o(m)},l.createElement(bt,{section:_}),p))))},Hl=e=>({sections:e.sections}),Vl=e=>({actions:$({setStorePage:Fl},e)}),Yl=I(Hl,Vl)(Gl),ql=e=>{const{classname:t,title:a,description:r,button_text:n,image:s,nonce:c,success_message:o}=e.noticeData;return React.createElement("p",{className:"acfw-dyk-notice acfw-funnelkit-upsell-notice ".concat(t)},!!s&&React.createElement("img",{src:s}),React.createElement("span",{className:"title"},a),React.createElement("br",null),React.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:r}}),React.createElement("span",{className:"button-wrap"},React.createElement(pa,{pluginSlug:"funnel-builder",className:"install-funnelkit-btn",type:"primary",size:"middle",text:n,nonce:c,successMessage:o,afterInstall:()=>window.location.href="".concat(acfwAdminApp.admin_url,"admin.php?page=bwf")})))};const fa=f.createContext({showModal:!1,setShowModal:e=>{}}),zl=e=>{const{data:{title:t,content:a,buttonTxt:r},showModal:n,setShowModal:s}=e,c=Q(),o=Z(),d=()=>{c.push("".concat(o,"admin.php?page=acfw-premium"))};return l.createElement(Ee,{className:"acfw-upsell-modal",centered:!0,width:600,visible:n,onCancel:()=>s(!1),footer:null},l.createElement(mn,null),l.createElement("h2",null,t),a.map(i=>l.createElement("p",null,i)),l.createElement(D,{type:"primary",onClick:d},r))},Kl=e=>{const{children:t}=e,[a,r]=f.useState(!1);return l.createElement(fa.Provider,{value:{showModal:a,setShowModal:r}},t,acfwAdminApp!=null&&acfwAdminApp.upsellModal?l.createElement(zl,{data:acfwAdminApp==null?void 0:acfwAdminApp.upsellModal,showModal:a,setShowModal:r}):null)},Wl=e=>{const{id:t}=e.field,a=f.useContext(fa);return l.createElement(Kt,{key:t,checked:!1,defaultChecked:!1,onChange:()=>a.setShowModal(!0)})},{updateSetting:Ql,setStoreSettingItem:Jl}=X,{action_notices:At}=acfwAdminApp,Xl=e=>{const{field:t,setShowSpinner:a,validateInput:r,value:n,actions:s,order:c}=e,{id:o,title:d,type:i,placeholder:m,default:p,suffix:_,format:g,min:y,max:h}=t,[w,v]=f.useState(null),O=n!==void 0&&n!==!1?n:p,T=(R,C=!1)=>{const b=()=>{r(R)&&(s.setStoreSettingItem({data:{id:o,value:R}}),s.updateSetting({data:{id:o,value:R,type:i},processingCB:()=>a(!0),successCB:()=>{Y.success(l.createElement(l.Fragment,null,l.createElement("strong",null,t.title)," ",At.success)),a(!1)},failCB:()=>{Y.error(l.createElement(l.Fragment,null,l.createElement("strong",null,t.title)," ",At.fail)),a(!1)}}))};C?(w&&(clearTimeout(w),v(null)),v(setTimeout(b,1e3))):b()};if(i==="checkbox"||i==="module")return l.createElement(Kt,{key:o,checked:O==="yes",defaultChecked:O==="yes",onChange:R=>T(R?"yes":"")});if(i==="premiummodule")return l.createElement(Wl,{field:t});if(i==="textarea")return l.createElement(K.TextArea,{key:o,rows:3,placeholder:m,defaultValue:O,onChange:R=>T(R.target.value,!0)});if(i==="radio"){const{options:R}=t;return l.createElement(ut.Group,{onChange:C=>T(C.target.value),value:O},l.createElement(Re,{direction:"vertical"},(R==null?void 0:R.length)&&R.map(({key:C,label:b})=>l.createElement(ut,{key:C.toString(),value:C.toString()},b))))}if(i==="select"){let{options:R}=t,C=R||[];return C=C.map(b=>b.label.label?b.label:{value:b.key,label:b.label}),l.createElement(W,{key:o,defaultValue:O.toString(),style:{width:"50%"},placeholder:m,options:C,onSelect:b=>T(b)})}if(i==="timepicker"){let R=g||"HH:mm:ss",C=O||t.default;return C=C||"00:00:00",C=window.moment(C,R),l.createElement(Ha,{key:o,defaultValue:C,format:R,onChange:b=>T(b.format("HH:mm:ss"))})}if(["text","url","permalink","customurl"].indexOf(i)>-1){let R=["permalink","customurl"];return l.createElement(K,{key:o,type:R.indexOf(i)>-1?"text":i,name:o,placeholder:m,defaultValue:O,onChange:C=>T(C.target.value,!0),suffix:_})}if(i==="number")return console.log(y,h),l.createElement(Xe,{key:o,name:o,placeholder:m,defaultValue:O,onChange:R=>T(R,!0),min:y!=null?y:void 0,max:h!=null?h:void 0});if(i==="price")return l.createElement(K,{type:"text",className:"wc_input_price",name:o,placeholder:m,defaultValue:O,onChange:R=>T(R.target.value,!0)});if(i==="acfwflicense"){const{licenseContent:R}=t;return l.createElement("div",{className:"acfw-license-field"},R==null?void 0:R.map(C=>l.createElement("p",{dangerouslySetInnerHTML:{__html:C}})))}return i==="subtitle"?l.createElement("div",{className:"form-heading ".concat(c>0?"spacer":"")},l.createElement("h3",null,d)):null},Zl=(e,t)=>{const{id:a}=t.field,r=e.settingValues.findIndex(s=>s.id===a);return{value:r>-1?e.settingValues[r].value:""}},ei=e=>({actions:$({updateSetting:Ql,setStoreSettingItem:Jl},e)}),vt=I(Zl,ei)(Xl),{Text:Ot}=Wt,ti=e=>{const{field:t}=e,{id:a,title:r,type:n,desc:s,desc_tip:c}=t,{validation:o}=acfwAdminApp,[d,i]=f.useState(!1),[m,p]=f.useState(!1),_=c?l.createElement("div",{className:"setting-tooltip-content"},c):null;if(n==="title")return l.createElement("div",{className:"form-heading"},l.createElement("h1",null,r),l.createElement("p",null,s));if(n==="notice"&&(t!=null&&t.noticeData)){const{classname:w,title:v,description:O,button_text:T,button_link:R,button_class:C,image:b}=t==null?void 0:t.noticeData;return l.createElement("p",{className:"acfw-dyk-notice ".concat(w)},!!b&&l.createElement("img",{src:b}),l.createElement("span",{className:"title"},v),l.createElement("br",null),l.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:O}}),T&&R?l.createElement("a",{className:"acfw-button ".concat(C),href:R,rel:"noreferrer noopener",target:"_blank"},T):null)}if(n==="funnelkit_upsell"&&(t!=null&&t.noticeData))return l.createElement(ql,{noticeData:t==null?void 0:t.noticeData});if(n==="sectionend")return null;const g=w=>w&&n==="url"&&!ua(w+"")?(p(!0),!1):(p(!1),!0),y=()=>l.createElement(l.Fragment,null,l.createElement(N,{span:8,className:"setting-title-column"},l.createElement("label",null,l.createElement("strong",null,r),n==="premiummodule"?l.createElement(l.Fragment,null,l.createElement("br",null),l.createElement(Je,{className:"premium-tag"},"Premium")):null),c?l.createElement(Ke,{placement:"right",content:_,trigger:"click"},l.createElement(Qe,{className:"setting-tooltip-icon"})):null),l.createElement(N,{className:"setting-field-column",span:16},l.createElement(vt,{field:t,setShowSpinner:i,validateInput:g}),d?l.createElement(pe,{indicator:l.createElement(dt,{style:{fontSize:24},spin:!0})}):null,l.createElement("div",{className:"invalid-input".concat(m?" show":"")},m?l.createElement(Ot,{type:"danger"},o[n]?o[n]:o.default):null),s?l.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):null)),h=()=>l.createElement(l.Fragment,null,l.createElement(N,{className:"setting-field-column"},l.createElement(vt,{field:t,setShowSpinner:i,validateInput:g}),d?l.createElement(pe,{indicator:l.createElement(dt,{style:{fontSize:24},spin:!0})}):null,l.createElement("div",{className:"invalid-input".concat(m?" show":"")},m?l.createElement(Ot,{type:"danger"},o[n]?o[n]:o.default):null),s?l.createElement("p",{dangerouslySetInnerHTML:{__html:s}}):null));return l.createElement(H,{gutter:16,className:"form-control",id:"".concat(a,"_field"),key:a},l.createElement(ae,null),n==="subtitle"?l.createElement(h,null):l.createElement(y,null))};const rt=e=>{var E,S;const{className:t,showSubtitle:a,showTag:r}=e,{free_guide:{show:n,tag:s,title:c,subtitle:o,content:d,image:i,button:m,list:p,field_values:_,placeholders:g,form_nonce:y,missing_form_fields:h,failed_form_error:w}}=acfwAdminApp,[v,O]=f.useState((E=_.name)!=null?E:""),[T,R]=f.useState((S=_.email)!=null?S:""),[C,b]=f.useState(!1),[k,G]=f.useState(n),u=async P=>{if(P.preventDefault(),!v||!T){Y.error(h);return}b(!0);const j=new Date,A=new FormData;A.append("action","acfwf_get_free_training_guide"),A.append("name",v),A.append("email",T),A.append("title",document.title),A.append("url",window.location.href),A.append("referrer",document.referrer),A.append("timestamp",j.getTime().toString()),A.append("nonce",y);try{const ee=await(await fetch(ajaxurl,{method:"post",body:A})).json();ee.status==="success"?(Y.success(ee.message),acfwAdminApp.free_guide.show=!1,G(!1)):Y.error(ee.error_msg)}catch(ue){Y.error(w)}b(!1)};return k?l.createElement("div",{className:"coupons-free-guide ".concat(t)},l.createElement("div",{className:"inner"},l.createElement("form",{onSubmit:u},r?l.createElement(Je,{color:"#1693A7"},s):null,l.createElement("h2",null,c),l.createElement("img",{src:i,alt:c}),a?l.createElement("h3",null,o):null,l.createElement("p",{dangerouslySetInnerHTML:{__html:d}}),l.createElement("ul",null,p.map((P,j)=>l.createElement("li",{key:j},l.createElement(pn,null),P))),l.createElement("p",{className:"form-fields"},l.createElement(K,{value:v,onChange:P=>O(P.target.value),placeholder:g.name}),l.createElement(K,{value:T,type:"email",onChange:P=>R(P.target.value),placeholder:g.email})),l.createElement("p",{className:"form-actions"},l.createElement(D,{type:"link",htmlType:"submit",className:"cta",size:"large",loading:C},m.text))))):null};rt.defaultProps={className:"",showSubtitle:!1,showTag:!0};const ai=e=>{const{sections:t,settingValues:a,currentSection:r}=e,n=r?t.findIndex(o=>o.id===r):0,s=t.length?t[n].id:"",c=t.length?t[n].fields:[];return c.length<1||a.length<1?l.createElement(l.Fragment,null,l.createElement(z,{loading:!0,active:!0,paragraph:{rows:1}}),l.createElement(ae,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),l.createElement(ae,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1}),l.createElement(ae,null),l.createElement(z,{loading:!0,active:!0,paragraph:{rows:2},title:!1})):l.createElement(Kl,null,l.createElement("div",{className:"settings-form ".concat(s,"-form")},c.map(o=>l.createElement(ti,{key:o.id,field:o})),!r||r==="general_section"?l.createElement(l.Fragment,null,l.createElement(ae,null),l.createElement(rt,null)):null))},ni=e=>({sections:e.sections,settingValues:e.settingValues}),ri=e=>({actions:$({},e)}),si=I(ni,ri)(ai),{readSections:ci,readSection:oi}=Oe,li=e=>{const{sections:t,actions:a}=e,n=new URLSearchParams(oe().search).get("section");return f.useEffect(()=>{t.length>0||a.readSections({id:n})},[a]),f.useEffect(()=>{if(t.length<1)return;const s=n?t.findIndex(c=>c.id===n):0;t[s].fields.length<1&&a.readSection({id:n})},[t,a,n]),l.createElement(l.Fragment,null,l.createElement(se,{title:acfwAdminApp.title,description:acfwAdminApp.desc,className:"settings-header"}),l.createElement(H,{className:"settings-content"},l.createElement(N,{span:6},l.createElement(Yl,{currentSection:n})),l.createElement(N,{span:18,className:"content-column"},l.createElement(si,{currentSection:n}))))},ii=e=>({sections:e.sections}),ui=e=>({actions:$({readSections:ci,readSection:oi},e)}),di=I(ii,ui)(li),{LicensePremium:mi}=acfwpElements,pi=parseInt(acfwpElements.is_acfwp_active),fi=()=>{const{license_page:{title:e,desc:t,feature_comparison:a,license_status:r,content:n,specs:s}}=acfwAdminApp;return pi?l.createElement(mi,null):l.createElement("div",{className:"acfw-license-box"},l.createElement("div",{className:"overview"},l.createElement("h1",null,e),l.createElement("p",null,t),l.createElement("a",{className:"action-button feature-comparison",href:a.link,target:"_blank",rel:"noopener noreferrer"},a.text)),l.createElement("div",{className:"license-info"},l.createElement("div",{className:"heading"},l.createElement("div",{className:"left"},l.createElement("span",null,r.label)),l.createElement("div",{className:"right"},l.createElement("a",{className:"action-button upgrade-premium",href:r.link,target:"_blank",rel:"noopener noreferrer"},r.text))),l.createElement("div",{className:"content"},l.createElement("h2",null,n.title),l.createElement("p",null,n.text),l.createElement("table",{className:"license-specs"},l.createElement("thead",null,l.createElement("tr",null,s.map(c=>l.createElement("th",{key:c.label},c.label)))),l.createElement("tbody",null,l.createElement("tr",null,s.map(c=>l.createElement("td",{key:c.value},c.value))))))))};const{setStorePage:Ei}=ie,_i=e=>{var i;const{actions:t}=e,a=Q(),n=(i=new URLSearchParams(oe().search).get("tab"))!=null?i:"ACFW",[s,c]=l.useState(n),{license_tabs:o}=acfwAdminApp,d=m=>{a.push("".concat(Z(),"admin.php?page=acfw-license&tab=").concat(m)),c(m),t.setStorePage({data:"acfw-license/".concat(m)})};return f.useEffect(()=>{n!=="ACFW"&&t.setStorePage({data:"acfw-license/".concat(n)})},[]),l.createElement("div",{className:"license-page"},l.createElement(se,{className:"license-header",hideUpgrade:!0}),l.createElement(ce,{defaultActiveKey:n,items:o,onTabClick:d}),s==="ACFW"&&l.createElement(fi,null))},gi=e=>({actions:$({setStorePage:Ei},e)}),hi=I(null,gi)(_i);const Ri=()=>{const{about_page:{title:e,desc:t,main_card:a,cards:r,status:n,status_texts:s,button_texts:c}}=acfwAdminApp;return l.createElement("div",{className:"about-page"},l.createElement(se,{title:e,description:t,className:"about-header",hideUpgrade:!0}),l.createElement(H,{className:"about-rymera-team"},l.createElement(N,{className:"content",span:12},l.createElement("div",{className:"inner"},l.createElement("h2",null,a.title),a.content.map((o,d)=>l.createElement("p",{key:d},o)))),l.createElement(N,{className:"photo",span:12},l.createElement("img",{src:a.image,alt:"Rymera Team"}))),l.createElement(H,{className:"plugin-cards",gutter:10},r.map((o,d)=>l.createElement(N,{key:d,span:12},l.createElement(V,{actions:[l.createElement(l.Fragment,null,l.createElement("strong",null,n,": "),l.createElement("span",null,s[o.action.status])),o.action.link?l.createElement(D,{type:"primary",href:o.action.link,target:o.action.external?"_blank":void 0},c[o.action.status]):null]},l.createElement(V.Meta,{avatar:l.createElement(Va,{src:o.icon}),title:o.title,description:o.content}))))))};const{Text:ne,Link:Nt}=Wt,yi=()=>{const{premium_page:{image:e,title:t,desc:a,header:r,rows:n,action:s},logo_alt:c}=acfwAdminApp;return React.createElement("div",{id:"acfw-premium",className:"acfwf-upgrade-settings-block"},React.createElement("p",null,React.createElement("a",{href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=logo",target:"_blank",rel:"noreferrer"},React.createElement("img",{className:"logo",src:e,alt:c}))),React.createElement("h2",{dangerouslySetInnerHTML:{__html:t}}),React.createElement("p",null,React.createElement(Nt,{className:"acfw-upgrade-button",href:s.btn_link,target:"_blank"},s.btn_text)),React.createElement("p",null,React.createElement(ne,null,a)),React.createElement("div",{className:"responsive-table"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"feature"},React.createElement(ne,null,r.feature)),React.createElement("th",{className:"free"},React.createElement(ne,null,r.free)),React.createElement("th",{className:"premium"},React.createElement(ne,null,r.premium)))),React.createElement("tbody",null,n.map(({feature:o,free:d,premium:i},m)=>React.createElement("tr",{key:m},React.createElement("td",{className:"feature"},React.createElement(ne,null,o)),React.createElement("td",{className:"free dashicons-before dashicons-no"},React.createElement(ne,null,d)),React.createElement("td",{className:"premium dashicons-before dashicons-yes-alt"},React.createElement(ne,null,i))))))),React.createElement("div",{className:"cta-block"},React.createElement("h3",null,React.createElement(ne,null,s.title)),React.createElement("p",null,React.createElement(Nt,{className:"acfw-upgrade-button",href:s.btn_link,target:"_blank"},s.btn_text))))};const Si=()=>{const{help_page:{title:e,desc:t,cards:a}}=acfwAdminApp,{HelpPremium:r}=acfwpElements;return l.createElement("div",{className:"help-page"},l.createElement(se,{title:e,description:t,className:"help-header"}),l.createElement(H,{gutter:10},a.map((n,s)=>l.createElement(N,{key:s,className:"acfw-border-box",span:12},l.createElement(V,null,l.createElement("h2",null,n.title),l.createElement("p",null,n.content),l.createElement(D,{type:"primary",href:n.action.link,size:"large",target:"_blank"},n.action.text))))),l.createElement(H,{gutter:10},l.createElement(N,{className:"acfw-border-box",span:24},l.createElement(rt,{className:"help-guide",showSubtitle:!0,showTag:!1}))),r?l.createElement(r,null):null)};const Ti=e=>{const{step_count:t,title:a,description:r,is_active:n,action_text:s,link:c,is_external:o}=e;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,t)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(D,{href:c,target:o?"_blank":""},s))))},Ci=()=>{const{loyalty_program:{title:e,description:t,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"loyalty-program-page-upsell"},React.createElement(se,{title:e,className:"loyalty-program-header",description:t,hideUpgrade:!0}),React.createElement(H,{className:"features-list",gutter:60},React.createElement(N,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(N,{span:12,className:"content"},React.createElement("ul",null,r.map((s,c)=>React.createElement("li",{key:c},s))))),React.createElement("div",{className:"action-steps"},n.map((s,c)=>React.createElement(Ti,{key:c,...s}))))};const bi=e=>{const{step_count:t,title:a,description:r,is_active:n,action_text:s,link:c,is_external:o}=e;return React.createElement("div",{className:"plugin-step ".concat(n?"":"blocked")},React.createElement("div",{className:"step-count"},React.createElement("span",null,t)),React.createElement("div",{className:"inner-content"},React.createElement("p",{className:"title"},a),React.createElement("p",{className:"description"},r),React.createElement("p",{className:"actions"},React.createElement(D,{href:c,target:o?"_blank":""},s))))},wi=()=>{const{advanced_gift_cards:{title:e,description:t,plugin_image:a,features_list:r,steps_list:n}}=acfwAdminApp;return React.createElement("div",{className:"advanced-gift-cards-page-upsell"},React.createElement("div",{className:"page-header advanced-gift-cards-header"},React.createElement(nt,{hideUpgrade:!0}),React.createElement("h1",null,e),React.createElement("p",null,t)),React.createElement(H,{className:"features-list",gutter:60},React.createElement(N,{span:12,className:"image"},React.createElement("img",{src:a.src,alt:a.alt})),React.createElement(N,{span:12,className:"content"},React.createElement("ul",null,r.map((s,c)=>React.createElement("li",{key:c},s))))),React.createElement("div",{className:"action-steps"},n.map((s,c)=>React.createElement(bi,{key:c,...s}))))},st=e=>{const{className:t}=e,a={rows:2,width:100};return React.createElement("div",{className:"coupon-templates-list ".concat(t)},[...Array(9)].map((r,n)=>React.createElement("div",{key:n,className:"coupon-template-card"},React.createElement("div",{className:"template-image"}),React.createElement("div",{className:"template-content"},React.createElement(z,{active:!0,paragraph:a})))))},{togglePremiumModal:Ai,deleteRecentCouponTemplate:vi,unsetRecentCouponTemplate:Oi}=q,Ni=e=>{const{labels:t}=acfwAdminApp.coupon_templates_page,a=Q(),{template:r,isReview:n,showClose:s,actions:c}=e,o=()=>{if(r.license_type==="premium"&&!parseInt(acfwpElements.is_acfwp_active)){c.togglePremiumModal({show:!0});return}const i=n?"id=".concat(r.id,"&is_review=true"):"id=".concat(r.id);a.push("".concat(Z(),"admin.php?page=acfw-coupon-templates&").concat(i))},d=()=>{c.deleteRecentCouponTemplate({id:r.id}),c.unsetRecentCouponTemplate({id:r.id})};return React.createElement("div",{className:"coupon-template-card"},React.createElement("div",{className:"template-image",style:{backgroundColor:r.image_bg_color}},s&&React.createElement("span",{className:"close-icon",onClick:d},React.createElement(zt,null)),React.createElement("span",{className:"image-svg",onClick:o,dangerouslySetInnerHTML:{__html:r.image_svg}}),r.license_type==="premium"&&React.createElement("span",{className:"premium-badge"},t.premium)),React.createElement("div",{className:"template-content"},React.createElement("h3",{onClick:o},r.title),React.createElement("p",null,r.description)))},Di=e=>({actions:$({togglePremiumModal:Ai,deleteRecentCouponTemplate:vi,unsetRecentCouponTemplate:Oi},e)}),Pi=I(null,Di)(Ni),ct=e=>{const{templates:t,isReview:a,showClose:r}=e,{labels:n}=acfwAdminApp.coupon_templates_page,[s,c]=f.useState(1),o=9,d=f.useMemo(()=>t.slice((s-1)*o,s*o),[t,s]);return f.useEffect(()=>{c(1)},[t]),t.length?React.createElement(React.Fragment,null,React.createElement("div",{className:"queried-templates-list coupon-templates-list"},d.map(i=>React.createElement(Pi,{key:i.id,template:i,isReview:a,showClose:r}))),React.createElement("div",{className:"templates-list-pagination"},React.createElement(Ae,{defaultCurrent:1,pageSize:o,current:s,total:t.length,onChange:i=>c(i),hideOnSinglePage:!0}))):React.createElement("div",{className:"no-templates-message"},n.no_templates_found)},Ii=e=>{const{templates:t,actions:a}=e,[r,n]=f.useState(!1);return f.useEffect(()=>{n(!0),a.readRecentCouponTemplates({successCB:()=>n(!1)})},[]),r?React.createElement(st,{className:"coupon-templates-list"}):React.createElement(ct,{templates:t,showClose:!0})},$i=e=>{var t,a;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.recent)!=null?a:[]}},ki=e=>({actions:$({...q},e)}),Mi=I($i,ki)(Ii),xi=e=>{const{templates:t,loading:a,actions:r}=e;return f.useEffect(()=>{r.setCouponTemplatesLoading({loading:!0}),r.readCouponTemplates({successCB:()=>r.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(st,{className:"queried-templates-list"}):React.createElement(ct,{templates:t})},Li=e=>{var t,a,r,n;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.templates)!=null?a:[],loading:(n=(r=e.couponTemplates)==null?void 0:r.loading)!=null?n:!1}},Bi=e=>({actions:$({...q},e)}),Ui=I(Li,Bi)(xi),ji=e=>{const{templates:t,loading:a,actions:r}=e;return f.useEffect(()=>{r.setCouponTemplatesLoading({loading:!0}),r.readCouponTemplates({isReview:!0,successCB:()=>r.setCouponTemplatesLoading({loading:!1})})},[]),a?React.createElement(st,{className:"queried-templates-list"}):React.createElement(ct,{templates:t,isReview:!0})},Fi=e=>{var t,a,r,n;return{templates:(a=(t=e.couponTemplates)==null?void 0:t.review)!=null?a:[],loading:(n=(r=e.couponTemplates)==null?void 0:r.loading)!=null?n:!1}},Gi=e=>({actions:$({...q},e)}),Hi=I(Fi,Gi)(ji),{readCouponTemplateCategories:Vi,readCouponTemplateCategory:Yi,setCouponTemplatesLoading:me,readCouponTemplates:qi}=q,zi=e=>{const{categories:t,actions:a}=e,{labels:r}=acfwAdminApp.coupon_templates_page,[n,s]=f.useState(!1),[c,o]=f.useState("all"),d=i=>{if(i!==c){if(o(i),i==="all"){a.readCouponTemplates({processingCB:()=>me({loading:!0}),successCB:()=>me({loading:!1})});return}a.readCouponTemplateCategory({slug:i,processingCB:()=>me({loading:!0}),successCB:()=>me({loading:!1})})}};return f.useEffect(()=>{s(!0),a.readCouponTemplateCategories({successCB:()=>s(!1)})},[]),React.createElement("div",{className:"coupon-templates-sidebar"},React.createElement("div",{className:"sidebar-inner"},React.createElement("h3",null,r.categories),React.createElement("ul",{className:"categories-list"},n?React.createElement(pe,null):React.createElement(React.Fragment,null,React.createElement("li",{className:c==="all"?"current":"",onClick:()=>d("all")},React.createElement("span",null,r.all_templates)),t.map(i=>React.createElement("li",{className:c===i.slug?"current":"",key:i.slug,onClick:()=>d(i.slug)},React.createElement("span",null,i.name)))))))},Ki=e=>{var t,a;return{categories:(a=(t=e.couponTemplates)==null?void 0:t.categories)!=null?a:[]}},Wi=e=>({actions:$({readCouponTemplateCategories:Vi,readCouponTemplateCategory:Yi,setCouponTemplatesLoading:me,readCouponTemplates:qi},e)}),Qi=I(Ki,Wi)(zi),Ji=e=>{const{defaultValue:t,onChange:a}=e,[r,n]=f.useState(t!=null?t:""),s=o=>{n(o.target.value),a(o.target.value)},c=()=>{const o="ABCDEFGHJKMNPQRSTUVWXYZ123456789";let i="";for(let m=0;m<10;m++)i+=o.charAt(Math.floor(Math.random()*o.length));n(i),a(i)};return React.createElement(Re,{direction:"horizontal",size:"middle"},React.createElement(Re.Compact,null,React.createElement(K,{allowClear:!0,value:r,onChange:s})),React.createElement(Re.Compact,null,React.createElement(D,{onClick:()=>c()},"Generate")))},Xi=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement(Xe,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,min:r==null?void 0:r.min,max:r==null?void 0:r.max,step:r==null?void 0:r.step,onChange:n})},Zi=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement("div",null,React.createElement(K,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,onChange:s=>n(s.target.value)}))},eu=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,{currency:s}=acfwAdminApp.store_credits_page;return React.createElement("div",null,React.createElement(Xe,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,decimalSeparator:s.decimal_separator,parser:c=>Se(c!=null?c:"").toString(),onChange:n}))},tu=e=>{var c;const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,s=Object.keys((c=r==null?void 0:r.options)!=null?c:{}).map(o=>({value:o,label:r!=null&&r.options?r==null?void 0:r.options[o]:""}));return React.createElement("div",null,React.createElement(W,{placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:t,options:s,onChange:n}))},au=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e;return React.createElement("div",null,React.createElement(K.TextArea,{placeholder:r==null?void 0:r.placeholder,defaultValue:t,readOnly:!a,onChange:s=>n(s.target.value)}))},nu=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,[s,c]=f.useState(t==="yes");return React.createElement("div",null,React.createElement(Ya,{checked:s,disabled:!a,onChange:o=>{c(o.target.checked),n(o.target.checked?"yes":"no")}}),React.createElement("span",null,r.description))},ru=()=>{var s;const[e,t]=f.useState(!1),[a,r]=f.useState((s=acfwAdminApp.user_role_options)!=null?s:[]),n=async()=>{try{t(!0);const c=await x.get("coupons/v1/templates/options",{params:{type:"user_role"},cancelToken:J("fetch_user_roles")});c&&c.data&&(acfwAdminApp.user_role_options=c.data,r(c.data)),t(!1)}catch(c){console.log(c)}};return f.useEffect(()=>(acfwAdminApp.user_role_options||n(),()=>De("fetch_user_roles")),[]),{options:a,loading:e}},su=e=>{const{defaultValue:t,editable:a,fixtures:r,onChange:n}=e,{options:s,loading:c}=ru();return React.createElement("div",null,React.createElement(W,{mode:"multiple",placeholder:r==null?void 0:r.placeholder,disabled:!a,defaultValue:t.length?t:void 0,options:s,loading:c,onChange:o=>n(o)}))},Pe=({fetchOptions:e,optionMapper:t,debounceTimeout:a=800,...r})=>{const[n,s]=f.useState(!1),[c,o]=f.useState([]),d=f.useRef(0),i=f.useMemo(()=>qa(p=>{d.current+=1;const _=d.current;o([]),s(!0),e(p).then(g=>{_===d.current&&(o(g),s(!1))})},a),[e,a]);return React.createElement(W,{labelInValue:!0,filterOption:!1,onSearch:i,notFoundContent:n?React.createElement(pe,{size:"small"}):null,...r,options:c})},cu=e=>{const{fixtures:t,onChange:a}=e,[r,n]=f.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_products_and_variations",term:o,security:acfwAdminApp.nonces.search_products,exclude:r.map(m=>m.value)}});return Object.keys(d).map(m=>({label:d[m],value:m}))},c=o=>{n(o),a(o)};return React.createElement(Pe,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"}})},ou=e=>{const{fixtures:t,onChange:a}=e,[r,n]=f.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_taxonomy_terms",term:o,taxonomy:"product_cat",security:acfwAdminApp.nonces.search_taxonomy_terms,exclude:r.map(m=>m.value)}});return Object.keys(d).map(m=>({label:d[m].name,value:d[m].term_id}))},c=o=>{n(o),a(o)};return React.createElement(Pe,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"}})},lu=e=>{const{defaultValue:t,editable:a,onChange:r}=e,n=window.moment(t!=null?t:""),s=c=>{var o;r((o=c==null?void 0:c.format("YYYY-MM-DD HH:mm:ss"))!=null?o:"")};return React.createElement(We,{showTime:!0,defaultValue:n,disabled:!a,onChange:s})},iu=e=>{const{fixtures:t,onChange:a}=e,[r,n]=f.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"acfw_search_coupons",term:o,security:acfwAdminApp.nonces.search_products,include:!0,exclude:r.map(m=>m.value)}});return Object.keys(d).map(m=>({label:d[m],value:m}))},c=o=>{n(o),a(o)};return React.createElement(Pe,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"},value:r})},uu=e=>{const{fixtures:t,onChange:a}=e,[r,n]=f.useState([]),s=async o=>{const d=await jQuery.ajax({url:ajaxurl,type:"GET",data:{action:"woocommerce_json_search_customers",term:o,security:acfwAdminApp.nonces.search_customers,exclude:r.map(m=>m.value)}});return Object.keys(d).map(m=>({label:d[m].replace("&ndash;","–"),value:m}))},c=o=>{n(o),a(o)};return React.createElement(Pe,{mode:"multiple",placeholder:t==null?void 0:t.placeholder,fetchOptions:s,onChange:c,fixtures:t,style:{width:"100%"},value:r})},Dt={coupon_code:Ji,number:Xi,text:Zi,price:eu,select:tu,textarea:au,checkbox:nu,user_roles:su,products:cu,product_categories:ou,date:lu,coupons:iu,customers:uu};function du(e){return Dt[e]?Dt[e]:()=>l.createElement("div",null,"Field type not found")}const{setEditCouponTemplateFieldValue:mu}=q,pu=e=>{const{templateField:t,actions:a}=e,{field:r,value:n,field_value:s,fixtures:c}=t,o="input-field-".concat(r),d=du(c.type),i=m=>{a.setFieldValue({field:t.field,value:m})};return React.createElement("div",{className:"template-field"},React.createElement("div",{className:"template-field-inner"},React.createElement("label",{htmlFor:o},c.label),React.createElement("div",{className:"field-input-wrap"},React.createElement(d,{defaultValue:n,editable:s!=="readonly",fixtures:c,onChange:i}),c.tooltip&&React.createElement(Ke,{className:"acfw-field-tooltip",placement:"right",content:c.tooltip,trigger:"click"},React.createElement(Qe,null))),!!(t!=null&&t.error)&&React.createElement("div",{className:"field-error"},t.error)))},fu=e=>({actions:$({setFieldValue:mu},e)}),Eu=I(null,fu)(pu),Be=e=>{const{text:t,onClick:a,...r}=e,n=Q(),s=()=>{typeof a=="function"&&a(),n.goBack()};return React.createElement(D,{onClick:s,...r},t)},{validateEditCouponTemplateData:_u,createCouponFromTemplate:gu,setCreatedCouponResponseData:hu}=q,Ru=e=>{const{template:t,text:a,size:r,actions:n}=e,[s,c]=f.useState(!1),o=()=>{var m;n.validateEditCouponTemplateData();const d=(m=t==null?void 0:t.fields)==null?void 0:m.filter(p=>p.error);if(!t||d!=null&&d.length)return;const i={id:t.id,fields:t.fields.map(p=>({key:p.field,value:p.value,type:p.fixtures.type}))};c(!0),n.createCouponFromTemplate({data:i,successCB:p=>{c(!1),n.setCreatedCouponResponseData({data:p.data})}})};return React.createElement(D,{loading:s,type:"primary",onClick:o,size:r},a)},yu=e=>{var t,a,r,n;return{template:(a=(t=e.couponTemplates)==null?void 0:t.edit)!=null?a:null,formResponse:(n=(r=e.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},Su=e=>({actions:$({validateEditCouponTemplateData:_u,createCouponFromTemplate:gu,setCreatedCouponResponseData:hu},e)}),Tu=I(yu,Su)(Ru);var Ie={};function Ue(e){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(e)}Object.defineProperty(Ie,"__esModule",{value:!0});Ie.CopyToClipboard=void 0;var he=Ea(f),Cu=Ea(za),bu=["text","onCopy","options","children"];function Ea(e){return e&&e.__esModule?e:{default:e}}function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function It(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Pt(Object(a),!0).forEach(function(r){ot(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function wu(e,t){if(e==null)return{};var a=Au(e,t),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Au(e,t){if(e==null)return{};var a={},r=Object.keys(e),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function vu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ou(e,t,a){return t&&$t(e.prototype,t),a&&$t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}function je(e,t){return je=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},je(e,t)}function Du(e){var t=Iu();return function(){var r=we(e),n;if(t){var s=we(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Pu(this,n)}}function Pu(e,t){if(t&&(Ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _a(e)}function _a(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},we(e)}function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ga=function(e){Nu(a,e);var t=Du(a);function a(){var r;vu(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return r=t.call.apply(t,[this].concat(s)),ot(_a(r),"onClick",function(o){var d=r.props,i=d.text,m=d.onCopy,p=d.children,_=d.options,g=he.default.Children.only(p),y=(0,Cu.default)(i,_);m&&m(i,y),g&&g.props&&typeof g.props.onClick=="function"&&g.props.onClick(o)}),r}return Ou(a,[{key:"render",value:function(){var n=this.props;n.text,n.onCopy,n.options;var s=n.children,c=wu(n,bu),o=he.default.Children.only(s);return he.default.cloneElement(o,It(It({},c),{},{onClick:this.onClick}))}}]),a}(he.default.PureComponent);Ie.CopyToClipboard=ga;ot(ga,"defaultProps",{onCopy:void 0,options:void 0});var $u=Ie,Fe=$u.CopyToClipboard;Fe.CopyToClipboard=Fe;var ku=Fe;const Mu=e=>{const{value:t,...a}=e;return React.createElement(K.Group,{className:"copy-input-field-component",compact:!0},React.createElement(K,{style:{width:"calc(100% - 46px)"},...a,value:t,readOnly:!0}),React.createElement(ku.CopyToClipboard,{text:t,onCopy:()=>Y.success("Copy success")},React.createElement(D,null,React.createElement(Ka,null))))};const{clearCreatedCouponResponseData:xu}=q,Lu=e=>{const{formResponse:t,actions:a}=e,{labels:r}=acfwAdminApp.coupon_templates_page;if(t){const{message:n,coupon_edit_url:s}=t;return React.createElement("div",{className:"coupon-template-success-page"},React.createElement("div",{className:"inner"},React.createElement("div",{className:"content-box"},React.createElement("h2",null,n),React.createElement("p",null,r.success_page_desc),React.createElement(mt,{bordered:!0,size:"small",layout:"horizontal",column:1},t.fields.map(c=>React.createElement(mt.Item,{key:c.key,label:c.label},["coupon_code","coupon_url"].includes(c.key)?React.createElement(Mu,{value:c.value}):c.value)))),React.createElement("div",{className:"actions-box"},React.createElement(Be,{className:"create-another-btn",text:r.create_another_coupon,type:"primary",size:"large",onClick:()=>a.clearCreatedCouponResponseData()}),React.createElement(D,{href:"".concat(s,"&sendcoupon"),size:"large"},r.send_coupon),React.createElement(D,{href:s,size:"large"},r.edit_coupon))))}return null},Bu=e=>{var t,a;return{formResponse:(a=(t=e.couponTemplates)==null?void 0:t.formResponse)!=null?a:null}},Uu=e=>({actions:$({clearCreatedCouponResponseData:xu},e)}),ju=I(Bu,Uu)(Lu);const{readCouponTemplate:Fu,setEditCouponTemplate:Gu,validateEditCouponTemplateData:Hu,setCreatedCouponResponseData:Vu}=q,Yu=e=>{var p,_;const{template:t,formResponse:a,actions:r}=e,[n,s]=f.useState(!0),{labels:c}=acfwAdminApp.coupon_templates_page,o=new URLSearchParams(oe().search),d=(p=o.get("id"))!=null?p:"0",i=(_=o.get("is_review"))!=null?_:!1,m={rows:2,width:100};return f.useEffect(()=>{t&&(t!=null&&t.fields)||r.readCouponTemplate({id:parseInt(d),isReview:!!i,successCB:g=>{s(!1),r.setEditCouponTemplate({data:g.data})},failCB:()=>s(!1)})},[]),t!=null&&t.fields?a?React.createElement(ju,null):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement("div",{className:"template-form-main"},t?React.createElement(React.Fragment,null,React.createElement("div",{className:"template-heading"},React.createElement("h2",null,t.title),React.createElement("p",null,t.description)),React.createElement("div",{className:"form-instruction"},React.createElement("em",null,c.form_instruction))):React.createElement(z,{active:!0,paragraph:m}),React.createElement("div",{className:"template-fields"},t.fields.map((g,y)=>{var h;return React.createElement(Eu,{key:"".concat(g.field,"-").concat((h=g==null?void 0:g.error)!=null?h:""),templateField:g})})))),React.createElement(N,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Tu,{text:c.create_coupon,size:"large"}),React.createElement(Be,{text:c.cancel,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"}))))):React.createElement("div",{className:"acfw-coupon-template-form"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement("div",{className:"template-form-main template-loading"},n?React.createElement(pe,null):React.createElement("p",{className:"template-not-found"},c.template_not_found))),React.createElement(N,{span:6},React.createElement("div",{className:"template-actions"},React.createElement(Be,{text:c.go_back,onClick:()=>r.setEditCouponTemplate({data:null}),size:"large"})))))},qu=e=>{var t,a,r,n;return{template:(a=(t=e.couponTemplates)==null?void 0:t.edit)!=null?a:null,formResponse:(n=(r=e.couponTemplates)==null?void 0:r.formResponse)!=null?n:null}},zu=e=>({actions:$({readCouponTemplate:Fu,setEditCouponTemplate:Gu,validateEditCouponTemplateData:Hu,setCreatedCouponResponseData:Vu},e)}),Ku=I(qu,zu)(Yu);const{togglePremiumModal:Wu}=q,Qu=e=>{var g,y;const{showModal:t,actions:a}=e,{title:r,labels:n,enable_review_tab:s}=acfwAdminApp.coupon_templates_page,c=Q(),o=oe(),d=new URLSearchParams(o.search),i=(g=d.get("id"))!=null?g:null,m=Z(),p=(y=d.get("cttab"))!=null?y:"main",_=h=>{c.push("".concat(m,"admin.php?page=acfw-coupon-templates&cttab=").concat(h))};return React.createElement("div",{className:"coupon-templates-page"},React.createElement(se,{title:r,className:"coupon-templates-header"}),i?React.createElement(Ku,null):React.createElement(ce,{defaultActiveKey:p,className:"coupon-templates-tabs",onTabClick:_},React.createElement(ce.TabPane,{tab:n.recently_used_templates,key:"recent"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement(Mi,null)))),React.createElement(ce.TabPane,{tab:n.available_templates,key:"main"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement(Ui,null)),React.createElement(N,{span:6},React.createElement(Qi,null)))),s&&React.createElement(ce.TabPane,{tab:n.review_templates,key:"review"},React.createElement(H,{gutter:16},React.createElement(N,{span:18},React.createElement(Hi,null))))),React.createElement(Ee,{className:"coupon-templates-premium-modal",open:t,centered:!0,onCancel:()=>a.togglePremiumModal({show:!1}),footer:null},React.createElement(nt,{hideUpgrade:!0}),React.createElement("p",null,n.premium_modal_text),React.createElement(D,{type:"primary",href:"https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=upsell&utm_campaign=coupontemplates",size:"large",target:"_blank"},n.premium_modal_btn)))},Ju=e=>{var t,a;return{showModal:(a=(t=e.couponTemplates)==null?void 0:t.premiumModal)!=null?a:!1}},Xu=e=>({actions:$({togglePremiumModal:Wu},e)}),Zu=I(Ju,Xu)(Qu),ed=parseInt(acfwpElements.is_lpfw_active),td=parseInt(acfwpElements.is_agc_active),{setStorePage:ad}=ie,{readAdminNotices:nd}=at;acfwpElements.axiosInstance=x;const rd=e=>{const{page:t,actions:a}=e,n=new URLSearchParams(oe().search).get("page");return acfwpElements.appPage=n,f.useEffect(()=>{a.setStorePage({data:n||""})},[n,a]),f.useEffect(()=>{a.readAdminNotices({})},[]),l.createElement("div",{className:"app"},t==="acfw-dashboard"?l.createElement(tl,null):null,t==="acfw-store-credits"?l.createElement(jl,null):null,t==="acfw-coupon-templates"?l.createElement(Zu,null):null,t==="acfw-settings"?l.createElement(di,null):null,t.includes("acfw-license")?l.createElement(hi,null):null,t==="acfw-premium"?l.createElement(yi,null):null,t==="acfw-help"?l.createElement(Si,null):null,t==="acfw-about"?l.createElement(Ri,null):null,t==="acfw-loyalty-program"&&!ed?l.createElement(Ci,null):null,t==="acfw-advanced-gift-cards"&&!td?l.createElement(wi,null):null)},sd=e=>({page:e.page}),cd=e=>({actions:$({setStorePage:ad,readAdminNotices:nd},e)}),od=I(sd,cd)(rd);const{setStorePage:ld}=ie,id=e=>{const{page:t,notices:a,actions:r}=e,[n,s]=f.useState(""),c=Q(),o=Z(),{coupon_nav:{toplevel:d,dashboard:i,links:m},app_pages:p}=acfwAdminApp,_=g=>{c.push("".concat(o,"admin.php?page=").concat(g)),r.setStorePage({data:g})};return f.useEffect(()=>{document.body.classList.add(t),n&&document.body.classList.remove(n),s(t)},[t]),React.createElement(React.Fragment,null,React.createElement("a",{href:"".concat(o,"edit.php?post_type=shop_coupon"),className:"wp-has-submenu wp-has-current-submenu wp-menu-open menu-top toplevel_page_acfw-admin"},React.createElement("div",{className:"wp-menu-arrow"},React.createElement("div",null)),React.createElement("div",{className:"wp-menu-image dashicons-before dashicons-tickets-alt"},React.createElement("br",null)),React.createElement("div",{className:"wp-menu-name"},d,0<a.length&&React.createElement(React.Fragment,null," ",React.createElement("span",{className:"update-plugins count-".concat(a.length)},React.createElement("span",{className:"notices-count"},a.length))))),React.createElement("ul",{className:"wp-submenu wp-submenu-wrap"},React.createElement("li",{className:"wp-submenu-head","aria-hidden":"true"},d),React.createElement("li",{key:"acfw-dashboard",className:"wp-first-item ".concat(t==="acfw-dashboard"?"current":"")},React.createElement("button",{className:"buttonlink dashboard-link",onClick:()=>_("acfw-dashboard")},i)),m.map(({link:g,text:y},h)=>React.createElement("li",{key:h},React.createElement("a",{href:g},y))),p.map(({slug:g,label:y})=>React.createElement("li",{key:g,className:g===t?"current":""},React.createElement("button",{className:"buttonlink ".concat(g,"-link"),onClick:()=>_(g)},y)))))},ud=e=>({page:e.page,notices:e.adminNotices}),dd=e=>({actions:$({setStorePage:ld},e)}),md=I(ud,dd)(id),lt=Z(),it=wo(),pd={element:l,dom:Ge,router:{BrowserRouter:He,Route:Ve,useLocation:oe,useHistory:Q,Link:kt,Redirect:ya},redux:{bindActionCreators:$,createStore:Bt,combineReducers:Ut,applyMiddleware:jt,createSagaMiddleware:Lt,connect:I,sagaEffects:{all:xt,put:B,call:U,takeEvery:L}},lodash:window.lodash,antd:Wa,antdIcons:fn,moment:window.moment,pathPrefix:lt,validateURL:ua,appStore:{Provider:Ye,store:it,storeActions:{...ie}}};acfwpElements={...acfwpElements,...pd};document.querySelectorAll("#acfw_admin_app").forEach(e=>{Ge.render(l.createElement(Ye,{store:it},l.createElement(He,null,l.createElement(Ve,{path:"".concat(lt,"admin.php"),component:od}))),e)});document.querySelectorAll("#toplevel_page_acfw-admin").forEach(e=>{Ge.render(l.createElement(Ye,{store:it},l.createElement(He,null,l.createElement(Ve,{path:"".concat(lt,"admin.php"),component:md}))),e)});export{fd as __vite_legacy_guard};
