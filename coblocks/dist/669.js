(globalThis.webpackChunkcoblocks=globalThis.webpackChunkcoblocks||[]).push([[669],{3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=n(998).A},998:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(1609),s=n(5573);const r=(0,o.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(s.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"}))},8669:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>U});var o=n(1609),s=n(2485),r=n.n(s),l=n(9859),a=n.n(l),c=n(8468),i=n(9668),m=n(1455),u=n.n(m),d=n(7723),p=n(9491),h=n(6087),g=n(3832),v=n(8443),b=n(7143),f=n(4715),_=n(6427),y=n(4871),k=n.n(y);const E=({children:e,gutter:t,gutterCustom:n,className:o,condition:s=!0})=>{if(!(0,h.isValidElement)(e))return e;if(void 0!==e.props.blockProps){const o={blockProps:{...e.props.blockProps,className:r()(e.props.blockProps.className,{[`has-${t}-gutter`]:t&&!!s})}};return"custom"===t&&void 0!==n&&(o.blockProps.style={"--coblocks-custom-gutter":`${n}em`}),(0,h.cloneElement)(e,o)}const l={className:r()(o,e.props.className,{[`has-${t}-gutter`]:t&&!!s})};return e.props.style&&(l.style={...e.props.style}),"custom"===t&&void 0!==n&&(l.style={...l.style,"--coblocks-custom-gutter":`${n}em`}),(0,h.cloneElement)(e,l)};var w=n(3803),S=n(5573);const x=(0,o.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(S.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})),z=(0,o.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(S.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"})),P={};P.styleHorizontalImageRight=(0,o.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(_.Path,{d:"m48 11.0910645v-10.00000005h-10v10.00000005zm-40-6.00000005h24v-2h-24zm0 4v-2h18v2zm40 16.00000005h-10v-10h10zm-40-6v-2h24v2zm0 4v-2h18v2z"})),P.styleHorizontalImageLeft=(0,o.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(_.Path,{d:"m18 11.0910645v-10.00000005h-10v10.00000005zm6-6.00000005h24v-2h-24zm0 4v-2h18v2zm-6 16.00000005h-10v-10h10zm6-6v-2h24v2zm0 4v-2h18v2z"})),P.styleStacked=(0,o.createElement)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 26",height:"26",width:"56"},(0,o.createElement)(_.Path,{d:"m26 17v-16h-16v16zm-16 4h10v-2h-10zm0 4v-2h10v2zm36-8h-16v-16h16zm-16 4v-2h10v2zm0 4v-2h10v2z"}));const C=P;function N(){return(0,o.createElement)(_.PanelBody,{initialOpen:!1,title:(0,o.createElement)("span",{className:"coblocks-ellipsis-loading"},(0,d.__)("Loading Inspector","coblocks"))},(0,o.createElement)(_.Spinner,null))}function A({children:e}){return(0,o.createElement)(f.InspectorControls,null,(0,o.createElement)(h.Suspense,{fallback:(0,o.createElement)(N,null)},e))}const I=(0,h.lazy)((()=>n.e(342).then(n.bind(n,4342)))),L={per_page:-1},R=wp.tokenList,T=[{name:"stacked",
/* translators: block style */
label:(0,d.__)("Stacked","coblocks"),icon:C.styleStacked,isDefault:!0},{name:"horizontal",
/* translators: block style */
label:(0,d.__)("Horizontal","coblocks"),icon:C.styleHorizontalImageRight,iconAlt:C.styleHorizontalImageLeft}];function V(e,t){for(const n of new R(t).values()){if(-1===n.indexOf("is-style-"))continue;const t=n.substring(9),o=(0,c.find)(e,{name:t});if(o)return o}return(0,c.find)(e,"isDefault")}const U=(0,p.compose)([(0,b.withSelect)(((e,t)=>{const{postsToShow:n,order:o,orderBy:s,categories:r,categoryRelation:l}=t.attributes,{getEntityRecords:a,getMedia:i}=e("core"),{getCurrentPost:m}=e("core/editor"),u=_.QueryControls.toString().includes("selectedCategories"),d=m();return{latestPosts:u?(()=>{const t=r&&r.length>0?r.map((e=>e?.id)):[],m=(0,c.pickBy)({categories:t,order:o,orderby:s,per_page:"and"===l?"-1":n,exclude:d.id},(e=>!(0,c.isUndefined)(e)));let u=a("postType","post",m);return"and"===l&&u&&(u=u.filter((e=>(0,c.isEqual)(e.categories.concat().sort(),t.concat().sort()))).slice(0,n)),Array.isArray(u)?u.map((t=>{if(t.featured_media){const n=i(t.featured_media);let o=(0,c.get)(n,["media_details","sizes","source_url"],null);return o||(o=(0,c.get)(n,"source_url",null)),{...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)}}return t})):u})():(()=>{const t=(0,c.pickBy)({categories:r,order:o,orderby:s,per_page:n,exclude:d.id},(e=>!(0,c.isUndefined)(e)));let l=a("postType","post",t);return l&&(l=l.map((t=>({...t,featured_media_object:t.featured_media&&e("core").getMedia(t.featured_media)})))),l})(),useUpdatedQueryControls:u}}))])((e=>{const{attributes:t,setAttributes:n,className:s,latestPosts:l}=e,{displayPostContent:m,displayPostDate:b,displayPostLink:y,postLink:S,postFeedType:P,externalRssUrl:C,columns:N,postsToShow:U,excerptLength:B,listPosition:F,imageSize:H,imageStyle:M}=t,[j,O]=(0,h.useState)([]),[G,$]=(0,h.useState)(C),[D]=(0,h.useState)(2),[Q]=(0,h.useState)(1),[Z,q]=(0,h.useState)(!!(s.includes("is-style-stacked")&&N!==D||s.includes("is-style-horizontal")&&N!==Q)),J=(0,p.usePrevious)(s);let K=(0,h.useRef)(!0);const W=V(T,s);(0,h.useEffect)((()=>(se(W),u()({path:(0,g.addQueryArgs)("/wp/v2/categories",L)}).then((e=>{K&&O(e)})).catch((()=>{K&&O([])})),()=>{K=!1})),[]),(0,h.useEffect)((()=>{y&&!m&&n({displayPostLink:!1}),s!==J&&(s.includes("is-style-stacked")&&n({columns:Z?N:D}),s.includes("is-style-horizontal")&&n({columns:Z?N:Q}))}),[J,s,Z,N,D,Q]);const X=[{icon:w.A,title:(0,d.__)("Edit RSS URL","coblocks"),onClick:()=>$(!0)}],Y=Array.isArray(l)&&l.length,ee=Array.isArray(l)&&l.length>U?l.slice(0,U):l,te=(0,c.some)(ee,"featured_media_object"),ne=[{icon:(0,o.createElement)(_.Icon,{icon:x}),title:(0,d.__)("Image on left","coblocks"),isActive:"left"===F,onClick:()=>n({listPosition:"left"})},{icon:(0,o.createElement)(_.Icon,{icon:z}),title:(0,d.__)("Image on right","coblocks"),isActive:"right"===F,onClick:()=>n({listPosition:"right"})}],oe=(0,v.__experimentalGetSettings)().formats.date,se=e=>{const o=V(T,s),r=function(e,t,n){const o=new R(e);return t&&o.remove("is-style-"+t.name),o.add("is-style-"+n.name),o.value}(t.className,o,e);n({className:r})},re=()=>{q(!0)};if(!Y&&"internal"===P)return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(A,null,(0,o.createElement)(I,{...e,attributes:t,hasPosts:Y,hasFeaturedImage:te,editing:G,activeStyle:W,styleOptions:T,onUpdateStyle:se,categoriesList:j,postCount:l&&l.length})),(0,o.createElement)(_.Placeholder,{icon:(0,o.createElement)(_.Icon,{icon:i.xy6}),label:(0,d.__)("Blog Posts","coblocks")},Array.isArray(l)?(0,o.createElement)(o.Fragment,null,(0,d.__)("No posts found. Start publishing or add posts from an RSS feed.","coblocks"),(0,o.createElement)(_.Button,{className:"components-placeholder__cancel-button",title:(0,d.__)("Retrieve an External Feed","coblocks"),isSecondary:!0,onClick:()=>{n({postFeedType:"external"})}},(0,d.__)("Use External Feed","coblocks"))):(0,o.createElement)(_.Spinner,null)));if(G&&"external"===P)return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(A,null,(0,o.createElement)(I,{...e,onUserModifiedColumn:re,attributes:t,hasPosts:Y,hasFeaturedImage:!1,editing:G,activeStyle:W,styleOptions:T,onUpdateStyle:se,categoriesList:j,postCount:l&&l.length})),(0,o.createElement)(_.Placeholder,{icon:(0,o.createElement)(_.Icon,{icon:i.xy6}),label:(0,d.__)("RSS Feed","coblocks"),instructions:(0,d.__)("RSS URLs are generally located at the /feed/ directory of a site.","coblocks")},(0,o.createElement)("form",{onSubmit:e=>{e.preventDefault(),C&&$(!1)}},(0,o.createElement)(_.TextControl,{placeholder:(0,d.__)("https://example.com/feed…","coblocks"),value:C,onChange:e=>n({externalRssUrl:e}),className:"components-placeholder__input"}),(0,o.createElement)(_.Button,{type:"submit",disabled:!C},(0,d.__)("Use URL","coblocks")))));const le=a()(s,"is-style-horizontal"),ae=a()(s,"is-style-stacked");return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(A,null,(0,o.createElement)(I,{...e,onUserModifiedColumn:re,attributes:t,hasPosts:Y,hasFeaturedImage:te,editing:G,activeStyle:W,styleOptions:T,onUpdateStyle:se,categoriesList:j,postCount:l&&l.length})),(0,o.createElement)(f.BlockControls,null,le&&(0,o.createElement)(_.Toolbar,{controls:ne}),"external"===P&&(0,o.createElement)(_.Toolbar,{controls:X})),"external"===P&&(0,o.createElement)(_.Disabled,null,(0,o.createElement)(k(),{block:"coblocks/posts",attributes:t})),"internal"===P&&(0,o.createElement)("div",{className:s},(0,o.createElement)(E,{...t,condition:t.columns>=2},(0,o.createElement)("div",{className:r()("wp-block-coblocks-posts__inner",{"has-columns":N,[`has-${N}-columns`]:N,"has-responsive-columns":N,"has-image-right":le&&"right"===F,[`has-${H}-image`]:le,[`has-${M}-image`]:M})},ee.map(((e,t)=>{const s=e.featured_media_object?e.featured_media_object.source_url:null,l="url("+s+")",a=r()("wp-block-coblocks-posts__content",{"self-center":le&&!m&&N<=2}),c=e.title.rendered.trim();let i=e.excerpt.rendered;""===e.excerpt.raw&&(i=e.content.raw);const u=document.createElement("div");return u.innerHTML=i,i=u.textContent||u.innerText||"",(0,o.createElement)("div",{key:t,className:"wp-block-coblocks-posts__item"},s&&(0,o.createElement)("div",{className:"wp-block-coblocks-posts__image"},(0,o.createElement)("div",{className:"bg-cover bg-center-center",style:{backgroundImage:l}})),(0,o.createElement)("div",{className:a},ae&&b&&e.date_gmt&&(0,o.createElement)("time",{dateTime:(0,v.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,v.dateI18n)(oe,e.date_gmt)),(0,o.createElement)(_.Disabled,null,(0,o.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener",alt:c},c?(0,o.createElement)(h.RawHTML,null,c)
/* translators: placeholder when a post has no title */:(0,d.__)("(no title)","coblocks"))),le&&b&&e.date_gmt&&(0,o.createElement)("time",{dateTime:(0,v.format)("c",e.date_gmt),className:"wp-block-coblocks-posts__date"},(0,v.dateI18n)(oe,e.date_gmt)),m&&(0,o.createElement)("div",{className:"wp-block-coblocks-posts__excerpt"},(0,o.createElement)(h.RawHTML,{key:"html"},B<i.trim().split(" ").length?i.trim().split(" ",B).join(" ")+"…":i.trim().split(" ",B).join(" "))),y&&(0,o.createElement)(f.RichText,{tagName:"a",className:"wp-block-coblocks-posts__more-link",onChange:e=>n({postLink:e}),value:S,placeholder:(0,d.__)("Read more","coblocks"),multiline:!1,withoutInteractiveFormatting:!1,isSelected:!1})))}))))))}))},2485:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=s.apply(null,n);l&&e.push(l)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},6131:(e,t,n)=>{var o=n(2523),s=n(5463),r=n(6959);e.exports=function(e,t,n){return t==t?r(e,t,n):o(e,s,n)}},5463:e=>{e.exports=function(e){return e!=e}},514:(e,t,n)=>{var o=n(4932);e.exports=function(e,t){return o(t,(function(t){return e[t]}))}},6959:e=>{e.exports=function(e,t,n){for(var o=n-1,s=e.length;++o<s;)if(e[o]===t)return o;return-1}},9859:(e,t,n)=>{var o=n(6131),s=n(4894),r=n(5015),l=n(1489),a=n(5880),c=Math.max;e.exports=function(e,t,n,i){e=s(e)?e:a(e),n=n&&!i?l(n):0;var m=e.length;return n<0&&(n=c(m+n,0)),r(e)?n<=m&&e.indexOf(t,n)>-1:!!m&&o(e,t,n)>-1}},5015:(e,t,n)=>{var o=n(2552),s=n(6449),r=n(346);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==o(e)}},5880:(e,t,n)=>{var o=n(514),s=n(5950);e.exports=function(e){return null==e?[]:o(e,s(e))}}}]);