import{G as V,b2 as E,b as h,d as R,k as G,q as U,v as S,ab as L,T as _,b3 as g,L as q,J,A as K,y as Q,x as X,as as Y}from"../apps/settings/index.7e5fa022.js";import{w as N,i as Z}from"./motion.0613b233.js";import{u as i}from"./useState.ca06f0b3.js";const ee=e=>{const{componentCls:t,colorPrimary:o}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(o,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}},te=V("Wave",e=>[ee(e)]);function oe(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function m(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&oe(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ae(e){const{borderTopColor:t,borderColor:o,backgroundColor:r}=getComputedStyle(e);return m(t)?t:m(o)?o:m(r)?r:null}function b(e){return Number.isNaN(e)?0:e}const ne=R({props:{target:G(),className:String},setup(e){const t=U(null),[o,r]=i(null),[u,p]=i([]),[v,l]=i(0),[f,a]=i(0),[c,$]=i(0),[k,O]=i(0),[B,I]=i(!1);function w(){const{target:n}=e,s=getComputedStyle(n);r(ae(n));const W=s.position==="static",{borderLeftWidth:z,borderTopWidth:A}=s;l(W?n.offsetLeft:b(-parseFloat(z))),a(W?n.offsetTop:b(-parseFloat(A))),$(n.offsetWidth),O(n.offsetHeight);const{borderTopLeftRadius:F,borderTopRightRadius:D,borderBottomLeftRadius:H,borderBottomRightRadius:M}=s;p([F,D,M,H].map(P=>b(parseFloat(P))))}let d,y,C;const T=()=>{clearTimeout(C),N.cancel(y),d==null||d.disconnect()},x=()=>{var n;const s=(n=t.value)===null||n===void 0?void 0:n.parentElement;s&&(E(null,s),s.parentElement&&s.parentElement.removeChild(s))};S(()=>{T(),C=setTimeout(()=>{x()},5e3);const{target:n}=e;n&&(y=N(()=>{w(),I(!0)}),typeof ResizeObserver<"u"&&(d=new ResizeObserver(w),d.observe(n)))}),L(()=>{T()});const j=n=>{n.propertyName==="opacity"&&x()};return()=>{if(!B.value)return null;const n={left:"".concat(v.value,"px"),top:"".concat(f.value,"px"),width:"".concat(c.value,"px"),height:"".concat(k.value,"px"),borderRadius:u.value.map(s=>"".concat(s,"px")).join(" ")};return o&&(n["--wave-color"]=o.value),h(_,{appear:!0,name:"wave-motion",appearFromClass:"wave-motion-appear",appearActiveClass:"wave-motion-appear",appearToClass:"wave-motion-appear wave-motion-appear-active"},{default:()=>[h("div",{ref:t,class:e.className,style:n,onTransitionend:j},null)]})}}});function se(e,t){const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",e==null||e.insertBefore(o,e==null?void 0:e.firstChild),E(h(ne,{target:e,className:t},null),o)}function re(e,t){function o(){const r=g(e);se(r,t.value)}return o}const de=R({compatConfig:{MODE:3},name:"Wave",props:{disabled:Boolean},setup(e,t){let{slots:o}=t;const r=Y(),{prefixCls:u}=q("wave",e),[,p]=te(u),v=re(r,J(()=>K(u.value,p.value)));let l;const f=()=>{g(r).removeEventListener("click",l,!0)};return S(()=>{Q(()=>e.disabled,()=>{f(),X(()=>{const a=g(r);a==null||a.removeEventListener("click",l,!0),!(!a||a.nodeType!==1||e.disabled)&&(l=c=>{c.target.tagName==="INPUT"||!Z(c.target)||!a.getAttribute||a.getAttribute("disabled")||a.disabled||a.className.includes("disabled")||a.className.includes("-leave")||v()},a.addEventListener("click",l,!0))})},{immediate:!0,flush:"post"})}),L(()=>{f()}),()=>{var a;return(a=o.default)===null||a===void 0?void 0:a.call(o)[0]}}});export{de as W};
