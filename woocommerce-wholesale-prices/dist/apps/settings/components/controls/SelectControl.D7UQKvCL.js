import{d as K,t as j,s as q,r as f,ah as E,o as u,c as y,a as w,b as I,u as i,e as h,w as b,U as S,V as k,p as g,i as P}from"../../index.d4AqeQbB.js";import{u as $}from"../../../../common/settings-store.Bau8zkG9.js";/* empty css                                                                                      */import"../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_22edd6df_lang.DWIfdCs7.js";/* empty css                                                                                                 */import{_ as z}from"../../../../common/LabelControl.vue_vue_type_script_setup_true_lang.iWWcVs0A.js";/* empty css                                                                                        */import{S as M,A as D}from"../../../../common/index.CLJrPEST.js";import"../../../../common/index.Bzxotkow.js";import"../../../../common/motion.BEA1PKGq.js";import"../../../../common/KeyCode.B_gOgbN6.js";import"../../../../common/SearchOutlined.C09ldV6m.js";import"../../../../common/pickAttrs.DzNMJuLY.js";import"../../../../common/slide.S3MLXSGk.js";import"../../../../common/index.DiOR2saE.js";import"../../../../common/isMobile.BbN7I0i_.js";import"../../../../common/useMergedState.CHIj8xMB.js";import"../../../../common/useState.BbSECcve.js";import"../../../../common/DownOutlined.VJxUYYTS.js";import"../../../../common/FormItemContext.txzqapcQ.js";import"../../../../common/createContext.DMZNmA7p.js";import"../../../../common/statusUtils.BiJ08sw9.js";import"../../../../common/compact-item.BtLlGg8i.js";const G={class:"wwp-row-handle"},J={class:"wwp-left-content"},Q={class:"wwp-right-content"},W=["innerHTML"],X=["innerHTML"],Y=["innerHTML"],Ce=K({__name:"SelectControl",props:{params:{type:Object,required:!0}},emits:["fieldData","selectedCondition","selectedDependent"],setup(B,{emit:U}){var H;const N=B,{params:O}=j(N),R=$(),{showPopup:C,componentUpgrade:F,selectedConditionKey:s,selectedConditionValue:r,editedRowKey:x,dynamicOptions:a}=q(R),e=O.value,l=f({}),v=f(e.default),n=f("");if(typeof v.value<"u"&&v.value!==null&&(n.value=v.value),typeof e.dependent_option<"u"&&e.dependent_option!==null?typeof a.value[e.dependent_option]<"u"&&a.value[e.dependent_option]!==null&&(l.value=e.options[a.value[e.dependent_option]],n.value=v.value):(typeof e.dependent<"u"&&e.dependent,l.value=e.options),typeof e.with_condition<"u"&&e.with_condition!==null)if(x.value===null)s.value!==""&&r.value!==""&&s.value===e.id&&(n.value=r.value);else if(s.value!==""&&r.value!=="")s.value===e.id&&(n.value=r.value);else{const t=n.value;n.value=t}const V=f((H=e.disabled)!=null?H:!1),m=U,d=f([]),T=f([]);if(n.value!==""){d.value[e.id]=n.value;let t=l.value[n.value];Array.isArray(n.value)&&(t=n.value.map(o=>l.value[o])),typeof e.label_id<"u"&&e.label_id!==null&&(d.value[e.label_id]=t),m("fieldData",d.value)}const A=t=>{if(typeof e.pro<"u"&&e.pro!==null)typeof e.pro_on_active<"u"&&e.pro_on_active!==null?e.pro_on_active&&n.value!==""&&(C.value=!0,n.value=""):(C.value=!0,n.value=v.value),F.value=e.pro;else{let o=l.value[t];Array.isArray(t)&&(o=t.map(_=>l.value[_])),d.value[e.id]=t,typeof e.label_id<"u"&&e.label_id!==null&&(d.value[e.label_id]=o),typeof e.column_dependent<"u"&&e.column_dependent!==null&&(d.value[e.column_dependent]=t,typeof e.column_dependent_text<"u"&&e.column_dependent_text!==null&&(d.value[e.column_dependent_text]=o)),m("fieldData",d.value),typeof e.with_condition<"u"&&e.with_condition!==null&&e.with_condition&&(s.value=e.id,r.value=t,T.value[e.id]=t,m("selectedCondition",T.value)),typeof e.dependent<"u"&&e.dependent!==null&&e.dependent&&(s.value=e.id,r.value=t,a.value[e.id]=t,m("selectedDependent",a)),n.value=t}};return typeof e.edit_options<"u"&&e.edit_options!==null&&(x.value===null?l.value=E(l.value,e.edit_options):typeof e.dependent_option<"u"&&e.dependent_option!==null?typeof a.value[e.dependent_option]<"u"&&a.value[e.dependent_option]!==null&&(l.value=e.options[a.value[e.dependent_option]]):(typeof e.dependent<"u"&&e.dependent,l.value=e.options)),(t,o)=>{var _,L;return u(),y("div",G,[w("div",J,[I(i(z),{params:i(e)},null,8,["params"])]),w("div",Q,[i(e).multiple?(u(),h(i(D),{key:0,ref:"select",value:n.value,"onUpdate:value":o[0]||(o[0]=p=>n.value=p),name:i(e).id,mode:"multiple",style:{"max-width":"320px",width:"100%"},disabled:V.value,onChange:A},{default:b(()=>[(u(!0),y(S,null,k(l.value,(p,c)=>(u(),h(i(M),{key:c,value:c},{default:b(()=>[w("span",{innerHTML:i(g)(p)},null,8,W)]),_:2},1032,["value"]))),128))]),_:1},8,["value","name","disabled"])):(u(),h(i(D),{key:1,ref:"select",value:n.value,"onUpdate:value":o[1]||(o[1]=p=>n.value=p),name:i(e).id,style:{"max-width":"320px",width:"100%"},disabled:V.value,onChange:A},{default:b(()=>[(u(!0),y(S,null,k(l.value,(p,c)=>(u(),h(i(M),{key:c,value:c},{default:b(()=>[w("span",{innerHTML:i(g)(p)},null,8,X)]),_:2},1032,["value"]))),128))]),_:1},8,["value","name","disabled"])),i(e).description!=="undefined"?(u(),y("p",{key:2,innerHTML:i(g)((L=(_=i(e))==null?void 0:_.description)!=null?L:"")},null,8,Y)):P("",!0)])])}}});export{Ce as default};
