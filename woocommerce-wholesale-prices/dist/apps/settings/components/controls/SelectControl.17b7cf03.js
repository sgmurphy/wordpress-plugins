import{d as F,t as K,s as j,r as f,ah as q,o as u,c as y,a as w,b as E,u as i,e as h,w as b,U as S,V as k,p as g,i as I}from"../../index.7e5fa022.js";import{u as P}from"../../../../common/settings-store.2e02aea6.js";/* empty css                                                                                      */import"../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_1e9aff06_lang.20d3a2f9.js";/* empty css                                                                                                 */import{_ as $}from"../../../../common/LabelControl.vue_vue_type_script_setup_true_lang.17d7dea1.js";/* empty css                                                                                        */import{S as M,A as D}from"../../../../common/index.d6d25a06.js";import"../../../../common/index.d7c7b51e.js";import"../../../../common/motion.0613b233.js";import"../../../../common/KeyCode.5c67594e.js";import"../../../../common/SearchOutlined.ee7ae234.js";import"../../../../common/pickAttrs.d443463a.js";import"../../../../common/slide.233af8a0.js";import"../../../../common/index.1dcb9c38.js";import"../../../../common/isMobile.358fd6c2.js";import"../../../../common/useMergedState.28e4599a.js";import"../../../../common/useState.ca06f0b3.js";import"../../../../common/DownOutlined.bfa465e3.js";import"../../../../common/FormItemContext.35071f2d.js";import"../../../../common/createContext.d5228530.js";import"../../../../common/statusUtils.d389f965.js";import"../../../../common/compact-item.42ee0b0f.js";const z={class:"wwp-row-handle"},G={class:"wwp-left-content"},J={class:"wwp-right-content"},Q=["innerHTML"],W=["innerHTML"],X=["innerHTML"],ge=F({__name:"SelectControl",props:{params:{type:Object,required:!0}},emits:["fieldData","selectedCondition","selectedDependent"],setup(B,{emit:_}){var H;const U=B,{params:N}=K(U),O=P(),{showPopup:C,componentUpgrade:R,selectedConditionKey:s,selectedConditionValue:r,editedRowKey:x,dynamicOptions:o}=j(O),e=N.value,l=f({}),v=f(e.default),n=f("");if(typeof v.value<"u"&&v.value!==null&&(n.value=v.value),typeof e.dependent_option<"u"&&e.dependent_option!==null?typeof o.value[e.dependent_option]<"u"&&o.value[e.dependent_option]!==null&&(l.value=e.options[o.value[e.dependent_option]],n.value=v.value):(typeof e.dependent<"u"&&e.dependent,l.value=e.options),typeof e.with_condition<"u"&&e.with_condition!==null)if(x.value===null)s.value!==""&&r.value!==""&&s.value===e.id&&(n.value=r.value);else if(s.value!==""&&r.value!=="")s.value===e.id&&(n.value=r.value);else{const t=n.value;n.value=t}const V=f((H=e.disabled)!=null?H:!1),d=f([]),T=f([]);if(n.value!==""){d.value[e.id]=n.value;let t=l.value[n.value];Array.isArray(n.value)&&(t=n.value.map(a=>l.value[a])),typeof e.label_id<"u"&&e.label_id!==null&&(d.value[e.label_id]=t),_("fieldData",d.value)}const A=t=>{if(typeof e.pro<"u"&&e.pro!==null)typeof e.pro_on_active<"u"&&e.pro_on_active!==null?e.pro_on_active&&n.value!==""&&(C.value=!0,n.value=""):(C.value=!0,n.value=v.value),R.value=e.pro;else{let a=l.value[t];Array.isArray(t)&&(a=t.map(m=>l.value[m])),d.value[e.id]=t,typeof e.label_id<"u"&&e.label_id!==null&&(d.value[e.label_id]=a),typeof e.column_dependent<"u"&&e.column_dependent!==null&&(d.value[e.column_dependent]=t,typeof e.column_dependent_text<"u"&&e.column_dependent_text!==null&&(d.value[e.column_dependent_text]=a)),_("fieldData",d.value),typeof e.with_condition<"u"&&e.with_condition!==null&&e.with_condition&&(s.value=e.id,r.value=t,T.value[e.id]=t,_("selectedCondition",T.value)),typeof e.dependent<"u"&&e.dependent!==null&&e.dependent&&(s.value=e.id,r.value=t,o.value[e.id]=t,_("selectedDependent",o)),n.value=t}};return typeof e.edit_options<"u"&&e.edit_options!==null&&(x.value===null?l.value=q(l.value,e.edit_options):typeof e.dependent_option<"u"&&e.dependent_option!==null?typeof o.value[e.dependent_option]<"u"&&o.value[e.dependent_option]!==null&&(l.value=e.options[o.value[e.dependent_option]]):(typeof e.dependent<"u"&&e.dependent,l.value=e.options)),(t,a)=>{var m,L;return u(),y("div",z,[w("div",G,[E(i($),{params:i(e)},null,8,["params"])]),w("div",J,[i(e).multiple?(u(),h(i(D),{key:0,ref:"select",value:n.value,"onUpdate:value":a[0]||(a[0]=p=>n.value=p),name:i(e).id,mode:"multiple",style:{"max-width":"320px",width:"100%"},disabled:V.value,onChange:A},{default:b(()=>[(u(!0),y(S,null,k(l.value,(p,c)=>(u(),h(i(M),{key:c,value:c},{default:b(()=>[w("span",{innerHTML:i(g)(p)},null,8,Q)]),_:2},1032,["value"]))),128))]),_:1},8,["value","name","disabled"])):(u(),h(i(D),{key:1,ref:"select",value:n.value,"onUpdate:value":a[1]||(a[1]=p=>n.value=p),name:i(e).id,style:{"max-width":"320px",width:"100%"},disabled:V.value,onChange:A},{default:b(()=>[(u(!0),y(S,null,k(l.value,(p,c)=>(u(),h(i(M),{key:c,value:c},{default:b(()=>[w("span",{innerHTML:i(g)(p)},null,8,W)]),_:2},1032,["value"]))),128))]),_:1},8,["value","name","disabled"])),i(e).description!=="undefined"?(u(),y("p",{key:2,innerHTML:i(g)((L=(m=i(e))==null?void 0:m.description)!=null?L:"")},null,8,X)):I("",!0)])])}}});export{ge as default};
