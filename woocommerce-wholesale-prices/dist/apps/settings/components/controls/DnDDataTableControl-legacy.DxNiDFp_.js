System.register(["../../index-legacy.DPQ6n18a.js","../../../../common/settings-store-legacy.CdiTRmyl.js","../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_22edd6df_lang-legacy.D8yDTwPT.js","../../../../common/EditOutlined-legacy.BvzjtWiy.js","../../../../common/DeleteOutlined-legacy.DfePoDxB.js","../../../../common/cloneDeep-legacy.D8kZilT4.js","../../../../common/index-legacy.DVS7avyj.js","../../../../common/_plugin-vue_export-helper-legacy.DgAO6S8O.js","../../../../common/motion-legacy.DJuHWLJs.js","../../../../common/_assignValue-legacy.DkvNSkRx.js","../../../../common/_getPrototype-legacy.D0LW3mPW.js","../../../../common/index-legacy.DMk1JnJp.js","../../../../common/index-legacy.D14KrnAq.js","../../../../common/index-legacy.DPUpTeOZ.js","../../../../common/useState-legacy.2KNpATnI.js","../../../../common/warning-legacy.BV4CRm2j.js","../../../../common/compact-item-legacy.CJ90dT-1.js","../../../../common/createContext-legacy.Br6p6aG5.js","../../../../common/useMergedState-legacy.BhAX_xCK.js","../../../../common/KeyCode-legacy.CYgXvjDm.js","../../../../common/ActionButton-legacy.DZZ_7eLr.js"],(function(e,l){"use strict";var a,t,o,n,d,c,s,i,r,u,m,y,g,p,_,f,j,v,k,b,D,h,w,x,C,S;return{setters:[e=>{a=e.d,t=e.t,o=e.s,n=e.S,d=e.r,c=e.o,s=e.c,i=e.a,r=e.U,u=e.V,m=e.h,y=e.u,g=e.b,p=e.w,_=e.n,f=e.i,j=e.f,v=e.e,k=e.$},e=>{b=e.u},e=>{D=e.d},e=>{h=e.E},e=>{w=e.D},e=>{x=e.c},e=>{C=e.A},e=>{S=e._},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l={class:"wwp-full-width-table"},O={class:"thead-dark"},V={key:0,class:"editable-row-operations"},U={key:0,class:"editable-cell"},q=["onClick"];e("default",S(a({__name:"DnDDataTableControl",props:{params:{type:Object,required:!0},data:{type:Object,required:!0},editFields:{type:Object,required:!1,default:()=>({})},editedFields:{type:Number,required:!1,default:0}},emits:["fieldUpdatedData","fieldDeletedData","updateDataSource"],setup(e,{emit:a}){const S=e,{params:A,data:E,editedFields:F}=t(S),T=b(),{inlineMappingEdit:B}=o(T),I=A.value,K=I.fields,M=n({data:window.lodash.sortBy(E.value,(e=>void 0!==e.field_order&&null!==e.field_order?e.field_order:0))}),P=I.editable,N=I.can_delete,Q=I.delete_action,R=I.sort_action,W=d(I.show_in_table),X=d(!1),Y=n([]),Z=F,$=a,z=d([]),G=async e=>{const l=[{key:"action",value:R}],a=M.data;l.push({key:"list",value:a});try{const e=await k(l,!1,!0);null!=e&&$("updateDataSource",e)}catch(t){console.error(t)}};return(e,a)=>(c(),s("table",l,[i("thead",O,[i("tr",null,[(c(!0),s(r,null,u(y(K),((e,l)=>(c(),s("th",{key:l,scope:"col"},m(e.title),1)))),128))])]),g(y(D),{modelValue:M.data,"onUpdate:modelValue":a[0]||(a[0]=e=>M.data=e),tag:"tbody","item-key":"name",onEnd:G},{item:p((({element:e})=>[i("tr",{class:_({"not-draggable":!(null!=e&&e.draggable)})},[(c(!0),s(r,null,u(W.value,((l,a)=>{return c(),s("td",{key:a,scope:"row"},["operation"===l?(c(),s("div",V,[null===y(Z)?(c(),s("div",U,[y(P)?(c(),s("a",{key:0,onClick:l=>{return a=e.key,Y[a]=x(M.data.filter((e=>a===e.key))[0]),z.value=Y[a],B.value=!1,void $("fieldUpdatedData",z.value);var a}},[g(y(h))],8,q)):f("",!0),j(" Â  "),y(N)&&"no"!==(null==e?void 0:e.deletetable)?(c(),s(r,{key:1},[M.data.length?(c(),v(y(C),{key:0,title:"Sure to delete?",onConfirm:l=>(async e=>{const l=M.data.filter((l=>e===l.key))[0],a=[{key:"action",value:Q}];for(const[o,n]of Object.entries(l))a.push({key:o,value:n});try{"success"===await k(a)&&($("fieldDeletedData",e),M.data=M.data.filter((l=>l.key!==e)))}catch(t){console.error(t)}finally{X.value=!1}})(e.key)},{default:p((()=>[i("a",null,[g(y(w))])])),_:2},1032,["onConfirm"])):f("",!0)],64)):f("",!0)])):f("",!0)])):(c(),s(r,{key:1},[j(m((t=e[l],Array.isArray(t)?t.join(", "):t)),1)],64))]);var t})),128))],2)])),_:1},8,["modelValue"])]))}}),[["__scopeId","data-v-22edd6df"]]))}}}));
