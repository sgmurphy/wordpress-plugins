!function(e){"use strict";var t=window.aiovg_autocomplete||window.aiovg_public;e(function(){e(".aiovg-autocomplete").each(function(){var a=e(this).data("uid"),o="ta[]";void 0!==e(this).data("name")&&(o=e(this).data("name"));var i=[];e("option","#aiovg-autocomplete-select-"+a).each(function(){i.push({value:e(this).val(),label:e(this).text()})}),0==i.length&&i.push({value:0,label:t.i18n.no_tags_found});var n,l,u,c,r,v,s,d,g,p,m=function(t,i){if(0!=(t=parseInt(t))){var n=e("#aiovg-autocomplete-tags-"+a);if(0==n.find(".aiovg-tag-item-"+t).length){var l='<span class="aiovg-tag-item aiovg-tag-item-'+t+'">';l+='<a href="javascript:void(0);">',l+='<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="aiovg-flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>',l+=i,l+="</a>",l+='<input type="hidden" name="'+o+'" value="'+t+'" />',l+="</span>",n.append(l)}}};n=a,l=i,u=m,c=document.querySelector("#aiovg-autocomplete-input-"+n),r=document.querySelector("#aiovg-autocomplete-tags-"+n),v=-1,s=function(){var e=[];v=-1,d();var a=document.createElement("div");a.setAttribute("id","aiovg-autocomplete-items-"+n),a.setAttribute("class","aiovg-autocomplete-items"),c.parentNode.appendChild(a),l.forEach((o,i)=>{var n=o.value,v=o.label,s=!1;if(c.value?-1!==v.toLowerCase().indexOf(c.value.toLowerCase())&&(s=!0):s=!0,s||i!=l.length-1||0!=e.length||(n=0,v=t.i18n.no_tags_found,s=!0),s){var g=document.createElement("div");g.innerHTML=v,0==n&&(g.className="aiovg-text-muted"),null!==r.querySelector(".aiovg-tag-item-"+n)&&g.setAttribute("class","aiovg-autocomplete-selected"),g.addEventListener("click",function(){c.value="",u(n,v),d()}),a.appendChild(g),e.push(g)}})},d=function(e=null){var t=0;e&&e.id&&(t=e.id.replace("aiovg-autocomplete-input-","")),document.querySelectorAll(".aiovg-autocomplete-items").forEach(e=>{e.getAttribute("id")!="aiovg-autocomplete-items-"+t&&e.remove()})},g=function(e){p(e),v>=e.length&&(v=0),v<0&&(v=e.length-1),e[v].classList.add("aiovg-autocomplete-active")},p=function(e){e.forEach(e=>{e.classList.remove("aiovg-autocomplete-active")})},c.addEventListener("focus",function(e){""==e.target.value&&s()}),c.addEventListener("input",function(){s()}),c.addEventListener("keydown",function(e){var t=document.querySelector("#aiovg-autocomplete-items-"+n);if(t&&(t=t.querySelectorAll("div")),!t)return!1;40==e.keyCode?(v++,g(t)):38==e.keyCode?(v--,g(t)):13==e.keyCode&&(e.preventDefault(),v>-1&&t[v].click())}),t.hasOwnProperty("autocomplete")||(t.autocomplete=!0,document.addEventListener("click",function(e){d(e.target)}))}),e(document).on("click",".aiovg-tag-item a",function(t){t.preventDefault(),e(this).parent().remove()})})}(jQuery);