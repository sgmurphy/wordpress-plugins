(()=>{"use strict";var __webpack_modules__={275:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(609),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(723),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__),_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(715),_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(427),_wordpress_components__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__);const MapBlockSettings=({attributes,setAttributes,latestMapId,allMapLists,mapObjRef,mapDynamicContainerRef,selectedMapObj})=>{const{selectedMapId,mapWidth,mapHeight,mapZoomLevel,snazzyStyle,preDefinedToggler,preDefinedColor,customDefinedToggler,themePrimaryColor,themeSecondaryColor}=attributes,{siteurl}=wpgmp_server_data;let fs=selectedMapObj?.map_all_control?.wpgmp_base_font_size;const HelpTextWithLink=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",null,(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Copy & paste a JavaScript style array from Snazzy Maps from ","wp-google-map-plugin"),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("a",{href:"https://snazzymaps.com/explore",target:"_blank",rel:"noopener noreferrer"},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("here","wp-google-map-plugin")),"."),hexToName={"#29B6F6":"Light Blue","#212F3D":"Dark Blue","#dd3333":"Red","#FF7043":"Orange","#FFC107":"Amber","#9C27B0":"Purple","#673AB7":"Deep Purple","#3F51B5":"Indigo","#00BCD4":"Cyan","#009688":"Teal","#4CAF50":"Green","#FF9800":"Orange","#FF5722":"Deep Orange","#795548":"Brown","#9E9E9E":"Grey"},colorsArray=[{name:hexToName["#29B6F6"],color:"#29B6F6"},{name:hexToName["#212F3D"],color:"#212F3D"},{name:hexToName["#dd3333"],color:"#dd3333"},{name:hexToName["#FF7043"],color:"#FF7043"},{name:hexToName["#FFC107"],color:"#FFC107"},{name:hexToName["#9C27B0"],color:"#9C27B0"},{name:hexToName["#673AB7"],color:"#673AB7"},{name:hexToName["#3F51B5"],color:"#3F51B5"},{name:hexToName["#00BCD4"],color:"#00BCD4"},{name:hexToName["#009688"],color:"#009688"},{name:hexToName["#4CAF50"],color:"#4CAF50"},{name:hexToName["#FF9800"],color:"#FF9800"},{name:hexToName["#FF5722"],color:"#FF5722"},{name:hexToName["#795548"],color:"#795548"},{name:hexToName["#9E9E9E"],color:"#9E9E9E"}],applyDynamicStyles=e=>{const _=document.getElementById("wpgmp_server_generated_css_rules");_&&_.remove();const t=document.getElementById("dynamic-map-styles");t&&t.remove();const a=document.createElement("style");a.id="dynamic-map-styles";const n=`.wpgmp-map-${selectedMapId}`,r=`\n          ${n} ,${n}  .wpgmp_tabs_container,${n}  .wpgmp_listing_container { font-size : ${fs} !important;}\n          ${n} .wpgmp_tabs_container .wpgmp_tabs li a.active, ,${n} .wpgmp_tabs_container .wpgmp_tabs li a.active,  .wpgmp_tabs_container,${n}  .wpgmp_listing_container { font-size : 16px !important;}\n          ${n} .wpgmp_tabs_container .wpgmp_tabs li a.active, \n          ${n} .fc-primary-bg, \n          ${n} .wpgmp_infowindow .fc-badge.info, \n          ${n} .wpgmp_toggle_main_container .amenity_type:hover, \n          ${n} .wpgmp_direction_container p input.wpgmp_find_direction,\n          ${n} .wpgmp_nearby_container .wpgmp_find_nearby_button, \n          ${n} .fc-label-info, \n          ${n} .fc-badge.info, \n          ${n} .wpgmp_pagination span,\n          ${n} .wpgmp_pagination a, \n          ${n} div.categories_filter select,\n          ${n} div.categories_filter select:hover,  \n          ${n} .wpgmp_toggle_container, \n          ${n} .categories_filter_reset_btn,\n          ${n} .categories_filter input[type="button"], \n          ${n} .categories_filter_reset_btn:hover {\n            background-color: ${e};\n            color : #fff;\n          }\n          \n          ${n} .wpgmp-select-all,\n          ${n} .fc-primary-fg {\n            color: ${e};\n          } \n          \n          ${n} .fc-label-info, \n          ${n} .fc-badge.info {\n            border: 1px solid ${e};\n          }\n          \n          ${n} div.wpgmp_search_form input.wpgmp_search_input {\n            border-bottom: 1px solid ${e};\n          } \n          \n          ${n} .wpgmp_iw_content .fc-item-title span {\n            color: #fff;\n          }\n          \n          ${n} .wpgmp_location_category.fc-badge.info {\n            color: #fff;\n          }\n        `;a.appendChild(document.createTextNode(r)),mapDynamicContainerRef.current&&mapDynamicContainerRef.current.prepend(a),setAttributes({...attributes,preDefinedColor:e})},handlePreDefinedToggler=e=>{setAttributes({...attributes,preDefinedToggler:e,customDefinedToggler:!1,themePrimaryColor:"",themeSecondaryColor:""})},handleCustomDefinedToggler=e=>{setAttributes({...attributes,customDefinedToggler:e,preDefinedToggler:!1,preDefinedColor:""})},handleCustomColors=(e,_)=>{let t,a;"primary"===_?(t=e,a=attributes.themeSecondaryColor,setAttributes({...attributes,themePrimaryColor:e})):(t=attributes.themePrimaryColor,a=e,setAttributes({...attributes,themeSecondaryColor:e}));const n=document.getElementById("wpgmp_server_generated_css_rules");n&&n.remove();const r=document.getElementById("dynamic-map-styles");r&&r.remove();const o=document.createElement("style");o.id="dynamic-map-styles";const p=`.wpgmp-map-${selectedMapId}`,l=`\n          ${p} ,${p}  .wpgmp_tabs_container,${p}  .wpgmp_listing_container { font-size : ${fs} !important;}\n          ${p} .wpgmp_tabs_container .wpgmp_tabs li a.active, ,${p} .wpgmp_tabs_container .wpgmp_tabs li a.active,  .wpgmp_tabs_container,${p}  .wpgmp_listing_container { font-size : 16px !important;}\n          ${p} .wpgmp_tabs_container .wpgmp_tabs, \n          ${p} .fc-secondary-bg, \n          ${p} .wpgmp_toggle_main_container .amenity_type, \n          ${p} .wpgmp_pagination span.current, \n          ${p} .wpgmp_pagination a:hover, \n          ${p} .wpgmp_toggle_main_container input[type="submit"] {\n            background: ${a};\n          }\n          \n          ${p} .fc-secondary-fg, \n          ${p} .wpgmp_infowindow .fc-item-title, \n          ${p} .wpgmp_tabs_container .wpgmp_tab_item .wpgmp_cat_title, \n          ${p} .wpgmp_location_title a.place_title {\n            color: ${a}!important;\n          }\n          \n          ${p} div.wpgmp_search_form input.wpgmp_search_input:focus {\n            border: 1px solid ${a};\n          }\n          \n          ${p} .wpgmp_location_category.fc-badge.info {\n            color: #fff;\n          }\n          \n          ${p} .wpgmp_iw_content .fc-item-title span {\n            color: #fff;\n          }\n          \n          ${p} .wpgmp_tabs_container .wpgmp_tabs li a.active, \n          ${p} .fc-primary-bg, \n          ${p} .wpgmp_infowindow .fc-badge.info, \n          ${p} .wpgmp_toggle_main_container .amenity_type:hover, \n          ${p} .wpgmp_direction_container p input.wpgmp_find_direction,\n          ${p} .wpgmp_nearby_container .wpgmp_find_nearby_button, \n          ${p} .fc-label-info, \n          ${p} .fc-badge.info, \n          ${p} .wpgmp_pagination span,\n          ${p} .wpgmp_pagination a, \n          ${p} div.categories_filter select,\n          ${p} div.categories_filter select:hover,  \n          ${p} .wpgmp_toggle_container, \n          ${p} .categories_filter_reset_btn,\n          ${p} .categories_filter input[type="button"], \n          ${p} .categories_filter_reset_btn:hover {\n            background-color: ${t};\n            color:#fff;\n          }\n          \n          ${p} .wpgmp-select-all,\n          ${p} .fc-primary-fg {\n            color: ${t};\n          } \n          \n          ${p} .fc-label-info, \n          ${p} .fc-badge.info {\n            border: 1px solid ${t};\n          }\n          \n          ${p} div.wpgmp_search_form input.wpgmp_search_input {\n            border-bottom: 1px solid ${t};\n          }\n        `;o.appendChild(document.createTextNode(l)),mapDynamicContainerRef.current&&mapDynamicContainerRef.current.prepend(o)},handleApplySnazzy=snazzy=>{if(mapObjRef.current&&mapObjRef.current.map){const snazzyStyleArray=snazzy?eval(snazzy):[];mapObjRef.current.map.setOptions({styles:snazzyStyleArray})}setAttributes({...attributes,snazzyStyle:snazzy})},handleSelectChange=e=>{setAttributes({...attributes,selectedMapId:e})},handleWidthChange=e=>{const _=mapDynamicContainerRef.current.querySelector(".wpgmp_map");_&&(null!=e&&""!=e?(mapDynamicContainerRef.current.style.width=`${e}px`,_.style.width=`${e}px`):(mapDynamicContainerRef.current.style.width="100%",_.style.width="100%"),setAttributes({...attributes,mapWidth:e}))},handleHeightChange=e=>{setAttributes({...attributes,mapHeight:e});const _=mapDynamicContainerRef.current.querySelector(".wpgmp_map");_&&(_.style.height=`${e}px`)},setMapZoom=e=>{setAttributes({...attributes,mapZoomLevel:e}),mapObjRef.current.map.setZoom(e)},ManageMapsLink=`${siteurl}/wp-admin/admin.php?page=wpgmp_manage_map`,ManageMapsText=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)(`Choose a map from the dropdown to preview. <a href="${ManageMapsLink}" target="_blank">Manage Maps</a> here.`,"wp-google-map-plugin");return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Map Setting","wp-google-map-plugin")},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.SelectControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Choose Map","wp-google-map-plugin"),options:[{label:"Select A Map",value:""},...allMapLists.map((e=>({label:e.map_title,value:e.map_id})))],help:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",{dangerouslySetInnerHTML:{__html:ManageMapsText}}),value:selectedMapId,onChange:e=>{""!==e&&handleSelectChange(e)}}))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("General Settings","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{style:{display:"flex","flex-direction":"column"}},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.TextControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Width","wp-google-map-plugin"),type:"number",value:mapWidth,help:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("For a full-width, responsive map, leave this field empty. For a fixed width, enter the desired size in pixels.","wp-google-map-plugin"),onChange:e=>handleWidthChange(e)}),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.TextControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Height","wp-google-map-plugin"),value:mapHeight,type:"number",help:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Enter the desired height in pixels.","wp-google-map-plugin"),onChange:e=>handleHeightChange(e)})),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.RangeControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Zoom Level","wp-google-map-plugin"),value:parseInt(mapZoomLevel),onChange:e=>setMapZoom(e),min:"1",max:"19"})))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Map Styling (Snazzy Maps)","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.TextareaControl,{help:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(HelpTextWithLink,null),label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Snazzy Maps Javascript Style Array","wp-google-map-plugin"),value:snazzyStyle,onChange:e=>handleApplySnazzy(e)})))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Color Settings","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ToggleControl,{checked:preDefinedToggler,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Apply pre defined color theme","wp-google-map-plugin"),onChange:e=>handlePreDefinedToggler(e)}),preDefinedToggler&&(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ColorPalette,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Choose a color theme","wp-google-map-plugin"),colors:colorsArray,disableCustomColors:!0,value:preDefinedColor,onChange:e=>applyDynamicStyles(e)}),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ToggleControl,{checked:customDefinedToggler,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Apply custom color theme","wp-google-map-plugin"),onChange:e=>handleCustomDefinedToggler(e)}),customDefinedToggler&&(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("label",{style:{display:"block",marginBottom:"10px"}},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Select Primary Color","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ColorPicker,{color:themePrimaryColor,onChange:e=>handleCustomColors(e,"primary")})),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("label",{style:{display:"block",marginBottom:"10px"}},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Select Secondary Color ","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ColorPicker,{color:themeSecondaryColor,disableCustomColors:!1,value:themeSecondaryColor,onChange:e=>handleCustomColors(e,"second")})))))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Backend Edit","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Notice,{isDismissible:!1,onDismiss:function(){},onRemove:function(){}},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("To adjust additional map settings, click below.","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{className:"link-container"},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ExternalLink,{href:`${siteurl}/wp-admin/admin.php?page=wpgmp_form_map&doaction=edit&map_id=${latestMapId}`,target:"_blank"},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Edit / Update Map","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ExternalLink,{href:"https://www.wpmapspro.com/tutorials/",target:"_blank"},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("View Docs","wp-google-map-plugin")))))))},__WEBPACK_DEFAULT_EXPORT__=MapBlockSettings},609:e=>{e.exports=window.React},715:e=>{e.exports=window.wp.blockEditor},427:e=>{e.exports=window.wp.components},723:e=>{e.exports=window.wp.i18n}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var _=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(e,_)=>{for(var t in _)__webpack_require__.o(_,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:_[t]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_);var __webpack_exports__={};const external_wp_blocks_namespaceObject=window.wp.blocks;var external_React_=__webpack_require__(609),external_wp_blockEditor_=__webpack_require__(715);const Map=e=>(0,external_React_.createElement)("div",{ref:e.mapDynamicContainerRef,className:"wpgmp-dynamic-block-container",dangerouslySetInnerHTML:{__html:e.mapMarkupState},style:{fontSize:e.fs}}),components_Map=Map;var MapBlockSettings=__webpack_require__(275);const fetchData=async(e,_)=>{try{const t=await fetch(e,{method:"GET",headers:{"X-WP-Nonce":_,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){throw console.error("Error:",e),e}},useFetchAllMaps=(e,_,t,a)=>{const[n,r]=(0,external_React_.useState)([]);return(0,external_React_.useEffect)((()=>{(async()=>{try{const n=await fetchData(`${e}${_}/${t}/maplists/`,a);if(!(n.length>0))throw new Error("No maps found in WP Maps Pro.");r(n)}catch(e){console.warn("Error :",e)}})()}),[]),{allMapLists:n}},custom_hooks_useFetchAllMaps=useFetchAllMaps;var external_wp_i18n_=__webpack_require__(723),external_wp_components_=__webpack_require__(427);const DeletedMap=()=>(0,external_React_.createElement)(external_wp_components_.Animate,{type:"slide-in",options:{origin:"top"}},(({className:e})=>(0,external_React_.createElement)(external_wp_components_.Notice,{className:e,status:"info",isDismissible:!1},(0,external_wp_i18n_.__)("Map that was displaying here earlier was deleted. Please select another map to be displayed.","wp-google-map-plugin")))),components_DeletedMap=DeletedMap,useFetchMapMarkup=(e,_,t,a,n,r)=>{const[o,p]=(0,external_React_.useState)(""),[l,s]=(0,external_React_.useState)(!1),[c,i]=(0,external_React_.useState)(null),[m,E]=(0,external_React_.useState)(null);return{mapFound:l,mapMarkupState:o,deletedMapComponent:c,selectedMapObj:m,fetchMapMarkup:(0,external_React_.useCallback)((async o=>{try{const l=await fetchData(`${e}${_}/${t}/markup/${o}`,a);if(l.map_markup){let e=function(e){let _="";return e.forEach((e=>{_+=e})),_}(l.dynamic_styles)+l.map_markup;p(e),E(l.map_object),s(!0),i(null);let _="";_=l.map_object.map_all_control?.color_schema?l.map_object.map_all_control?.color_schema.split("_")[0]:"",r({...n,selectedMapId:o,mapWidth:l.map_object.map_width,mapHeight:l.map_object.map_height,mapZoomLevel:l.map_object.map_zoom_level,snazzyStyle:l.map_object.map_all_control.custom_style,preDefinedToggler:"true"==l.map_object.map_all_control.apply_custom_design,preDefinedColor:_,customDefinedToggler:"true"==l.map_object.map_all_control.apply_own_schema,themePrimaryColor:l.map_object.map_all_control?.wpgmp_primary_color,themeSecondaryColor:l.map_object.map_all_control?.wpgmp_secondary_color});const t=(new DOMParser).parseFromString(l.map_markup,"text/html").querySelector("script");if(t){const e=document.createElement("script");e.id=t.id,e.textContent=t.textContent,document.body.appendChild(e),wpgmpInitMap()}}}catch(e){s(!1),p(""),i((0,external_React_.createElement)(components_DeletedMap,null)),console.warn("Map that was displaying here earlier was deleted. Please select another map to be displayed.")}}),[e,_,t,a,n,r])}},custom_hooks_useFetchMapMarkup=useFetchMapMarkup,NoMaps=({siteurl:e})=>{let _=e+"/wp-admin/admin.php?page=wpgmp_form_map";return(0,external_React_.createElement)("div",{...(0,external_wp_blockEditor_.useBlockProps)()},(0,external_React_.createElement)(external_wp_components_.Animate,{type:"slide-in",options:{origin:"top"}},(({className:e})=>(0,external_React_.createElement)(external_wp_components_.Notice,{className:e,status:"info",isDismissible:!1},(0,external_wp_i18n_.__)("No google maps were found. Lets create your first map from","wp-google-map-plugin")," ",(0,external_React_.createElement)("a",{href:_,target:"_blank"},(0,external_wp_i18n_.__)("here","text-domain"))))))},components_NoMaps=NoMaps,NoApiKey=({siteurl:e})=>{let _=e+"/wp-admin/admin.php?page=wpgmp_manage_settings";return(0,external_React_.createElement)(external_wp_components_.Animate,{type:"slide-in",options:{origin:"top"}},(({className:e})=>(0,external_React_.createElement)(external_wp_components_.Notice,{className:e,status:"info",isDismissible:!1},(0,external_wp_i18n_.__)("Google Maps API key is required to implement the map properly. Please enter the api key","wp-google-map-plugin")," ",(0,external_React_.createElement)("a",{href:_,target:"_blank"},(0,external_wp_i18n_.__)("here","text-domain")))))},components_NoApiKey=NoApiKey,external_jQuery_namespaceObject=window.jQuery;var external_jQuery_default=__webpack_require__.n(external_jQuery_namespaceObject);function Edit({attributes:e,setAttributes:_}){const{rest_url:t,namespace:a,version:n,default_map_id:r,nonce:o,siteurl:p,api_key:l}=wpgmp_server_data;if(!l&&void 0===r&&"0"===r)return(0,external_React_.createElement)(components_NoApiKey,{siteurl:p});if(void 0===r||"0"===r)return(0,external_React_.createElement)(components_NoMaps,{siteurl:p});const{selectedMapId:s}=e,{allMapLists:c}=custom_hooks_useFetchAllMaps(t,a,n,o),{mapFound:i,mapMarkupState:m,deletedMapComponent:E,selectedMapObj:d,fetchMapMarkup:g}=custom_hooks_useFetchMapMarkup(t,a,n,o,e,_),[u,M]=(0,external_React_.useState)(""),w=(0,external_React_.useRef)(null),D=(0,external_React_.useRef)(null);(0,external_React_.useEffect)((()=>{s?(g(s),M(s)):(r&&g(r),M(r))}),[s]),(0,external_React_.useEffect)((()=>{const e=new MutationObserver((()=>{if(w.current){const _=w.current.querySelector(".wpgmp_map");if(_){const t=external_jQuery_default()(_).data("wpgmp_maps");t&&(D.current=t,e.disconnect())}}}));return w.current&&e.observe(w.current,{childList:!0,subtree:!0}),()=>e.disconnect()}),[m]),(0,external_React_.useEffect)((()=>{e.preDefinedToggler||e.customDefinedToggler||P("hide"),(e.preDefinedToggler||e.customDefinedToggler)&&P("show")}),[e.preDefinedToggler,e.customDefinedToggler]);const P=e=>{const _=document.getElementById("wpgmp_server_generated_css_rules"),t=document.getElementById("dynamic-map-styles");_&&""!=e&&(_.disabled="hide"==e),t&&""!=e&&(t.disabled="hide"==e)},O=d?.map_all_control?.wpgmp_base_font_size;return(0,external_React_.createElement)("div",{...(0,external_wp_blockEditor_.useBlockProps)()},i?(0,external_React_.createElement)(components_Map,{mapDynamicContainerRef:w,mapMarkupState:m,fs:O}):E,(0,external_React_.createElement)(MapBlockSettings.A,{attributes:e,setAttributes:_,latestMapId:u,allMapLists:c,mapObjRef:D,mapDynamicContainerRef:w,selectedMapObj:d}))}const block_namespaceObject=JSON.parse('{"UU":"weplugins/wp-maps-block"}');(0,external_wp_blocks_namespaceObject.registerBlockType)(block_namespaceObject.UU,{edit:Edit})})();