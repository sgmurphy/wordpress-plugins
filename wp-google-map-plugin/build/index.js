(()=>{"use strict";var __webpack_modules__={275:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(609),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(723),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__),_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(715),_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(427),_wordpress_components__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__);const MapBlockSettings=({attributes,setAttributes,latestMapId,allMapLists,mapObjRef,mapDynamicContainerRef,selectedMapObj})=>{const{selectedMapId,mapWidth,mapHeight,mapZoomLevel,snazzyStyle,preDefinedToggler,preDefinedColor,customDefinedToggler,themePrimaryColor,themeSecondaryColor}=attributes,{siteurl}=wpgmp_server_data;let fs=selectedMapObj?.map_all_control?.wpgmp_base_font_size;const HelpTextWithLink=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",null,(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Copy & paste a JavaScript style array from Snazzy Maps from ","wp-google-map-plugin"),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("a",{href:"https://snazzymaps.com/explore",target:"_blank",rel:"noopener noreferrer"},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("here","wp-google-map-plugin")),"."),hexToName={"#29B6F6":"Light Blue","#212F3D":"Dark Blue","#dd3333":"Red","#FF7043":"Orange","#FFC107":"Amber","#9C27B0":"Purple","#673AB7":"Deep Purple","#3F51B5":"Indigo","#00BCD4":"Cyan","#009688":"Teal","#4CAF50":"Green","#FF9800":"Orange","#FF5722":"Deep Orange","#795548":"Brown","#9E9E9E":"Grey"},colorsArray=[{name:hexToName["#29B6F6"],color:"#29B6F6"},{name:hexToName["#212F3D"],color:"#212F3D"},{name:hexToName["#dd3333"],color:"#dd3333"},{name:hexToName["#FF7043"],color:"#FF7043"},{name:hexToName["#FFC107"],color:"#FFC107"},{name:hexToName["#9C27B0"],color:"#9C27B0"},{name:hexToName["#673AB7"],color:"#673AB7"},{name:hexToName["#3F51B5"],color:"#3F51B5"},{name:hexToName["#00BCD4"],color:"#00BCD4"},{name:hexToName["#009688"],color:"#009688"},{name:hexToName["#4CAF50"],color:"#4CAF50"},{name:hexToName["#FF9800"],color:"#FF9800"},{name:hexToName["#FF5722"],color:"#FF5722"},{name:hexToName["#795548"],color:"#795548"},{name:hexToName["#9E9E9E"],color:"#9E9E9E"}],applyDynamicStyles=e=>{const _=document.getElementById("wpgmp_server_generated_css_rules");_&&_.remove();const t=document.getElementById("dynamic-map-styles");t&&t.remove();const n=document.createElement("style");n.id="dynamic-map-styles";const a=`.wpgmp-map-${selectedMapId}`,r=`\n          ${a} ,${a}  .wpgmp_tabs_container,${a}  .wpgmp_listing_container { font-size : ${fs} !important;}\n          ${a} .wpgmp_tabs_container .wpgmp_tabs li a.active, ,${a} .wpgmp_tabs_container .wpgmp_tabs li a.active,  .wpgmp_tabs_container,${a}  .wpgmp_listing_container { font-size : 16px !important;}\n          ${a} .wpgmp_tabs_container .wpgmp_tabs li a.active, \n          ${a} .fc-primary-bg, \n          ${a} .wpgmp_infowindow .fc-badge.info, \n          ${a} .wpgmp_toggle_main_container .amenity_type:hover, \n          ${a} .wpgmp_direction_container p input.wpgmp_find_direction,\n          ${a} .wpgmp_nearby_container .wpgmp_find_nearby_button, \n          ${a} .fc-label-info, \n          ${a} .fc-badge.info, \n          ${a} .wpgmp_pagination span,\n          ${a} .wpgmp_pagination a, \n          ${a} div.categories_filter select,\n          ${a} div.categories_filter select:hover,  \n          ${a} .wpgmp_toggle_container, \n          ${a} .categories_filter_reset_btn,\n          ${a} .categories_filter input[type="button"], \n          ${a} .categories_filter_reset_btn:hover {\n            background-color: ${e};\n            color : #fff;\n          }\n          \n          ${a} .wpgmp-select-all,\n          ${a} .fc-primary-fg {\n            color: ${e};\n          } \n          \n          ${a} .fc-label-info, \n          ${a} .fc-badge.info {\n            border: 1px solid ${e};\n          }\n          \n          ${a} div.wpgmp_search_form input.wpgmp_search_input {\n            border-bottom: 1px solid ${e};\n          } \n          \n          ${a} .wpgmp_iw_content .fc-item-title span {\n            color: #fff;\n          }\n          \n          ${a} .wpgmp_location_category.fc-badge.info {\n            color: #fff;\n          }\n        `;n.appendChild(document.createTextNode(r)),mapDynamicContainerRef.current&&mapDynamicContainerRef.current.prepend(n),setAttributes({...attributes,preDefinedColor:e})},handlePreDefinedToggler=e=>{setAttributes({...attributes,preDefinedToggler:e,customDefinedToggler:!1,themePrimaryColor:"",themeSecondaryColor:""})},handleCustomDefinedToggler=e=>{setAttributes({...attributes,customDefinedToggler:e,preDefinedToggler:!1,preDefinedColor:""})},handleCustomColors=(e,_)=>{let t,n;"primary"===_?(t=e,n=attributes.themeSecondaryColor,setAttributes({...attributes,themePrimaryColor:e})):(t=attributes.themePrimaryColor,n=e,setAttributes({...attributes,themeSecondaryColor:e}));const a=document.getElementById("wpgmp_server_generated_css_rules");a&&a.remove();const r=document.getElementById("dynamic-map-styles");r&&r.remove();const o=document.createElement("style");o.id="dynamic-map-styles";const p=`.wpgmp-map-${selectedMapId}`,l=`\n          ${p} ,${p}  .wpgmp_tabs_container,${p}  .wpgmp_listing_container { font-size : ${fs} !important;}\n          ${p} .wpgmp_tabs_container .wpgmp_tabs li a.active, ,${p} .wpgmp_tabs_container .wpgmp_tabs li a.active,  .wpgmp_tabs_container,${p}  .wpgmp_listing_container { font-size : 16px !important;}\n          ${p} .wpgmp_tabs_container .wpgmp_tabs, \n          ${p} .fc-secondary-bg, \n          ${p} .wpgmp_toggle_main_container .amenity_type, \n          ${p} .wpgmp_pagination span.current, \n          ${p} .wpgmp_pagination a:hover, \n          ${p} .wpgmp_toggle_main_container input[type="submit"] {\n            background: ${n};\n          }\n          \n          ${p} .fc-secondary-fg, \n          ${p} .wpgmp_infowindow .fc-item-title, \n          ${p} .wpgmp_tabs_container .wpgmp_tab_item .wpgmp_cat_title, \n          ${p} .wpgmp_location_title a.place_title {\n            color: ${n}!important;\n          }\n          \n          ${p} div.wpgmp_search_form input.wpgmp_search_input:focus {\n            border: 1px solid ${n};\n          }\n          \n          ${p} .wpgmp_location_category.fc-badge.info {\n            color: #fff;\n          }\n          \n          ${p} .wpgmp_iw_content .fc-item-title span {\n            color: #fff;\n          }\n          \n          ${p} .wpgmp_tabs_container .wpgmp_tabs li a.active, \n          ${p} .fc-primary-bg, \n          ${p} .wpgmp_infowindow .fc-badge.info, \n          ${p} .wpgmp_toggle_main_container .amenity_type:hover, \n          ${p} .wpgmp_direction_container p input.wpgmp_find_direction,\n          ${p} .wpgmp_nearby_container .wpgmp_find_nearby_button, \n          ${p} .fc-label-info, \n          ${p} .fc-badge.info, \n          ${p} .wpgmp_pagination span,\n          ${p} .wpgmp_pagination a, \n          ${p} div.categories_filter select,\n          ${p} div.categories_filter select:hover,  \n          ${p} .wpgmp_toggle_container, \n          ${p} .categories_filter_reset_btn,\n          ${p} .categories_filter input[type="button"], \n          ${p} .categories_filter_reset_btn:hover {\n            background-color: ${t};\n            color:#fff;\n          }\n          \n          ${p} .wpgmp-select-all,\n          ${p} .fc-primary-fg {\n            color: ${t};\n          } \n          \n          ${p} .fc-label-info, \n          ${p} .fc-badge.info {\n            border: 1px solid ${t};\n          }\n          \n          ${p} div.wpgmp_search_form input.wpgmp_search_input {\n            border-bottom: 1px solid ${t};\n          }\n        `;o.appendChild(document.createTextNode(l)),mapDynamicContainerRef.current&&mapDynamicContainerRef.current.prepend(o)},handleApplySnazzy=snazzy=>{if(mapObjRef.current&&mapObjRef.current.map){const snazzyStyleArray=snazzy?eval(snazzy):[];mapObjRef.current.map.setOptions({styles:snazzyStyleArray})}setAttributes({...attributes,snazzyStyle:snazzy})},handleSelectChange=e=>{setAttributes({...attributes,selectedMapId:e})},handleWidthChange=e=>{const _=mapDynamicContainerRef.current.querySelector(".wpgmp_map");_&&(null!=e&&""!=e?(mapDynamicContainerRef.current.style.width=`${e}px`,_.style.width=`${e}px`):(mapDynamicContainerRef.current.style.width="100%",_.style.width="100%"),setAttributes({...attributes,mapWidth:e}))},handleHeightChange=e=>{setAttributes({...attributes,mapHeight:e});const _=mapDynamicContainerRef.current.querySelector(".wpgmp_map");_&&(_.style.height=`${e}px`)},setMapZoom=e=>{setAttributes({...attributes,mapZoomLevel:e}),mapObjRef.current.map.setZoom(e)},ManageMapsLink=`${siteurl}/wp-admin/admin.php?page=wpgmp_manage_map`,ManageMapsText=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)(`Choose a map from the dropdown to preview. <a href="${ManageMapsLink}" target="_blank">Manage Maps</a> here.`,"wp-google-map-plugin");return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Map Setting","wp-google-map-plugin")},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.SelectControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Choose Map","wp-google-map-plugin"),options:[{label:"Select A Map",value:""},...allMapLists.map((e=>({label:e.map_title,value:e.map_id})))],help:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",{dangerouslySetInnerHTML:{__html:ManageMapsText}}),value:selectedMapId,onChange:e=>{""!==e&&handleSelectChange(e)}}))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("General Settings","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{style:{display:"flex","flex-direction":"column"}},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.TextControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Width","wp-google-map-plugin"),type:"number",value:mapWidth,help:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("For a full-width, responsive map, leave this field empty. For a fixed width, enter the desired size in pixels.","wp-google-map-plugin"),onChange:e=>handleWidthChange(e)}),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.TextControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Height","wp-google-map-plugin"),value:mapHeight,type:"number",help:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Enter the desired height in pixels.","wp-google-map-plugin"),onChange:e=>handleHeightChange(e)})),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.RangeControl,{label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Zoom Level","wp-google-map-plugin"),value:parseInt(mapZoomLevel),onChange:e=>setMapZoom(e),min:"1",max:"19"})))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Map Styling (Snazzy Maps)","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.TextareaControl,{help:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(HelpTextWithLink,null),label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Snazzy Maps Javascript Style Array","wp-google-map-plugin"),value:snazzyStyle,onChange:e=>handleApplySnazzy(e)})))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Color Settings","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ToggleControl,{checked:preDefinedToggler,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Apply pre defined color theme","wp-google-map-plugin"),onChange:e=>handlePreDefinedToggler(e)}),preDefinedToggler&&(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ColorPalette,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Choose a color theme","wp-google-map-plugin"),colors:colorsArray,disableCustomColors:!0,value:preDefinedColor,onChange:e=>applyDynamicStyles(e)}),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ToggleControl,{checked:customDefinedToggler,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Apply custom color theme","wp-google-map-plugin"),onChange:e=>handleCustomDefinedToggler(e)}),customDefinedToggler&&(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("label",{style:{display:"block",marginBottom:"10px"}},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Select Primary Color","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ColorPicker,{color:themePrimaryColor,onChange:e=>handleCustomColors(e,"primary")})),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("label",{style:{display:"block",marginBottom:"10px"}},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Select Secondary Color ","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ColorPicker,{color:themeSecondaryColor,disableCustomColors:!1,value:themeSecondaryColor,onChange:e=>handleCustomColors(e,"second")})))))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_2__.InspectorControls,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.PanelBody,{title:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Backend Edit","wp-google-map-plugin"),initialOpen:!1},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Notice,{isDismissible:!1,onDismiss:function(){},onRemove:function(){}},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("To adjust additional map settings, click below.","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{className:"link-container"},(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ExternalLink,{href:`${siteurl}/wp-admin/admin.php?page=wpgmp_form_map&doaction=edit&map_id=${latestMapId}`,target:"_blank"},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Edit / Update Map","wp-google-map-plugin")),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.ExternalLink,{href:"https://www.wpmapspro.com/tutorials/",target:"_blank"},(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("View Docs","wp-google-map-plugin")))))))},__WEBPACK_DEFAULT_EXPORT__=MapBlockSettings},609:e=>{e.exports=window.React},715:e=>{e.exports=window.wp.blockEditor},427:e=>{e.exports=window.wp.components},723:e=>{e.exports=window.wp.i18n}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var _=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(e,_)=>{for(var t in _)__webpack_require__.o(_,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:_[t]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_);var __webpack_exports__={};(()=>{const e=window.wp.blocks;var _=__webpack_require__(609),t=__webpack_require__(715);const n=e=>(0,_.createElement)("div",{ref:e.mapDynamicContainerRef,className:"wpgmp-dynamic-block-container",dangerouslySetInnerHTML:{__html:e.mapMarkupState},style:{fontSize:e.fs}});var a=__webpack_require__(275);const r=async(e,_)=>{try{const t=await fetch(e,{method:"GET",headers:{"X-WP-Nonce":_,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){throw console.error("Error:",e),e}};var o=__webpack_require__(723),p=__webpack_require__(427);const l=()=>(0,_.createElement)(p.Animate,{type:"slide-in",options:{origin:"top"}},(({className:e})=>(0,_.createElement)(p.Notice,{className:e,status:"info",isDismissible:!1},(0,o.__)("Map that was displaying here earlier was deleted. Please select another map to be displayed.","wp-google-map-plugin")))),i=({siteurl:e})=>{let n=e+"/wp-admin/admin.php?page=wpgmp_form_map";return(0,_.createElement)("div",{...(0,t.useBlockProps)()},(0,_.createElement)(p.Animate,{type:"slide-in",options:{origin:"top"}},(({className:e})=>(0,_.createElement)(p.Notice,{className:e,status:"info",isDismissible:!1},(0,o.__)("No google maps were found. Lets create your first map from","wp-google-map-plugin")," ",(0,_.createElement)("a",{href:n,target:"_blank"},(0,o.__)("here","text-domain"))))))},s=({siteurl:e})=>{let t=e+"/wp-admin/admin.php?page=wpgmp_manage_settings";return(0,_.createElement)(p.Animate,{type:"slide-in",options:{origin:"top"}},(({className:e})=>(0,_.createElement)(p.Notice,{className:e,status:"info",isDismissible:!1},(0,o.__)("Google Maps API key is required to implement the map properly. Please enter the api key","wp-google-map-plugin")," ",(0,_.createElement)("a",{href:t,target:"_blank"},(0,o.__)("here","text-domain")))))},c=window.jQuery;var m=__webpack_require__.n(c);const E=JSON.parse('{"UU":"weplugins/wp-maps-block"}');(0,e.registerBlockType)(E.UU,{edit:function({attributes:e,setAttributes:o}){const{rest_url:p,namespace:c,version:E,default_map_id:d,nonce:g,siteurl:u,api_key:M}=wpgmp_server_data;if(!M&&void 0===d&&"0"===d)return(0,_.createElement)(s,{siteurl:u});if(void 0===d||"0"===d)return(0,_.createElement)(i,{siteurl:u});const{selectedMapId:D}=e,{allMapLists:w}=((e,t,n,a)=>{const[o,p]=(0,_.useState)([]);return(0,_.useEffect)((()=>{(async()=>{try{const _=await r(`${e}${t}/${n}/maplists/`,a);if(!(_.length>0))throw new Error("No maps found in WP Maps Pro.");p(_)}catch(e){console.warn("Error :",e)}})()}),[]),{allMapLists:o}})(p,c,E,g),{mapFound:P,mapMarkupState:O,deletedMapComponent:C,selectedMapObj:b,fetchMapMarkup:f}=((e,t,n,a,o,p)=>{const[i,s]=(0,_.useState)(""),[c,m]=(0,_.useState)(!1),[E,d]=(0,_.useState)(null),[g,u]=(0,_.useState)(null);return{mapFound:c,mapMarkupState:i,deletedMapComponent:E,selectedMapObj:g,fetchMapMarkup:(0,_.useCallback)((async i=>{try{const _=await r(`${e}${t}/${n}/markup/${i}`,a);if(_.map_markup){let e=function(e){let _="";return e.forEach((e=>{_+=e})),_}(_.dynamic_styles)+_.map_markup;s(e),u(_.map_object),m(!0),d(null);let t="";t=_.map_object.map_all_control?.color_schema?_.map_object.map_all_control?.color_schema.split("_")[0]:"",p({...o,selectedMapId:i,mapWidth:_.map_object.map_width,mapHeight:_.map_object.map_height,mapZoomLevel:_.map_object.map_zoom_level,snazzyStyle:_.map_object.map_all_control.custom_style,preDefinedToggler:"true"==_.map_object.map_all_control.apply_custom_design,preDefinedColor:t,customDefinedToggler:"true"==_.map_object.map_all_control.apply_own_schema,themePrimaryColor:_.map_object.map_all_control?.wpgmp_primary_color,themeSecondaryColor:_.map_object.map_all_control?.wpgmp_secondary_color}),wpgmpInitMap()}}catch(e){m(!1),s(""),d((0,_.createElement)(l,null)),console.warn("Map that was displaying here earlier was deleted. Please select another map to be displayed.")}}),[e,t,n,a,o,p])}})(p,c,E,g,e,o),[h,y]=(0,_.useState)(""),T=(0,_.useRef)(null),A=(0,_.useRef)(null);(0,_.useEffect)((()=>{D?(f(D),y(D)):(d&&f(d),y(d))}),[D]),(0,_.useEffect)((()=>{const e=new MutationObserver((()=>{if(T.current){const _=T.current.querySelector(".wpgmp_map");if(_){const t=m()(_).data("wpgmp_maps");t&&(A.current=t,e.disconnect())}}}));return T.current&&e.observe(T.current,{childList:!0,subtree:!0}),()=>e.disconnect()}),[O]),(0,_.useEffect)((()=>{e.preDefinedToggler||e.customDefinedToggler||B("hide"),(e.preDefinedToggler||e.customDefinedToggler)&&B("show")}),[e.preDefinedToggler,e.customDefinedToggler]);const B=e=>{const _=document.getElementById("wpgmp_server_generated_css_rules"),t=document.getElementById("dynamic-map-styles");_&&""!=e&&(_.disabled="hide"==e),t&&""!=e&&(t.disabled="hide"==e)},I=b?.map_all_control?.wpgmp_base_font_size;return(0,_.createElement)("div",{...(0,t.useBlockProps)()},P?(0,_.createElement)(n,{mapDynamicContainerRef:T,mapMarkupState:O,fs:I}):C,(0,_.createElement)(a.A,{attributes:e,setAttributes:o,latestMapId:h,allMapLists:w,mapObjRef:A,mapDynamicContainerRef:T,selectedMapObj:b}))}})})()})();