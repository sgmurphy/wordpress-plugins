(()=>{"use strict";var e={n:l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return e.d(t,{a:t}),t},d:(l,t)=>{for(var o in t)e.o(t,o)&&!e.o(l,o)&&Object.defineProperty(l,o,{enumerable:!0,get:t[o]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.blocks,t=window.wp.i18n,o=JSON.parse('{"UU":"snow-monkey-blocks/recent-posts","uK":{"postType":{"type":"string","default":"post"},"taxonomy":{"type":"string","default":null},"termId":{"type":"number","default":0},"authors":{"type":"array","default":[]},"postsPerPage":{"type":"number","default":6},"layout":{"type":"string","default":"rich-media"},"gap":{"type":"string","default":""},"ignoreStickyPosts":{"type":"boolean","default":true},"smCols":{"type":"number","default":0},"noPostsText":{"type":"string","default":""},"itemTitleTagName":{"type":"string","default":"h3"},"forceDisplayItemMeta":{"type":"boolean","default":false},"forceDisplayItemTerms":{"type":"boolean","default":false},"displayItemAuthor":{"type":"boolean"},"displayItemPublished":{"type":"boolean","default":true},"displayItemExcerpt":{"type":"boolean"},"itemThumbnailSizeSlug":{"type":"string","default":"full"},"arrows":{"type":"boolean","default":false},"dots":{"type":"boolean","default":true},"interval":{"type":"number","default":0},"autoplayButton":{"type":"boolean","default":false},"anchor":{"type":"string","default":""},"clientId":{"type":"string","default":""}}}'),a=window.React,n=(0,a.createElement)("svg",{viewBox:"0 0 24 24"},(0,a.createElement)("rect",{x:"3",y:"6.5",width:"4",height:"1"}),(0,a.createElement)("rect",{x:"9",y:"6.5",width:"13",height:"1"}),(0,a.createElement)("rect",{x:"3",y:"11.5",width:"4",height:"1"}),(0,a.createElement)("rect",{x:"9",y:"11.5",width:"13",height:"1"}),(0,a.createElement)("rect",{x:"3",y:"16.5",width:"4",height:"1"}),(0,a.createElement)("rect",{x:"9",y:"16.5",width:"13",height:"1"})),s=window.lodash,m=window.wp.components,r=window.wp.blockEditor,i=window.wp.data,c=window.wp.element,u=window.wp.serverSideRender;var y=e.n(u);const p=(e,l=0,t=null)=>(e=Number(e),(isNaN(e)||e<l)&&(e=l),null!==t&&e>t&&(e=t),e),d=e=>{const l=e.map((e=>({children:[],parent:null,...e}))),t=(0,s.groupBy)(l,"parent");if(t.null&&t.null.length)return l;const o=e=>e.map((e=>{const l=t[e.id];return{...e,children:l&&l.length?o(l):[]}}));return o(t[0]||[])},b=[{attributes:{...o.uK,myAnchor:{type:"string",default:""}},migrate:e=>(e.anchor=e.myAnchor,e),save:()=>null}];(0,l.registerBlockType)(o.UU,{icon:{foreground:"#cd162c",src:n},keywords:[(0,t.__)("Posts list","snow-monkey-blocks"),(0,t.__)("Latest posts","snow-monkey-blocks")],edit:function({attributes:e,setAttributes:l,clientId:n}){const{postType:u,termId:b,authors:h,postsPerPage:_,layout:k,gap:f,ignoreStickyPosts:w,smCols:g,noPostsText:T,itemTitleTagName:x,itemThumbnailSizeSlug:E,forceDisplayItemMeta:I,displayItemAuthor:D,displayItemPublished:P,forceDisplayItemTerms:S,displayItemExcerpt:v,arrows:C,dots:K,interval:B,autoplayButton:V}=e;(0,c.useEffect)((()=>{let e,t;e=null==D?!["text","text2"].includes(k):D,t=null==v?["rich-media","simple","caroucel"].includes(k):v,l({displayItemAuthor:e,displayItemExcerpt:t})}),[k]),(0,c.useEffect)((()=>{l({clientId:e.clientId||n})}),[]);const{allPostTypes:A,taxonomiesTerms:N,allAuthors:z}=(0,i.useSelect)((e=>{const{getPostTypes:l,getEntityRecords:t,getTaxonomy:o}=e("core");let a=l({per_page:-1})||[];a=a.filter((e=>e.viewable&&!e.hierarchical&&"media"!==e.rest_base));const n=[];a.forEach((e=>{e.taxonomies.forEach((e=>{const l=o(e);if(l?.visibility?.show_ui){const o=t("taxonomy",e,{per_page:-1})||[];0<o.length&&n.push({taxonomy:e,label:l.name,terms:o})}}))}));const s=e("core").getUsers({who:"authors",per_page:-1,_fields:"id,name",context:"view"});return{allPostTypes:a,taxonomiesTerms:n,allAuthors:s}}),[]),F=[],M=A.find((e=>u===e.slug))?.taxonomies||[];N.forEach((e=>{M.includes(e.taxonomy)&&F.push(e)}));const L=(0,i.useSelect)((e=>{const{getSettings:l}=e("core/block-editor"),{imageSizes:t}=l();return t.map((e=>({value:e.slug,label:e.name})))}),[]),R=["h2","h3","h4"];return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(r.InspectorControls,null,(0,a.createElement)(m.__experimentalToolsPanel,{label:(0,t.__)("Block settings","snow-monkey-blocks")},(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>u!==o.uK.postType.default,isShownByDefault:!0,label:(0,t.__)("Post type","snow-monkey-blocks"),onDeselect:()=>l({postType:o.uK.postType.default})},(0,a.createElement)(m.SelectControl,{label:(0,t.__)("Post type","snow-monkey-blocks"),value:u,onChange:e=>l({postType:e}),options:A.map((e=>({label:e.name,value:e.slug})))})),F.length?(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>b!==o.uK.termId.default,isShownByDefault:!0,label:(0,t.__)("Taxonomy","snow-monkey-blocks"),onDeselect:()=>l({termId:o.uK.termId.default,taxonomy:o.uK.taxonomy.default})},F.map((e=>(0,a.createElement)(m.TreeSelect,{key:e.taxonomy,label:(0,t.sprintf)(
// translators: %1$s: Term label
// translators: %1$s: Term label
(0,t.__)("Filter by %1$s","snow-monkey-blocks"),e.label),noOptionLabel:"-",onChange:t=>{l({termId:p(t),taxonomy:e.taxonomy})},selectedId:b,tree:d(e.terms)})))):(0,a.createElement)("div",{style:{gridColumn:"1/-1"}},(0,a.createElement)(m.BaseControl,{label:(0,t.__)("Loading taxonomiesâ€¦","snow-monkey-blocks"),id:"snow-monkey-blocks/taxonomy-posts/taxonomies"},(0,a.createElement)(m.Spinner,null))),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>h!==o.uK.authors.default,isShownByDefault:!0,label:(0,t.__)("Authors","snow-monkey-blocks"),onDeselect:()=>l({authors:o.uK.authors.default})},(0,a.createElement)(m.FormTokenField,{label:(0,t.__)("Authors","snow-monkey-blocks"),onChange:e=>{const t=e.map((e=>{const l=e?.value||e;return z.find((e=>e.name===l))?.id})).filter((e=>e));l({authors:Array.from(new Set(t))})},suggestions:[...(z||[]).map((e=>e.name))],value:h.map((e=>{const l=z?.find((l=>l.id===e));return!!l&&{id:l.id,value:l.name}})).filter((e=>e))})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>_!==o.uK.postsPerPage.default,isShownByDefault:!0,label:(0,t.__)("Number of posts","snow-monkey-blocks"),onDeselect:()=>l({postsPerPage:o.uK.postsPerPage.default})},(0,a.createElement)(m.RangeControl,{label:(0,t.__)("Number of posts","snow-monkey-blocks"),value:_,onChange:e=>l({postsPerPage:p(e,1,12)}),min:"1",max:"12"})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>k!==o.uK.layout.default,isShownByDefault:!0,label:(0,t.__)("Layout","snow-monkey-blocks"),onDeselect:()=>l({layout:o.uK.layout.default})},(0,a.createElement)(m.SelectControl,{label:(0,t.__)("Layout","snow-monkey-blocks"),value:k,onChange:e=>{l({layout:e})},options:[{value:"rich-media",label:(0,t.__)("Rich media","snow-monkey-blocks")},{value:"simple",label:(0,t.__)("Simple","snow-monkey-blocks")},{value:"text",label:(0,t.__)("Text","snow-monkey-blocks")},{value:"text2",label:(0,t.__)("Text 2","snow-monkey-blocks")},{value:"panel",label:(0,t.__)("Panels","snow-monkey-blocks")},{value:"carousel",label:(0,t.sprintf)(
// translators: %1$s: Layout
// translators: %1$s: Layout
(0,t.__)("Carousel (%1$s)","snow-monkey-blocks"),(0,t.__)("Rich media","snow-monkey-blocks"))},{value:"large-image",label:(0,t.__)("Large image","snow-monkey-blocks")}]})),"carousel"===k&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>C!==o.uK.arrows.default,isShownByDefault:!0,label:(0,t.__)("Display arrows","snow-monkey-blocks"),onDeselect:()=>l({arrows:o.uK.arrows.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Display arrows","snow-monkey-blocks"),checked:C,onChange:e=>l({arrows:e})})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>K!==o.uK.dots.default,isShownByDefault:!0,label:(0,t.__)("Display dots","snow-monkey-blocks"),onDeselect:()=>l({dots:o.uK.dots.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Display dots","snow-monkey-blocks"),checked:K,onChange:e=>l({dots:e})})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>B!==o.uK.interval.default,isShownByDefault:!0,label:(0,t.__)("Autoplay Speed in seconds","snow-monkey-blocks"),onDeselect:()=>l({interval:o.uK.interval.default})},(0,a.createElement)(m.RangeControl,{label:(0,t.__)("Autoplay Speed in seconds","snow-monkey-blocks"),help:(0,t.__)('If "0", no scroll.',"snow-monkey-blocks"),value:B,onChange:e=>l({interval:p(e,0,10)}),min:"0",max:"10"})),0<B&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>V!==o.uK.autoplayButton.default,isShownByDefault:!0,label:(0,t.__)("Autoplay Speed in seconds","snow-monkey-blocks"),onDeselect:()=>l({autoplayButton:o.uK.autoplayButton.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Display pause button for autoplay","snow-monkey-blocks"),checked:V,onChange:e=>l({autoplayButton:e})}))),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>f!==o.uK.gap.default,isShownByDefault:!0,label:(0,t.__)("The gap between each item","snow-monkey-blocks"),onDeselect:()=>l({gap:o.uK.gap.default})},(0,a.createElement)(m.SelectControl,{label:(0,t.__)("The gap between each item","snow-monkey-blocks"),value:f,onChange:e=>l({gap:e}),options:[{value:"",label:(0,t.__)("Default","snow-monkey-blocks")},{value:"s",label:(0,t.__)("S","snow-monkey-blocks")},{value:"m",label:(0,t.__)("M","snow-monkey-blocks")},{value:"l",label:(0,t.__)("L","snow-monkey-blocks")}]})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>x!==o.uK.itemTitleTagName.default,isShownByDefault:!0,label:(0,t.__)("Title tag of each items","snow-monkey-blocks"),onDeselect:()=>l({itemTitleTagName:o.uK.itemTitleTagName.default})},(0,a.createElement)(m.BaseControl,{label:(0,t.__)("Title tag of each items","snow-monkey-blocks"),id:"snow-monkey-blocks/recent-posts/item-title-tag-name"},(0,a.createElement)("div",{className:"smb-list-icon-selector"},(0,s.times)(R.length,(e=>(0,a.createElement)(m.Button,{variant:x===R[e]?"primary":"secondary",onClick:()=>l({itemTitleTagName:R[e]}),key:e},R[e])))))),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>E!==o.uK.itemThumbnailSizeSlug.default,isShownByDefault:!0,label:(0,t.__)("Images size of each items","snow-monkey-blocks"),onDeselect:()=>l({itemThumbnailSizeSlug:o.uK.itemThumbnailSizeSlug.default})},(0,a.createElement)(m.SelectControl,{label:(0,t.__)("Images size of each items","snow-monkey-blocks"),value:E,options:L,onChange:e=>l({itemThumbnailSizeSlug:e})})),"post"!==u&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>I!==o.uK.forceDisplayItemMeta.default,isShownByDefault:!0,label:(0,t.__)("Force display meta of each items","snow-monkey-blocks"),onDeselect:()=>l({forceDisplayItemMeta:o.uK.forceDisplayItemMeta.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Force display meta of each items","snow-monkey-blocks"),help:(0,t.__)("If it's already displayed, this setting will be ignored.","snow-monkey-blocks"),checked:I,onChange:e=>l({forceDisplayItemMeta:e})})),("post"===u||I)&&"text"!==k&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>D!==!["text","text2"].includes(k),isShownByDefault:!0,label:(0,t.__)("Display author of each items","snow-monkey-blocks"),onDeselect:()=>l({displayItemAuthor:!["text","text2"].includes(k)})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Display author of each items","snow-monkey-blocks"),checked:D,onChange:e=>l({displayItemAuthor:e})})),("post"===u||I)&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>P!==o.uK.displayItemPublished.default,isShownByDefault:!0,label:(0,t.__)("Display published date of each items","snow-monkey-blocks"),onDeselect:()=>l({displayItemPublished:o.uK.displayItemPublished.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Display published date of each items","snow-monkey-blocks"),checked:P,onChange:e=>l({displayItemPublished:e})})),"post"!==u&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>S!==o.uK.forceDisplayItemTerms.default,isShownByDefault:!0,label:(0,t.__)("Force display category label of each items","snow-monkey-blocks"),onDeselect:()=>l({forceDisplayItemTerms:o.uK.forceDisplayItemTerms.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Force display category label of each items","snow-monkey-blocks"),help:(0,t.__)("If it's already displayed, this setting will be ignored.","snow-monkey-blocks"),checked:S,onChange:e=>l({forceDisplayItemTerms:e})})),["rich-media","simple","panel","carousel"].includes(k)&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>v===["rich-media","simple","panel","carousel"].includes(k),isShownByDefault:!0,label:(0,t.__)("Display excerpt of each items","snow-monkey-blocks"),onDeselect:()=>{l({displayItemExcerpt:["rich-media","simple","panel","carousel"].includes(k)})}},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Display excerpt of each items","snow-monkey-blocks"),checked:v,onChange:e=>l({displayItemExcerpt:e})})),("rich-media"===k||"panel"===k)&&(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>g!==o.uK.smCols.default,isShownByDefault:!0,label:(0,t.__)("Number of columns displayed on mobile device","snow-monkey-blocks"),onDeselect:()=>l({smCols:o.uK.smCols.default})},(0,a.createElement)(m.SelectControl,{label:(0,t.__)("Number of columns displayed on mobile device","snow-monkey-blocks"),value:g,onChange:e=>l({smCols:p(e)}),options:[{value:0,label:(0,t.__)("Default","snow-monkey-blocks")},{value:1,label:(0,t.__)("1 column","snow-monkey-blocks")},{value:2,label:(0,t.__)("2 columns","snow-monkey-blocks")}]})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>w!==o.uK.ignoreStickyPosts.default,isShownByDefault:!0,label:(0,t.__)("Ignore sticky posts","snow-monkey-blocks"),onDeselect:()=>l({ignoreStickyPosts:o.uK.ignoreStickyPosts.default})},(0,a.createElement)(m.ToggleControl,{label:(0,t.__)("Ignore sticky posts","snow-monkey-blocks"),checked:w,onChange:e=>l({ignoreStickyPosts:e})})),(0,a.createElement)(m.__experimentalToolsPanelItem,{hasValue:()=>T!==o.uK.noPostsText.default,isShownByDefault:!0,label:(0,t.__)("Text if no posts matched","snow-monkey-blocks"),onDeselect:()=>l({noPostsText:o.uK.noPostsText.default})},(0,a.createElement)(m.TextareaControl,{label:(0,t.__)("Text if no posts matched","snow-monkey-blocks"),help:(0,t.__)("Allow HTML","snow-monkey-blocks"),value:T||"",onChange:e=>l({noPostsText:e})})))),(0,a.createElement)("div",{...(0,r.useBlockProps)()},A?(0,a.createElement)(m.Disabled,null,(0,a.createElement)(y(),{block:"snow-monkey-blocks/recent-posts",attributes:e})):(0,a.createElement)(m.Placeholder,{icon:"editor-ul",label:(0,t.__)("Recent posts","snow-monkey-blocks")},(0,a.createElement)(m.Spinner,null))))},save:function(){return(0,a.createElement)("div",{...r.useBlockProps.save(),"data-dynamic-block":"snow-monkey-blocks/recent-posts","data-version":"2"})},deprecated:b})})();