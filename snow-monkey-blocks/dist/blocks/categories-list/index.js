(()=>{var e={6942:(e,s)=>{var o;!function(){"use strict";var t={}.hasOwnProperty;function l(){for(var e="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(e=r(e,n(o)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var o in e)t.call(e,o)&&e[o]&&(s=r(s,o));return s}function r(e,s){return s?e?e+" "+s:e+s:e}e.exports?(l.default=l,e.exports=l):void 0===(o=function(){return l}.apply(s,[]))||(e.exports=o)}()}},s={};function o(t){var l=s[t];if(void 0!==l)return l.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,o),n.exports}o.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return o.d(s,{a:s}),s},o.d=(e,s)=>{for(var t in s)o.o(s,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},o.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";const e=window.wp.blocks,s=JSON.parse('{"name":"snow-monkey-blocks/categories-list","uK":{"OZ":{"A":5},"rE":{"A":""},"q5":{"A":""},"fq":{"A":""}}}'),t=window.ReactJSXRuntime,l=(0,t.jsxs)("svg",{viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{d:"M21.28,12.57H16.76a.19.19,0,0,1-.18-.19V10.73a.73.73,0,0,0-.72-.73H9.72a.73.73,0,0,0-.72.73v9.54a.73.73,0,0,0,.72.73H21.28a.73.73,0,0,0,.72-.73v-7A.72.72,0,0,0,21.28,12.57ZM21,19.62a.37.37,0,0,1-.37.38H10.37a.37.37,0,0,1-.37-.38V11.37a.37.37,0,0,1,.37-.37h4.76a.37.37,0,0,1,.37.37v1.88a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,21,14Z"}),(0,t.jsx)("path",{d:"M9,13H3.37A.37.37,0,0,1,3,12.62V4.37A.37.37,0,0,1,3.37,4H8.13a.37.37,0,0,1,.37.37V6.25a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,14,7v3h1V6.3a.72.72,0,0,0-.72-.73H9.76a.19.19,0,0,1-.18-.19V3.73A.73.73,0,0,0,8.86,3H2.72A.73.73,0,0,0,2,3.73v9.54a.73.73,0,0,0,.72.73H9Z"})]});var n=o(6942),r=o.n(n);const i=window.lodash,a=window.wp.components,c=window.wp.blockEditor,d=window.wp.data,u=window.wp.element,_=window.wp.i18n,m=(e,s=0,o=null)=>(e=Number(e),(isNaN(e)||e<s)&&(e=s),null!==o&&e>o&&(e=o),e),g=window.wp.dataControls,{name:p}=s,b={articleCategories:{}},y={setArticleCategories:e=>({type:"SET_ARTICLE_CATEGORIES",articleCategories:e}),*fetchArticleCategories(){const e=yield(0,g.apiFetch)({path:"/wp/v2/categories/?per_page=-1"});return y.setArticleCategories(e)}},h={*getArticleCategories(){yield y.fetchArticleCategories()}},x=(0,d.createReduxStore)(p,{reducer:(e=b,s)=>"SET_ARTICLE_CATEGORIES"===s.type?{...e,articleCategories:s.articleCategories}:e,actions:y,selectors:{getArticleCategories:e=>e.articleCategories},controls:g.controls,resolvers:h});(0,d.register)(x),(0,e.registerBlockType)(s.name,{icon:{foreground:"#cd162c",src:l},edit:function({attributes:e,setAttributes:o,className:l}){const{articles:n,exclusionCategories:g,orderby:p,order:b}=e,y=(0,u.useRef)(),h=(0,d.useSelect)((e=>e(x).getArticleCategories()));if(!h||!h.length)return(0,t.jsx)("div",{...(0,c.useBlockProps)(),children:(0,t.jsxs)(a.Placeholder,{icon:"editor-ul",label:(0,_.__)("Categories list","snow-monkey-blocks"),children:[(0,t.jsx)(a.Spinner,{}),(0,_.__)("Loading setting data","snow-monkey-blocks")]})});const w=(e,s)=>{let o=[];return null!=g&&(o=g.split(",")),e?o.push(s):o=(0,i.remove)(o,(e=>s!==e)),(0,i.compact)((0,i.union)(o)).join(",")},k=()=>h.map((e=>(0,t.jsx)(a.ToggleControl,{label:e.name,value:String(e.id),checked:-1!==(0,i.indexOf)(g.split(","),String(e.id)),onChange:s=>{o({exclusionCategories:w(s,String(e.id))})}},e.id))),v=r()("smb-categories-list",l),f=()=>{const e=h.map((e=>e.count>0&&-1===(0,i.indexOf)(g.split(","),String(e.id))?(0,t.jsxs)("li",{className:"smb-categories-list__item",children:[(0,t.jsxs)("div",{className:"smb-categories-list__item__count",children:[e.count,(0,t.jsx)("span",{children:(0,_.__)("articles","snow-monkey-blocks")})]}),(0,t.jsxs)("div",{className:"smb-categories-list__item__detail",children:[(0,t.jsx)("div",{className:"smb-categories-list__item__category-name",children:e.name}),e.description&&(0,t.jsx)("div",{className:"smb-categories-list__item__category-description",children:e.description}),(0,t.jsx)("div",{className:"smb-categories-list__item__recent-label",children:(0,_.__)("Recent posts","snow-monkey-blocks")}),(0,t.jsx)("ul",{className:"smb-categories-list__item__list",children:(0,t.jsx)("li",{children:(0,_.__)("Only the actual contribution screen is displayed","snow-monkey-blocks")})})]})]},e.id):null)).filter((e=>e));return(0,t.jsx)("div",{className:v,children:(0,t.jsx)("ul",{className:"smb-categories-list__list",ref:y,children:e.filter((e=>e))})})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.InspectorControls,{children:[(0,t.jsx)(a.__experimentalToolsPanel,{label:(0,_.__)("Block settings","snow-monkey-blocks"),children:(0,t.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>n!==s.uK.OZ.A,isShownByDefault:!0,label:(0,_.__)("Categories list articles","snow-monkey-blocks"),onDeselect:()=>o({articles:s.uK.OZ.A}),children:(0,t.jsx)(a.RangeControl,{label:(0,_.__)("Categories list articles","snow-monkey-blocks"),value:n,onChange:e=>o({articles:m(e,1,5)}),min:"1",max:"5"})})}),(0,t.jsx)(a.__experimentalToolsPanel,{label:(0,_.__)("Exclusion categories settings","snow-monkey-blocks"),children:(0,t.jsxs)(a.__experimentalToolsPanelItem,{hasValue:()=>g!==s.uK.rE.A,isShownByDefault:!0,label:(0,_.__)("Exclusion categories settings","snow-monkey-blocks"),onDeselect:()=>o({exclusionCategories:s.uK.rE.A}),children:[(0,t.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,_.__)("Categories with a post count of 0 are not displayed even if they are not excluded","snow-monkey-blocks")}),(0,t.jsx)("div",{style:{display:"grid",gap:"16px"},children:(0,t.jsx)(k,{})})]})}),(0,t.jsxs)(a.__experimentalToolsPanel,{label:(0,_.__)("Display order settings","snow-monkey-blocks"),children:[(0,t.jsx)("p",{style:{gridColumn:"1/-1"},children:(0,_.__)("The display order you set is valid only on the actual contribution screen","snow-monkey-blocks")}),(0,t.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>p!==s.uK.q5.A,isShownByDefault:!0,label:(0,_.__)("orderby","snow-monkey-blocks"),onDeselect:()=>o({orderby:s.uK.q5.A}),children:(0,t.jsx)(a.SelectControl,{label:(0,_.__)("orderby","snow-monkey-blocks"),value:p,options:[{label:(0,_.__)("category id","snow-monkey-blocks"),value:"id"},{label:(0,_.__)("category name","snow-monkey-blocks"),value:"name"},{label:(0,_.__)("category slug","snow-monkey-blocks"),value:"slug"},{label:(0,_.__)("category post count","snow-monkey-blocks"),value:"count"},{label:(0,_.__)("term_group","snow-monkey-blocks"),value:"term_group"}],onChange:e=>o({orderby:e})})}),(0,t.jsx)(a.__experimentalToolsPanelItem,{hasValue:()=>b!==s.uK.fq.A,isShownByDefault:!0,label:(0,_.__)("order","snow-monkey-blocks"),onDeselect:()=>o({order:s.uK.fq.A}),children:(0,t.jsx)(a.SelectControl,{label:(0,_.__)("order","snow-monkey-blocks"),value:b,options:[{label:(0,_.__)("asc","snow-monkey-blocks"),value:"asc"},{label:(0,_.__)("desc","snow-monkey-blocks"),value:"desc"}],onChange:e=>o({order:e})})})]})]}),(0,t.jsx)("div",{...(0,c.useBlockProps)(),children:(0,t.jsx)(f,{})})]})},save:function(){return null}})})()})();