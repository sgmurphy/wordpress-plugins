(()=>{var e={6942:(e,t)=>{var o;!function(){"use strict";var l={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,r(o)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)l.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}()}},t={};function o(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"name":"snow-monkey-blocks/categories-list","uK":{"OZ":{"A":5},"rE":{"A":""},"q5":{"A":""},"fq":{"A":""}}}'),l=window.React,n=(0,l.createElement)("svg",{viewBox:"0 0 24 24"},(0,l.createElement)("path",{d:"M21.28,12.57H16.76a.19.19,0,0,1-.18-.19V10.73a.73.73,0,0,0-.72-.73H9.72a.73.73,0,0,0-.72.73v9.54a.73.73,0,0,0,.72.73H21.28a.73.73,0,0,0,.72-.73v-7A.72.72,0,0,0,21.28,12.57ZM21,19.62a.37.37,0,0,1-.37.38H10.37a.37.37,0,0,1-.37-.38V11.37a.37.37,0,0,1,.37-.37h4.76a.37.37,0,0,1,.37.37v1.88a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,21,14Z"}),(0,l.createElement)("path",{d:"M9,13H3.37A.37.37,0,0,1,3,12.62V4.37A.37.37,0,0,1,3.37,4H8.13a.37.37,0,0,1,.37.37V6.25a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,14,7v3h1V6.3a.72.72,0,0,0-.72-.73H9.76a.19.19,0,0,1-.18-.19V3.73A.73.73,0,0,0,8.86,3H2.72A.73.73,0,0,0,2,3.73v9.54a.73.73,0,0,0,.72.73H9Z"}));var r=o(6942),a=o.n(r);const s=window.lodash,i=window.wp.components,c=window.wp.blockEditor,m=window.wp.data,u=window.wp.element,_=window.wp.i18n,d=(e,t=0,o=null)=>(e=Number(e),(isNaN(e)||e<t)&&(e=t),null!==o&&e>o&&(e=o),e),g=window.wp.dataControls,{name:p}=t,b={articleCategories:{}},y={setArticleCategories:e=>({type:"SET_ARTICLE_CATEGORIES",articleCategories:e}),*fetchArticleCategories(){const e=yield(0,g.apiFetch)({path:"/wp/v2/categories/?per_page=-1"});return y.setArticleCategories(e)}},k={*getArticleCategories(){yield y.fetchArticleCategories()}},w=(0,m.createReduxStore)(p,{reducer:(e=b,t)=>"SET_ARTICLE_CATEGORIES"===t.type?{...e,articleCategories:t.articleCategories}:e,actions:y,selectors:{getArticleCategories:e=>e.articleCategories},controls:g.controls,resolvers:k});(0,m.register)(w),(0,e.registerBlockType)(t.name,{icon:{foreground:"#cd162c",src:n},edit:function({attributes:e,setAttributes:o,className:n}){const{articles:r,exclusionCategories:g,orderby:p,order:b}=e,y=(0,u.useRef)(),k=(0,m.useSelect)((e=>e(w).getArticleCategories()));if(!k||!k.length)return(0,l.createElement)("div",{...(0,c.useBlockProps)()},(0,l.createElement)(i.Placeholder,{icon:"editor-ul",label:(0,_.__)("Categories list","snow-monkey-blocks")},(0,l.createElement)(i.Spinner,null),(0,_.__)("Loading setting data","snow-monkey-blocks")));const E=(e,t)=>{let o=[];return null!=g&&(o=g.split(",")),e?o.push(t):o=(0,s.remove)(o,(e=>t!==e)),(0,s.compact)((0,s.union)(o)).join(",")},v=a()("smb-categories-list",n);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(c.InspectorControls,null,(0,l.createElement)(i.__experimentalToolsPanel,{label:(0,_.__)("Block settings","snow-monkey-blocks")},(0,l.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>r!==t.uK.OZ.A,isShownByDefault:!0,label:(0,_.__)("Categories list articles","snow-monkey-blocks"),onDeselect:()=>o({articles:t.uK.OZ.A})},(0,l.createElement)(i.RangeControl,{label:(0,_.__)("Categories list articles","snow-monkey-blocks"),value:r,onChange:e=>o({articles:d(e,1,5)}),min:"1",max:"5"}))),(0,l.createElement)(i.__experimentalToolsPanel,{label:(0,_.__)("Exclusion categories settings","snow-monkey-blocks")},(0,l.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>g!==t.uK.rE.A,isShownByDefault:!0,label:(0,_.__)("Exclusion categories settings","snow-monkey-blocks"),onDeselect:()=>o({exclusionCategories:t.uK.rE.A})},(0,l.createElement)("p",{style:{gridColumn:"1/-1"}},(0,_.__)("Categories with a post count of 0 are not displayed even if they are not excluded","snow-monkey-blocks")),(0,l.createElement)((()=>k.map((e=>(0,l.createElement)(i.ToggleControl,{key:e.id,label:e.name,value:String(e.id),checked:-1!==(0,s.indexOf)(g.split(","),String(e.id)),onChange:t=>{o({exclusionCategories:E(t,String(e.id))})}})))),null))),(0,l.createElement)(i.__experimentalToolsPanel,{label:(0,_.__)("Display order settings","snow-monkey-blocks")},(0,l.createElement)("p",{style:{gridColumn:"1/-1"}},(0,_.__)("The display order you set is valid only on the actual contribution screen","snow-monkey-blocks")),(0,l.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>p!==t.uK.q5.A,isShownByDefault:!0,label:(0,_.__)("orderby","snow-monkey-blocks"),onDeselect:()=>o({orderby:t.uK.q5.A})},(0,l.createElement)(i.SelectControl,{label:(0,_.__)("orderby","snow-monkey-blocks"),value:p,options:[{label:(0,_.__)("category id","snow-monkey-blocks"),value:"id"},{label:(0,_.__)("category name","snow-monkey-blocks"),value:"name"},{label:(0,_.__)("category slug","snow-monkey-blocks"),value:"slug"},{label:(0,_.__)("category post count","snow-monkey-blocks"),value:"count"},{label:(0,_.__)("term_group","snow-monkey-blocks"),value:"term_group"}],onChange:e=>o({orderby:e})})),(0,l.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>b!==t.uK.fq.A,isShownByDefault:!0,label:(0,_.__)("order","snow-monkey-blocks"),onDeselect:()=>o({order:t.uK.fq.A})},(0,l.createElement)(i.SelectControl,{label:(0,_.__)("order","snow-monkey-blocks"),value:b,options:[{label:(0,_.__)("asc","snow-monkey-blocks"),value:"asc"},{label:(0,_.__)("desc","snow-monkey-blocks"),value:"desc"}],onChange:e=>o({order:e})})))),(0,l.createElement)("div",{...(0,c.useBlockProps)()},(0,l.createElement)((()=>{const e=k.map((e=>e.count>0&&-1===(0,s.indexOf)(g.split(","),String(e.id))?(0,l.createElement)("li",{className:"smb-categories-list__item",key:e.id},(0,l.createElement)("div",{className:"smb-categories-list__item__count"},e.count,(0,l.createElement)("span",null,(0,_.__)("articles","snow-monkey-blocks"))),(0,l.createElement)("div",{className:"smb-categories-list__item__detail"},(0,l.createElement)("div",{className:"smb-categories-list__item__category-name"},e.name),e.description&&(0,l.createElement)("div",{className:"smb-categories-list__item__category-description"},e.description),(0,l.createElement)("div",{className:"smb-categories-list__item__recent-label"},(0,_.__)("Recent posts","snow-monkey-blocks")),(0,l.createElement)("ul",{className:"smb-categories-list__item__list"},(0,l.createElement)("li",null,(0,_.__)("Only the actual contribution screen is displayed","snow-monkey-blocks"))))):null)).filter((e=>e));return(0,l.createElement)("div",{className:v},(0,l.createElement)("ul",{className:"smb-categories-list__list",ref:y},e.filter((e=>e))))}),null)))},save:function(){return null}})})()})();