fbuilderjQuery="undefined"!=typeof fbuilderjQuery?fbuilderjQuery:jQuery,fbuilderjQuery((function(){var e;(e=fbuilderjQuery).extend({stringifyXX:function(t){var i=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?e.replace(t,(function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})):e},a=typeof t;if("object"!=a||null===t)return"string"==a&&(t='"'+t+'"'),String(t);var o,s,l=[],n=t&&t.constructor==Array;for(o in t)"function"!=(a=typeof(s=t[o]))&&("string"==a?s='"'+i(s)+'"':"object"==a&&null!==s&&(s=e.stringifyXX(s)),l.push((n?"":'"'+o+'":')+String(s)));return(n?"[":"{")+String(l)+(n?"]":"}")}})})),$fbuilderloadedflag=!0,fbuilderjQuery="undefined"!=typeof fbuilderjQuery?fbuilderjQuery:jQuery,fbuilderjQuery((function(){(function($){$.fbuilder=$.fbuilder||{},$.fbuilder.objName="fbuilderjQuery",$.fbuilder.typeList=[],$.fbuilder.categoryList=[],$.fbuilder.controls={},$.fbuilder.preview=function(e){var t=$(e.form);t.attr("target","formpopup").attr("onsubmit",(function(e){var t=.8*screen.width,i=.7*screen.height,a=screen.width/2-t/2,o=screen.height/2-i/2,s=window.open("","formpopup","resizeable,scrollbars,width="+t+",height="+i+",left="+a+",top="+o);$(e).removeAttr("onsubmit"),s.focus()})),$('<input type="hidden" name="preview" value="1" />').appendTo(t),t[0].submit(),t.attr("target","_self").find('input[name="preview"]').remove()},$.fbuilder.htmlEncode=function(e){return e=(e=$("<div/>").text(e).html()).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},$.fbuilder.escape_symbol=function(e){return e.replace(/([\^\$\-\.\,\[\]\(\)\/\\\*\?\+\!\{\}])/g,"\\$1")},$.fbuilder.parseVal=function(e,t,i){if(""==e)return 0;e+="",t=new RegExp($.fbuilder.escape_symbol(void 0===t?",":t),"g"),i=new RegExp($.fbuilder.escape_symbol(void 0===i?".":i),"g");var a=e.replace(t,"").replace(i,".").replace(/\s/g,""),o=/[+-]?((\d+(\.\d+)?)|(\.\d+))/.exec(a);return o?1*o[0]:'"'+e.replace(/'/g,"\\'").replace(/\$/g,"")+'"'},$.fbuilder.showErrorMssg=function(e){$(".form-builder-error-messages").html('<div class="error-text">'+e+"</div>")},$.fn.fbuilder=function(options){var opt=$.extend({},{pub:!1,identifier:"",title:""},options,!0),typeList=$.fbuilder.typeList,categoryList=$.fbuilder.categoryList;$.fbuilder.getNameByIdFromType=function(e){for(var t=0,i=typeList.length;t<i;t++)if(typeList[t].id==e)return typeList[t].name;return""};for(var i=0,h=typeList.length;i<h;i++){var category_id=typeList[i].control_category;void 0===categoryList[category_id]?categoryList[category_id]={title:"",description:"",typeList:[]}:void 0===categoryList[category_id].typeList&&(categoryList[category_id].typeList=[]),categoryList[category_id].typeList.push(i)}for(var i in categoryList)if($("#cptabs-1").append('<div style="clear:both;"></div><div>'+categoryList[i].title+"</div><hr />"),void 0===categoryList[i].description||/^\s*$/.test(categoryList[i].description)||$("#cptabs-1").append('<div style="clear:both;"></div><div class="category-description">'+categoryList[i].description+"</div>"),void 0!==categoryList[i].typeList)for(var j=0,k=categoryList[i].typeList.length;j<k;j++){var index=categoryList[i].typeList[j];$("#cptabs-1").append('<div class="button '+(0!=j&&1!=j&&2!=j&&3!=j||i>1?"n":"itemForm")+'  width40" id="'+typeList[index].id+'">'+typeList[index].name+"</div>")}$("#cptabs-1").append('<div class="clearer"></div>'),$(".button").button();var items=[],fieldsIndex={},calculatedFields={},selected=-3;$.fbuilder.editItem=function(e){selected=e;try{$("#cptabs-2").html(items[e].showAllSettings())}catch(e){}items[e].editItemEvents()},$.fbuilder.removeItem=function(e){void 0!==items[e].remove&&items[e].remove(),items.splice(e,1);for(var t=0,i=items.length;t<i;t++)items[t].index=t;selected=-2,$("#tabs").tabs("option","active",0),$.fbuilder.reloadItems()},$.fbuilder.duplicateItem=function(e){for(var t=0,i=0,a=items.length;i<a;i++)n1=parseInt(items[i].name.replace(/fieldname/g,"")),n1>t&&(t=n1);if($("#field-"+items[e].index).parents(".fields").length){i=$("#field-"+items[e].index).parents(".fields").attr("id").replace("field-","");void 0!==items[i].duplicateItem&&items[i].duplicateItem(items[e].name,"fieldname"+(t+1))}items.splice(1*e+1,0,$.extend(!0,{},items[e],{name:"fieldname"+(t+1)}));for(i=1*e+1,a=items.length;i<a;i++)items[i].index=i;$("#tabs").tabs("option","active",0),$.fbuilder.reloadItems()},$.fbuilder.editForm=function(){$("#cptabs-3").html(theForm.showAllSettings()),selected=-1,$("#fTitle").keyup((function(){theForm.title=$(this).val(),$.fbuilder.reloadItems()})),$("#fEvalEquations").click((function(){theForm.evalequations=$(this).is(":checked")?1:0,$.fbuilder.reloadItems()})),$("#fAutofocus").click((function(){theForm.autofocus=$(this).is(":checked"),$.fbuilder.reloadItems()})),$("#fAutocomplete").click((function(){theForm.autocomplete=$(this).is(":checked")?1:0,$.fbuilder.reloadItems()})),$("#fDescription").keyup((function(){theForm.description=$(this).val(),$.fbuilder.reloadItems()})),$("#fLayout").change((function(){theForm.formlayout=$(this).val(),$.fbuilder.reloadItems()})),$("#fTemplate").change((function(){theForm.formtemplate=$(this).val();var e=$.fbuilder.showSettings.formTemplateDic[theForm.formtemplate],t="",i="";void 0!==e&&(void 0!==e.thumbnail&&(t='<img src="'+e.thumbnail+'">'),void 0!==e.description&&(i=e.description)),$("#fTemplateThumbnail").html(t),$("#fTemplateDescription").html(i),$.fbuilder.reloadItems()}))},$.fbuilder.reloadItems=function(){for(var e=0,t=$.fbuilder.showSettings.formlayoutList.length;e<t;e++)$("#fieldlist"+opt.identifier).removeClass($.fbuilder.showSettings.formlayoutList[e].id);$("#fieldlist"+opt.identifier).addClass(theForm.formlayout),$("#formheader"+opt.identifier).html(theForm.display()),$("#fieldlist"+opt.identifier).html(""),-1==parseInt(selected)?$(".fform").addClass("ui-selected"):$(".fform").removeClass("ui-selected"),fieldsIndex={},calculatedFields={};for(e=0,t=items.length;e<t;e++)items[e].index=e,fieldsIndex[items[e].name]=e,"fCalculated"==items[e].ftype&&(calculatedFields[items[e].name]=e),$("#fieldlist"+opt.identifier).append(items[e].display()),e==selected?($("#field"+opt.identifier+"-"+e).addClass("ui-selected"),1!=$("#tabs").tabs("option","active")&&$.fbuilder.editItem(e)):$("#field"+opt.identifier+"-"+e).removeClass("ui-selected"),$("#field"+opt.identifier+"-"+e+" .remove").click((function(){$.fbuilder.removeItem($(this).parent().attr("id").replace("field"+opt.identifier+"-",""))})),$("#field"+opt.identifier+"-"+e+" .copy").click((function(){$.fbuilder.duplicateItem($(this).parent().attr("id").replace("field"+opt.identifier+"-",""))}));for(e=0,t=items.length;e<t;e++)void 0!==items[e].after_show&&items[e].after_show();items.length>0&&($(".fields").mouseover((function(e){$(this).addClass("ui-over"),e.stopPropagation()})).mouseout((function(e){$(this).removeClass("ui-over"),e.stopPropagation()})).click((function(e){e.stopPropagation(),$.fbuilder.editItem($(this).attr("id").replace("field"+opt.identifier+"-","")),$("#fieldlist .ui-selected").removeClass("ui-selected"),$(this).addClass("ui-selected"),$("#tabs").tabs("option","active",1)})),$(".field").focus((function(){$(this).blur()}))),$(".fform").mouseover((function(){$(this).addClass("ui-over")})).mouseout((function(){$(this).removeClass("ui-over")})).click((function(e){e.stopPropagation(),$("#tabs").tabs("option","active",2),$.fbuilder.editForm(),$(this).siblings().removeClass("ui-selected"),$(this).addClass("ui-selected")})),ffunct.saveData("form_structure");var i="",a=$("#cu_user_email_field").attr("def").split(",");for(e=0,t=items.length;e<t;e++){"femail"!=(n=items[e]).ftype&&"femailds"!=n.ftype||(i+='<option value="'+n.name+'" '+(-1!=$.inArray(n.name,a)?"selected":"")+">"+n.name+" ("+$.fbuilder.htmlEncode(n.title)+")</option>")}$("#cu_user_email_field").html(i);i="";var o=$('[name="paypal_recurrent_field"]').attr("def");for(e=0,t=items.length;e<t;e++){"fradio"!=(n=items[e]).ftype&&"fdropdown"!=n.ftype||(i+='<option value="'+n.name+'" '+(n.name==o?"selected":"")+">"+n.name+" ("+$.fbuilder.htmlEncode(n.title)+")</option>")}if($('[name="paypal_recurrent_field"]').html(i),$("#fp_destination_emails_field").length>0&&$("#fp_destination_emails_field").is("select")){for(i="",e=0,t=items.length;e<t;e++){i+='<option value="'+(n=items[e]).name+'" '+(n.name==$("#fp_destination_emails_field").attr("def")?"selected":"")+">"+n.name+"("+$.fbuilder.htmlEncode(n.title)+")</option>"}$("#fp_destination_emails_field").html(i)}if($("#request_cost").length>0&&$("#request_cost").is("select")){i="";var s=$("#request_cost").attr("def");for(e=0,t=items.length;e<t;e++){i+='<option value="'+(n=items[e]).name+'" '+(n.name==s?"selected":"")+">"+n.name+"("+$.fbuilder.htmlEncode(n.title)+")</option>"}$("#request_cost").html(i)}if($("#paypal_price_field").length>0){var l=$("#paypal_price_field").attr("def");for(i='<option value="" '+(""==l?"selected":"")+"> ---- No ---- </option>",e=0,t=items.length;e<t;e++){var n;i+='<option value="'+(n=items[e]).name+'" '+(n.name==l?"selected":"")+">"+$.fbuilder.htmlEncode(n.title)+"</option>"}$("#paypal_price_field").html(i)}};var fform=function(){};$.extend(fform.prototype,{title:"Untitled Form",description:"This is my form. Please fill it out. It's awesome!",formlayout:"top_aligned",formtemplate:"",evalequations:1,autocomplete:1,autofocus:!1,display:function(){return'<div class="fform" id="field"><div class="arrow ui-icon ui-icon-play "></div><h1>'+$.fbuilder.htmlEncode(this.title)+"</h1><span>"+$.fbuilder.htmlEncode(this.description)+"</span></div>"},showAllSettings:function(){for(var e="",t='<option value="">Use default template</option>',i="",a="",o="",s=0;s<$.fbuilder.showSettings.formlayoutList.length;s++)e+='<option value="'+$.fbuilder.showSettings.formlayoutList[s].id+'" '+($.fbuilder.showSettings.formlayoutList[s].id==this.formlayout?"selected":"")+">"+$.fbuilder.showSettings.formlayoutList[s].name+"</option>";for(var s in $.fbuilder.showSettings.formTemplateDic){if(/^\s*$/.test(s))break;o="",$.fbuilder.showSettings.formTemplateDic[s].prefix==this.formtemplate&&(o="SELECTED",void 0!==$.fbuilder.showSettings.formTemplateDic[s].thumbnail&&(i='<img src="'+$.fbuilder.showSettings.formTemplateDic[s].thumbnail+'">'),void 0!==$.fbuilder.showSettings.formTemplateDic[s].description&&(a=$.fbuilder.showSettings.formTemplateDic[s].description)),t+='<option value="'+$.fbuilder.showSettings.formTemplateDic[s].prefix+'" '+o+">"+$.fbuilder.htmlEncode($.fbuilder.showSettings.formTemplateDic[s].title)+"</option>"}return'<div><label>Form Name</label><input class="large" name="fTitle" id="fTitle" value="'+$.fbuilder.htmlEncode(this.title)+'" /></div><div><label>Description</label><textarea class="large" name="fDescription" id="fDescription">'+this.description+'</textarea></div><div><label>Label Placement</label><br /><select name="fLayout" id="fLayout" class="large">'+e+'</select></div><div><label><input type="checkbox" name="fAutofocus" id="fAutofocus" '+(this.autofocus?"CHECKED":"")+' /> Auto-focus booking form when the page is loaded</label></div><div><label><input type="checkbox" name="fAutocomplete" id="fAutocomplete" '+(this.autocomplete?"CHECKED":"")+" /> Enable autocompletion</label></div>"+(void 0!==$.fbuilder.controls.fCalculated?'<div><label><input type="checkbox" name="fEvalEquations" id="fEvalEquations" '+(this.evalequations?"CHECKED":"")+" /> Eval dynamically the equations associated to the calculated fields</label></div>":"")+'<div><label>Form Template</label><br /><select name="fTemplate" id="fTemplate" class="large">'+t+'</select></div><br /><div><span id="fTemplateThumbnail" style="float:left;padding-right:10px;">'+i+'</span><span  id="fTemplateDescription" style="float:left;">'+a+"</span></div>"}});var theForm=new fform;$("#fbuilder").click((function(e){e.stopPropagation(),selected=-2,$(".fform").removeClass("ui-selected"),$("#fieldlist .ui-selected").removeClass("ui-selected"),$("#tabs").tabs("option","active",0)})),$("#fieldlist"+opt.identifier).sortable({connectWith:".ui-sortable",items:".fields",update:function(e,t){var i,a=items.length;for(i=0;i<a&&!t.item.hasClass(items[i].name);i++);if("fieldlist"==t.item.parent().attr("id")){var o=parseInt(t.item.index());items.splice(o,0,items.splice(i,1)[0]),$.fbuilder.reloadItems()}else items=items.concat(items.splice(i,1))}}),$("#tabs").tabs({activate:function(e,t){switch($(this).tabs("option","active")){case 0:$(".fform").removeClass("ui-selected");break;case 1:$(".fform").removeClass("ui-selected"),selected<0&&$("#cptabs-2").html("<b>No Field Selected</b><br />Please click on a field in the form preview on the right to change its properties.");break;case 2:$(".fields").removeClass("ui-selected"),$(".fform").addClass("ui-selected"),$.fbuilder.editForm()}}});var ffunct={getFieldsIndex:function(){return fieldsIndex},getCalculatedFields:function(){return calculatedFields},getItems:function(){return items},addItem:function(id){var obj=eval("new $.fbuilder.controls['"+id+"']();"),fBuild=this,n=0;obj.init();for(var i=0,h=items.length;i<h;i++)n1=parseInt(items[i].name.replace(/fieldname/g,"")),n1>n&&(n=n1);return n++,obj.fBuild=fBuild,$.extend(obj,{name:"fieldname"+n}),selected>=0?(items.splice(1*selected+1,0,obj),void 0!==items[selected].addItem?items[selected].addItem(obj.name):selected++):(selected=items.length,items[selected]=obj),$.fbuilder.reloadItems(),obj},saveData:function(e){var t,i=$.stringifyXX(items),a=$.stringifyXX(theForm),o="The entered data includes invalid characters. Please, if you are copying and pasting from another platform, be sure the data not include invalid characters.";"undefined"!=typeof global_varible_save_data&&$(".form-builder-error-messages").html("");try{null!=$.parseJSON(i)&&null!=$.parseJSON(a)?(t="["+i+",["+a+"]]",$("#"+e).val(t),$("#form_structure_crc").val(t.length)):$.fbuilder.showErrorMssg(o)}catch(e){$.fbuilder.showErrorMssg(o)}global_varible_save_data=!0},loadData:function(form_structure,available_templates){var structure=$.parseJSON($("#"+form_structure).val()),templates=void 0===available_templates?null:$.parseJSON($("#"+available_templates).val()),fBuild=this;if(structure&&2==structure.length){items=[];for(var i=0;i<structure[0].length;i++){var obj=eval("new $.fbuilder.controls['"+structure[0][i].ftype+"']();");obj=$.extend(!0,{},obj,structure[0][i]),obj.name=obj.name+opt.identifier,obj.form_identifier=opt.identifier,obj.fBuild=fBuild,items[items.length]=obj}theForm=new fform,theForm=$.extend(theForm,structure[1][0]),$.fbuilder.reloadItems()}templates&&($.fbuilder.showSettings.formTemplateDic=templates)},removeItem:$.fbuilder.removeItem,editItem:$.fbuilder.editItem};return this.fBuild=ffunct,this},$.fbuilder.showSettings={sizeList:new Array({id:"small",name:"Small"},{id:"medium",name:"Medium"},{id:"large",name:"Large"}),layoutList:new Array({id:"one_column",name:"One Column"},{id:"two_column",name:"Two Column"},{id:"three_column",name:"Three Column"},{id:"side_by_side",name:"Side by Side"}),formlayoutList:new Array({id:"top_aligned",name:"Top Aligned"},{id:"left_aligned",name:"Left Aligned"},{id:"right_aligned",name:"Right Aligned"},{id:"center_aligned",name:"Center Aligned"}),formTemplateDic:{},showFieldType:function(e){return"<label>Field Type: "+$.fbuilder.getNameByIdFromType(e)+"</label><br /><br />"},showTitle:function(e){return'<label>Field Label</label><textarea class="large" name="sTitle" id="sTitle">'+$.fbuilder.htmlEncode(e)+"</textarea>"},showShortLabel:function(e){return'<div><label>Short label (optional) [<a class="helpfbuilder" text="The short label is used at title for the column when exporting the form data to CSV files.\n\nIf the short label is empty then, the field label will be used for the CSV file.">help?</a>] :</label><input class="large" name="sShortlabel" id="sShortlabel" value="'+$.fbuilder.htmlEncode(e)+'" /></div>'},showName:function(e){return'<div><label>Field name, tag for the message:</label><input readonly="readonly" class="large" name="sNametag" id="sNametag" value="&lt;%'+e+'%&gt;" /><input style="display:none" readonly="readonly" class="large" name="sName" id="sName" value="'+e+'" /></div>'},showPredefined:function(e,t){return'<div><label>Predefined Value</label><textarea class="large" name="sPredefined" id="sPredefined">'+e+'</textarea><br /><input type="checkbox" name="sPredefinedClick" id="sPredefinedClick" '+(t?"checked":"")+' value="1" > Use predefined value as placeholder.</div>'},showEqualTo:function(e,t){return'<div><label>Equal to [<a class="helpfbuilder" text="Use this field to create password confirmation field or email confirmation fields.\n\nSpecify this setting ONLY into the confirmation field, not in the original field.">help?</a>]</label><br /><select class="equalTo" name="sEqualTo" id="sEqualTo" dvalue="'+e+'" dname="'+t+'"></select></div>'},showRequired:function(e){return'<div><input type="checkbox" name="sRequired" id="sRequired" '+(e?"checked":"")+"><label>Required</label></div>"},showSize:function(e){for(var t="",i=0;i<this.sizeList.length;i++)t+='<option value="'+this.sizeList[i].id+'" '+(this.sizeList[i].id==e?"selected":"")+">"+this.sizeList[i].name+"</option>";return'<label>Field Size</label><br /><select name="sSize" id="sSize">'+t+"</select>"},showLayout:function(e){for(var t="",i=0;i<this.layoutList.length;i++)t+='<option value="'+this.layoutList[i].id+'" '+(this.layoutList[i].id==e?"selected":"")+">"+this.layoutList[i].name+"</option>";return'<label>Field Layout</label><br /><select name="sLayout" id="sLayout">'+t+"</select>"},showUserhelp:function(e,t){return'<div><label>Instructions for User</label><textarea class="large" name="sUserhelp" id="sUserhelp">'+e+'</textarea><br /><input type="checkbox" name="sUserhelpTooltip" id="sUserhelpTooltip" '+(t?"checked":"")+' value="1" > Show as floating tooltip.</div>'},showCsslayout:function(e){return'<label>Additional CSS Class</label><input class="large" name="sCsslayout" id="sCsslayout" value="'+$.fbuilder.htmlEncode(e)+'" />'}},$.fbuilder.controls.ffields=function(){},$.extend($.fbuilder.controls.ffields.prototype,{form_identifier:"",name:"",shortlabel:"",index:-1,ftype:"",userhelp:"",userhelpTooltip:!1,csslayout:"",init:function(){},editItemEvents:function(e){if(void 0!==e&&void 0!==e.length)for(var t=0,i=e.length;t<i;t++)$(e[t].s).bind(e[t].e,{obj:this,i:e[t]},(function(e){var t=$(this).val();void 0!==e.data.i.f&&(t=e.data.i.f($(this))),e.data.obj[e.data.i.l]=t,$.fbuilder.reloadItems({field:e.data.obj})}));if(void 0!==e&&void 0!==e.length)for(t=0,i=e.length;t<i;t++)$(e[t].s).bind(e[t].e,{obj:this,i:e[t]},(function(e){var t=$(this).val();void 0!==e.data.i.f&&(t=e.data.i.f($(this))),e.data.obj[e.data.i.l]=t,$.fbuilder.reloadItems({field:e.data.obj})}));$("#sTitle").bind("keyup",{obj:this},(function(e){var t=$(this).val();e.data.obj.title=t.replace(/\n/g,"<br />"),$.fbuilder.reloadItems()})),$("#sShortlabel").bind("keyup",{obj:this},(function(e){e.data.obj.shortlabel=$(this).val(),$.fbuilder.reloadItems()})),$("#sPredefined").bind("keyup",{obj:this},(function(e){e.data.obj.predefined=$(this).val(),$.fbuilder.reloadItems()})),$("#sPredefinedClick").bind("click",{obj:this},(function(e){e.data.obj.predefinedClick=$(this).is(":checked"),$.fbuilder.reloadItems()})),$("#sRequired").bind("click",{obj:this},(function(e){e.data.obj.required=$(this).is(":checked"),$.fbuilder.reloadItems()})),$("#sUserhelp").bind("keyup",{obj:this},(function(e){e.data.obj.userhelp=$(this).val(),$.fbuilder.reloadItems()})),$("#sUserhelpTooltip").bind("click",{obj:this},(function(e){e.data.obj.userhelpTooltip=$(this).is(":checked"),$.fbuilder.reloadItems()})),$("#sCsslayout").bind("keyup",{obj:this},(function(e){e.data.obj.csslayout=$(this).val(),$.fbuilder.reloadItems()})),$(".helpfbuilder").click((function(){alert($(this).attr("text"))}))},showSpecialData:function(){return void 0!==this.showSpecialDataInstance?this.showSpecialDataInstance():""},showEqualTo:function(){return void 0!==this.equalTo?$.fbuilder.showSettings.showEqualTo(this.equalTo,this.name):""},showPredefined:function(){return void 0!==this.predefined?$.fbuilder.showSettings.showPredefined(this.predefined,this.predefinedClick):""},showRequired:function(){return void 0!==this.required?$.fbuilder.showSettings.showRequired(this.required):""},showSize:function(){return void 0!==this.size?$.fbuilder.showSettings.showSize(this.size):""},showLayout:function(){return void 0!==this.layout?$.fbuilder.showSettings.showLayout(this.layout):""},showRange:function(){return void 0!==this.min?this.showRangeIntance():""},showFormat:function(){if(void 0===this.dformat)return"";try{return this.showFormatIntance()}catch(e){return""}},showChoice:function(){return void 0!==this.choices?this.showChoiceIntance():""},showUserhelp:function(){return $.fbuilder.showSettings.showUserhelp(this.userhelp,this.userhelpTooltip)},showCsslayout:function(){return $.fbuilder.showSettings.showCsslayout(this.csslayout)},showAllSettings:function(){return this.showFieldType()+this.showTitle()+this.showShortLabel()+this.showName()+this.showSize()+this.showLayout()+this.showFormat()+this.showRange()+this.showRequired()+this.showSpecialData()+this.showEqualTo()+this.showPredefined()+this.showChoice()+this.showUserhelp()+this.showCsslayout()},showFieldType:function(){return $.fbuilder.showSettings.showFieldType(this.ftype)},showTitle:function(){return $.fbuilder.showSettings.showTitle(this.title)},showName:function(){return $.fbuilder.showSettings.showName(this.name)},showShortLabel:function(){return $.fbuilder.showSettings.showShortLabel(this.shortlabel)},display:function(){return"Not available yet"},show:function(){return"Not available yet"}}),$.fbuilder.categoryList[2]={title:"",description:""},$.fbuilder.categoryList[3]={title:"Extended Form Controls (Commercial Versions)",description:""},$.fbuilder.categoryList[1]={title:"Main Form Controls",description:""},$.fbuilder.categoryList[20]={title:"Form Controls with Datasource Connection",description:""},$.fbuilder.categoryList[10]={title:"Container Controls",description:""},function(e){"use strict";function t(e){return"function"==typeof e}function i(e,t){function i(){s<e.size&&(r.readAsText(e.slice(s,Math.min(s+t.chunkSize,e.size))),s+=t.chunkSize)}if(t||(t={}),t.chunkSize||(t.chunkSize=5242880),t.config.step){var o=t.config.step;t.config.step=function(i){o(i,e,t.inputElem)}}var s=0,l="",n=new a(t.config),r=new FileReader;r.onload=function(a){var o=l+a.target.result;if(l="",o>=t.chunkSize){var r=o.lastIndexOf("\n");r<0&&(r=o.lastIndexOf("\r")),r>-1&&(l=o.substring(r+1),o=o.substring(0,r))}var d=n.parse(o);if(s>=e.size)return function(i){"function"==typeof t.onComplete&&t.onComplete(void 0,e,t.inputElem,i)}(a);d.errors.abort||i()},r.onerror=function(){"function"==typeof t.onFileError&&t.onFileError(r.error,e,t.inputElem)},this.stream=function(e,a){t.onComplete=e,t.onFileError=a,i()}}function a(e){function t(){var e=y.i>0&&o(y.i-1)||0==y.i,t=y.i<h.length-1&&o(y.i+1)||y.i==h.length-1,i=y.i<h.length-1&&'"'==h[y.i+1];y.inQuotes&&i?(y.fieldVal+='"',y.i++):e||t?y.inQuotes=!y.inQuotes:c("Quotes","UnexpectedQuotes","Unexpected quotes")}function i(){y.fieldVal+=y.ch}function o(e){if(e>=h.length)return!1;var t=h[e];return t==v.delimiter||"\n"==t||"\r"==t&&e<h.length-1&&"\n"==h[e+1]}function s(){if(v.header)if(1==y.lineNum&&1==p)y.parsed.fields.push(y.fieldVal);else{var e=y.parsed.rows[y.parsed.rows.length-1],t=y.parsed.fields[y.field];t?(v.dynamicTyping&&(y.fieldVal=d(y.fieldVal)),e[t]=y.fieldVal):(void 0===e.__parsed_extra&&(e.__parsed_extra=[]),e.__parsed_extra.push(y.fieldVal))}else v.dynamicTyping&&(y.fieldVal=d(y.fieldVal)),y.parsed[y.parsed.length-1].push(y.fieldVal);y.fieldVal="",y.field++}function l(){n(),r()&&(y.errors={},y.errors.length=0),v.header&&y.lineNum>0?r()?y.parsed.rows=[{}]:y.parsed.rows.push({}):r()?y.parsed=[[]]:y.parsed.push([]),y.lineNum++,y.line="",y.field=0}function n(){b||(s(),!function(){if(g.empty.test(y.line))return v.header?1==y.lineNum?(y.parsed.fields=[],y.lineNum--):y.parsed.rows.splice(y.parsed.rows.length-1,1):y.parsed.splice(y.parsed.length-1,1),!0;return!1}()&&v.header&&function(){if(!v.header)return!0;if(0==y.parsed.rows.length)return!0;var e=y.parsed.fields.length,t=0,i=y.parsed.rows[y.parsed.rows.length-1];for(var a in i)i.hasOwnProperty(a)&&t++;if(t<e)return c("FieldMismatch","TooFewFields","Too few fields: expected "+e+" fields but parsed "+t);if(t>e)return c("FieldMismatch","TooManyFields","Too many fields: expected "+e+" fields but parsed "+t)}(),r()&&(!v.header||v.header&&y.parsed.rows.length>0)&&!1===v.step(u())&&(b=!0))}function r(){return"function"==typeof v.step}function d(e){return g.floats.test(e)?parseFloat(e):e}function c(e,t,i,a){var o=v.header?y.parsed.rows.length?y.parsed.rows.length-1:void 0:y.parsed.length-1,s=a||o;return void 0===y.errors[s]&&(y.errors[s]=[]),y.errors[s].push({type:e,code:t,message:i,line:y.lineNum,row:o,index:y.i+m}),y.errors.length++,!1}function u(){return{results:y.parsed,errors:y.errors}}function f(){var e;return e=v.header?{fields:r()&&y.parsed.fields||[],rows:r()&&p>1?[{}]:[]}:[[]],{i:0,lineNum:r()?y.lineNum:1,field:0,fieldVal:"",line:"",ch:"",inQuotes:!1,parsed:e,errors:{length:0}}}var p=0,h="",m=0,b=!1,v={},y=f(),$={delimiter:"",header:!0,dynamicTyping:!0,preview:0},g={floats:/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,empty:/^\s*$/};e=function(e){return"object"!=typeof e&&(e={}),"string"==typeof e.delimiter&&1==e.delimiter.length||(e.delimiter=$.delimiter),'"'!=e.deimiter&&"\n"!=e.delimiter||(e.delimiter=$.delimiter),"boolean"!=typeof e.header&&(e.header=$.header),"boolean"!=typeof e.dynamicTyping&&(e.dynamicTyping=$.dynamicTyping),"number"!=typeof e.preview&&(e.preview=$.preview),"function"!=typeof e.step&&(e.step=$.step),e}(e),v={delimiter:e.delimiter,header:e.header,dynamicTyping:e.dynamicTyping,preview:e.preview,step:e.step},this.parse=function(e){if("string"!=typeof e)return u();for(function(e){++p>1&&r()&&(m+=e.length),y=f(),h=e}(e),v.delimiter||function(e){var t,i,o,s=[",","\t","|",";"];for(var l in s){var n=s[l],r=0,d=0,c=new a({delimiter:n,header:!1,dynamicTyping:!1,preview:10}).parse(e);for(var u in c.results){var f=c.results[u].length;d+=f,void 0!==o?f>1&&(r+=Math.abs(f-o),o=f):o=f}d/=c.results.length,(void 0===i||r<i)&&d>1.99&&(i=r,t=n)}return v.delimiter=t,!!t}(e)||(c("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to comma","config"),v.delimiter=","),y.i=0;y.i<h.length&&!(b||v.preview>0&&y.lineNum>v.preview);y.i++)y.ch=h[y.i],y.line+=y.ch,'"'==y.ch?t():y.inQuotes?i():y.ch==v.delimiter?s():"\r"==y.ch&&y.i<h.length-1&&"\n"==h[y.i+1]||"\n"==y.ch&&y.i<h.length-1&&"\r"==h[y.i+1]?(l(),y.i++):"\n"==y.ch||"\r"==y.ch?l():i();return b?c("Abort","ParseAbort","Parsing was aborted by the user's step function","abort"):(n(),y.inQuotes&&c("Quotes","MissingQuotes","Unescaped or mismatched quotes")),u()},this.getOptions=function(){return{delimiter:v.delimiter,header:v.header,dynamicTyping:v.dynamicTyping,preview:v.preview,step:v.step}}}e.fn.parse=function(a){function o(o){var n,r=l;if(t(a.error)&&(n=function(){a.error(c.error,o.file,o.inputElem)}),t(a.complete)&&(r=function(e,t,i,o){a.complete(e,t,i,o),l()}),t(a.before)){var d=a.before(o.file,o.inputElem);if("object"==typeof d)o.instanceConfig=e.extend(o.instanceConfig,d);else{if("skip"===d)return l();if(!1===d)return void s("AbortError",o.file,o.inputElem)}}if(o.instanceConfig.step){new i(o.file,{inputElem:o.inputElem,config:e.extend({},o.instanceConfig)}).stream(r,n)}else{var c=new FileReader;c.onerror=n,c.onload=function(t){var i=t.target.result,a=e.parse(i,o.instanceConfig);r(a,o.file,o.inputElem,t)},c.readAsText(o.file)}}function s(e,i,o){t(a.error)&&a.error({name:e},i,o)}function l(){r.splice(0,1),r.length>0&&o(r[0])}var n=a.config||{},r=[];return this.each((function(t){if(!("INPUT"==e(this).prop("tagName").toUpperCase()&&"file"==e(this).attr("type")&&window.FileReader))return!0;var i=e.extend({},n);if(!this.files||0==this.files.length)return s("NoFileError",void 0,this),!0;for(var a=0;a<this.files.length;a++)r.push({file:this.files[a],inputElem:this,instanceConfig:i});r.length>0&&o(r[0])})),this},e.parse=function(e,t){return new a(t).parse(e)}}(jQuery),$.fbuilder.typeList.push({id:"femail",name:"Email",control_category:1}),$.fbuilder.controls.femail=function(){},$.extend($.fbuilder.controls.femail.prototype,$.fbuilder.controls.ffields.prototype,{title:"Email",ftype:"femail",predefined:"",predefinedClick:!1,required:!1,size:"medium",equalTo:"",display:function(){return'<div class="fields '+this.name+'" id="field'+this.form_identifier+"-"+this.index+'"><div class="arrow ui-icon ui-icon-play "></div><div title="Delete" class="remove ui-icon ui-icon-trash "></div><div title="Duplicate" class="copy ui-icon ui-icon-copy "></div><label>'+$.fbuilder.htmlEncode(this.title)+(this.required?"*":"")+'</label><div class="dfield"><input class="field disabled '+this.size+'" type="text" value="'+$.fbuilder.htmlEncode(this.predefined)+'"/><span class="uh">'+$.fbuilder.htmlEncode(this.userhelp)+'</span></div><div class="clearer"></div></div>'},editItemEvents:function(){$("#sSize").bind("change",{obj:this},(function(e){e.data.obj.size=$(this).val(),$.fbuilder.reloadItems()})),$("#sEqualTo").bind("change",{obj:this},(function(e){e.data.obj.equalTo=$(this).val(),$.fbuilder.reloadItems()}));var e=this.fBuild.getItems();$(".equalTo").each((function(){for(var t='<option value="" '+(""==$(this).attr("dvalue")?"selected":"")+"></option>",i=0;i<e.length;i++)"ftext"!=e[i].ftype&&"femail"!=e[i].ftype&&"fpassword"!=e[i].ftype||e[i].name==$(this).attr("dname")||(t+='<option value="'+e[i].name+'" '+(e[i].name==$(this).attr("dvalue")?"selected":"")+">"+e[i].title+"</option>");$(this).html(t)})),$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)},showSpecialDataInstance:function(){return""}}),$.fbuilder.typeList.push({id:"ftext",name:"Single Line",control_category:1}),$.fbuilder.controls.ftext=function(){},$.extend($.fbuilder.controls.ftext.prototype,$.fbuilder.controls.ffields.prototype,{title:"Untitled",ftype:"ftext",predefined:"",predefinedClick:!1,required:!1,size:"medium",minlength:"",maxlength:"",equalTo:"",display:function(){return'<div class="fields '+this.name+'" id="field'+this.form_identifier+"-"+this.index+'"><div class="arrow ui-icon ui-icon-play "></div><div title="Delete" class="remove ui-icon ui-icon-trash "></div><div title="Duplicate" class="copy ui-icon ui-icon-copy "></div><label>'+$.fbuilder.htmlEncode(this.title)+(this.required?"*":"")+'</label><div class="dfield"><input class="field disabled '+this.size+'" type="text" value="'+$.fbuilder.htmlEncode(this.predefined)+'"/><span class="uh">'+$.fbuilder.htmlEncode(this.userhelp)+'</span></div><div class="clearer"></div></div>'},editItemEvents:function(){$("#sSize").bind("change",{obj:this},(function(e){e.data.obj.size=$(this).val(),$.fbuilder.reloadItems()})),$("#sMinlength").bind("change",{obj:this},(function(e){e.data.obj.minlength=$(this).val(),$.fbuilder.reloadItems()})),$("#sMaxlength").bind("change",{obj:this},(function(e){e.data.obj.maxlength=$(this).val(),$.fbuilder.reloadItems()})),$("#sEqualTo").bind("change",{obj:this},(function(e){e.data.obj.equalTo=$(this).val(),$.fbuilder.reloadItems()}));var e=this.fBuild.getItems();$(".equalTo").each((function(){for(var t='<option value="" '+(""==$(this).attr("dvalue")?"selected":"")+"></option>",i=0;i<e.length;i++)"ftext"!=e[i].ftype&&"femail"!=e[i].ftype&&"fpassword"!=e[i].ftype||e[i].name==$(this).attr("dname")||(t+='<option value="'+e[i].name+'" '+(e[i].name==$(this).attr("dvalue")?"selected":"")+">"+e[i].title+"</option>");$(this).html(t)})),$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)},showSpecialDataInstance:function(){return'<div class="column"><label>Min length/characters</label><br /><input name="sMinlength" id="sMinlength" value="'+this.minlength+'"></div><div class="column"><label>Max length/characters</label><br /><input name="sMaxlength" id="sMaxlength" value="'+this.maxlength+'"></div><div class="clearer"></div>'}}),$.fbuilder.typeList.push({id:"fapp",name:"Appointment",control_category:1}),$.fbuilder.controls.fapp=function(){this.init()},$.extend($.fbuilder.controls.fapp.prototype,$.fbuilder.controls.ffields.prototype,{title:"Appointment",ftype:"fapp",services:new Array({name:"Sample Service",price:24.99,capacity:1,duration:60,pb:0,pa:0,ohindex:0}),openhours:new Array,allOH:new Array({name:"Default",openhours:new Array({type:"all",d:"",h1:8,m1:0,h2:17,m2:0})}),dateFormat:"mm/dd/yy",showDropdown:!1,showTotalCost:!1,showTotalCostFormat:"$ {0}",showEndTime:!1,showQuantity:!1,usedSlotsCheckbox:!1,avoidOverlaping:!0,emptySelectCheckbox:!1,emptySelect:"-- Please select service --",dropdownRange:"-10:+10",working_dates:[!0,!0,!0,!0,!0,!0,!0],numberOfMonths:1,maxNumberOfApp:0,firstDay:0,minDate:"0",maxDate:"",defaultDate:"",invalidDates:"",tmpinvalidDates:[],required:!0,bSlotsCheckbox:!0,bSlots:30,militaryTime:1,autonum:0,autonumStaff:0,display:function(){return'<div class="fields '+this.name+' fapp" id="field'+this.form_identifier+"-"+this.index+'"><div class="arrow ui-icon ui-icon-play "></div><div title="Duplicate" class="copy ui-icon ui-icon-copy "></div><div title="Delete" class="remove ui-icon ui-icon-trash "></div><label>'+$.fbuilder.htmlEncode(this.title)+(this.required?"*":"")+'</label><div class="dfield"><div class="fieldCalendarService'+this.name+'"></div><div class="fieldCalendar'+this.name+'"></div><div class="slotsCalendar'+this.name+'"></div><span class="uh">'+$.fbuilder.htmlEncode(this.userhelp)+'</span></div><div class="clearer"></div></div>'},msort:function(e){for(var t=0;t<e.length;t++)for(var i=t+1;i<e.length;i++)if(e[t].type>e[i].type||e[t].type==e[i].type&&"special"==e[t].type&&e[t].d>e[i].d||e[t].type==e[i].type&&"special"!=e[t].type&&60*e[t].h1+e[t].m1>60*e[i].h1+e[i].m1){var a=e[t];e[t]=e[i],e[i]=a}return e},normalizeSelectIndex:function(e){return this.emptySelectCheckbox&&e--,e},showopenhourAll:function(){for(var e="",t=($("#field"+this.form_identifier+"-"+this.index+" .fieldCalendar"+this.name),this),i=0;i<t.allOH.length;i++)e+='<div class="openhoursdiv" i="'+i+'">',i>0&&(e+='<div><label>Open hours:  <input type="text" class="nameopenhours" i="'+i+'" value="'+t.allOH[i].name+'"></label> <input type="button" i="'+i+'" class="deleteopenhours" value="Delete"></div>'),e+=t.showOpenHours(t.allOH[i].openhours,t.dateFormat),e+="<hr /></div>";$("#openHoursSection").html(e),$(".openhours_special").datepicker("destroy").datepicker({dateFormat:t.dateFormat,onSelect:function(e,i){var a=1*i.input.parents(".openhoursdiv").attr("i");t.allOH[a].openhours[i.input.attr("i")].d=$.datepicker.formatDate("yy-mm-dd",$.datepicker.parseDate(t.dateFormat,e)),$.fbuilder.reloadItems({field:t})}}),$(".service_openhours").each((function(){for(var e="",i=0;i<t.allOH.length;i++)e+='<option  value="'+i+'">'+t.allOH[i].name+"</option>";$(this).html(e),$(this).val(t.services[1*$(this).attr("i")].ohindex),t.allOH.length>1?$(this).parent().css("display","block"):$(this).parent().css("display","none")}))},showOpenHours:function(e,t){var i="",a=$.datepicker.regional[""].dayNames;i+='<div><div class="labelT">Day(s)</div><div class="labelF">From</div><div class="labelF">To</div><div class="clearer"></div></div>';for(var o=0;o<e.length;o++){i+='<div class="choicesEdit">',i+='<select class="openhours_type" i="'+o+'" "><option value="all" '+("all"==e[o].type?"selected":"")+">All days</option>";for(var s=0;s<7;s++)i+='<option value="d'+s+'" '+(e[o].type=="d"+s?"selected":"")+">"+a[s]+"</option>";i+='<option value="special" '+("special"==e[o].type?"selected":"")+">Only ...</option></select>",i+='<input style="visibility:'+("special"==e[o].type?"visible":"hidden")+'" class="openhours_special" i="'+o+'" type="text"  value="'+("special"==e[o].type?$.fbuilder.htmlEncode($.datepicker.formatDate(t,$.datepicker.parseDate("yy-mm-dd",e[o].d))):"")+'"/>',i+='<select class="openhours_from" i="'+o+'">';for(var l=0;l<24;l++)for(var n=0;n<60;n+=5)i+='<option h="'+l+'" m="'+n+'" value="'+(l<10?"0":"")+l+":"+(n<10?"0":"")+n+'" '+(e[o].h1==l&&e[o].m1==n?"selected":"")+">"+this.formattime(60*l+n)+"</option>";i+="</select>",i+='<select class="openhours_to" i="'+o+'">';for(l=0;l<24;l++)for(n=0;n<60;n+=5)i+='<option h="'+l+'" m="'+n+'" value="'+(l<10?"0":"")+l+":"+(n<10?"0":"")+n+'" '+(e[o].h2==l&&e[o].m2==n?"selected":"")+">"+this.formattime(60*l+n)+"</option>";i+='<option h="0" m="0" value="00:00">00:00</option>',i+="</select>",i+='<a class="choice_add ui-icon ui-icon-circle-plus" i="'+o+'" title="Add another choice."></a><a class="choice_remove ui-icon ui-icon-circle-minus" i="'+o+'" title="Delete this choice."></a></div>'}return i},showSlots:function(){function e(e,t,i){for(var a=0;a<i.length;a++)if(60*e+t>=60*i[a].h1+i[a].m1&&60*e+t<=60*i[a].h2+i[a].m2)return"sopen";return""}for(var t="",i=0;i<24;i++){t+="<div><div>"+i+"</div>";for(var a=0;a<60;a+=5)t+='<div id="d'+i+"-"+a+'" class="slot '+e(i,a,this.slots)+'" ></div>';t+="</div>"}return t+this.slots.length},editItemEvents:function(){var e=this;e.showopenhourAll();var t=[{s:"#sDateFormat",e:"change",l:"dateFormat"},{s:"#sNumberOfMonths",e:"change",l:"numberOfMonths"},{s:"#sMaxNumberOfApp",e:"change",l:"maxNumberOfApp"},{s:"#sFirstDay",e:"change",l:"firstDay"},{s:"#sMilitaryTime",e:"change",l:"militaryTime"},{s:"#sMinDate",e:"change",l:"minDate"},{s:"#sMaxDate",e:"change",l:"maxDate"},{s:"#sInvalidDates",e:"keyup",l:"invalidDates"},{s:"#sDefaultDate",e:"change",l:"defaultDate"},{s:"#sDropdownRange",e:"keyup",l:"dropdownRange"},{s:"#sShowTotalCostFormat",e:"keyup",l:"showTotalCostFormat"},{s:"#sEmptySelectCheckbox",e:"click",l:"emptySelectCheckbox",f:function(e){var t=e.is(":checked");return $("#sEmptySelectDiv")[t?"show":"hide"](),t}},{s:"#sBSlotsCheckbox",e:"click",l:"bSlotsCheckbox",f:function(e){var t=e.is(":checked");return $("#sBSlotsDiv")[t?"hide":"show"](),t}},{s:"#sEmptySelect",e:"keyup",l:"emptySelect"},{s:"#sBSlots",e:"change",l:"bSlots"},{s:"#sShowEndTime",e:"click",l:"showEndTime",f:function(e){return e.is(":checked")}},{s:"#sShowQuantity",e:"click",l:"showQuantity",f:function(e){return e.is(":checked")}},{s:"#sUsedSlotsCheckbox",e:"click",l:"usedSlotsCheckbox",f:function(e){return e.is(":checked")}},{s:"#sAvoidOverlaping",e:"click",l:"avoidOverlaping",f:function(e){return e.is(":checked")}},{s:"#sShowTotalCost",e:"click",l:"showTotalCost",f:function(e){var t=e.is(":checked");return $("#divTotalCostFormat")[t?"show":"hide"](),t}},{s:"#sShowDropdown",e:"click",l:"showDropdown",f:function(e){var t=e.is(":checked");return $("#divdropdownRange")[t?"show":"hide"](),t}}];$(".working_dates input").bind("click",{obj:this},(function(e){e.data.obj.working_dates[$(this).val()]=$(this).is(":checked"),$.fbuilder.reloadItems({field:e.data.obj})})),$(".service_name").bind("keyup",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].name=$(this).val(),$.fbuilder.reloadItems({field:e.data.obj})})),$(".service_price").bind("keyup",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].price=Number($(this).val().replace(/[^0-9\.]+/g,"")),$.fbuilder.reloadItems({field:e.data.obj})})),$(".service_capacity").bind("keyup",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].capacity=$(this).val(),$.fbuilder.reloadItems({field:e.data.obj})})),$(".service_duration").bind("change",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].duration=$(this).val(),$.fbuilder.reloadItems({field:e.data.obj})})),$(".service_paddingbefore").bind("change",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].pb=parseInt($(this).val()),$.fbuilder.reloadItems({field:e.data.obj})})),$(".service_paddingafter").bind("change",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].pa=parseInt($(this).val()),$.fbuilder.reloadItems({field:e.data.obj})})),$(document).off("change",".service_openhours").on("change",".service_openhours",{obj:this},(function(e){e.data.obj.services[$(this).attr("i")].ohindex=parseInt($(this).val()),$.fbuilder.reloadItems({field:e.data.obj})})),$(".services .choice_up").bind("click",{obj:this},(function(e){var t=1*$(this).attr("i");0!=t&&e.data.obj.services.splice(t-1,0,e.data.obj.services.splice(t,1)[0]),$.fbuilder.editItem(e.data.obj.index),$.fbuilder.reloadItems({field:e.data.obj})})),$(".services .choice_down").bind("click",{obj:this},(function(e){var t=1*$(this).attr("i");t!=1*$(this).attr("n")&&e.data.obj.services.splice(t,0,e.data.obj.services.splice(t+1,1)[0]),$.fbuilder.editItem(e.data.obj.index),$.fbuilder.reloadItems({field:e.data.obj})})),$(".services .choice_add").bind("click",{obj:this},(function(e){e.data.obj.autonum++,e.data.obj.services.splice(1*$(this).attr("i")+1,0,{name:"Sample Service",price:24.99,capacity:1,duration:60,pb:0,pa:0,ohindex:0,idx:e.data.obj.autonum}),$.fbuilder.editItem(e.data.obj.index),$.fbuilder.reloadItems({field:e.data.obj})})),$(".services .choice_remove").bind("click",{obj:this},(function(e){e.data.obj.services.length>1&&e.data.obj.services.splice(1*$(this).attr("i"),1),$.fbuilder.editItem(e.data.obj.index),$.fbuilder.reloadItems({field:e.data.obj})})),$(".openhours").off("change",".openhours_type").on("change",".openhours_type",{obj:this},(function(e){var t=1*$(this).parents(".openhoursdiv").attr("i");e.data.obj.allOH[t].openhours[$(this).attr("i")].type=$(this).val(),"special"==$(this).val()?$(this).parents(".choicesEdit").find(".openhours_special").css("visibility","visible"):$(this).parents(".choicesEdit").find(".openhours_special").css("visibility","hidden"),$.fbuilder.reloadItems({field:e.data.obj})})),$(".openhours").off("change",".openhours_from").on("change",".openhours_from",{obj:this},(function(e){var t=1*$(this).parents(".openhoursdiv").attr("i");e.data.obj.allOH[t].openhours[$(this).attr("i")].h1=$(this).find(":selected").attr("h"),e.data.obj.allOH[t].openhours[$(this).attr("i")].m1=$(this).find(":selected").attr("m"),$.fbuilder.reloadItems({field:e.data.obj})})),$(".openhours").off("change",".openhours_to").on("change",".openhours_to",{obj:this},(function(e){var t=1*$(this).parents(".openhoursdiv").attr("i");e.data.obj.allOH[t].openhours[$(this).attr("i")].h2=$(this).find(":selected").attr("h"),e.data.obj.allOH[t].openhours[$(this).attr("i")].m2=$(this).find(":selected").attr("m"),$.fbuilder.reloadItems({field:e.data.obj})})),$(".openhours").off("click",".choice_add").on("click",".choice_add",{obj:this},(function(t){var i=1*$(this).parents(".openhoursdiv").attr("i");t.data.obj.allOH[i].openhours.splice(1*$(this).attr("i")+1,0,{type:"all",d:"",h1:8,m1:0,h2:17,m2:0}),t.data.obj.allOH[i].openhours=e.msort(t.data.obj.allOH[i].openhours),$.fbuilder.editItem(t.data.obj.index),$.fbuilder.reloadItems({field:t.data.obj})})),$(".openhours").off("click",".choice_remove").on("click",".choice_remove",{obj:this},(function(e){var t=1*$(this).parents(".openhoursdiv").attr("i");e.data.obj.allOH[t].openhours.length>1&&e.data.obj.allOH[t].openhours.splice(1*$(this).attr("i"),1),$.fbuilder.editItem(e.data.obj.index),$.fbuilder.reloadItems({field:e.data.obj})})),$(".openhours").off("click","input.addOpenHours").on("click","input.addOpenHours",{obj:this},(function(t){t.data.obj.allOH[t.data.obj.allOH.length]={name:"Special",openhours:new Array({type:"all",d:"",h1:8,m1:0,h2:17,m2:0})},e.showopenhourAll(),$.fbuilder.reloadItems({field:t.data.obj})})),$(".openhours").off("click","input.deleteopenhours").on("click","input.deleteopenhours",{obj:this},(function(t){for(var i=1*$(this).attr("i"),a=0;a<t.data.obj.services.length;a++)t.data.obj.services[a].ohindex>i?t.data.obj.services[a].ohindex--:t.data.obj.services[a].ohindex==i&&(t.data.obj.services[a].ohindex=0);t.data.obj.allOH.splice(i,1),e.showopenhourAll(),$.fbuilder.reloadItems({field:t.data.obj})})),$(".openhours").off("keyup","input.nameopenhours").on("keyup","input.nameopenhours",{obj:this},(function(e){e.data.obj.allOH[1*$(this).attr("i")].name=$(this).val(),$.fbuilder.reloadItems({field:e.data.obj})})),$.fbuilder.controls.ffields.prototype.editItemEvents.call(this,t)},formattime:function(e){e<0&&(e+=1440),e%=1440;var t=Math.floor(e/60),i=e%60,a="";return 0==this.militaryTime&&(t>12?(t-=12,a=" PM"):12==t?a=" PM":(0==t&&(t=12),a=" AM")),(t<10?"0":"")+t+":"+(i<10?"0":"")+i+a},after_show:function(){var e=this,t=$("#field"+e.form_identifier+"-"+e.index+" .fieldCalendar"+e.name),i=$("#field"+e.form_identifier+"-"+e.index+" .fieldCalendarService"+e.name),a="";if(e.openhours.length>0){if(!e.openhours[0].name){var o={name:"Default",openhours:e.openhours.slice(0)};e.openhours=new Array,e.openhours[0]=o}e.allOH=new Array,e.allOH=e.openhours.slice(0),e.openhours=new Array}for(var s=0;s<e.services.length;s++)e.services[s].ohindex=e.services[s].ohindex||0;if(0==e.autonum)for(s=0;s<e.services.length;s++)e.autonum++,e.services[s].idx=e.autonum;function l(t){if(!e.emptySelectCheckbox||e.emptySelectCheckbox&&$(".fieldCalendarService"+e.name+" select option:selected").index()>0){for(var i=new Array,a=$("#field"+e.form_identifier+"-"+e.index+" .slotsCalendar"+e.name),o=e.services[e.normalizeSelectIndex($(".fieldCalendarService"+e.name+" select option:selected").index())].ohindex,s=0;s<e.allOH[o].openhours.length;s++)"special"==e.allOH[o].openhours[s].type?(i[e.allOH[o].openhours[s].d]=i[e.allOH[o].openhours[s].d]||[],i[e.allOH[o].openhours[s].d][i[e.allOH[o].openhours[s].d].length]=e.allOH[o].openhours[s]):(i[e.allOH[o].openhours[s].type]=i[e.allOH[o].openhours[s].type]||[],i[e.allOH[o].openhours[s].type][i[e.allOH[o].openhours[s].type].length]=e.allOH[o].openhours[s]);var l=1*$(".fieldCalendarService"+e.name+" select option:selected").val(),n=l;e.bSlotsCheckbox||(n=1*e.bSlots);var r,d,c="",u=e.normalizeSelectIndex($(".fieldCalendarService"+e.name+" select option:selected").index()),f=1*e.services[u].pa||0,p=1*e.services[u].pb||0;i[t]?c=h(i[t],l,n,f,p):i["d"+$.datepicker.parseDate("yy-mm-dd",t).getDay()]?c=h(i["d"+$.datepicker.parseDate("yy-mm-dd",t).getDay()],l,n,f,p):i.all&&(c=h(i.all,l,n,f,p)),a.html('<div class="slots">'+$.datepicker.formatDate(e.dateFormat,$.datepicker.parseDate("yy-mm-dd",t))+"<br />"+c+"</div>")}else $("#field"+e.form_identifier+"-"+e.index+" .slotsCalendar"+e.name).html("");function h(t,i,a,o,s){var l="",n=new Array;e.bSlotsCheckbox&&(a+=o+s);for(var c=0;c<t.length;c++)for(r=60*t[c].h1+1*t[c].m1,d=60*t[c].h2+1*t[c].m2,(r+=s)>=d&&(d+=1440);r+i+o<=d&&r<1440;)-1==$.inArray(r,n)&&r>=0&&(n[n.length]=r),r+=a;n.sort((function(e,t){return e-t}));for(c=0;c<n.length;c++)l+="<div>"+e.formattime(n[c])+(e.showEndTime?"-"+e.formattime(n[c]+i):"")+"</div>";return l}}for(s=0;s<e.services.length;s++)a+='<option value="'+e.services[s].duration+'">'+e.services[s].name+"</option>";if(e.emptySelectCheckbox&&(a='<option value="">'+e.emptySelect+"</option>"+a),i.html("<select>"+a+"</select>"),e.emptySelectCheckbox&&i.find("select").prop("selectedIndex",1),$(".fieldCalendarService"+e.name+" select").bind("change",(function(){t.datepicker("getDate")&&l($.datepicker.formatDate("yy-mm-dd",t.datepicker("getDate")))})),this.tmpinvalidDates=this.invalidDates,this.tmpinvalidDates=this.tmpinvalidDates.replace(/\s+/g,""),!/^\s*$/.test(this.tmpinvalidDates)){var n=new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}$/),r=0,d=this.tmpinvalidDates.split(",");this.tmpinvalidDates=[];s=0;for(var c=d.length;s<c;s++){var u=d[s].split("-");if(2==u.length&&null!=u[0].match(n)&&null!=u[1].match(n))for(var f=new Date(u[0]),p=new Date(u[1]);f<=p;){this.tmpinvalidDates[r]=f;var h=new Date(f.valueOf());h.setDate(h.getDate()+1),f=h,r++}else for(var m=0,b=u.length;m<b;m++)null!=u[m].match(n)&&(this.tmpinvalidDates[r]=new Date(u[m]),r++)}}if(e.special_days=new Array,!e.emptySelectCheckbox||e.emptySelectCheckbox&&$(".fieldCalendarService"+e.name+" select option:selected").index()>0){var v=e.services[e.normalizeSelectIndex($(".fieldCalendarService"+e.name+" select option:selected").index())].ohindex;for(s=0;s<e.allOH[v].openhours.length;s++)"special"==e.allOH[v].openhours[s].type&&(e.special_days[e.special_days.length]=e.allOH[v].openhours[s].d)}$("#date_format").length>0&&(e.dateFormat=$("#date_format").val());var y=0;if(e.minDateTmp=e.minDate,""!==e.minDate&&-1!=e.minDate.indexOf("h"))if(-1!=e.minDate.indexOf(" ")){var g=e.minDate.split(" "),x=!1;for(s=0;s<g.length&&!x;s++)-1!=g[s].indexOf("h")&&(x=!0,y=parseInt(g[s].replace("h","")),e.minDateTmp=e.minDate.replace(g[s],""))}else y=parseInt(e.minDate.replace("h","")),e.minDateTmp=0;if(t.datepicker({numberOfMonths:parseInt(e.numberOfMonths),firstDay:parseInt(e.firstDay),minDate:e.minDateTmp,maxDate:e.maxDate,dateFormat:e.dateFormat,defaultDate:e.defaultDate,changeMonth:e.showDropdown,changeYear:e.showDropdown,yearRange:e.showDropdown?e.dropdownRange:"",onSelect:function(t,i){l($.datepicker.formatDate("yy-mm-dd",$.datepicker.parseDate(e.dateFormat,t)))},beforeShowDay:function(t){var i=$.datepicker.formatDate("yy-mm-dd",t),a=new Array(i);0==e.working_dates[t.getDay()]&&-1==$.inArray(i,e.special_days)&&a.push("nonworking");for(var o=0,s=e.tmpinvalidDates.length;o<s;o++)t.getTime()===e.tmpinvalidDates[o].getTime()&&a.push("nonworking invalidDate");return[!0,a.join(" ")]}}),""!==e.minDateTmp){e.getMinDate=t.datepicker("getDate");var D=new Date,w=1;try{$.datepicker.parseDate(e.dateFormat,e.minDateTmp),w=0}catch(t){}e.getMinDate=new Date(e.getMinDate.getTime()+w*D.getHours()*60*60*1e3+w*D.getMinutes()*60*1e3+60*y*60*1e3),t.datepicker("option","minDate",e.getMinDate),t.datepicker("setDate",e.getMinDate)}e.tmpinvalidDatestime=new Array;for(s=0;s<e.tmpinvalidDates.length;s++)e.tmpinvalidDatestime[s]=e.tmpinvalidDates[s].getTime();var k,S,I=0;for(s=0;s<e.working_dates.length;s++)I+=e.working_dates[s];if(I>0){for(var j=t.datepicker("getDate");S=void 0,S=(k=j).getTime(),$.inArray(S,e.tmpinvalidDatestime)>-1||0==e.working_dates[k.getDay()];)j.setDate(j.getDate()+1);t.datepicker("setDate",j),l($.datepicker.formatDate("yy-mm-dd",j))}},showSpecialDataInstance:function(){var e="",t=($("#field"+this.form_identifier+"-"+this.index+" .fieldCalendar"+this.name),$.datepicker.regional[""].dayNames);e+='<div class="choicesSet services"><label>Services [<a class="helpfbuilder" text="Add the services offered:\n\n.Name: The service name\n\n.Price: Price number only, without currency symbol or code\n\n.Capacity: For example the number of persons can book/attend the same service at the same time, default is 1\n\n.Duration: The service duration, example 30 mins\n\n.Padding: The padding time is a period before and/or after the appointment not used for other bookings. It can be used for prep for next appointment, travel, clean-up or a snack/bathroom break.">help?</a>]</label>';for(var i=0;i<this.services.length;i++){e+='<div class="choicesEdit" style="background:#ddd">',e+='<div><div class="labelN">Name</div><div class="labelahb">Price</div><div class="labelahb">Capacity</div><div class="clearer"></div></div>',e+='<input class="service_name" i="'+i+'" type="text" name="sService'+this.name+'" id="sService'+this.name+'" value="'+$.fbuilder.htmlEncode(this.services[i].name)+'"/><input class="service_price" i="'+i+'" type="text" name="sService'+this.name+"P"+i+'" id="sService'+this.name+"P"+i+'" value="'+$.fbuilder.htmlEncode(this.services[i].price)+'"/>',e+='<input class="service_capacity" i="'+i+'" type="text" name="sService'+this.name+"C"+i+'" id="sService'+this.name+"C"+i+'" value="'+$.fbuilder.htmlEncode(parseInt(this.services[i].capacity)>0?this.services[i].capacity:"1")+'"/>',e+='<div><div class="labelahb">Duration</div><div >Padding time before and after</div><div class="clearer"></div></div>',e+='<select class="service_duration" i="'+i+'" name="sService'+this.name+"D"+i+'" id="sService'+this.name+"D"+i+'">';for(var a=1;a<15;a++)e+='<option value="'+a+'" '+(this.services[i].duration==a?"selected":"")+">"+a+" min</option>";for(a=3;a<=288;a++)e+='<option value="'+5*a+'" '+(this.services[i].duration==5*a?"selected":"")+">"+5*a+" min</option>";e+="</select>",e+='<select class="service_paddingbefore" i="'+i+'" name="sService'+this.name+"before"+i+'" id="sService'+this.name+"before"+i+'">';for(a=0;a<=72;a++)e+='<option value="'+5*a+'" '+(this.services[i].pb==5*a?"selected":"")+">"+5*a+" min</option>";for(a=7;a<=12;a++)e+='<option value="'+60*a+'" '+(this.services[i].pb==60*a?"selected":"")+">"+a+" hours</option>";e+="</select>",e+='<select class="service_paddingafter" i="'+i+'" name="sService'+this.name+"after"+i+'" id="sService'+this.name+"after"+i+'">';for(a=0;a<=72;a++)e+='<option value="'+5*a+'" '+(this.services[i].pa==5*a?"selected":"")+">"+5*a+" min</option>";for(a=7;a<=12;a++)e+='<option value="'+60*a+'" '+(this.services[i].pa==60*a?"selected":"")+">"+a+" hours</option>";e+="</select>",e+='<div>Open hours<br /><select class="service_openhours" i="'+i+'" ></select></div>',e+='<a class="choice_down ui-icon ui-icon-arrowthick-1-s" i="'+i+'" n="'+(this.services.length-1)+'" title="Down"></a><a class="choice_up ui-icon ui-icon-arrowthick-1-n" i="'+i+'" title="Up"></a><a class="choice_add ui-icon ui-icon-circle-plus" i="'+i+'" title="Add another choice."></a><a class="choice_remove ui-icon ui-icon-circle-minus" i="'+i+'" title="Delete this choice."></a><hr /></div>'}e+='<div><input type="checkbox"  name="sBSlotsCheckbox" id="sBSlotsCheckbox" '+(this.bSlotsCheckbox?"checked":"")+"/> Generate time slots automatically based on service duration",e+='<div id="sBSlotsDiv" style="display:'+(this.bSlotsCheckbox?"none":"block")+'">Generate slots every <select class="BSlots" name="sBSlots" id="sBSlots">';for(a=1;a<=288;a++)e+='<option value="'+5*a+'" '+(this.bSlots==5*a?"selected":"")+">"+5*a+" min</option>";e+="</select></div></div>",e+='<div id="sBUsedSlotsDiv"><input type="checkbox"  name="sUsedSlotsCheckbox" id="sUsedSlotsCheckbox" '+(this.usedSlotsCheckbox?"checked":"")+"/> Show used slots</div>",e+='<div><input type="checkbox"  name="sEmptySelectCheckbox" id="sEmptySelectCheckbox" '+(this.emptySelectCheckbox?"checked":"")+"/> Make user choose service before display times","undefined"!=typeof apphourbk_cmadmin&&(e+='<div><input type="checkbox"  name="sAvoidOverlaping" id="sAvoidOverlaping" '+(this.avoidOverlaping?"checked":"")+'/> Avoid overlaping between services [<a class="helpfbuilder" text="If checked only one service will used for each time-slot. If un-checked each time-slot availability will be calculated separately for each service.">help?</a>]</div>'),e+='<div id="sEmptySelectDiv" style="display:'+(this.emptySelectCheckbox?"block":"none")+'">Text ',e+='<input type="text" name="sEmptySelect" id="sEmptySelect" value="'+this.emptySelect+'"></div></div>',e+="</div>",e+='<div class="choicesSet openhours"><label>Open hours: Default [<a class="helpfbuilder" text="Open hours for all dates, for each weekday or specific date. Examples: \n\n - For all days: All days from 08:00 to 17:00 hours. \n\n - For specific weekdays: Mondays from 08:00 to 17:00 hours. \n\n - For specific dates: 27/12/2018 from 08:00 to 10:00 hours.">help?</a>]</label>',e+='<div id="openHoursSection"></div>',"undefined"!=typeof apphourbk_cmadmin&&(e+='<input type="button" class="addOpenHours" value="Add Special Open Hours">'),e+="</div>",e+='<div class="working_dates"><label>Working dates </label><br /><input name="sWD0" id="sWD0" value="0" type="checkbox" '+(this.working_dates[0]?"checked":"")+'/>Su<input name="sWD1" id="sWD1" value="1" type="checkbox" '+(this.working_dates[1]?"checked":"")+'/>Mo<input name="sWD2" id="sWD2" value="2" type="checkbox" '+(this.working_dates[2]?"checked":"")+'/>Tu<input name="sWD3" id="sWD3" value="3" type="checkbox" '+(this.working_dates[3]?"checked":"")+'/>We<input name="sWD4" id="sWD4" value="4" type="checkbox" '+(this.working_dates[4]?"checked":"")+'/>Th<input name="sWD5" id="sWD5" value="5" type="checkbox" '+(this.working_dates[5]?"checked":"")+'/>Fr<input name="sWD6" id="sWD6" value="6" type="checkbox" '+(this.working_dates[6]?"checked":"")+"/>Sa</div>";var o="";for(i=0;i<7;i++)o+='<option value="'+i+'" '+(i==this.firstDay?"selected":"")+">"+t[i]+"</option>";e+='<div><label>First Date</label><br /><label><select name="sFirstDay" id="sFirstDay">'+o+"</select></div>";var s="";for(i=1;i<=12;i++)s+='<option value="'+i+'" '+(i==this.numberOfMonths?"selected":"")+">"+i+"</option>";e+='<div><label>Military Time</label><br /><label><select name="sMilitaryTime" id="sMilitaryTime"><option value="1" '+(1==this.militaryTime?"selected":"")+'>Yes (24 hours)</option><option value="0" '+(1!=this.militaryTime?"selected":"")+">No (12 hours AM/PM)</option></select></div>",e+='<div><label>Number of months</label><br /><label><select name="sNumberOfMonths" id="sNumberOfMonths">'+s+"</select></div>";var l="";for(i=0;i<=300;i++)l+='<option value="'+i+'" '+(i==this.maxNumberOfApp?"selected":"")+">"+(0==i?"Unlimited":i)+"</option>";return e+='<div><label>Max number of appointments</label><br /><label><select name="sMaxNumberOfApp" id="sMaxNumberOfApp">'+l+"</select></div>",e+='<div><label>Default date [<a class="helpfbuilder" text="You can put one of the following type of values into this field:\n\nEmpty: Leave empty for current date.\n\nDate: A Fixed date with the same date format indicated in the &quot;Date Format&quot; drop-down field.\n\nNumber: A number of days from today. For example 2 represents two days from today and -1 represents yesterday.\n\nString: A smart text indicating a relative date. Relative dates must contain value (number) and period pairs; valid periods are &quot;y&quot; for years, &quot;m&quot; for months, &quot;w&quot; for weeks, and &quot;d&quot; for days. For example, &quot;+1m +7d&quot; represents one month and seven days from today.">help?</a>]</label><br /><input class="medium" name="sDefaultDate" id="sDefaultDate" value="'+$.fbuilder.htmlEncode(this.defaultDate)+'" /></div>',e+='<div id="sdMindate"><label>Min date [<a class="helpfbuilder" text="You can put one of the following type of values into this field:\n\nEmpty: No min Date.\n\nDate: A Fixed date with the same date format indicated in the &quot;Date Format&quot; drop-down field.\n\nNumber: A number of days from today. For example 2 represents two days from today and -1 represents yesterday.\n\nString: A smart text indicating a relative date. Relative dates must contain value (number) and period pairs; valid periods are &quot;y&quot; for years, &quot;m&quot; for months, &quot;w&quot; for weeks, &quot;d&quot; for days, and &quot;h&quot; for hours. For example, &quot;+1m +7d&quot; represents one month and seven days from today.">help?</a>] [<a class="helpfbuilderfont"  href="https://apphourbooking.dwbooster.com/blog/2021/05/12/minimum-available-time/" target="_blank">Samples</a>]</label> <br /><input class="medium" name="sMinDate" id="sMinDate" value="'+$.fbuilder.htmlEncode(this.minDate)+'" /></div>',e+='<div id="sdMaxdate"><label>Max date [<a class="helpfbuilder" text="You can put one of the following type of values into this field:\n\nEmpty: No max Date.\n\nDate: A Fixed date with the same date format indicated in the &quot;Date Format&quot; drop-down field.\n\nNumber: A number of days from today. For example 2 represents two days from today and -1 represents yesterday.\n\nString: A smart text indicating a relative date. Relative dates must contain value (number) and period pairs; valid periods are &quot;y&quot; for years, &quot;m&quot; for months, &quot;w&quot; for weeks, and &quot;d&quot; for days. For example, &quot;+1m +7d&quot; represents one month and seven days from today.">help?</a>]</label><br /><input class="medium" name="sMaxDate" id="sMaxDate" value="'+$.fbuilder.htmlEncode(this.maxDate)+'" /></div>',e+='<div id="sdInvalidDates"><label>Invalid Dates [<a class="helpfbuilder" text="To define some dates as invalid, enter the dates with the format: mm/dd/yyyy separated by comma; for example: 12/31/2014,02/20/2014 or by hyphen for intervals; for example: 12/20/2014-12/28/2014 ">help?</a>]</label><br /><textarea class="large" name="sInvalidDates" id="sInvalidDates" />'+$.fbuilder.htmlEncode(this.invalidDates)+"</textarea></div>",e+='<div><input type="checkbox" name="sShowDropdown" id="sShowDropdown" '+(this.showDropdown?"checked":"")+'/><label>Show Dropdown Year and Month</label><div id="divdropdownRange" style="display:'+(this.showDropdown?"":"none")+'">Year Range [<a class="helpfbuilder" text="The range of years displayed in the year drop-down: either relative to today\'s year (&quot;-nn:+nn&quot;), absolute (&quot;nnnn:nnnn&quot;), or combinations of these formats (&quot;nnnn:-nn&quot;)">help?</a>]: <input type="text" name="sDropdownRange" id="sDropdownRange" value="'+$.fbuilder.htmlEncode(this.dropdownRange)+'"/></div></div>',e+='<div><input type="checkbox" name="sShowEndTime" id="sShowEndTime" '+(this.showEndTime?"checked":"")+'/><label>Show end time [<a class="helpfbuilder" text="If enabled it will display the end time for each time-slot based in the duration of the selected service.">help?</a>]</label></div>',e+='<div><input type="checkbox" name="sShowTotalCost" id="sShowTotalCost" '+(this.showTotalCost?"checked":"")+'/><label>Show Total Cost</label><div id="divTotalCostFormat" style="display:'+(this.showTotalCost?"":"none")+'">Total cost format [<a class="helpfbuilder" text="The string {0} will be replaced with the calculated cost. Keep the {0} reference. You can edit the currency symbol or add additional text.">help?</a>]: <input type="text" name="sShowTotalCostFormat" id="sShowTotalCostFormat" value="'+$.fbuilder.htmlEncode(this.showTotalCostFormat)+'"/></div></div>',e+='<div><input type="checkbox" name="sShowQuantity" id="sShowQuantity" '+(this.showQuantity?"checked":"")+'/><label>Show quantity field [<a class="helpfbuilder" text="If enabled a drop-down field will be displayed above the calendar to select the quantity to book o the selected service (useful for services with capacity greater than 1).">help?</a>]</label></div>',e+="<hr></hr>"}}),$.fbuilder.typeList.push({id:"facceptance",name:"Accept/GDPR",control_category:1}),$.fbuilder.controls.facceptance=function(){},$.extend($.fbuilder.controls.facceptance.prototype,$.fbuilder.controls.ffields.prototype,{title:"Accept terms and conditions",ftype:"facceptance",value:"I accept",url:"",message:"",required:!0,display:function(){var e='<div class="one_column"><input class="field" disabled="true" type="checkbox"/> '+$.fbuilder.htmlEncode(this.title)+(this.required?"*":"")+"</div>";return'<div class="fields '+this.name+'" id="field'+this.form_identifier+"-"+this.index+'" title="'+this.name+'"><div class="arrow ui-icon ui-icon-play "></div><div title="Delete" class="remove ui-icon ui-icon-trash "></div><div title="Duplicate" class="copy ui-icon ui-icon-copy "></div><div class="dfield">'+e+'<span class="uh">'+$.fbuilder.htmlEncode(this.userhelp)+'</span></div><div class="clearer"></div></div>'},editItemEvents:function(){evt=[{s:"#sValue",e:"change keyup",l:"value"},{s:"#sURL",e:"change keyup",l:"url"},{s:"#sMessage",e:"change keyup",l:"message"}],$.fbuilder.controls.ffields.prototype.editItemEvents.call(this,evt)},showRequired:function(e){return'<div><input type="checkbox" checked disabled><label>Acceptance fields are always required</label></div>'},showUserhelp:function(){return""},showValue:function(){return'<div><label>Value</label><input class="large" type="text" name="sValue" id="sValue" value="'+$.fbuilder.htmlEncode(this.value)+'"></div>'},showURL:function(){return'<div><label>URL to the Consent and Acknowledgement page</label><input class="large" type="text" name="sURL" id="sURL" value="'+$.fbuilder.htmlEncode(this.url)+'"></div>'},showMessage:function(){return'<div><label>- or - enter the Consent and Acknowledgement text</label><textarea class="large" name="sMessage" id="sMessage" style="height:150px;">'+this.message+"</textarea></div>"},showCsslayout:function(){return $.fbuilder.controls.ffields.prototype.showCsslayout.call(this)+'<div style="color: #666;border: 1px solid #EF7E59;display: block;padding: 5px;background: #FBF0EC;border-radius: 4px;text-align: center;margin-top:20px;">The Acceptance control helps to make the form comply with one of requirements of the General Data Protection Regulation (GDPR)</div>'},showSpecialDataInstance:function(){return this.showValue()+this.showURL()+this.showMessage()}}),$.fbuilder.typeList.push({id:"fcurrency",name:"Currency",control_category:3}),$.fbuilder.controls.fcurrency=function(){},$.extend($.fbuilder.controls.fcurrency.prototype,$.fbuilder.controls.ffields.prototype,{title:"Currency",ftype:"fcurrency",predefined:"",predefinedClick:!1,required:!1,size:"small",readonly:!1,currencySymbol:"$",currencyText:"USD",thousandSeparator:",",centSeparator:".",min:"",max:"",formatDynamically:!1,display:function(){return"- available only in commercial version - "},editItemEvents:function(){}}),$.fbuilder.typeList.push({id:"fnumber",name:"Number",control_category:3}),$.fbuilder.controls.fnumber=function(){},$.extend($.fbuilder.controls.fnumber.prototype,$.fbuilder.controls.ffields.prototype,{title:"Number",ftype:"fnumber",predefined:"",predefinedClick:!1,required:!1,size:"small",thousandSeparator:"",decimalSymbol:".",min:"",max:"",dformat:"digits",formats:new Array("digits","number"),display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fdate",name:"Date Time",control_category:3}),$.fbuilder.controls.fdate=function(){},$.extend($.fbuilder.controls.fdate.prototype,$.fbuilder.controls.ffields.prototype,{title:"Date",ftype:"fdate",predefined:"",predefinedClick:!1,size:"medium",required:!1,dformat:"mm/dd/yyyy",tformat:"24",showDropdown:!1,dropdownRange:"-10:+10",minDate:"",maxDate:"",invalidDates:"",minHour:0,maxHour:23,minMinute:0,maxMinute:59,stepHour:1,stepMinute:1,showTimepicker:!1,defaultDate:"",defaultTime:"",working_dates:[!0,!0,!0,!0,!0,!0,!0],formats:new Array("mm/dd/yyyy","dd/mm/yyyy"),display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"ftextarea",name:"Text Area",control_category:3}),$.fbuilder.controls.ftextarea=function(){},$.extend($.fbuilder.controls.ftextarea.prototype,$.fbuilder.controls.ffields.prototype,{title:"Untitled",ftype:"ftextarea",predefined:"",predefinedClick:!1,required:!1,size:"medium",minlength:"",maxlength:"",rows:4,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fcheck",name:"Checkboxes",control_category:3}),$.fbuilder.controls.fcheck=function(){},$.extend($.fbuilder.controls.fcheck.prototype,$.fbuilder.controls.ffields.prototype,{title:"Check All That Apply",ftype:"fcheck",layout:"one_column",required:!1,showDep:!1,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fradio",name:"Radio Buttons",control_category:3}),$.fbuilder.controls.fradio=function(){},$.extend($.fbuilder.controls.fradio.prototype,$.fbuilder.controls.ffields.prototype,{title:"Select a Choice",ftype:"fradio",layout:"one_column",required:!1,choiceSelected:"",showDep:!1,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fdropdown",name:"Dropdown",control_category:3}),$.fbuilder.controls.fdropdown=function(){},$.extend($.fbuilder.controls.fdropdown.prototype,$.fbuilder.controls.ffields.prototype,{title:"Select a Choice",ftype:"fdropdown",size:"medium",required:!1,choiceSelected:"",showDep:!1,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"ffile",name:"Upload File",control_category:3}),$.fbuilder.controls.ffile=function(){},$.extend($.fbuilder.controls.ffile.prototype,$.fbuilder.controls.ffields.prototype,{title:"Untitled",ftype:"ffile",required:!1,size:"medium",accept:"",upload_size:"",multiple:!1,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fpassword",name:"Password",control_category:3}),$.fbuilder.controls.fpassword=function(){},$.extend($.fbuilder.controls.fpassword.prototype,$.fbuilder.controls.ffields.prototype,{title:"Untitled",ftype:"fpassword",predefined:"",predefinedClick:!1,required:!1,size:"medium",minlength:"",maxlength:"",equalTo:"",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fPhone",name:"Phone field",control_category:1}),$.fbuilder.controls.fPhone=function(){},$.extend($.fbuilder.controls.fPhone.prototype,$.fbuilder.controls.ffields.prototype,{title:"Phone",ftype:"fPhone",required:!1,readonly:!1,dformat:"### ### ####",predefined:"888 888 8888",predefinedClick:!0,display:function(){for(var e="",t=this.dformat.split(" "),i=this.predefined.split(" "),a=0;a<i.length;a++)""==$.trim(i[a])&&i.splice(a,1);for(a=0;a<t.length;a++)""!=$.trim(t[a])&&(e+='<div class="uh_phone" ><input type="text" class="field disabled" style="width:'+15*$.trim(t[a]).length+'px" value="'+(i[a]?i[a]:"")+'" maxlength="'+$.trim(t[a]).length+'" /><div class="l">'+$.trim(t[a])+"</div></div>");return'<div class="fields '+this.name+'" id="field'+this.form_identifier+"-"+this.index+'" title="'+this.name+'"><div class="arrow ui-icon ui-icon-play "></div><div title="Delete" class="remove ui-icon ui-icon-trash "></div><div title="Duplicate" class="copy ui-icon ui-icon-copy "></div><label>'+this.title+(this.required?"*":"")+'</label><div class="dfield">'+e+'<span class="uh">'+this.userhelp+'</span></div><div class="clearer"></div></div>'},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this,[{s:"#sFormat",e:"change keyup",l:"dformat"}])},showFormatIntance:function(){return'<div><label>Number Format</label><br /><input type="text" name="sFormat" id="sFormat" value="'+$.fbuilder.htmlEncode(this.dformat)+'" class="large" /></div>'}}),$.fbuilder.typeList.push({id:"fCommentArea",name:"Instruct. Text",control_category:3}),$.fbuilder.controls.fCommentArea=function(){},$.extend($.fbuilder.controls.fCommentArea.prototype,$.fbuilder.controls.ffields.prototype,{title:"Comments here",ftype:"fCommentArea",userhelp:"A description of the section goes here.",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fhidden",name:"Hidden",control_category:3}),$.fbuilder.controls.fhidden=function(){},$.extend($.fbuilder.controls.fhidden.prototype,$.fbuilder.controls.ffields.prototype,{title:"Hidden",ftype:"fhidden",predefined:"",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fSectionBreak",name:"Section break",control_category:3}),$.fbuilder.controls.fSectionBreak=function(){},$.extend($.fbuilder.controls.fSectionBreak.prototype,$.fbuilder.controls.ffields.prototype,{title:"Section Break",ftype:"fSectionBreak",userhelp:"A description of the section goes here.",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fPageBreak",name:"Page break",control_category:3}),$.fbuilder.controls.fPageBreak=function(){},$.extend($.fbuilder.controls.fPageBreak.prototype,$.fbuilder.controls.ffields.prototype,{title:"Page Break",ftype:"fPageBreak",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fsummary",name:"Summary",control_category:3}),$.fbuilder.controls.fsummary=function(){},$.extend($.fbuilder.controls.fsummary.prototype,$.fbuilder.controls.ffields.prototype,{title:"Summary",ftype:"fsummary",fields:"",titleClassname:"summary-field-title",valueClassname:"summary-field-value",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.controls.datasource=function(){this.list={database:{title:"Database",databaseData:{host:"",user:"",pass:"",database:""},queryData:{active:"structure",query:"",value:"",text:"",table:"",where:"",orderby:"",limit:""},show:function(e){var t="<div>Database Connection</div>";return t+='<div><label>Host:<label><input class="large" name="sHost" id="sHost" value="'+this.databaseData.host+'" /></div>',t+='<div><label>Username:<label><input class="large" name="sUser" id="sUser" value="'+this.databaseData.user+'" /></div>',t+='<div><label>Password:<label><input class="large" name="sPass" id="sPass" value="'+this.databaseData.pass+'" /></div>',t+='<div><label>Database:<label><input class="large" name="sDatabase" id="sDatabase" value="'+this.databaseData.database+'" /></div>',t+='<div><input type="button" class="button" name="sTestConnection" id="sTestConnection" value="Test Connection" style="float:right;margin:5px 0;" /></div>',t+='<div style="clear:both;"></div>',t+='<div><label><input type="radio" name="sQueryType" id="sQueryType" value="structure" '+("structure"==this.queryData.active?"CHECKED":"")+' /> Query Structure</label><label><input type="radio" name="sQueryType" id="sQueryType" value="query" '+("query"==this.queryData.active?"CHECKED":"")+" /> Custom Query</label></div>",t+='<div id="databaseQueryData_structure" class="queryType" style="display:'+("structure"==this.queryData.active?"block":"none")+';" >',t+='<div><label>Column for values:<label><input class="large" name="sQueryValue" id="sQueryValue" value="'+this.queryData.value+'" /></div>',"pair"==e&&(t+='<div><label>Column for texts:<label><input class="large" name="sQueryText" id="sQueryText" value="'+this.queryData.text+'" /></div>'),t+='<div><label>Table name:<label><input class="large" name="sQueryTable" id="sQueryTable" value="'+this.queryData.table+'" /></div>',t+='<div><label>Condition:<label><input class="large" name="sQueryWhere" id="sQueryWhere" value="'+this.queryData.where+'" /></div>',t+='<div><label>Order by:<label><input class="large" name="sQueryOrderBy" id="sQueryOrderBy" value="'+this.queryData.orderby+'" /></div>',t+='<div><label>Limit:<label><input class="large" name="sQueryLimit" id="sQueryLimit" value="'+this.queryData.limit+'" /></div>',t+="</div>",t+='<div id="databaseQueryData_query" class="queryType" style="display:'+("query"==this.queryData.active?"block":"none")+';" >',t+='<div><label>Type the query:<label><input class="large" name="sCustomQuery" id="sCustomQuery" value="'+this.queryData.query+'" /></div>',t+="</div>",t+='<div><input type="button" class="button" name="sTestQuery" id="sTestQuery" value="Test Query" style="float:right;margin:5px 0;" /></div>',t+='<div style="clear:both;"></div>'},events:function(){$("#sHost").bind("keyup change",{obj:this},(function(e){e.data.obj.databaseData.host=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sUser").bind("keyup change",{obj:this},(function(e){e.data.obj.databaseData.user=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sPass").bind("keyup change",{obj:this},(function(e){e.data.obj.databaseData.pass=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sDatabase").bind("keyup change",{obj:this},(function(e){e.data.obj.databaseData.database=$.trim($(this).val()),$.fbuilder.reloadItems()})),$('[name="sQueryType"]').bind("click",{obj:this},(function(e){$(".queryType").hide(),$("#databaseQueryData_"+e.target.value).show(),e.data.obj.queryData.active=$.trim($(this).val())})),$("#sQueryValue").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.value=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sQueryText").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.text=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sQueryTable").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.table=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sQueryWhere").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.where=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sQueryOrderBy").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.orderby=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sQueryLimit").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.limit=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sCustomQuery").bind("keyup change",{obj:this},(function(e){e.data.obj.queryData.query=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sTestConnection").bind("click",{obj:this},(function(e){var t=$(this).parents("form").attr("action");$.ajax({url:t,cache:!1,data:$.extend({cffaction:"test_db_connection"},e.data.obj.databaseData),success:function(e){alert(e)}})})),$("#sTestQuery").bind("click",{obj:this},(function(e){var t=$(this).parents("form").attr("action");$.ajax({url:t,cache:!1,data:$.extend({cffaction:"test_db_query"},e.data.obj.databaseData,e.data.obj.queryData),success:function(e){alert(e)}})}))}},csv:{title:"CSV",csvData:{text:0,value:0,file:"",fields:[],headline:!1,delimiter:"tabulator",character:",",rows:[]},show:function(){var e="<div>CSV Import</div>",t="",i="";for(var a in this.csvData.fields)t+='<option value="'+a+'" '+(a==this.csvData.text?"SELECTED":"")+" >"+this.csvData.fields[a]+"</option>",i+='<option value="'+a+'" '+(a==this.csvData.value?"SELECTED":"")+" >"+this.csvData.fields[a]+"</option>";return e+='<div><label>Select CSV file:<label><input type="file" class="large" name="sCSVLocation" id="sCSVLocation" value="'+this.csvData.file+'" /></div>',e+='<div><label>Use headline: <input type="checkbox" name="sCSVUseHeadline" id="sCSVUseHeadline" '+(this.csvData.headline?"CHECKED":"")+" /><label></div>",e+='<div><label>Delimiter:</label>&nbsp;&nbsp;<label><input type="radio" name="sCSVDelimiter" id="sCSVDelimiter" value="tabulator" '+("tabulator"==this.csvData.delimiter?"CHECKED":"")+' /> Tabulator<label>&nbsp;&nbsp;<label><input type="radio" name="sCSVDelimiter" id="sCSVDelimiter" value="character" '+("character"==this.csvData.delimiter?"CHECKED":"")+' /> Character <input type="text" class="small" name="sCSVCharacter" id="sCSVCharacter" value="'+this.csvData.character+'" /><label></div>',e+='<div><input type="button" class="button" name="sCSVImport" id="sCSVImport" value="Import CSV" style="float:right;margin:5px 0;" /></div>',e+='<div><label>Select column for texts:<label><select class="large" name="sCSVTexts" id="sCSVTexts">'+t+"</select></div>",e+='<div><label>Select column for values:<label><select class="large" name="sCSVValues" id="sCSVValues">'+i+"</select></div>",e+='<div style="clear:both;"></div>'},events:function(){$("#sCSVUseHeadline").bind("click",{obj:this},(function(e){e.data.obj.csvData.headline=$(this).is(":checked"),$.fbuilder.reloadItems()})),$("#sCSVTexts").bind("change",{obj:this},(function(e){e.data.obj.csvData.text=$(this).val(),$.fbuilder.reloadItems()})),$("#sCSVValues").bind("change",{obj:this},(function(e){e.data.obj.csvData.value=$(this).val(),$.fbuilder.reloadItems()})),$("#sCSVImport").bind("click",{obj:this},(function(e){e.data.obj.csvData.fields=[],e.data.obj.csvData.rows=[],e.data.obj.csvData.text=0,e.data.obj.csvData.value=0,e.data.obj.csvData.file="";var t={config:{header:e.data.obj.csvData.headline,dynamicTyping:!1,delimiter:"tabulator"!=e.data.obj.csvData.delimiter?e.data.obj.csvData.character:"",preview:0},complete:function(t,i,a,o){function s(t){for(var i=0;i<t;i++)e.data.obj.csvData.fields.push("Field_"+i)}0==t.errors.length?(void 0!==t.results.fields?(e.data.obj.csvData.fields=t.results.fields,e.data.obj.csvData.text=e.data.obj.csvData.value=t.results.fields[0]):void 0!==t.results.rows?t.results.rows.length&&s(t.results.rows[0].length):void 0!==t.results&&s(t.results[0].length),e.data.obj.csvData.text=e.data.obj.csvData.value=0,e.data.obj.csvData.rows=void 0!==t.results.rows?t.results.rows:t.results,e.data.obj.csvData.file=$("#sCSVLocation").val(),$.fbuilder.reloadItems(),$("#datasourceSettings").html(e.data.obj.show()),e.data.obj.events()):alert("Error, checks the CSV file structure")}};$("#sCSVLocation").parse(t)}))}},posttype:{title:"Post Type",posttypeData:{posttype:"",value:"ID",text:"post_title",last:"",id:""},loadPostTypes:function(){var e=this,t=$("#sPostType"),i=t.parents("form").attr("action");$.ajax({dataType:"json",url:i,cache:!1,data:{cffaction:"get_post_types"},success:function(i){var a="",o=""!=e.posttypeData.posttype?e.posttypeData.posttype:Object.keys(i)[0];for(var s in i)a+='<option value="'+s+'" '+(s==o?"SELECTED":"")+" >"+i[s]+"</option>";t.html(a).change()}})},show:function(e){var t="<div>Select Post Type</div>",i=["ID","post_title","post_excerpt","post_content"],a="",o="";for(var s in i)a+='<option value="'+i[s]+'" '+(this.posttypeData.value==i[s]?"SELECTED":"")+" >"+i[s]+"</option>",o+='<option value="'+i[s]+'" '+(this.posttypeData.text==i[s]?"SELECTED":"")+" >"+i[s]+"</option>";return t+='<div><label>Post Type:<label><select class="large" name="sPostType" id="sPostType"></select></div>',t+='<div><label>Attribute for values:<label><select class="large" name="sPostTypeValue" id="sPostTypeValue">'+a+"</select></div>","pair"==e?(this.posttypeData.id="",t+='<div><label>Attribute for texts:<label><select class="large" name="sPostTypeText" id="sPostTypeText">'+o+"</select></div>",t+='<div><label>Display the last:<label><input type="text" class="large" name="sPostTypeLast" id="sPostTypeLast" value="'+this.posttypeData.last+'" /></div>'):t+='<div><label>Type a post ID:<label><input class="large" name="sPostId" id="sPostId" type="text" value="'+this.posttypeData.id+'" /></div>',t+='<div style="clear:both;"></div>'},events:function(){$("#sPostType").bind("change",{obj:this},(function(e){e.data.obj.posttypeData.posttype=$(this).val(),$.fbuilder.reloadItems()})),$("#sPostTypeText").bind("change",{obj:this},(function(e){e.data.obj.posttypeData.text=$(this).val(),$.fbuilder.reloadItems()})),$("#sPostTypeValue").bind("change",{obj:this},(function(e){e.data.obj.posttypeData.value=$(this).val(),$.fbuilder.reloadItems()})),$("#sPostTypeLast").bind("keyup change",{obj:this},(function(e){e.data.obj.posttypeData.last=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sPostId").bind("keyup change",{obj:this},(function(e){e.data.obj.posttypeData.id=$.trim($(this).val()),$.fbuilder.reloadItems()})),this.loadPostTypes()}},taxonomy:{title:"Taxonomy",taxonomyData:{taxonomy:"",value:"term_id",text:"name",id:"",slug:""},loadTaxonomies:function(){var e=this,t=$("#sTaxonomy"),i=t.parents("form").attr("action");$.ajax({dataType:"json",url:i,cache:!1,data:{cffaction:"get_available_taxonomies"},success:function(i){var a="",o=""!=e.taxonomyData.taxonomy?e.taxonomyData.taxonomy:Object.keys(i)[0];for(var s in i)a+='<option value="'+s+'" '+(s==o?"SELECTED":"")+" >"+i[s].labels.name+"</option>";t.html(a).change()}})},show:function(e){var t="<div>Select Taxonomy</div>",i=["term_id","name","slug"],a="",o="";for(var s in t+='<div><label>Taxonomy:<label><select class="large" name="sTaxonomy" id="sTaxonomy"></select></div>',i)a+='<option value="'+i[s]+'" '+(this.taxonomyData.value==i[s]?"SELECTED":"")+" >"+i[s]+"</option>",o+='<option value="'+i[s]+'" '+(this.taxonomyData.text==i[s]?"SELECTED":"")+" >"+i[s]+"</option>";return t+='<div><label>Attribute for values:<label><select class="large" name="sTaxonomyValue" id="sTaxonomyValue">'+a+"</select></div>","pair"==e?(this.taxonomyData.id="",this.taxonomyData.slug="",t+='<div><label>Attribute for texts:<label><select class="large" name="sTaxonomyText" id="sTaxonomyText">'+o+"</select></div>"):(t+='<div><label>Type a term ID:<label><input class="large" name="sTermId" id="sTermId" type="text" value="'+this.taxonomyData.id+'" /></div>',t+='<div><label>or type a term slug:<label><input class="large" name="sTermSlug" id="sTermSlug" type="text" value="'+this.taxonomyData.slug+'" /></div>'),t+='<div style="clear:both;"></div>'},events:function(){$("#sTaxonomy").bind("change",{obj:this},(function(e){e.data.obj.taxonomyData.taxonomy=$(this).val(),$.fbuilder.reloadItems()})),$("#sTaxonomyText").bind("change",{obj:this},(function(e){e.data.obj.taxonomyData.text=$(this).val(),$.fbuilder.reloadItems()})),$("#sTaxonomyValue").bind("change",{obj:this},(function(e){e.data.obj.taxonomyData.value=$(this).val(),$.fbuilder.reloadItems()})),$("#sTermId").bind("keyup change",{obj:this},(function(e){e.data.obj.taxonomyData.id=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sTermSlug").bind("keyup change",{obj:this},(function(e){e.data.obj.taxonomyData.slug=$.trim($(this).val()),$.fbuilder.reloadItems()})),this.loadTaxonomies()}},user:{title:"User Data",userData:{logged:!1,text:"user_nicename",value:"ID",id:"",login:""},show:function(e){var t="<div>Display for Users</div>",i=["ID","user_login","user_nicename","display_name","user_email"],a="",o="";for(var s in i)a+='<option value="'+i[s]+'" '+(this.userData.value==i[s]?"SELECTED":"")+" >"+i[s]+"</option>",o+='<option value="'+i[s]+'" '+(this.userData.text==i[s]?"SELECTED":"")+" >"+i[s]+"</option>";return t+='<div><label>Attribute for values:<label><select class="large" name="sUserValue" id="sUserValue">'+a+"</select></div>","pair"==e?(this.userData.logged=!1,this.userData.id="",this.userData.login="",t+='<div><label>Attribute for texts:<label><select class="large" name="sUserText" id="sUserText">'+o+"</select></div>"):(this.userData.text="",t+='<div><label>Display data of logged user:<label><input name="sUserLogged" id="sUserLogged" type="checkbox" '+(this.userData.logged?"CHECKED":"")+" /></div>",t+='<div><label> or display data of user ID:<label><input class="large" name="sUserId" id="sUserId" type="text" value="'+this.userData.id+'" '+(this.userData.logged?"DISABLED":"")+" /></div>",t+='<div><label> or display data of user with user login:<label><input class="large" name="sUserLogin" id="sUserLogin" type="text" value="'+this.userData.login+'" '+(this.userData.logged?"DISABLED":"")+" /></div>"),t+='<div style="clear:both;"></div>'},events:function(){$("#sUserValue").bind("change",{obj:this},(function(e){e.data.obj.userData.value=$(this).val(),$.fbuilder.reloadItems()})),$("#sUserText").bind("change",{obj:this},(function(e){e.data.obj.userData.text=$(this).val(),$.fbuilder.reloadItems()})),$("#sUserLogged").bind("click",{obj:this},(function(e){var t=$(this).is(":checked");e.data.obj.userData.logged=t,$.fbuilder.reloadItems(),$("#sUserId").attr("disabled",t),$("#sUserLogin").attr("disabled",t)})),$("#sUserId").bind("keyup change",{obj:this},(function(e){e.data.obj.userData.id=$.trim($(this).val()),$.fbuilder.reloadItems()})),$("#sUserLogin").bind("keyup change",{obj:this},(function(e){e.data.obj.userData.login=$.trim($(this).val()),$.fbuilder.reloadItems()}))}}}},$.fbuilder.controls.datasource.prototype={isDataSource:!0,active:"",editItemEventsDS:function(){for(var e in this.list)this.list[e].events();$("#sDataSource").bind("change",{obj:this},(function(e){e.data.obj.active=$(this).val(),$.fbuilder.editItem(e.data.obj.index),$.fbuilder.reloadItems()}))},showDataSource:function(e,t){""==this.active&&(this.active=e[0]);var i='<div style="border:1px dashed #888;padding:5px;position:relative;"><label>Define Datasource</label><div><select class="large" name="sDataSource" id="sDataSource">';for(var a in e)i+='<option value="'+e[a]+'" '+(e[a]==this.active?"SELECTED":"")+" >"+this.list[e[a]].title+"</option>";return i+='</select></div><div id="datasourceSettings">'+this.list[this.active].show(t)+"</div></div>"}},$.fbuilder.typeList.push({id:"ftextds",name:"Line Text DS",control_category:20}),$.fbuilder.controls.ftextds=function(){this.init()},$.extend($.fbuilder.controls.ftextds.prototype,$.fbuilder.controls.ftext.prototype,{ftype:"ftextds",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ftext.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"femailds",name:"Email DS",control_category:20}),$.fbuilder.controls.femailds=function(){this.init()},$.extend($.fbuilder.controls.femailds.prototype,$.fbuilder.controls.femail.prototype,{ftype:"femailds",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.femail.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"ftextareads",name:"Text Area DS",control_category:20}),$.fbuilder.controls.ftextareads=function(){this.init()},$.extend($.fbuilder.controls.ftextareads.prototype,$.fbuilder.controls.ftextarea.prototype,{ftype:"ftextareads",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ftextarea.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fcheckds",name:"Checkboxes DS",control_category:20}),$.fbuilder.controls.fcheckds=function(){this.init()},$.extend($.fbuilder.controls.fcheckds.prototype,$.fbuilder.controls.fcheck.prototype,{ftype:"fcheckds",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fcheck.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fradiods",name:"Radio Btns DS",control_category:20}),$.fbuilder.controls.fradiods=function(){this.init()},$.extend($.fbuilder.controls.fradiods.prototype,$.fbuilder.controls.fradio.prototype,{ftype:"fradiods",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fradio.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fPhoneds",name:"Phone DS",control_category:20}),$.fbuilder.controls.fPhoneds=function(){this.init()},$.extend($.fbuilder.controls.fPhoneds.prototype,$.fbuilder.controls.fPhone.prototype,{ftype:"fPhoneds",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fPhone.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fdropdownds",name:"Dropdown DS",control_category:20}),$.fbuilder.controls.fdropdownds=function(){this.init()},$.extend($.fbuilder.controls.fdropdownds.prototype,$.fbuilder.controls.fdropdown.prototype,{ftype:"fdropdownds",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fdropdown.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fhiddends",name:"Hidden DS",control_category:20}),$.fbuilder.controls.fhiddends=function(){this.init()},$.extend($.fbuilder.controls.fhiddends.prototype,$.fbuilder.controls.fhidden.prototype,{ftype:"fhiddends",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fhidden.prototype.editItemEvents.call(this),this.editItemEventsDS()}}),$.fbuilder.controls.fcontainer=function(){},$.extend($.fbuilder.controls.fcontainer.prototype,$.fbuilder.controls.ffields.prototype,{fields:[],columns:1,editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this),$("#sColumns").bind("change",{obj:this},(function(e){e.data.obj.columns=$(this).val(),$.fbuilder.reloadItems()}))},showShortLabel:function(){return""},showUserhelp:function(){return""},showSpecialDataInstance:function(){for(var e=[1,2,3,4],t="",i=0,a=e.length;i<a;i++)t+='<option value="'+e[i]+'" '+(this.columns==e[i]?"SELECTED":"")+">"+e[i]+" column"+(i?"s":"")+"</option>";return'<div><label>Columns</label><br /><select name="sColumns" id="sColumns">'+t+'</select><div class="clearer"><span class="uh">Shown in columns the fields into the container.</span></div></div>'},remove:function(){for(var e=this.fields.length-1;e>=0;e--)this.fBuild.removeItem($("."+this.fields[e]).attr("id").replace("field-",""))},duplicateItem:function(e,t){for(var i=0,a=this.fields.length;i<a;i++)if(this.fields[i]==e)return void this.fields.splice(i+1,0,t)},addItem:function(e){this.fields.push(e)},after_show:function(){for(var e=this,t=$("#field"+e.form_identifier+"-"+e.index+" .fcontainer"),i=[],a=0,o=e.fields.length;a<o;a++){var s=$("."+e.fields[a]);s.length&&(s.detach().appendTo(t),i.push(e.fields[a]))}e.fields=i,t.sortable({connectWith:".ui-sortable",items:".fields",update:function(t,i){var a=i.item.parents(".fields");a.length&&$(this).parents(".fields").attr("id")==a.attr("id")?(e.fields=[],$(t.target).children(".fields").each((function(){e.fields.push(/fieldname\d+/.exec($(this).attr("class"))[0])})),$.fbuilder.reloadItems()):e.fields.splice($.inArray(e.fBuild.getItems()[i.item.attr("id").replace("field-","")].name,e.fields),1)}})}}),$.fbuilder.typeList.push({id:"ffieldset",name:"Fieldset",control_category:10}),$.fbuilder.controls.ffieldset=function(){},$.extend($.fbuilder.controls.ffieldset.prototype,$.fbuilder.controls.fcontainer.prototype,{title:"Untitled",ftype:"ffieldset",fields:[],columns:1,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fcontainer.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fdiv",name:"Div",control_category:10}),$.fbuilder.controls.fdiv=function(){},$.extend($.fbuilder.controls.fdiv.prototype,$.fbuilder.controls.fcontainer.prototype,{title:"div",ftype:"fdiv",fields:[],columns:1,display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.fcontainer.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fMedia",name:"Media",control_category:3}),$.fbuilder.controls.fMedia=function(){},$.extend($.fbuilder.controls.fMedia.prototype,$.fbuilder.controls.ffields.prototype,{ftype:"fMedia",sMediaType:"image",display:function(){return'<div class="fields fmark '+this.name+'" id="field'+this.form_identifier+"-"+this.index+'" style><div class="arrow ui-icon ui-icon-play "></div><div title="Delete" class="remove ui-icon ui-icon-trash "></div><div title="Duplicate" class="copy ui-icon ui-icon-copy "></div><label>'+this["_display_"+this.sMediaType]()+'</label><span class="uh">'+this.data[this.sMediaType].sFigcaption+'</span><div class="clearer"></div></div>'},editItemEvents:function(){$.fbuilder.controls.fPhone.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fButton",name:"Button",control_category:3}),$.fbuilder.controls.fButton=function(){},$.extend($.fbuilder.controls.fButton.prototype,$.fbuilder.controls.ffields.prototype,{ftype:"fButton",sType:"button",sValue:"button",sOnclick:"",userhelp:"A description of the section goes here.",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fnumberds",name:"Number DS",control_category:20}),$.fbuilder.controls.fnumberds=function(){this.init()},$.extend($.fbuilder.controls.fnumberds.prototype,$.fbuilder.controls.fnumber.prototype,{ftype:"fnumberds",init:function(){$.extend(!0,this,new $.fbuilder.controls.datasource)},display:function(){return $.fbuilder.controls.fnumber.prototype.display.call(this)},editItemEvents:function(){$.fbuilder.controls.fnumber.prototype.editItemEvents.call(this),this.editItemEventsDS()},showAllSettings:function(){return $.fbuilder.controls.fnumber.prototype.showAllSettings.call(this)+this.showDataSource(["database","posttype","taxonomy","user"],"single")},showPredefined:function(){return""}}),$.fbuilder.typeList.push({id:"fhtml",name:"HTML content",control_category:3}),$.fbuilder.controls.fhtml=function(){this.init()},$.extend($.fbuilder.controls.fhtml.prototype,$.fbuilder.controls.ffields.prototype,{ftype:"fhtml",fcontent:"",display:function(){return"- available only in commercial version of plugin -"},editItemEvents:function(){$.fbuilder.controls.ffields.prototype.editItemEvents.call(this)}}),$.fbuilder.typeList.push({id:"fcurrencyds",name:"Currency DS",control_category:20}),$.fbuilder.controls.fcurrencyds=function(){this.init()},$.extend($.fbuilder.controls.fcurrencyds.prototype,$.fbuilder.controls.fcurrency.prototype,{ftype:"fcurrencyds",init:function(){$.extend(!0,this,new $.fbuilder.controls.datasource)},display:function(){return $.fbuilder.controls.fcurrency.prototype.display.call(this)},editItemEvents:function(){$.fbuilder.controls.fcurrency.prototype.editItemEvents.call(this),this.editItemEventsDS()},showAllSettings:function(){return $.fbuilder.controls.fcurrency.prototype.showAllSettings.call(this)+this.showDataSource(["database","posttype","taxonomy","user"],"single")},showPredefined:function(){return""}}),$('[name="paypal_recurrent"]').change((function(){"field"==$(this).val()?$('[name="paypal_recurrent_field"]').show():$('[name="paypal_recurrent_field"]').hide()}))})(fbuilderjQuery)}));