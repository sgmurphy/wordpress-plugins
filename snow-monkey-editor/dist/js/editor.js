(()=>{var e={558:e=>{"use strict";var t=function(e){return parseInt(e,16)};e.exports=function(e,o){var n,s,r=function(e){return"#"===e.charAt(0)?e.slice(1):e}(e),a=function(e){var o=e.g,n=e.b,s=e.a;return{r:t(e.r),g:t(o),b:t(n),a:+(t(s)/255).toFixed(2)}}({r:(s=3===(n=r).length||4===n.length)?"".concat(n.slice(0,1)).concat(n.slice(0,1)):n.slice(0,2),g:s?"".concat(n.slice(1,2)).concat(n.slice(1,2)):n.slice(2,4),b:s?"".concat(n.slice(2,3)).concat(n.slice(2,3)):n.slice(4,6),a:(s?"".concat(n.slice(3,4)).concat(n.slice(3,4)):n.slice(6,8))||"ff"});return function(e,t){var o,n=e.r,s=e.g,r=e.b,a=e.a,i=(o=t,!isNaN(parseFloat(o))&&isFinite(o)?t:a);return"rgba(".concat(n,", ").concat(s,", ").concat(r,", ").concat(i,")")}(a,o)}},919:e=>{e.exports=function(e){if("string"!=typeof e)throw new Error("color has to be type of `string`");if("#"===e.substr(0,1))return{hex:e,alpha:1};var t=e.replace(/\s+/g,""),o=/(.*?)rgb(a)??\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([01]|1.0*|0??\.([0-9]{0,})))??\)/.exec(t);if(!o)throw new Error("given color ("+e+") isn't a valid rgb or rgba color");var n=parseInt(o[3],10),s=parseInt(o[4],10),r=parseInt(o[5],10),a=o[6]?/([0-9\.]+)/.exec(o[6])[0]:"1",i=(r|s<<8|n<<16|1<<24).toString(16).slice(1);return"."===a.substr(0,1)&&(a=parseFloat("0"+a)),a=parseFloat(Math.round(100*a))/100,{hex:"#"+i.toString(16),alpha:a}}},942:(e,t)=>{var o;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,r(o)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o)}()}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};o.r(e),o.d(e,{settings:()=>_});var t={};o.r(t),o.d(t,{settings:()=>B});var n={};o.r(n),o.d(n,{settings:()=>P});var s={};o.r(s),o.d(s,{settings:()=>V});var r={};o.r(r),o.d(r,{settings:()=>W});var a={};o.r(a),o.d(a,{settings:()=>te});var i={};o.r(i),o.d(i,{settings:()=>ue});var l={};o.r(l),o.d(l,{settings:()=>be});var c={};o.r(c),o.d(c,{settings:()=>xe});const m=window.lodash,d=window.wp.blockEditor,u=window.wp.components,g=window.wp.richText,p=window.wp.i18n,h=window.ReactJSXRuntime,b=(0,h.jsx)("svg",{role:"img",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,h.jsx)("path",{d:"M13.982,16.711c-0.744,1.441 -2.248,2.428 -3.982,2.428c-1.735,0 -3.238,-0.986 -3.983,-2.428c0.909,-1.213 2.355,-2.002 3.983,-2.002c1.629,0 3.074,0.789 3.982,2.002Zm-0.748,-7.657c-0.314,2.56 1.248,2.919 1.248,5.603c0,0.467 -0.072,0.918 -0.205,1.344c-1.037,-1.203 -2.57,-1.967 -4.277,-1.967c-1.708,0 -3.24,0.764 -4.277,1.967c-0.133,-0.426 -0.205,-0.877 -0.205,-1.344c0,-2.684 1.563,-3.043 1.247,-5.603c-0.362,-2.928 -4.315,-2.465 -4.315,-5.334c0,-1.579 1.279,-2.858 2.858,-2.858c1.709,0 2.765,1.558 4.692,1.558c1.926,0 2.982,-1.558 4.691,-1.558c1.578,0 2.857,1.279 2.857,2.858c0.001,2.869 -3.952,2.406 -4.314,5.334Zm-4.677,-4.947l-0.708,0c0,0.498 -0.403,0.9 -0.901,0.9c-0.498,0 -0.901,-0.402 -0.901,-0.9l-0.708,0c0,0.889 0.72,1.609 1.609,1.609c0.889,0 1.609,-0.72 1.609,-1.609Zm0.979,7.141c0,-0.312 -0.253,-0.568 -0.566,-0.568c-0.313,0 -0.567,0.256 -0.567,0.568c0,0.312 0.254,0.566 0.567,0.566c0.313,0 0.566,-0.253 0.566,-0.566Zm2.062,0c0,-0.312 -0.254,-0.568 -0.568,-0.568c-0.312,0 -0.566,0.256 -0.566,0.568c0,0.312 0.254,0.566 0.566,0.566c0.314,0 0.568,-0.253 0.568,-0.566Zm3.062,-7.141l-0.707,0c0,0.498 -0.404,0.9 -0.9,0.9c-0.498,0 -0.902,-0.402 -0.902,-0.9l-0.707,0c0,0.889 0.721,1.609 1.609,1.609c0.886,0.001 1.607,-0.72 1.607,-1.609Z"})}),v={position:"bottom left",variant:"alternate"};(0,g.registerFormatType)("snow-monkey-editor/dropdown",{title:"buttons",tagName:"sme-dropdown",className:null,edit:()=>(0,h.jsx)(d.BlockFormatControls,{children:(0,h.jsx)("div",{className:"block-editor-format-toolbar",children:(0,h.jsxs)(u.ToolbarGroup,{children:[(0,h.jsx)(u.Slot,{name:"SnowMonkey.ToolbarControls",children:e=>0!==e.length&&(0,h.jsx)(u.ToolbarItem,{children:t=>(0,h.jsx)(u.DropdownMenu,{icon:b,label:(0,p.__)("Snow Monkey Editor Controls","snow-monkey-editor"),toggleProps:t,controls:(0,m.orderBy)(e.map((([{props:e}])=>e)),"title"),popoverProps:v})})}),["sme-font-size","sme-letter-spacing","sme-line-height","sme-text-color","sme-bg-color","sme-highlighter","sme-badge"].map((e=>(0,h.jsx)(u.Slot,{name:`SnowMonkey.ToolbarControls.${e}`},e)))]})})})});const y=e=>{if(!e)return;const{name:t,settings:o}=e;(0,g.registerFormatType)(t,o)},k=window.wp.data,C=window.wp.element,x=window.wp.keycodes;function w({name:e,shortcutType:t,shortcutCharacter:o,...n}){let s,r="SnowMonkey.ToolbarControls";return e&&(r+=`.${e}`),t&&o&&(s=x.displayShortcut[t](o)),(0,h.jsx)(u.Fill,{name:r,children:(0,h.jsx)(u.ToolbarButton,{...n,shortcut:s})})}const f=(0,p.__)("Remove formatting","snow-monkey-editor"),_={name:"snow-monkey-editor/remove-fomatting",title:f,tagName:"span",className:"sme-remove-fomatting",edit:({value:e,onChange:t})=>{const o=(0,k.useSelect)((e=>e("core/rich-text").getFormatTypes()),[]),n=(0,C.useCallback)((()=>{if(0<o.length){let n=e;o.forEach((e=>{n=(0,g.removeFormat)(n,e.name)})),t({...n})}}),[e,o]);return(0,h.jsx)(w,{icon:"editor-removeformatting",title:f,onClick:n})}};var j=o(942),S=o.n(j);const R=({name:e,value:t,onChange:o,onReset:n})=>{const s=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["fontSizes"],[])})),r=(0,C.useMemo)((()=>function(e,t,o){const n=(0,g.getActiveFormat)(t,e);if(!n)return;const s=n.attributes.style;if(s)return s.replace(new RegExp("^font-size:\\s*"),"");const r=n.attributes.class;if(r){let e=r.replace(/.*has-([^\s]*)-font-size.*/,"$1"),t=(0,m.find)(o,{slug:e});if(!t&&(e=e.replace(/(\d)-([^\d])/,"$1$2",e),t=(0,m.find)(o,{slug:e}),!t))return;return t.size}}(e,t,s)),[e,t]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.FontSizePicker,{value:r,onChange:o,fontSizes:s,__nextHasNoMarginBottom:!0}),(0,h.jsx)(u.Button,{disabled:void 0===t,variant:"secondary",isSmall:!0,onClick:n,children:(0,p.__)("Reset")})]})},F=(0,u.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,onReset:s,contentRef:r,settings:a})=>{const i=(0,g.useAnchor)({editableContentElement:r.current,settings:a}),l=(0,d.useCachedTruthy)(i.getBoundingClientRect());return i.getBoundingClientRect=()=>l,(0,h.jsx)(u.Popover,{anchor:i,onClose:n,className:"sme-popover sme-popover--inline-font-size components-inline-color-popover",children:(0,h.jsx)("fieldset",{children:(0,h.jsx)(R,{name:e,value:t,onChange:o,onReset:s})})})})),A="snow-monkey-editor/font-size",N=(0,p.__)("Font size","snow-monkey-editor"),B={name:A,title:N,tagName:"span",className:"sme-font-size",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a]=(0,d.useSettings)("typography.fontSizes"),[i,l]=(0,C.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-font-size":void 0,title:N,className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{l(!i)},icon:(0,h.jsx)(u.Icon,{icon:"editor-textcolor"})},n?"sme-font-size":"sme-font-size-not-active"),i&&(0,h.jsx)(F,{name:A,activeAttributes:s,value:t,onClose:()=>l(!1),onReset:()=>{l(!1),o((0,g.removeFormat)(t,A))},onChange:e=>{if(e){let n;if((0,m.isString)(e)||a[0]&&(0,m.isString)(a[0].size))n=e;else{if(!(0,m.isNumber)(e))return;n=`${e}px`}const s=(0,m.find)(a,{size:e});o((0,g.applyFormat)(t,{type:A,attributes:s?{class:(0,d.getFontSizeClass)(s.slug)}:{style:`font-size: ${n}`}}))}else o((0,g.removeFormat)(t,A))},contentRef:r,settings:B})]})}},M=({name:e,title:t,value:o,onChange:n,onReset:s})=>{const r=(0,C.useMemo)((()=>function(e,t){const o=(0,g.getActiveFormat)(t,e);if(!o)return;const n=o.attributes?.style;return n?parseFloat(n.replace(new RegExp("^letter-spacing:\\s*"),"").replace("rem","")):void 0}(e,o)),[e,o]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.RangeControl,{label:t,value:r,onChange:n,min:"0",max:"2",step:"0.1",initialPosition:void 0}),(0,h.jsx)(u.Button,{disabled:void 0===o,variant:"secondary",isSmall:!0,onClick:s,children:(0,p.__)("Reset")})]})},O=(0,u.withSpokenMessages)((({name:e,title:t,value:o,onChange:n,onClose:s,onReset:r,contentRef:a,settings:i})=>{const l=(0,g.useAnchor)({editableContentElement:a.current,settings:i}),c=(0,d.useCachedTruthy)(l.getBoundingClientRect());return l.getBoundingClientRect=()=>c,(0,h.jsx)(u.Popover,{anchor:l,onClose:s,className:"sme-popover sme-popover--inline-letter-spacing components-inline-color-popover",children:(0,h.jsx)("fieldset",{children:(0,h.jsx)(M,{name:e,title:t,value:o,onChange:n,onReset:r})})})})),T="snow-monkey-editor/letter-spacing",E=(0,p.__)("Letter spacing","snow-monkey-editor"),P={name:T,title:E,tagName:"span",className:"sme-letter-spacing",attributes:{style:"style"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i]=(0,C.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-letter-spacing":void 0,title:E,className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{i(!a)},icon:(0,h.jsx)(u.Icon,{icon:"controls-pause"})},n?"sme-letter-spacing":"sme-letter-spacing-not-active"),a&&(0,h.jsx)(O,{name:T,title:E,activeAttributes:s,value:t,onClose:()=>{i(!1)},onReset:()=>{i(!1),o((0,g.removeFormat)(t,T))},onChange:e=>{o((0,g.applyFormat)(t,{type:T,attributes:{style:`letter-spacing: ${e}rem`}}))},contentRef:r,settings:P})]})}},I=({name:e,title:t,value:o,onChange:n,onReset:s})=>{const r=(0,C.useMemo)((()=>function(e,t){const o=(0,g.getActiveFormat)(t,e);if(!o)return;const n=o.attributes.style;return n?parseFloat(n.replace(new RegExp("^line-height:\\s*"),"")):void 0}(e,o)),[e,o]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.RangeControl,{label:t,value:r,onChange:n,min:"0",max:"5",step:"0.1",initialPosition:void 0}),(0,h.jsx)(u.Button,{disabled:void 0===o,variant:"secondary",isSmall:!0,onClick:s,children:(0,p.__)("Reset")})]})},$=(0,u.withSpokenMessages)((({name:e,title:t,value:o,onChange:n,onClose:s,onReset:r,contentRef:a,settings:i})=>{const l=(0,g.useAnchor)({editableContentElement:a.current,settings:i}),c=(0,d.useCachedTruthy)(l.getBoundingClientRect());return l.getBoundingClientRect=()=>c,(0,h.jsx)(u.Popover,{anchor:l,onClose:s,className:"sme-popover sme-popover--inline-line-height components-inline-color-popover",children:(0,h.jsx)("fieldset",{children:(0,h.jsx)(I,{name:e,title:t,value:o,onChange:n,onReset:r})})})})),z="snow-monkey-editor/line-height",L=(0,p.__)("Line height","snow-monkey-editor"),V={name:z,title:L,tagName:"span",className:"sme-line-height",attributes:{style:"style"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a,i]=(0,C.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-line-height":void 0,title:L,className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{i(!a)},icon:(0,h.jsx)(u.Icon,{icon:"editor-insertmore"})},n?"sme-line-height":"sme-line-height-not-active"),a&&(0,h.jsx)($,{name:z,title:L,activeAttributes:s,value:t,onClose:()=>{i(!1)},onReset:()=>{i(!1),o((0,g.removeFormat)(t,z))},onChange:e=>{o((0,g.applyFormat)(t,{type:z,attributes:{style:`line-height: ${e}`}}))},contentRef:r,settings:V})]})}};function H(e,t,o){const n=(0,g.getActiveFormat)(t,e);if(!n)return;const s=n.attributes.style;if(s)return s.replace(new RegExp("^color:\\s*"),"");const r=n.attributes.class;if(r){const e=r.replace(/.*has-([^\s]*)-color.*/,"$1");return(0,d.getColorObjectByAttributeValues)(o,e).color}}const G=({name:e,value:t,onChange:o})=>{const n=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["colors"],[])})),s=(0,C.useMemo)((()=>H(e,t,n)),[e,t,n]);return(0,h.jsx)(d.__experimentalColorGradientControl,{label:(0,p.__)("Color","snow-monkey-editor"),colorValue:s,onColorChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},Z=(0,u.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,g.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,h.jsx)(u.Popover,{anchor:a,value:t,onClose:n,className:"sme-popover sme-popover--inline-color components-inline-color-popover",children:(0,h.jsx)(G,{name:e,value:t,onChange:o})})})),q="snow-monkey-editor/text-color",U=(0,p.__)("Text color","snow-monkey-editor"),D=[],W={name:q,title:U,tagName:"span",className:"sme-text-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a=D]=(0,d.useSettings)("color.palette"),[i,l]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>H(q,t,a)),[t,a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-text-color":void 0,title:U,style:{color:c},className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{l(!i)},icon:(0,h.jsx)(u.Icon,{icon:"edit"})},n?"sme-text-color":"sme-text-color-not-active"),i&&(0,h.jsx)(Z,{name:q,activeAttributes:s,value:t,onClose:()=>l(!1),onChange:e=>{if(e){const n=(0,d.getColorObjectByColorValue)(a,e);o((0,g.applyFormat)(t,{type:q,attributes:n?{class:(0,d.getColorClassName)("color",n.slug)}:{style:`color: ${e}`}}))}else o((0,g.removeFormat)(t,q)),l(!1)},contentRef:r,settings:W})]})}};function J(e,t,o){const n=(0,g.getActiveFormat)(t,e);if(!n)return;const s=n.attributes.style;if(s)return s.replace(new RegExp("^background-color:\\s*"),"");const r=n.attributes.class;if(r){const e=r.replace(/.*has-([^\s]*)-background-color.*/,"$1");return(0,d.getColorObjectByAttributeValues)(o,e).color}}const X=({name:e,value:t,onChange:o})=>{const n=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["colors"],[])})),s=(0,C.useMemo)((()=>J(e,t,n)),[e,t,n]);return(0,h.jsx)(d.__experimentalColorGradientControl,{label:(0,p.__)("Color","snow-monkey-editor"),colorValue:s,onColorChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},K=(0,u.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,g.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,h.jsx)(u.Popover,{anchor:a,onClose:n,className:"sme-popover sme-popover--inline-background-color components-inline-color-popover",children:(0,h.jsx)(X,{name:e,value:t,onChange:o})})})),Q="snow-monkey-editor/bg-color",Y=(0,p.__)("Background color","snow-monkey-editor"),ee=[],te={name:Q,title:Y,tagName:"span",className:"sme-bg-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a=ee]=(0,d.useSettings)("color.palette"),[i,l]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>J(Q,t,a)),[t,a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-bg-color":void 0,title:Y,style:{color:c},className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{l(!i)},icon:(0,h.jsx)(u.Icon,{icon:"tag"})},n?"sme-bg-color":"sme-bg-color-not-active"),i&&(0,h.jsx)(K,{name:Q,activeAttributes:s,value:t,onClose:()=>l(!1),onChange:e=>{if(e){const n=(0,d.getColorObjectByColorValue)(a,e);o((0,g.applyFormat)(t,{type:Q,attributes:n?{class:(0,d.getColorClassName)("background-color",n.slug)}:{style:`background-color: ${e}`}}))}else o((0,g.removeFormat)(t,Q)),l(!1)},contentRef:r,settings:te})]})}};var oe=o(558),ne=o.n(oe),se=o(919),re=o.n(se);function ae(e,t){const o=(0,g.getActiveFormat)(t,e);if(!o)return;const n=o.attributes.style;if(!n)return;const s=n.match(/(#[0-9A-F]{3,6}) /i);if(s)return s;const r=n.match(/,\s*?(rgba?\([^)]+\)) /i);return r?function(e){if(!e||4===e.length)return e;const t=e.match(/^#([0-9A-F])\1([0-9A-F])\1([0-9A-F])\1$/i);return t?`#${t[1].slice(0,1)}${t[2].slice(0,1)}${t[3].slice(0,1)}`:e}(re()(r[1]).hex):void 0}const ie=({name:e,value:t,onChange:o})=>{const n=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["colors"],[])})),s=(0,C.useMemo)((()=>ae(e,t)),[e,t,n]);return(0,h.jsx)(d.__experimentalColorGradientControl,{label:(0,p.__)("Color","snow-monkey-editor"),colorValue:s,onColorChange:o,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},le=(0,u.withSpokenMessages)((({name:e,value:t,onChange:o,onClose:n,contentRef:s,settings:r})=>{const a=(0,g.useAnchor)({editableContentElement:s.current,settings:r}),i=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>i,(0,h.jsx)(u.Popover,{anchor:a,onClose:n,className:"sme-popover sme-popover--inline-color components-inline-color-popover",children:(0,h.jsx)(ie,{name:e,value:t,onChange:o})})})),ce="snow-monkey-editor/highlighter",me=(0,p.__)("Highlighter","snow-monkey-editor"),de=[],ue={name:ce,title:me,tagName:"span",className:"sme-highlighter",attributes:{style:"style"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a=de]=(0,d.useSettings)("color.palette"),[i,l]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>ae(ce,t)),[t,a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-highlighter":void 0,title:me,style:{color:c},className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{l(!i)},icon:(0,h.jsx)(u.Icon,{icon:"tag"})},n?"sme-highlighter":"sme-highlighter-not-active"),i&&(0,h.jsx)(le,{name:ce,activeAttributes:s,value:t,onClose:()=>l(!1),onChange:e=>{e?(e.match(/^#/)&&(e=ne()(e,.5)),o((0,g.applyFormat)(t,{type:ce,attributes:{style:`background-image: linear-gradient(transparent 60%, ${e} 60%)`}}))):(o((0,g.removeFormat)(t,ce)),l(!1))},contentRef:r,settings:ue})]})}},ge="snow-monkey-editor/badge",pe=(0,p.__)("Badge","snow-monkey-editor"),he=[],be={name:ge,title:pe,tagName:"span",className:"sme-badge",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:o,isActive:n,activeAttributes:s,contentRef:r}=e,[a=he]=(0,d.useSettings)("color.palette"),[i,l]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>J(ge,t,a)),[t,a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{name:n?"sme-badge":void 0,title:pe,style:{color:c},className:S()("sme-toolbar-button",{"is-pressed":!!n}),onClick:()=>{l(!i)},icon:(0,h.jsx)(u.Icon,{icon:"tag"})},n?"sme-badge":"sme-badge-not-active"),i&&(0,h.jsx)(K,{name:ge,activeAttributes:s,value:t,onClose:()=>l(!1),onChange:e=>{if(e){const n=(0,d.getColorObjectByColorValue)(a,e);o((0,g.applyFormat)(t,{type:ge,attributes:n?{class:(0,d.getColorClassName)("background-color",n.slug)}:{style:`background-color: ${e}`}}))}else o((0,g.removeFormat)(t,ge)),l(!1)},contentRef:r,settings:be})]})}},ve="snow-monkey-editor/br",ye=(0,p.__)("Line break per screen size","snow-monkey-editor"),ke={type:ve,innerHTML:"<br />"};function Ce({value:e,onChange:t,activeObjectAttributes:o,contentRef:n}){const s=e.replacements.slice()?.[e.start]?.attributes?.class,[r,a]=(0,C.useState)(!!s?.match(/sme-br--disable:desktop/)),[i,l]=(0,C.useState)(!!s?.match(/sme-br--disable:tablet/)),[c,m]=(0,C.useState)(!!s?.match(/sme-br--disable:mobile/)),d=(0,g.useAnchor)({editableContentElement:n.current,settings:xe}),b=(0,C.useCallback)((n=>{a(!n);const s=e.replacements.slice();s[e.start]={...ke,attributes:{...o,class:S()({"sme-br--disable:desktop":!n,"sme-br--disable:tablet":i,"sme-br--disable:mobile":c})}},t({...e,replacements:s})}),[i,c]),v=(0,C.useCallback)((n=>{l(!n);const s=e.replacements.slice();s[e.start]={...ke,attributes:{...o,class:S()({"sme-br--disable:desktop":r,"sme-br--disable:tablet":!n,"sme-br--disable:mobile":c})}},t({...e,replacements:s})}),[r,c]),y=(0,C.useCallback)((n=>{m(!n);const s=e.replacements.slice();s[e.start]={...ke,attributes:{...o,class:S()({"sme-br--disable:desktop":r,"sme-br--disable:tablet":i,"sme-br--disable:mobile":!n})}},t({...e,replacements:s})}),[r,i]);return(0,h.jsx)(u.Popover,{placement:"bottom",shift:!0,focusOnMount:!1,anchor:d,className:"block-editor-format-toolbar__image-popover",children:(0,h.jsxs)("div",{style:{width:"260px",padding:"16px"},children:[(0,h.jsx)(u.ToggleControl,{label:(0,p.__)("Line breaks when on the desktop","snow-monkey-editor"),checked:!r,onChange:b,disabled:i&&c}),(0,h.jsx)(u.ToggleControl,{label:(0,p.__)("Line breaks when on the tablet","snow-monkey-editor"),checked:!i,onChange:v,disabled:r&&c}),(0,h.jsx)(u.ToggleControl,{label:(0,p.__)("Line breaks when on the mobile","snow-monkey-editor"),checked:!c,onChange:y,disabled:r&&i,__nextHasNoMarginBottom:!0})]})})}const xe={name:ve,title:ye,tagName:"span",className:"sme-br",attributes:{class:"class"},interactive:!0,contentEditable:!1,edit:function({value:e,onChange:t,onFocus:o,isObjectActive:n,activeObjectAttributes:s,contentRef:r}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{icon:(0,h.jsx)("span",{className:"dashicon",children:(0,h.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0224 5.25C18.4366 5.25 18.7724 5.58579 18.7724 6V15C18.7724 15.4142 18.4366 15.75 18.0224 15.75L18.0112 15.7499L18 15.75H10.0784V19L4.5 14.8349L10.0784 10.6699V14.25H17.2724V6C17.2724 5.58579 17.6082 5.25 18.0224 5.25Z",fill:"currentColor"})})}),title:ye,onClick:()=>{const n=(0,g.insertObject)(e,{...ke},e.end,e.end);n.start=n.end-1,t(n),o()},isActive:n}),n&&(0,h.jsx)(Ce,{value:e,onChange:t,activeObjectAttributes:s,contentRef:r})]})}};y(e),y(t),y(n),y(s),y(r),y(a),y(i),y(l),y(c);const we=window.wp.blocks,fe=window.wp.hooks,_e=window.wp.compose,je={name:"sme-alert",label:(0,p.__)("Alert","snow-monkey-editor")},Se=["core/group","core/paragraph"].map((e=>({name:e,settings:je}))),Re={name:"sme-alert-success",label:(0,p.__)("Alert (Success)","snow-monkey-editor")},Fe=["core/group","core/paragraph"].map((e=>({name:e,settings:Re}))),Ae={name:"sme-alert-warning",label:(0,p.__)("Alert (Warning)","snow-monkey-editor")},Ne=["core/group","core/paragraph"].map((e=>({name:e,settings:Ae}))),Be={name:"sme-alert-remark",label:(0,p.__)("Alert (Remarks)","snow-monkey-editor")},Me=["core/group","core/paragraph"].map((e=>({name:e,settings:Be}))),Oe={name:"sme-block-code-nowrap",label:(0,p.__)("No wrap","snow-monkey-editor")},Te=["core/code"].map((e=>({name:e,settings:Oe}))),Ee={name:"sme-block-code-wrap",label:(0,p.__)("Wrap","snow-monkey-editor")},Pe=["core/code"].map((e=>({name:e,settings:Ee}))),Ie={name:"sme-fluid-shape-1",label:(0,p.__)("Fluid Shape 1","snow-monkey-editor")},$e=["core/image","core/media-text"].map((e=>({name:e,settings:Ie}))),ze={name:"sme-fluid-shape-2",label:(0,p.__)("Fluid Shape 2","snow-monkey-editor")},Le=["core/image","core/media-text"].map((e=>({name:e,settings:ze}))),Ve={name:"sme-fluid-shape-3",label:(0,p.__)("Fluid Shape 3","snow-monkey-editor")},He=["core/image","core/media-text"].map((e=>({name:e,settings:Ve}))),Ge={name:"sme-list-arrow",label:(0,p.__)("Arrow","snow-monkey-editor")},Ze=["core/list"].map((e=>({name:e,settings:Ge}))),qe={name:"sme-list-check",label:(0,p.__)("Check","snow-monkey-editor")},Ue=["core/list"].map((e=>({name:e,settings:qe}))),De={name:"sme-list-remark",label:(0,p.__)("Remarks","snow-monkey-editor")},We=["core/list"].map((e=>({name:e,settings:De}))),Je={name:"sme-list-times",label:(0,p.__)("Times","snow-monkey-editor")},Xe=["core/list"].map((e=>({name:e,settings:Je}))),Ke={name:"sme-ordered-list-circle",label:(0,p.__)("Ordered list (Circle)","snow-monkey-editor")},Qe=["core/list"].map((e=>({name:e,settings:Ke}))),Ye={name:"sme-ordered-list-square",label:(0,p.__)("Ordered list (Square)","snow-monkey-editor")},et=["core/list"].map((e=>({name:e,settings:Ye}))),tt={name:"sme-post-it",label:(0,p.__)("Post-it","snow-monkey-editor")},ot=["core/paragraph"].map((e=>({name:e,settings:tt}))),nt={name:"sme-post-it-narrow",label:(0,p.__)("Post-it (Narrow)","snow-monkey-editor")},st=["core/paragraph"].map((e=>({name:e,settings:nt}))),rt={name:"sme-shadowed",label:(0,p.__)("Shadowed","snow-monkey-editor")},at=["core/image","core/button"].map((e=>({name:e,settings:rt}))),it={name:"sme-speech",label:(0,p.__)("Speech (Bottom)","snow-monkey-editor")},lt=["core/paragraph"].map((e=>({name:e,settings:it}))),ct={name:"sme-speech-top",label:(0,p.__)("Speech (Top)","snow-monkey-editor")},mt=["core/paragraph"].map((e=>({name:e,settings:ct}))),dt={name:"sme-speech-right",label:(0,p.__)("Speech (Right)","snow-monkey-editor")},ut=["core/paragraph"].map((e=>({name:e,settings:dt}))),gt={name:"sme-speech-left",label:(0,p.__)("Speech (Left)","snow-monkey-editor")};[Se,Fe,Ne,Me,Te,Pe,$e,Le,He,Ze,Ue,We,Xe,Qe,et,ot,st,at,lt,mt,ut,["core/paragraph"].map((e=>({name:e,settings:gt})))].forEach((e=>{e.forEach((e=>(e=>{if(!e)return;const{name:t,settings:o}=e;(0,we.registerBlockStyle)(t,o)})(e)))})),(0,fe.addFilter)("editor.BlockEdit","snow-monkey-editor/ordered-list/block-edit",(0,_e.createHigherOrderComponent)((e=>t=>{const{attributes:o,name:n,clientId:s}=t,{start:r,reversed:a,ordered:i}=o;if("core/list"!==n)return(0,h.jsx)(e,{...t});const l=document.querySelector(`[data-block="${s}"].rich-text`);return l?l.classList.contains("is-style-sme-ordered-list-square")||l.classList.contains("is-style-sme-ordered-list-circle")?(l.style.counterReset=i?a?`sme-count ${r+1}`:"sme-count "+(r-1):"",(0,h.jsx)(e,{...t})):(l.style.counterReset="",(0,h.jsx)(e,{...t})):(0,h.jsx)(e,{...t})}),"withSnowMonkeyEditorOrderdListBlockEdit"));const pt=window.wp.preferences;const ht="snow-monkey-editor/preferences",bt=["allowedBlocks","content","templateLock","placeholder"],vt=e=>!(({name:e}={})=>!(0,we.hasBlockSupport)(e,"snowmonkeyeditor.blockPresets"))(e)&&(!!function(e,t){if(!e||!Object.keys(e).length)return!1;const o=function(e){return(0,fe.applyFilters)("SnowMonkeyEditor.extension.allowedRoles",["administrator","editor","author","contributor"],e)}(t);return 0<e.roles.filter((e=>-1<o.indexOf(e))).length}(snowmonkeyeditor?.currentUser,"block-presets")&&!!(0,we.getBlockType)(e.name)),yt=(0,_e.createHigherOrderComponent)((e=>((0,k.dispatch)(pt.store).setDefaults(ht,{blockPresets:{}}),t=>{if(!vt(t))return(0,h.jsx)(e,{...t});const{name:o,attributes:n,setAttributes:s}=t,[r,a]=(0,C.useState)(void 0),[i,l]=(0,C.useState)(0),c=(0,k.useSelect)((e=>e(pt.store).get(ht,"blockPresets")),[]),m=c?.[o],g=(0,we.getBlockSupport)(o,"snowmonkeyeditor.blockPresets"),b=g?.ignore||[],v=({blockName:e,presetName:t,preset:o})=>(0,h.jsxs)("div",{className:"sme-editor-block-presets__preset",children:[(0,h.jsx)(u.Button,{onClick:()=>{const t=(0,we.getBlockType)(e),n={};Object.keys(t.attributes).forEach((e=>{n[e]=void 0})),bt.forEach((e=>{delete n[e],delete o[e]})),b.forEach((e=>{delete n[e],delete o[e]})),s({...n,...o})},variant:"secondary",children:t}),(0,h.jsx)(u.Button,{label:(0,p.__)("Remove this preset","snow-monkey-editor"),onClick:()=>{const o={...c};delete o?.[e]?.[t],(0,k.dispatch)(pt.store).set(ht,"blockPresets",o),l(i+1)},variant:"tertiary",children:"x"})]});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(e,{...t}),(0,h.jsx)(d.InspectorControls,{children:(0,h.jsxs)(u.PanelBody,{title:(0,p.__)("Presets","snow-monkey-editor"),children:[!!m&&!!Object.values(m)&&(0,h.jsx)("div",{className:"sme-editor-block-presets",children:Object.values(m).map(((e,t)=>{const n=Object.keys(m)[t];return(0,h.jsx)(v,{blockName:o,presetName:n,preset:e},t)}))}),(0,h.jsxs)("div",{className:"sme-editor-block-presets-inserter",children:[(0,h.jsx)("h3",{className:"sme-editor-block-presets-inserter__title",children:(0,p.__)("Save current settings as a preset","snow-monkey-editor")}),(0,h.jsxs)("div",{className:"sme-editor-block-presets-inserter__control",children:[(0,h.jsx)(u.TextControl,{value:r||"",placeholder:(0,p.__)("Input the preset name.","snow-monkey-editor"),onChange:e=>a(e)}),(0,h.jsx)(u.Button,{variant:"primary",disabled:!r,onClick:async()=>{const e={...n};bt.forEach((t=>{delete e[t]})),b.forEach((t=>{delete e[t]}));const t={...c,[o]:{...m,[r]:{...e}}};(0,k.dispatch)(pt.store).set(ht,"blockPresets",t),a(void 0)},children:(0,p.__)("Save","snow-monkey-editor")})]})]})]})})]})})),"withInspectorControl");(0,fe.addFilter)("editor.BlockEdit","snow-monkey-editor/block-presets/with-inspector-controls",yt,100),(0,fe.addFilter)("blocks.registerBlockType","snow-monkey-editor/block-presets/support",((e,t)=>{let o=!1;return"core/button"===t?o={ignore:["url","title","text","linkTarget","rel"]}:"core/cover"===t?o={ignore:["url"]}:"core/list"===t?o={ignore:["values"]}:"core/paragraph"!==t&&"core/group"!==t&&"core/columns"!==t&&"core/column"!==t&&"core/heading"!==t||(o=!0),!1===o?e:{...e,supports:{...e.supports,snowmonkeyeditor:{blockPresets:o}}}}))})()})();