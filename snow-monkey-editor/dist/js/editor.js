(()=>{var e={558:e=>{"use strict";var t=function(e){return parseInt(e,16)};e.exports=function(e,n){var o,r,s=function(e){return"#"===e.charAt(0)?e.slice(1):e}(e),a=function(e){var n=e.g,o=e.b,r=e.a;return{r:t(e.r),g:t(n),b:t(o),a:+(t(r)/255).toFixed(2)}}({r:(r=3===(o=s).length||4===o.length)?"".concat(o.slice(0,1)).concat(o.slice(0,1)):o.slice(0,2),g:r?"".concat(o.slice(1,2)).concat(o.slice(1,2)):o.slice(2,4),b:r?"".concat(o.slice(2,3)).concat(o.slice(2,3)):o.slice(4,6),a:(r?"".concat(o.slice(3,4)).concat(o.slice(3,4)):o.slice(6,8))||"ff"});return function(e,t){var n,o=e.r,r=e.g,s=e.b,a=e.a,l=(n=t,!isNaN(parseFloat(n))&&isFinite(n)?t:a);return"rgba(".concat(o,", ").concat(r,", ").concat(s,", ").concat(l,")")}(a,n)}},919:e=>{e.exports=function(e){if("string"!=typeof e)throw new Error("color has to be type of `string`");if("#"===e.substr(0,1))return{hex:e,alpha:1};var t=e.replace(/\s+/g,""),n=/(.*?)rgb(a)??\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([01]|1.0*|0??\.([0-9]{0,})))??\)/.exec(t);if(!n)throw new Error("given color ("+e+") isn't a valid rgb or rgba color");var o=parseInt(n[3],10),r=parseInt(n[4],10),s=parseInt(n[5],10),a=n[6]?/([0-9\.]+)/.exec(n[6])[0]:"1",l=(s|r<<8|o<<16|1<<24).toString(16).slice(1);return"."===a.substr(0,1)&&(a=parseFloat("0"+a)),a=parseFloat(Math.round(100*a))/100,{hex:"#"+l.toString(16),alpha:a}}},942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{settings:()=>E});var t={};n.r(t),n.d(t,{settings:()=>B});var o={};n.r(o),n.d(o,{settings:()=>I});var r={};n.r(r),n.d(r,{settings:()=>V});var s={};n.r(s),n.d(s,{settings:()=>W});var a={};n.r(a),n.d(a,{settings:()=>te});var l={};n.r(l),n.d(l,{settings:()=>de});var i={};n.r(i),n.d(i,{settings:()=>he});var c={};n.r(c),n.d(c,{settings:()=>we});const m=window.React,u=window.lodash,d=window.wp.blockEditor,g=window.wp.components,p=window.wp.richText,b=window.wp.i18n,h=(0,m.createElement)("svg",{role:"img",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},(0,m.createElement)("path",{d:"M13.982,16.711c-0.744,1.441 -2.248,2.428 -3.982,2.428c-1.735,0 -3.238,-0.986 -3.983,-2.428c0.909,-1.213 2.355,-2.002 3.983,-2.002c1.629,0 3.074,0.789 3.982,2.002Zm-0.748,-7.657c-0.314,2.56 1.248,2.919 1.248,5.603c0,0.467 -0.072,0.918 -0.205,1.344c-1.037,-1.203 -2.57,-1.967 -4.277,-1.967c-1.708,0 -3.24,0.764 -4.277,1.967c-0.133,-0.426 -0.205,-0.877 -0.205,-1.344c0,-2.684 1.563,-3.043 1.247,-5.603c-0.362,-2.928 -4.315,-2.465 -4.315,-5.334c0,-1.579 1.279,-2.858 2.858,-2.858c1.709,0 2.765,1.558 4.692,1.558c1.926,0 2.982,-1.558 4.691,-1.558c1.578,0 2.857,1.279 2.857,2.858c0.001,2.869 -3.952,2.406 -4.314,5.334Zm-4.677,-4.947l-0.708,0c0,0.498 -0.403,0.9 -0.901,0.9c-0.498,0 -0.901,-0.402 -0.901,-0.9l-0.708,0c0,0.889 0.72,1.609 1.609,1.609c0.889,0 1.609,-0.72 1.609,-1.609Zm0.979,7.141c0,-0.312 -0.253,-0.568 -0.566,-0.568c-0.313,0 -0.567,0.256 -0.567,0.568c0,0.312 0.254,0.566 0.567,0.566c0.313,0 0.566,-0.253 0.566,-0.566Zm2.062,0c0,-0.312 -0.254,-0.568 -0.568,-0.568c-0.312,0 -0.566,0.256 -0.566,0.568c0,0.312 0.254,0.566 0.566,0.566c0.314,0 0.568,-0.253 0.568,-0.566Zm3.062,-7.141l-0.707,0c0,0.498 -0.404,0.9 -0.9,0.9c-0.498,0 -0.902,-0.402 -0.902,-0.9l-0.707,0c0,0.889 0.721,1.609 1.609,1.609c0.886,0.001 1.607,-0.72 1.607,-1.609Z"})),v={position:"bottom left",variant:"alternate"};(0,p.registerFormatType)("snow-monkey-editor/dropdown",{title:"buttons",tagName:"sme-dropdown",className:null,edit:()=>(0,m.createElement)(d.BlockFormatControls,null,(0,m.createElement)("div",{className:"block-editor-format-toolbar"},(0,m.createElement)(g.ToolbarGroup,null,(0,m.createElement)(g.Slot,{name:"SnowMonkey.ToolbarControls"},(e=>0!==e.length&&(0,m.createElement)(g.ToolbarItem,null,(t=>(0,m.createElement)(g.DropdownMenu,{icon:h,label:(0,b.__)("Snow Monkey Editor Controls","snow-monkey-editor"),toggleProps:t,controls:(0,u.orderBy)(e.map((([{props:e}])=>e)),"title"),popoverProps:v}))))),["sme-font-size","sme-letter-spacing","sme-line-height","sme-text-color","sme-bg-color","sme-highlighter","sme-badge"].map((e=>(0,m.createElement)(g.Slot,{name:`SnowMonkey.ToolbarControls.${e}`,key:e}))))))});const y=e=>{if(!e)return;const{name:t,settings:n}=e;(0,p.registerFormatType)(t,n)},k=window.wp.data,C=window.wp.element,w=window.wp.keycodes;function f({name:e,shortcutType:t,shortcutCharacter:n,...o}){let r,s="SnowMonkey.ToolbarControls";return e&&(s+=`.${e}`),t&&n&&(r=w.displayShortcut[t](n)),(0,m.createElement)(g.Fill,{name:s},(0,m.createElement)(g.ToolbarButton,{...o,shortcut:r}))}const _=(0,b.__)("Remove formatting","snow-monkey-editor"),E={name:"snow-monkey-editor/remove-fomatting",title:_,tagName:"span",className:"sme-remove-fomatting",edit:({value:e,onChange:t})=>{const n=(0,k.useSelect)((e=>e("core/rich-text").getFormatTypes()),[]),o=(0,C.useCallback)((()=>{if(0<n.length){let o=e;n.forEach((e=>{o=(0,p.removeFormat)(o,e.name)})),t({...o})}}),[e,n]);return(0,m.createElement)(f,{icon:"editor-removeformatting",title:_,onClick:o})}};var S=n(942),R=n.n(S);const x=({name:e,value:t,onChange:n,onReset:o})=>{const r=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,u.get)(t(),["fontSizes"],[])})),s=(0,C.useMemo)((()=>function(e,t,n){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const r=o.attributes.style;if(r)return r.replace(new RegExp("^font-size:\\s*"),"");const s=o.attributes.class;if(s){let e=s.replace(/.*has-([^\s]*)-font-size.*/,"$1"),t=(0,u.find)(n,{slug:e});if(!t&&(e=e.replace(/(\d)-([^\d])/,"$1$2",e),t=(0,u.find)(n,{slug:e}),!t))return;return t.size}}(e,t,r)),[e,t]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(d.FontSizePicker,{value:s,onChange:n,fontSizes:r,__nextHasNoMarginBottom:!0}),(0,m.createElement)(g.Button,{disabled:void 0===t,variant:"secondary",isSmall:!0,onClick:o},(0,b.__)("Reset")))},F=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,onReset:r,contentRef:s,settings:a})=>{const l=(0,p.useAnchor)({editableContentElement:s.current,settings:a}),i=(0,d.useCachedTruthy)(l.getBoundingClientRect());return l.getBoundingClientRect=()=>i,(0,m.createElement)(g.Popover,{anchor:l,onClose:o,className:"sme-popover sme-popover--inline-font-size components-inline-color-popover"},(0,m.createElement)("fieldset",null,(0,m.createElement)(x,{name:e,value:t,onChange:n,onReset:r})))})),A="snow-monkey-editor/font-size",N=(0,b.__)("Font size","snow-monkey-editor"),B={name:A,title:N,tagName:"span",className:"sme-font-size",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a]=(0,d.useSettings)("typography.fontSizes"),[l,i]=(0,C.useState)(!1);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-font-size":"sme-font-size-not-active",name:o?"sme-font-size":void 0,title:N,className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,m.createElement)(g.Icon,{icon:"editor-textcolor"})}),l&&(0,m.createElement)(F,{name:A,activeAttributes:r,value:t,onClose:()=>i(!1),onReset:()=>{i(!1),n((0,p.removeFormat)(t,A))},onChange:e=>{if(e){let o;if((0,u.isString)(e)||a[0]&&(0,u.isString)(a[0].size))o=e;else{if(!(0,u.isNumber)(e))return;o=`${e}px`}const r=(0,u.find)(a,{size:e});n((0,p.applyFormat)(t,{type:A,attributes:r?{class:(0,d.getFontSizeClass)(r.slug)}:{style:`font-size: ${o}`}}))}else n((0,p.removeFormat)(t,A))},contentRef:s,settings:B}))}},M=({name:e,title:t,value:n,onChange:o,onReset:r})=>{const s=(0,C.useMemo)((()=>function(e,t){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const o=n.attributes?.style;return o?parseFloat(o.replace(new RegExp("^letter-spacing:\\s*"),"").replace("rem","")):void 0}(e,n)),[e,n]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(g.RangeControl,{label:t,value:s,onChange:o,min:"0",max:"2",step:"0.1",initialPosition:void 0}),(0,m.createElement)(g.Button,{disabled:void 0===n,variant:"secondary",isSmall:!0,onClick:r},(0,b.__)("Reset")))},O=(0,g.withSpokenMessages)((({name:e,title:t,value:n,onChange:o,onClose:r,onReset:s,contentRef:a,settings:l})=>{const i=(0,p.useAnchor)({editableContentElement:a.current,settings:l}),c=(0,d.useCachedTruthy)(i.getBoundingClientRect());return i.getBoundingClientRect=()=>c,(0,m.createElement)(g.Popover,{anchor:i,onClose:r,className:"sme-popover sme-popover--inline-letter-spacing components-inline-color-popover"},(0,m.createElement)("fieldset",null,(0,m.createElement)(M,{name:e,title:t,value:n,onChange:o,onReset:s})))})),T="snow-monkey-editor/letter-spacing",P=(0,b.__)("Letter spacing","snow-monkey-editor"),I={name:T,title:P,tagName:"span",className:"sme-letter-spacing",attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a,l]=(0,C.useState)(!1);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-letter-spacing":"sme-letter-spacing-not-active",name:o?"sme-letter-spacing":void 0,title:P,className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{l(!a)},icon:(0,m.createElement)(g.Icon,{icon:"controls-pause"})}),a&&(0,m.createElement)(O,{name:T,title:P,activeAttributes:r,value:t,onClose:()=>{l(!1)},onReset:()=>{l(!1),n((0,p.removeFormat)(t,T))},onChange:e=>{n((0,p.applyFormat)(t,{type:T,attributes:{style:`letter-spacing: ${e}rem`}}))},contentRef:s,settings:I}))}},j=({name:e,title:t,value:n,onChange:o,onReset:r})=>{const s=(0,C.useMemo)((()=>function(e,t){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const o=n.attributes.style;return o?parseFloat(o.replace(new RegExp("^line-height:\\s*"),"")):void 0}(e,n)),[e,n]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(g.RangeControl,{label:t,value:s,onChange:o,min:"0",max:"5",step:"0.1",initialPosition:void 0}),(0,m.createElement)(g.Button,{disabled:void 0===n,variant:"secondary",isSmall:!0,onClick:r},(0,b.__)("Reset")))},$=(0,g.withSpokenMessages)((({name:e,title:t,value:n,onChange:o,onClose:r,onReset:s,contentRef:a,settings:l})=>{const i=(0,p.useAnchor)({editableContentElement:a.current,settings:l}),c=(0,d.useCachedTruthy)(i.getBoundingClientRect());return i.getBoundingClientRect=()=>c,(0,m.createElement)(g.Popover,{anchor:i,onClose:r,className:"sme-popover sme-popover--inline-line-height components-inline-color-popover"},(0,m.createElement)("fieldset",null,(0,m.createElement)(j,{name:e,title:t,value:n,onChange:o,onReset:s})))})),z="snow-monkey-editor/line-height",L=(0,b.__)("Line height","snow-monkey-editor"),V={name:z,title:L,tagName:"span",className:"sme-line-height",attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a,l]=(0,C.useState)(!1);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-line-height":"sme-line-height-not-active",name:o?"sme-line-height":void 0,title:L,className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{l(!a)},icon:(0,m.createElement)(g.Icon,{icon:"editor-insertmore"})}),a&&(0,m.createElement)($,{name:z,title:L,activeAttributes:r,value:t,onClose:()=>{l(!1)},onReset:()=>{l(!1),n((0,p.removeFormat)(t,z))},onChange:e=>{n((0,p.applyFormat)(t,{type:z,attributes:{style:`line-height: ${e}`}}))},contentRef:s,settings:V}))}};function H(e,t,n){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const r=o.attributes.style;if(r)return r.replace(new RegExp("^color:\\s*"),"");const s=o.attributes.class;if(s){const e=s.replace(/.*has-([^\s]*)-color.*/,"$1");return(0,d.getColorObjectByAttributeValues)(n,e).color}}const G=({name:e,value:t,onChange:n})=>{const o=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,u.get)(t(),["colors"],[])})),r=(0,C.useMemo)((()=>H(e,t,o)),[e,t,o]);return(0,m.createElement)(d.__experimentalColorGradientControl,{label:(0,b.__)("Color","snow-monkey-editor"),colorValue:r,onColorChange:n,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},Z=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,contentRef:r,settings:s})=>{const a=(0,p.useAnchor)({editableContentElement:r.current,settings:s}),l=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>l,(0,m.createElement)(g.Popover,{anchor:a,value:t,onClose:o,className:"sme-popover sme-popover--inline-color components-inline-color-popover"},(0,m.createElement)(G,{name:e,value:t,onChange:n}))})),q="snow-monkey-editor/text-color",U=(0,b.__)("Text color","snow-monkey-editor"),D=[],W={name:q,title:U,tagName:"span",className:"sme-text-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a=D]=(0,d.useSettings)("color.palette"),[l,i]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>H(q,t,a)),[t,a]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-text-color":"sme-text-color-not-active",name:o?"sme-text-color":void 0,title:U,style:{color:c},className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,m.createElement)(g.Icon,{icon:"edit"})}),l&&(0,m.createElement)(Z,{name:q,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{if(e){const o=(0,d.getColorObjectByColorValue)(a,e);n((0,p.applyFormat)(t,{type:q,attributes:o?{class:(0,d.getColorClassName)("color",o.slug)}:{style:`color: ${e}`}}))}else n((0,p.removeFormat)(t,q)),i(!1)},contentRef:s,settings:W}))}};function J(e,t,n){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const r=o.attributes.style;if(r)return r.replace(new RegExp("^background-color:\\s*"),"");const s=o.attributes.class;if(s){const e=s.replace(/.*has-([^\s]*)-background-color.*/,"$1");return(0,d.getColorObjectByAttributeValues)(n,e).color}}const K=({name:e,value:t,onChange:n})=>{const o=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,u.get)(t(),["colors"],[])})),r=(0,C.useMemo)((()=>J(e,t,o)),[e,t,o]);return(0,m.createElement)(d.__experimentalColorGradientControl,{label:(0,b.__)("Color","snow-monkey-editor"),colorValue:r,onColorChange:n,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},Q=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,contentRef:r,settings:s})=>{const a=(0,p.useAnchor)({editableContentElement:r.current,settings:s}),l=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>l,(0,m.createElement)(g.Popover,{anchor:a,onClose:o,className:"sme-popover sme-popover--inline-background-color components-inline-color-popover"},(0,m.createElement)(K,{name:e,value:t,onChange:n}))})),X="snow-monkey-editor/bg-color",Y=(0,b.__)("Background color","snow-monkey-editor"),ee=[],te={name:X,title:Y,tagName:"span",className:"sme-bg-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a=ee]=(0,d.useSettings)("color.palette"),[l,i]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>J(X,t,a)),[t,a]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-bg-color":"sme-bg-color-not-active",name:o?"sme-bg-color":void 0,title:Y,style:{color:c},className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,m.createElement)(g.Icon,{icon:"tag"})}),l&&(0,m.createElement)(Q,{name:X,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{if(e){const o=(0,d.getColorObjectByColorValue)(a,e);n((0,p.applyFormat)(t,{type:X,attributes:o?{class:(0,d.getColorClassName)("background-color",o.slug)}:{style:`background-color: ${e}`}}))}else n((0,p.removeFormat)(t,X)),i(!1)},contentRef:s,settings:te}))}};var ne=n(558),oe=n.n(ne),re=n(919),se=n.n(re);function ae(e,t){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const o=n.attributes.style;if(!o)return;const r=o.match(/(#[0-9A-F]{3,6}) /i);if(r)return r;const s=o.match(/,\s*?(rgba?\([^)]+\)) /i);return s?function(e){if(!e||4===e.length)return e;const t=e.match(/^#([0-9A-F])\1([0-9A-F])\1([0-9A-F])\1$/i);return t?`#${t[1].slice(0,1)}${t[2].slice(0,1)}${t[3].slice(0,1)}`:e}(se()(s[1]).hex):void 0}const le=({name:e,value:t,onChange:n})=>{const o=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,u.get)(t(),["colors"],[])})),r=(0,C.useMemo)((()=>ae(e,t)),[e,t,o]);return(0,m.createElement)(d.__experimentalColorGradientControl,{label:(0,b.__)("Color","snow-monkey-editor"),colorValue:r,onColorChange:n,...(0,d.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},ie=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,contentRef:r,settings:s})=>{const a=(0,p.useAnchor)({editableContentElement:r.current,settings:s}),l=(0,d.useCachedTruthy)(a.getBoundingClientRect());return a.getBoundingClientRect=()=>l,(0,m.createElement)(g.Popover,{anchor:a,onClose:o,className:"sme-popover sme-popover--inline-color components-inline-color-popover"},(0,m.createElement)(le,{name:e,value:t,onChange:n}))})),ce="snow-monkey-editor/highlighter",me=(0,b.__)("Highlighter","snow-monkey-editor"),ue=[],de={name:ce,title:me,tagName:"span",className:"sme-highlighter",attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a=ue]=(0,d.useSettings)("color.palette"),[l,i]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>ae(ce,t)),[t,a]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-highlighter":"sme-highlighter-not-active",name:o?"sme-highlighter":void 0,title:me,style:{color:c},className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,m.createElement)(g.Icon,{icon:"tag"})}),l&&(0,m.createElement)(ie,{name:ce,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{e?(e.match(/^#/)&&(e=oe()(e,.5)),n((0,p.applyFormat)(t,{type:ce,attributes:{style:`background-image: linear-gradient(transparent 60%, ${e} 60%)`}}))):(n((0,p.removeFormat)(t,ce)),i(!1))},contentRef:s,settings:de}))}},ge="snow-monkey-editor/badge",pe=(0,b.__)("Badge","snow-monkey-editor"),be=[],he={name:ge,title:pe,tagName:"span",className:"sme-badge",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a=be]=(0,d.useSettings)("color.palette"),[l,i]=(0,C.useState)(!1),c=(0,C.useMemo)((()=>J(ge,t,a)),[t,a]);return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{key:o?"sme-badge":"sme-badge-not-active",name:o?"sme-badge":void 0,title:pe,style:{color:c},className:R()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,m.createElement)(g.Icon,{icon:"tag"})}),l&&(0,m.createElement)(Q,{name:ge,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{if(e){const o=(0,d.getColorObjectByColorValue)(a,e);n((0,p.applyFormat)(t,{type:ge,attributes:o?{class:(0,d.getColorClassName)("background-color",o.slug)}:{style:`background-color: ${e}`}}))}else n((0,p.removeFormat)(t,ge)),i(!1)},contentRef:s,settings:he}))}},ve="snow-monkey-editor/br",ye=(0,b.__)("Line break per screen size","snow-monkey-editor"),ke={type:ve,innerHTML:"<br />"};function Ce({value:e,onChange:t,activeObjectAttributes:n,contentRef:o}){const r=e.replacements.slice()?.[e.start]?.attributes?.class,[s,a]=(0,C.useState)(!!r?.match(/sme-br--disable:desktop/)),[l,i]=(0,C.useState)(!!r?.match(/sme-br--disable:tablet/)),[c,u]=(0,C.useState)(!!r?.match(/sme-br--disable:mobile/)),d=(0,p.useAnchor)({editableContentElement:o.current,settings:we}),h=(0,C.useCallback)((o=>{a(!o);const r=e.replacements.slice();r[e.start]={...ke,attributes:{...n,class:R()({"sme-br--disable:desktop":!o,"sme-br--disable:tablet":l,"sme-br--disable:mobile":c})}},t({...e,replacements:r})}),[l,c]),v=(0,C.useCallback)((o=>{i(!o);const r=e.replacements.slice();r[e.start]={...ke,attributes:{...n,class:R()({"sme-br--disable:desktop":s,"sme-br--disable:tablet":!o,"sme-br--disable:mobile":c})}},t({...e,replacements:r})}),[s,c]),y=(0,C.useCallback)((o=>{u(!o);const r=e.replacements.slice();r[e.start]={...ke,attributes:{...n,class:R()({"sme-br--disable:desktop":s,"sme-br--disable:tablet":l,"sme-br--disable:mobile":!o})}},t({...e,replacements:r})}),[s,l]);return(0,m.createElement)(g.Popover,{placement:"bottom",shift:!0,focusOnMount:!1,anchor:d,className:"block-editor-format-toolbar__image-popover"},(0,m.createElement)("div",{style:{width:"260px",padding:"16px"}},(0,m.createElement)(g.ToggleControl,{label:(0,b.__)("Line breaks when on the desktop","snow-monkey-editor"),checked:!s,onChange:h,disabled:l&&c}),(0,m.createElement)(g.ToggleControl,{label:(0,b.__)("Line breaks when on the tablet","snow-monkey-editor"),checked:!l,onChange:v,disabled:s&&c}),(0,m.createElement)(g.ToggleControl,{label:(0,b.__)("Line breaks when on the mobile","snow-monkey-editor"),checked:!c,onChange:y,disabled:s&&l,__nextHasNoMarginBottom:!0})))}const we={name:ve,title:ye,tagName:"span",className:"sme-br",attributes:{class:"class"},interactive:!0,contentEditable:!1,edit:function({value:e,onChange:t,onFocus:n,isObjectActive:o,activeObjectAttributes:r,contentRef:s}){return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(f,{icon:(0,m.createElement)("span",{className:"dashicon"},(0,m.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,m.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0224 5.25C18.4366 5.25 18.7724 5.58579 18.7724 6V15C18.7724 15.4142 18.4366 15.75 18.0224 15.75L18.0112 15.7499L18 15.75H10.0784V19L4.5 14.8349L10.0784 10.6699V14.25H17.2724V6C17.2724 5.58579 17.6082 5.25 18.0224 5.25Z",fill:"currentColor"}))),title:ye,onClick:()=>{const o=(0,p.insertObject)(e,{...ke},e.end,e.end);o.start=o.end-1,t(o),n()},isActive:o}),o&&(0,m.createElement)(Ce,{value:e,onChange:t,activeObjectAttributes:r,contentRef:s}))}};y(e),y(t),y(o),y(r),y(s),y(a),y(l),y(i),y(c);const fe=window.wp.blocks,_e=window.wp.hooks,Ee=window.wp.compose,Se={name:"sme-alert",label:(0,b.__)("Alert","snow-monkey-editor")},Re=["core/group","core/paragraph"].map((e=>({name:e,settings:Se}))),xe={name:"sme-alert-success",label:(0,b.__)("Alert (Success)","snow-monkey-editor")},Fe=["core/group","core/paragraph"].map((e=>({name:e,settings:xe}))),Ae={name:"sme-alert-warning",label:(0,b.__)("Alert (Warning)","snow-monkey-editor")},Ne=["core/group","core/paragraph"].map((e=>({name:e,settings:Ae}))),Be={name:"sme-alert-remark",label:(0,b.__)("Alert (Remarks)","snow-monkey-editor")},Me=["core/group","core/paragraph"].map((e=>({name:e,settings:Be}))),Oe={name:"sme-block-code-nowrap",label:(0,b.__)("No wrap","snow-monkey-editor")},Te=["core/code"].map((e=>({name:e,settings:Oe}))),Pe={name:"sme-block-code-wrap",label:(0,b.__)("Wrap","snow-monkey-editor")},Ie=["core/code"].map((e=>({name:e,settings:Pe}))),je={name:"sme-fluid-shape-1",label:(0,b.__)("Fluid Shape 1","snow-monkey-editor")},$e=["core/image","core/media-text"].map((e=>({name:e,settings:je}))),ze={name:"sme-fluid-shape-2",label:(0,b.__)("Fluid Shape 2","snow-monkey-editor")},Le=["core/image","core/media-text"].map((e=>({name:e,settings:ze}))),Ve={name:"sme-fluid-shape-3",label:(0,b.__)("Fluid Shape 3","snow-monkey-editor")},He=["core/image","core/media-text"].map((e=>({name:e,settings:Ve}))),Ge={name:"sme-list-arrow",label:(0,b.__)("Arrow","snow-monkey-editor")},Ze=["core/list"].map((e=>({name:e,settings:Ge}))),qe={name:"sme-list-check",label:(0,b.__)("Check","snow-monkey-editor")},Ue=["core/list"].map((e=>({name:e,settings:qe}))),De={name:"sme-list-remark",label:(0,b.__)("Remarks","snow-monkey-editor")},We=["core/list"].map((e=>({name:e,settings:De}))),Je={name:"sme-list-times",label:(0,b.__)("Times","snow-monkey-editor")},Ke=["core/list"].map((e=>({name:e,settings:Je}))),Qe={name:"sme-ordered-list-circle",label:(0,b.__)("Ordered list (Circle)","snow-monkey-editor")},Xe=["core/list"].map((e=>({name:e,settings:Qe}))),Ye={name:"sme-ordered-list-square",label:(0,b.__)("Ordered list (Square)","snow-monkey-editor")},et=["core/list"].map((e=>({name:e,settings:Ye}))),tt={name:"sme-post-it",label:(0,b.__)("Post-it","snow-monkey-editor")},nt=["core/paragraph"].map((e=>({name:e,settings:tt}))),ot={name:"sme-post-it-narrow",label:(0,b.__)("Post-it (Narrow)","snow-monkey-editor")},rt=["core/paragraph"].map((e=>({name:e,settings:ot}))),st={name:"sme-shadowed",label:(0,b.__)("Shadowed","snow-monkey-editor")},at=["core/image","core/button"].map((e=>({name:e,settings:st}))),lt={name:"sme-speech",label:(0,b.__)("Speech (Bottom)","snow-monkey-editor")},it=["core/paragraph"].map((e=>({name:e,settings:lt}))),ct={name:"sme-speech-top",label:(0,b.__)("Speech (Top)","snow-monkey-editor")},mt=["core/paragraph"].map((e=>({name:e,settings:ct}))),ut={name:"sme-speech-right",label:(0,b.__)("Speech (Right)","snow-monkey-editor")},dt=["core/paragraph"].map((e=>({name:e,settings:ut}))),gt={name:"sme-speech-left",label:(0,b.__)("Speech (Left)","snow-monkey-editor")};[Re,Fe,Ne,Me,Te,Ie,$e,Le,He,Ze,Ue,We,Ke,Xe,et,nt,rt,at,it,mt,dt,["core/paragraph"].map((e=>({name:e,settings:gt})))].forEach((e=>{e.forEach((e=>(e=>{if(!e)return;const{name:t,settings:n}=e;(0,fe.registerBlockStyle)(t,n)})(e)))})),(0,_e.addFilter)("editor.BlockEdit","snow-monkey-editor/ordered-list/block-edit",(0,Ee.createHigherOrderComponent)((e=>t=>{const{attributes:n,name:o,clientId:r}=t,{start:s,reversed:a,ordered:l}=n;if("core/list"!==o)return(0,m.createElement)(e,{...t});const i=document.querySelector(`[data-block="${r}"].rich-text`);return i?i.classList.contains("is-style-sme-ordered-list-square")||i.classList.contains("is-style-sme-ordered-list-circle")?(i.style.counterReset=l?a?`sme-count ${s+1}`:"sme-count "+(s-1):"",(0,m.createElement)(e,{...t})):(i.style.counterReset="",(0,m.createElement)(e,{...t})):(0,m.createElement)(e,{...t})}),"withSnowMonkeyEditorOrderdListBlockEdit"));const pt=window.wp.preferences;const bt="snow-monkey-editor/preferences",ht=["allowedBlocks","content","templateLock","placeholder"],vt=e=>!(({name:e}={})=>!(0,fe.hasBlockSupport)(e,"snowmonkeyeditor.blockPresets"))(e)&&(!!function(e,t){if(!e||!Object.keys(e).length)return!1;const n=function(e){return(0,_e.applyFilters)("SnowMonkeyEditor.extension.allowedRoles",["administrator","editor","author","contributor"],e)}(t);return 0<e.roles.filter((e=>-1<n.indexOf(e))).length}(snowmonkeyeditor?.currentUser,"block-presets")&&!!(0,fe.getBlockType)(e.name)),yt=(0,Ee.createHigherOrderComponent)((e=>((0,k.dispatch)(pt.store).setDefaults(bt,{blockPresets:{}}),t=>{if(!vt(t))return(0,m.createElement)(e,{...t});const{name:n,attributes:o,setAttributes:r}=t,[s,a]=(0,C.useState)(void 0),[l,i]=(0,C.useState)(0),c=(0,k.useSelect)((e=>e(pt.store).get(bt,"blockPresets")),[]),u=c?.[n],p=(0,fe.getBlockSupport)(n,"snowmonkeyeditor.blockPresets"),h=p?.ignore||[],v=({blockName:e,presetName:t,preset:n})=>(0,m.createElement)("div",{className:"sme-editor-block-presets__preset"},(0,m.createElement)(g.Button,{onClick:()=>{const t=(0,fe.getBlockType)(e),o={};Object.keys(t.attributes).forEach((e=>{o[e]=void 0})),ht.forEach((e=>{delete o[e],delete n[e]})),h.forEach((e=>{delete o[e],delete n[e]})),r({...o,...n})},variant:"secondary"},t),(0,m.createElement)(g.Button,{label:(0,b.__)("Remove this preset","snow-monkey-editor"),onClick:()=>{const n={...c};delete n?.[e]?.[t],(0,k.dispatch)(pt.store).set(bt,"blockPresets",n),i(l+1)},variant:"tertiary"},"x"));return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(e,{...t}),(0,m.createElement)(d.InspectorControls,null,(0,m.createElement)(g.PanelBody,{title:(0,b.__)("Presets","snow-monkey-editor")},!!u&&!!Object.values(u)&&(0,m.createElement)("div",{className:"sme-editor-block-presets"},Object.values(u).map(((e,t)=>{const o=Object.keys(u)[t];return(0,m.createElement)(v,{blockName:n,presetName:o,preset:e,key:t})}))),(0,m.createElement)("div",{className:"sme-editor-block-presets-inserter"},(0,m.createElement)("h3",{className:"sme-editor-block-presets-inserter__title"},(0,b.__)("Save current settings as a preset","snow-monkey-editor")),(0,m.createElement)("div",{className:"sme-editor-block-presets-inserter__control"},(0,m.createElement)(g.TextControl,{value:s||"",placeholder:(0,b.__)("Input the preset name.","snow-monkey-editor"),onChange:e=>a(e)}),(0,m.createElement)(g.Button,{variant:"primary",disabled:!s,onClick:async()=>{const e={...o};ht.forEach((t=>{delete e[t]})),h.forEach((t=>{delete e[t]}));const t={...c,[n]:{...u,[s]:{...e}}};(0,k.dispatch)(pt.store).set(bt,"blockPresets",t),a(void 0)}},(0,b.__)("Save","snow-monkey-editor")))))))})),"withInspectorControl");(0,_e.addFilter)("editor.BlockEdit","snow-monkey-editor/block-presets/with-inspector-controls",yt,100),(0,_e.addFilter)("blocks.registerBlockType","snow-monkey-editor/block-presets/support",((e,t)=>{let n=!1;return"core/button"===t?n={ignore:["url","title","text","linkTarget","rel"]}:"core/cover"===t?n={ignore:["url"]}:"core/list"===t?n={ignore:["values"]}:"core/paragraph"!==t&&"core/group"!==t&&"core/columns"!==t&&"core/column"!==t&&"core/heading"!==t||(n=!0),!1===n?e:{...e,supports:{...e.supports,snowmonkeyeditor:{blockPresets:n}}}}))})()})();