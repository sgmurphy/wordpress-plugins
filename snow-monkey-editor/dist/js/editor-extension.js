(()=>{var e={655:(e,t)=>{var n;!function(){"use strict";var s=function(){function e(){}function t(e,t){for(var n=t.length,s=0;s<n;++s)o(e,t[s])}e.prototype=Object.create(null);var n={}.hasOwnProperty,s=/\s+/;function o(e,o){if(o){var r=typeof o;"string"===r?function(e,t){for(var n=t.split(s),o=n.length,r=0;r<o;++r)e[n[r]]=!0}(e,o):Array.isArray(o)?t(e,o):"object"===r?function(e,t){if(t.toString===Object.prototype.toString||t.toString.toString().includes("[native code]"))for(var s in t)n.call(t,s)&&(e[s]=!!t[s]);else e[t.toString()]=!0}(e,o):"number"===r&&function(e,t){e[t]=!0}(e,o)}}return function(){for(var n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];var r=new e;t(r,s);var a=[];for(var i in r)r[i]&&a.push(i);return a.join(" ")}}();e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React;var t=n(655),s=n.n(t);const o=window.wp.components,r=window.wp.blockEditor,a=window.wp.compose,i=window.wp.hooks,l=window.wp.i18n,m=window.lodash,d=window.wp.blocks,c=window.wp.element;function u(e,t){if("core/freeform"===e)return!1;const n=function(e){return(0,i.applyFilters)("SnowMonkeyEditor.extension.allowedNameSpaces",["core","snow-monkey-blocks"],e)}(t);return 0<n.filter((t=>0===e.indexOf(t))).length}function b(e,t){if(!e||!Object.keys(e).length)return!1;const n=function(e){return(0,i.applyFilters)("SnowMonkeyEditor.extension.allowedRoles",["administrator","editor","author","contributor"],e)}(t);return 0<e.roles.filter((e=>-1<n.indexOf(e))).length}const p=JSON.parse('{"smeIsHiddenSm":{"type":"boolean","default":false},"smeIsHiddenMd":{"type":"boolean","default":false},"smeIsHiddenLg":{"type":"boolean","default":false}}'),y={resetAll:{},hasValue:e=>0<(0,m.compact)([e.attributes?.smeIsHiddenSm,e.attributes?.smeIsHiddenMd,e.attributes?.smeIsHiddenLg]).length,resetValue:e=>{e.setAttributes({smeIsHiddenSm:p.smeIsHiddenSm.default,smeIsHiddenMd:p.smeIsHiddenMd.default,smeIsHiddenLg:p.smeIsHiddenLg.default})},resetClassnames:()=>({"sme-hidden-sm":p.smeIsHiddenSm.default,"sme-hidden-md":p.smeIsHiddenMd.default,"sme-hidden-lg-up":p.smeIsHiddenLg.default}),label:(0,l.__)("Display setting (By window size)","snow-monkey-editor"),isShown:e=>{if(!b(snowmonkeyeditor?.currentUser,"hidden-by-size"))return!1;if(!u(e.name,"hidden-by-size"))return!1;const t=(0,d.getBlockType)(e.name);return!!t&&!!(0,d.hasBlockSupport)(t,"customClassName",!0)},Content:t=>{const{attributes:n,setAttributes:r}=t,{smeIsHiddenSm:a,smeIsHiddenMd:i,smeIsHiddenLg:m,className:d}=n;return(0,c.useEffect)((()=>{r({className:s()(d,{"sme-hidden-sm":a,"sme-hidden-md":i,"sme-hidden-lg-up":m})})}),[a,i,m]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.ToggleControl,{label:(0,l.__)("Hide on smartphone size","snow-monkey-editor"),checked:a,onChange:e=>{r({smeIsHiddenSm:e})}}),(0,e.createElement)(o.ToggleControl,{label:(0,l.__)("Hide on tablet size","snow-monkey-editor"),checked:i,onChange:e=>{r({smeIsHiddenMd:e})}}),(0,e.createElement)(o.ToggleControl,{label:(0,l.__)("Hide on PC size","snow-monkey-editor"),checked:m,onChange:e=>{r({smeIsHiddenLg:e})}}))}},g=window.wp.data,w=JSON.parse('{"smeIsHiddenRoles":{"type":"array","default":[]}}'),f=window.wp.dataControls,k={roles:{}},h={setRoles:e=>({type:"SET_ROLES",roles:e}),*fetchRoles(){const e=yield(0,f.apiFetch)({path:"/snow-monkey-editor/v1/roles"});return h.setRoles(e)}},E={*getRoles(){yield h.fetchRoles()}},_=(0,g.createReduxStore)("snow-monkey-editor/roles",{reducer:(e=k,t)=>"SET_ROLES"===t.type?{...e,roles:t.roles}:e,actions:h,selectors:{getRoles:e=>e.roles},controls:f.controls,resolvers:E});(0,g.register)(_);const v={resetAll:{},hasValue:e=>!e.attributes?.smeIsHiddenRoles||0<e.attributes?.smeIsHiddenRoles.length,resetValue:e=>{e.setAttributes({smeIsHiddenRoles:w.smeIsHiddenRoles.default})},resetClassnames:e=>{const t=e.attributes?.smeIsHiddenRoles||[],n={};return t.forEach((e=>{n[`sme-hidden-by-role--${e}`]=!1})),n},label:(0,l.__)("Display setting (By roles)","snow-monkey-editor"),isShown:e=>!!b(snowmonkeyeditor?.currentUser,"hidden-by-role")&&(!!u(e.name,"hidden-by-role")&&!!(0,d.getBlockType)(e.name)),Content:t=>{const{attributes:n,setAttributes:r}=t,{smeIsHiddenRoles:a,className:i}=n,d=(()=>{const e=(0,g.useSelect)((e=>{const t={...e(_).getRoles()};return{"sme-guest":{name:(0,l.__)("user is not logged in","snow-monkey-editor")},...t}}),[]);let t={};return snowmonkeyeditor?.currentUser?.roles?.includes("administrator")?t={...e}:Object.keys(e).forEach(((n,s)=>{const o=snowmonkeyeditor?.currentUser?.roles?.includes(n);o||(t[n]=Object.values(e)[s])})),t})();return(0,c.useEffect)((()=>{const e={};Object.keys(d).forEach((t=>{e[`sme-hidden-by-role--${t}`]=!1})),a.forEach((t=>{e[`sme-hidden-by-role--${t}`]=!0})),r({className:s()(i,{...e})})}),[a]),(0,e.createElement)(e.Fragment,null,Object.keys(d).map((t=>{const n=(0,l.sprintf)(
// translators: %1$s: The role name
// translators: %1$s: The role name
(0,l.__)("Hide if %1$s","snow-monkey-editor"),d[t].name),s="object"==typeof a&&a.includes(t);return(0,e.createElement)(o.ToggleControl,{key:`sme-hidden-role-${t}`,label:n,checked:s,onChange:e=>{const n=((e,t)=>{let n=[...a];return!0===t?n.push(e):n=n.filter((t=>e!==t)),(0,m.uniq)(n)})(t,e);r({smeIsHiddenRoles:n})}})})))},Decorator:t=>{const{attributes:n,children:s}=t,{className:o,smeIsHiddenRoles:r=[]}=n;return o&&!snowmonkeyeditor?.currentUser?.roles?.includes("administrator")&&r.some((e=>snowmonkeyeditor?.currentUser?.roles?.includes(e)))?(0,e.createElement)("div",{className:"sme-hidden-by-role"},s):(0,e.createElement)(e.Fragment,null,s)}},A=JSON.parse('{"smeAnimation":{"type":"string"},"smeAnimationDelay":{"type":"number","default":0},"smeAnimationDuration":{"type":"number"}}'),C=[{label:"",value:void 0},{label:(0,l.__)("bounce-in","snow-monkey-editor"),value:"bounce-in"},{label:(0,l.__)("bounce-down","snow-monkey-editor"),value:"bounce-down"},{label:(0,l.__)("fade-in","snow-monkey-editor"),value:"fade-in"},{label:(0,l.__)("fade-in-up","snow-monkey-editor"),value:"fade-in-up"},{label:(0,l.__)("fade-in-down","snow-monkey-editor"),value:"fade-in-down"}],S={resetAll:{},hasValue:e=>!!e.attributes?.smeAnimation,resetValue:e=>{e.setAttributes({smeAnimation:A.smeAnimation.default,smeAnimationDelay:A.smeAnimationDelay.default,smeAnimationDuration:A.smeAnimationDuration.default})},resetClassnames:e=>{const t={};return null!=e.attributes?.smeAnimation&&(t[`sme-animation-${e.attributes.smeAnimation}`]=!1),t},label:(0,l.__)("Animation","snow-monkey-editor"),isShown:e=>{if(!b(snowmonkeyeditor?.currentUser,"animation"))return!1;if(!u(e.name,"animation"))return!1;const t=(0,d.getBlockType)(e.name);return!!t&&!!(0,d.hasBlockSupport)(t,"customClassName",!0)},Content:t=>{const{attributes:n,setAttributes:r}=t,{smeAnimation:a,smeAnimationDelay:i,smeAnimationDuration:m,className:d}=n;return(0,c.useEffect)((()=>{const e={};C.forEach((t=>{e[`sme-animation-${t.value}`]=!1})),a&&(e[`sme-animation-${a}`]=!0),r({className:s()(d,{...e})})}),[a]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.SelectControl,{label:(0,l.__)("Animation","snow-monkey-editor"),value:a||void 0,options:C,onChange:e=>{r({smeAnimation:e}),e||r({smeAnimationDelay:A.smeAnimationDelay.default})}}),(0,e.createElement)(o.RangeControl,{label:(0,l.__)("Delay","snow-monkey-editor"),value:i||0,onChange:e=>{r({smeAnimationDelay:e})},allowReset:!0,min:0,max:5,step:.1}),(0,e.createElement)(o.RangeControl,{label:(0,l.__)("Duration","snow-monkey-editor"),value:m||void 0,onChange:e=>{r({smeAnimationDuration:e})},allowReset:!0,min:0,max:5,step:.1}))}},I=JSON.parse('{"smeStartDateTime":{"type":"string"},"smeEndDateTime":{"type":"string"}}'),D=window.wp.date;function H({currentDate:t,onChange:n,onReset:s}){const r=(0,D.getSettings)(),a=/a(?!\\)/i.test(r.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return(0,e.createElement)("div",{className:"sme-date-time-picker"},(0,e.createElement)(o.DateTimePicker,{currentDate:t,onChange:n,is12Hour:a}),(0,e.createElement)("div",{className:"sme-date-time-picker__action"},(0,e.createElement)("div",null,t),(0,e.createElement)(o.Button,{isSmall:!0,onClick:s},(0,l.__)("Clear","snow-monkey-editor"))))}const R=e=>!!b(snowmonkeyeditor?.currentUser,"date-time")&&(!!u(e.name,"date-time")&&!!(0,d.getBlockType)(e.name)),x={resetAll:{},hasValue:e=>!!e.attributes?.smeStartDateTime,resetValue:e=>e.setAttributes({smeStartDateTime:void 0}),label:(0,l.__)("Publish setting","snow-monkey-editor"),isShown:R,Content:t=>{const{attributes:n,setAttributes:s}=t,{smeStartDateTime:o}=n;return(0,e.createElement)(H,{currentDate:o,onChange:e=>s({smeStartDateTime:e}),onReset:()=>s({smeStartDateTime:void 0})})}},N={resetAll:{},hasValue:e=>!!e.attributes?.smeEndDateTime,resetValue:e=>e.setAttributes({smeEndDateTime:void 0}),label:(0,l.__)("Unpublish setting","snow-monkey-editor"),isShown:R,Content:t=>{const{attributes:n,setAttributes:s}=t,{smeEndDateTime:o}=n;return(0,e.createElement)(H,{currentDate:o,onChange:e=>s({smeEndDateTime:e}),onReset:()=>s({smeEndDateTime:void 0})})}},T=JSON.parse('{"smeIsEditingLockRoles":{"type":"array","default":[]}}'),O=e=>0<(0,m.intersection)(e.attributes.smeIsEditingLockRoles,snowmonkeyeditor?.currentUser?.roles).length,B={resetAll:{},hasValue:e=>!e.attributes?.smeIsEditingLockRoles||0<e.attributes?.smeIsEditingLockRoles.length,resetValue:e=>e.setAttributes({smeIsEditingLockRoles:[]}),label:(0,l.__)("Editing lock (By roles)","snow-monkey-editor"),isShown:e=>!!b(snowmonkeyeditor?.currentUser,"editing-lock")&&(!!u(e.name,"editing-lock")&&(!!(0,m.includes)(snowmonkeyeditor?.currentUser?.roles,"administrator")&&!!(0,d.getBlockType)(e.name))),Content:t=>{const{attributes:n,setAttributes:s,clientId:r}=t,{smeIsEditingLockRoles:a}=n,i=(0,g.useSelect)((e=>{const t={...e(_).getRoles()};return delete t.administrator,Object.keys(t).forEach((e=>{!0!==t[e].capabilities.edit_posts&&delete t[e]})),t}),[]),d=document.getElementById(`block-${r}`);if(d)if(O(t)){const e=d.getAttribute("tabindex");e&&(d.setAttribute("data-sme-tabindex",e),d.setAttribute("tabindex",-1))}else{const e=d.getAttribute("tabindex"),t=d.getAttribute("data-sme-tabindex");e&&t&&(d.setAttribute("tabindex",t),d.removeAttribute("data-sme-tabindex"))}return(0,e.createElement)(e.Fragment,null,Object.keys(i).map((t=>{const n=(0,l.sprintf)(
// translators: %1$s: The role name
// translators: %1$s: The role name
(0,l.__)("Edit lock if %1$s","snow-monkey-editor"),i[t].name),r="object"==typeof a&&a.includes(t);return(0,e.createElement)(o.ToggleControl,{key:`sme-editing-lock-role-${t}`,label:n,checked:r,onChange:e=>{const n=((e,t)=>{let n=[...a];return!0===t?n.push(e):n=n.filter((t=>e!==t)),(0,m.uniq)(n)})(t,e);s({smeIsEditingLockRoles:n})}})})))},Decorator:t=>O(t)?(0,e.createElement)(o.Disabled,null,t.children):(0,e.createElement)(e.Fragment,null,t.children)},j=(0,e.createElement)("svg",{role:"img",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},(0,e.createElement)("path",{d:"M13.982,16.711c-0.744,1.441 -2.248,2.428 -3.982,2.428c-1.735,0 -3.238,-0.986 -3.983,-2.428c0.909,-1.213 2.355,-2.002 3.983,-2.002c1.629,0 3.074,0.789 3.982,2.002Zm-0.748,-7.657c-0.314,2.56 1.248,2.919 1.248,5.603c0,0.467 -0.072,0.918 -0.205,1.344c-1.037,-1.203 -2.57,-1.967 -4.277,-1.967c-1.708,0 -3.24,0.764 -4.277,1.967c-0.133,-0.426 -0.205,-0.877 -0.205,-1.344c0,-2.684 1.563,-3.043 1.247,-5.603c-0.362,-2.928 -4.315,-2.465 -4.315,-5.334c0,-1.579 1.279,-2.858 2.858,-2.858c1.709,0 2.765,1.558 4.692,1.558c1.926,0 2.982,-1.558 4.691,-1.558c1.578,0 2.857,1.279 2.857,2.858c0.001,2.869 -3.952,2.406 -4.314,5.334Zm-4.677,-4.947l-0.708,0c0,0.498 -0.403,0.9 -0.901,0.9c-0.498,0 -0.901,-0.402 -0.901,-0.9l-0.708,0c0,0.889 0.72,1.609 1.609,1.609c0.889,0 1.609,-0.72 1.609,-1.609Zm0.979,7.141c0,-0.312 -0.253,-0.568 -0.566,-0.568c-0.313,0 -0.567,0.256 -0.567,0.568c0,0.312 0.254,0.566 0.567,0.566c0.313,0 0.566,-0.253 0.566,-0.566Zm2.062,0c0,-0.312 -0.254,-0.568 -0.568,-0.568c-0.312,0 -0.566,0.256 -0.566,0.568c0,0.312 0.254,0.566 0.566,0.566c0.314,0 0.568,-0.253 0.568,-0.566Zm3.062,-7.141l-0.707,0c0,0.498 -0.404,0.9 -0.9,0.9c-0.498,0 -0.902,-0.402 -0.902,-0.9l-0.707,0c0,0.889 0.721,1.609 1.609,1.609c0.886,0.001 1.607,-0.72 1.607,-1.609Z"})),L=[y,v,S,x,N,B],U=(0,a.createHigherOrderComponent)((t=>n=>{const a=L.some((e=>e.isShown(n)));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,{...n}),a&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.__experimentalToolsPanel,{label:(0,l.__)("Snow Monkey Editor","snow-monkey-editor"),resetAll:()=>{L.forEach((e=>e.resetValue(n)));let e={};L.forEach((t=>{t?.resetClassnames&&(e={...e,...t.resetClassnames(n)})})),0<Object.values(e).length&&n.setAttributes({className:s()(n.attributes.className,{...e})})},className:"color-block-support-panel sme-extension-tools-panel"},(0,e.createElement)("div",{className:"color-block-support-panel__inner-wrapper",style:{gridColumn:"1 / -1"}},L.map(((t,r)=>t.isShown(n)&&(0,e.createElement)(o.__experimentalToolsPanelItem,{key:r,isShownByDefault:!1,hasValue:()=>!!t.hasValue(n),onDeselect:()=>{if(t.resetValue(n),t?.resetClassnames){const e={...t.resetClassnames(n)};n.setAttributes({className:s()(n.attributes.className,{...e})})}},label:t.label,className:s()("block-editor-tools-panel-color-gradient-settings__item",{first:0===r})},(0,e.createElement)(o.Dropdown,{popoverProps:{className:"sme-popover",placement:"left-start",offset:36,shift:!0},className:s()("block-editor-tools-panel-color-gradient-settings__dropdown","sme-extension-panel",{"sme-extension-panel--enabled":t.hasValue(n)}),renderToggle:({isOpen:n,onToggle:s})=>(0,e.createElement)(o.Button,{onClick:s,"aria-expanded":n,className:"block-editor-panel-color-gradient-settings__dropdown"},t.label,(0,e.createElement)(o.Icon,{icon:j,className:"components-panel__icon",size:20})),renderContent:()=>(0,e.createElement)(o.__experimentalDropdownContentWrapper,{paddingSize:"none"},(0,e.createElement)("div",{className:"sme-popover__title"},t.label),(0,e.createElement)("fieldset",null,(0,e.createElement)(t.Content,{...n})))}))))))))}),"addBlockControl");(0,i.addFilter)("blocks.registerBlockType","snow-monkey-editor/attributes",(e=>{var t;return t=e,(e=>b(snowmonkeyeditor?.currentUser,"editing-lock")&&u(e.name,"editing-lock")?(e.attributes={...e.attributes,...T},e):e)(e=(e=>b(snowmonkeyeditor?.currentUser,"date-time")&&u(e.name,"date-time")?(e.attributes={...e.attributes,...I},e):e)(e=(e=>b(snowmonkeyeditor?.currentUser,"animation")&&u(e.name,"animation")?(e.attributes={...e.attributes,...A},e):e)(e=(e=>b(snowmonkeyeditor?.currentUser,"hidden-by-role")&&u(e.name,"hidden-by-role")?(e.attributes={...e.attributes,...w},e):e)(e=b(snowmonkeyeditor?.currentUser,"hidden-by-size")&&u(t.name,"hidden-by-size")?(t.attributes={...t.attributes,...p},t):t))))})),(0,i.addFilter)("editor.BlockEdit","snow-monkey-editor/block-control",U,101),L&&L.forEach(((t,n)=>{(0,i.addFilter)("editor.BlockEdit",`snow-monkey-editor/block-edit-${n}`,(0,a.createHigherOrderComponent)((n=>s=>{const o=t?.Decorator;return o?(0,e.createElement)(o,{...s},(0,e.createElement)(n,{...s})):(0,e.createElement)(n,{...s})})))}))})()})();