(function () {
  'use strict';

  function _typeof(o) {
    "@babel/helpers - typeof";

    return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
      return typeof o;
    } : function (o) {
      return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
    }, _typeof(o);
  }

  function addConsentModeTableToPage(){var e,t=nscBarConsentType;try{e=JSON.parse(getHiddenInputField().value);}catch(e){}"object"===_typeof(e)&&null!==e||(e={}),generateTable([{coMoCategory:"analytics_storage",name:"analytics_storage* granted for"},{coMoCategory:"ad_storage",name:"ad_storage* granted for"},{coMoCategory:"ad_personalization",name:"ad_personalization* granted for"},{coMoCategory:"ad_user_data",name:"ad_user_data* granted for"},{coMoCategory:"functionality_storage",name:"functionality_storage granted for"},{coMoCategory:"personalization_storage",name:"personalization_storage granted for"},{coMoCategory:"security_storage",name:"security_storage granted for"}],e,t);}function generateTable(e,t,a){var o,n="nsc_bar_consentmode_table";try{o=document.querySelector("#".concat("ff_nsc_bar_consentModeConfig"));}catch(e){}if(o){var r=document.createElement("table");r.classList.add(n),r.setAttribute("id",n);var i=(r=generateTableHead(r)).createTBody();generateHelperRow(a);var d=!0;e.forEach((function(e){var o=i.insertRow(),n=d?"nsc_bar_first":"nsc_bar_second";o.classList.add(n);var r=createTableHead(e.name);r.classList.add("nsc_bar_comocat"),o.appendChild(r);for(var c=getCookieSuffixes(a),l=0;l<c.length;l+=1){var s=o.insertCell(),u=isChecked(e.coMoCategory,t,c[l].suffix),C=createCheckbox("".concat(c[l].suffix),"".concat(e.coMoCategory),u,c[l].title);if(s.setAttribute("id","grantedFor_".concat(e.coMoCategory,"_").concat(c[l].suffix)),s.classList.add("consentModeTableCell"),s.setAttribute("aria-label","".concat(c[l].title)),s.appendChild(C),l!==c.length-1){var f=o.insertCell();f.classList.add("consentModeTableCell"),f.classList.add("consentModeTableMidCell"),f.innerText="or";}}d=!d;}));var c=document.createElement("div");c.innerHTML="* = required",o.parentNode.appendChild(r),o.parentNode.appendChild(c);}}function isChecked(e,t,a){return !(!t[e]||!Array.isArray(t[e]))&&t[e].includes(a)}function generateHelperRow(e){var t=document.querySelector("#tr_consentModeConfig > td > fieldset > .description"),a='<div id="comoComplianceType">Current Compliance Type: '.concat(e,"</div>");"detailed"!==e&&"detailedRev"!==e&&"detailedRevDeny"!==e||(a="".concat(a,'<div>If a CoMo category is enabled for a specific cookie type, the CoMo Category will be updated to granted, as soon the user allows this cookie type.</div><div> It will be default granted, if this cookie type is configured as "default checked" in tab "Compliance & Behaviour".</div>')),"info"===e&&(a="".concat(a,"<div>If a CoMo category is enabled, the CoMo Category will be granted per default.</div>")),"opt-in"===e&&(a="".concat(a,'<div>If a CoMo category is enabled for opt-in, the CoMo Category will be updated to granted, as soon the user allows cookies. The CoMo Category default is "denied".</div><div>If you want "granted" per default for a CoMo Category you need to enable both toggles.</div>')),"opt-out"===e&&(a="".concat(a,'<div>If a CoMo category is enabled for opt-in/default, the CoMo Category default is "granted". </div><div>Normally you want to leave the "opt-out" toggles DISABLED. If you enable it, the CoMo Category will be granted, if user denies cookies, which does not make sense.</div>'));var o=document.createElement("div");o.setAttribute("id","nsc_bar_helper_text_consent_mode"),o.classList.add("nsc_bar_helper_text_consent_mode_cell"),o.appendChild(createInformationVariantCircleOutlineSvg());var n=document.createElement("div");n.innerHTML=a,o.appendChild(n),t.appendChild(o);}function generateTableHead(e){var t=e.createTHead().insertRow(),a=!0;return ["Consent Mode (CoMo) category"].forEach((function(e){var o=createTableHead(e);!0===a&&o.setAttribute("colspan",4),t.appendChild(o),a=!1;})),e}function createTableHead(e){var t=document.createElement("th"),a=document.createTextNode(e);return t.appendChild(a),t}function createCheckbox(e,t,a,o){var n=document.createElement("input");n.type="checkbox",n.id="".concat(t,"_").concat(e),n.checked=a,n.className="toggle-checkbox",n.value=e,n.setAttribute("data-comoCat",t),n.onclick=buildHiddenInputJSON;var r=document.createElement("label");r.htmlFor="".concat(t,"_").concat(e),r.classList.add("toggle-label");var i=document.createElement("span");i.classList.add("como-toggle-label-text"),i.innerText="".concat(o),r.appendChild(i);var d=document.createElement("div");return d.className="toggle-container",d.appendChild(n),d.appendChild(r),d}function buildHiddenInputJSON(){for(var e={},t=document.querySelectorAll("#nsc_bar_consentmode_table > tbody > tr"),a=0;a<t.length;a+=1)for(var o=t[a].getElementsByClassName("toggle-checkbox"),n=0;n<o.length;n+=1){var r=o[n];if(r.checked){var i=r.dataset.comocat;e[i]=e[i]||[],e[i].push(r.value);}}getHiddenInputField().value=JSON.stringify(e);}function getCookieSuffixes(e){var t=[];if("detailed"===e||"detailedRev"===e||"detailedRevDeny"===e)for(var a=0;a<nscBarCookieTypes.length;a+=1)t.push({suffix:nscBarCookieTypes[a].cookie_suffix,title:nscBarCookieTypes[a].cookie_suffix});if("newBanner"===e)for(var o=Object.entries(nscBarCookieTypes),n=0;n<o.length;n+=1)t.push({suffix:o[n][1].id,title:o[n][1].id});return "info"===e&&t.push({suffix:"allow",title:""}),["opt-out"].includes(e)&&(t.push({suffix:"allow",title:"opt-in/default"}),t.push({suffix:"deny",title:"opt-out"})),["opt-in"].includes(e)&&(t.push({suffix:"allow",title:"opt-in"}),t.push({suffix:"deny",title:"opt-out/default"})),t}function getHiddenInputField(){var e;try{e=document.getElementById("ff_nsc_bar_consentModeConfig");}catch(t){console.error("Could not get hidden input field.",e);}return e}function createInformationVariantCircleOutlineSvg(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("width","30"),t.setAttribute("height","30");var a=document.createElementNS(e,"title");a.textContent="information-variant-circle-outline",t.appendChild(a);var o=document.createElementNS(e,"path");return o.setAttribute("d","M12.3 7.29C12.5 7.11 12.74 7 13 7C13.27 7 13.5 7.11 13.71 7.29C13.9 7.5 14 7.74 14 8C14 8.27 13.9 8.5 13.71 8.71C13.5 8.9 13.27 9 13 9C12.74 9 12.5 8.9 12.3 8.71C12.11 8.5 12 8.27 12 8C12 7.74 12.11 7.5 12.3 7.29M9.8 11.97C9.8 11.97 11.97 10.25 12.76 10.18C13.5 10.12 13.35 10.97 13.28 11.41L13.27 11.47C13.13 12 12.96 12.64 12.79 13.25C12.41 14.64 12.04 16 12.13 16.25C12.23 16.59 12.85 16.16 13.3 15.86C13.36 15.82 13.41 15.78 13.46 15.75C13.46 15.75 13.54 15.67 13.62 15.78C13.64 15.81 13.66 15.84 13.68 15.86C13.77 16 13.82 16.05 13.7 16.13L13.66 16.15C13.44 16.3 12.5 16.96 12.12 17.2C11.71 17.47 10.14 18.37 10.38 16.62C10.59 15.39 10.87 14.33 11.09 13.5C11.5 12 11.68 11.32 10.76 11.91C10.39 12.13 10.17 12.27 10.04 12.36C9.93 12.44 9.92 12.44 9.85 12.31L9.82 12.25L9.77 12.17C9.7 12.07 9.7 12.06 9.8 11.97M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12M20 12C20 7.58 16.42 4 12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12Z"),t.appendChild(o),t}

  function addListenerForAlreadyReviewed(){var e=document.getElementById("nsc_bar_notice_reviewedAlready");e&&e.addEventListener("click",saveReviewSetting);}function saveReviewSetting(){var e=document.getElementById("nsc_bar_notice_reviewedAlready");e.disabled=!0,e.innerHTML="thank you, saving...";var n=new XMLHttpRequest;n.withCredentials=!0,n.addEventListener("readystatechange",(function(){4===this.readyState&&(document.getElementById("nsc_bar_notice_please_rate").style.display="none");})),n.open("POST","".concat(nscBarAdminJsVars.restURL,"beautiful-and-responsive-cookie-consent/v1/admin-notices")),n.setRequestHeader("_wpnonce",nscBarAdminJsVars.nonce),n.setRequestHeader("X-WP-Nonce",nscBarAdminJsVars.nonce),n.send("");}

  function addListenerForNewBannerToggle(){var e=document.getElementById("nsc_bar_new_banner_selector");e&&e.addEventListener("change",saveBannerSelect);}function saveBannerSelect(){var e=document.getElementById("nsc_bar_new_banner_selector").value,n=["banner-1","banner-2"];if(!n.includes(e))throw new Error("allowed values are only: ".concat(JSON.stringify(n)));var a=new XMLHttpRequest;a.withCredentials=!0,a.addEventListener("readystatechange",(function(){if(4===this.readyState){var e=new URL(document.location.href);e.searchParams.set("nsc_bara_language_selector","xx"),e.searchParams.set("tab","new_banner"),window.location.href=e.toString();}})),a.open("POST","".concat(nscBarAdminJsVars.restURL,"beautiful-and-responsive-cookie-consent/v1/banner/select/").concat(e)),a.setRequestHeader("_wpnonce",nscBarAdminJsVars.nonce),a.setRequestHeader("X-WP-Nonce",nscBarAdminJsVars.nonce),a.send("");}

  document.addEventListener("DOMContentLoaded",addConsentModeTableToPage),document.addEventListener("DOMContentLoaded",addListenerForAlreadyReviewed),document.addEventListener("DOMContentLoaded",addListenerForNewBannerToggle);

})();
