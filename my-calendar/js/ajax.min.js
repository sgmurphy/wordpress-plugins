(()=>{(function(e){e(function(){e(".mc_response").hide(),e(".instance-list").on("click","button.delete_occurrence",function(){let t=e(this).attr("data-value"),n=e(this).attr("data-event"),a=e(this).attr("data-begin"),c=e(this).attr("data-end"),i={action:mc_data.action,occur_id:t,event_id:n,occur_begin:a,occur_end:c,security:mc_data.security};e.post(ajaxurl,i,function(s){s.success==1&&e("button[data-value='"+t+"']").parents("li").hide(),e(".mc_response").text(s.response).show(300)},"json")}),e(".mc_add_new").hide(),e("button.add-occurrence").on("click",function(){e(this).attr("aria-expanded")=="true"?(e(this).attr("aria-expanded","false").find(".dashicons").addClass("dashicons-plus").removeClass("dashicons-minus"),e(this).attr("data-action","shiftback")):(e(this).attr("aria-expanded","true").find(".dashicons").addClass("dashicons-minus").removeClass("dashicons-plus"),e(this).attr("data-action","")),e(".mc_add_new").toggle()}),e("button.save-occurrence").on("click",function(){let t=e("#r_begin").val(),n=e("#r_time").val(),a=e("#r_endtime").val(),c=e("#r_enddate").val(),i=e('input[name="event_id"]').val(),s=e('input[name="event_group_id"]').val(),u={action:mc_data.recur,event_id:i,group_id:s,event_date:t,event_time:n,event_endtime:a,event_enddate:c,security:mc_data.security};e.post(ajaxurl,u,function(d){if(d.success==1){let o=n.split(":"),l=o[0]+":"+o[1],_=mc_data.url+d.id,v=typeof c>"u"?t:c;e(".instance-list").append('<li class="new"><p><span id="occur_date_'+d.id+'"><strong>Added:</strong> '+t+" @ "+l+'</span></p><p class="instance-buttons"><button class="button delete_occurrence" type="button" data-event="'+i+'" data-begin="'+t+" "+n+'" data-end="'+v+" "+a+'" data-value="'+d.id+'" aria-describedby="occur_date_'+d.id+'">Delete</button> <a href="'+_+'" class="button">Edit</a></p></li>')}e(".mc_response").text(d.response).show(300)},"json")}),e("#e_recur, #e_every").on("change",function(){let t=e("#e_recur").val(),n=e("#e_every").val(),a=e("duet-date-picker[identifier=e_repeats]").val(),c={action:mc_recur.action,until:a,every:n,recur:t,security:mc_recur.security};e.post(ajaxurl,c,function(i){i.response===""?(e(".mc_recur_string").removeClass("active"),e(".mc_recur_string p").text("")):(e(".mc_recur_string").addClass("active"),e(".mc_recur_string p").text(i.response).show(300))},"json")});let r=document.querySelector("duet-date-picker[identifier=e_repeats]");r!==null&&r.addEventListener("duetChange",function(t){let n=t.detail.value,a=e("#e_recur").val(),c=e("#e_every").val(),i={action:mc_recur.action,until:n,every:c,recur:a,security:mc_recur.security};e.post(ajaxurl,i,function(s){e(".mc_recur_string").addClass("active"),e(".mc_recur_string p").text(s.response).show(300)},"json")})}),e(function(){e("button.add-category").on("click",function(){let r=e("#event_category_name").val();if(r!==""){let t={action:mc_cats.action,category_name:r,security:mc_cats.security};e.post(ajaxurl,t,function(n){if(n.success==1){let a=n.category_id;e("#event_category_name").val(""),e('<li class="new"><input type="checkbox" name="event_category[]" id="mc_cat_'+a+'" value="'+a+'" checked> <label for="mc_cat_'+a+'">'+r+"</label></li>").insertBefore(".categories .event-new-category"),e("#e_category").append('<option value="'+a+'">'+r+"</option>")}},"json")}})})})(jQuery);})();
