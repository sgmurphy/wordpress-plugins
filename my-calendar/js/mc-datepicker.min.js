(()=>{window.addEventListener("load",function(){m()});window.customElements.whenDefined("duet-date-picker").then(()=>{elem=document.querySelectorAll(".duet-fallback"),elem.forEach(l=>{l.parentNode.removeChild(l)})});function m(){Array.prototype.slice.apply(document.querySelectorAll("duet-date-picker")).forEach(t=>{let i=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,n;t.dateAdapter={parse(e="",d){let u=e.match(i);if(u)return d(u[3],u[1],u[2])},format(e){switch(duetFormats.date){case"Y-m-d":return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;case"m/d/Y":return`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()}`;case"d-m-Y":return`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`;case"j F Y":return n=Intl.DateTimeFormat("en-US",{month:"long"}).format(e),`${e.getDate()} ${n} ${e.getFullYear()}`;case"M j, Y":return n=Intl.DateTimeFormat("en-US",{month:"short"}).format(e),`${e.getDate()} ${n}, ${e.getFullYear()}`;default:return`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`}}},t.localization=duetLocalization});let c=document.querySelector("duet-date-picker[identifier=mc_event_date]"),r=document.querySelector("duet-date-picker[identifier=r_begin]"),a=document.querySelector("duet-date-picker[identifier=mc_event_enddate]"),o=document.querySelector('input[name="event_end[]"]');c!==null&&(r!==null&&r.addEventListener("duetChange",function(t){let i=t.detail.value,n=o.value,e=document.querySelector('input[name="recur_end[]"').value,d=document.querySelector('[identifier="r_end"]');e!==""&&i>e&&(d.value=t.detail.value),s(n,i)}),c.addEventListener("duetChange",v),a.addEventListener("duetChange",f))}function f(l){let c=document.querySelector('input[name="event_begin[]"]'),r=document.querySelector(".disable-recurrences"),a=l.detail.value,o=c.value;if(r!==null){let t=r.querySelector("fieldset"),i=r.querySelector(".dashicons"),n=r.querySelectorAll("fieldset input, fieldset select, fieldset duet-date-picker");t.setAttribute("style",""),r.querySelector(".enable-repetition").setAttribute("aria-expanded","true"),i.classList.add("dashicons-arrow-down"),i.classList.remove("dashicons-arrow-right"),n.forEach(e=>{e.disabled=!1})}s(a,o)}function v(l){let c=document.querySelector('input[name="event_end[]"]'),r=document.querySelector("duet-date-picker[identifier=mc_event_enddate]"),a=document.querySelector(".disable-recurrences"),o=l.detail.value,t=c.value;if((t==""||o>t)&&(r.value=l.detail.value,t=l.detail.value),a!==null){let i=a.querySelector("fieldset"),n=a.querySelector(".dashicons"),e=a.querySelectorAll("fieldset input, fieldset select, fieldset duet-date-picker");i.setAttribute("style",""),a.querySelector(".enable-repetition").setAttribute("aria-expanded","true"),n.classList.add("dashicons-arrow-down"),n.classList.remove("dashicons-arrow-right"),e.forEach(d=>{d.disabled=!1})}s(t,o)}function s(l,c){let r=document.querySelector("#event_date_error"),a=document.querySelector("#my-calendar .button-primary"),o=document.querySelectorAll("#e_recur option");if(!(l&&c))return;let t=new Date(l),i=new Date(c),n=(t-i)/1e3;o&&o.forEach(e=>{e.getAttribute("data-period")<n?e.setAttribute("disabled","true"):e.removeAttribute("disabled")}),new Date(t)<i?(r.classList.add("visible"),a.disabled=!0):(r.classList.remove("visible"),a.disabled=!1)}})();
