(window.webpackJsonp=window.webpackJsonp||[]).push([[49,9,16],{237:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(119),l=n(322),c=n(14),i=n(1),o=n(124),s=n(370),u=n(350);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e,t,n){return decodeURIComponent(Object(c.f)(e,t,n))};t.default=function(e){var t=e.type,n=void 0===t?"landing":t,d=Object(c.i)().funnel_id,m=Object(a.useParams)(),p=m.stepId,O=m.stepType,j=void 0===O?"design":O,v={design:{name:Object(i.__)("Design","funnel-builder"),link:f({},"/funnel-landing/".concat(p,"/design"))},settings:{name:Object(i.__)("Settings","funnel-builder"),link:f({},"/funnel-landing/".concat(p,"/settings"))}};return Object(l.a)({selected:j,headerData:v,funnelID:d,stepId:p,type:n}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(a.Switch,null,Object(r.createElement)(a.Route,{path:["/funnel-landing/:stepId/design"],render:function(e){return Object(r.createElement)(s.a,b({type:n,funnelID:d},e))}}),Object(r.createElement)(a.Route,{path:["/funnel-landing/:stepId/settings"],render:function(e){return Object(r.createElement)(u.a,b({type:n,funnelID:d},e))}}),Object(r.createElement)(a.Route,{component:o.a})))}},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),a=n(2),l=n(6),c=n.n(l),i=n(52),o=n(9),s=(n(273),n(24)),u=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled"];function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e){var t=e.label,n=e.className,l=e.selected,d=e.help,m=e.onChange,p=e.hideLabelFromVision,O=e.options,j=void 0===O?[]:O,v=e.disabled,_=void 0!==v&&v,y=(b(e,u),Object(i.useInstanceId)(f)),h="inspector-radio-control-".concat(y),w=function(e){return m(e.target.value)};return!Object(a.isEmpty)(j)&&Object(r.createElement)(o.BaseControl,{label:t,id:h,hideLabelFromVision:p,help:d,className:c()(n,"components-radio-control bwf-components-radio-control")},Object(r.createElement)("div",{className:"bwf-radio-control-inner"},j.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(h,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(h,"-").concat(t),className:"components-radio-control__input",type:"radio",name:h,value:e.value,onChange:w,checked:e.value===l,disabled:_||e.disabled||e.isPro,"aria-describedby":d?"".concat(h,"__help"):void 0}),e.isPro&&Object(r.createElement)(s.a,null),Object(r.createElement)("label",{htmlFor:"".concat(h,"-").concat(t)},e.label))}))))}},249:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(17),c=n.n(l);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){b(l,r,a,c,i,"next",e)}function i(e){b(l,r,a,c,i,"throw",e)}c(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(o,e);var t,n,a,l,c,i=p(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).state={values:e.initialValues,errors:e.errors,touched:e.touched},t.getInputProps=t.getInputProps.bind(j(t)),t.handleSubmit=t.handleSubmit.bind(j(t)),t.setTouched=t.setTouched.bind(j(t)),t.setValue=t.setValue.bind(j(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.validate()}},{key:"componentWillUnmount",value:function(){this.validate((function(){}))}},{key:"componentDidUpdate",value:function(e,t){this.props.initialValues&&this.props.initialValues!==e.initialValues&&this.setState({values:this.props.initialValues})}},{key:"isValidForm",value:(c=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validate();case 2:return e.abrupt("return",!Object.keys(this.state.errors).length);case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"validate",value:function(){var e=this.state.values,t=this.props.validate(e);this.setState({errors:t})}},{key:"setFormValue",value:function(e){console.log(this),this.setState({values:e})}},{key:"setValue",value:function(e,t){var n=this;this.setState((function(n){return{values:s(s({},n.values),{},u({},e,t))}}),(function(){var r=n.props,a=r.onChange;r.onChangeCallback,a({name:e,value:t},n.state.values,!Object.keys(n.state.errors||{}).length,n.setFormValue),n.validate((function(){}))}))}},{key:"setTouched",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState((function(n){return{touched:s(s({},n.touched),{},u({},e,t))}}))}},{key:"handleChange",value:function(e,t){var n=this.state.values;t.target?"checkbox"===t.target.type?this.setValue(e,!n[e]):this.setValue(e,t.target.value):this.setValue(e,t)}},{key:"handleBlur",value:function(e){this.setTouched(e)}},{key:"handleSubmit",value:(l=f(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.values,n={},Object.keys(t).map((function(e){return n[e]=!0})),this.setState({touched:n}),e.next=6,this.isValidForm();case 6:if(!e.sent){e.next=8;break}this.props.onSubmitCallback(t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getInputProps",value:function(e){var t=this,n=this.state,r=n.errors,a=n.touched,l=n.values;return s(s({value:l[e],checked:Boolean(l[e]),selected:l[e],onChange:function(n){return t.handleChange(e,n)},onBlur:function(){return t.handleBlur(e)}},a[e]&&r[e]&&{className:"has-error"}),{},{help:a[e]?r[e]:null})}},{key:"getStateAndHelpers",value:function(){var e=this.state,t=e.values,n=e.errors;return{values:t,errors:n,touched:e.touched,setTouched:this.setTouched,setValue:this.setValue,handleSubmit:this.handleSubmit,getInputProps:this.getInputProps,isValidForm:!Object.keys(n).length}}},{key:"render",value:function(){var e=this.props.children(this.getStateAndHelpers());return Object(r.cloneElement)(e)}}])&&d(t.prototype,n),a&&d(t,a),o}(r.Component);_.propTypes={children:c.a.any,errors:c.a.object,initialValues:c.a.object.isRequired,onSubmitCallback:c.a.func,validate:c.a.func},_.defaultProps={errors:{},initialValues:{},onSubmitCallback:a.noop,touched:{},validate:a.noop,onChange:function(){}},t.a=_},250:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),a=n(6),l=n.n(a),c=(n(261),["className","onChange","label","color","disabled"]);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e){var t=e.className,n=e.onChange,a=e.label,s=e.color,b=e.disabled,f=u(e,c),d=o(Object(r.useState)(!0),2),m=d[0],p=d[1],O=Object(r.useRef)();return Object(r.createElement)("div",{className:l()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",i({type:"checkbox"},f,{onChange:function(e){b||(n(e.target.checked),p(!1))},ref:O,className:l()({"bwf-no-animation":m,"bwf-disable":b}),style:{"--current-checkbox-color":s}}))),a&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(b?"bwf-disable":""),onClick:function(){return O.current.click()}},a))}},251:function(e,t,n){"use strict";var r=n(25),a=["getStateProp"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return c(c({},o(e,a)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),l=n(6),c=n.n(l),i=n(52),o=n(9),s=(n(4),n(1)),u=n(61);n(279);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.label,n=void 0===t?"":t,l=e.id,f=void 0===l?"":l,d=e.value,m=e.onChange,p=void 0===m?a.noop:m,O=e.className,j=e.style,v=void 0===j?{}:j,_=e.isHover,y=e.hoverVal,h=void 0===y?"":y,w="inspector-color-".concat(Object(i.useInstanceId)(o.ColorPicker)),g=b(Object(r.useState)(!1),2),E=g[0],S=g[1],N=b(Object(r.useState)(),2),k=N[0],C=N[1],P=b(Object(r.useState)(0),2),x=P[0],T=P[1],A=_?Object(a.isArray)(d)?d:[d,h]:d,I=function(e){if(_){var t=A;return t[x]=e.hex,void p(t,{id:f})}p(e.hex,{id:f})},D=_?A[x]:A;return Object(r.createElement)("div",{className:c()("components-color-field",O),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:w},n),_&&Object(r.createElement)(o.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(o.Button,{className:c()("is-secondary-gray is-small",{"is-selected":0===x}),onClick:function(){return T(0)}},Object(s.__)("Default","funnel-builder")),Object(r.createElement)(o.Button,{className:c()("is-secondary-gray is-small",{"is-selected":1===x}),onClick:function(){return T(1)}},Object(s.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(o.ColorIndicator,{colorValue:D,ref:C,className:c()({"is-empty":Object(a.isEmpty)(D)})}),Object(r.createElement)("span",{className:"indicator-text"},D||"Select")),E&&Object(r.createElement)(u.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(o.ColorPicker,{color:D,onChangeComplete:I}),Object(r.createElement)(o.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(s.__)("Reset","funnel-builder")))))}},253:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return O}));var r=n(0),a=n(9),l=n(1),c=n(14),i=n(4);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},f=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,a=e.importType,o=e.activeTemplateGroup;return s(s({title:!1===t?Object(l.__)("Templates are a PRO Feature","funnel-builder"):Object(l.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(l.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(l.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(l.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(l.__)("inactive or has expired.","funnel-builder")),Object(l.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(c.k)({},"/settings/")}}),{},{proLink:Object(i.M)([0===n||"funnel"===a?"Template":"Step",o,"Build","From","Scratch","Upgrade","Modal"])})},d=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,a=e.funnelId,o=e.activeGroup,u=e.activeStep;return s(s({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(l.__)(" is a PRO template","funnel-builder")):Object(l.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(l.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(l.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(l.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(l.__)("inactive or has expired.","funnel-builder")),Object(l.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(c.k)({},"/settings/")}}),{},{proLink:Object(i.M)([a?"Step":"Template",a?o:"upsell"===o?"upsell":u,t,"Upgrade","Modal"])})},m=function(e){var t=e.showSnackbar,n=e.hideSnackbar,c=e.builder,i=e.defaultBuilder,o=e.onConfirm,s=e.defaultEditorLoading;i===c||s||t(Object(r.createElement)("div",null,Object(l.__)("Want to make this default page builder?","funnel-builder")," ",Object(r.createElement)(a.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){o(c),n()}},Object(l.__)("Yes","funnel-builder")),Object(r.createElement)(a.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return n()}},Object(l.__)("No","funnel-builder"))),!1)},p=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},O={optin:{inline:Object(l.__)("Inline","funnel-builder"),popup:Object(l.__)("Popup","funnel-builder")},wc_checkout:{1:Object(l.__)("One","funnel-builder"),2:Object(l.__)("Two","funnel-builder"),3:Object(l.__)("Three","funnel-builder")}}},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(0),a=n(9),l=n(52),c=n(2),i=n(6),o=n.n(i),s=(n(288),n(75)),u=n(24);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.label,n=e.className,i=e.value,m=e.help,p=e.options,j=void 0===p?[]:p,v=e.onBlur,_=(void 0===v&&c.noop,e.onChange),y=void 0===_?c.noop:_,h=e.onFocus,w=(void 0===h&&c.noop,e.disabled),g=e.showtooltip,E=void 0!==g&&g,S=e.tooltipmsg,N=void 0===S?"":S,k=d(Object(r.useState)(!0),2),C=k[0],P=k[1],x=Object(l.useInstanceId)(O);if(Object(c.isEmpty)(j))return null;var T="inspector-checklist-".concat(x);i=null!=i&&i?i:[];var A=o()("components-checklist",n),I=function(e){var t=f(i);!0===e.target.checked?i.includes(e.target.value)||t.push(e.target.value):t=i.filter((function(t){return t!==e.target.value})),y(t,{event:e}),P(!1)};return Object(r.createElement)(a.BaseControl,{label:t,id:T,help:m},Object(r.createElement)("div",{className:"component-checklist-option-wrap ".concat(A)},j.map((function(e,t){return Object(r.createElement)(s.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},N),visible:E&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(T,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(T,"-").concat(t),className:o()("bwf-checkbox-control")},Object(r.createElement)("span",{className:o()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",b({id:"".concat(T,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:I,checked:(n=i,a=e.value,!!Array.isArray(n)&&n.includes(a)),className:o()({"bwf-no-animation":C}),"aria-describedby":m?"".concat(T,"__help"):void 0},(w||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(u.a,null),Object(r.createElement)("label",{htmlFor:"".concat(T,"-").concat(t)},e.label)));var n,a}))))}},255:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(56),c=n(2),i=n(9);n(6),n(266);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.value,n=void 0===t?"":t,i=e.onChange,o=e.keyid,u=e.openMergeTagModal,f=e.customSettings,d=void 0===f?{}:f,m=e.toolbar,p=e.quicktags,O=void 0!==p&&p,j=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(j.current){var e=window.tinymce.get("editor-bwf"+o);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(c.isEmpty)(r)||(a=[].concat(b(Object(c.isArray)(r)?r:r.split(",")),b(a))),wp.editor.initialize("editor-bwf"+o,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:m||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:b(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+o,plugins:a},d),quicktags:!!O&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(c.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,i(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){l.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==l.BACKSPACE&&t.keyCode!==l.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===l.F10&&t.stopPropagation()})),u&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){u(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),i(v.current)}))}function n(){"complete"===document.readyState&&e()}return j.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",n),function(){document.removeEventListener("readystatechange",n),wp.oldEditor.remove("editor-bwf"+o)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+o,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){i(e.target.value)},onBlur:function(e){i(e.target.value)}}))};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=m(Object(r.useState)("visual"),2),l=a[0],c=(a[1],m(Object(r.useState)(),2)),o=c[0],s=c[1];return Object(r.useEffect)((function(){s(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===l&&Object(r.createElement)(d,e),n&&"text"==l&&Object(r.createElement)(i.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:o,onChange:function(t){null!=e&&e.onChange(t)}}))))}},259:function(e,t,n){"use strict";var r=n(0),a=(n(297),n(7));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.children,n=e.status,c=void 0===n?"error":n,i=(e.onRemove,e.isDismissible,e.className),o=void 0===i?"":i,s=e.showIcon,u=void 0===s||s,b=l(Object(r.useState)(!1),2),f=b[0];b[1];return!f&&Object(r.createElement)("section",{className:"bwf-custom-notice ".concat(c," ").concat(o)},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},u&&Object(r.createElement)(a.a,{icon:"info",color:"success"===c?"#09B29C":"warning"===c?"#FFC65C":"info"===c?"#353030":"#E15334"}),Object(r.createElement)("div",{className:"bwf--align-center"},t)))}},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},264:function(e,t,n){"use strict";var r=n(0),a=n(3),l=n.n(a),c=(n(260),n(269)),i=(n(9),n(7)),o=n(1),s=n(2);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t=e.groupID,n=e.items,a=e.className,u=void 0===a?"":a,f=e.sortable,p=e.groupData,O=e.handleClick,j=e.actions,v=e.handleIcons,_=e.openedTabs,y=(void 0===_&&s.noop,e.openedKeys),h=e.setOpenedKeys,w=e.returnProps,g=void 0!==w&&w,E=m(Object(r.useState)(y||[0]),2),S=E[0],N=E[1],k={};n.forEach((function(e){k[e.key]=Object(r.createRef)()})),Object(r.useEffect)((function(){void 0!==y&&N(y)}),[y]),Object(r.useEffect)((function(){void 0!==h&&h(S)}),[S]),Object(r.useEffect)((function(){var e=Object.keys(k)[0],t=function(t){jQuery(k[t].current).on("click",(function(n){var r=Object(s.isString)(n.target.className)&&n.target.className.split(" ");if(r&&!r.includes("components-form-toggle__input")&&!r.includes("components-toggle-control__label")){var a=jQuery(this).parents(".bwf-c-s-collapsible");t!==e||a.hasClass("bwf-accordion-closed")?t===e&&a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideDown(400),a.removeClass("bwf-accordion-closed")):a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideUp(400),a.removeClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideDown(400),a.addClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideUp(400),a.addClass("bwf-accordion-closed"))}}))};for(var n in k)t(n)}),[]);var C=Object(c.e)((function(){return Object(r.createElement)(i.a,{icon:"menu"})}));return Object(r.createElement)("div",{className:"bwf-accordian-list"},n&&n.map((function(e,n){return e.hasOwnProperty("key")?Object(r.createElement)("div",{key:e.key,"data-accordion":n,className:u+" bwf-c-s-collapsible"},Object(r.createElement)("div",{className:"bwf-c-s-heading",ref:k[e.key],onClick:function(e){-1===S.indexOf(n)?N((function(e){return[].concat(d(e),[n])})):setTimeout((function(){N((function(e){return e.filter((function(e){return e!==n}))}))}),400)}},f&&Object(r.createElement)(C,null),Object(r.createElement)("div",{className:"bwf-accordion-label-elm"},e.label),j&&j.map((function(e){return e.hasOwnProperty("key")?Object(r.createElement)("a",{onClick:function(n){n.preventDefault(),O(e.key,t,"group",0,p)},href:"",key:e.key,className:"bwf-accordion-"+e.class},Object(o.__)(null==e?void 0:e.label,"funnel-builder")):null})),Object(r.createElement)("div",{className:"bwf-c-s-icon"},"plus-minus"===v?Object(r.createElement)(i.a,{icon:S.includes(n)?"minus":"plus-3"}):Object(r.createElement)(i.a,{icon:S.includes(n)?"angle-up":"angle-down",width:"16",height:"18"}))),Object(r.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion bwf-hide",style:b({},S.includes(n)&&{display:"block"})},e.hint,l.a.isValidElement(e.display)?l.a.cloneElement(e.display,g?{isOpened:S.includes(n)}:{}):e.display)):null})))};j.defaultProps={items:[{key:"",label:"",display:Object(r.createElement)("p",null)}]},t.a=j},266:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){"use strict";var r=n(25),a=["getStateProp"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("settings"),t=e.getStateProp;return c(c({},o(e,a)),{},{data:t("data"),tabs:t("tabs"),isLoading:t("isLoading")})}},275:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(7);n(294);t.a=function(e){var t=e.onClose,n=e.title,c=e.isDismissible,i=void 0===c||c;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),i&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(a.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(l.a,{icon:"close",size:20})))}},276:function(e,t,n){"use strict";var r=n(0);n(260);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.count,n=void 0===t?10:t,l=e.className,c=void 0===l?"":l;return Object(r.createElement)("div",{className:"bwf-accordion-placeholder ".concat(c)},a(Array(n)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))})))}},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){"use strict";var r=n(9),a=n(0),l=n(6),c=n.n(l),i=n(254),o=n(250),s=n(246),u=n(2),b=n(284),f=["ajax_cb","options"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var j=n(255),v=["value","onChange","id","label","className"];function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var h=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,l=e.id,i=e.label,o=e.className,s=y(e,v);function u(e){r(e,l)}return Object(a.createElement)("div",{className:c()("components-richeditor",o)},i&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:l},i),Object(a.createElement)(j.a,_({content:n,value:n,setContent:u,onChange:u,keyid:l},s)))},w=n(7),g=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:c()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(w.a,{icon:"duplicate",size:20}),"Copy")))},E=n(247),S=n(252),N=n(1),k=(n(289),n(4));function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){var n;if(Object(u.isObject)(e))return e;if(Object(u.isString)(e)){var r,a=e.split(" ");return A(r={},t.attrTop,Object(u.isEmpty)(a[0])?"0":a[0]),A(r,t.attrRight,Object(u.isEmpty)(a[1])?"0":a[1]),A(r,t.attrBottom,Object(u.isEmpty)(a[2])?"0":a[2]),A(r,t.attrLeft,Object(u.isEmpty)(a[3])?"0":a[3]),r}return A(n={},t.attrTop,"0"),A(n,t.attrRight,"0"),A(n,t.attrBottom,"0"),A(n,t.attrLeft,"0"),n},D=function(e){var t,n=e.value,l=void 0===n?{}:n,i=e.label,o=e.type,s=e.onChange,b=void 0===s?u.noop:s,f=(e.defaultSync,I(l,e)),d="",m=x(Object(a.useState)(!Object(k.h)(Object.values(f))),2),p=m[0],O=m[1],j=x(Object(a.useState)(Object(u.cloneDeep)(Object(u.defaultsDeep)(f,(A(t={},e.attrTop,"0"),A(t,e.attrRight,"0"),A(t,e.attrBottom,"0"),A(t,e.attrLeft,"0"),t)))),2),v=j[0],_=j[1];d=v&&v[e.attrUnit]?v[e.attrUnit]:"px",Object(a.useEffect)((function(){_(P(P({},v),I(l,e)))}),[l]),Object(a.useEffect)((function(){var t;_(Object(u.cloneDeep)(Object(u.defaultsDeep)(f,(A(t={},e.attrTop,"0"),A(t,e.attrRight,"0"),A(t,e.attrBottom,"0"),A(t,e.attrLeft,"0"),t)))),d=v&&v[e.attrUnit]?v[e.attrUnit]:"px"}),[]);var y=function(t,n){var r=t.target.value;if(p)!function(t){"padding"===o&&(t=t.toString().replace(/-/g,""));var n=P({},v);if(n[e.attrTop]=t,n[e.attrRight]=t,n[e.attrBottom]=t,n[e.attrLeft]=t,Object(u.isString)(l)){var r="".concat(n[e.attrTop]," ").concat(n[e.attrRight]," ").concat(n[e.attrBottom]," ").concat(n[e.attrLeft]);b(r)}else b(n)}(r);else{"padding"===o&&(r=r.toString().replace(/-/g,""));var a=P({},v);if(a[n]=r,Object(u.isString)(l)){var c="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);b(c)}else b(a)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},i&&Object(a.createElement)("label",{className:"components-base-control__label"},i),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return y(t,e.attrTop)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),i),value:v&&v[e.attrTop],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":o}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return y(t,e.attrRight)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),i),value:v&&v[e.attrRight],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":o}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return y(t,e.attrBottom)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),i),value:v&&v[e.attrBottom],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":o}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return y(t,e.attrLeft)},"aria-label":Object(N.sprintf)(Object(N.__)("%s Top","funnel-builder"),i),value:v&&v[e.attrLeft],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":o}),Object(a.createElement)(r.Button,{className:c()("components-bwf-dimensions-control_reset",{"is-lock":p}),label:Object(N.__)("Reset","funnel-builder"),onClick:function(){return O((function(e){return!e}))},isSmall:!0},Object(a.createElement)(w.a,{icon:p?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))};D.defaultProps={label:Object(N.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(N.__)("Top","funnel-builder"),labelRight:Object(N.__)("Right","funnel-builder"),labelBottom:Object(N.__)("Bottom","funnel-builder"),labelLeft:Object(N.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"};var F=D,L=n(52);n(290);function R(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=[{id:"h-offset",selectindex:0,label:Object(N.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(N.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(N.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(N.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(N.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(N.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],q=function e(t){var n=t.typography,r=t.setTypography,l=t.settingOptions,c=t.label,i=Object(L.useInstanceId)(e,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:i},c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},l.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:n[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(t){var a=t.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?t.target.value:a<0?0:a;var l=R(n);l[e.selectindex]=a,r(l)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"}," ",Object(a.createElement)("label",{className:"components-base-control__label"},Object(N.__)("Shadow Color","funnel-builder")),Object(a.createElement)(S.a,{value:n[4],onChange:function(e){var t=R(n);t[4]=e,r(t)}})))},U=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,l=n.h_offset,c=void 0===l?"":l,i=n.v_offset,o=void 0===i?"":i,s=n.blur,u=void 0===s?"":s,b=n.spread,f=void 0===b?"":b,d=n.color,m=void 0===d?"":d,p=n.inset,O=[c,o,u,f,m,void 0===p?"":p];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(q,{typography:O,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:M,label:r}))};n(291);function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){var t=e.value,n=e.onChange,l=e.label,c=e.defaultCustomValue,i=V(Object(a.useState)(""),2),o=i[0],b=i[1],f=V(Object(a.useState)(""),2),d=f[0],m=f[1];return Object(a.useEffect)((function(){Object(u.isEmpty)(d)&&(Object(u.isEmpty)(null==t?void 0:t.toString())?(m("auto"),b("100%")):(m("custom"),b(t)))}),[t]),Object(a.createElement)(a.Fragment,null,l&&Object(a.createElement)("label",{className:"components-base-control__label"},l),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,z({value:o,onChange:function(e){n(e),b(e)},disabled:"auto"===d},"custom"===d&&{type:"number",min:"0"})),Object(a.createElement)(s.a,{options:[{key:"auto",label:Object(N.__)("Auto","funnel-builder")},{key:"custom",label:Object(N.__)("Custom","funnel-builder")}],selected:d,onChange:function(e){m(e),"auto"===e?(n(""),b("100%")):(n(Object(u.isEmpty)(null==t?void 0:t.toString())?c:t),b(c))}})))},$=n(75),H=["label","tooltip"];function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee={checkbox:o.a,radio:E.a,select:s.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:i.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,l=O(e,f),c=m(Object(a.useState)(r),2),i=c[0],o=c[1],s=m(Object(a.useState)(!1),2),p=s[0],j=s[1];Object(a.useEffect)((function(){Object(u.isEmpty)(i)&&v()}),[i]);var v=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),o(t),j(!0)}})}))};return Object(a.createElement)(a.Fragment,null,p?Object(a.createElement)(b.a,d({options:i},l)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:h,richtext:h,copier:g,color:S.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,l=X(e,H);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(u.isEmpty)(n)&&Object(a.createElement)($.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(w.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,Z({},l,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":F,"box-shadow":U,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:c()("bwf_label",n)},t)},width:J};t.a=function(e){var t=e.input,n=e.formProps,l=e.values,i=e.customMapField,o=void 0===i?{}:i,s=Q(Q({},ee),o),b=s.text;if(t.type.toLowerCase()in s&&(b=s[t.type.toLowerCase()]),t.ajax_cb&&(b=s.ajax),"select"===t.type&&t.multiple&&!Object(u.isEmpty)(l)){var f=l[t.id];if(Object(u.isEmpty)(f))l[t.id]=[];else if(!Object(u.isEmpty)(t.options)&&"string"==typeof f[0]){var d=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&f.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},d.push(t)}else if("string"==typeof e.value.id&&f.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},d.push(n)}})),l[t.id]=d}}var m,p;return Object(a.createElement)("div",{className:c()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(b,Q(Q({label:t.label},(m=t,p=Object.assign({},m.props),m.type.toLowerCase()in s||(p.type=m.type.toLowerCase()),p.placeholder=m.placeholder,p.options=m.options,m.checkboxlabel&&(p.checkboxlabel=m.checkboxlabel),m.multiple&&(p.multiple=m.multiple),m.ajax_cb&&(p.ajax_cb=m.ajax_cb),"copier"===m.type&&(p=m),"width"===m.type&&(p=m),"color"===m.type&&(p=m,m.isHover&&m.hoverKey&&(p.hoverVal=l[m.hoverKey])),"richeditor"!==m.type&&"richtext"!==m.type&&"textarea"!==m.type||(p=m),"number"===m.type&&(p.min=m.min,p.max=m.max),"select"===m.type&&(p.excludeSelectedOptions=!1,p.options&&(p.options=p.options.map((function(e){return"object"!==K(e.value)&&(e.key="object"!==K(e.value)?e.value:e.key,e.value={id:e.value}),e}))),m.multiple&&(p.excludeSelectedOptions=!0,p.inlineTags=!0)),"richeditor"===m.type&&(p.id=m.id),"bwf-toggle"===m.type&&(p.tooltip=m.tooltip),"input"!==m.type&&"text"!==m.type&&"textarea"!==m.type||(p.placeholder=Object(N.__)("Type here…","funnel-builder")),"text"===m.type&&m.disabled&&(p.disabled=m.disabled),"toggle"===m.type&&(p.className="bwf-tooglecontrol-advance",p.tooltip=m.tooltip,p.label=m.label),p.keyid=m.key,p)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},286:function(e,t,n){"use strict";var r=n(0),a=n(9),l=n(2),c=n(1),i=(n(317),n(17)),o=n.n(i),s=n(6),u=n.n(s),b=n(7),f=n(27);n(51);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.onSearch,n=e.isLoading,i=e.items,o=e.onItemClick,s=e.error,m=e.blurText,p=e.placeholder,O=void 0===p?Object(c.__)("Type to search","funnel-builder"):p,j=e.helpText,v=e.multiGroup,_=void 0!==v&&v,y=e.stepTitle,h=void 0===y?Object(c.__)("details","funnel-builder"):y,w=d(Object(r.useState)(""),2),g=w[0],E=w[1],S=d(Object(r.useState)(!1),2),N=S[0],k=S[1],C=Object(r.useRef)(null),P=function(e,t){o(e),k(!1),t.preventDefault()};Object(r.useEffect)((function(){m&&!N&&E(m)}),[m,N]);var x=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(x.current).find(e.target).length>0?k(!0):k(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:u()("bwf-select-auto-box",{"has-help-text":j}),ref:x},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(b.a,{icon:"search",height:"16",width:"16",color:f.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(b.a,{icon:Object(l.isArray)(i)&&i.length>0&&N?"angle-up":"angle-down",height:"12",width:"12",color:f.TEXT_COLOR_2})),Object(r.createElement)(a.TextControl,{autoComplete:"off",value:g,onChange:function(e){return E(n=e),C.current&&clearTimeout(C.current),void(C.current=setTimeout((function(){return t(n)}),500));var n},placeholder:O}),(!Object(l.isArray)(i)||!!s)&&N&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},s),Object(l.isArray)(i)&&N&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(c.__)("Fetching ".concat(h,"…"),"funnel-builder")):Object(r.createElement)("ul",null,_?i.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,e.name))})))})):i.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,Object(c.__)(e.value,"funnel-builder")))}))))),j&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},j))};p.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},p.propTypes={onSearch:o.a.func,isLoading:o.a.bool,items:o.a.oneOfType([o.a.arrayOf(o.a.shape({key:o.a.oneOfType([o.a.number,o.a.string]).isRequired,value:o.a.string.isRequired})),o.a.array]),onItemClick:o.a.func,onChange:o.a.func,error:o.a.any},t.a=p},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){"use strict";var r=n(0),a=n(6),l=n.n(a),c=(n(344),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:l()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(c.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(c.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(c.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(c.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(c.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(c.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},297:function(e,t,n){},298:function(e,t,n){"use strict";var r=n(0),a=(n(323),n(13)),l=n.n(a),c=n(4),i=n(1),o=n(7),s=n(2),u=(n(51),n(6)),b=n.n(u);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=null;t.a=function(e){e.emptyOption;var t=e.onChange,n=e.value,a=e.apiEndPoint,u=(e.hintLabel,e.label),d=void 0===u?Object(i.__)("Select Page","funnel-builder"):u,p=e.error,O=Object(r.useRef)(),j=f(Object(r.useState)(""),2),v=j[0],_=j[1],y=f(Object(r.useState)(n),2),h=y[0],w=y[1],g=f(Object(r.useState)(),2),E=g[0],S=g[1],N=f(Object(r.useState)(!1),2),k=N[0],C=N[1],P=f(Object(r.useState)(""),2),x=P[0],T=P[1],A=f(Object(r.useState)(0),2),I=A[0],D=A[1];Object(c.mb)(O,(function(){k||_("")}));var F=function(e){w(e),_("")};Object(r.useEffect)((function(){v&&D(0)}),[v]);var L=function(e){t(e)};return Object(r.useEffect)((function(){if(v.length>=3){C(!0);try{if(clearTimeout(m),v!==x)m=setTimeout((function(){T(v);var e=a.includes("?")?"".concat(a,"&term=").concat(v):"".concat(a,"?term=").concat(v);l()({path:Object(c.r)(e)}).then((function(e){C(!1),e.success?S(e.data.pages||e.data.products):S([{ID:"no-data-found",name:"No result found"}])}))}),600);else{var e=JSON.parse(JSON.stringify(E));S(e),C(!1)}}catch(e){}}else clearTimeout(m),C(!1)}),[v]),Object(r.createElement)("div",{className:b()("bwf-custom-select",{"is-selected":!Object(s.isEmpty)(h)})},Object(r.createElement)("div",{className:"form-group required wffn_field_space bwf-display-flex"},Object(r.createElement)("label",{className:"bwf-custom-select-label"},d),Object(r.createElement)("div",{className:"field-wrap",ref:O},Object(r.createElement)("div",{className:" multiselect multiselect--above"},Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("input",{type:"text",autoFocus:!0,value:v,onChange:function(e){return _(e.target.value)},autoComplete:"off",placeholder:"".concat(0==h.length?"Search..":""),className:b()("multiselect__input",{"bwf-error-border":0===v.length&&p}),style:Object(s.isEmpty)(h)?{}:{display:"none"},disabled:!Object(s.isEmpty)(h),onKeyDown:function(e){38===e.keyCode&&I>0?D(I-1):40===e.keyCode&&I<E.length-1&&D(I+1)},onKeyPress:function(e){var t,n;"Enter"===e.key&&"no-data-found"!==(null===(t=E[I])||void 0===t?void 0:t.ID)&&(e.preventDefault(),F(null===(n=E[I])||void 0===n?void 0:n.name),L(E[I]))}}),!Object(s.isEmpty)(h)&&Object(r.createElement)("span",{className:"bwf-selected-item"},"string"==typeof h?h:h.name),""!=h&&Object(r.createElement)("div",{className:"bwf-custom-select-clear",onClick:function(){w(""),L("")}},Object(r.createElement)(o.a,{icon:"dismiss-circle",size:"16"}))),Object(r.createElement)("div",{className:" ".concat(v&&3<=v.length?"multiselect__content-wrapper":"bwf-hide"," ")},k?Object(r.createElement)("div",{className:"multiselect__option"},Object(i.__)("Fetching Details…","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},null==E?void 0:E.map((function(e,t){return Object(r.createElement)("li",{className:"bwf_multiselect__element",onMouseOver:function(){return D(t)},onClick:function(){"no-data-found"!==e.ID&&(F(null==e?void 0:e.name),L(e))},key:"multiselect__content--key-".concat(t)},e&&"no-data-found"!==e.ID&&Object(r.createElement)("span",{"data-select":Object(i.__)("Press enter to select","funnel-builder"),"data-selected":Object(i.__)("Selected","funnel-builder"),"data-deselect":Object(i.__)("Press enter to remove","funnel-builder"),className:" multiselect__option ".concat(I===t?"multi-select-active":null)},Object(r.createElement)("span",null,null==e?void 0:e.name)),e&&"no-data-found"==e.ID&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.name))})))))),0!==v.length?Object(r.createElement)("div",{className:"bwf-field-hints",style:{fontSize:"12px",margin:"2px",color:"#3c434a"}},Object(i.__)("Enter minimum 3 letters","funnel-builder")):p&&Object(r.createElement)("div",{className:"bwf-error-text"},p))))}},302:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(9),c=n(1),i=n(13),o=n.n(i),s=n(38),u=n(4),b=n(286);function f(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,i=t.title,p=t.is_substep,O=void 0!==p&&p,j=e.onStepSelected,v=e.label,_=void 0===v?Object(c.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):v,y=e.showCheckbox,h=void 0!==y&&y,w=m(Object(r.useState)(!h),2),g=w[0],E=(w[1],m(Object(r.useState)(!1),2)),S=E[0],N=E[1],k=m(Object(r.useState)(null),2),C=k[0],P=k[1],x=m(Object(r.useState)(!1),2),T=x[0],A=x[1],I=m(Object(r.useState)(null),2),D=I[0],F=I[1],L=Object(r.useRef)(new AbortController),R=T&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(l.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(c.__)("".concat(i," not found"),"funnel-builder")))),B=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,r=O&&!0===O?"&is_substep=true":"",e.next=5,o()({path:Object(u.r)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:L.current.signal});case 5:l=e.sent,P(l||null),Object(a.isEmpty)(l.steps)&&Object(a.isEmpty)(l.pages)?A(!0):A(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log(e.t0):(P(null),A(!0));case 13:N(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){d(l,r,a,c,i,"next",e)}function i(e){d(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return B(""),function(){L.current.abort()}}),[]);var M=Object(a.isObject)(C)&&!Object(a.isNull)(C)?f(Object(a.isEmpty)(C)?[]:C):Object(a.isArray)(C)&&!Object(a.isEmpty)(C)?C.map((function(e){return{key:e.id,value:e.name}})):[],q=D&&D.hasOwnProperty("name")?Object(s.decodeEntities)(D.name):"";return Object(r.createElement)(r.Fragment,null,g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},_),Object(r.createElement)(b.a,{onSearch:function(e){return B(e)},isLoading:S,items:M,multiGroup:Object(a.isObject)(C),error:R,onItemClick:function(e){F(e),j({step:e,copyFrom:g})},blurText:q,placeholder:Object(c.__)("Search…","funnel-builder"),stepTitle:i,helpText:["offer","wc_order_bump"].includes(n)?null:Object(c.__)("Search and select a page from a Funnel, Post or a Page.","funnel-builder")})))}},306:function(e,t,n){"use strict";var r=n(0),a=n(119),l=n(2),c=n(1),i=n(325),o=n(251),s=n(77),u=n(253);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(o.a)(),n=t.getTemplates,f=t.getBuilders,d=t.getDefaultBuilder,p=t.templateLoading,O=t.getActiveBuilder,j=t.getActiveGroup,v=t.getCurrentTemplate,_=t.getActiveStep,y=t.getActiveSubFilter,h=e.onImportComplete,w=e.isStoreCheckout,g=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,N=e.stepId,k=e.funnelId,C=Object(s.a)(),P=C.setActiveGroup,x=(C.setActiveSubFilter,C.setActiveBuilder),T=C.setCurrentTemplate,A=m(m({wc_checkout:Object(c.__)("Checkout","funnel-builder")},!w&&{landing:Object(c.__)("Sales","funnel-builder")}),{},{upsell:Object(c.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(c.__)("Thank You","funnel-builder")},!w&&{optin:Object(c.__)("Optin","funnel-builder"),optin_ty:Object(c.__)("Optin Confirmation","funnel-builder")}),I=Object(a.useParams)(),D=I.id,F=I.filter,L=I.builder,R=I.templateId,B=b(Object(r.useState)(!1),2),M=B[0],q=B[1],U=n();Object(r.useEffect)((function(){return L&&(P(F),x(L),T({id:R})),function(){P("funnel")}}),[]);var z=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(l.isEmpty)(U)&&!M&&L){var e=U[F][L][R];T({id:R,template:e}),q(!0)}}),[U]);var V=f(),G=d(),J=O(),$=p(),H=j(),K=v(),Y=(_(),y()),Q=function(){var e=G;return Object(l.isEmpty)(J)||(e=J),V&&V[H]&&!V[H][e]&&(e=V[H][G]?G:"elementor"),e},W=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&Y&&J?U[t][J][e].group_type[n||Y]:e},Z=function(e){return"wc_checkout"===H?Y===e.no_steps:"optin"!==H||e.group.includes(Y)},X=function(e,t,n){var r="";return"landing"===H?r="sp":"optin"===H?r="op":"optin_ty"===H?r="op-confirmed":"wc_checkout"===H?r="checkouts":"upsell"===H?r="offer":"wc_thankyou"===H&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===H&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=w?"/store-checkout":0===D?"/templates":"/funnels/".concat(D);return Object(r.createElement)(i.a,{filters:u.e,templates:U,activeBuilder:Q(),templateCards:function(){if(Object(l.isEmpty)(U)||Object(l.isEmpty)([H]))return{};var e=Q(),t={};return U[H]&&U[H][e]&&(t=U[H][e]),t}(),editors:V,defaultBuilder:G,isTemplateLoading:$,activeTemplateGroup:H,templateGroup:A,previewData:function(){if(Object(l.isEmpty)(U)||"funnel"===H)return{};var e={},t=[],n=[];try{!function(){var r=Q();for(var a in t=[],U[H][r]){var l=U[H][r][a];if(!l.build_from_scratch&&Z(l)){var c={};if(c.id=a,c.funnel=l.group_type?l.group_type[Object.keys(l.group_type)[0]]:a,c.slug=a,c.name=l.name,c.thumbnail=l.thumbnail,c.template=null==K?void 0:K.id,c.pro=l.pro,c.group_type=l.group_type,c.type=H,c.preview=null==l?void 0:l.prevslug,t.push(c),l.group_type)Object.values(l.group_type).forEach((function(e){var t=U[H][r][e];n.push({id:null==t?void 0:t.prevslug,preview:X(0,t,r)})}));else n.push({id:null==l?void 0:l.prevslug,preview:X(0,l,r)})}}var i=U[H][r][W(null==K?void 0:K.id,H)];e.activeTemplate={thumbnail:W(null==K?void 0:K.id,H),preview:X(null==K||K.id,i,r),slug:W(null==K?void 0:K.id,H),name:null!=K&&K.id?U[H][r][null==K?void 0:K.id].name:"",pro:null!=K&&K.id?U[H][r][null==K?void 0:K.id].pro:"",tempPro:null!=K&&K.id?U[H][r][W(null==K?void 0:K.id,H,!("wc_checkout"!==H&&"optin"!==H||!z(K.template))&&z(K.template))].pro:"",group:H,filters:!!i.group_type&&Object.keys(i.group_type),type:H,funnelGroup:[H],prevId:i.prevslug},e.thumbnails=t,e.previews=n}()}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:N&&k?k:w&&g?g:D,onImportComplete:h,templateFilterCheck:function(e,t){return"wc_checkout"===H?t===e.no_steps:"optin"!==H||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:Y,showDefaultEditorNotice:!1,isStoreCheckout:w,parentRoute:ee,showTemplatesNav:!(N||w&&0===D),urlDependency:S,stepId:N,importApiPrefix:w?"store-checkout":"funnels"})}},312:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),a=n(2),l=n(9),c=n(1),i=n(13),o=n.n(i),s=n(22),u=n(254),b=n(4),f=n(286),d=n(24),m=n(78),p=n(251),O=n(21),j=n(253),v=n(6),_=n.n(v);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.b=function(e){var t,n=e.onCloseModal,i=e.onComplete,o=e.isWorking,f=e.className,v=e.children,y=E(Object(r.useState)(""),2),h=y[0],w=y[1],S=E(Object(r.useState)(""),2),k=S[0],C=S[1],P=E(Object(r.useState)([]),2),x=P[0],T=P[1],A=E(Object(r.useState)(!1),2),I=A[0],D=A[1],F=Object(O.a)("ul").isProFeatureLocked,L=Object(p.a)(),R=L.getCurrentTemplate,B=L.getScratchTemplateType,M=L.getActiveGroup,q=L.getActiveSubFilter,U=R(),z=B(),V=M(),G=q(),J=Object(r.createElement)(r.Fragment,null,"wc_checkout"===V?Object(c.__)("Create Store Checkout","funnel-builder"):Object(c.__)("Create Funnel","funnel-builder")),$=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==z&&U.isBuildFromScratch||k){e.next=3;break}return w("Funnel title is required field"),e.abrupt("return");case 3:w(""),i&&i(k,x,U.isBuildFromScratch&&"new"!==z&&I);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){g(l,r,a,c,i,"next",e)}function i(e){g(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}(),H=function(){return U.isBuildFromScratch?"new"===z?Object(a.isEmpty)(k.trim())||!1===V&&Object(a.isEmpty)(x):Object(a.isEmpty)(I):Object(a.isEmpty)(k.trim())},K=function(e){return"wc_checkout"===e.type&&G&&j.e.hasOwnProperty(e.type)&&j.e[e.type].hasOwnProperty(G)?" - ".concat(j.e[e.type][G]," ")+Object(c.__)("Step","funnel-builder"):""};return Object(r.createElement)(l.Modal,{title:J,className:_()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",f),onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!o,overlayClassName:"bwf-create-funnel-modal__overlay"},v,h&&Object(r.createElement)(m.a,{errorMessage:h}),(!U.isBuildFromScratch||"existing"!==z)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(H()||$())}},Object(r.createElement)(l.TextControl,{placeholder:Object(c.__)("Enter funnel name","funnel-builder"),label:Object(c.__)("Name","funnel-builder"),value:k,onChange:function(e){return C(e)},disabled:o})),U.isBuildFromScratch&&("new"===z?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===V?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(c.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(d.b,{content:Object(c.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(d.b,{content:Object(c.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(c.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(c.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(u.a,{value:x,onChange:function(e){T(e)},options:Object.keys(b.lb).map((function(e){return{value:e,label:b.lb[e],isPro:F&&"upsell"===e}})),disabled:o})))):Object(r.createElement)(N,{onSelect:function(e){return D(e)},activeGroup:V})),!U.isBuildFromScratch&&U.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(c.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=U.steps)||void 0===t?void 0:t.filter((function(e){return!F||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(d.b,{content:b.lb[e.type]+K(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:o},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(s.a,{isPrimary:!0,disabled:H()||o,isBusy:o,onClick:$,className:H()?"bwf-no-ripple":"",name:"add-funnel"},Object(c.__)("Done","funnel-builder"))))};var N=function(e){var t=e.onSelect,n=e.activeGroup,l=e.label,i=void 0===l?Object(c.__)("Funnel","funnel-builder"):l,s=E(Object(r.useState)([]),2),u=s[0],m=s[1],p=E(Object(r.useState)(""),2),O=p[0],j=p[1],v=E(Object(r.useState)({}),2),_=v[0],y=v[1],w=E(Object(r.useState)([]),2),g=w[0],S=w[1],N=E(Object(r.useState)(!0),2),k=N[0],C=N[1],P=function(e){C(!0),o()({path:Object(b.r)("/funnels".concat(Object(b.q)(h({},e))))}).then((function(e){e.status?(m(e.items),Object(a.size)(e.items)?S(e.items.map((function(e){return{key:e.id,value:e.title}}))):S([{key:"no-data",value:"No Data Found"}])):e.items||S([]),C(!1)})).catch((function(e){console.log(e),C(!1)}))};Object(r.useEffect)((function(){Object(a.isEmpty)(O)?P({limit:10,need_steps_data:!0}):P({limit:10,s:O,need_steps_data:!0})}),[O]);var x=Object(r.useMemo)((function(){var e;if(Object(a.isEmpty)(u))return[];var t=null===(e=u.find((function(e){return e.id===_.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(a.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[_]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,i),Object(r.createElement)(f.a,{onSearch:function(e){return j(e)},isLoading:k,items:g,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),y(e)},blurText:_.value,placeholder:Object(c.__)("Search…","funnel-builder"),helpText:Object(c.__)("Search and select a Funnel to import steps","funnel-builder")}),!Object(a.isEmpty)(_)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(c.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(a.isEmpty)(x)?Object(r.createElement)(d.b,{content:Object(c.__)("No Steps","funnel-builder"),border:!0}):x.map((function(e,t){return Object(r.createElement)(d.b,{content:Object(b.kb)(e),border:!0,key:"steps-".concat(t)})})))))}},313:function(e,t,n){"use strict";var r=n(0),a=n(6),l=n.n(a),c=n(4),i=n(1),o=n(9),s=n(13),u=n.n(s),b=n(2),f=n(76),d=n(315),m=n(62),p=n(274),O=n(22),j=n(7),v=(n(348),n(51)),_=n(27);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=[Object(i.__)("New Features","funnel-builder"),Object(i.__)("New Add-ons & Integrations","funnel-builder"),Object(i.__)("World Class Support","funnel-builder"),Object(i.__)("Security Improvements","funnel-builder"),Object(i.__)("Wordpress Compatibility","funnel-builder"),Object(i.__)("Marketing & Payment Compatibility","funnel-builder")],E=function(e){var t=e.onclose,n=e.onAction,a=e.isLoading,l=void 0!==a&&a;return Object(r.createElement)(o.Modal,{className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-alert-modal bwf-deactivate-modal",isDismissible:!1,onRequestClose:t},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(i.__)("Deactivating License","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(i.__)("Close"),onClick:function(){return t()}},Object(r.createElement)(j.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-content bwf-mt-16"},Object(r.createElement)("span",null,Object(i.__)("You will lose access to the following active license benefits:","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("ul",null,g.map((function(e,t){return Object(r.createElement)("li",{key:"feature-".concat(t)},Object(r.createElement)(j.a,{icon:"cross-circle",color:_.DANGER_COLOR,size:"20"}),e)})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-mt-24"},Object(r.createElement)(o.Button,{className:"bwf-modal-cancel-btn bwf-strong ".concat(l?"bwf-is-active":""),onClick:function(){l||n()}},Object(r.createElement)("span",{style:h({},l&&{visibility:"hidden"})},Object(i.__)("Deactivate","funnel-builder")),l&&Object(r.createElement)(v.a,{color:"#0073aa",style:{position:"absolute"}})),Object(r.createElement)(o.Button,{isPrimary:!0,className:"bwf-btn-medium",onClick:function(){return t()},disabled:l},Object(i.__)("Cancel","funnel-builder")))))},S=n(12),N=n.n(S),k=n(26);function C(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.id,n=e.label,a=e.license,s=void 0===a?"":a,v=e.setSettingFieldSchema,_=e.is_manually_deactivated,y=e.activated,h=e.expired,w=function(){return Object(b.isEmpty)(s)||y||h||_?Object(b.isEmpty)(s)||!h||_?!y||Object(b.isEmpty)(s)||_?_?"deactivated":"empty":"activated":"expired":"invalid"},g=function(e){var t=e||w();switch(t){case"activated":case"expired":case"invalid":return s.licence?"xxxxxxxxxxxxxxxxxxxxxxxxxx"+s.licence.substring(26):Object(b.isEmpty)(s.api_key)||"activated"!==t?"":s.api_key;default:return""}},S=Object(k.a)().setProData,x=Object(m.a)().setLiteBar,T=Object(d.a)().updateLicense,A=P(Object(r.useState)((function(){return g()})),2),I=A[0],D=A[1],F=P(Object(r.useState)({loading:!1,status:!1}),2),L=F[0],R=F[1],B=P(Object(r.useState)(""),2),M=B[0],q=B[1],U=P(Object(r.useState)(!1),2),z=U[0],V=U[1],G=P(Object(r.useState)(!1),2),J=G[0],$=G[1],H=P(Object(r.useState)(!1),2),K=H[0],Y=H[1],Q=Object(p.a)().data;Object(r.useEffect)((function(){Object(b.size)(I)?(q(""),Y(!0)):K&&!Object(b.size)(I)&&q(Object(i.__)("Please enter licence key","funnel-builder"))}),[I]);var W=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.prev=1,e.next=4,u()({path:Object(c.r)("/license/"),method:"POST",data:{name:t,action:"activated"!==w()?"activate":"deactivate",key:I}}).then((function(e){if(200===e.code){var t,n,a=e.name,l=e.license_data,c=void 0!==l&&l,o=e.license_exist,s=void 0===o?{}:o;e.pro_status,Object(b.isEmpty)(s)||(wffn_contacts_data.license_exist=s),S(e.lev),"activated"!==w()?(x(2),wffn_contacts_data.is_pro=1):(x(1),wffn_contacts_data.is_pro=0);var u=(null===(t=Q.woofunnels_general_settings[0])||void 0===t||null===(n=t.tabs)||void 0===n?void 0:n.general).fields.map((function(e){return a===e.id&&(e.license=c,"activated"!==w()?(e.is_manually_deactivated=0,e.expired=0,e.activated=1,wffn_contacts_data.is_pro=1):(e.activated=0,e.is_manually_deactivated=1,wffn_contacts_data.is_pro=0)),e}));v(u),T(u),R({status:!0,loading:!1,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-mt-8"},Object(r.createElement)(j.a,{icon:"check-circle",size:"72"})),Object(r.createElement)("div",{className:"bwf-licence-status"},"activated"!==w()?Object(i.__)("License Activated","funnel-builder"):Object(i.__)("Successfully Deactivated","funnel-builder")))}),$(!1),V(!1)}else 400===e.code&&($(!1),R({status:!0,error:e.error,hide:8e3}))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),$(!1),R({status:!0,error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){C(l,r,a,c,i,"next",e)}function i(e){C(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),Z=function(){switch(w()){case"activated":return!0;default:return!1}};Object(r.useEffect)((function(){"deactivated"===w()?D(g("deactivated")):"activated"===w()&&D(g("activated"))}),[w()]);var X=g()===I&&Object(b.isEmpty)(M)&&Object(r.createElement)("p",{className:"hint"},Object(r.createElement)("span",{className:"bwfan-error"},e.activated?Object(i.__)("License expired on ","funnel-builder")+N()(null==s?void 0:s.expires).format(Object(c.R)()):Object(i.__)("This license needs to be reactivated. Please contact support for any assistance","funnel-builder"),". "),Object(r.createElement)("span",{className:"is-reset-text"},e.activated?Object(i.__)("Got New License? ","funnel-builder"):"",Object(r.createElement)("span",{className:"is-link",onClick:function(){return D("")}},Object(i.__)("Reset","funnel-builder"))));return Object(r.createElement)("div",{className:l()("bwf-components-licence")},n&&Object(r.createElement)("label",{className:"components-label"},n),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g16"},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf-flex-column"},Object(r.createElement)(o.TextControl,{className:l()("bwf-license-text-input",{"has-error":Object(b.size)(M)||"expired"===w()&&g()===I}),placeholder:Object(i.__)("Enter license key here","funnel-builder"),disabled:Z(),value:I,autoComplete:"off",onChange:function(e){return D(e)}}),Object(b.size)(M)?Object(r.createElement)("div",{className:"bwf-error-text"},M):null),Object(r.createElement)(O.a,{isSecondary:"empty"===w()||"deactivated"===w()||"expired"===w()||"invalid"===w(),isBusy:"activated"!==w()&&J,disabled:J,className:l()("bwf-ripple bwf-license-action-btn",{"is-inactive":"activated"===w()}),onClick:function(){return function(){return Object(b.isEmpty)(I)?(Y(!0),void q(Object(i.__)("Please enter licence key","funnel-builder"))):"activated"!==w()&&I.startsWith("xxxx")?(Y(!0),void q(Object(i.__)("Please enter a valid licence key","funnel-builder"))):void("activated"===w()?(Y(!1),V(!0)):W())}(s,_)}},function(){switch(w()){case"activated":return Object(i.__)("Deactivate","funnel-builder");default:return Object(i.__)("Activate","funnel-builder")}}())),function(){switch(w()){case"activated":return Object(r.createElement)("p",{className:"hint"},"3"===(null==s?void 0:s.subscription_status)&&s.expires?Object(r.createElement)(r.Fragment,null,Object(i.__)("This license has been cancelled and will expire on ","funnel-builder"),N()(null==s?void 0:s.expires).format("MMMM D, YYYY")):s.expires?Object(r.createElement)(r.Fragment,null,Object(i.__)("License Expires on ","funnel-builder"),N()(null==s?void 0:s.expires).format("MMMM D, YYYY")):Object(i.__)("Lifetime license","funnel-builder"));case"empty":case"deactivated":return Object(r.createElement)("div",{className:"hint bwf-content"},Object(i.__)("Already Purchased? Access your license key in your account. ","funnel-builder"),Object(r.createElement)("a",{href:"https://myaccount.funnelkit.com/",target:"_blank",rel:"noreferrer"},Object(i.__)("Login to your FunnelKit Account","funnel-builder")));case"expired":case"invalid":return X}}()),Object(r.createElement)(f.a,{confirmText:L.confirmText,confirmButtonText:L.buttonConfirm,cancelButtonText:L.buttonCancel,onConfirm:L.onConfirm,isLoading:L.loading,successMessage:L.success,errorMessage:L.error,content:L.content,onRequestClose:function(){return R({status:!1})},isOpen:L.status,autoHide:L.hide,closeIcon:!0}),z&&Object(r.createElement)(E,{isLoading:J,onAction:function(){W()},onclose:function(){return V(!1)}}))}},315:function(e,t,n){"use strict";var r=n(2),a=n(19),l=n(4),c=n(274),i=["fetch","setStateProp"];function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(a.a)("settings"),t=e.fetch,n=e.setStateProp,o=b(e,i),u=Object(c.a)().data,f=void 0===u?{}:u,d=(f.woofunnels_general_settings&&f.woofunnels_general_settings.general||{}).fields,m=void 0===d?[]:d;return s(s({},o),{},{fetch:function(){t("GET",Object(l.r)("/funnels/global-settings/"))},setSettingsData:function(e){return n("data",e)},updateLicense:function(e){m&&Object(r.isArray)(m)&&m.length&&(f.woofunnels_general_settings.general.fields=e,n("data",f))}})}},316:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){"use strict";var r=n(0),a=n(1),l=(n(316),n(9)),c=n(7),i=n(21);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),o=(e.btnLabel,e.dropZoneContent),s=Object(i.b)().showSnackbar,u=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):s(Object(a.__)("Uploaded file is not valid.","funnel-builder")):s(Object(a.__)("Uploaded file not found","funnel-builder"))},b=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(l.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(l.FormFileUpload,{isSecondary:!0,accept:b,onChange:function(e){return u(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},o||null,"application/json"===b&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(a.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(a.__)("(Maximum file size allowed 10 MB)","funnnel-builder"))))}}),Object(r.createElement)(l.DropZone,{onFilesDrop:u,onHTMLDrop:u,onDrop:u}))))}},322:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(110),c=n(31),i=n(4),o=n(40),s=n(62),u=n(30),b=n(41),f=n(14),d=["funnel_id"];function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t,n,p,O,j,v=e.selected,_=e.headerData,y=e.funnelID,h=e.stepId,w=e.type,g=e.checkoutId,E=e.offerId,S=e.editor,N=Object(u.a)(),k=N.setFunnelTitle,C=N.setFunnelData,P=Object(o.a)(),x=P.getFunnelData,T=P.getLoading,A=P.getPreviousStep,I=P.getStepId,D=Object(b.a)(),F=D.setStepFunnelData,L=(D.setStepData,x()),R=T(),B=A(),M=I(),q=Object(f.i)(),U=q.funnel_id,z=(m(q,d),c.a.getSteps().filter((function(e){return"wfob"===w?e.id===g:e.id===h}))),V=null===(t=z[0])||void 0===t||null===(n=t.substeps)||void 0===n?void 0:n.wc_order_bump,G=null==V?void 0:V.filter((function(e){return e.id==h})),J=null===(p=z[0])||void 0===p||null===(O=p.substeps)||void 0===O?void 0:O.offer,$=null==J?void 0:J.filter((function(e){return e.id==E})),H="";if("wfob"===w)void 0!==G&&(H=null===(j=G[0])||void 0===j?void 0:j._data.title);else if("offer"===w){var K;if(void 0!==$)H=null===(K=$[0])||void 0===K?void 0:K._data.title}else{var Y;H=null===(Y=z[0])||void 0===Y?void 0:Y._data.title}var Q=Object(a.size)(_),W=Object(s.a)(),Z=W.setActiveMultiple,X=(W.resetHeaderMenu,W.setL2NavType),ee=W.setL2Nav,te=W.setStepHeader,ne=W.setPageBackLink,re=W.setIsStepNavActive;W.setL2PostTitle;Object(r.useEffect)((function(){var e;te(""),X("menu"),ee(_),Z({leftNav:Object(i.cb)()?"store-checkout":"funnels",rightNav:v}),re(!0),ne((e="admin.php?page=bwf&path=","experiment"===B?"".concat(e).concat(Object(i.cb)()?"/store-checkout":"/funnels/".concat(y),"/experiments/").concat(M):"canvas"===B?"".concat(e).concat(Object(i.cb)()?"/store-checkout":"/funnels/".concat(y),"/canvas"):"".concat(e).concat(Object(i.cb)()?"/store-checkout/steps":"/funnels/".concat(y,"/steps")))),te(Object(r.createElement)(l.a,{stepId:h,modalTitle:H,type:w,offerId:E,checkoutId:g,disabled:Q?[]:["preview"]}))}),[v,y,h,H,w,S,E,g,Q]);var ae=L.title,le=void 0===ae?"":ae,ce=L.status,ie=void 0===ce?"":ce,oe=L.id;return Object(r.useEffect)((function(){Object(a.size)(L)>0&&(R||""===le||(k(le),C("status",ie)),Object(i.cb)()||!oe||U||Object(f.k)({funnel_id:oe}))}),[R,L,oe,U]),Object(r.useEffect)((function(){return function(){re(!1),ee({}),ne(""),F({})}}),[]),!0}},323:function(e,t,n){},324:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(4),c=(n(349),n(7)),i=n(2),o=["options","label","selected","onChange","disabled"];function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t=e.options,n=e.label,b=e.selected,f=e.onChange,m=e.disabled,p=void 0!==m&&m,O=(d(e,o),Object(r.useRef)()),j=u(Object(r.useState)(!1),2),v=j[0],_=j[1],y=u(Object(r.useState)([]),2),h=y[0],w=y[1],g=u(Object(r.useState)([]),2),E=g[0],S=g[1],N=u(Object(r.useState)(""),2),k=N[0],C=N[1],P=u(Object(r.useState)(t),2),x=P[0],T=P[1],A=u(Object(r.useState)(0),2),I=A[0],D=A[1],F=u(Object(r.useState)({}),2),L=F[0],R=F[1],B=u(Object(r.useState)(),2),M=B[0],q=B[1];Object(l.mb)(O,(function(){return _(!1)})),Object(r.useEffect)((function(){if(Array.isArray(b)&&b.length>0){w(b);var e=null==b?void 0:b.map((function(e){return e.value}));S(e)}}),[]),Object(r.useEffect)((function(){D(0)}),[v]),Object(r.useEffect)((function(){Object(i.size)(x)>1&&void 0!==x&&x.forEach((function(e,t){t===I&&q(null==e?void 0:e.value)}))}),[I,v]),Object(r.useEffect)((function(){Object(i.size)(x)>1&&void 0!==x&&x.forEach((function(e,t){(null==e?void 0:e.value)==(null==M?void 0:M.value)&&D(t)}))}),[M]);return Object(r.useEffect)((function(){if(Object(i.size)(x)>1&&void 0!==x){var e=x.filter((function(e,t){var n;if(null==E||!E.includes(null==e||null===(n=e.value)||void 0===n?void 0:n.toString()))return e}));R(e)}}),[E]),Object(r.useEffect)((function(){f(h)}),[h,E]),Object(r.useEffect)((function(){var e=null==t?void 0:t.filter((function(e){return""==k||e.label.toLowerCase().includes(k.toLowerCase())?e:void 0}));Object(i.isEmpty)(e)?T([{value:"no-data-found",label:"No Data Found"}]):T(e)}),[k]),Object(r.createElement)("div",{className:"bwf-multi-select components-base-control bwf-multiselect-control ".concat(p?"is-disabled":"")},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",{className:"components-base-control__label"},n),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("div",{className:"multiselect ".concat(v&&"multiselect--active"," "),style:{width:"30%"},tabIndex:"-1",onClick:function(){return _((function(e){return!e}))},ref:O},Object(r.createElement)("div",{className:"multiselect__select"},Object(r.createElement)(c.a,{icon:"angle-down",size:"16"})),Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("div",{className:"multiselect__tags-wrap"},null==h?void 0:h.map((function(e,t){return Object(r.createElement)("span",{className:"multiselect__tag bwf-badge",key:t},Object(r.createElement)("span",null,e.label," "),Object(r.createElement)("span",{onClick:function(){var t=h.filter((function(t){return t.value!==e.value}));w(t);var n=t.map((function(e){return e.value}));S(n),_(!1)}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:12,height:12})))}))),Object(r.createElement)("div",{className:"multiselect__spinner",style:{display:"none"}}),0==h.length&&Object(r.createElement)("span",null,Object(r.createElement)("span",{className:"multiselect__single"},"Select option"))),Object(r.createElement)("div",{className:"".concat(v?"multiselect__content-wrapper":"bwf-hide")},Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},Object(r.createElement)("li",null,v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("input",{type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){return C(e.target.value)},ref:function(e){e&&e.style.setProperty("margin-left","unset","important")},className:"bwf__multiselect__input",onKeyDown:function(e){38===e.keyCode&&I>0?L.map((function(e,t){e.value==M&&q(L[t-1])})):40===e.keyCode&&I<(null==x?void 0:x.length)-1&&L.map((function(e,t){e.value==M&&q(L[t+1])}))},onKeyPress:function(e){if("Enter"===e.key){var t,n,r;if(e.preventDefault(),!E.includes(null===(t=x[I])||void 0===t?void 0:t.value))w([].concat(s(h),[x[I]])),S([].concat(s(E),[null===(r=x[I])||void 0===r?void 0:r.value]));if(E.includes(null===(n=x[I])||void 0===n?void 0:n.value)){var a=h.filter((function(e){var t;return e.value!==(null===(t=x[I])||void 0===t?void 0:t.value)}));w(a);var l=a.map((function(e){return e.value}));S(l)}setTimeout((function(){_(!1)})),C("")}},placeholder:Object(a.__)("Search...","funnel-builder"),value:k||""}),Object(r.createElement)("span",{className:"bwf_multiselect_input_icon"},Object(r.createElement)(c.a,{icon:"search",width:16,height:16})))),x.map((function(e,t){return Object(r.createElement)("li",{className:"multiselect__element_value",key:t,onClick:function(){if("no-data-found"!==e.value){if(E.includes(e.value)||(w([].concat(s(h),[e])),S([].concat(s(E),[e.value]))),E.includes(e.value)){var t=h.filter((function(t){return t.value!==e.value}));w(t);var n=t.map((function(e){return e.value}));S(n)}setTimeout((function(){_(!1)})),C("")}},onMouseOver:function(){return D(t)},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.value&&Object(r.createElement)("span",{"data-select":Object(a.__)("Press enter to select","funnel-builder"),"data-selected":Object(a.__)("Select to remove","funnel-builder"),"data-deselect":Object(a.__)("Press enter to remove","funnel-builder"),className:" multiselect__option  ".concat(E.includes(e.value)&&"multiselect__option--selected","  ").concat(I===t?"multi-select-active":null," ").concat(I===t?"multi-select-selected-data":null," ")},Object(r.createElement)("span",null,null==e?void 0:e.label)),e&&"no-data-found"==e.value&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.label))}))))))))}},325:function(e,t,n){"use strict";n.d(t,"a",(function(){return ct}));var r=n(0),a=n(2),l=n(17),c=n.n(l),i=n(119),o=n(13),s=n.n(o),u=n(1),b=n(14),f=n(6),d=n.n(f),m=n(9),p=(n(340),n(51));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,l,c=w(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props.src;this.setState({isLoading:!1}),this.props.onLoad(!!e)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,l=e.src,c=e.title,i=this.state.isLoading,o=d()("wffn-web-preview",t,{"is-loading":i});return Object(r.createElement)("div",{className:o},(i||Object(a.isEmpty)(l))&&n,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:v({},Object(a.isEmpty)(l)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:c,src:l})))}}])&&y(t.prototype,n),l&&y(t,l),i}(r.Component);N.propTypes={className:c.a.string,loadingContent:c.a.node,onLoad:c.a.func,src:c.a.string.isRequired,title:c.a.string.isRequired},N.defaultProps={loadingContent:Object(r.createElement)(p.a,{size:"xl"}),onLoad:a.noop};var k=N,C=n(7),P=n(275),x=n(80),T=n(4);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){var t={title:Object(u.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(u.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(u.__)("Upgrade to PRO Now","funnel-builder"),proLink:T.hb,action:!1},n=e.onRequestClose,a=e.isOpen,l=e.children,c=void 0===l?null:l,i=e.className,o=e.module,s=(e.isTemplate,e.modalContent?I(I({},t),e.modalContent):t);return a?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:d()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",i),isDismissible:!1,onRequestClose:function(){return n()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(P.a,{title:Object(r.createElement)(r.Fragment,null,s.title),onClose:n}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof s.content?s.content.replace("{{feature_name}}",s.feature):s.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},s.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},s.demoLabel),!s.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},Object(u.__)("Cancel")),Object(r.createElement)(x.a,{module:o,isPrimary:!0,isTemplate:!0})),c)):null};F.defaultProps={isOpen:!1,onRequestClose:function(){}};var L=F,R=n(76),B=n(251),M=(n(341),n(77)),q=n(31),U=n(253),z=(n(342),["src","onLoaded"]);function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var H=function(e){var t=e.src,n=e.onLoaded,l=void 0===n?a.noop:n,c=$(e,z),i=G(Object(r.useState)(!1),2),o=i[0],s=i[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){s(!0),l(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)("img",V({src:t},c)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},K=n(52),Y=n(61),Q=n(318);function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.label,n=void 0===t?"":t,l=e.id,c=void 0===l?"":l,i=e.value,o=e.onChange,s=void 0===o?a.noop:o,u=e.className,b="inspector-color-".concat(Object(K.useInstanceId)(m.ColorPicker)),f=W(Object(r.useState)(!1),2),p=f[0],O=f[1];return Object(r.createElement)("div",{className:d()("components-color-field",u)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:b},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(m.ColorIndicator,{colorValue:i})),Object(r.createElement)(m.TextControl,{value:i||"#ffffff",className:"indicator-text"}),p&&Object(r.createElement)(Y.a,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(m.ColorPicker,{color:i,onChangeComplete:function(e){s(e.hex,{id:c})},disableAlpha:!0}))))},ee=function(e){var t=e.setCustomizeVisible,n=W(Object(r.useState)(!1),2),a=n[0],l=n[1],c=W(Object(r.useState)(""),2),i=c[0],o=c[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(m.Button,{onClick:function(){return t(!1)}},Object(r.createElement)(C.a,{icon:"arrow-left",size:16})),Object(u.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(u.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),a?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:a,alt:"logo"}),Object(r.createElement)(m.Button,{className:"bwf-delete-btn",onClick:function(){return l(!1)}},Object(r.createElement)(C.a,{icon:"trash",size:20})))):Object(r.createElement)(Q.a,{onFileSelected:function(e){l(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(u.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(X,{label:Object(u.__)("Color","funnel-builder"),value:i,onChange:function(e){return o(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(m.Button,{isPrimary:!0},Object(u.__)("Save","funnel-builder")),Object(r.createElement)(m.Button,null,Object(u.__)("Reset","funnel-builder"))))},te=n(21),ne=n(24);function re(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,l=e.funnelId,c=e.onClick,i=e.activeThumbnail,o=e.previewCustomizeEnabled,s=e.tempPro,b=e.importType,f=Object(te.a)().isProTemplatesLocked,p=Object(te.a)("ck").isProTemplatesLocked,O=Object(te.a)("ul").isProTemplatesLocked,j=ae(Object(r.useState)(!1),2),v=j[0],_=j[1];return Object(a.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},re(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},v?Object(r.createElement)(ee,{setCustomizeVisible:_}):t&&t.map((function(e,t){return Object(r.createElement)("label",{key:t,className:d()("wffn_template_page_options",{active_preview:e.id==i}),onClick:function(){return c(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},l?Object(r.createElement)(H,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(["wc_checkout","wc_thankyou"].includes("step"===b?null==e?void 0:e.type:null==e?void 0:e.step)?p:!["upsell"].includes("step"===b?null==e?void 0:e.type:null==e?void 0:e.step)||"yes"===s&&"step"!==b?f:O)&&Object(r.createElement)(ne.a,null))})),o&&!v&&Object(r.createElement)(m.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return _(!0)}},Object(r.createElement)(C.a,{icon:"edit",size:20,color:"#ffffff"}),Object(u.__)("Customize","funnel-builder")))},oe=function(e){var t=e.type,n=e.filters,l=e.FB_PRO_STATUS,c=e.activeSubFilter,i=e.onClick,o=e.activeTemplateFilters,s=e.tempPro,b=e.templateType,f=e.funnelId,m=e.funnelGroup,p=e.hasPRO,O=e.importType,j=Object(te.a)("ck").isProTemplatesLocked;if(!t)return null;var v=n[t];if(void 0===v||Object(a.isEmpty)(v))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var _=[],y=function(e){o.includes(e)&&_.push(Object(r.createElement)("div",{className:d()("template-filter",{"active-filter":c==e}),onClick:function(){return i(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,v[e]),!("wc_checkout"===b&&!j&&(!f||"step"!==O)&&m.includes("wc_checkout"))&&(p(s||"no")||["2","3"].includes(e)&&!0!==l||"popup"===e&&!0!==l)&&Object(r.createElement)(ne.a,null)))};for(var h in v)y(h);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(u.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(u.__)("Optin Form","funnel-builder"):Object(u.__)("Type","funnel-builder"),":"),_))},se=n(65),ue=function(e){var t=e.funnelId,n=e.activeGroup,a=e.activeSubFilter,l=e.activeStep,c=e.templateName,i=e.isTemplatePro,o=e.funnelGroup,s=e.hasPRO,b=e.importType,f=Object(te.a)("ck").isProTemplatesLocked,d=Object(te.a)("ul").isProTemplatesLocked,m=Object(te.a)().isProTemplatesLocked,p=s("status");if("upsell"===n&&!0!==p)return d&&Object(r.createElement)(se.a,{dismissable:!1,proLink:Object(T.M)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===b?n:l){case"upsell":if(!0!==p)return d&&Object(r.createElement)(se.a,{dismissable:!1,proLink:Object(T.M)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((f||t&&"step"===b||!o.includes("wc_checkout"))&&(s(i)||["2","3"].includes(a)&&!0!==p)){Object(u.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"2"===a?Object(u.__)("Two-Step Checkout is a pro feature. To access it, consider upgrading.","funnel-builder"):"3"===a&&Object(u.__)("Three-Step Checkout is a pro feature. To access it, consider upgrading.","funnel-builder"),Object(r.createElement)(se.a,{dismissable:!1,module:(null==o?void 0:o.includes("wc_checkout"))&&"ck",proLink:Object(T.M)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0})}break;case"optin":if(s(i||"no")||"popup"===a&&!0!==p){Object(u.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==a&&Object(r.createElement)(r.Fragment,null,Object(u.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},a),Object(u.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(se.a,{dismissable:!1,proLink:Object(T.M)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0})}}var O=t&&"step"===b?n:l;return"yes"===i&&("wc_checkout"===O||"wc_thankyou"===O?f:"upsell"===O?d:m)?Object(r.createElement)(se.a,{dismissable:!1,module:(null==o?void 0:o.includes("wc_checkout"))&&("wc_checkout"===O||"wc_thankyou"===O)&&"ck",proLink:Object(T.M)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0}):""},be=n(22),fe=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},de=fe.logo?fe.logo:"",me=function(e){var t=e.viewport,n=e.setviewport,l=e.templateName,c=e.isTemplatePro,i=e.onRequestClose,o=e.importing,s=e.onClick,b=e.onClickPro,f=e.activeGroup,m=e.isCheckoutPro,p=e.isOptinPro,O=e.activeStep,j=e.funnelId,v=e.importType,_=e.templateGroup,y=e.hasPRO,h=e.stepId,w=Object(te.a)("ck").isProTemplatesLocked,g=Object(B.a)().getImportBtnLabel(),E=Object(a.isEmpty)(g)?"upsell"===f||j&&"step"===v?Object(u.__)("Import This Template","funnel-builder"):Object(u.__)("Import This Funnel","funnel-builder"):g,S=y("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:de,alt:"Funnel Builder for WordPress",width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},l)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"desktop"===t}),onClick:function(){return n("desktop")},title:"Desktop Viewport"},Object(r.createElement)(C.a,{icon:"desktop",color:"desktop"===t&&"#fff"})),Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"tablet"===t}),onClick:function(){return n("tablet")},title:"Tablet Viewport"},Object(r.createElement)(C.a,{icon:"tablet",color:"tablet"===t&&"#fff"})),Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"mobile"===t}),onClick:function(){return n("mobile")},title:"Mobile Viewport"},Object(r.createElement)(C.a,{icon:"mobile",color:"mobile"===t&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(r.Fragment,null,(y(c||"no")||!0!==S&&(m||p||"upsell"===O))&&(Object(a.isEmpty)(_)||!_.includes("wc_checkout")||w)?Object(r.createElement)(be.a,{isPrimary:!0,onClick:b},E):Object(r.createElement)(be.a,{isPrimary:!0,onClick:s,disabled:o&&o.group===f,isBusy:(!!h||"funnel"===v)&&j&&o&&o.group===f},E))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(be.a,{onClick:i},Object(r.createElement)(C.a,{icon:"close",size:"24"}))))};function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e){var t=e.isOpen,n=e.onRequestClose,l=e.activeGroup,c=e.activeEditor,o=e.importing,s=e.filters,f=e.hasPRO,p=e.previewData,O=e.isTemplateLoading,j=e.activeFilter,v=e.setPreviewErr,_=e.parentRoute,y=e.funnelId,h=e.importType,w=e.updateQueryString,g=e.previewCustomizeEnabled,E=e.urlDependency,S=e.stepId,N=e.onImport,C=e.children,P=Object(b.i)(),A=p(),I=A.thumbnails,D=A.activeTemplate,F=A.previews,z=void 0===F?[]:F,V=Object(i.useParams)().step,G=q.a.getFunnel(),J=!(!D||!D.type)&&D.type,$=E?V:null==D?void 0:D.type;Object(r.useEffect)((function(){y||(A.success?v(!1):!1===A.success&&v(!0))}),[A.success]),Object(r.useEffect)((function(){if(J)if("wc_checkout"===J||"optin"===J){var e=!(!D||!D.filters)&&D.filters[0];P.group&&("wc_checkout"===J&&["1","2","3"].includes(P.group)||"optin"===J&&["inline","popup"].includes(P.group))?K(P.group):(K(e),w({group:e}))}else P.group&&(delete P.group,w({},Object(b.g)(),P))}),[P.group,J]),Object(r.useEffect)((function(){!Object(a.isEmpty)(null==G?void 0:G.steps)&&"funnel"===h&&y&&w({},"/funnels/".concat(G.id))}),[G]);var H=Object(M.a)(),K=H.setActiveSubFilter,Y=H.setCurrentTemplate,Q=(0,Object(B.a)().getCurrentTemplate)(),W=Oe(Object(r.useState)(!1),2),Z=(W[0],W[1]),X=f("status"),ee=Oe(Object(r.useState)("desktop"),2),te=ee[0],ne=ee[1],re=Oe(Object(r.useState)(!1),2),ae=re[0],le=re[1],ce=Oe(Object(r.useState)(!1),2),se=ce[0],be=ce[1],fe=Oe(Object(r.useState)(!y),2),de=fe[0],je=fe[1],ve=Oe(Object(r.useState)([]),2),_e=ve[0],ye=ve[1];Object(r.useEffect)((function(){if(Z(!1),D&&!_e.includes(D.prevId)){var e=JSON.parse(JSON.stringify(_e));e.push(D.prevId),ye(e)}}),[null==D?void 0:D.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(I&&!y&&de){var e=I||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&je(!1)}}))}}),[I]);var he,we=("wc_checkout"===l||$&&"wc_checkout"===$)&&"1"!==j,ge=("optin"===l||$&&"optin"===$)&&"inline"!==j;return A?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(me,(pe(he={viewport:te,setviewport:ne,onRequestClose:n,importing:o,activeGroup:l,isCheckoutPro:we,isOptinPro:ge,activeStep:$,funnelId:y,importType:h,hasPRO:f,stepId:S,onClickPro:function(){!1===X&&"yes"!==(null==D?void 0:D.tempPro)&&(we||ge||"upsell"===$)?be(!0):le(!0)},onClick:function(){return N()}},"onRequestClose",(function(){y?w({},"".concat(_)):(w({},"".concat(_,"/").concat(l)),K(!1)),n()})),pe(he,"templateName",null==D?void 0:D.name),pe(he,"isTemplatePro",null==D?void 0:D.tempPro),pe(he,"templateGroup",null==D?void 0:D.funnelGroup),he)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:d()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(oe,{type:null==D?void 0:D.type,filters:s,FB_PRO_STATUS:X,activeSubFilter:j,onClick:function(e){if(K(e),w({group:e}),y){var t=Q.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||Y({id:n[e],template:{group_type:n},steps:I.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==D?void 0:D.filters,hasPRO:f,tempPro:null==D?void 0:D.tempPro,templateType:null==D?void 0:D.type,funnelId:y,funnelGroup:null==D?void 0:D.funnelGroup,importType:h}),!O&&Object(r.createElement)(ue,{funnelId:y,activeGroup:l,activeSubFilter:j,activeStep:$,hasPRO:f,templateName:null==D?void 0:D.name,isTemplatePro:null==D?void 0:D.pro,funnelGroup:null==D?void 0:D.funnelGroup,importType:h}),Object(a.isEmpty)(z)||Object(a.isEmpty)(_e)?"":z.map((function(e,t){var n=(null==e?void 0:e.preview)||"",a=(null==e?void 0:e.id)||"";return Object(r.createElement)(k,{key:t,className:d()("wffn_template_preview_frame",te,{"hide-preview":e.id!==D.prevId}),title:"Funnel Template",src:_e.includes(a)?n:"",onLoad:function(e){if(Z(!0),e&&z[t+1]){var n=JSON.parse(JSON.stringify(_e));n.push(z[t+1].id),ye(n)}}})}))),Object(r.createElement)(ie,{thumbnailsData:I,hasPlaceholder:de,funnelId:y,previewCustomizeEnabled:g,importType:h,tempPro:null==D?void 0:D.tempPro,onClick:function(e){Y({id:e.funnel,template:e,activeStep:e.step,steps:I.map((function(e){return{type:e.step,slug:e.lug}}))}),w({},y&&"step"===h?"".concat(_,"/templates/").concat(l,"/").concat(c,"/preview/").concat(e.funnel):y&&"funnel"===h?"".concat(_,"/templates/").concat(l,"/").concat(c,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===l?"".concat(_,"/").concat(l,"/").concat(c,"/preview/").concat(e.funnel):"".concat(_,"/").concat(l,"/").concat(c,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==D?void 0:D.thumbnail}))),C,Object(r.createElement)(L,{isOpen:ae,onRequestClose:function(){return le(!1)},modalContent:Object(U.c)({templateName:null==D?void 0:D.name,FB_PRO_STATUS:X,funnelId:y,activeGroup:l,activeStep:$}),module:["wc_checkout","wc_thankyou"].includes(l)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(f((null==D?void 0:D.pro)||"no")||"yes"!==(null==D?void 0:D.pro)&&(we||ge||"upsell"===$))&&Object(r.createElement)(R.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(u.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(u.sprintf)(Object(u.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==D?void 0:D.name),Object(r.createElement)("mark",null,Object(u.__)("Two Step","funnel-builder")),Object(u.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(u.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(u.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(u.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(x.a,{module:["wc_checkout","wc_thankyou"].includes(l)&&"ck",isPrimary:!0}),cancelButtonText:Object(u.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===X?w({},"/settings/"):window.open(Object(T.M)([y?"Step":"Template",y?l:"upsell"===l?"upsell":$,null==D?void 0:D.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){S||"funnel"===h||N();var e="1";if("optin"===l||"optin"===$?(K("inline"),w({group:"inline"}),e="inline"):(K("1"),w({group:"1"})),y){var t=Q.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||Y({id:n[e],template:{group_type:n},steps:I.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){be(!1)},isOpen:se,confirmDescription:Object(u.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))):""}n(295);var _e=n(30),ye=n(55),he=n(312),we=n(38),ge=n(302),Ee=n(246),Se=n(247),Ne=(n(27),n(78));function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t,n,l,c=e.onCloseModal,i=e.onComplete,o=e.isWorking,s=e.activeTemplateGroup,b=(e.showCloneOption,e.templateGroup),f=e.className,p=e.children,O=xe(Object(r.useState)(""),2),j=O[0],v=O[1],_=xe(Object(r.useState)({}),2),y=(_[0],_[1]),h=xe(Object(r.useState)(""),2),w=h[0],g=h[1],E=xe(Object(r.useState)(null),2),S=E[0],N=E[1],k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return J((function(r){return n?(delete r[t],r):Ce(Ce({},r),{},Pe({},e,t))}))},C=xe(Object(r.useState)((function(){return s})),2),P=C[0],x=(C[1],q.a.getSteps()),A=Object(B.a)(),I=A.getScratchTemplateType,D=A.getCurrentTemplate,F=A.getImportOffer,L=I(),R=D(),M=F();Object(r.useEffect)((function(){y({})}),[]);var U=function(){var e;v(""),i("upsell"===P?G:"new"===L?{title:w}:{title:"".concat(null==S||null===(e=S.step)||void 0===e?void 0:e.name," Copy")},P,!(!S||!S.copyFrom)&&S.step)},z=(Object(r.useMemo)((function(){return Object.keys(b).map((function(e){return{key:e,label:b[e]}}))}),[b]),function(){return x.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(we.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),V=xe(Object(r.useState)(Ce({type:0===z().length?"new":"existing"},!Object(a.isNull)(M)&&{title:M.parent_title,insert_into:M.parent_id})),2),G=V[0],J=V[1],$=function(){if("upsell"===P){var e,t,n,r,l,c;if("new"===L)return"existing"===G.type?Object(a.isEmpty)(null===(n=G.offer_title)||void 0===n?void 0:n.trim())||!G.insert_into:Object(a.isEmpty)(null===(e=G.title)||void 0===e?void 0:e.trim())||Object(a.isEmpty)(null===(t=G.offer_title)||void 0===t?void 0:t.trim());if("existing"===L)return"existing"===G.type?!G.insert_into||Object(a.isNull)(S):Object(a.isEmpty)(null===(r=G.title)||void 0===r?void 0:r.trim())||Object(a.isNull)(S);if(!R.isBuildFromScratch)return Object(a.isEmpty)(null===(l=G.title)||void 0===l?void 0:l.trim())||Object(a.isEmpty)(null===(c=G.offer_title)||void 0===c?void 0:c.trim())}return"new"!==L&&R.isBuildFromScratch?"existing"===L?Object(a.isNull)(S):void 0:Object(a.isEmpty)(w.trim())},H=("new"===G.type||!Object(a.isNull)(M))&&Object(r.createElement)(m.TextControl,{placeholder:Object(u.__)("Type here…","funnel-builder"),label:Object(u.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(we.decodeEntities)(G.title))&&void 0!==t?t:"",onChange:function(e){return k("title",e)},disabled:!Object(a.isNull)(M)||o});return Object(r.useEffect)((function(){1===z().length&&k("insert_into",z()[0].key)}),[]),Object(r.createElement)(m.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(u.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",T.lb[P],")")),className:d()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",f),onRequestClose:function(){return c()},isDismissible:!0,shouldCloseOnClickOutside:!o,overlayClassName:"bwf-create-funnel-modal__overlay"},p,j&&Object(r.createElement)(Ne.a,{errorMessage:j}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||$()||o||U()},role:"main"},"upsell"===P&&"new"!==G.type&&!Object(a.isNull)(M)&&H,"existing"===L&&R.isBuildFromScratch&&Object(r.createElement)(ge.a,{step:{type:"upsell"===P?"offer":P,title:b[P],is_substep:"upsell"===P},onStepSelected:function(e){N(e)},key:"bwf-clone-step-".concat(P)}),"upsell"===P?Object(r.createElement)(r.Fragment,null,!Object(a.isEmpty)(z())&&Object(a.isNull)(M)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(u.__)("Add Offers","funnel-builder")),Object(r.createElement)(Se.a,{options:[{value:"existing",label:Object(u.__)("To Existing Upsell","funnel-builder"),disabled:0===z().length},{value:"new",label:Object(u.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=G.type)&&void 0!==n?n:0===z().length?"new":"existing",onChange:function(e){k("inherit_from","",!0),k("type",e)}})),"existing"===G.type&&Object(a.isNull)(M)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ee.b,{label:Object(u.__)("Select Upsell","funnel-builder"),options:z(),selected:1===z().length?z()[0].key:G.insert_into,onChange:function(e){k("insert_into",e)}})),"new"===G.type&&Object(a.isNull)(M)&&H,"new"===L&&Object(r.createElement)(m.TextControl,{placeholder:Object(u.__)("Type here…","funnel-builder"),label:Object(u.__)("Offer Name","funnel-builder"),value:null!==(l=G.offer_title)&&void 0!==l?l:"",onChange:function(e){return k("offer_title",e)},disabled:o})):"new"===L?Object(r.createElement)(m.TextControl,{placeholder:Object(u.__)("Enter step name","funnel-builder"),label:Object(u.__)("Step Name","funnel-builder"),value:null!=w?w:"",onChange:function(e){return g(e)},disabled:o}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(be.a,{onClick:c,className:"bwf-modal-cancel-btn"},Object(u.__)("Cancel","funnel-builder")),Object(r.createElement)(be.a,{isPrimary:!0,disabled:$()||o,isBusy:o,onClick:U,className:$()?"bwf-no-ripple":"",name:"add-funnel"},Object(u.__)("Add","funnel-builder")))))},Ie=n(42);n(343);function De(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){var t=e.showTemplatesNav,n=void 0===t||t,a=e.showEditors,l=void 0===a||a;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},n&&Object(r.createElement)(Ie.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},De(Array(5)).map((function(e,t){return Object(r.createElement)(Ie.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),l&&Object(r.createElement)(Ie.a,{gap:6,justify:"flex-start"},De(Array(5)).map((function(e,t){return Object(r.createElement)(Ie.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},De(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},Re=n(47),Be=(n(33),function(e){var t=e.editorList,n=e.activeEditor,a=e.onChange;return Object(r.createElement)(Ie.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(Se.a,{options:Object.keys(t).map((function(e){return{value:e,label:t[e]}})),selected:n,onChange:function(e){return a(e)}}))}),Me=n(28),qe=n(75),Ue=n(18),ze=["edit"];function Ve(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ge=function(e){var t=e.funnelId,n=e.disabledNavs,a=e.activeTemplateGroup,l=e.templateGroup,c=e.onClick,o=e.urlDependency,s=Object(te.a)("ul").isProTemplatesLocked,u=Object(i.useParams)().importType,f={},m=window.location&&window.location.search?Object(Me.parse)(window.location.search.substring(1)):{},p=(m.edit,Ve(m,ze));for(var O in l)"funnel"===u&&"upsell"===O||(f[O]={},f[O].name=l[O],f[O].isExclusive="upsell"===O,f[O].link=decodeURIComponent(Object(b.f)({},"/templates/".concat(O),p)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(Ie.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(f).map((function(e,l){var i=e===a,u=n.find((function(t){return t.key===e}));return Object(r.createElement)(Ie.c,{key:"bwf-temp-nav-".concat(l)},0===t&&o?Object(r.createElement)(Ue.a,{className:d()("bwf-template-nav-item",{"is-selected":m.path==="/templates/"+e||"/templates"===m.path&&"funnel"===e}),href:f[e].link},f[e].name,f[e].isExclusive&&Object(r.createElement)(ne.a,null)):Object(r.createElement)(qe.a,{toolTipText:u&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},u.message),visible:u||!1,size:366},Object(r.createElement)("div",{className:d()("bwf-template-nav-item",{"is-selected":i&&!u},{"is-disabled":u}),onClick:function(){u||c(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,f[e].name),s&&f[e].isExclusive&&Object(r.createElement)(ne.a,null))))}))))},Je=n(60);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ke(e){var t=e.importBuildFromScratch,n=(e.getRibbonName,e.activeTemplateGroup),a=e.templateID,l=void 0===a?"scratch":a,c=e.importType,i=e.stepId,o=e.importing,s=e.allowNew,b=void 0===s||s,f=$e(Object(r.useState)({status:!1}),2),d=f[0],m=f[1],p=Object(te.a)().isProFeatureLocked,O=Object(te.a)("ul").isProFeatureLocked,j=Object(M.a)().setScratchTemplateType;return Object(r.useEffect)((function(){return function(){j("new")}}),[]),Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(C.a,{icon:"add-page",width:"72",height:"72",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wffn_import_description"},"step"===c?Object(u.__)("You can quickly add step","funnel-builder"):Object(u.__)("You can design the funnel from blank","funnel-builder")),b&&Object(r.createElement)(be.a,{isGray:!0,onClick:function(e){O&&"upsell"===n?m(Qe):(j("new"),t(l,e))},isBusy:!!i&&o},Object(u.__)("Start from Blank","funnel-builder"),O&&"upsell"===n&&Object(r.createElement)(ne.a,null)),!i&&Object(r.createElement)(be.a,{isGray:!0,onClick:function(e){p?m(Ye):(j("existing"),t(l,e))}},Object(u.__)("Clone","funnel-builder"),p&&Object(r.createElement)(ne.a,null)))))))),Object(r.createElement)(Je.a,{isOpen:!!d.status,onRequestClose:function(){return m({status:!1})},modalContent:d,type:2}))}var Ye={status:!0,feature:Object(u.__)("Cloning","funnel-builder"),proLink:Object(T.M)(["Funnel","Duplicate","Upgrade","Modal"])},Qe={status:!0,feature:Object(u.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(T.M)(["Upsell","Templates","Upgrade","Modal"])},We=n(296),Ze=(n(259),{optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"}),Xe=function(e){var t=e.templateFilterCheck,n=e.templateCards,l=e.showBuildFromScratch,c=e.importBuildFromScratch,i=e.activeTemplateGroup,o=e.activeEditor,s=e.onPreview,b=e.funnelId,f=e.importType,p=e.stepId,O=e.importing,j=Object(te.a)("ul").isProTemplatesLocked,v=Object(te.a)(),_=v.isProTemplatesLocked,y=v.isLite,h=Object(te.a)("ck").isProTemplatesLocked,w=Object(M.a)().setScratchTemplateType,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)(Ke,{importBuildFromScratch:c,getRibbonName:U.b,activeTemplateGroup:i,templateID:e,importType:f,stepId:p,importing:O,allowNew:t})},E=[],S=function(e){var a,c,o=n[e];!t(o,!!o.group_type&&Object.keys(o.group_type)[0])||o.build_from_scratch&&p&&o.hasOwnProperty("allow_new")&&!o.allow_new||(!l&&o.build_from_scratch||E.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},o.build_from_scratch?g(o.slug?o.slug:e,o.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===o.pro&&(["wc_checkout","wc_thankyou"].includes(i)||null!=o&&null!==(a=o.group)&&void 0!==a&&a.some((function(e){return["wc_checkout","wc_thankyou"].includes(e)}))?h:["upsell"].includes(i)||null!=o&&null!==(c=o.group)&&void 0!==c&&c.some((function(e){return["upsell"].includes(e)}))?j:_)?Object(r.createElement)(ne.a,null):"",Object(r.createElement)("div",{className:o.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},o.thumbnail&&Object(r.createElement)(H,{src:o.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(m.Button,{onClick:function(t){w("new"),s(t,e,o)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},o.name),"funnel"===i&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Ze[null==o?void 0:o.group[0]]&&Ze[null==o?void 0:o.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},o.steps?Object(r.createElement)(r.Fragment,null,Object(u.sprintf)(Object(u._n)("%s step","%s steps",o.steps.length,"funel-builder"),o.steps.length)):null))))))};for(var N in n)S(N);return"wp_editor"===o&&Object(a.isEmpty)(E)&&E.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},g("upsell"===i?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===o&&E.push(Object(r.createElement)(We.a,{key:"other-builder-notice",type:i})),y&&("wp_editor"!==o||b||"funnel"===f)&&E.push(Object(r.createElement)("div",{className:"bwf-templates-upgrde-pro-notice"},Object(r.createElement)("div",null,Object(r.createElement)("strong",null,Object(u.__)("Browse our library of ready-made templates","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("span",null,Object(u.__)("Never start from scratch again! While Funnelkit Lite lets you create any template, save even more time with Funnelkit Pro. Upgrade now to access all templates.","funnel-builder"))),Object(r.createElement)(x.a,{isPrimary:!0,size:"md",proLink:Object(T.M)(["Template","Cards","Notice"])}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:d()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!b})},E))};function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.activeFilter,n=e.defaultBuilder,l=e.filters,c=e.editors,o=e.templates,f=e.isTemplateLoading,m=e.activeBuilder,p=e.activeTemplateGroup,O=e.templateGroup,j=void 0===O?[]:O,v=e.funnelId,_=void 0===v?0:v,y=e.showDefaultEditorNotice,h=void 0===y||y,w=e.templateCards,g=void 0===w?{}:w,E=e.previewData,S=e.onImportComplete,N=e.templateFilterCheck,k=e.showTemplatesNav,C=e.parentRoute,P=e.disabledNavs,x=void 0===P?[]:P,A=e.showBuildFromScratch,I=void 0===A||A,D=e.funnelTitleModalData,F=void 0===D?{}:D,z=e.scratchConfirmModalData,V=e.importApiPrefix,G=void 0===V?"funnels":V,J=e.templateListNotice,$=e.showImportNotice,H=void 0===$?"":$,K=e.urlDependency,Y=void 0===K||K,Q=e.showEditors,W=void 0===Q||Q,Z=e.previewCustomizeEnabled,X=void 0!==Z&&Z,ee=e.listRef,ne=e.stepId,re=Object(b.i)(),ae=Object(te.a)("ck").isProTemplatesLocked,le=Object(te.a)("ul").isProTemplatesLocked,ce=Object(te.a)().isProTemplatesLocked,ie=Object(Re.a)().updateStatus,oe=_,se=Object(te.b)(),ue=se.showSnackbar,be=se.hideSnackbar,fe=rt(Object(r.useState)(!1),2),de=fe[0],me=fe[1],pe=rt(Object(r.useState)(!1),2),Oe=pe[0],je=pe[1],we=function(){if(Y)return b.k.apply(void 0,arguments)},ge=Object(ye.a)().unsetTabData,Ee=(0,q.a.getFunnel)(),Se=Object(M.a)(),Ne=Se.fetch,ke=Se.makeDefaultEditor,Ce=Se.setActiveBuilder,Pe=Se.setActiveGroup,xe=Se.setCurrentTemplate,Te=Se.setActiveStep,Ie=Se.setActiveSubFilter,De=Se.setImportOffer,Fe=(0,Object(B.a)().getCurrentTemplate)(),Me=Object(i.useParams)(),qe=Me.builder,Ue=Me.templateId,ze=Me.filter,Ve=void 0===ze?p:ze,Je=Object(b.i)().importType,$e=ne?"step":"wc_checkout"===Je?"funnel":Je,He=Object(_e.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(a.isEmpty)(g)&&Ne(),function(){De(null),be()}}),[]),Object(r.useEffect)((function(){var e,t;qe&&!f&&Ue&&g[Ue]&&xe({id:Ue,template:g[Ue],steps:g[Ue].steps,activeStep:null!==(e=g[Ue])&&void 0!==e&&e.steps?null===(t=g[Ue])||void 0===t?void 0:t.steps[0].type:""})}),[qe,Ue,f]),Object(T.i)(Object(u.__)("Import Funnel","funnel-builder"));var Ke=rt(Object(r.useState)(!1),2),Ye=Ke[0],Qe=Ke[1],We=rt(Object(r.useState)(!1),2),Ze=We[0],et=We[1],nt=rt(Object(r.useState)(!1),2),at=nt[0],lt=nt[1],ct=rt(Object(r.useState)({}),2),it=ct[0],ot=ct[1],st=rt(Object(r.useState)(!1),2),ut=st[0],bt=st[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){Ce(m)}),[p,l,c]),Object(r.useEffect)((function(){return Ue&&xe({id:Ue,template:{}}),function(){Ce("")}}),[]),Object(r.useEffect)((function(){Oe&&(we({},"/templates"),ue(Object(u.__)("Template not found for requested URL. Please select from the list.")))}),[Oe]);var ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.noop;try{ot((function(e){return tt(tt({},e),{},{disableConfirm:!0,cancelButtonText:"",shouldCloseOnClickOutside:!1})})),s()({path:Object(T.r)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&(r(),ot({status:!1}))})).catch((function(e){ot({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.builders_options,a=e.builders_texts,l=n,c=null==Fe?void 0:Fe.isBuildFromScratch,i=!0,o=null==Fe?void 0:Fe.id;if("wp_editor"!==m&&"customizer"!==m&&void 0!==l&&l.status&&"activated"!==l.status||i){var s=a,b=s.text;"gutenberg"===m&&c&&(b=Object(u.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var f={key:"pluginActivation",status:!0,modalTitle:Object(u.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:b}}),closeIcon:!0};f.confirmButtonText=s.ButtonText,"yes"===s.show_cancel_btn&&(f.cancelButtonText="Cancel"),"gutenberg"===m&&c&&(f.cancelButtonText=Object(u.__)("No thanks","funnel-builder")),ot(tt(tt({},f),{},{onConfirm:function(){if(s.builder_link&&"install"===l.status&&"yes"===s.noInstall)return window.open(s.builder_link,"_blank"),void ot({status:!1});"yes"!==s.show_cancel_btn&&ot({status:!1}),ft(l.slug,l.init,l.status,o,t)},onCancel:function(){me(!1),et(!1),ot({status:!1})}})),et(!1)}else t()},mt=function e(n){var r=Object(U.a)(m,p),a="/funnel-offer/".concat(ne,'/design?design={"builder":"').concat(r,'","template":"').concat(n,'"}'),l="/funnel-".concat(p,"/").concat(ne,'/design?design={"builder":"').concat(r,'","template":"').concat(n,'"}');s()({path:Object(T.r)("".concat("upsell"===p?a:l)),method:"POST"}).then((function(r){if(r.success)S();else{if(!r.hasOwnProperty("builders_options"))throw ot({status:!0,modalTitle:Object(u.__)("Import Template","funnel-builder"),error:r.message||r.msg||Object(u.__)("Unable to import template. Contact Support.","funnel-builder"),content:r.error}),et(!1),r;dt(r,(function(){et({id:n,group:p,filter:t}),e(n)}))}})).catch((function(e){throw e}))},pt=function e(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];var c=r[0],i=r[1],o=r[2],b=r[3],f=o||p;et({id:c,group:f,filter:t});var d=!0;try{if(ne)return void mt(c);var O=Object.create({});O.template=c,O.builder=Object(U.a)(m,f);var j=Object.create({});if(oe&&"step"===$e){var v=b&&b.hasOwnProperty("id")?b.id:0;b?(O.title=i.title,O.inherit_from=v,O.type=f,delete O.template,delete O.builder):(O.funnel_id=oe,O.type=f,O.title=i.title,O.template_type=t),"upsell"===f&&("new"===i.type?(delete O.inherit_from,b&&(O.offer_inherit=v),Object(a.size)(i.offer_title)?O.offer_title=i.offer_title:O.offer_title=b.name):Object(a.size)(i.offer_title)?O.title=i.offer_title:O.title="".concat(b.name," Copy")),O.insert_into=i.insert_into}else{var _=E().thumbnails;_.forEach((function(e){j["upsell"===e.step?"wc_upsells":e.step]=e.slug})),O.steps=JSON.stringify(j),oe&&"funnel"===$e?O.funnel_id=Number(oe):O.title=i.title}var y=0!==oe&&"step"===$e?"upsell"===f&&"existing"===i.type?Object(T.r)("/funnel-upsell/".concat(i.insert_into,"/offers")):Object(T.r)("/funnels/".concat(oe,"/steps")):Object(T.r)("/".concat(G,"/import_template"));s()({method:"POST",data:O,path:y}).then((function(t){if(t.hasOwnProperty("builders_options"))dt(t,(function(){e.apply(void 0,r)}));else if(t.status&&!0===t.status){if(t.setup&&ie(t.setup),d=!1,oe||(t.funnel_id?Ot(t.funnel_id):ot({status:!0,modalTitle:Object(u.__)("Import Template","funnel-builder"),error:Object(u.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==oe&&S){if("funnel"===$e&&He(!1),"upsell"===f&&i.hasOwnProperty("insert_into")&&""!==i.insert_into&&Ee.steps){var n=Ee.steps.findIndex((function(e){return parseInt(e.id)===parseInt(i.insert_into)})),a=Ee.steps[n].substeps;a.hasOwnProperty("offer")&&a.offer.length>0&&a.offer.map((function(e){ge("offer",e.id,"products",e.id)}))}S(t)}}else ot({status:!0,modalTitle:Object(u.__)("Import Template","funnel-builder"),error:t.message||t.msg||Object(u.__)("Unable to import template. Contact Support.","funnel-builder"),content:t.error}),me(!1)})).catch((function(e){ot({status:!0,error:e.message||e.msg}),me(!1)})).finally((function(){d&&et(!1)}))}catch(e){console.log(e),et(!1)}},Ot=function e(t){try{s()({path:Object(T.r)("/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?S?(Qe(!1),S({funnel_id:t})):(delete re.group,we({},"/funnels/".concat(t),re)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},jt=function(e){var t=!1,n=!Ve||"wc_checkout"!==Ve&&"wc_thankyou"!==Ve?"upsell"===Ve?!le:!ce:!ae;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},vt=jt("status"),_t=function(){return Object(r.createElement)(R.a,{className:"bwf-admin-modal-squeezy "+it.className,isLoading:it.loading,successMessage:it.success,errorMessage:it.error,isOpen:it.status,autoHide:8e3,content:it.content,confirmText:it.confirmText,confirmButtonText:it.confirmButtonText,cancelButtonText:it.cancelButtonText,onConfirm:it.onConfirm,onCancel:it.onCancel,modalTitle:it.modalTitle,disableConfirm:it.disableConfirm,closeIcon:it.closeIcon,onRequestClose:function(){return ot({status:!1})}})},yt=function(){return Object(r.createElement)(r.Fragment,null,!de&&_t(),Object(r.createElement)(L,{isOpen:at,onRequestClose:function(){return lt(!1)},modalContent:Object(U.d)({FB_PRO_STATUS:vt,funnelId:_,importType:$e,activeTemplateGroup:p}),className:"bwf-templates-pro-modal"}),de&&(0===_?Object(r.createElement)(he.b,{onCloseModal:function(){me(!1)},isWorking:Ze,onComplete:function(e,n,r){Fe.isBuildFromScratch?function e(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];var c=r[0],i=r[1],o=r[2];if(et({id:"scratch",group:p,filter:t}),o)s()({path:Object(T.r)("".concat("wc_checkout"===p?"/store-checkout":"/funnels","/duplicate/").concat(o)),method:"wc_checkout"===p?"POST":"GET"}).then((function(t){t.status&&(Object(T.cb)()||t.funnel_id)?S?S({funnel_id:t.funnel_id}):we({},"/funnels/".concat(t.funnel_id),re):t.builders_options?dt(t,(function(){e.apply(void 0,r)})):ot({status:!0,modalTitle:Object(u.__)("Clone Funnel"),error:t.message||t.msg||Object(u.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:t.error}),et(!1)})).catch((function(e){et(!1),console.log(e)}));else{var f={funnel_name:c,template:"scratch"};o&&(f.inherit_from=o),i&&!Object(a.isEmpty)(i)&&(f.funnel_steps=i.join(",")),f.builder=m,"wc_checkout"===p&&(f.default_step="yes",f.template=null==Fe?void 0:Fe.id);try{s()({method:"POST",data:f,path:Object(T.r)("/".concat(G))}).then((function(t){if(t.builders_options)dt(t,(function(){e.apply(void 0,r)}));else if(!0===t.status&&t.hasOwnProperty("funnel")){var n=t.funnel.id;t.setup&&ie(t.setup),"funnels"===G?(delete re.group,Object(b.k)({},"/funnels/".concat(n),re)):S({funnel_id:t.funnel.id})}else!1===t.status&&(ot({status:!0,modalTitle:Object(u.__)("Import Template","funnel-builder"),error:t.message||t.msg||Object(u.__)("Unable to import template. Contact Support.","funnel-builder"),content:t.error}),me(!1),et(!1))}))}catch(e){console.log(e),et(!1)}}}(e,n,r):pt(Fe.id,{title:e})},modalTitle:F.title,className:d()({"bwf-visibility-hidden":"pluginActivation"===it.key})},_t()):Object(r.createElement)(Ae,{onCloseModal:function(){me(!1)},isWorking:Ze,activeTemplateGroup:p,templateGroup:j,showCloneOption:Fe.isBuildFromScratch,onComplete:function(e,t,n){var r=Fe.id;if(t!==p){var l=Object(a.get)(o,"".concat(t,".").concat(m)),c=l&&Object.keys(l).find((function(e){var t;return!0===(null===(t=l[e])||void 0===t?void 0:t.build_from_scratch)}));c&&(r=l[c].slug)}pt(r,e,t,n)},className:d()({"bwf-visibility-hidden":"pluginActivation"===it.key})},_t())))};return Object(r.createElement)(r.Fragment,null,f?Object(r.createElement)(Le,{showEditors:W,showTemplatesNav:W}):Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-template-list-header"},k&&Object(r.createElement)(Ge,{funnelId:_,disabledNavs:x,activeTemplateGroup:p,templateGroup:j,onClick:function(e){return Pe(e)},urlDependency:Y}),W&&Object(r.createElement)(Be,{editorList:c[p],onChange:function(e){Ce(e),h&&Object(U.f)({showSnackbar:ue,hideSnackbar:be,builder:e,defaultBuilder:n,onConfirm:function(){!function(e){if(n!==e){bt(!0);try{s()({path:Object(T.r)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(t){t.success?ke(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){bt(!1)}))}catch(e){console.log(e),bt(!1)}}}(e)},defaultEditorLoading:ut})},activeEditor:m})),Object(r.createElement)("div",{id:"wffn_design_container",ref:ee},Object(r.createElement)("div",{className:"wffn_tab_container"},J,Object(r.createElement)(Xe,{templateFilterCheck:N,templateCards:g,showBuildFromScratch:I,importBuildFromScratch:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(z&&!r)ot(tt(tt({},z),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return ot({status:!1})}}));else{if(Ze)return!1;"upsell"===p&&jt()?lt(!0):(xe({id:t,isBuildFromScratch:!0,template:{name:j[p]}}),H?H():ne||"funnel"===$e&&_?pt(t):me(!0),oe||He(!0))}},activeTemplateGroup:p,activeEditor:m,onPreview:function(e,t,n){e.preventDefault(),n.group_type?Ie(Object.keys(n.group_type)[0]):0!==_&&"funnel"!==$e||"optin"!==p&&"wc_checkout"!==p||Ie("optin"===p?"inline":"wc_checkout"===p&&"1"),xe({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),Qe(!0),"upsell"===p&&0===_?we({},"".concat(C,"/").concat(p,"/").concat(m,"/preview/").concat(t)):0===_?we({},"".concat(C,"/").concat(p,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===$e&&we({},"".concat(C,"/templates/").concat(p,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)),Te(n.steps[0].type)):we({},"".concat(C,"/templates/").concat(p,"/").concat(m,"/preview/").concat(t))},funnelId:_,importType:$e,stepId:ne,importing:Ze})))),(qe||Ye)&&Object(r.createElement)(ve,{isOpen:Ye||qe,onRequestClose:function(){Qe(!1),Ie(!1),re.group&&(delete re.group,we({},Object(b.g)(),re))},onImport:function(){H?H():ne||"funnel"===$e&&_?pt(Fe.id):me(!0)},templateGroup:j,activeGroup:p,templateID:Fe.id,template:Fe.template,activeEditor:m,importing:Ze,templateList:o,filters:l,templates:o,hasPRO:jt,previewData:E,isTemplateLoading:f,activeFilter:t,setPreviewErr:je,parentRoute:C,funnelId:_,importType:$e,updateQueryString:we,previewCustomizeEnabled:X,urlDependency:Y,stepId:ne},yt()),!(qe||Ye)&&yt())};lt.prototype={filters:c.a.object.isRequired,templates:c.a.object.isRequired,editors:c.a.object.isRequired,defaultBuilder:c.a.object.isRequired,templateLoading:c.a.func.isRequired,activeTemplateGroup:c.a.string.isRequired,templateGroup:c.a.object.isRequired};var ct=lt},333:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(119),c=n(6),i=n.n(c),o=(n(333),n(13)),s=n.n(o),u=n(9),b=n(4),f=n(249),d=n(246),m=n(254),p=n(252),O=n(313),j=n(247),v=n(298),_=function(e){var t=e.onCloseModal;e.link;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Add Product","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-large bwf-modal-edit-page"}))},y=n(14),h=n(22),w=n(21),g=n(2),E=n(55),S=n(107),N=n(324);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function A(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F={checkbox:u.CheckboxControl,radio:j.a,radios:j.a,select:d.b,textarea:u.TextareaControl,"custom-select":v.a,text:u.TextControl,input:u.TextControl,checklist:m.a,license:O.a,color:p.a,"bwf-label":function(e){var t=e.label;return Object(r.createElement)("span",{className:"bwf_label"},t)},number:function(e){var t=e.value,n=e.onChange,a=(e.errors,e.placeholder),l=e.label,c=e.required;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{id:c?"required":""},l),Object(r.createElement)("input",{type:"number",value:t,onChange:function(e){return n(e.target.value)},placeholder:a}))},"multi-select":N.a},L=function(e){var t,n,c,o,u=Object(l.useParams)(),d=u.stepId,m=u.offerId,p=Object(y.i)().funnel_id,O=I(Object(r.useState)(!1),2),j=O[0],v=O[1],N=Object(w.b)().showSnackbar,C=Object(E.a)().setTabData,x=Object(S.a)().getStep,D=e.tabID,L=e.errorNotice,R=e.type,B=e.fields,M=e.disabled,q=e.saveSettings,U=x(R,d,"products",m).data,z=void 0===U?{}:U,V=I(Object(r.useState)(""),2),G=V[0],J=V[1],$=I(Object(r.useState)(!1),2),H=$[0],K=$[1],Y=I(Object(r.useState)(""),2),Q=Y[0];Y[1];B&&B[D]&&(t=Object.assign({},B[D]),o=B),c=null!=t&&t.fields?t.fields:[],n=null!=t&&t.values?t.values:{};var W=I(Object(r.useState)(c),2),Z=W[0],X=W[1];Object(r.useEffect)((function(){return G&&(N(G),v(!1)),function(){J("")}}),[G]),Object(r.useEffect)((function(){X([]);var e=setTimeout((function(){return X(c)}));return function(){clearTimeout(e)}}),[c]);var ee=function(e){var t,n,r,l=(t=e,(n=o)[D],r=T(n,[D].map(A)),Object.values(r).forEach((function(e){var n=e.values;t=P(P({},n),t)})),t);v(!0),J(""),L("",!1);try{s()({path:Object(b.r)("/funnel-".concat(R,"/").concat("offer"===R?m:d,"/settings?funnel_id=").concat(p)),method:"POST",data:{settings:JSON.stringify(l)}}).then((function(t){if(t.success){if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("ship_dynamic")&&!Object(g.isEmpty)(z)){var n=Object(g.cloneDeep)(z);n=P(P({},n),{},{ship_dynamic:t.data.ship_dynamic}),C(R,d,"products",m,n)}J(Object(a.__)("Setting Saved","funnel-builder")),o[D].values=e,q(o)}else J(t.msg)})).catch((function(e){console.log(e),J(e.message)}))}catch(e){console.log(e),J(Object(a.__)("There are some technical difficulties while updating settings. Contact Support","funnel-builder"))}},te=function(e,t,n){e.type=e.inputType?e.inputType:e.type,e.type=Array.isArray(e.styleClasses)&&e.styleClasses.includes("wp-color-picker")?"color":e.type;var a=e.type.toLowerCase()in F?F[e.type.toLowerCase()]:F.text;return M&&(t.disabled=!0),Object(r.createElement)("div",{className:i()("form-group",e.class||e.styleClasses,{"checkbox-control-wrap":"checkbox"===e.type},{"inline-group":!e.label},{"checklist-field":"checklist"===e.type},{"checkbox-field":"checkbox"===e.type})},Object(r.createElement)(a,P(P({label:e.label},function(e,t){var n,r=Object.assign({},e.props);return e.type.toLowerCase()in F||(r.type=e.type.toLowerCase()),r.placeholder=e.placeholder,r.options=e.options,Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),r.options=e.options||e.values,e.checkboxlabel&&(r.checkboxlabel=e.checkboxlabel),e.multiple&&(r.multiple=e.multiple),e.ajax_cb&&(r.ajax_cb=e.ajax_cb),"copier"!==e.type&&"custom-select"!==e.type||(r=e),"select"===e.type&&(r.excludeSelectedOptions=!1,r.options&&(r.options=r.options.map((function(e){return"object"!==k(e.value)&&(e.key="object"!==k(e.value)?e.value:e.key,e.value={id:e.value}),e}))),e.multiple&&(r.excludeSelectedOptions=!0,r.inlineTags=!0)),"richeditor"===e.type&&(r.id=e.id),"textarea"===(null===(n=e.type)||void 0===n?void 0:n.toLowerCase())&&(r=e),"text"===e.type&&e.disabled&&(r.disabled=e.disabled),r.required=e.required,r.error=t.hasOwnProperty(e.key)&&t[e.key],r}(e,n)),t)),e.hint&&Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}))},ne=function(e,t){if(M)return!1;try{var n,r=!1;if(n=e[t.key],Array.isArray(t))t.every((function(t){return"true"==e[t.key]}))&&(r=!0);else if(Array.isArray(t.value)&&Array.isArray(n)){for(var a=0;a<n.length;a++)if(t.value.indexOf(n[a])>-1){r=!0;break}}else n==t.value&&(r=!0)}catch(e){console.log(e),r=!1}return r};return Object(r.createElement)(r.Fragment,null,Z&&Array.isArray(Z)&&Z.length?Object(r.createElement)(f.a,{onSubmitCallback:function(e){ee(e)},initialValues:n,validate:function(e){var t={};return["landing_page_base","checkout_page_base","optin_page_base","optin_ty_page_base","wfocu_page_base","ty_page_base"].forEach((function(n){e.hasOwnProperty(n)&&!e[n]&&"/%postname%/"!==bwfAdminGen.permalink_structure&&(t[n]=bwfAdminGen.errors.empty_base)})),void 0!==e.checkout_page_base&&e.checkout_page_base&&bwfAdminGen.checkout_page_slug===e.checkout_page_base&&(t.checkout_page_base=bwfAdminGen.errors.checkout_slug),Object(g.isArray)(Z)&&Z.forEach((function(n){n.toggler&&!ne(e,n.toggler)||!n.required||!Object(g.isEmpty)(e[n.key])&&!Object(g.isNull)(e[n.key])||(t[n.key]=Object(a.__)("This Field is required!","funnel-builder"))})),t}},(function(e){var t=e.getInputProps,n=e.values,l=e.errors,o=e.handleSubmit,s=!1;return Object(r.createElement)("div",{className:"wtfb-tab-form"},c.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},e.type&&"label"!==e.type||e.inputType?Object(r.createElement)(r.Fragment,null,"radio"!==e.type&&"radios"!==e.type||"boolean"!=typeof e.values[0].value?"":n[e.key]="true"===n[e.key]||"false"!==n[e.key]&&n[e.key],s=!0,(!e.toggler||ne(n,e.toggler))&&te(e,t(e.key),l)):"label"===e.type&&e.hint?Object(r.createElement)("div",{className:i()("form-group component-label-description",e.styleClasses)},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",null,e.label),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint}}))):e.hint||e.desc||e.label?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint||e.desc||e.label},className:i()(e.styleClasses,{"field-label":e.label})}):null)})),s&&Object(r.createElement)("div",{className:"bwf-settings-action-wrap"},Object(r.createElement)(h.a,{isPrimary:!0,onClick:function(){M||(Object.keys(l).length?N(Object(a.__)("Please Validate Fields.","funnel-builder")):o())},disabled:M||j,isBusy:j,className:M?"bwf-no-ripple":""},Object(a.__)("Save","funnel-builder"))))})):null,H&&Object(r.createElement)(_,{onCloseModal:function(){K(!1)},link:Q}))},R=n(264);n(3);var B=function(e){var t=e.onCloseModal,n=e.modalData;return Object(r.createElement)(u.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Offer Success/Failure Messages Help","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-xl bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal"},Object(r.createElement)("img",{src:n,alt:"settings"}))},M=n(38),q=n(24);n(18);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=function(e){var t=Object(w.a)("ck").isProFeatureLocked,n=e.tabs,a=void 0===n?[]:n,l=e.type,c=e.getdata,i=e.saveSettings,o=z(Object(r.useState)(!1),2),s=(o[0],o[1]),u=z(Object(r.useState)(""),2),f=(u[0],u[1]),d=z(Object(r.useState)(a[0].key),2),m=(d[0],d[1]),p=z(Object(r.useState)(!1),2),O=p[0],j=p[1],v=z(Object(r.useState)(""),2),_=v[0],y=v[1],h=Object(b.N)(),E=Object(g.get)(h,"0.modal",{}).primary_action;Object(r.useEffect)((function(){m(a[0].key)}),[a[0].key]);var S=function(e,t){var n="";s(t),Array.isArray(e)?e.forEach((function(e){n+="<p>"+e+"</p>"})):"object"===U(e)?Object.values(e).forEach((function(e){n+="<p>"+e+"</p>"})):n+="<p>"+e+"</p>",f(n)};return Object(r.createElement)(r.Fragment,null,a.length&&Object(r.createElement)("div",{className:"bwf-tabs-accordian-wrap"},Object(r.createElement)(R.a,{items:a.map((function(e){return{key:e.key,label:Object(r.createElement)(r.Fragment,null,e.label," ","checkout"===l&&t&&"tracking_analysis"===e.key&&Object(r.createElement)(q.a,null)),hint:e.hintLink?Object(r.createElement)("div",{className:"hint"},Object(M.decodeEntities)(e.hint)," ",Object(r.createElement)("a",{onClick:function(t){var n;t.stopPropagation(),n=e.hintLink,j(!0),y(n)}},e.hintLinkText)," "):Object(g.size)(e.hint)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}),"checkout"===l&&t&&"tracking_analysis"===e.key&&Object(r.createElement)("a",{href:Object(b.M)(["Tracking","Id","Setting","Upgrade","Link"]),target:"_blank",className:"bwf-upgrade-pro-text",rel:"noreferrer"},E)):null,display:Object(r.createElement)(L,{tabID:e.key,errorNotice:S,type:l,fields:c,saveSettings:i,disabled:"checkout"===l&&t&&"tracking_analysis"===e.key})}})),className:"bwf-accordion",openedTabs:function(e){var t;m(null===(t=a[e])||void 0===t?void 0:t.key)}})),O&&Object(r.createElement)(B,{onCloseModal:function(){j(!1)},modalData:_}))},J=n(276),$=n(41),H=n(31);t.a=function(e){var t=e.type,n=void 0===t?"":t,a=e.funnelID,c=void 0===a?"":a,i=Object(l.useParams)(),o=i.stepId,s=i.offerId,u=Object(r.useRef)(new AbortController),b=Object(E.a)(),f=b.fetchStep,d=b.setFunnelId,m=b.setTabData,p=Object(S.a)(),O=p.getStep,j=p.getStepHeaderData,v=p.getFunnelData,_=Object($.a)(),y=_.setStepData,h=_.setLoading,w=_.setStepFunnelData,N=_.setIsFormLoading,k=j(n,o,"design",s),C=v(),P=H.a.getFunnelTitle();Object(r.useEffect)((function(){N(!1),!Object(g.isEmpty)(C)&&Object(g.isEmpty)(P)&&w(C),Object(g.isEmpty)(k)||(y(k),h(!1))}),[k,C]);var x=O(n,o,"settings",s),T=x.data,A=void 0===T?{}:T,I=x.loading,D=void 0===I||I,F=A.settings,L=void 0===F?{}:F;if(Object(r.useEffect)((function(){return Object(g.isEmpty)(A)&&f(n,o,"settings",s,u.current.signal),d(c),function(){u.current.abort()}}),[]),!D&&Object(g.size)(L)>0){var R=[];for(var B in L){var M={key:B,label:L[B].title,heading:L[B].heading,priority:L[B].priority,hint:L[B].hint,hintLink:L[B].hint_link,hintLinkText:L[B].hint_link_text};L[B]&&L[B].fields&&Object(g.isArray)(L[B].fields)&&L[B].fields.length>0&&R.push(M)}R.length&&R.sort((function(e,t){return e.priority-t.priority}))}return Object(r.createElement)(r.Fragment,null,D?Object(r.createElement)(J.a,null):Object(r.createElement)(G,{tabs:R,type:n,getdata:L,saveSettings:function(e){m(n,o,"settings",s,{settings:e})}}))}},368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){"use strict";var r=n(0),a=(n(280),n(119)),l=n(1),c=n(7),i=n(75),o=n(21);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.additionalTabs,n=s(Object(r.useState)([]),2),a=n[0],u=n[1],b=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){u(null==t?void 0:t.fields)}),[t]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-additional-heading"},null==t?void 0:t.heading),Object(r.createElement)("div",{className:"bwf-shortcodes"},null==a?void 0:a.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading",key:t},e.heading):Object(r.createElement)("div",{key:t,className:"bwf-additional-container"},Object(r.createElement)("div",{className:"bwf-additional-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),b(t+" "+Object(l.__)("copied","funnel-builder")),void b(t+" copied");var t,n,r}},Object(r.createElement)(c.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))}))))},f=n(13),d=n.n(f),m=n(76),p=n(2),O=n(9),j=n(4),v=n(22),_=n(55),y=n(41),h=n(30),w=n(107),g=n(40),E=n(259);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.pageUrl,n=void 0===t?"":t,a=e.onRequestClose,c=e.stepId,i=e.type,s=e.stepTitle,u=e.urlSlug,b=e.stepDescription,f=e.offerId,m=(0,Object(g.a)().getStepsData)(),N=S(Object(r.useState)(!1),2),k=N[0],C=N[1],P=S(Object(r.useState)(""),2),x=P[0],T=P[1],A=S(Object(r.useState)(b),2),I=A[0],D=(A[1],S(Object(r.useState)(s),2)),F=D[0],L=(D[1],S(Object(r.useState)(""),2)),R=L[0],B=L[1],M=S(Object(r.useState)(),2),q=M[0],U=M[1],z=Object(r.useRef)(),V=Object(r.useRef)(),G=Object(y.a)().setStepData,J=Object(h.a)().setSingleStepData,$=Object(w.a)().getStep,H=Object(_.a)(),K=H.setStepHeaderData,Y=H.setTabData,Q=$(i,c,"design",f).data,W=void 0===Q?{}:Q,Z=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){var e;null===(e=V.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){var e=n.split("/");z.current=e.slice(0,Object(p.isEmpty)(e[e.length-1])?-2:-1).join("/"),B(n)}),[n]),Object(r.useEffect)((function(){T(u)}),[u]);var X=function(){var e={},t=F.replace(/\s/g,"");Object(p.isEmpty)(t)&&(e.heading=Object(l.__)("Title: This field is required","funnel-builder"));var n=x.replace(/\s/g,"");if(Object(p.isEmpty)(n)&&(e.title=Object(l.__)("Page Url Slug: This field is required","funnel-builder")),0===Object(p.size)(e)){C(!0);var r='{"title":"'.concat(null==m?void 0:m.title,'","slug":"').concat(x,'","description":"').concat(I,'"}');d()({path:Object(j.r)("/funnel-".concat(i,"/save-state/").concat(c)),method:"POST",data:JSON.parse(r)}).then((function(e){if(e.success){if(C(!1),e.hasOwnProperty("step_data")){G(e.step_data),K(i,c,f,e.step_data);var t=Object(p.cloneDeep)(W);t.step.post_name=x,t.step.view_link=e.step_data.view_link,Y(i,c,"design",f,t)}e.hasOwnProperty("step_list")&&J(e.step_list.id,e.step_list),a(),Z(Object(l.__)("Changes Saved","funnel-builder"))}})).catch((function(e){return console.log(e)}))}else U(e)};return Object(r.createElement)(O.Modal,{title:Object(l.__)("Edit Page URL","funnel-builder"),onRequestClose:a,className:"bwf-admin-modal bwf-modal-edit-page bwf-edit-page"},q&&Object(p.size)(q)>0&&Object(r.createElement)(E.a,{status:"error",isDismissible:!0,onRemove:function(){return U({})}},Object(r.createElement)("ul",null,Object.keys(q).map((function(e){return Object(r.createElement)("li",{key:e},q[e])})))),Object(r.createElement)("label",{id:"required"},Object(l.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(O.TextControl,{value:x,onChange:function(e){T(e.replace(/\s+/g,"-").toLocaleLowerCase()),B(z.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},onKeyPress:function(e){"Enter"===e.key&&X()},className:Object(p.size)(x.trim())?"":"bwf-error-border",ref:V,required:!0}),Object(p.size)(x.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(l.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-url-title"},Object(l.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},R))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,disabled:!Object(p.size)(x.trim()),className:Object(p.size)(x.trim())?"":"bwf-no-ripple",isBusy:k,onClick:X},Object(l.__)("Update","funnel-builder"))))},C=(n(368),n(123)),P=n(283),x=n(264),T=n(51);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(e){var t=e.activeTab,n=void 0===t?"content":t,a=e.formFields,c=e.activeProduct,i=e.initialValues,s=void 0===i?{}:i,u=e.styleRef,b=e.type,f=e.stepId,m=e.offerId,v=e.addTabIndex,y=Object(_.a)().setTabData,h=(0,Object(w.a)().getStep)(b,f,"design",m).data,g=void 0===h?{}:h,E=F(Object(r.useState)({}),2),S=E[0],N=E[1],k=F(Object(r.useState)({}),2),A=k[0],D=k[1],L=F(Object(r.useState)(!1),2),R=L[0],B=L[1],M=F(Object(r.useState)(""),2),q=M[0],U=M[1],z=F(Object(r.useState)([0]),2),V=z[0],G=z[1],J=F(Object(r.useState)([0]),2),$=J[0],H=J[1],K=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){q&&(K(q),U(""))}),[q]),Object(r.useEffect)((function(){W()}),[c]),Object(r.useEffect)((function(){Y()}),[A,S]);var Y=function(){if(S){var e=[];for(var t in A){var n,r;if(S.hasOwnProperty(t)){var a=S[t];null!=a&&a.toggler&&(null==a||null===(n=a.toggler)||void 0===n?void 0:n.value)!=A[null==a||null===(r=a.toggler)||void 0===r?void 0:r.key]||e.push(I(I({},a),{},{value:A[t]}))}}Q(e)}},Q=function(e){var t="";e.forEach((function(e){switch(e.type){case"text":e.contentClass&&jQuery(e.contentClass).text(e.value);break;case"richtext":case"richeditor":case"textarea":e.contentClass&&jQuery(e.contentClass).html(e.value);break;case"label":break;case"toggle":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;0==e.value?jQuery(n).hide():jQuery(n).show()}break;case"image":if(e.selectors){var r,a,l,c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type)if(jQuery(c+" img").length)jQuery(c+" img").attr("src",null==e||null===(a=e.value)||void 0===a?void 0:a.image_url);else jQuery(c).find("svg").remove(),jQuery(c).append('<img src="'+(null==e||null===(l=e.value)||void 0===l?void 0:l.image_url)+'" alt="order bump" />');else if(Object(p.isEmpty)(null==e||null===(r=e.value)||void 0===r?void 0:r.custom_url))jQuery(c+" img").attr("src","").attr("srcset","");else{var i,o;if(jQuery(c+" img").length)jQuery(c+" img").attr("src",null==e||null===(i=e.value)||void 0===i?void 0:i.custom_url).attr("srcset","");else jQuery(c).find("svg").remove(),jQuery(c).append('<img src="'+(null==e||null===(o=e.value)||void 0===o?void 0:o.custom_url)+'" alt="order bump" />').attr("srcset","")}}break;default:if(e.selectors&&e.stylekey){var s,u=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,b="".concat(e.stylekey,":").concat(e.value).concat(null!==(s=null==e?void 0:e.styleUnit)&&void 0!==s?s:"",";");-1!==t.search("".concat(u,"{"))?t=t.replace("".concat(u,"{"),"".concat(u,"{").concat(b)):t+="".concat(u,"{").concat(b,"}")}}})),null!=u&&u.current&&(u.current.innerHTML=t)},W=function(){var e;if(!Object(p.isEmpty)(a)&&!Object(p.isEmpty)(c)){var t,n={};if(null!=a&&null!==(e=a.content)&&void 0!==e&&e[c])(null==a||null===(t=a.content)||void 0===t?void 0:t[c]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}));if(null!=a&&a.design)(null==a?void 0:a.design).forEach((function(e){((null==e?void 0:e.fields)||[]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}))}));N(n),console.log("fields",n)}},Z=function(e,t,n){return e.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},(Object(p.isEmpty)(e.toggler)||X(t,e.toggler,e))&&Object(r.createElement)(P.a,{input:e,formProps:n(e.key),values:t}))}))},X=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else r==t.value&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{onSubmitCallback:function(e){B(!0);try{d()({path:Object(j.r)("/funnel-".concat(b,"/").concat(f,"/design/save-settings")),method:"POST",data:e}).then((function(t){if(t.success){var n=Object(p.cloneDeep)(g);n.step.additional_tabs[v].values=e,y(b,f,"design",m,n),U(Object(l.__)("Changes Saved","funnel-builder")),B(!1)}else B(!1),U(t.msg)}))}catch(e){console.log(e),B(!1),U(e.message)}},initialValues:s,validate:function(){return{}},onChange:function(e,t){D(t)}},(function(e){var t=e.getInputProps,i=e.values,o=(e.errors,e.handleSubmit);return Object(r.createElement)(r.Fragment,null,function(e,t){var l;if("content"===n){var i,o=null==a||null===(i=a.content)||void 0===i?void 0:i[c];return Object(r.createElement)("div",{style:{padding:"16px 16px 0"}},Z(o,t,e))}var s=null!==(l=a[n])&&void 0!==l?l:[],u=null==s?void 0:s.map((function(n,a){var l;return{label:null==n?void 0:n.label,key:null!==(l=null==n?void 0:n.key)&&void 0!==l?l:a,display:Object(r.createElement)("div",{className:"bwf-form-fields-wrapper"},Z(null==n?void 0:n.fields,t,e))}}));return"tab_form_style"===n?Object(r.createElement)(x.a,{items:u,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:V,setOpenedKeys:function(e){G(e)}}):Object(r.createElement)(x.a,{items:u,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:$,setOpenedKeys:function(e){H(e)}})}(t,i),Object(r.createElement)(O.Button,{isPrimary:!0,onClick:o,isBusy:R,disabled:R,className:"bwf-mt-24"},Object(r.createElement)("span",{style:I({},R&&{visibility:"hidden"})},Object(l.__)("Save","funnel-builder")),R&&Object(r.createElement)(T.a,{color:"#ffffff",style:{position:"absolute"}})))})))};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e){var t,n=e.additionalTabs,a=e.type,s=e.stepId,u=e.offerId,b=e.addTabIndex,f=B(Object(r.useState)(null),2),d=f[0],m=f[1],O=B(Object(r.useState)(null==n?void 0:n.tabs[0]),2),j=O[0],v=O[1],_=B(Object(r.useState)(!1),2),y=_[0],h=_[1],w=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){"shortcode"===n.content[j.id].type?(m(n.content[j.id].fields),h(!1)):h(!0)}),[j]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-additional-heading"},null==n?void 0:n.heading),n&&n.hasOwnProperty("tabs")&&Object(r.createElement)("div",{className:"bwf-tabs-list"},null==n||null===(t=n.tabs)||void 0===t?void 0:t.map((function(e,t){return Object(r.createElement)("button",{key:t,className:"bwf-tabs-list-button ".concat((null==j?void 0:j.id)===e.id?"active-btn":""),onClick:function(){v(e),"tab_custom_shortcode"===e.id?h(!1):h(!0)}},null==e?void 0:e.name)}))),Object(r.createElement)("div",{className:"bwf-shortcodes"},!y&&Object(p.size)(d)>0&&(null==d?void 0:d.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading bwf-grid-full",key:t},e.heading):Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-setting-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),w(t+" "+Object(l.__)("copied","funnel-builder")),void w(t+" copied");var t,n,r}},Object(r.createElement)(c.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))})))),y&&Object(r.createElement)(R,{activeTab:j.id,formFields:null==n?void 0:n.content,initialValues:null==n?void 0:n.values,type:a,stepId:s,offerId:u,addTabIndex:b}))},U=(n(262),n(249)),z=n(246);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){var t=e.onCloseModal,n=e.onSuccess,c=e.SnackBarMsg,i=e.fieldTypes,o=Object(a.useParams)().stepId,s=H(Object(r.useState)(!1),2),u=s[0],b=s[1],f=H(Object(r.useState)("text"),2),m=f[0],p=f[1],v=H(Object(r.useState)({label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",enable_time:!1,preferred_time_format:"12",allow_delete:!1,show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,required:!0,multiselect_maximum:"",multiselect_maximum_error:"You can only select {maximum_number} items"}),2),_=v[0],y=v[1],h=function(){t()};Object(r.useEffect)((function(){_.field_type=m,_.default="checkbox"===m?"1":"";var e=JSON.parse(JSON.stringify(_));y(e)}),[m]);var w=_;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:h,title:Object(l.__)("Add New Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-section-modal"},Object(r.createElement)(U.a,{validate:function(e){var t={};return""!==e.label.trim()&&e.label||(t.label=Object(l.__)("Label is required","funnel-builder")),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email"].includes(e.field_type)&&!e.name&&(t.name="Field ID is required"),["wfacp_radio","select","select2","multiselect"].includes(e.field_type)&&!e.options&&(t.options="Options are required"),e.name&&["billing","shipping"].includes(e.name.trim().toLowerCase())&&(t.name=Object(l.sprintf)(Object(l.__)("Field ID contains a reserved term '%s'","funnel-builder"),e.name.trim().toLowerCase())),t},onSubmitCallback:function(e){b(!0),d()({path:Object(j.r)("/funnel-checkout/".concat(o,"/form_fields/add_field")),method:"POST",data:e}).then((function(e){e.success?(b(!1),n(e.data)):(b(!1),c(e.msg||e.message))})).catch((function(e){b(!1),c(e.msg||e.message)}))},initialValues:w,onChange:function(e,t){p(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,c=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(z.b,$({},t("field_type"),{options:i})))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("label"),{placeholder:Object(l.__)("Type here...","funnel-builder"),autoComplete:"off",required:!0}))),c.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(l.__)("This is a required field","funnel-builder"))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.name&&a.name?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Field ID (Order Meta Key)","funnel-builder")),Object(r.createElement)(O.TextControl,$({},t("name"),{placeholder:Object(l.__)("Type here...","funnel-builder")}))),c.name&&a.name&&Object(r.createElement)("div",{className:"bwf-error-text"},a.name),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Field ID (Order Meta Key) where value of this field gets stored. Use '_' to seperate in case of multiple words.Example: date_of_birth","funnel-builder"))),["wfacp_radio","select","select2","multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.options&&a.options?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(O.TextControl,$({},t("options"),{placeholder:Object(l.__)("Type here...","funnel-builder")}))),c.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field")),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("multiselect_maximum"),{label:Object(l.__)("Max number of selection","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("multiselect_maximum_error"),{label:Object(l.__)("Error Message","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["text","wfacp_radio","select","textarea","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("default"),{label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["text","textarea","select2","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("placeholder"),{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(z.b,$({options:[{label:"True",value:"1",key:"1"},{label:"False",value:"0",key:"0"}]},t("default"))))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("show_custom_field_at_thankyou"),{label:Object(l.__)("Show On Thank You Page","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Show In Order Email","funnel-builder")})))),["text","wfacp_radio","select","textarea","checkbox","select2","multiselect","number","tel","password","email","wfacp_html","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:h,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(O.Button,{isPrimary:!0,onClick:o,isBusy:u,disabled:u},Object(r.createElement)("span",{style:G({},u&&{visibility:"hidden"})},Object(l.__)("Add","funnel-builder")),u&&Object(r.createElement)(T.a,{color:"#ffffff",style:{position:"absolute"}}))))}))))};function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.onCloseModal,n=e.addedSection,a=Object(r.useRef)(),c=W(Object(r.useState)(!1),2),i=c[0],o=c[1],s=function(){t()};return Object(r.useEffect)((function(){a.current.focus()}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:s,title:Object(l.__)("Add New Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(U.a,{validate:function(){return{}},onSubmitCallback:function(e){o(!0);var t=e.name.replace(/\s+/g,"-").toLowerCase(),r=t+"".concat(Object(p.size)(t)>0?"-":"")+Math.floor(1e3*Math.random());e.id=r,n(e)},initialValues:{name:"",sub_heading:"",class:"",fields:[],id:""}},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Q({},t("name"),{label:Object(l.__)("Name","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:a,onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Q({},t("sub_heading"),{label:Object(l.__)("Sub Heading","funnel-builder"),autoComplete:"off",placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Q({},t("class"),{label:Object(l.__)("Classes","funnel-builder"),autoComplete:"off",placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(O.Button,{onClick:s,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:n,isBusy:i},Object(l.__)("Add","funnel-builder"))))}))))},ee=n(255);function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t=e.onCloseModal,n=e.updatedField,i=e.fields,o=e.updated,s=e.updatedSectionId,u=e.activeStep,b=e.SnackBarMsg,f=Object(a.useParams)().stepId,m=Object(r.useRef)(),p=le(Object(r.useState)(!1),2),_=p[0],y=p[1],h=le(Object(r.useState)(n),2),w=h[0],g=h[1],E=function(){t()};Object(r.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){"1"===w.allow_delete||"true"===w.allow_delete?g((function(e){return re(re({},e),{},{allow_delete:!0})})):"0"===w.allow_delete||"false"===w.allow_delete?g((function(e){return re(re({},e),{},{allow_delete:!1})})):"1"===w.coupon_style||"true"===w.coupon_style?g((function(e){return re(re({},e),{},{coupon_style:!0})})):"0"===w.coupon_style||"false"===w.coupon_style?g((function(e){return re(re({},e),{},{coupon_style:!1})})):"1"===w.show_custom_field_at_thankyou||"true"===w.show_custom_field_at_thankyou?g((function(e){return re(re({},e),{},{show_custom_field_at_thankyou:!0})})):"0"===w.show_custom_field_at_thankyou||"false"===w.show_custom_field_at_thankyou?g((function(e){return re(re({},e),{},{show_custom_field_at_thankyou:!1})})):"1"===w.show_custom_field_at_email||"true"===w.show_custom_field_at_email?g((function(e){return re(re({},e),{},{show_custom_field_at_email:!0})})):"0"===w.show_custom_field_at_email||"false"===w.show_custom_field_at_email?g((function(e){return re(re({},e),{},{show_custom_field_at_email:!1})})):"1"===w.required||"true"===w.required?g((function(e){return re(re({},e),{},{required:!0})})):"0"!==w.required&&"false"!==w.required||g((function(e){return re(re({},e),{},{required:!1})}))}),[w]);var S=w,N=function(e){var t,n;y(!0),i.fieldsets[u][s].fields=null===(t=i.fieldsets[u][s])||void 0===t||null===(n=t.fields)||void 0===n?void 0:n.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(j.r)("/funnel-checkout/".concat(f,"/form_fields")),method:"POST",data:i}).then((function(e){e.success?o(i):b(Object(l.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){b(e.message||e.msg)}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:E,shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal bwf-admin-modal-no-header",isDismissible:!1},Object(r.createElement)(U.a,{validate:function(e){var t={};return["radios","select","select2","multiselect","wfacp_radio"].includes(e.type)&&!e.options&&(t.options=Object(l.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){N(e)},initialValues:S},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,i=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," "),Object(r.createElement)("span",null,"(",Object(l.__)("Field ID : ","funnel-builder")," ",n.id,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," ")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:E},Object(r.createElement)(c.a,{icon:"close",size:20}))),(["text","radios","wfacp_radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","select2","multiselect","number","password","wfacp_wysiwyg","wfacp_html","wfacp_date"].includes(n.type)||["shipping_calculator","order_coupon","order_summary","order_total","_bwf_dob"].includes(n.id))&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("label"),{label:Object(l.__)("Label","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)},placeholder:Object(l.__)("Type here…","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:m})),("wfop_wysiwyg"===n.type||"html"===n.type||"wfacp_wysiwyg"===n.type||"_bwf_dob"===n.id)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(l.__)("This label is for admin purpose only, won't appear on the checkout form.","funnel-builder")))))),"_bwf_dob"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("_bwf_dob"),{label:Object(l.__)("Minimum Age","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["radios","wfacp_radio","select","select2","multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.options&&a.options?"bwf-validation":"")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(O.TextControl,te({placeholder:Object(l.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"))),i.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["order_coupon"].includes(n.id)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({label:Object(l.__)("Success message","funnel-builder")},t("coupon_success_message_heading"),{placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"order_coupon"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Use merge tags to display Coupon Code: {{coupon_code}} & Coupon Value: {{coupon_value}} in success message","funnel-builder")))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("coupon_style"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Make coupon field a clickable link","funnel-builder")}))))),(["text","textarea","email","tel","select2","number","password","wfacp_date"].includes(n.type)||["shipping_calculator"].includes(n.id))&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("placeholder"),{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Enter the default text for shipping method","funnel-builder")))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("multiselect_maximum"),{label:Object(l.__)("Max number of selection","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder")})))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({},t("multiselect_maximum_error"),{label:Object(l.__)("Error Message","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder")})))),["radios","wfacp_radio","select","textarea","hidden","select2","text","multiselect","number","tel","password","email","wfacp_date"].includes(n.type)&&!["billing_first_name","billing_last_name","billing_phone","shipping_phone","billing_email"].includes(n.id)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["checkbox"].includes(n.type)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(z.b,te({options:[{label:Object(l.__)("True","funnel-builder"),value:"1",key:"1"},{label:Object(l.__)("False","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,te({label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["wfop_wysiwyg","html","wfacp_wysiwyg"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ee.a,te({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["order_summary"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("allow_delete"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Enable this to show delete icon below item subtotal","funnel-builder")))),["order_total"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("default"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Detailed Summary","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Enable this to show detailed summary including Subtotal, Coupon, Fees, Shipping and Taxes whichever are applicable.","funnel-builder")))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("show_custom_field_at_thankyou"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Show On Thank You Page","funnel-builder")})))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Show In Order Email","funnel-builder")})))),["text","radios","wfacp_radio","select","textarea","checkbox","email","tel","select2","multiselect","number","password","wfacp_html","wfacp_date"].includes(n.type)&&!["shipping_calculator","order_total","order_summary","order_coupon","order_comments"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,te({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:E,className:"bwf-modal-cancel-btn",disabled:_},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,disabled:_,isBusy:_,onClick:o},Object(l.__)("Update","funnel-builder"))))}))))},oe=(n(281),n(14)),se=n(28),ue=n(78),be=n(250),fe=n(84),de=n(38),me=n(6),pe=n.n(me);function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function je(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){if(e){if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(e,t):void 0}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=function(e){var t=Object(a.useParams)(),n=t.stepId,i=(t.id,window.location&&window.location.search?Object(se.parse)(window.location.search.substring(1)):{}),o=e.onCloseModal,s=e.productData,u=e.onChange,b=e.addToCartSettings,f=ve(Object(r.useState)("general"),2),d=f[0],m=f[1],_=ve(Object(r.useState)([]),2),y=_[0],h=_[1],w=ve(Object(r.useState)(""),2),g=w[0],E=w[1],S=ve(Object(r.useState)(""),2),N=S[0],k=S[1],P=ve(Object(r.useState)(""),2),x=P[0],T=P[1],A=ve(Object(r.useState)(""),2),I=A[0],D=A[1],F=ve(Object(r.useState)(""),2),L=F[0],R=F[1],B=ve(Object(r.useState)(""),2),M=B[0],q=B[1],U=ve(Object(r.useState)(""),2),V=U[0],G=U[1],J=ve(Object(r.useState)(""),2),$=J[0],H=J[1],K=ve(Object(r.useState)(""),2),Y=K[0],Q=K[1],W=ve(Object(r.useState)(""),2),Z=W[0],X=W[1],te=ve(Object(r.useState)([]),2),ne=te[0],re=te[1],ae=ve(Object(r.useState)({}),2),le=ae[0],ce=ae[1],ie=ve(Object(r.useState)(""),2),me=ie[0],_e=ie[1],ye=ve(Object(r.useState)([]),2),he=ye[0],ge=ye[1],Ee=ve(Object(r.useState)(""),2),Se=Ee[0],Ne=Ee[1],ke=ve(Object(r.useState)(!1),2),Ce=ke[0],Pe=ke[1],xe=function(){o()};Object(r.useEffect)((function(){0!==s.products.length&&(h(s.default_products),re(null==s?void 0:s.products),ce(null==s?void 0:s.settings),E(s.settings.enable_delete_item),k(s.settings.enable_custom_name_in_order_summary),T(s.settings.is_hide_additional_information),D(s.settings.additional_information_title),R(s.settings.hide_best_value),q(s.settings.hide_quantity_switcher),G(s.settings.hide_quick_view),H(s.settings.hide_product_image),Q(s.settings.best_value_text),X(s.settings.best_value_position),Ne(s.settings.best_value_product))}),[s]),Object(r.useEffect)((function(){if(Object(p.size)(ne)>0){var e=ne.map((function(e){return{label:e.title,value:e.key,key:e.key}}));ge([].concat([{label:"Select Product",value:"",key:""}],je(e)))}}),[ne]);var Te={label:s.label},Ae=Object(fe.a)({containerClass:"#product_switching .bwf-step-menu-header .bwfan_navigation",selectedClass:".bwfan_navigation_active",orientation:"horizontal"}).switchTab,Ie=[{type:"general",id:"general",label:Object(l.__)("General","funnel-builder")},{type:"description",id:"description",label:Object(l.__)("Description","funnel-builder")},{type:"advanced",id:"advanced",label:Object(l.__)("Advanced","funnel-builder")}];return Object(r.useEffect)((function(){var e,t;Ae((e=d,t=0,Ie.map((function(n,r){n.id===e&&(t=r)})),t))}),[d]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-xl bwf-modal-edit-page  bwf-edit-product-modal"},Object(r.createElement)("div",{className:"sections bwf-product-field"},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Edit Field","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:function(){return xe()}},Object(r.createElement)(c.a,{icon:"close",size:20})))),Object(r.createElement)("div",{className:"wfacp_product_swicther_field_wrap"},Object(r.createElement)("div",{id:"product_switching"},Object(r.createElement)("div",{className:"wfacp_tabs"},0===s.products.length&&Object(r.createElement)("div",{className:"bwf-welcome-card"},Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_welc_icon"},Object(r.createElement)("span",{className:"bwf-product-h"}," ",Object(l.__)("Oops! no products found","funnel-builder")," ")),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-product-p"},Object(l.__)("To edit this field please add atleast one product","funnel-builder")," "),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_btns_welcome_card"},Object(r.createElement)(O.Button,{isPrimary:!0,onClick:function(){return Object(oe.k)({},"".concat(Object(j.cb)()?"/store-checkout/checkout":"/funnel-checkout","/").concat(n,"/products"),i)}},Object(l.__)(" Add Product ","funnel-builder")),Object(r.createElement)("div",{className:"wfacp_clear_20"}),Object(r.createElement)("div",{className:"wfacp_clear_20"}))),0!==s.products.length&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfan_header bwfan__step-header"},Object(r.createElement)("div",{className:"bwfan_header_l2 bwf-step-menu-header"},Object(r.createElement)("div",{className:"bwfan_header_l"},Object(r.createElement)("div",{className:"bwfan_navigation"},Ie.map((function(e,t){return Object(r.createElement)("a",{className:pe()("bwf-cursor-pointer",{bwfan_navigation_active:d===e.id}),onClick:function(){"general"===e.id&&m("general"),"description"===e.id&&m("description"),"advanced"===e.id&&m("advanced")},key:t},e.label)})),Object(r.createElement)("div",{className:"bwf-nav-indicator"}))))),Object(r.createElement)(C.a,{validate:function(e){var t={};return _e(""),""===e.label.trim()&&(t.label="",_e("Label is required")),e.label||(t.label="",_e("Label is required")),t},onSubmitCallback:function(e){!function(e){Pe(!0),le.enable_delete_item=g,le.enable_custom_name_in_order_summary=N,le.enable_custom_name_in_order_summary=N,le.is_hide_additional_information=x,le.additional_information_title=I,le.additional_information_title=I,le.hide_best_value=L,le.hide_quantity_switcher=M,le.hide_quick_view=V,le.hide_product_image=$,le.best_value_text=Y,le.best_value_position=Z,le.best_value_product=Se,ce(le);var t={default_products:y,settings:le,products:ne,label:e.label};u(t)}(e)},initialValues:Te},(function(e){var t=e.getInputProps,n=e.values,a=(e.errors,e.touched),c=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,me&&a.label&&Object(r.createElement)("div",{className:"bwf-validate-product"},Object(r.createElement)(ue.a,{errorMessage:me}),Object(r.createElement)("div",{className:"bwf_clear_10"})),"general"===d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Label","funnel-builder")),Object(r.createElement)(O.TextControl,Oe({},t("label"),{onKeyPress:function(e){"Enter"===e.key&&c(n)},placeholder:Object(l.__)("Label","funnel-builder"),className:"bwf-product-validation-text",autoComplete:"off"})))),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-general-product bwf-product-header bwf-mt-24 ".concat("1"!==b?"":"bwf-no-value")},"1"!==b&&Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Title","funnel-builder")))),null==ne?void 0:ne.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-general-product bwf-product-end ".concat("1"!==b?"":"bwf-no-value"),key:t},"2"===b&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("input",{type:"radio",value:e.key,checked:y.includes(e.key),onChange:function(e){return h([e.target.value])},className:"components-radio-control__input ".concat(y===e.key?"active":"")})),"3"===b&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)(be.a,{checked:y.includes(e.key),onChange:function(t){return function(e,t){if(e)h([].concat(je(y),[t]));else{var n=y.filter((function(e){return e!==t}));h(n)}}(t,e.key)}})),Object(r.createElement)("div",{className:"bwf-flex"},Object(de.decodeEntities)(e.old_title)),Object(r.createElement)("div",{className:"bwf-product-title"},Object(r.createElement)("input",{type:"text",defaultValue:e.title,placeholder:"Title",onChange:function(t){return function(e,t){ne.map((function(n){n.key===e&&(n.title=t.target.value)}));var n=JSON.parse(JSON.stringify(ne));re(n)}(e.key,t)},className:"bwf-h-36"}),Object(r.createElement)("input",{type:"text",defaultValue:e.you_save_text,placeholder:"You Save Text",onChange:function(t){return function(e,t){ne.map((function(n){n.key===e&&(n.you_save_text=t.target.value)}));var n=JSON.parse(JSON.stringify(ne));re(n)}(e.key,t)},className:"bwf-h-36"})))})),Object(r.createElement)("div",{className:"bwf-product-desc field-wrap"},Object(r.createElement)("label",{type:"description"},Object(l.__)("Merge Tags","funnel-builder")+": {{quantity}}, {{saving_value}}, {{saving_percentage}} and {{unit_price}}")),Object(r.createElement)("div",{className:"wfacp_ps_conditional_wrap bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:g,onChange:function(){return E(!g)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"wfacp_product_switcher_delete_options bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:N,onChange:function(){return k(!N)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Enable Custom Product Name In Order Details","funnel-builder")})),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(l.__)("This option will allow you to view the product custom name on Thank you page, Customer Email & Admin Order Detail page","funnel-builder"))))))),"description"===d&&Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(l.__)("Use this section to show per product custom description when the product is selected.","funnel-builder"),Object(r.createElement)("br",null),Object(l.__)("Note: This feature will work if you are using product specific order forms.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field bwf-mt-24"},Object(r.createElement)(O.ToggleControl,{checked:x,onChange:function(){return T(!x)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Custom Product Description","funnel-builder")})),Object(r.createElement)("div",{className:"form-group bwf-display-flex_column field-wrap"},Object(r.createElement)("label",{type:"text"},Object(l.__)("Title","funnel-builder")),Object(r.createElement)("input",{type:"text",value:I,className:"bwf-h-36",onChange:function(e){return D(e.target.value)}}))),Object(r.createElement)("div",{className:"bwf-product-textarea bwf-product-header bwf-mt-24"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Custom Details","funnel-builder")))),null==ne?void 0:ne.map((function(e,t){return Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-product-textarea"},Object(r.createElement)("div",{className:"bwf-flex"},null==e?void 0:e.title),Object(r.createElement)("div",{className:"form-group bwf_w_full"},Object(r.createElement)(ee.a,{keyid:"".concat(e.key).concat(Math.floor(100*Math.random())),content:e.whats_included,value:e.whats_included,onChange:function(t){return function(e,t){ne.map((function(n){n.key===e&&(n.whats_included=t)}));var n=JSON.parse(JSON.stringify(ne));re(n)}(e.key,t)},toolbar:"bold,italic, underline,bullist,numlist,link",quicktags:!0}))))}))),"advanced"===d&&Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"pro_mb"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Best Value Tag","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:L,onChange:function(){return R(!L)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Best Value Tag","funnel-builder")}))),!L&&Object(r.createElement)("div",{className:"bwf-product-advanced"},Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(l.__)("Apply on Product","funnel-builder")),Object(r.createElement)(z.b,{options:he,selected:Se,onChange:function(e){Ne(e)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(l.__)("Label","funnel-builder")),Object(r.createElement)("input",{type:"text",placeholder:"Best Value Product",className:"bwf-h-36",value:Y,onChange:function(e){return Q(e.target.value)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(l.__)("Position","funnel-builder")),Object(r.createElement)(z.b,{options:we,selected:Z,onChange:function(e){X(e)}}))),Object(r.createElement)("div",{className:"pro_checkbox_wrap pro_mb bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Other","funnel-builder"))),Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-products-other-detail"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:M,onChange:function(){return q(!M)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Quantity Incrementor","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:V,onChange:function(){return G(!V)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Quick View","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:$,onChange:function(){return H(!$)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Product Image","funnel-builder")}))))),Object(r.createElement)("div",{className:"bwf-product-modal-footer"},Object(r.createElement)(O.Button,{onClick:xe,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,isBusy:Ce,onClick:c},Object(l.__)("Update","funnel-builder"))))})))))))))},we=[{label:"Default",value:"",key:""},{label:"Above product title",value:"above",key:"above"},{label:"Below product title",value:"below",key:"below"},{label:"Top left corner",value:"top_left_corner",key:"top_left_corner"},{label:"Top Right corner",value:"top_right_corner",key:"top_right_corner"}],ge=n(269),Ee=n(275);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=Object(ge.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",style:{cursor:"move"}},Object(r.createElement)(c.a,{icon:"ul",size:"20"}))})),Ie=function(e){var t=e.index,n=e.data,a=e.setFieldId,i=e.setShowContent,o=e.changeVisibility,s=e.fieldId,u=e.showContent,b=e.changePlaceholder,f=e.changeLabel,d=e.changeRequired,m=e.sortable,v=void 0===m||m;return Object(r.createElement)("div",{key:t,"data-key":"first_name",className:"bwf_address_field bwf_sortable_address_field"},Object(r.createElement)("div",{className:pe()("bwf_billing_accordion_inner",{"is-opened":s===n.key&&u}),onClick:function(){a(n.key),n.key===s?i(!u):(a(n.key),i(!0))}},Object(r.createElement)("div",{className:"accordion_left"},v&&Object(r.createElement)(Ae,null),Object(r.createElement)("div",{className:"accordion_heading"},n.data_label),n.key.includes("same_as")?null:Object(r.createElement)("div",{className:"bwf_hint_small"},"(",Object(l.__)("Field ID: ","funnel-builder"),n.key,")")),Object(r.createElement)("div",{className:"accordion_right"},Object(r.createElement)("span",{onClick:function(e){e.stopPropagation(),o(n.key)}},Object(r.createElement)(c.a,{icon:null!=n&&n.status?"eye":"eye-close",size:24})),Object(r.createElement)(c.a,{icon:"angle-down",size:24})),Object(r.createElement)("div",{className:"bwf_billing_clear"}),!Object(p.isEmpty)(n.configuration_message)&&Object(r.createElement)("div",{className:"bwf_misconfiguration_field"},n.configuration_message)),Object(r.createElement)("div",{className:pe()("bwf_billing_accordion_content form-group",{"bwf-display-block":s===n.key&&u})},"billing_wc_custom_field"===s||"shipping_wc_custom_field"===s?Object(r.createElement)("span",null,Object(l.sprintf)(
/* translators: %s: Field type. */
Object(l.__)("Enable this field to show the extra %s fields registered by other plugins. Still not seeing the field on the checkout? ","funnel-builder"),"billing_wc_custom_field"===s?Object(l.__)("billing","funnel-builder"):Object(l.__)("shipping","funnel-builder")),Object(r.createElement)("a",{target:"_blank",href:Object(j.Y)(["Step","Checkout","Form","Address","Edit"]),rel:"noreferrer"},Object(l.__)("Contact Support.","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(O.TextControl,{label:Object(l.__)("Label","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),className:"form-control bwf_label",value:n.label||"",onChange:function(e){return f(n.key,e)}}))),!n.key.includes("same_as")&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(O.TextControl,{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),className:"form-control bwf_placeholder",value:n.placeholder||"",onChange:function(e){return b(n.key,e)}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,{checked:!!n.required,onChange:function(){return d(n.key)},type:"checkbox",className:"bwf-tooglecontrol-advance",label:Object(l.__)("Required","funnel-builder")})))))))},De=Object(ge.b)(Ie),Fe=Object(ge.a)((function(e){var t=e.onChange,n=e.address,a=e.setAddress,c=e.onPopupClose,i=e.lastItems,o=e.setLastItems,s=Pe(Object(r.useState)(""),2),u=s[0],b=s[1],f=Pe(Object(r.useState)(!1),2),d=f[0],m=f[1],p=Pe(Object(r.useState)(!1),2),j=p[0],_=p[1],y=function(e,t){a((function(n){return n.map((function(n){return n.key===e?Ne(Ne({},n),{},{label:t}):n}))}))},h=function(e,t){a((function(n){return n.map((function(n){return n.key===e?Ne(Ne({},n),{},{placeholder:t}):n}))}))},w=function(e){"billing_same_as_shipping"===e||"shipping_same_as_billing"===e?o((function(t){return t.map((function(t){return t.key===e?Ne(Ne({},t),{},{status:!t.status}):t}))})):a((function(t){return t.map((function(t){return t.key===e?Ne(Ne({},t),{},{status:!t.status}):t}))}))},g=function(e){a((function(t){return t.map((function(t){return t.key===e?Ne(Ne({},t),{},{required:!t.required}):t}))}))};return Object(r.createElement)("div",{id:"bwf_address_field_address","data-address-type":"address",className:"bwf_accordion bwf_address_sortable_area ui-sortable"},n.map((function(e,t){return Object(r.createElement)(De,{key:"bwf-address-field-sort-".concat(t),data:e,index:t,setFieldId:b,setShowContent:m,changeVisibility:w,fieldId:u,showContent:d,changePlaceholder:h,changeLabel:y,changeRequired:g})})),i&&i.map((function(e,t){return Object(r.createElement)(Ie,{key:"bwf-address-field-".concat(t),data:e,index:t,setFieldId:b,setShowContent:m,changeVisibility:w,fieldId:u,showContent:d,changePlaceholder:h,changeLabel:y,changeRequired:g,sortable:!1})})),Object(r.createElement)("div",{className:"bwf-admin-modal-footer wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:c,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,isBusy:j,onClick:function(){_(!0),t([].concat(Ce(n),Ce(i)))}},Object(l.__)("Update","funnel-builder"))))})),Le=function(e){var t=e.onCloseModal,n=e.addressType,a=e.addressData,c=e.onChange,i=Pe(Object(r.useState)([]),2),o=i[0],s=i[1],u=Pe(Object(r.useState)([]),2),b=u[0],f=u[1],d=function(){t()};Object(r.useEffect)((function(){s(a.filter((function(e){return"billing_same_as_shipping"!==e.key&&"shipping_same_as_billing"!==e.key}))),f(a.filter((function(e){return"billing_same_as_shipping"===e.key||"shipping_same_as_billing"===e.key})))}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:d,shouldCloseOnClickOutside:!1,isDismissible:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-edit-field-modal bwf-section-modal bwf-admin-modal-no-header"},Object(r.createElement)(Ee.a,{title:Object(r.createElement)(r.Fragment,null,Object(l.__)("Field","funnel-builder")," -"," ","".concat(n," Address")),onClose:d}),Object(r.createElement)("div",{className:"sections"},Object(r.createElement)("div",{className:"bwf_vue_forms"},Object(r.createElement)("div",{className:"bwf_without_form_generator "},Object(r.createElement)("div",{className:"bwf_billing"},Object(r.createElement)(Fe,{onPopupClose:d,addressData:a,onChange:c,helperClass:"bwf-address-item__helper-class",useDragHandle:!0,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;s((function(e){return Object(ge.d)(e,t,n)}))},address:o,setAddress:s,setLastItems:f,lastItems:b})))))))},Re=(n(369),function(e){var t=e.onRequestClose,n=e.desc,a=void 0===n?"":n;return Object(r.createElement)(O.Modal,{title:Object(l.__)("Alert!","funnel-builder"),className:"bwf-validation-modal bwf-admin-modal bwf-admin-modal-small bwf-c-s-delete-model",onRequestClose:t},Object(r.createElement)("div",{className:"bwf-validation-desc bwf-modal-error bwf-modal-content"},a),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.a,{isPrimary:!0,onClick:t},Object(l.__)("Close","funnel-builder"))))}),Be=n(265),Me=n(24),qe=n(60);function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ge=["product_switching","order_total"],Je=function(e){var t=e.list,n=e.fieldIndex,a=e.sectionIndex,i=e.editField,s=e.onDeleteField,u=Object(o.a)("ck").isProFeatureLocked,b=ze(Object(r.useState)({status:!1}),2),f=b[0],d=b[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Be.b,{draggableId:t.id?JSON.stringify(t.id):"field-list-".concat(n),key:t.id,index:n},(function(e){return Object(r.createElement)("div",Ue({ref:e.innerRef,key:t.id},e.draggableProps,e.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui - sortable - handle bwf - width - auto",onClick:function(){u&&(null!=t&&t.is_pro||Ge.includes(t.id))?d({status:!0,feature:"product_switching"===t.id?Object(l.__)("Product Field","funnel-builder"):"order_total"===t.id?Object(l.__)("Order Total Field","funnel-builder"):Object(l.__)("Advanced Fields","funnel-builder"),proLink:Object(j.M)(["Form","Field","Section","Field","Upgrade","Modal"])}):i(t,a)}}),u&&((null==t?void 0:t.is_pro)||Ge.includes(t.id))&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==t?void 0:t.data_label),!t.hasOwnProperty("id")||"billing_email"===t.id||u&&(null!=t&&t.is_pro||Ge.includes(t.id))?Object(r.createElement)("span",{className:"bwf-ml-4"}):Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(e){s(t,a),e.stopPropagation()}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16})),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(l.__)("Click to edit. Drag to re-order.","funnel-builder")))})),f.status&&Object(r.createElement)(qe.a,{isOpen:f.status,onRequestClose:function(){return d({status:!1})},modalContent:f,type:2}))};var $e=function(e){var t=e.data,n=e.sectionIndex,a=e.editField,c=e.onDeleteField;return Object(r.createElement)(Be.c,{droppableId:"droppableVM-".concat(t.id),type:"droppableVM",direction:"horizontal"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",{ref:e.innerRef,className:"bwf_template_field_container single_step ui-sortable"},t.hasOwnProperty("fields")&&Object(p.isArray)(t.fields)&&t.fields.length>0?null==t?void 0:t.fields.map((function(e,t){return Object(r.createElement)(Je,{list:e,fieldIndex:t,sectionIndex:n,editField:a,onDeleteField:c,key:t})})):Object(r.createElement)("span",null,Object(l.__)("Drag new fields here to populate the section","funnel-builder"))),e.placeholder)}))};function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xe=function(e){var t=e.data,n=e.index,a=e.editSection,i=e.deleteSection,o=e.editField,s=e.onDeleteField,u=e.onDropFields,b=We(Object(r.useState)(),2),f=b[0],d=b[1],O=We(Object(r.useState)({}),2),j=O[0],v=O[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Be.b,{draggableId:(null==t?void 0:t.id)||"section-".concat(n),key:null==t?void 0:t.id,index:n},(function(e){return Object(r.createElement)("div",{key:null==t?void 0:t.id},Object(r.createElement)("div",He({ref:e.innerRef},e.draggableProps,{key:n,className:"bwf_field_container ui-sortable-handle",onDrop:function(e){u(e,f)},onDragEnter:function(e){d(n)},onDragOver:function(e){e.preventDefault()}}),Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("span",e.dragHandleProps,Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-cursor-move"},Object(r.createElement)(c.a,{icon:"ul",size:"16"}))),Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("span",{className:"bwf-section-name"},null==t?void 0:t.name),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"-"),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},null==t?void 0:t.sub_heading)),Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){return a(t,n)}},Object(r.createElement)(c.a,{icon:"edit",color:"#82838E",size:16}))),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){var e,a,c;e=null==t?void 0:t.name,a=n,c={modalTitle:Object(l.__)("Remove Section","funnel-builder"),content:Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to remove ","funnel-builder"),Object(r.createElement)("b",null,e),Object(l.__)(". This action cannot be undone. Cancel to stop, Remove to proceed.","funnel-builder")),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0},v(Ye(Ye({},c),{},{onConfirm:function(){i(a),v({status:!1})}}))}},Object(r.createElement)(c.a,{icon:"trash",color:"#82838E",size:18})))),Object(r.createElement)($e,{data:t,sectionIndex:n,editField:o,onDeleteField:s}))))})),Object(r.createElement)(m.a,{isLoading:j.loading,successMessage:j.success,errorMessage:j.error,isOpen:j.status,autoHide:8e3,closeIcon:!0,content:j.content,confirmText:j.confirmText,confirmButtonText:j.confirmButtonText,confirmButtonClass:j.confirmButtonClass,cancelButtonText:j.cancelButtonText,onConfirm:j.onConfirm,onCancel:j.onCancel,modalTitle:j.modalTitle,disableConfirm:j.disableConfirm,onRequestClose:function(){return v({status:!1})}}))};function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e){return function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ot=function(e,t,n){var r=Array.from(e),a=lt(r.splice(t,1),1)[0];return r.splice(n,0,a),r},st=function(e){var t=e.step,n=e.fieldsStep,a=e.setIsAddSection,c=e.onDeleteField,i=e.deleteSection,o=e.editSection,s=e.editField,u=e.updateStepField,b=e.onDropFields,f=e.activeStep,d=n[Object(p.size)(n)-1];return Object(r.createElement)("div",{"data-slug":"third_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder third_step ui-sortable"},Object(r.createElement)(Be.a,{onDragEnd:function(e){var n=e.source,r=e.destination;if(e.destination)if("droppableStep"===e.type){var a=ot(t,e.source.index,e.destination.index);u(a)}else if("droppableVM"===e.type){var l,c=n.droppableId.substring(n.droppableId.indexOf("-")+1),i=r.droppableId.substring(r.droppableId.indexOf("-")+1),o=t.filter((function(e){return e.id===c})),s=t.filter((function(e){return e.id===i})),b=ot(null===(l=o[0])||void 0===l?void 0:l.fields,e.source.index,e.destination.index);if(c===i){var f=t.map((function(e){return e.id===c?rt(rt({},e),{},{fields:b}):e}));u(f)}else{var d,m,p=tt(null===(d=o[0])||void 0===d?void 0:d.fields),O=tt(null===(m=s[0])||void 0===m?void 0:m.fields),j=lt(p.splice(e.source.index,1),1)[0];O.splice(e.destination.index,0,j);var v=t.map((function(e){return e.id===c?rt(rt({},e),{},{fields:p}):e.id===i?rt(rt({},e),{},{fields:O}):e}));u(v)}}}},Object(r.createElement)(Be.c,{droppableId:"droppable",type:"droppableStep"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",et({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return Object(r.createElement)(Xe,{data:e,key:t,index:t,editSection:o,deleteSection:i,editField:s,onDeleteField:c,onDropFields:b})}))),e.placeholder)})))),d===f&&Object(r.createElement)("div",{className:"bwf_form_note_sec bwf_field_container bwf-mb-16"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(l.__)("Payment Gateways","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("span",null,Object(l.__)("Note: Payment Information containing gateways will be automatically added to the end of order form.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)(O.Button,{isSecondary:!0,onClick:function(){return a(!0)}},Object(l.__)("Add New Section","funnel-builder"))))};function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dt=function(e){var t=e.onCloseModal,n=e.editData,a=e.editId,c=e.editSection,i=bt(Object(r.useState)({name:"",sub_heading:"",class:"",fields:[],id:""}),2),o=i[0],s=i[1],u=Object(r.useRef)(),b=bt(Object(r.useState)(!1),2),f=b[0],d=b[1];Object(r.useEffect)((function(){s(n)}),[n]);var m=function(){t()};Object(r.useEffect)((function(){u.current.focus()}),[]);var p=o;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:m,title:Object(l.__)("Edit Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(U.a,{validate:function(){return{}},onSubmitCallback:function(e){d(!0),c(e,a)},initialValues:p},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,ut({},t("name"),{label:Object(l.__)("Name","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()},ref:u}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,ut({},t("sub_heading"),{label:Object(l.__)("Sub Heading","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,ut({},t("class"),{label:Object(l.__)("Classes","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(O.Button,{onClick:m,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,isBusy:f,onClick:n},Object(l.__)("Update","funnel-builder"))))}))))};function mt(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot=function(e){var t=e.selectors,n=void 0===t?[7,1,5]:t,a=e.sectionCount,l=void 0===a?3:a,c=e.staticSection,i=void 0===c||c,o=e.addSection,s=void 0===o||o,u=e.steps,b=void 0===u||u;return Object(r.createElement)("div",{className:"bwf-design-form"},Object(r.createElement)("div",{className:"bwf-form-title bwf-placeholder-temp bwf-h-28 bwf-w-180 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-form-description bwf-placeholder-temp bwf-h-20 bwf-w-400 bwf-mt-8"}),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},b?Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-240 bwf-h-30 bwf-rounded-3 bwf-border-1"}))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-20"}))),Object(r.createElement)("div",{className:"single_step_template"},mt(Array(l)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf_field_container",key:"bwf_field_container__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "})),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},mt(Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-drag-item-".concat(t)})}))))})),i&&Object(r.createElement)("div",{className:"bwf_field_container"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-16 "}))),s&&Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-36 bwf-rounded-3 bwf-border-1"})))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in bwf-h-30"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-40 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}))),n.map((function(e,t){return Object(r.createElement)("div",{className:"bwf_input_fields",key:"bwf_input_fields__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf_input_fields_list"},mt(Array(e)).map((function(e,n){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-selector-drag-item__placeholder-".concat(t,"-").concat(n)})})))))}))))),Object(r.createElement)("div",{className:"bwf_form_submit bwf-mt-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-36 bwf-rounded-3 bwf-border-1"})))},jt=n(27),vt=n(121);function _t(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function yt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){_t(l,r,a,c,i,"next",e)}function i(e){_t(l,r,a,c,i,"throw",e)}c(void 0)}))}}function ht(e){return function(e){if(Array.isArray(e))return kt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||Nt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){if(e){if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ct=function(e){var t=e.type,n=e.stepId,a=e.tab,i=e.offerId,s=Object(o.a)("ck").isProFeatureLocked,u=Object(o.b)().showSnackbar,b=St(Object(r.useState)(),2),f=b[0],O=b[1],y=St(Object(r.useState)(),2),h=y[0],g=y[1],E=St(Object(r.useState)(),2),S=E[0],N=E[1],k=St(Object(r.useState)(),2),C=k[0],P=k[1],x=St(Object(r.useState)(!1),2),T=x[0],A=x[1],I=St(Object(r.useState)(!1),2),D=I[0],F=I[1],L=St(Object(r.useState)(!1),2),R=L[0],B=L[1],M=St(Object(r.useState)(!1),2),q=M[0],U=M[1],z=St(Object(r.useState)(""),2),V=z[0],G=z[1],J=St(Object(r.useState)(!1),2),$=J[0],H=J[1],K=St(Object(r.useState)({}),2),Q=K[0],W=K[1],Z=St(Object(r.useState)({}),2),ee=Z[0],te=Z[1],ne=St(Object(r.useState)(""),2),re=ne[0],ae=ne[1],le=St(Object(r.useState)(["single_step"]),2),ce=le[0],oe=le[1],se=St(Object(r.useState)("single_step"),2),ue=se[0],be=se[1],fe=St(Object(r.useState)([]),2),de=fe[0],me=fe[1],pe=St(Object(r.useState)([]),2),Oe=pe[0],je=pe[1],ve=St(Object(r.useState)([]),2),_e=ve[0],ye=ve[1],we=St(Object(r.useState)({}),2),Ee=we[0],Se=we[1],Ne=St(Object(r.useState)(""),2),ke=Ne[0],Ce=Ne[1],Pe=St(Object(r.useState)(""),2),xe=Pe[0],Te=Pe[1],Ae=St(Object(r.useState)([]),2),Ie=Ae[0],De=Ae[1],Fe=St(Object(r.useState)([]),2),Be=Fe[0],Ue=Fe[1],ze=St(Object(r.useState)([]),2),Ve=ze[0],Ge=ze[1],Je=St(Object(r.useState)(!1),2),$e=Je[0],He=Je[1],Ke=St(Object(r.useState)(),2),Ye=Ke[0],Qe=Ke[1],We=St(Object(r.useState)(""),2),Ze=We[0],Xe=We[1],et=St(Object(r.useState)({status:!1}),2),tt=et[0],nt=et[1],rt=St(Object(r.useState)(!1),2),at=rt[0],lt=rt[1],ct=St(Object(r.useState)(!1),2),it=ct[0],ot=ct[1],ut=St(Object(r.useState)([]),2),bt=ut[0],ft=ut[1],mt=St(Object(r.useState)(!1),2),pt=mt[0],_t=mt[1],wt=Object(r.useRef)(new AbortController),Et=Object(r.useRef)(!0),Nt=Object(w.a)(),kt=Nt.getFormLoading,Ct=Nt.getFormData,Pt=Nt.getStep,xt=Object(_.a)(),Tt=xt.fetchStepFields,At=xt.setFormFieldData,It=xt.setSaveDataValue,Dt=xt.fetchStep,Ft=kt(),Lt=Ct(t,n,a,i),Rt=Pt(t,n,a,i).unSavedData,Bt=void 0!==Rt&&Rt;Object(r.useEffect)((function(){re&&(u(re),ae(""))}),[re]);var Mt=Lt.dependency_messages,qt=void 0===Mt?[]:Mt,Ut=Lt.fields,zt=void 0===Ut?[]:Ut,Vt=Lt.fields_data,Gt=void 0===Vt?{}:Vt,Jt=Lt.fields_types,$t=void 0===Jt?[]:Jt,Ht=zt.active_fields,Kt=void 0===Ht?[]:Ht,Yt=zt.steps,Qt=void 0===Yt?{}:Yt,Wt=zt.product_fields,Zt=void 0===Wt?{}:Wt,Xt=Gt.basic,en=Gt.advanced,tn=Gt.product,nn=Gt.third_party,rn=Gt.address_order,an=void 0===rn?{}:rn,ln=an.address,cn=void 0===ln?[]:ln,on=an.shipping_address,sn=void 0===on?[]:on,un=Zt.products,bn=void 0===un?[]:un,fn=Zt.default_products,dn=void 0===fn?"":fn,mn=Zt.settings,pn=void 0===mn?{}:mn,On=Zt.add_to_cart_setting,jn=void 0===On?"":On,vn=zt.fieldsets,_n=void 0===vn?{}:vn;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(_n)){if(_n.hasOwnProperty("single_step")&&_n.single_step){var e=_n.single_step;me(e),De(e)}_n.hasOwnProperty("two_step")&&_n.two_step?(je(_n.two_step),Ue(_n.two_step)):(je([]),Ue([])),_n.hasOwnProperty("third_step")&&_n.third_step?(ye(_n.third_step),Ge(_n.third_step)):(ye([]),Ge([]))}}),[_n]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(qt)){var e=qt.map((function(e){return gt(gt({},e),{},{showDependency:!1})}));ft(e)}}),[qt]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(_n)){var e=Object(p.cloneDeep)(Lt);e.fields.active_fields=yn(_n),At(t,n,a,i,e,{})}}),[Ft]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(Qt)){var e=["single_step"];Qt.hasOwnProperty("two_step")&&"yes"===Qt.two_step.active&&e.push("two_step"),e.includes("two_step")&&Qt.hasOwnProperty("third_step")&&"yes"===Qt.third_step.active&&e.push("third_step"),oe(e)}}),[Qt]),Object(r.useEffect)((function(){return(Object(p.isEmpty)(Lt)||Ft||Bt)&&Tt(t,n,a,i,wt.current.signal),function(){Et.current=!1,wt.current.abort()}}),[]);var yn=function(e){var t=[];e.hasOwnProperty("single_step")&&e.single_step.length>0&&e.single_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,ht(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("two_step")&&e.two_step.length>0&&e.two_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,ht(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("third_step")&&e.third_step.length>0&&e.third_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,ht(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))}));var n=[].concat(t);return ht(new Set(n))},hn=function(e){var r=en.filter((function(t){return t.id!==e})),l=Object(p.cloneDeep)(Lt);l.fields_data.advanced=r,At(t,n,a,i,l)},wn=function(e){var t=0,n=0,r="";r=0===Object(p.size)(ce)||1==Object(p.size)(ce)?"single_step":2===Object(p.size)(ce)?"two_step":"third_step";var a=!1;return Object.values(e).every((function(e){return e.every((function(e){return e.fields.every((function(e){return"address"===e.id?(n=1,t=2,a=!0):"shipping_address"===e.id&&(t=1,n=2,a=!0),!0!==a})),!0!==a})),!0!==a})),{current_step:r,have_billing_address:Kt.includes("address")?"true":"false",have_shipping_address:Kt.includes("shipping_address")?"true":"false",have_coupon_field:Kt.includes("order_coupon")?"true":"false",have_shipping_method:Kt.includes("shipping_calculator")?"true":"false",enabled_product_switching:Kt.includes("product_switching")?"yes":"no",have_billing_address_index:n,have_shipping_address_index:t}},gn=function(){var e=yt(regeneratorRuntime.mark((function e(){var r,c,o,s,u,b,f,m,O,v,_,y,h,w,g,E=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=E.length>0&&void 0!==E[0]?E[0]:{},c=E.length>1?E[1]:void 0,o=E.length>2?E[2]:void 0,s=wn(r.hasOwnProperty("fieldsets")?r.fieldsets:_n),u={steps:Qt,fieldsets:r.hasOwnProperty("fieldsets")?r.fieldsets:_n,products:bn,address_order:r.hasOwnProperty("address_order")?r.address_order:an,default_products:Object(p.get)(r,"product_fields.default_products",dn),product_settings:pn,product_fields:r.hasOwnProperty("product_fields")?r.product_fields:Zt,current_step:s.current_step,have_billing_address:s.have_billing_address,have_shipping_address:s.have_shipping_address,have_coupon_field:s.have_coupon_field,have_shipping_method:s.have_shipping_method,enabled_product_switching:s.enabled_product_switching,have_billing_address_index:s.have_billing_address_index,have_shipping_address_index:s.have_shipping_address_index,active_fields:Kt},b=!1,f=!1,ce.includes("third_step")&&(v=0,null===(m=r.hasOwnProperty("fieldsets")?r.fieldsets:_n)||void 0===m||null===(O=m.two_step)||void 0===O||O.map((function(e){0===Object(p.size)(e.fields)&&0===v?b=!0:v+=1})),0===Object(p.size)(null==_n?void 0:_n.two_step)&&(b=!0)),ce.includes("two_step")&&(w=0,null===(_=r.hasOwnProperty("fieldsets")?r.fieldsets:_n)||void 0===_||null===(y=_.single_step)||void 0===y||y.map((function(e){0===Object(p.size)(e.fields)&&0===w?f=!0:w+=1})),0===Object(p.size)(null===(h=r.hasOwnProperty("fieldsets")?r.fieldsets:_n)||void 0===h?void 0:h.single_step)&&(f=!0)),g=!1,Kt.includes("billing_email")&&(g=!0),g){e.next=15;break}He(!0),e.next=32;break;case 15:if(!f){e.next=19;break}ot(!0),e.next=32;break;case 19:if(!b){e.next=23;break}lt(!0),e.next=32;break;case 23:return e.prev=23,e.next=26,d()({path:Object(j.r)("/funnel-checkout/".concat(n,"/form_fields")),method:"POST",data:u}).then((function(e){e.success?(It(!1),c?(hn(o),W({loading:!1,status:!1})):At(t,n,a,i,{},{unSavedData:!1}),"checkout"===t&&Dt(t,n,"optimizations",i),ae(Object(l.__)("Changes Saved","funnel-builder"))):ae(e.msg||e.message)}));case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(23),console.log(e.t0),ae(e.t0.message);case 32:_t(!1);case 33:case"end":return e.stop()}}),e,null,[[23,28]])})));return function(){return e.apply(this,arguments)}}(),En=function(e){var r=Object(p.cloneDeep)(Lt);switch(e){case"third_step":r.fields.current_step="two_step";break;case"two_step":r.fields.current_step="single_step"}r.fields.steps[e].active="no",delete r.fields.fieldsets[e],r.fields.active_fields=yn(r.fields.fieldsets),At(t,n,a,i,r,{unSavedData:!0})},Sn=function(e){var r=Object(p.cloneDeep)(Lt);r.fields.current_step=e,r.fields.steps[e].active="yes",At(t,n,a,i,r,{unSavedData:!0}),setTimeout((function(){return be(e)}),100)},Nn=function(e,t){var n=[];return e.map((function(e,r){r===t&&e.fields.map((function(e){return n.push(e.id)}))})),Kt.filter((function(e){return!n.includes(e)}))},kn={wfacp_duplicate_billing_first_and_last_name:function(){return!!["billing_first_name","billing_last_name"].map((function(e){var t=!1;return Kt.includes(e)&&cn.filter((function(t){if(t.key===e)return t})).map((function(e){return!!e.status})).includes(!0)&&(t=!0),t})).includes(!0)}};Object(r.useEffect)((function(){if(bt.length>0){var e=Object(p.cloneDeep)(bt);e=e.map((function(e){return e.hasOwnProperty("isRemoved")&&e.isRemoved?(e.showDependency=!1,e):e.hasOwnProperty("ids")&&Array.isArray(e.ids)?(Kt.filter((function(t){return e.ids.includes(t)})).length>0?e.showDependency=!1:e.showDependency=!0,e):e.hasOwnProperty("reverse_check")&&e.reverse_check&&e.hasOwnProperty("id")&&""!==e.id?(Kt.includes(e.id)?e.showDependency=!0:e.showDependency=!1,e):e.hasOwnProperty("call_back")&&kn.hasOwnProperty(e.call_back)?(kn[e.call_back]()?e.showDependency=!0:e.showDependency=!1,e):(e.hasOwnProperty("show")&&e.show&&(e.showDependency=!0),e)})),ft(e)}}),[Kt,cn,Qt,Ft,ce]);var Cn=function(){var e=yt(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},t.hasOwnProperty("message_id")&&(r.message_id=t.message_id),r.message_type=t.hasOwnProperty("is_global")&&!0===t.is_global?"global":"self";try{d()({path:Object(j.r)("/funnel-checkout/".concat(n,"/form_fields/hide-message")),method:"POST",data:r}).then((function(e){if(e.success){if(r.hasOwnProperty("message_id")){var t=Object(p.cloneDeep)(bt);t=t.map((function(e){return e.hasOwnProperty("message_id")&&r.message_id===e.message_id&&(e.showDependency=!1,e.isRemoved=!0),e})),ft(t)}}else ae(e.msg||e.message)}))}catch(e){console.log(e.message)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pn=function(){nt({status:!0,feature:Object(l.__)("Multistep Checkout","funnel-builder"),proLink:Object(j.M)(["Form","Field","Section","Field","Upgrade","Modal"])})};return Ft?Object(r.createElement)(Ot,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-title"},Object(l.__)("Checkout Form Fields","funnel-builder")),Object(r.createElement)("style",null,".bwfan__step-header .bwf-step-menu-header{\n\t\tmargin-bottom: 12px !important;\n\t   }"),Object(r.createElement)("div",{className:" bwf_w_full"},bt.map((function(e,t){if(e.showDependency)return Object(r.createElement)("div",{key:t,className:"bwf-form-field-warning ".concat(e.dismissible?"":"bwf-remove-icon")},Object(r.createElement)("div",{className:"bwf-warning-text"},Object(r.createElement)("div",{className:"bwf-warning-icon"},Object(r.createElement)(c.a,{icon:"info",width:20,height:20})),Object(r.createElement)("div",{className:"bwf-warning-content",dangerouslySetInnerHTML:{__html:e.message}}),e.dismissible&&Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){Cn(e)}},Object(r.createElement)(c.a,{icon:"close",width:16,height:16}))))}))),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_form_field_header"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf_step_actions"},Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){return be("single_step")}},Object(r.createElement)("div",{"data-slug":"single_step",className:"bwf_template_tabs ".concat("single_step"===ue&&"bwf_active_tabs"," ")},Object(r.createElement)("span",null,Object(l.__)("Step 1","funnel-builder")))),(null==ce?void 0:ce.length)>1&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){s?Pn():be("two_step")}},Object(r.createElement)("div",{"data-slug":"two_step",className:"bwf_template_tabs ".concat("two_step"===ue&&"bwf_active_tabs"," ")},s&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(l.__)("Step 2","funnel-builder")),!s&&2===(null==ce?void 0:ce.length)&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),En("two_step"),setTimeout((function(){be("single_step")}),100)}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16})))),(null==ce?void 0:ce.length)>2&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){s?Pn():be("third_step")}},Object(r.createElement)("div",{"data-slug":"third_step",className:"bwf_template_tabs ".concat("third_step"===ue&&"bwf_active_tabs"," ")},s&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(l.__)("Step 3","funnel-builder")),!s&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),En("third_step"),setTimeout((function(){be("two_step")}),100)}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16}))))),(null==ce?void 0:ce.length)<3&&Object(r.createElement)("div",{className:"bwf_add_new_step"},Object(r.createElement)("div",{className:"bwf_step bwf_modal_open bwf_step_add_step_btn",onClick:function(){s?Pn():1==ce.length?Sn("two_step"):2==ce.length&&Sn("third_step")}},s&&Object(r.createElement)(Me.a,{className:"size-16"})," ",Object(r.createElement)("span",null,!s&&"+"," ",Object(l.__)("Add New Step","funnel-builder")))))),Object(r.createElement)(v.a,{isPrimary:!0,onClick:function(){_t(!0),gn()},isBusy:pt,disabled:pt},Object(l.__)("Save","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_p20_noside bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf_wrap_inner_fields bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container bwf-position-relative"},s&&"single_step"!==ue&&Object(r.createElement)(vt.b,{modalContent:{feature:Object(l.__)("Multistep Checkout","funnel-builder"),proLink:Object(j.M)(["Form","Field","MultiStep","Upgrade","Modal"])},content:Object(l.__)("We're sorry, this feature is not available on your plan. Learn more about Multistep Checkout.","funnel-builder")}),Object(r.createElement)("div",null,Object(r.createElement)(st,{activeStep:ue,step:"single_step"==ue?de:"two_step"==ue?Oe:_e,fields:"single_step"==ue?Ie:"two_step"==ue?Be:Ve,fieldsStep:ce,setIsAddSection:F,helperClass:"bwf-section-item__helper-class",useDragHandle:!0,onSortEnd:function(e){var r=e.oldIndex,l=e.newIndex;"single_step"==ue?(me((function(e){return Object(ge.d)(e,r,l)})),De((function(e){return Object(ge.d)(e,r,l)}))):"two_step"==ue?(je((function(e){return Object(ge.d)(e,r,l)})),Ue((function(e){return Object(ge.d)(e,r,l)}))):(ye((function(e){return Object(ge.d)(e,r,l)})),Ge((function(e){return Object(ge.d)(e,r,l)})));var c=Object(p.cloneDeep)(Lt);"single_step"===ue?c.fields.fieldsets.single_step=Object(ge.d)(c.fields.fieldsets.single_step,r,l):"two_step"===ue?c.fields.fieldsets.two_step=Object(ge.d)(c.fields.fieldsets.two_step,r,l):"third_step"===ue&&(c.fields.fieldsets.third_step=Object(ge.d)(c.fields.fieldsets.third_step,r,l)),c.fields.active_fields=yn(c.fields.fieldsets),At(t,n,a,i,c,{unSavedData:!0})},onDeleteField:function(e,r){var l,c,o=Object(p.cloneDeep)(Lt);if(o.fields.active_fields=o.fields.active_fields.filter((function(t){if(t!=e.id)return t})),"single_step"==ue)Ie[r].fields=null===(l=Ie[r])||void 0===l||null===(c=l.fields)||void 0===c?void 0:c.filter((function(t){return t.id!=e.id})),o.fields.fieldsets.single_step=JSON.parse(JSON.stringify(Ie));else if("two_step"==ue){var s,u;Be[r].fields=null===(s=Be[r])||void 0===s||null===(u=s.fields)||void 0===u?void 0:u.filter((function(t){return t.id!=e.id})),o.fields.fieldsets.two_step=JSON.parse(JSON.stringify(Be))}else if("third_step"==ue){var b,f;Ve[r].fields=null===(b=Ve[r])||void 0===b||null===(f=b.fields)||void 0===f?void 0:f.filter((function(t){return t.id!=e.id})),o.fields.fieldsets.third_step=JSON.parse(JSON.stringify(Ve))}At(t,n,a,i,o,{unSavedData:!0})},deleteSection:function(e){var r=Object(p.cloneDeep)(Lt),l=[];if("single_step"==ue){var c=de.filter((function(t,n){return n!==e}));r.fields.fieldsets.single_step=JSON.parse(JSON.stringify(c)),l=Nn(de,e)}else if("two_step"==ue){var o=Oe.filter((function(t,n){return n!==e}));r.fields.fieldsets.two_step=JSON.parse(JSON.stringify(o)),l=Nn(Oe,e)}else{var s=_e.filter((function(t,n){return n!==e}));r.fields.fieldsets.third_step=JSON.parse(JSON.stringify(s)),l=Nn(_e,e)}r.fields.active_fields=l,At(t,n,a,i,r,{unSavedData:!0})},editSection:function(e,t){Se(e),Xe(!0),Ce(t)},editField:function(e,t){te(e),"product_switching"===e.id?U(!0):"address"===e.id?(G("Billing"),H(!0)):"shipping_address"===e.id?(G("Shipping"),H(!0)):"product_switching"!==e.id&&"wc_advanced_order_field"!==e.id&&(B(!0),Qe(t))},updateStepField:function(e){var r=Object(p.cloneDeep)(Lt);"single_step"===ue?(r.fields.fieldsets.single_step=e,me(e),De(e)):"two_step"===ue?(r.fields.fieldsets.two_step=e,je(e),Ue(e)):"third_step"===ue&&(r.fields.fieldsets.third_step=e,ye(e),Ge(e)),r.fields.active_fields=yn(r.fields.fieldsets),At(t,n,a,i,r)},onDropFields:function(e,r){var l=Object(p.cloneDeep)(Lt);if("single_step"===ue){var c;if("product"===xe)null===(c=de[r])||void 0===c||c.fields.push(S);else if("advance"===xe){var o;null===(o=de[r])||void 0===o||o.fields.push(f)}else if("basic"===xe){var s;null===(s=de[r])||void 0===s||s.fields.push(h)}else if("third_party"===xe){var u;null===(u=de[r])||void 0===u||u.fields.push(C)}l.fields.fieldsets.single_step=JSON.parse(JSON.stringify(de))}else if("two_step"===ue){var b;if("product"==xe)null===(b=Oe[r])||void 0===b||b.fields.push(S);else if("advance"===xe){var d;null===(d=Oe[r])||void 0===d||d.fields.push(f)}else if("basic"===xe){var m;null===(m=Oe[r])||void 0===m||m.fields.push(h)}else if("third_party"===xe){var O;null===(O=Oe[r])||void 0===O||O.fields.push(C)}l.fields.fieldsets.two_step=JSON.parse(JSON.stringify(Oe))}else if("third_step"===ue){var j;if("product"==xe)null===(j=_e[r])||void 0===j||j.fields.push(S);else if("advance"===xe){var v;null===(v=_e[r])||void 0===v||v.fields.push(f)}else if("basic"===xe){var _;null===(_=_e[r])||void 0===_||_.fields.push(h)}else if("third_party"===xe){var y;null===(y=_e[r])||void 0===y||y.fields.push(C)}l.fields.fieldsets.third_step=JSON.parse(JSON.stringify(_e))}l.fields.active_fields=yn(l.fields.fieldsets),At(t,n,a,i,l,{unSavedData:!0})}}))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(l.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=Xt[t];null!=Kt&&Kt.includes(n.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(e){return t=n,Te("basic"),void g(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in Xt)t(n);return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=tn[t];null!=Kt&&Kt.includes(n.id)||s&&n.is_pro?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},s&&n.is_pro&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(e){return t=n,Te("product"),void N(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in tn)t(n);return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t={a:0,b:0},a=function(a){var i=en[a];Object(p.isEmpty)(i.label)||(null!=Kt&&Kt.includes(i.id.toString())||s&&i.is_pro?(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:i.id+t.a.toString()},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},s&&i.is_pro&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==i?void 0:i.label))))),t.a++):(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:i.id+t.b.toString()},Object(r.createElement)("div",{onDragStart:function(e){return t=i,Te("advance"),void O(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text bwf-white-break-space"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==i?void 0:i.label)),i.allow_delete&&Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(l.__)("Delete Field","funnel-builder"),content:Object(l.sprintf)(Object(l.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),i.label),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};W(gt(gt({},e),{},{onConfirm:function(){!function(e,t){W(gt(gt({},t),{},{disableConfirm:!0}));try{d()({path:Object(j.r)("/funnel-checkout/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:{section:"advanced",index:e}}).then((function(t){t.success?(hn(e),gn({},!0,e)):ae(t.msg||t.message)}))}catch(e){W({status:!0,error:e.message||e.msg})}}(i.id,e)}}))}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16}))))),t.b++))};for(var i in en)a(i);return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields bwf-third-party"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title bwf-flex bwf--space-between "},Object(r.createElement)("div",{className:"bwf-flex bwf--align-end bwf--g8"},Object(r.createElement)("b",null,Object(l.__)("Third Party Addon Field","funnel-builder")))),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=nn[t];null!=Kt&&Kt.includes(n.id)||s&&"yes"===n.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},s&&"yes"===n.is_locked&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(e){return t=n,Te("third_party"),void P(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in nn)t(n);return e}()),Object(r.createElement)("div",{className:"bwf-description bwf-text-style-3 bwf-color-normal"},Object(r.createElement)("div",null,Object(l.__)("Drag this field to show the advanced fields registered by other plugins in case they are missing from the checkout.","funnel-builder")),Object(r.createElement)("div",null,Object(r.createElement)("span",null,Object(l.__)("Still not seeing field on the checkout?","funnel-builder")),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Third+Party+Checkout+Field&utm_campaign=Lite+Plugin",target:"_blank"},Object(l.__)(" Contact Support","funnel-builder"))))))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(v.a,{isSmall:!0,isSecondary:!0,onClick:function(){s?nt({status:!0,feature:Object(l.__)("Adding Field","funnel-builder"),content:{},proLink:Object(j.M)(["Form","Field","New","Field","Upgrade","Modal"])}):A(!0)}},s?Object(r.createElement)(c.a,{icon:"king",size:"20",color:jt.BLUE_BASE}):""," ",Object(l.__)("Add New Field","funnel-builder"))))))))),T&&Object(r.createElement)(Y,{fieldTypes:$t,onCloseModal:function(){A(!1)},onSuccess:function(e){A(!1);var r=Object(p.cloneDeep)(Lt);r.fields_data.advanced=[].concat(ht(en),[e]),At(t,n,a,i,r)},SnackBarMsg:function(e){ae(e)}}),D&&Object(r.createElement)(X,{onCloseModal:function(){F(!1)},addedSection:function(){var e=yt(regeneratorRuntime.mark((function e(r){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=Object(p.cloneDeep)(Lt),"single_step"===ue?l.fields.fieldsets.single_step=[].concat(ht(de),[r]):"two_step"===ue?l.fields.fieldsets.two_step=[].concat(ht(Oe),[r]):"third_step"===ue&&(l.fields.fieldsets.third_step=[].concat(ht(_e),[r])),At(t,n,a,i,l,{unSavedData:!0}),F(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Ze&&Object(r.createElement)(dt,{onCloseModal:function(){Xe(!1)},editId:ke,editData:Ee,editSection:function(){var e=yt(regeneratorRuntime.mark((function e(r,l){var c,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(p.cloneDeep)(Lt),"single_step"===ue?(o=de.map((function(e,t){return t==l?r:e})),c.fields.fieldsets.single_step=JSON.parse(JSON.stringify(o))):"two_step"===ue?(s=Oe.map((function(e,t){return t===l?r:e})),c.fields.fieldsets.two_step=JSON.parse(JSON.stringify(s))):"third_step"===ue&&(u=_e.map((function(e,t){return t==l?r:e})),c.fields.fieldsets.third_step=JSON.parse(JSON.stringify(u))),At(t,n,a,i,c,{unSavedData:!0}),Xe(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),R&&Object(r.createElement)(ie,{onCloseModal:function(){B(!1)},updated:function(e){var r=Object(p.cloneDeep)(Lt);r.fields=e,At(t,n,a,i,r),B(!1),ae(Object(l.__)("Changes Saved","funnel-builder"))},updatedField:ee,fields:zt,activeStep:ue,updatedSectionId:Ye,SnackBarMsg:function(e){ae(e)}}),q&&Object(r.createElement)(he,{onCloseModal:function(){U(!1)},productData:Zt,addToCartSettings:jn,onChange:function(){var e=yt(regeneratorRuntime.mark((function e(r){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=Object(p.cloneDeep)(Lt)).fields.product_fields=gt(gt({},l.fields.product_fields),r),At(t,n,a,i,l,{unSavedData:!0}),e.next=5,gn({product_fields:l.fields.product_fields});case 5:U(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),$&&Object(r.createElement)(Le,{onCloseModal:function(){H(!1)},addressType:V,addressData:"Billing"===V?cn:sn,onChange:function(){var e=yt(regeneratorRuntime.mark((function e(r){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(p.cloneDeep)(Lt),"Billing"===V?l.fields_data.address_order.address=JSON.parse(JSON.stringify(r)):l.fields_data.address_order.shipping_address=JSON.parse(JSON.stringify(r)),At(t,n,a,i,l),e.next=5,gn({address_order:l.fields_data.address_order});case 5:H(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:Q.loading,successMessage:Q.success,errorMessage:Q.error,isOpen:Q.status,autoHide:8e3,closeIcon:!0,content:Q.content,confirmText:Q.confirmText,confirmButtonText:Q.confirmButtonText,confirmButtonClass:Q.confirmButtonClass,cancelButtonText:Q.cancelButtonText,onConfirm:Q.onConfirm,onCancel:Q.onCancel,modalTitle:Q.modalTitle,disableConfirm:Q.disableConfirm,onRequestClose:function(){return W({status:!1})}}),$e&&Object(r.createElement)(Re,{desc:Object(l.__)("Billing Email is required for processing payment","funnel-builder"),onRequestClose:function(){He(!1),It(!1)}}),at&&Object(r.createElement)(Re,{desc:Object(l.__)("Step 2 can't be blank. Add a few fields or remove the step and save again.","funnel-builder"),onRequestClose:function(){lt(!1),It(!1)}}),it&&Object(r.createElement)(Re,{desc:Object(l.__)("Step 1 can't be blank. Add a few fields and save again.","funnel-builder"),onRequestClose:function(){ot(!1),It(!1)}}),tt.status&&Object(r.createElement)(qe.a,{isOpen:tt.status,onRequestClose:function(){return nt({status:!1})},modalContent:tt,type:2})))},Pt=(n(282),n(247));function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lt=function(e){var t=e.onCloseModal,n=e.onSuccess,a=e.SnackBarMsg,c=e.stepId,i=Dt(Object(r.useState)(!1),2),o=i[0],s=i[1],u=Dt(Object(r.useState)("text"),2),b=u[0],f=u[1],m=function(){t()},p=Dt(Object(r.useState)({field_type:"text",label:"",placeholder:"",default:"",required:!1,options:"",radio_alignment:"horizontal",section_type:"advanced",enable_time:"false",preferred_time_format:"",show_custom_field_at_thankyou:"false",show_custom_field_at_email:"false",width:""}),2),_=p[0],y=p[1];Object(r.useEffect)((function(){y((function(e){return At(At({},e),{},{field_type:b,default:"checkbox"===b?"1":""})}))}),[b]);var h=_;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:m,title:Object(l.__)("Add Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-optin-form-modal"},Object(r.createElement)(U.a,{validate:function(e){var t={};return""===e.label.trim()&&(t.label=Object(l.__)("Label is required","funnel-builder")),e.label||(t.label=Object(l.__)("Label is required","funnel-builder")),["radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(l.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){s(!0);try{var t='{"section":"advanced","fields":'.concat(JSON.stringify(e),"}");d()({path:Object(j.r)("/funnel-optin/".concat(c,"/form_fields/add_field")),method:"POST",data:JSON.parse(t)}).then((function(e){e.success?(s(!1),n(e.data)):(s(!1),a(Object(l.__)("Something went wrong, Please contact to support team","funnel-builder")))}))}catch(e){s(!1),a(e.msg||e.message)}},initialValues:h,onChange:function(e,t){f(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,c=e.touched,i=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(z.b,xt({},t("field_type"),{options:[{label:Object(l.__)("Text","funnel-builder"),value:"text",key:"text"},{label:Object(l.__)("Radio","funnel-builder"),value:"radio",key:"radio"},{label:Object(l.__)("HTML","funnel-builder"),value:"wfop_wysiwyg",key:"wfop_wysiwyg"},{label:Object(l.__)("Select","funnel-builder"),value:"select",key:"select"},{label:Object(l.__)("Textarea","funnel-builder"),value:"textarea",key:"textarea"},{label:Object(l.__)("Checkbox","funnel-builder"),value:"checkbox",key:"checkbox"},{label:Object(l.__)("Hidden","funnel-builder"),value:"hidden",key:"hidden"}]})))),["text","radio","wfop_wysiwyg","select","textarea","checkbox","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,xt({},t("label"),{placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})),c.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["text","select","textarea"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,xt({},t("placeholder"),{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["text","radio","select","textarea","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,xt({},t("default"),{label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(z.b,xt({options:[{label:Object(l.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(l.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&i()}})))),["radio","select"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,xt({placeholder:Object(l.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&i()}})),c.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(l.__)("This is a required field","funnel-builder")))),["radio"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-modal-radio"},Object(r.createElement)(Pt.a,xt({options:[{label:Object(l.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(l.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["text","radio","select","textarea","checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,xt({},t("required"),{label:Object(l.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.a,{onClick:m,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:i,isBusy:o,disabled:o},Object(l.__)("Add","funnel-builder"))))}))))};function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vt=function(e){var t=e.onCloseModal,n=e.updatedField,a=e.fields,i=e.updated,o=e.SnackBarMsg,s=e.stepId,u=Ut(Object(r.useState)(!1),2),b=u[0],f=u[1],m=Ut(Object(r.useState)(n),2),p=m[0],_=m[1],y=function(){t()};Object(r.useEffect)((function(){switch(p.required){case"1":case"true":_((function(e){return Mt(Mt({},e),{},{required:!0})}));break;case"0":case"false":_((function(e){return Mt(Mt({},e),{},{required:!1})}))}switch(p.phone_validation){case"1":case"true":_((function(e){return Mt(Mt({},e),{},{phone_validation:!0})}));break;case"0":case"false":_((function(e){return Mt(Mt({},e),{},{phone_validation:!1})}))}}),[p]);var h=p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:y,isDismissible:!1,className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-update-field-modal bwf-optin-form-modal bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1},Object(r.createElement)(U.a,{validate:function(e){var t={};return["radios","radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(l.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){!function(e){f(!0);var t=a.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(j.r)("/funnel-optin/".concat(s,"/form_fields")),method:"POST",data:t}).then((function(e){e.success?(f(!1),i(t)):o(Object(l.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){o(e.message||e.msg)}}(e)},initialValues:h},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,i=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label),Object(r.createElement)("span",null,"(",Object(l.__)("Field Type : ","funnel-builder")," ",null==n?void 0:n.type,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label)),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:y},Object(r.createElement)(c.a,{icon:"close",size:20}))),["text","radios","radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Rt({},t("label"),{label:Object(l.__)("Label","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})),("wfop_wysiwyg"===n.type||"html"===n.type)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(l.__)("This label is for admin purpose only, won't appear on the optin form.","funnel-builder")))))),["text","select","textarea","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Rt({label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder")},t("placeholder"),{onKeyPress:function(e){"Enter"===e.key&&o()}})))),["text","radios","radio","select","textarea","hidden","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Rt({},t("default"),{label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here…","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})))),["checkbox"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(z.b,Rt({},t("default"),{options:[{label:Object(l.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(l.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]})))),["radios","select","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Rt({placeholder:Object(l.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&o()}})),i.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["radios","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-form-radio"},Object(r.createElement)(Pt.a,Rt({options:[{label:Object(l.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(l.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["wfop_wysiwyg","html"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field field-input"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ee.a,Rt({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["text","radios","radio","select","textarea","checkbox","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,Rt({},t("required"),{label:Object(l.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,Rt({},t("phone_validation"),{label:Object(l.__)("Enable Validation","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:pe()("bwf-form-buttons",{wf_funnel_right_align:!Object(l.isRTL)(),wf_funnel_left_align:Object(l.isRTL)()})},Object(r.createElement)(v.a,{onClick:y,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:o,isBusy:b,disabled:b},Object(l.__)("Update","funnel-builder"))))}))))};function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){return function(e){if(Array.isArray(e))return Wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||Qt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){if(e){if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zt=function(e){var t=e.type,n=e.stepId,a=e.tab,i=e.offerId,s=Object(o.a)().isProFeatureLocked,u=Object(o.b)().showSnackbar,b=Yt(Object(r.useState)([]),2),f=b[0],y=b[1],h=Yt(Object(r.useState)(),2),g=h[0],E=h[1],S=Yt(Object(r.useState)(!1),2),N=S[0],k=S[1],C=Yt(Object(r.useState)(!1),2),P=C[0],x=C[1],T=Yt(Object(r.useState)({}),2),A=T[0],I=T[1],D=Yt(Object(r.useState)({}),2),F=D[0],L=D[1],R=Yt(Object(r.useState)(""),2),B=R[0],M=R[1],q=Yt(Object(r.useState)(!1),2),U=q[0],z=q[1],V=Yt(Object(r.useState)(!1),2),G=V[0],J=V[1],$=Yt(Object(r.useState)({status:!1}),2),H=$[0],K=$[1],Y=Object(w.a)(),Q=Y.getLoading,W=Y.getFormLoading,Z=Y.getFormData,X=Y.getStep,ee=Object(_.a)(),te=ee.fetchStepFields,ne=ee.setFormFieldData,re=ee.setSaveDataValue,ae=Q(),le=W(),ce=Z(t,n,a,i),ie=X(t,n,a,i).unSavedData,oe=void 0!==ie&&ie,se=ce.fields,ue=void 0===se?[]:se,be=ce.fields_data,fe=void 0===be?{}:be,de=fe.basic,me=void 0===de?[]:de,pe=fe.advanced,Oe=void 0===pe?[]:pe,je=Oe.length>0;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(ue)&&ue.hasOwnProperty("single_step")&&ue.single_step){var e=ue.single_step[0].fields;y(e)}}),[ue]),Object(r.useEffect)((function(){B&&(u(B),M(""))}),[B]);var ve=Object(r.useRef)(new AbortController),_e=function(e){E(e)};Object(r.useEffect)((function(){return(Object(p.isEmpty)(ce)&&!ae||oe)&&te(t,n,a,i,ve.current.signal),function(){ve.current.abort()}}),[]);var ye=null==f?void 0:f.map((function(e){return null==e?void 0:e.id})),he=function(e){var r=Oe.filter((function(t){return t.id!==e})),l=Object(p.cloneDeep)(ce);l.fields_data.advanced=r,ne(t,n,a,i,l)},we=function(e,r,c){var o=!1;if(f.map((function(e){"wfop_optin_email"===e.id&&(o=!0)})),!o&&c)z(!0),J(!1);else try{d()({path:Object(j.r)("/funnel-optin/".concat(n,"/form_fields")),method:"POST",data:f}).then((function(c){if(c.success){if(re(!1),e)he(r),I({loading:!1,status:!1});else{var o=Object(p.cloneDeep)(ce);ne(t,n,a,i,o,{unSavedData:!1})}M(Object(l.__)("Changes Saved","funnel-builder")),J(!1)}else M(c.msg||c.message)}))}catch(e){console.log(e),M(e.message)}};return le?Object(r.createElement)(Ot,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-header"},Object(r.createElement)("span",{className:"bwf-form-title "},Object(l.__)("Optin Form Fields","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:function(){J(!0),we("","",!0)},isBusy:G,disabled:G},Object(l.__)("Save","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_layout_container"},Object(r.createElement)("div",{className:"bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{"data-slug":"single_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder single_step"},Object(r.createElement)("div",{className:"bwf_field_container","step-name":"single_step"},Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(l.__)("Fields","funnel-builder"))),Object(r.createElement)("div",null)),Object(r.createElement)(Be.a,{onDragEnd:function(e){var r=e.source,l=e.destination;if(e.destination){var c=function(e,t,n){var r=Array.from(e),a=Yt(r.splice(t,1),1)[0];return r.splice(n,0,a),r}(f,r.index,l.index),o=Object(p.cloneDeep)(ce);o.fields.single_step[0].fields=c,ne(t,n,a,i,o)}}},Object(r.createElement)(Be.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return Object(r.createElement)("div",Gt({ref:e.innerRef},e.droppableProps,{className:"bwf_template_field_container single_step ui-sortable",onDrop:function(e){!function(e){e.preventDefault();var r=Object(p.cloneDeep)(ce);r.fields.single_step[0].fields=Object(p.cloneDeep)([].concat(Kt(f),[g])),ne(t,n,a,i,r,{unSavedData:!0})}(e)},onDragOver:function(e){e.preventDefault()}}),null==f?void 0:f.map((function(e,o){return Object(r.createElement)(Be.b,{key:e.id,draggableId:e.id||"field-".concat(o),index:o},(function(o,s){return Object(r.createElement)("div",Gt({ref:o.innerRef},o.draggableProps,o.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui-sortable-handle",onClick:function(){L(e),x(!0)}}),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(l.__)("Click to edit. Drag to re-order.","funnel-builder")),Object(r.createElement)("span",null,Object(l.__)(null==e?void 0:e.label,"funnel-builder")),Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(r){!function(e){var r=Object(p.cloneDeep)(ce),l=f.filter((function(t){return t.label!==e.label}));r.fields.single_step[0].fields=Object(p.cloneDeep)(l),ne(t,n,a,i,r,{unSavedData:!0})}(e),r.stopPropagation()}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:12,height:12})))}))})),e.placeholder)})))))))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in"},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(l.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(t){var n=me[t];ye.includes(n.id)||s&&"yes"===n.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf-cursor-pointer bwf_input_field_place_holder"},s&&"yes"===n.is_locked&&Object(r.createElement)(Me.a,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:n.id},Object(r.createElement)("div",{onDragStart:function(){return _e(n)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style bwf-cursor-pointer"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==n?void 0:n.label)))))};for(var n in me)t(n);return e}()))),je&&Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_advanced_container"},function(){var e=[],t=function(t){var a=Oe[t];ye.includes(a.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder bwf-cursor-pointer"},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==a?void 0:a.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id},Object(r.createElement)("div",{onDragStart:function(){return _e(a)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize bwf-white-break-space"},null==a?void 0:a.label)),Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(l.__)("Delete Field","funnel-builder"),content:Object(l.sprintf)(Object(l.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),a.label),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};I($t($t({},e),{},{onConfirm:function(){!function(e,t){try{I($t($t({},t),{},{disableConfirm:!0,confirmButtonText:Object(l.__)("Deleting")}));var r='{"section":"advanced","index":"'.concat(e,'"}');d()({path:Object(j.r)("/funnel-optin/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:JSON.parse(r)}).then((function(t){t.success?(he(e),we(!0,e)):M(t.msg||t.message)}))}catch(e){I({status:!0,error:e.message||e.msg})}}(a.id,e)}}))}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16})))))};for(var a in Oe)t(a);return e}())))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(O.Button,{isSecondary:!0,isSmall:!0,onClick:function(){s?K({status:!0,title:Object(l.__)("Add New Form Field is a Pro Feature","funnel-builder"),content:Object(l.__)("We're sorry, the Add New Form Field is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),feature:Object(l.__)("Adding Field","funnel-builder"),proLabel:Object(l.__)("Upgrade to PRO Now","funnel-builder"),proLink:Object(j.M)([t,"Form","New","Field","Upgrade","Modal"])}):k(!0)}},s?Object(r.createElement)(c.a,{icon:"king",size:16,color:"#0073aa"}):""," ",Object(l.__)("Add New Field","funnel-builder")))))))),N&&Object(r.createElement)(Lt,{onCloseModal:function(){k(!1)},onSuccess:function(e){k(!1);var r=Object(p.cloneDeep)(ce);r.fields_data.advanced=[].concat(Kt(Oe),[e]),ne(t,n,a,i,r),M(Object(l.__)("Changes Saved","funnel-builder"))},SnackBarMsg:function(e){M(e)},stepId:n}),P&&Object(r.createElement)(Vt,{onCloseModal:function(){x(!1)},updated:function(e){var r=Object(p.cloneDeep)(ce);r.fields.single_step[0].fields=e,ne(t,n,a,i,r),x(!1),M(Object(l.__)("Changes Saved","funnel-builder"))},updatedField:F,fields:f,SnackBarMsg:function(e){M(e)},stepId:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:A.loading,successMessage:A.success,errorMessage:A.error,isOpen:A.status,autoHide:8e3,closeIcon:!0,content:A.content,confirmText:A.confirmText,confirmButtonText:A.confirmButtonText,confirmButtonClass:A.confirmButtonClass,cancelButtonText:A.cancelButtonText,onConfirm:A.onConfirm,onCancel:A.onCancel,modalTitle:A.modalTitle,disableConfirm:A.disableConfirm,onRequestClose:function(){return I({status:!1})}}),U&&Object(r.createElement)(Re,{desc:Object(l.__)("Optin Email is required for optin form","funnel-builder"),onRequestClose:function(){return z(!1)}}),H.status&&Object(r.createElement)(qe.a,{isOpen:H.status,onRequestClose:function(){return K({status:!1})},modalContent:H})))},Xt=n(296);function en(e){return function(e){if(Array.isArray(e))return cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ln(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||ln(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){if(e){if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var on=function(e){switch(e){case"1":case 1:return Object(l.__)("One Step","funnel-builder");case"2":case 2:return Object(l.__)("Two Step","funnel-builder");case"3":case 3:return Object(l.__)("Three Step","funnel-builder");case"inline":return Object(l.__)("Inline","funnel-builder");case"popup":return Object(l.__)("Popup","funnel-builder");default:return""}},sn=function(e){var t=e.onDelete,n=e.type,a=e.stepId,s=e.offerId,u=e.tab,f=e.isLoading,O=e.fetchStep,v=e.additionalTabs,_=void 0===v?[]:v,h=e.design,w=e.postData,S=e.template,N=e.stepData,C=an(Object(r.useState)({}),2),P=C[0],x=C[1],T=an(Object(r.useState)(!0),2),A=T[0],I=T[1],D=an(Object(r.useState)(!1),2),F=D[0],L=D[1],R=Object(o.b)().showSnackbar,B=Object(g.a)().isFetchCompleted,M=Object(y.a)().setIsFormLoading,U=(N||{}).other_builder;Object(r.useEffect)((function(){f&&I(!0),["checkout","optin"].includes(n)&&!1===f&&null===B&&I(!0),["checkout","optin"].includes(n)&&!1===f&&!0===B&&(I(!1),M(!0)),!1===f&&void 0!==S&&I(!1)}),[f,B]);var z=function(){var e={modalTitle:Object(l.__)("Remove Template","funnel-builder"),content:Object(l.__)("You are about to remove this template. Any changes done to the current template will be lost. Cancel to stop, Remove to proceed.","funnel-builder"),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0};x(nn(nn({},e),{},{onConfirm:function(){!function(e){x(nn(nn({},e),{},{disableConfirm:!0}));try{var r="/funnel-".concat(n,"/").concat(s,"/design"),l="/funnel-".concat(n,"/").concat(a,"/design");d()({path:Object(j.r)("".concat("offer"===n?r:l)),method:"DELETE"}).then((function(e){e.success?(x({loading:!1,status:!1}),t()):x({status:!0,error:e.msg||e.message})}))}catch(e){x({status:!0,error:e.message||e.msg})}}(e)}}))};return Object(r.createElement)(r.Fragment,null,A&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-selected-template bwf-selected-template__placeholder"},Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title bwf-placeholder-temp bwf-h-28 bwf-w-400"}),Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-90"}),Object(r.createElement)("span",{className:"bwf-template-last-edited bwf-placeholder-temp bwf-h-20 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-title-info bwf-mt-4 bwf-placeholder-temp bwf-h-24 bwf-w-270"})),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(r.createElement)("div",{className:"bwf-selected-designed bwf-placeholder-temp bwf-flex"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-25 bwf-w-150 bwf-mt-10"})),Object(r.createElement)("div",{className:"bwf-template-info"},Object(r.createElement)("div",{className:"bwf-action-btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3 bwf-mr-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3"}),Object(r.createElement)("div",{className:"bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-100"}),Object(r.createElement)("div",{className:"bwf-h-36 bwf-w-full bwf-border-1 bwf-rounded-3 bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-200 bwf-ml-5 bwf-mt-10"})))))),Object(r.createElement)("div",{className:"bwf-additional-details"},Object(r.createElement)("div",{className:"bwf-settings"},Object(r.createElement)("div",{className:"bwf-additional-heading bwf-placeholder-temp bwf-h-28 bwf-w-210 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-additional-tab-hint bwf-mt-4 bwf-placeholder-temp bwf-h-20 bwf-w-300"}),Object(r.createElement)("div",{className:"bwf-shortcodes"},en(Array(3)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-additional-container",key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-placeholder-temp bwf-h-16 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-copy-link bwf-placeholder bwf-placeholder-temp bwf-h-36"}))})))),["checkout","optin"].includes(n)&&Object(r.createElement)(Ot,null))))),Object(r.createElement)("div",{className:"bwf-selected-template"},!A&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title"},Object(l.__)("Template: ","funnel-builder"),null!=S&&S.build_from_scratch?Object(l.__)("Start from scratch","funnel-builder"):null==S?void 0:S.name),S&&S.group&&Object(p.isArray)(S.group)&&S.group[0]&&Object(r.createElement)(Me.b,{content:on(S.group[0])}),Object(r.createElement)("span",{className:"bwf-template-last-edited"},Object(l.__)("Last Edited","funnel-builder"),":"," ",null==w?void 0:w.post_modified_date))),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(p.isEmpty)(null==S?void 0:S.thumbnail)?Object(r.createElement)("div",{className:"bwf-selected-designed is-build-from-scratch"},Object(r.createElement)("div",{className:"bwf-funnel-overlay"},Object(r.createElement)("div",{className:"bwf-middle-align"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(c.a,{icon:"default-template",width:"60",height:"60",color:"#82838E"}))))):Object(r.createElement)("div",{className:"bwf-selected-designed"},Object(r.createElement)("img",{src:null==S?void 0:S.thumbnail,alt:"thumbnail"})),Object(r.createElement)("div",{className:"bwf-delete-template bwf-cursor-pointer",onClick:function(){return z()}},Object(r.createElement)("span",null,Object(r.createElement)(c.a,{icon:"trash",color:"#82838E"})),Object(r.createElement)("span",{className:"bwf-delete-text"},Object(l.__)("Delete","funnel-builder")))),Object(r.createElement)("div",{className:"bwf-template-info bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-action-btn"},(!(null!=_&&_.some((function(e){return e.hasOwnProperty("tabs")})))||U&&U.page_builder&&"Other Page Builder"!==U.page_builder)&&Object(r.createElement)(r.Fragment,null,U&&U.page_builder?Object(r.createElement)("a",{className:"bwf-edit-template-btn components-button is-primary",href:null==U?void 0:U.url},Object(l.sprintf)(
/* translators: %s: Builder Name. */
Object(l.__)("Edit %s Template","funnel-builder"),U.page_builder)):Object(r.createElement)("a",{className:"bwf-edit-template-btn components-button is-primary",href:null==w?void 0:w.edit_link},Object(l.__)("Edit ","funnel-builder"),"embed_forms"===(null==h?void 0:h.builder_name)?Object(l.__)("Form","funnel-builder"):"pre_built"===(null==h?void 0:h.builder_name)?Object(l.__)("Customizer Template","funnel-builder"):(null==h?void 0:h.builder_name)+Object(l.__)(" Template","funnel-builder"))),"gutenberg"!==(null==h?void 0:h.selected_type)&&Object(r.createElement)("a",{className:"bwf-switch-editor-btn components-button is-secondary",href:null==w?void 0:w.post_edit_link},Object(l.__)("Switch to WordPress Editor","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},"offer"!==n||"custom_page"!==(null==h?void 0:h.selected_type)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-url-title"},Object(l.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==w?void 0:w.view_link),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Edit","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-edit-icon",onClick:function(){return L(!0)}},Object(r.createElement)(c.a,{icon:"edit",width:20,height:20,color:"#82838E"}))),Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Copy","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return e="Page URL",(t=document.createElement("textarea")).value=null==w?void 0:w.view_link,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),R(e+" "+Object(l.__)("copied","funnel-builder")),void R(e+" copied");var e,t}},Object(r.createElement)(c.a,{icon:"duplicate",width:20,height:20,color:"#82838E"})))))):Object(r.createElement)(E.a,{status:"info"},Object(r.createElement)("strong",null,Object(l.__)("Information: ","funnel-builder")),Object(l.__)('Creating offers using WordPress custom pages is a legacy feature. We recommend using the "Start From Blank" option to create templates using your preferred page builder.',"funnel-builder")))),["wp_editor","embed_forms","custom"].includes(null==h?void 0:h.selected_type)&&Object(r.createElement)(Xt.a,{type:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-small",isLoading:P.loading,successMessage:P.success,errorMessage:P.error,isOpen:P.status,autoHide:8e3,closeIcon:!0,content:P.content,confirmText:P.confirmText,confirmButtonText:P.confirmButtonText,confirmButtonClass:P.confirmButtonClass,cancelButtonText:P.cancelButtonText,onConfirm:P.onConfirm,onCancel:P.onCancel,modalTitle:P.modalTitle,disableConfirm:P.disableConfirm,onRequestClose:function(){return x({status:!1})}}),F&&Object(r.createElement)(k,{pageUrl:null==w?void 0:w.view_link,urlSlug:null==w?void 0:w.post_name,toggleState:null==w?void 0:w.status,onRequestClose:function(){return L(!1)},stepId:"offer"===n?s:a,offerId:s,onComplete:O,type:n,stepTitle:null==w?void 0:w.post_title,stepDescription:null==w?void 0:w.post_description})),Object(r.createElement)("div",{className:"bwf-additional-details bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-settings"},_.map((function(e,t){return e&&e.hasOwnProperty("tabs")?Object(r.createElement)(q,{additionalTabs:e,key:"bwf-additional-tab-".concat(t),type:n,stepId:a,offerId:s,addTabIndex:t}):Object(r.createElement)(b,{additionalTabs:e,key:"bwf-additional-tab-".concat(t)})}))))),!f&&Object(r.createElement)("div",{className:"bwf-design-form"},"checkout"===n&&Object(r.createElement)(Ct,{type:n,stepId:a,tab:u,offerId:s}),"optin"===n&&Object(r.createElement)(Zt,{type:n,stepId:a,tab:u,offerId:s}))))},un=(n(295),n(306)),bn=n(77),fn=n(31),dn=["template","additional_tabs","design"];function mn(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function pn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.type,n=e.funnelID,l=Object(a.useParams)(),c=l.stepId,i=l.offerId,o=void 0===i?"":i,s=Object(r.useRef)(new AbortController),u=On(Object(r.useState)(""),2),b=u[0],f=u[1],d=On(Object(r.useState)([]),2),m=d[0],O=(d[1],On(Object(r.useState)({}),2)),j=O[0],v=O[1],h=Object(_.a)(),g=h.fetchStep,E=h.setFunnelId,S=(h.fetchStepFields,Object(w.a)()),N=S.getStep,k=S.getStepHeaderData,C=S.getFunnelData,P=Object(y.a)(),x=P.setStepData,T=P.setLoading,A=P.setStepFunnelData,I=P.setIsFormLoading,D=k(t,c,"design",o),F=C(),L=N(t,c,"design",o),R=L.data,B=void 0===R?{}:R,M=L.loading,q=void 0===M||M,U=B.step,z=void 0===U?{}:U,V=B.step_data,G=void 0===V?{}:V,J=fn.a.getFunnelTitle(),$=z.template,H=void 0===$?{}:$,K=z.additional_tabs,Y=void 0===K?[]:K,Q=z.design,W=void 0===Q?{}:Q,Z=pn(z,dn),X=Object(bn.a)().setActiveGroup;Object(r.useEffect)((function(){I(!1),!Object(p.isEmpty)(F)&&Object(p.isEmpty)(J)&&A(F),Object(p.isEmpty)(D)||(x(D),T(!1))}),[D,F,q]),Object(r.useEffect)((function(){b&&!q&&null===Y&&X(b)}),[q,Y,b]),Object(r.useEffect)((function(){f("offer"===t?"upsell":"thankyou"===t?"wc_thankyou":"optin-confirmation"===t?"optin_ty":"checkout"===t?"wc_checkout":t)}),[t]);var ee=function(){g(t,c,"design",o,s.current.signal)};Object(r.useEffect)((function(){"offer"===t&&Object.keys(j).length&&ee()}),[j]),Object(r.useEffect)((function(){return Object(p.isEmpty)(B)&&ee(),E(n),function(){s.current.abort()}}),[]);var te=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){mn(l,r,a,c,i,"next",e)}function i(e){mn(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-template-design"},"upsell"==b&&Object(r.createElement)("div",{className:"wfocu_secondary_top_bar"},Object(r.createElement)("div",{className:"wfocu_steps"},Object(r.createElement)("div",{className:"wfocu_steps_sortable ui-sortable"},null==m?void 0:m.map((function(e,t){return Object(r.createElement)("div",{key:e.id,className:"wfocu_step_container ui-sortable-handle "},Object(r.createElement)("a",{className:"wfocu_step ".concat(j.id==e.id?"current_offer":""),onClick:function(){v(e)}},Object(r.createElement)("span",{className:"step_name"},e.name)))}))))),q||null!==Y?Object(r.createElement)(sn,{onDelete:function(){ee()},isLoading:q,template:H,fetchStep:ee,additionalTabs:Y,design:W,postData:Z,stepData:G,type:t,stepId:c,tab:"design",offerId:o}):Object(r.createElement)(un.a,{onImportComplete:te,urlDependency:!1,stepId:"offer"===t?o:c,funnelId:n})))}}}]);