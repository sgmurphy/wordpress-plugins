(()=>{var w=()=>{let t,e=n=>{n.preventDefault(),t||(t=wp.media({multiple:!1,title:ss.mediaPopupTitle})),t.open(),t.off("select"),t.on("select",()=>{let o=t.state().get("selection").first().toJSON().url;n.target.previousElementSibling.value=o})};document.querySelectorAll(".ss-select-image").forEach(n=>n.addEventListener("click",e))},a=t=>t?t.replace(/<(script|style)[^>]*?>.*?<\/\1>/gm,"").replace(/<[^>]*?>/gm,"").replace(/\s+/gm," ").trim():"",i=class{constructor(e){this.el=document.querySelector(e)}get value(){return this.el?a(this.el.value):""}set value(e){this.el&&(this.el.value=e)}on(e,s){this.el&&this.el.addEventListener(e,s)}onChange(e){this.on("input",e)}},r=class{constructor(e,s,n,o,d){this.input=e,this.ref=s,this.min=n,this.max=o,this.truncate=d,this.updateCounter=this.updateCounter.bind(this),this.updatePreview=this.updatePreview.bind(this),this.updateValueFromGenerated=this.updateValueFromGenerated.bind(this),this.resetValueToGenerated=this.resetValueToGenerated.bind(this)}get generated(){if(!this.ref)return"";let e=this.ref.value;return this.truncate?e.substring(0,this.max):e}updatePreview(){this.input.el.placeholder=_.unescape(this.generated)}updateCounter(){let e=this.input.value||this.generated;e=_.unescape(e);let s=this.input.el.nextElementSibling.querySelector(".ss-counter");s&&(s.textContent=e.length),this.updateStatus(e)}updateStatus(e){let s=e&&e.length>=this.min&&e.length<=this.max,n=this.input.el.parentNode.previousElementSibling;n.classList.remove("ss-success","ss-warning"),n.classList.add(s?"ss-success":"ss-warning")}addEventListener(){this.input.onChange(this.updateCounter),this.input.on("focus",this.updateValueFromGenerated),this.input.on("blur",this.resetValueToGenerated),this.ref&&(this.ref.onChange(this.updateCounter),this.ref.onChange(this.updatePreview))}updateValueFromGenerated(){this.input.value=this.input.value||this.generated}resetValueToGenerated(){this.input.value=this.input.value===this.generated?"":this.input.value}init(){!this.input.el||(this.updatePreview(),this.updateCounter(),this.addEventListener())}};w();var l,C=jQuery,u=document.body.classList.contains("block-editor-page"),c=(t="")=>{let e={site:ss.site.title,tagline:ss.site.description,title:t};return ss.title.parts.map(s=>e[s]??"").filter(s=>s).join(` ${ss.title.separator} `)},p=class extends i{get value(){if(ss.isHome)return c();let e=u?a(wp.data.select("core/editor").getEditedPostAttribute("title")):super.value;return c(e)}onChange(e){u?wp.data.subscribe(e):super.onChange(e)}},h=class extends i{get value(){return u?a(wp.data.select("core/editor").getEditedPostAttribute("excerpt")):super.value}onChange(e){u?wp.data.subscribe(e):super.onChange(e)}},g=class extends i{get value(){return u?a(wp.data.select("core/editor").getEditedPostContent()):l&&!l.isHidden()?a(l.getContent()):super.value}onChange(e){if(u){wp.data.subscribe(e);return}super.onChange(e),C(document).on("tinymce-editor-init",(s,n)=>{n.id==="content"&&(l=n,n.on("input keyup",e))})}},v=class extends i{get value(){return c(super.value)}},m=class extends r{constructor(e,s,n,o,d,f){super(e,s,o,d,f),this.ref2=n}get generated(){let e=this.ref.value||this.ref2.value;return this.truncate?e.substring(0,this.max):e}addEventListener(){super.addEventListener(),this.ref2.onChange(this.updateCounter),this.ref2.onChange(this.updatePreview)}};if(document.body.classList.contains("post-new-php")||document.body.classList.contains("post-php")){let t=new r(new i("#ss-title"),new p("#title"),0,60),e=new m(new i("#ss-description"),new h("#excerpt"),new g("#content"),50,160,!0);t.init(),e.init()}if(document.body.classList.contains("term-php")){let t=new r(new i("#ss-title"),new v("#name"),0,60),e=new r(new i("#ss-description"),new i("#description"),50,160,!0);t.init(),e.init()}})();
