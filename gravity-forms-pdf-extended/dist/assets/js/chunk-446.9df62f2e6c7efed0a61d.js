"use strict";(self.webpackChunkgravity_pdf=self.webpackChunkgravity_pdf||[]).push([[446],{9446:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var o=r(6540),n=r(5556),s=r.n(n),a=r(4625),i=r(6347),l=(r(6280),r(3792),r(7495),r(5440),r(2953),r(9733));r(4490);const c=()=>o.createElement("div",{className:"gfpdf-core-font-spacer"},"---");function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2024, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends o.Component{render(){var e=this.props.console,t=Object.keys(e).reverse(),r=this.props.retry.length>0;return t.length?o.createElement("ul",{className:"gfpdf-core-font-list-results-container","aria-label":GFPDF.coreFontAriaLabel},t.map((t=>o.createElement("li",{key:t,className:"gfpdf-core-font-status-"+e[t].status},e[t].message," ","completed"===t&&r&&o.createElement(d,{history:this.props.history,retryText:this.props.retryText}),"completed"===t&&o.createElement(c,null))))):null}}u(p,"propTypes",{console:s().object,retry:s().array,history:s().object,retryText:s().string});class d extends o.Component{constructor(){super(...arguments),u(this,"handleTriggerRetryFontDownload",(e=>{e.preventDefault(),this.props.history.replace("retryDownloadCoreFonts")}))}render(){return o.createElement("a",{href:"#",onClick:this.handleTriggerRetryFontDownload,"aria-live":"polite",role:"dialog"},this.props.retryText)}}u(d,"propTypes",{history:s().object,retryText:s().string});
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2024, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */
var h=e=>{var{queue:t,text:r}=e;return o.createElement("span",{className:"gfpdf-core-font-counter"},r," ",t)};h.propTypes={queue:s().number,text:s().string};const m=h;var y=r(200),F=r(4095);function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2024, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends o.Component{constructor(){var e;super(...arguments),e=this,b(this,"state",{ajax:!1}),b(this,"maybeStartDownload",(function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"/downloadCoreFonts"===t&&e.startDownloadFonts(r,o),"/retryDownloadCoreFonts"===t&&(e.setState({ajax:!0}),e.startDownloadFonts(r,o))})),b(this,"startDownloadFonts",((e,t)=>{if(0===e.length)return this.props.clearButtonClickedAndRetryList(),this.handleGithubApiError(t);this.props.clearConsole(),this.props.clearButtonClickedAndRetryList(),this.props.history.replace(""),setTimeout((()=>e.map((e=>this.props.downloadFontsApiCall(e)))),300)})),b(this,"handleGithubApiError",(e=>{this.setState({ajax:!1}),this.props.addToConsole("completed","error",e),this.props.history.replace("")})),b(this,"handleTriggerFontDownload",(()=>{!1===this.state.ajax&&this.setState({ajax:!0},(()=>{this.props.getFilesFromGitHub()}))})),b(this,"resetState",(()=>{var{clearRequestRemainingData:e,history:t}=this.props;this.setState({ajax:!1}),e(),t.replace("")}))}componentDidUpdate(){var{fontList:e,buttonClicked:t,location:r,retry:o,getFilesFromGitHubFailed:n,requestDownload:s}=this.props;e.length>0&&t&&this.startDownloadFonts(e),"/downloadCoreFonts"===r.pathname&&this.handleTriggerFontDownload(),"/retryDownloadCoreFonts"===r.pathname&&this.maybeStartDownload(r.pathname,o),""!==n&&t&&this.startDownloadFonts(e,n),"finished"===s&&this.resetState()}componentDidMount(){"/downloadCoreFonts"===this.props.location.pathname&&this.handleTriggerFontDownload()}render(){var{ajax:e}=this.state,{fontList:t,buttonClassName:r,buttonText:n,counterText:s,queue:a,history:i,console:l,retry:c,retryText:u}=this.props,d=a<t.length&&0!==a||e;return o.createElement("div",null,o.createElement("button",{className:r,type:"button",onClick:this.handleTriggerFontDownload,disabled:d},n),e&&o.createElement(y.A,null),e&&0!==a&&o.createElement(m,{text:s,queue:a}),o.createElement(p,{history:i,console:l,retry:c,retryText:u}))}}b(g,"propTypes",{location:s().object,requestDownload:s().string,clearRequestRemainingData:s().func,getFilesFromGitHub:s().func,buttonClicked:s().bool,fontList:s().array,getFilesFromGitHubFailed:s().string,retry:s().array,clearConsole:s().func,history:s().object,clearButtonClickedAndRetryList:s().func,downloadFontsApiCall:s().func,addToConsole:s().func,console:s().object,buttonClassName:s().string,buttonText:s().string,counterText:s().string,retryText:s().string,queue:s().number});const f=(0,l.Ng)((e=>({buttonClicked:e.coreFonts.buttonClicked,fontList:e.coreFonts.fontList,getFilesFromGitHubFailed:e.coreFonts.getFilesFromGitHubFailed,console:e.coreFonts.console,retry:e.coreFonts.retry,requestDownload:e.coreFonts.requestDownload,queue:e.coreFonts.downloadCounter})),{addToConsole:F.mN,clearButtonClickedAndRetryList:F.Yw,getFilesFromGitHub:F.lS,downloadFontsApiCall:F.H_,clearRequestRemainingData:F.rx,clearConsole:F.Pm})(g);
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2024, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */
var v=e=>{var{button:t}=e;return o.createElement(a.I9,null,o.createElement(i.dO,null,o.createElement(i.qh,{render:e=>o.createElement(w,{history:e.history,button:t})}),o.createElement(i.qh,{path:"/downloadCoreFonts",exact:!0,render:e=>o.createElement(w,{history:e.history,button:t})}),o.createElement(i.qh,{path:"/retryDownloadCoreFonts",exact:!0,render:e=>o.createElement(w,{history:e.history,button:t})})))};v.propTypes={history:s().object,button:s().object};var w=e=>{var{history:t,button:r}=e;return o.createElement(f,{history:t,location:t.location,buttonClassName:r.className,buttonText:r.innerText,success:GFPDF.coreFontSuccess,error:GFPDF.coreFontError,itemPending:GFPDF.coreFontItemPendingMessage,itemSuccess:GFPDF.coreFontItemSuccessMessage,itemError:GFPDF.coreFontItemErrorMessage,counterText:GFPDF.coreFontCounter,retryText:GFPDF.coreFontRetry})};w.propTypes={history:s().object,button:s().object};const C=v},4490:(e,t,r)=>{var o=r(6518),n=r(9504),s=r(4376),a=n([].reverse),i=[1,2];o({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),a(this)}})}}]);