/*! For license information please see chatbot.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=React;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r=function(e){var t=[];return function(r,o){if("object"===n(o)&&null!==o){if(-1!==t.indexOf(o)){if(!e)throw console.warn("Circular reference found.",{key:r,value:o,cache:t,cacheIndex:t.indexOf(o)}),new Error("Circular reference found. Cancelled.");return}t.push(o)}return o}};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return JSON.stringify(e,r(n),t)}e.n(t)().Component;var i=["active","disabled"],a=["if","className","disableTransition","children"];function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f=wp.element,p=f.useState,d=f.useMemo,h=f.useEffect,m=f.useRef,y=function(e){var t=e.active,n=e.disabled,r=l(e,i);return React.createElement("div",s({active:t?"true":"false",disabled:n},r),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",dangerouslySetInnerHTML:{__html:'<path d="M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"/>'}}))},v=function(){return d((function(){return function(e,t){return Array.isArray(e)||(e=[e]),t&&Object.entries(t).forEach((function(t){var n=c(t,2),r=n[0];n[1]&&e.push(r)})),e.join(" ")}}),[])};function g(e){return!(!e||"string"!=typeof e)&&0===e.indexOf("http")}var b=function(e){var t=e.if,n=e.className,r=e.disableTransition,o=void 0!==r&&r,i=e.children,u=l(e,a),f=c(p(!1),2),d=f[0],m=f[1],y=c(p("mwai-transition"),2),v=y[0],g=y[1];return h((function(){o?m(t):t?(m(!0),setTimeout((function(){g("mwai-transition mwai-transition-visible")}),150)):g("mwai-transition")}),[t,o]),d?React.createElement("div",s({className:"".concat(n," ").concat(o?"":v),onTransitionEnd:function(){"mwai-transition"!==v||o||m(!1)}},u),i):null};function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:String(t)}var S=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance)return e.instance;this.chatbots=[],this.filters={},this.actions={},e.instance=this,"undefined"!=typeof window&&(window.MwaiAPI=e.instance)}var t,n;return t=e,n=[{key:"getChatbot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.chatbots.find((function(t){return t.botId===e||t.customId===e})):this.chatbots[0]}},{key:"addFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.filters[e]||(this.filters[e]=[]),this.filters[e].push({callback:t,priority:n}),this.filters[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"applyFilters",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return this.filters[e]?this.filters[e].reduce((function(e,t){return t.callback.apply(t,[e].concat(r))}),t):t}},{key:"addAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.actions[e]||(this.actions[e]=[]),this.actions[e].push({callback:t,priority:n}),this.actions[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"doAction",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.actions[e]&&this.actions[e].forEach((function(e){e.callback.apply(e,n)}))}}],n&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O=new S,k=function(e,t,n){return O.applyFilters(e,t,n)};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function R(){R=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),c=new T(r||[]);return o(a,"_invoke",{value:I(e,n,c)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(L([])));E&&E!==n&&r.call(E,a)&&(w=E);var S=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==j(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,n,r){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=A(c,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?m:d,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=m,r.method="throw",r.arg=s.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(j(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,c,"next",e)}function c(e){C(i,r,o,a,c,"throw",e)}a(void 0)}))}}var T=wp.element,L=(T.useMemo,T.useEffect),N=T.useState;function F(e,t){return M.apply(this,arguments)}function M(){return M=P(R().mark((function e(t,n){var r,o,i,a,c,u,s,l,f,p,d,h,m,y,v=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>2&&void 0!==v[2]?v[2]:null,n){e.next=14;break}return e.prev=2,e.next=5,t.json();case 5:return o=e.sent,r&&console.log("[".concat(r,"] IN: "),o),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(2),console.error("Could not parse the regular response.",{err:e.t0,data}),e.abrupt("return",{success:!1,message:"Could not parse the regular response."});case 14:i=t.body.getReader(),a=new TextDecoder("utf-8"),c="",u="";case 18:return e.next=21,i.read();case 21:if(s=e.sent,l=s.value,f=s.done,c+=a.decode(l,{stream:!0}),!f){e.next=27;break}return e.abrupt("break",68);case 27:p=c.split("\n"),d=0;case 29:if(!(d<p.length-1)){e.next=65;break}if(0===p[d].indexOf("data: ")){e.next=32;break}return e.abrupt("continue",62);case 32:if("live"!==(h=JSON.parse(p[d].replace("data: ",""))).type){e.next=39;break}r&&console.log("[".concat(r," STREAM] LIVE: "),h),u+=h.data,n&&n(u,h.data),e.next=62;break;case 39:if("error"!==h.type){e.next=51;break}return e.prev=40,r&&console.error("[".concat(r," STREAM] ERROR: "),h.data),e.abrupt("return",{success:!1,message:h.data});case 45:return e.prev=45,e.t1=e.catch(40),console.error("Could not parse the 'error' stream.",{err:e.t1,data:h}),e.abrupt("return",{success:!1,message:"Could not parse the 'error' stream."});case 49:e.next=62;break;case 51:if("end"!==h.type){e.next=62;break}return e.prev=52,m=JSON.parse(h.data),r&&console.log("[".concat(r," STREAM] END: "),m),e.abrupt("return",m);case 58:return e.prev=58,e.t2=e.catch(52),console.error("Could not parse the 'end' stream.",{err:e.t2,data:h}),e.abrupt("return",{success:!1,message:"Could not parse the 'end' stream."});case 62:d++,e.next=29;break;case 65:c=p[p.length-1],e.next=18;break;case 68:return e.prev=68,y=JSON.parse(c),r&&console.log("[".concat(r," STREAM] IN: "),y),e.abrupt("return",y);case 74:return e.prev=74,e.t3=e.catch(68),console.error("Could not parse the buffer.",{err:e.t3,buffer:c}),e.abrupt("return",{success:!1,message:"Could not parse the buffer."});case 78:case"end":return e.stop()}}),e,null,[[2,10],[40,45],[52,58],[68,74]])}))),M.apply(this,arguments)}function U(e,t,n,r){return D.apply(this,arguments)}function D(){return(D=P(R().mark((function e(t,n,r,i){var a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={"Content-Type":"application/json"},r&&(a["X-WP-Nonce"]=r),i&&(a.Accept="text/event-stream"),e.next=5,fetch("".concat(t),{method:"POST",headers:a,body:o(n)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n,r){return _.apply(this,arguments)}function _(){return _=P(R().mark((function e(t,n,r,o){var i,a=arguments;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>4&&void 0!==a[4]?a[4]:{},e.abrupt("return",new Promise((function(e,a){var c=new FormData;c.append("file",n);for(var u=0,s=Object.entries(i);u<s.length;u++){var l=I(s[u],2),f=l[0],p=l[1];c.append(f,p)}var d=new XMLHttpRequest;d.open("POST",t,!0),r&&d.setRequestHeader("X-WP-Nonce",r),d.upload.onprogress=function(e){if(e.lengthComputable&&o){var t=e.loaded/e.total*100;o(t)}},d.onload=function(){if(d.status>=200&&d.status<300)try{var t=JSON.parse(d.responseText);e(t)}catch(e){a({status:d.status,statusText:d.statusText,error:"The server response is not valid JSON"})}else{try{var n=JSON.parse(d.responseText);return void a({status:d.status,message:n.message})}catch(e){}a({status:d.status,statusText:d.statusText})}},d.onerror=function(){a({status:d.status,statusText:d.statusText})},d.send(c)})));case 2:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function H(){return Math.random().toString(36).substring(2)}var z=function(){var e=I(N(!0),2),t=e[0],n=e[1];L((function(){var e=setTimeout((function(){var e=setInterval((function(){n((function(e){return!e}))}),500);return function(){return clearInterval(e)}}),200);return function(){return clearTimeout(e)}}),[]);var r={opacity:t?1:0,width:"1px",height:"1em",borderLeft:"8px solid",marginLeft:"2px"};return React.createElement("span",{style:r})},$=/([\u2700-\u27BF]|[\uE000-\uF8FF]|[\uD800-\uDFFF]|[\uFE00-\uFE0F]|[\u1F100-\u1F1FF]|[\u1F200-\u1F2FF]|[\u1F300-\u1F5FF]|[\u1F600-\u1F64F]|[\u1F680-\u1F6FF]|[\u1F700-\u1F77F]|[\u1F780-\u1F7FF]|[\u1F800-\u1F8FF]|[\u1F900-\u1F9FF]|[\u1FA00-\u1FA6F])/;function G(e){return e&&2===e.length&&$.test(e)}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}var q=["children"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){var r,o,i;r=e,o=t,i=n[t],o=function(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:String(t)}(o),o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(){J=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:j(e,n,c)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var S=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==W(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=R(c,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?m:d,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=m,r.method="throw",r.arg=s.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(W(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Y(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){X(i,r,o,a,c,"next",e)}function c(e){X(i,r,o,a,c,"throw",e)}a(void 0)}))}}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=wp.element,re=ne.useContext,oe=ne.createContext,ie=ne.useState,ae=ne.useMemo,ce=ne.useEffect,ue=ne.useCallback,se=ne.useRef,le="AI: ",fe=oe(),pe=function(){var e=re(fe);if(!e)throw new Error("useChatbotContext must be used within a ChatbotContextProvider");return e},de=function(e){var t,n,r,i,a,u=e.children,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,q),l=s.params,f=s.system,d=s.theme,y=s.atts,v=function(){var e=c(p(null),2),t=e[0],n=e[1],r=m(null);return h((function(){return function(){clearInterval(r.current)}}),[]),{timeElapsed:t,startChrono:function(){if(null===r.current){var e=Date.now();r.current=setInterval((function(){var t,r,o,i=Math.floor((Date.now()-e)/1e3);n((t=i,r=Math.floor(t/60),o=t%60,"".concat(r,":").concat(o.toString().padStart(2,"0"))))}),500)}},stopChrono:function(){clearInterval(r.current),r.current=null,n(null)}}}(),b=v.timeElapsed,w=v.startChrono,x=v.stopChrono,E=ae((function(){return(null==d?void 0:d.settings)||{}}),[d]),S=K(ie(f.restNonce),2),j=S[0],R=S[1],I=K(ie([]),2),A=I[0],C=I[1],P=K(ie(H()),2),T=P[0],L=P[1],N=K(ie(""),2),M=N[0],D=N[1],_=K(ie(!1),2),z=_[0],$=_[1],W=K(ie(!1),2),V=W[0],X=W[1],ee=K(ie({localFile:null,uploadedId:null,uploadedUrl:null,uploadProgress:null}),2),te=ee[0],ne=ee[1],re=K(ie(!0),2),oe=re[0],pe=re[1],de=K(ie(!1),2),he=de[0],me=de[1],ye=K(ie(null),2),ve=ye[0],ge=ye[1],be=K(ie(!1),2),we=be[0],xe=be[1],Ee=K(ie(!1),2),Se=Ee[0],Oe=Ee[1],ke=K(ie(),2),je=ke[0],Re=ke[1],Ie=se(),Ae=se(),Ce=se(!1),Pe=function(e){var t=c(p(!1),2),n=t[0],r=t[1],o=c(p(!1),2),i=o[0],a=o[1];return h((function(){"undefined"!=typeof window&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)&&a(!0)}),[]),h((function(){if(i){var e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.interimResults=!0,e.continuous=!0;var t=function(e){var t=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");D(t)};return n?(e.addEventListener("result",t),e.start()):(e.removeEventListener("result",t),e.abort()),function(){e.abort()}}}),[n,i]),{isListening:n,setIsListening:r,speechRecognitionAvailable:i}}(),Te=Pe.isListening,Le=Pe.setIsListening,Ne=Pe.speechRecognitionAvailable,Fe=f.stream||!1,Me=f.botId,Ue=f.customId,De=f.userData,Be=f.sessionId,_e=f.contextId,He=f.pluginUrl,ze=f.restUrl,$e=f.debugMode,Ge=null!==(t=null==f?void 0:f.typewriter)&&void 0!==t&&t,We=null!==(n=null==f?void 0:f.speech_recognition)&&void 0!==n&&n,qe=null!==(r=null==f?void 0:f.speech_synthesis)&&void 0!==r&&r,Ve=null!==(i=null===(a=l.startSentence)||void 0===a?void 0:a.trim())&&void 0!==i?i:"",Qe=document.innerWidth<=768,Je=function(e){var t,n,r,o,i,a,c,u,s,l,f,p,d,h,m,y,v,g,b,w,x,E,S,O,k,j,R,I,A=null!==(t=null===(n=e.guestName)||void 0===n?void 0:n.trim())&&void 0!==t?t:"",C=null!==(r=null===(o=e.textSend)||void 0===o?void 0:o.trim())&&void 0!==r?r:"",P=null!==(i=null===(a=e.textClear)||void 0===a?void 0:a.trim())&&void 0!==i?i:"",T=parseInt(e.textInputMaxLength),L=null!==(c=null===(u=e.textInputPlaceholder)||void 0===u?void 0:u.trim())&&void 0!==c?c:"",N=null!==(s=null===(l=e.textCompliance)||void 0===l?void 0:l.trim())&&void 0!==s?s:"",F=Boolean(e.window),M=Boolean(e.copyButton),U=Boolean(e.fullscreen),D=null!==(f=null===(p=e.icon)||void 0===p?void 0:p.trim())&&void 0!==f?f:"",B=null!==(d=null===(h=e.iconText)||void 0===h?void 0:h.trim())&&void 0!==d?d:"",_=parseInt(e.iconTextDelay||1),H=null!==(m=null===(y=e.iconAlt)||void 0===y?void 0:y.trim())&&void 0!==m?m:"",z=null!==(v=null===(g=e.iconPosition)||void 0===g?void 0:g.trim())&&void 0!==v?v:"",$=Boolean(e.iconBubble),G=null!==(b=null===(w=e.aiName)||void 0===w?void 0:w.trim())&&void 0!==b?b:"",W=null!==(x=null===(E=e.userName)||void 0===E?void 0:E.trim())&&void 0!==x?x:"",q=Boolean(null==e?void 0:e.aiAvatar),V=Boolean(null==e?void 0:e.userAvatar),Q=Boolean(null==e?void 0:e.guestAvatar),J=q?null!==(S=null==e||null===(O=e.aiAvatarUrl)||void 0===O?void 0:O.trim())&&void 0!==S?S:"":null,Y=V?null!==(k=null==e||null===(j=e.userAvatarUrl)||void 0===j?void 0:j.trim())&&void 0!==k?k:"":null,X=Q?null!==(R=null==e||null===(I=e.guestAvatarUrl)||void 0===I?void 0:I.trim())&&void 0!==R?R:"":null;return{textSend:C,textClear:P,textInputMaxLength:T,textInputPlaceholder:L,textCompliance:N,window:F,copyButton:M,fullscreen:U,localMemory:Boolean(e.localMemory),imageUpload:Boolean(e.imageUpload),fileSearch:Boolean(e.fileSearch),icon:D,iconText:B,iconTextDelay:_,iconAlt:H,iconPosition:z,iconBubble:$,aiName:G,userName:W,guestName:A,aiAvatar:q,userAvatar:V,guestAvatar:Q,aiAvatarUrl:J,userAvatarUrl:Y,guestAvatarUrl:X}}(l),Ye=Je.aiName,Xe=Je.userName,Ze=Je.guestName,Ke=Je.aiAvatar,et=Je.userAvatar,tt=Je.guestAvatar,nt=Je.textSend,rt=Je.textClear,ot=Je.textInputMaxLength,it=Je.textInputPlaceholder,at=Je.textCompliance,ct=Je.window,ut=Je.copyButton,st=Je.fullscreen,lt=Je.localMemory,ft=Je.icon,pt=Je.iconText,dt=Je.iconTextDelay,ht=Je.iconAlt,mt=Je.iconPosition,yt=Je.iconBubble,vt=Je.imageUpload,gt=Je.fileSearch,bt=lt&&(!!Ue||!!Me),wt=bt?"mwai-chat-".concat(Ue||Me):null,xt=ae((function(){var e=function(e){return e?G(e)||g(e)?e:"".concat(He,"/images/").concat(e):null},t=ft?e(ft):"".concat(He,"/images/chat-traditional-1.svg"),n=e(Je.aiAvatarUrl),r=e(Je.userAvatarUrl),o=e(Je.guestAvatarUrl);return{cssVariables:Object.keys(E).reduce((function(e,t){return e["--mwai-".concat(t)]=E[t],e}),{}),iconUrl:t,aiAvatarUrl:n,userAvatarUrl:r,guestAvatarUrl:o}}),[ft,He,E,Je]),Et=xt.cssVariables,St=xt.iconUrl,Ot=xt.aiAvatarUrl,kt=xt.userAvatarUrl,jt=xt.guestAvatarUrl,Rt=K(ie(!1),2),It=Rt[0],At=Rt[1],Ct=K(ie(!1),2),Pt=Ct[0],Tt=Ct[1],Lt=ae((function(){return"timeless"===(null==d?void 0:d.themeId)?"mwai-tools":"mwai-input"}),[null==d?void 0:d.themeId]),Nt=ae((function(){return{text:nt,textSend:nt,textClear:rt,imageSend:"timeless"===(null==d?void 0:d.themeId)?He+"/images/action-submit-blue.svg":null,imageClear:"timeless"===(null==d?void 0:d.themeId)?He+"/images/action-clear-blue.svg":null}}),[He,rt,nt,null==d?void 0:d.themeId]),Ft=function(){if(Wt(),Ve){var e=[{id:H(),role:"assistant",content:Ve,who:le,timestamp:(new Date).getTime()}];C(e)}else C([])};function Mt(){return Ut.apply(this,arguments)}function Ut(){return Ut=Z(J().mark((function e(){var t,n,r,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],e.prev=1,t||!j){e.next=4;break}return e.abrupt("return",j);case 4:return Oe(!0),e.next=7,U("".concat(ze,"/mwai/v1/start_session"));case 7:return n=e.sent,e.next=10,n.json();case 10:return r=e.sent,R(r.restNonce),e.abrupt("return",r.restNonce);case 15:e.prev=15,e.t0=e.catch(1),console.error("Error while fetching the restNonce.",e.t0);case 18:return e.prev=18,Oe(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])}))),Ut.apply(this,arguments)}ce((function(){z&&!j&&Mt()}),[z]),ce((function(){M.length>0&&!z&&$(!0)}),[z,M]),ce((function(){Ft()}),[Ve]),ce((function(){(Ue||Me)&&O.chatbots.push({botId:Me,chatId:T,customId:Ue,open:function(){Jt((function(e){return[].concat(Y(e),[{action:"open"}])}))},close:function(){Jt((function(e){return[].concat(Y(e),[{action:"close"}])}))},clear:function(){Jt((function(e){return[].concat(Y(e),[{action:"clear"}])}))},toggle:function(){Jt((function(e){return[].concat(Y(e),[{action:"toggle"}])}))},ask:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jt((function(n){return[].concat(Y(n),[{action:"ask",data:{text:e,submit:t}}])}))},setContext:function(e){var t=e.chatId,n=e.messages;Jt((function(e){return[].concat(Y(e),[{action:"setContext",data:{chatId:t,messages:n}}])}))}})}),[Me,T,Ue]),ce((function(){we?w():(!Qe&&Ce.current&&Ie.current.focusInput(),x())}),[we,w,x,Qe]);var Dt=ue((function(e){wt&&localStorage.setItem(wt,o({chatId:T,messages:e}))}),[wt,T]),Bt=function(){ge(null)};ce((function(){var e=[];if(wt&&(e=localStorage.getItem(wt)))return e=JSON.parse(e),C(e.messages),void L(e.chatId);Ft()}),[Me]),ce((function(){if(je){xe(!1);var e=Y(A),t=e.length>0?e[e.length-1]:null;if(!je.success)return"assistant"===t.role&&t.isQuerying&&e.pop(),e.pop(),e.push({id:H(),role:"system",content:je.message,who:le,timestamp:(new Date).getTime()}),C(e),void Dt(e);if("assistant"===t.role&&t.isQuerying)t.content=k("ai.reply",je.reply,{chatId:T,botId:Me}),je.images&&(t.images=je.images),t.timestamp=(new Date).getTime(),delete t.isQuerying;else if("assistant"===t.role&&t.isStreaming)t.content=k("ai.reply",je.reply,{chatId:T,botId:Me}),je.images&&(t.images=je.images),t.timestamp=(new Date).getTime(),delete t.isStreaming;else{var n={id:H(),role:"assistant",content:k("ai.reply",je.reply,{chatId:T,botId:Me}),who:le,timestamp:(new Date).getTime()};je.images&&(n.images=je.images),e.push(n)}C(e),Dt(e)}}),[je]);var _t=ue(Z(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(H());case 2:wt&&localStorage.removeItem(wt),Ft(),D("");case 5:case"end":return e.stop()}}),e)}))),[Me]),Ht=ue(function(){var e=Z(J().mark((function e(t){var n,r,o,i,a,c,u,s,l,f,p,d,h,m,v;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!we){e.next=3;break}return console.error("AI Engine: There is already a query in progress."),e.abrupt("return");case 3:if("string"!=typeof t&&(t=M),r=te,o=null==te?void 0:te.uploadedUrl,i=null==te||null===(n=te.localFile)||void 0===n?void 0:n.type,a=!!i&&i.startsWith("image"),c=t,o&&(c=a?"![Uploaded Image](".concat(o,")\n").concat(t):"[Uploaded File](".concat(o,")\n").concat(t)),xe(!0),D(""),Wt(),u=[].concat(Y(A),[{id:H(),role:"user",content:c,who:"User: ",timestamp:(new Date).getTime()}]),Dt(u),s=H(),l=[].concat(Y(u),[{id:s,role:"assistant",content:null,who:le,timestamp:null,isQuerying:!Fe,isStreaming:!!Fe}]),C(l),f=Q({botId:Me,customId:Ue,session:Be,chatId:T,contextId:_e,messages:A,newMessage:t,newFileId:null==r?void 0:r.uploadedId,stream:Fe},y),e.prev=19,$e&&console.log("[CHATBOT] OUT: ",f),p=Fe?function(e){C((function(t){var n=Y(t),r=n.length>0?n[n.length-1]:null;return r&&r.id===s&&(r.content=e,r.timestamp=(new Date).getTime()),n}))}:null,null==j){e.next=26;break}e.t0=j,e.next=29;break;case 26:return e.next=28,Mt();case 28:e.t0=e.sent;case 29:return d=e.t0,e.next=32,U("".concat(ze,"/mwai-ui/v1/chats/submit"),f,d,Fe);case 32:return h=e.sent,e.next=35,F(h,p,$e?"CHATBOT":null);case 35:if((m=e.sent).success||!m.message){e.next=45;break}return ge(m.message),(v=Y(l)).pop(),v.pop(),C(v),Dt(v),xe(!1),e.abrupt("return");case 45:Re(m),e.next=52;break;case 48:e.prev=48,e.t1=e.catch(19),console.error("An error happened in the handling of the chatbot response.",{err:e.t1}),xe(!1);case 52:case"end":return e.stop()}}),e,null,[[19,48]])})));return function(t){return e.apply(this,arguments)}}(),[we,te,A,Dt,Fe,Me,Ue,Be,T,_e,y,M,$e,j,Mt,ze]),zt=ue((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(null==te||!te.uploadedId);Ce.current=document.activeElement===Ie.current.currentElement(),e?Ht(e):(t||M.length>0)&&Ht(M)}),[M,Ht,null==te?void 0:te.uploadedId]),$t=function(){var e=Z(J().mark((function e(t){var n,r,o,i,a,c,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:"N/A",r=u.length>2&&void 0!==u[2]?u[2]:"N/A",e.prev=2,null!==t){e.next=6;break}return Wt(),e.abrupt("return");case 6:if(o={type:n,purpose:r},i="".concat(ze,"/mwai-ui/v1/files/upload"),null==j){e.next=12;break}e.t0=j,e.next=15;break;case 12:return e.next=14,Mt();case 14:e.t0=e.sent;case 15:return a=e.t0,e.next=18,B(i,t,a,(function(e){ne({localFile:t,uploadedId:null,uploadedUrl:null,uploadProgress:e})}),o);case 18:c=e.sent,ne({localFile:t,uploadedId:c.data.id,uploadedUrl:c.data.url,uploadProgress:null}),e.next=27;break;case 22:e.prev=22,e.t1=e.catch(2),console.error("onFileUpload Error",e.t1),ge(e.t1.message||"An unknown error occurred"),Wt();case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),Gt=function(){var e=Z(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve&&Bt(),e.abrupt("return",$t(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){ne({localFile:null,uploadedId:null,uploadedUrl:null,uploadProgress:null})},qt=ue((function(){var e=setTimeout((function(){me((function(e){return e||X(!0),e}))}),1e3*dt);return function(){return clearTimeout(e)}}),[pt,dt]);ce((function(){if(pt&&!dt)X(!0);else if(pt&&dt)return qt()}),[pt]);var Vt=K(ie([]),2),Qt=Vt[0],Jt=Vt[1],Yt=ue(Z(J().mark((function e(){var t,n,r,o,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qt.length>0&&("ask"===(t=Qt[0]).action?(n=t.data,r=n.text,n.submit?Ht(r):D(r)):"toggle"===t.action?me((function(e){return!e})):"open"===t.action?me(!0):"close"===t.action?me(!1):"clear"===t.action?_t():"setContext"===t.action&&(o=t.data,i=o.chatId,a=o.messages,L(i),C(a)),Jt((function(e){return e.slice(1)})));case 1:case"end":return e.stop()}}),e)}))),[Qt,_t,Ht,L,D,C]);ce((function(){Yt()}),[Yt]);var Xt={setInputText:D,saveMessages:Dt,setMessages:C,resetMessages:Ft,resetError:Bt,onClear:_t,onSubmit:Ht,onSubmitAction:zt,onFileUpload:$t,onUploadFile:Gt,setOpen:me,setWindowed:pe,setShowIconMessage:X,setIsListening:Le,setDraggingType:At,setIsBlocked:Tt},Zt={theme:d,botId:Me,customId:Ue,userData:De,pluginUrl:He,inputText:M,messages:A,busy:we,error:ve,setBusy:xe,typewriter:Ge,speechRecognition:We,speechSynthesis:qe,localMemory:bt,imageUpload:vt,uploadedFile:te,fileSearch:gt,textSend:nt,textClear:rt,textInputMaxLength:ot,textInputPlaceholder:it,textCompliance:at,aiName:Ye,userName:Xe,guestName:Ze,aiAvatar:Ke,userAvatar:et,guestAvatar:tt,aiAvatarUrl:Ot,userAvatarUrl:kt,guestAvatarUrl:jt,isWindow:ct,copyButton:ut,fullscreen:st,icon:ft,iconText:pt,iconAlt:ht,iconPosition:mt,iconBubble:yt,cssVariables:Et,iconUrl:St,chatbotInputRef:Ie,conversationRef:Ae,isMobile:Qe,open:he,windowed:oe,showIconMessage:V,timeElapsed:b,isListening:Te,speechRecognitionAvailable:Ne,uploadIconPosition:Lt,submitButtonConf:Nt,draggingType:It,isBlocked:Pt,busyNonce:Se};return React.createElement(fe.Provider,{value:{state:Zt,actions:Xt}},u)};function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}const me=["children","options"];var ye,ve;!function(e){e.blockQuote="0",e.breakLine="1",e.breakThematic="2",e.codeBlock="3",e.codeFenced="4",e.codeInline="5",e.footnote="6",e.footnoteReference="7",e.gfmTask="8",e.heading="9",e.headingSetext="10",e.htmlBlock="11",e.htmlComment="12",e.htmlSelfClosing="13",e.image="14",e.link="15",e.linkAngleBraceStyleDetector="16",e.linkBareUrlDetector="17",e.linkMailtoDetector="18",e.newlineCoalescer="19",e.orderedList="20",e.paragraph="21",e.ref="22",e.refImage="23",e.refLink="24",e.table="25",e.tableSeparator="26",e.text="27",e.textBolded="28",e.textEmphasized="29",e.textEscaped="30",e.textMarked="31",e.textStrikethroughed="32",e.unorderedList="33"}(ye||(ye={})),function(e){e[e.MAX=0]="MAX",e[e.HIGH=1]="HIGH",e[e.MED=2]="MED",e[e.LOW=3]="LOW",e[e.MIN=4]="MIN"}(ve||(ve={}));const ge=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{for:"htmlFor"}),be={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},we=["style","script"],xe=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,Ee=/mailto:/i,Se=/\n{2,}$/,Oe=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,ke=/^ *> ?/gm,je=/^ {2,}\n/,Re=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,Ie=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,Ae=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,Ce=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,Pe=/^(?:\n *)*\n/,Te=/\r\n?/g,Le=/^\[\^([^\]]+)](:.*)\n/,Ne=/^\[\^([^\]]+)]/,Fe=/\f/g,Me=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,Ue=/^\s*?\[(x|\s)\]/,De=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Be=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,_e=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,He=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/i,ze=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,$e=/^<!--[\s\S]*?(?:-->)/,Ge=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,We=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,qe=/^\{.*\}$/,Ve=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Qe=/^<([^ >]+@[^ >]+)>/,Je=/^<([^ >]+:\/[^ >]+)>/,Ye=/-([a-z])?/gi,Xe=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,Ze=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Ke=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,et=/^\[([^\]]*)\] ?\[([^\]]*)\]/,tt=/(\[|\])/g,nt=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,rt=/\t/g,ot=/^ *\| */,it=/(^ *\||\| *$)/g,at=/ *$/,ct=/^ *:-+: *$/,ut=/^ *:-+ *$/,st=/^ *-+: *$/,lt=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,ft=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1|\w)/,pt=/^==((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)==/,dt=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,ht=/^\\([^0-9A-Za-z\s])/,mt=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,yt=/^\n+/,vt=/^([ \t]*)/,gt=/\\([^\\])/g,bt=/ *\n+$/,wt=/(?:^|\n)( *)$/,xt="(?:\\d+\\.)",Et="(?:[*+-])";function St(e){return"( *)("+(1===e?xt:Et)+") +"}const Ot=St(1),kt=St(2);function jt(e){return new RegExp("^"+(1===e?Ot:kt))}const Rt=jt(1),It=jt(2);function At(e){return new RegExp("^"+(1===e?Ot:kt)+"[^\\n]*(?:\\n(?!\\1"+(1===e?xt:Et)+" )[^\\n]*)*(\\n|$)","gm")}const Ct=At(1),Pt=At(2);function Tt(e){const t=1===e?xt:Et;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const Lt=Tt(1),Nt=Tt(2);function Ft(e,t){const n=1===t,r=n?Lt:Nt,o=n?Ct:Pt,i=n?Rt:It;return{match(e,t,n){const o=wt.exec(n);return o&&(t.list||!t.inline&&!t.simple)?r.exec(e=o[1]+e):null},order:1,parse(e,t,r){const a=n?+e[2]:void 0,c=e[0].replace(Se,"\n").match(o);let u=!1;return{items:c.map((function(e,n){const o=i.exec(e)[0].length,a=new RegExp("^ {1,"+o+"}","gm"),s=e.replace(a,"").replace(i,""),l=n===c.length-1,f=-1!==s.indexOf("\n\n")||l&&u;u=f;const p=r.inline,d=r.list;let h;r.list=!0,f?(r.inline=!1,h=s.replace(bt,"\n\n")):(r.inline=!0,h=s.replace(bt,""));const m=t(h,r);return r.inline=p,r.list=d,m})),ordered:n,start:a}},render:(t,n,r)=>e(t.ordered?"ol":"ul",{key:r.key,start:"20"===t.type?t.start:void 0},t.items.map((function(t,o){return e("li",{key:o},n(t,r))})))}}const Mt=/^\[([^\]]*)]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Ut=/^!\[([^\]]*)]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Dt=[Oe,Ie,Ae,De,_e,Be,$e,Xe,Ct,Lt,Pt,Nt],Bt=[...Dt,/^[^\n]+(?:  \n|\n{2,})/,He,We];function _t(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Ht(e){return st.test(e)?"right":ct.test(e)?"center":ut.test(e)?"left":null}function zt(e,t,n){const r=n.inTable;n.inTable=!0;const o=t(e.trim(),n);n.inTable=r;let i=[[]];return o.forEach((function(e,t){"26"===e.type?0!==t&&t!==o.length-1&&i.push([]):("27"!==e.type||null!=o[t+1]&&"26"!==o[t+1].type||(e.text=e.text.replace(at,"")),i[i.length-1].push(e))})),i}function $t(e,t,n){n.inline=!0;const r=zt(e[1],t,n),o=e[2].replace(it,"").split("|").map(Ht),i=function(e,t,n){return e.trim().split("\n").map((function(e){return zt(e,t,n)}))}(e[3],t,n);return n.inline=!1,{align:o,cells:i,header:r,type:"25"}}function Gt(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Wt(e){return function(t,n){return n.inline?e.exec(t):null}}function qt(e){return function(t,n){return n.inline||n.simple?e.exec(t):null}}function Vt(e){return function(t,n){return n.inline||n.simple?null:e.exec(t)}}function Qt(e){return function(t){return e.exec(t)}}function Jt(e,t,n){if(t.inline||t.simple)return null;if(n&&!n.endsWith("\n"))return null;let r="";e.split("\n").every((e=>!Dt.some((t=>t.test(e)))&&(r+=e+"\n",e.trim())));const o=r.trimEnd();return""==o?null:[r,o]}function Yt(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return}catch(e){return null}return e}function Xt(e){return e.replace(gt,"$1")}function Zt(e,t,n){const r=n.inline||!1,o=n.simple||!1;n.inline=!0,n.simple=!0;const i=e(t,n);return n.inline=r,n.simple=o,i}function Kt(e,t,n){const r=n.inline||!1,o=n.simple||!1;n.inline=!1,n.simple=!0;const i=e(t,n);return n.inline=r,n.simple=o,i}function en(e,t,n){return n.inline=!1,e(t,n)}const tn=(e,t,n)=>({children:Zt(t,e[1],n)});function nn(){return{}}function rn(){return null}function on(...e){return e.filter(Boolean).join(" ")}function an(e,t,n){let r=e;const o=t.split(".");for(;o.length&&(r=r[o[0]],void 0!==r);)o.shift();return r||n}function cn(e,n={}){n.overrides=n.overrides||{},n.slugify=n.slugify||_t,n.namedCodesToUnicode=n.namedCodesToUnicode?he({},be,n.namedCodesToUnicode):be;const r=n.createElement||t.createElement;function o(e,t,...o){const i=an(n.overrides,`${e}.props`,{});return r(function(e,t){const n=an(t,e);return n?"function"==typeof n||"object"==typeof n&&"render"in n?n:an(t,`${e}.component`,e):e}(e,n.overrides),he({},t,i,{className:on(null==t?void 0:t.className,i.className)||void 0}),...o)}function i(e){e=e.replace(Me,"");let r=!1;n.forceInline?r=!0:n.forceBlock||(r=!1===nt.test(e));const i=f(l(r?e:`${e.trimEnd().replace(yt,"")}\n\n`,{inline:r}));for(;"string"==typeof i[i.length-1]&&!i[i.length-1].trim();)i.pop();if(null===n.wrapper)return i;const a=n.wrapper||(r?"span":"div");let c;if(i.length>1||n.forceWrapper)c=i;else{if(1===i.length)return c=i[0],"string"==typeof c?o("span",{key:"outer"},c):c;c=null}return t.createElement(a,{key:"outer"},c)}function a(e){const n=e.match(xe);return n?n.reduce((function(e,n,r){const o=n.indexOf("=");if(-1!==o){const a=function(e){return-1!==e.indexOf("-")&&null===e.match(Ge)&&(e=e.replace(Ye,(function(e,t){return t.toUpperCase()}))),e}(n.slice(0,o)).trim(),c=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(n.slice(o+1).trim()),u=ge[a]||a,s=e[u]=function(e,t){return"style"===e?t.split(/;\s?/).reduce((function(e,t){const n=t.slice(0,t.indexOf(":"));return e[n.replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(n.length+1).trim(),e}),{}):"href"===e||"src"===e?Yt(t):(t.match(qe)&&(t=t.slice(1,t.length-1)),"true"===t||"false"!==t&&t)}(a,c);"string"==typeof s&&(He.test(s)||We.test(s))&&(e[u]=t.cloneElement(i(s.trim()),{key:r}))}else"style"!==n&&(e[ge[n]||n]=!0);return e}),{}):null}const c=[],u={},s={0:{match:Vt(Oe),order:1,parse:(e,t,n)=>({children:t(e[0].replace(ke,""),n)}),render:(e,t,n)=>o("blockquote",{key:n.key},t(e.children,n))},1:{match:Qt(je),order:1,parse:nn,render:(e,t,n)=>o("br",{key:n.key})},2:{match:Vt(Re),order:1,parse:nn,render:(e,t,n)=>o("hr",{key:n.key})},3:{match:Vt(Ae),order:0,parse:e=>({lang:void 0,text:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(e,t,n)=>o("pre",{key:n.key},o("code",he({},e.attrs,{className:e.lang?`lang-${e.lang}`:""}),e.text))},4:{match:Vt(Ie),order:0,parse:e=>({attrs:a(e[3]||""),lang:e[2]||void 0,text:e[4],type:"3"})},5:{match:qt(Ce),order:3,parse:e=>({text:e[2]}),render:(e,t,n)=>o("code",{key:n.key},e.text)},6:{match:Vt(Le),order:0,parse:e=>(c.push({footnote:e[2],identifier:e[1]}),{}),render:rn},7:{match:Wt(Ne),order:1,parse:e=>({target:`#${n.slugify(e[1])}`,text:e[1]}),render:(e,t,n)=>o("a",{key:n.key,href:Yt(e.target)},o("sup",{key:n.key},e.text))},8:{match:Wt(Ue),order:1,parse:e=>({completed:"x"===e[1].toLowerCase()}),render:(e,t,n)=>o("input",{checked:e.completed,key:n.key,readOnly:!0,type:"checkbox"})},9:{match:Vt(n.enforceAtxHeadings?Be:De),order:1,parse:(e,t,r)=>({children:Zt(t,e[2],r),id:n.slugify(e[2]),level:e[1].length}),render:(e,t,n)=>o(`h${e.level}`,{id:e.id,key:n.key},t(e.children,n))},10:{match:Vt(_e),order:0,parse:(e,t,n)=>({children:Zt(t,e[1],n),level:"="===e[2]?1:2,type:"9"})},11:{match:Qt(He),order:1,parse(e,t,n){const[,r]=e[3].match(vt),o=new RegExp(`^${r}`,"gm"),i=e[3].replace(o,""),c=(u=i,Bt.some((e=>e.test(u)))?en:Zt);var u;const s=e[1].toLowerCase(),l=-1!==we.indexOf(s),f={attrs:a(e[2]),noInnerParse:l,tag:l?s:e[1]};return n.inAnchor=n.inAnchor||"a"===s,l?f.text=e[3]:f.children=c(t,i,n),n.inAnchor=!1,f},render:(e,t,n)=>o(e.tag,he({key:n.key},e.attrs),e.text||t(e.children,n))},13:{match:Qt(We),order:1,parse:e=>({attrs:a(e[2]||""),tag:e[1]}),render:(e,t,n)=>o(e.tag,he({},e.attrs,{key:n.key}))},12:{match:Qt($e),order:1,parse:()=>({}),render:rn},14:{match:qt(Ut),order:1,parse:e=>({alt:e[1],target:Xt(e[2]),title:e[3]}),render:(e,t,n)=>o("img",{key:n.key,alt:e.alt||void 0,title:e.title||void 0,src:Yt(e.target)})},15:{match:Wt(Mt),order:3,parse:(e,t,n)=>({children:Kt(t,e[1],n),target:Xt(e[2]),title:e[3]}),render:(e,t,n)=>o("a",{key:n.key,href:Yt(e.target),title:e.title},t(e.children,n))},16:{match:Wt(Je),order:0,parse:e=>({children:[{text:e[1],type:"27"}],target:e[1],type:"15"})},17:{match:(e,t)=>t.inAnchor?null:Wt(Ve)(e,t),order:0,parse:e=>({children:[{text:e[1],type:"27"}],target:e[1],title:void 0,type:"15"})},18:{match:Wt(Qe),order:0,parse(e){let t=e[1],n=e[1];return Ee.test(n)||(n="mailto:"+n),{children:[{text:t.replace("mailto:",""),type:"27"}],target:n,type:"15"}}},20:Ft(o,1),33:Ft(o,2),19:{match:Vt(Pe),order:3,parse:nn,render:()=>"\n"},21:{match:Jt,order:3,parse:tn,render:(e,t,n)=>o("p",{key:n.key},t(e.children,n))},22:{match:Wt(Ze),order:0,parse:e=>(u[e[1]]={target:e[2],title:e[4]},{}),render:rn},23:{match:qt(Ke),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,t,n)=>o("img",{key:n.key,alt:e.alt,src:Yt(u[e.ref].target),title:u[e.ref].title})},24:{match:Wt(et),order:0,parse:(e,t,n)=>({children:t(e[1],n),fallbackChildren:t(e[0].replace(tt,"\\$1"),n),ref:e[2]}),render:(e,t,n)=>u[e.ref]?o("a",{key:n.key,href:Yt(u[e.ref].target),title:u[e.ref].title},t(e.children,n)):o("span",{key:n.key},t(e.fallbackChildren,n))},25:{match:Vt(Xe),order:1,parse:$t,render:(e,t,n)=>o("table",{key:n.key},o("thead",null,o("tr",null,e.header.map((function(r,i){return o("th",{key:i,style:Gt(e,i)},t(r,n))})))),o("tbody",null,e.cells.map((function(r,i){return o("tr",{key:i},r.map((function(r,i){return o("td",{key:i,style:Gt(e,i)},t(r,n))})))}))))},26:{match:function(e,t){return t.inTable?(t.inline=!0,ot.exec(e)):null},order:1,parse:function(){return{type:"26"}},render:()=>" | "},27:{match:Qt(mt),order:4,parse:e=>({text:e[0].replace(ze,((e,t)=>n.namedCodesToUnicode[t]?n.namedCodesToUnicode[t]:e))}),render:e=>e.text},28:{match:qt(lt),order:2,parse:(e,t,n)=>({children:t(e[2],n)}),render:(e,t,n)=>o("strong",{key:n.key},t(e.children,n))},29:{match:qt(ft),order:3,parse:(e,t,n)=>({children:t(e[2],n)}),render:(e,t,n)=>o("em",{key:n.key},t(e.children,n))},30:{match:qt(ht),order:1,parse:e=>({text:e[1],type:"27"})},31:{match:qt(pt),order:3,parse:tn,render:(e,t,n)=>o("mark",{key:n.key},t(e.children,n))},32:{match:qt(dt),order:3,parse:tn,render:(e,t,n)=>o("del",{key:n.key},t(e.children,n))}};!0===n.disableParsingRawHTML&&(delete s[11],delete s[13]);const l=function(e){let t=Object.keys(e);function n(r,o){let i=[],a="";for(;r;){let c=0;for(;c<t.length;){const u=t[c],s=e[u],l=s.match(r,o,a);if(l){const e=l[0];r=r.substring(e.length);const t=s.parse(l,n,o);null==t.type&&(t.type=u),i.push(t),a=e;break}c++}}return i}return t.sort((function(t,n){let r=e[t].order,o=e[n].order;return r!==o?r-o:1})),function(e,t){return n(function(e){return e.replace(Te,"\n").replace(Fe,"").replace(rt,"    ")}(e),t)}}(s),f=(p=function(e,t){return function(n,r,o){const i=e[n.type].render;return t?t((()=>i(n,r,o)),n,r,o):i(n,r,o)}}(s,n.renderRule),function e(t,n={}){if(Array.isArray(t)){const r=n.key,o=[];let i=!1;for(let r=0;r<t.length;r++){n.key=r;const a=e(t[r],n),c="string"==typeof a;c&&i?o[o.length-1]+=a:null!==a&&o.push(a),i=c}return n.key=r,o}return p(t,e,n)});var p;const d=i(e);return c.length?o("div",null,d,o("footer",{key:"footer"},c.map((function(e){return o("div",{id:n.slugify(e.identifier),key:e.identifier},e.identifier,f(l(e.footnote,{inline:!0})))})))):d}const un=e=>{let{children:n,options:r}=e,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,me);return t.cloneElement(cn(n,r),o)};function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sn.apply(this,arguments)}var ln={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},fn=new(function(){function e(){}var t=e.prototype;return t.load=function(e,t,n){if(e.el="string"==typeof n?document.querySelector(n):n,e.options=sn({},ln,t),e.isInput="input"===e.el.tagName.toLowerCase(),e.attr=e.options.attr,e.bindInputFocusEvents=e.options.bindInputFocusEvents,e.showCursor=!e.isInput&&e.options.showCursor,e.cursorChar=e.options.cursorChar,e.cursorBlinking=!0,e.elContent=e.attr?e.el.getAttribute(e.attr):e.el.textContent,e.contentType=e.options.contentType,e.typeSpeed=e.options.typeSpeed,e.startDelay=e.options.startDelay,e.backSpeed=e.options.backSpeed,e.smartBackspace=e.options.smartBackspace,e.backDelay=e.options.backDelay,e.fadeOut=e.options.fadeOut,e.fadeOutClass=e.options.fadeOutClass,e.fadeOutDelay=e.options.fadeOutDelay,e.isPaused=!1,e.strings=e.options.strings.map((function(e){return e.trim()})),e.stringsElement="string"==typeof e.options.stringsElement?document.querySelector(e.options.stringsElement):e.options.stringsElement,e.stringsElement){e.strings=[],e.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(e.stringsElement.children),o=r.length;if(o)for(var i=0;i<o;i+=1)e.strings.push(r[i].innerHTML.trim())}for(var a in e.strPos=0,e.currentElContent=this.getCurrentElContent(e),e.currentElContent&&e.currentElContent.length>0&&(e.strPos=e.currentElContent.length-1,e.strings.unshift(e.currentElContent)),e.sequence=[],e.strings)e.sequence[a]=a;e.arrayPos=0,e.stopNum=0,e.loop=e.options.loop,e.loopCount=e.options.loopCount,e.curLoop=0,e.shuffle=e.options.shuffle,e.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},e.typingComplete=!1,e.autoInsertCss=e.options.autoInsertCss,e.autoInsertCss&&(this.appendCursorAnimationCss(e),this.appendFadeOutAnimationCss(e))},t.getCurrentElContent=function(e){return e.attr?e.el.getAttribute(e.attr):e.isInput?e.el.value:"html"===e.contentType?e.el.innerHTML:e.el.textContent},t.appendCursorAnimationCss=function(e){var t="data-typed-js-cursor-css";if(e.showCursor&&!document.querySelector("["+t+"]")){var n=document.createElement("style");n.setAttribute(t,"true"),n.innerHTML="\n        .typed-cursor{\n          opacity: 1;\n        }\n        .typed-cursor.typed-cursor--blink{\n          animation: typedjsBlink 0.7s infinite;\n          -webkit-animation: typedjsBlink 0.7s infinite;\n                  animation: typedjsBlink 0.7s infinite;\n        }\n        @keyframes typedjsBlink{\n          50% { opacity: 0.0; }\n        }\n        @-webkit-keyframes typedjsBlink{\n          0% { opacity: 1; }\n          50% { opacity: 0.0; }\n          100% { opacity: 1; }\n        }\n      ",document.body.appendChild(n)}},t.appendFadeOutAnimationCss=function(e){var t="data-typed-fadeout-js-css";if(e.fadeOut&&!document.querySelector("["+t+"]")){var n=document.createElement("style");n.setAttribute(t,"true"),n.innerHTML="\n        .typed-fade-out{\n          opacity: 0;\n          transition: opacity .25s;\n        }\n        .typed-cursor.typed-cursor--blink.typed-fade-out{\n          -webkit-animation: 0;\n          animation: 0;\n        }\n      ",document.body.appendChild(n)}},e}()),pn=new(function(){function e(){}var t=e.prototype;return t.typeHtmlChars=function(e,t,n){if("html"!==n.contentType)return t;var r=e.substring(t).charAt(0);if("<"===r||"&"===r){var o;for(o="<"===r?">":";";e.substring(t+1).charAt(0)!==o&&!(1+ ++t>e.length););t++}return t},t.backSpaceHtmlChars=function(e,t,n){if("html"!==n.contentType)return t;var r=e.substring(t).charAt(0);if(">"===r||";"===r){var o;for(o=">"===r?"<":"&";e.substring(t-1).charAt(0)!==o&&!(--t<0););t--}return t},e}()),dn=function(){function e(e,t){fn.load(this,t,e),this.begin()}var t=e.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(e){void 0===e&&(e=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,e&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var e=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout((function(){0===e.strPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos):e.backspace(e.strings[e.sequence[e.arrayPos]],e.strPos)}),this.startDelay)},t.typewrite=function(e,t){var n=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;!0!==this.pause.status?this.timeout=setTimeout((function(){t=pn.typeHtmlChars(e,t,n);var r=0,i=e.substring(t);if("^"===i.charAt(0)&&/^\^\d+/.test(i)){var a=1;a+=(i=/\d+/.exec(i)[0]).length,r=parseInt(i),n.temporaryPause=!0,n.options.onTypingPaused(n.arrayPos,n),e=e.substring(0,t)+e.substring(t+a),n.toggleBlinking(!0)}if("`"===i.charAt(0)){for(;"`"!==e.substring(t+o).charAt(0)&&(o++,!(t+o>e.length)););var c=e.substring(0,t),u=e.substring(c.length+1,t+o),s=e.substring(t+o+1);e=c+u+s,o--}n.timeout=setTimeout((function(){n.toggleBlinking(!1),t>=e.length?n.doneTyping(e,t):n.keepTyping(e,t,o),n.temporaryPause&&(n.temporaryPause=!1,n.options.onTypingResumed(n.arrayPos,n))}),r)}),r):this.setPauseStatus(e,t,!0)},t.keepTyping=function(e,t,n){0===t&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=e.substring(0,t+=n);this.replaceText(r),this.typewrite(e,t)},t.doneTyping=function(e,t){var n=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),!1===this.loop||this.curLoop===this.loopCount)||(this.timeout=setTimeout((function(){n.backspace(e,t)}),this.backDelay))},t.backspace=function(e,t){var n=this;if(!0!==this.pause.status){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout((function(){t=pn.backSpaceHtmlChars(e,t,n);var r=e.substring(0,t);if(n.replaceText(r),n.smartBackspace){var o=n.strings[n.arrayPos+1];n.stopNum=o&&r===o.substring(0,t)?t:0}t>n.stopNum?(t--,n.backspace(e,t)):t<=n.stopNum&&(n.arrayPos++,n.arrayPos===n.strings.length?(n.arrayPos=0,n.options.onLastStringBackspaced(),n.shuffleStringsIfNeeded(),n.begin()):n.typewrite(n.strings[n.sequence[n.arrayPos]],t))}),r)}else this.setPauseStatus(e,t,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(e,t,n){this.pause.typewrite=n,this.pause.curString=e,this.pause.curStrPos=t},t.toggleBlinking=function(e){this.cursor&&(this.pause.status||this.cursorBlinking!==e&&(this.cursorBlinking=e,e?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(e){return Math.round(Math.random()*e/2)+e},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort((function(){return Math.random()-.5})))},t.initFadeOut=function(){var e=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout((function(){e.arrayPos++,e.replaceText(""),e.strings.length>e.arrayPos?e.typewrite(e.strings[e.sequence[e.arrayPos]],0):(e.typewrite(e.strings[0],0),e.arrayPos=0)}),this.fadeOutDelay)},t.replaceText=function(e){this.attr?this.el.setAttribute(this.attr,e):this.isInput?this.el.value=e:"html"===this.contentType?this.el.innerHTML=e:this.el.textContent=e},t.bindFocusEvents=function(){var e=this;this.isInput&&(this.el.addEventListener("focus",(function(t){e.stop()})),this.el.addEventListener("blur",(function(t){e.el.value&&0!==e.el.value.length||e.start()})))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},e}();function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){var r,o,i;r=e,o=t,i=n[t],o=function(e){var t=function(e,t){if("object"!=hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hn(t)?t:String(t)}(o),o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vn=function(e){var t={width:9,height:9,margin:"5px 0px 0px 5px",borderRadius:"50%",backgroundColor:"#a3a1a1",opacity:1,animation:"bouncing-loader 0.4s infinite alternate"};return React.createElement(React.Fragment,null,React.createElement("style",null,"\n          @keyframes bouncing-loader {\n            to {\n              opacity: 0.6;\n              transform: translateY(-10px);\n            }\n          }\n        "),React.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:26}},["0.1s","0.2s","0.3s"].map((function(e,n){return React.createElement("div",{key:n,style:yn(yn({},t),{},{animationDelay:e})})}))))},gn=["enabled","content","children"];function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bn.apply(this,arguments)}function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var En=wp.element,Sn=En.useState,On=En.useEffect,kn=En.useRef,jn=En.useCallback;const Rn=function(e){var t=e.enabled,n=e.content,r=e.children,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,gn),i=v(),a=wn(Sn("idle"),2),c=a[0],u=a[1],s=wn(Sn(!0),2),l=s[0],f=s[1],p=kn(null),d=jn((function(){p.current&&clearTimeout(p.current),p.current=setTimeout((function(){f(!1)}),500)}),[]),h=jn((function(){p.current&&clearTimeout(p.current),f(!0)}),[]);On((function(){return function(){p.current&&clearTimeout(p.current)}}),[]);var m="success"===c?'<path d="M9 16.2l-3.5-3.5L5.9 12l2.1 2.1 5.1-5.1L14.5 9l-6 6.2z"/>':"error"===c?'<path d="M12 10.585l4.95-4.95 1.415 1.415L13.415 12l4.95 4.95-1.415 1.415L12 13.415l-4.95 4.95-1.415-1.415L10.585 12 5.635 7.05 7.05 5.635 12 10.585z"/>':'<path d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" />';return t?React.createElement("div",bn({onMouseEnter:d,onMouseLeave:h},o),React.createElement("div",{className:i("mwai-reply-actions",{"mwai-hidden":l})},React.createElement("div",{className:"mwai-copy-button",onClick:function(){try{navigator.clipboard.writeText(n),u("success")}catch(e){u("error"),console.warn("Not allowed to copy to clipboard. Make sure your website uses HTTPS.",{content:n})}finally{setTimeout((function(){u("idle")}),2e3)}}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",dangerouslySetInnerHTML:{__html:m}}))),r):r};function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var An=wp.element.useMemo;const Cn=function(e){var t=e.role,n=void 0===t?"user":t,r=pe().state,o=r.pluginUrl,i=r.iconUrl,a=r.userData,c=r.userName,u=r.aiName,s=r.guestName,l=r.userAvatar,f=r.aiAvatar,p=r.guestAvatar,d=r.userAvatarUrl,h=r.aiAvatarUrl,m=r.guestAvatarUrl,y=An((function(){var e="assistant"===n,t=!a&&!e,r=function(e){return React.createElement("div",{className:"mwai-name-text"},e)},y=function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)return null;if(G(t))return i=t,React.createElement("div",{className:"mwai-avatar mwai-emoji",style:{fontSize:"32px",lineHeight:"32px"}},i);var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g(e)?e:e&&!G(e)?t?e:"".concat(o,"/images/").concat(e):(t||G(e)||console.warn("Invalid URL for avatar:",e),null)}(t,a)||n;return c?function(e,t){return React.createElement("div",{className:"mwai-avatar"},React.createElement("img",{width:"32",height:"32",src:e,alt:t}))}(c,r):null};if(e){var v=y(f,h,i,"AI Avatar");return v?(null===h&&i&&console.warn("Using iconUrl as a temporary fallback for AI avatar. Please set aiAvatarUrl."),v):r(u)}return t?t?y(p,m,null,"Guest Avatar")||r(s||"Guest"):void 0:y(l,d,null==a?void 0:a.AVATAR_URL,"User Avatar",!0)||r(function(e,t,n){return n&&0!==Object.keys(n).length?Object.entries(n).reduce((function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=n[0],o=n[1],i="{".concat(r,"}");return e.includes(i)?e.replace(i,o):e}),e):t||e||"Guest"}(c,s,a))}),[n,u,c,s,a,i,f,l,p,h,d,m,o]);return React.createElement("span",{className:"mwai-name"},y)};function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ln=wp.element,Nn=Ln.useState,Fn=Ln.useMemo,Mn=Ln.useEffect,Un=Ln.useRef,Dn=function(e){var t=e.href,n=e.children;if(!t)return React.createElement("span",null,n);var r=window.location.hostname,o="_self";try{o=r===new URL(t,window.location.href).hostname?"_self":"_blank"}catch(e){console.error("Invalid URL:",e),o="_blank"}if("Uploaded File"===String(n)){var i=t.split("/").pop();return React.createElement("a",{href:t,target:o,rel:"noopener noreferrer",className:"mwai-filename"},React.createElement("span",null,"✓ ",i))}return React.createElement("a",{href:t,target:o,rel:"noopener noreferrer"},n)},Bn=function(e){var t,n=e.message,r=e.onRendered,o=void 0===r?function(){}:r,i=pe().state.copyButton,a=Pn(Nn(n.isQuerying||n.isStreaming),1)[0],c=n.isQuerying,u=n.isStreaming,s=null!==(t=n.content)&&void 0!==t?t:"";(s.match(/```/g)||[]).length%2!=0?s+="\n```":n.isStreaming&&(s+="<BlinkingCursor />"),Mn((function(){a&&(!a||c||u)||o()}),[a,c,u]);var l=Fn((function(){var e={overrides:{BlinkingCursor:{component:z},a:{component:Dn},img:{props:{onError:function(e){null!==e.target.src.match(/\.(jpeg|jpg|gif|png)$/)&&(e.target.src="https://placehold.co/600x200?text=Expired+Image")},className:"mwai-image"}}}};return e}),[]);return c||u&&!s?React.createElement(vn,null):React.createElement(React.Fragment,null,React.createElement(Cn,{role:n.role}),React.createElement(Rn,{content:n.content,enabled:i,className:"mwai-text"},React.createElement(un,{options:l},s)))},_n=function(e){var t=e.message,n=e.onRendered,r=void 0===n?function(){}:n,o=Pn(Nn(null==t?void 0:t.images),2),i=o[0],a=o[1];return Mn((function(){r()})),t.isQuerying?React.createElement(vn,null):React.createElement(React.Fragment,null,React.createElement(Cn,{role:t.role}),React.createElement("span",{className:"mwai-text"},React.createElement("div",{className:"mwai-gallery"},null==i?void 0:i.map((function(e,t){return React.createElement("a",{key:t,href:e,target:"_blank",rel:"noopener noreferrer"},React.createElement("img",{key:t,src:e,onError:function(){return function(e){a((function(t){return t.map((function(t,n){return n===e?"https://placehold.co/600x200?text=Expired+Image":t}))}))}(t)}}))})))))},Hn=function(e){var t=e.message,n=e.conversationRef,r=e.onRendered,o=void 0===r?function(){}:r,i=Un(null),a=Pn(Nn(t.isQuerying),1)[0],c=Pn(Nn(!t.isQuerying),2),u=c[0],s=c[1],l=Pn(Nn(!1),2),f=l[0],p=(l[1],t.content);return Mn((function(){console.warn("Do not use the Typewriter Effect. Use Streaming instead.")}),[]),function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=m();h((function(){r.current=t}),[t]),h((function(){if(null!==e&&n){var t=setInterval((function(){r.current()}),e);return function(){return clearInterval(t)}}}),[e,n])}(200,(function(){null!=n&&n.current&&(f||(n.current.scrollTop=n.current.scrollHeight))}),!u),Mn((function(){if(a){if(i.current){var e={strings:[p],typeSpeed:k("typewriter.speed",15),showCursor:!1,onComplete:function(e){e.cursor&&e.cursor.remove(),o(),s((function(){return!0}))}},t=new dn(i.current,e);return function(){t.destroy()}}}else o()}),[t,t.isQuerying]),React.createElement(React.Fragment,null,t.isQuerying&&React.createElement(vn,null),!t.isQuerying&&a&&React.createElement(React.Fragment,null,React.createElement(Cn,{role:t.role}),React.createElement("span",{className:"mwai-text",ref:i})),!t.isQuerying&&!a&&React.createElement(React.Fragment,null,React.createElement(Cn,{role:t.role}),React.createElement("span",{className:"mwai-text"},React.createElement(un,null,p))))};const zn=function(e){var t,n=e.message,r=e.conversationRef,o=pe().state.typewriter,i=v(),a=Un(),c=i("mwai-reply",{"mwai-ai":"assistant"===n.role,"mwai-user":"user"===n.role,"mwai-system":"system"===n.role}),u=(null==n||null===(t=n.images)||void 0===t?void 0:t.length)>0,s=function(){a.current&&(n.isQuerying||a.current.classList.contains("mwai-rendered")||"undefined"!=typeof hljs&&(a.current.classList.add("mwai-rendered"),a.current.querySelectorAll("pre code").forEach((function(e){hljs.highlightElement(e)}))))};return Fn((function(){return"user"===n.role?React.createElement("div",{ref:a,className:c},React.createElement(Bn,{message:n})):"assistant"===n.role?u?React.createElement("div",{ref:a,className:c},React.createElement(_n,{message:n,conversationRef:r,onRendered:s})):o&&!n.isStreaming?React.createElement("div",{ref:a,className:c},React.createElement(Hn,{message:n,conversationRef:r,onRendered:s})):React.createElement("div",{ref:a,className:c},React.createElement(Bn,{message:n,conversationRef:r,onRendered:s})):"system"===n.role?React.createElement("div",{ref:a,className:c},React.createElement(Bn,{message:n,conversationRef:r,onRendered:s})):React.createElement("div",null,React.createElement("i",null,"Unhandled role."))}),[n,r,u,o])};function $n(){return $n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$n.apply(this,arguments)}const Gn=t.useLayoutEffect;var Wn=function(e,t){"function"!=typeof e?e.current=t:e(t)};var qn={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Vn=function(e){Object.keys(qn).forEach((function(t){e.style.setProperty(t,qn[t],"important")}))},Qn=null,Jn=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},Yn=function(){},Xn=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Zn=!!document.documentElement.currentStyle;function Kn(e,n,r){var o,i,a=(o=r,i=t.useRef(o),Gn((function(){i.current=o})),i);t.useLayoutEffect((function(){var t=function(e){return a.current(e)};if(e)return e.addEventListener(n,t),function(){return e.removeEventListener(n,t)}}),[])}var er=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],tr=function(e,n){var r,o=e.cacheMeasurements,i=e.maxRows,a=e.minRows,c=e.onChange,u=void 0===c?Yn:c,s=e.onHeightChange,l=void 0===s?Yn:s,f=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,er),p=void 0!==f.value,d=t.useRef(null),h=function(e,n){var r=(0,t.useRef)();return(0,t.useCallback)((function(t){e.current=t,r.current&&Wn(r.current,null),r.current=n,n&&Wn(n,t)}),[n])}(d,n),m=t.useRef(0),y=t.useRef(),v=function(){var e=d.current,t=o&&y.current?y.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,r=(n=t,Xn.reduce((function(e,t){return e[t]=n[t],e}),{})),o=r.boxSizing;return""===o?null:(Zn&&"border-box"===o&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})}(e);if(t){y.current=t;var n=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1/0),Qn||((Qn=document.createElement("textarea")).setAttribute("tabindex","-1"),Qn.setAttribute("aria-hidden","true"),Vn(Qn)),null===Qn.parentNode&&document.body.appendChild(Qn);var o=e.paddingSize,i=e.borderSize,a=e.sizingStyle,c=a.boxSizing;Object.keys(a).forEach((function(e){var t=e;Qn.style[t]=a[t]})),Vn(Qn),Qn.value=t;var u=Jn(Qn,e);Qn.value=t,u=Jn(Qn,e),Qn.value="x";var s=Qn.scrollHeight-o,l=s*n;"border-box"===c&&(l=l+o+i),u=Math.max(l,u);var f=s*r;return"border-box"===c&&(f=f+o+i),[u=Math.min(f,u),s]}(t,e.value||e.placeholder||"x",a,i),r=n[0],c=n[1];m.current!==r&&(m.current=r,e.style.setProperty("height",r+"px","important"),l(r,{rowHeight:c}))}};return t.useLayoutEffect(v),Kn(window,"resize",v),r=v,Kn(document.fonts,"loadingdone",r),t.createElement("textarea",$n({},f,{onChange:function(e){p||v(),u(e)},ref:h}))},nr=t.forwardRef(tr);function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var or=wp.element,ir=or.useState,ar=or.useMemo,cr=or.useRef;const ur=function(){var e=v(),t=pe(),n=t.state,r=t.actions,o=n.uploadedFile,i=n.busy,a=n.imageUpload,c=n.fileSearch,u=n.draggingType,s=r.onUploadFile,l=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ir(!1),2),f=l[0],p=l[1],d=cr(),h=null==o?void 0:o.uploadedId,m=a||c,y=o,g=ar((function(){return null!=y&&y.localFile?y.localFile.type.startsWith("image/")?"image":"document":u}),[y,u]),b=ar((function(){var e="idle";null!=y&&y.uploadProgress?e="up":u?e="add":f&&h?e="del":h?e="ok":f&&!h&&(e="add");var t=g?g.toLowerCase():"idle";return"mwai-file-upload-icon mwai-".concat(t,"-").concat(e)}),[g,y,u,f,h]),w=ar((function(){return null!=y&&y.uploadProgress?y.uploadProgress>99?99:Math.round(y.uploadProgress):""}),[y]);return m?React.createElement("div",{disabled:i,onClick:function(){null!=o&&o.localFile?s(null):i||d.current.click()},onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},className:e("mwai-file-upload",{"mwai-enabled":null==o?void 0:o.uploadedId,"mwai-busy":(null==o?void 0:o.localFile)&&!(null!=o&&o.uploadedId)}),style:{cursor:i?"default":"pointer"}},React.createElement("div",{className:b},React.createElement("span",{className:"mwai-file-upload-progress"},w)),React.createElement("input",{type:"file",ref:d,onChange:function(e){var t=e.target.files[0];t&&s(t)},style:{display:"none"}})):null};function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lr=wp.element,fr=lr.useRef,pr=lr.useState,dr=lr.useEffect,hr=lr.useImperativeHandle;const mr=function(){var e=v(),t=pe(),n=t.state,r=t.actions,o=n.inputText,i=n.textInputMaxLength,a=n.textInputPlaceholder,c=n.error,u=n.speechRecognitionAvailable,s=n.isMobile,l=n.conversationRef,f=n.open,p=n.uploadIconPosition,d=n.draggingType,h=n.isBlocked,m=n.isListening,g=n.busy,b=n.speechRecognition,w=n.imageUpload,x=n.fileSearch,E=n.chatbotInputRef,S=r.onSubmitAction,O=r.setIsListening,k=r.resetError,j=r.setInputText,R=r.setIsBlocked,I=r.setDraggingType,A=r.onUploadFile,C=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(pr(!1),2),P=C[0],T=C[1],L=fr();hr(E,(function(){return{focusInput:function(){var e;null===(e=L.current)||void 0===e||e.focus()},currentElement:function(){return L.current}}})),dr((function(){!s&&f&&L.current.focus(),l.current&&(l.current.scrollTop=l.current.scrollHeight)}),[f,s,l]);var N=function(e,t){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.items[0];t?w&&function(e){return e.type.startsWith("image/")}(n)?(I("image"),R(!1)):x&&function(e){return["text/x-c","text/x-csharp","text/x-c++","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/html","text/x-java","application/json","text/markdown","application/pdf","text/x-php","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-python","text/x-script.python","text/x-ruby","text/x-tex","text/plain","text/css","text/javascript","application/x-sh","application/typescript"].includes(e.type)}(n)?(I("document"),R(!1)):(I(!1),R(!0)):(I(!1),R(!1))},F=e("mwai-input-text",{"mwai-dragging":d,"mwai-blocked":h});return React.createElement("div",{ref:E,className:F,onDrop:function(e){if(e.preventDefault(),N(e,!1),!g){var t=e.dataTransfer.files[0];t&&("image"===d&&w||"document"===d&&x?A(t):(R(!0),setTimeout((function(){return R(!1)}),2e3)))}},onDragEnter:function(e){return N(e,!0)},onDragLeave:function(e){return N(e,!1)},onDragOver:function(e){return N(e,!0)}},"mwai-input"===p&&React.createElement(ur,null),React.createElement(nr,{ref:L,disabled:g,placeholder:a,value:o,maxLength:i,onCompositionStart:function(){return T(!0)},onCompositionEnd:function(){return T(!1)},onKeyDown:function(e){P||"Enter"!==e.code||e.shiftKey||(e.preventDefault(),S())},onChange:function(e){return t=e.target.value,m&&O(!1),c&&k(),void j(t);var t}}),b&&React.createElement(y,{active:m,disabled:!u||g,className:"mwai-microphone",onClick:function(){return O(!m)}}))};var yr=wp.element,vr=yr.useMemo,gr=yr.useCallback;const br=function(){var e=pe(),t=e.state,n=e.actions,r=n.onClear,o=n.onSubmitAction,i=n.setIsListening,a=t.textClear,c=t.textSend,u=t.uploadedFile,s=t.inputText,l=t.messages,f=t.isListening,p=t.timeElapsed,d=t.busy,h=t.submitButtonConf,m=!(null==u||!u.uploadProgress),y=!(null!=u&&u.uploadedId)&&s.length<1&&(null==l?void 0:l.length)>1,v=vr((function(){return d?p?React.createElement("div",{className:"mwai-timer"},p):null:null!=h&&h.imageSend&&null!=h&&h.imageClear?React.createElement("img",{src:y?h.imageClear:h.imageSend,alt:y?a:c}):React.createElement("span",null,y?a:c)}),[d,p,y,a,c,h]),g=vr((function(){return"mwai-input-submit ".concat(d?"mwai-busy":"")}),[d]),b=gr((function(){f&&i(!1),y?r():o()}),[y,f,r,o,i]),w=gr((function(){d||b()}),[d,b]);return React.createElement("button",{className:g,disabled:d||m,onClick:w},v)};var wr=wp.element.useMemo;const xr=function(){var e=pe(),t=e.state,n=e.actions,r=t.theme,o=t.isWindow,i=t.fullscreen,a=t.aiName,c=t.pluginUrl,u=t.open,s=t.iconUrl,l=t.aiAvatarUrl,f=t.windowed,p=n.setOpen,d=n.setWindowed,h=wr((function(){if(!o)return null;var e="timeless"===(null==r?void 0:r.themeId),t=e?function(e,t,n,r){var o;if(G(r||n))return o=r||n,React.createElement("div",{className:"mwai-avatar mwai-emoji",style:{fontSize:"48px",lineHeight:"48px"}},o);var i,a,c=(g(i=r)?i:i?"".concat(t,"/images/").concat(i):null)||n||"".concat(t,"/images/chat-openai.svg");return c?(a=c,"AI Engine",React.createElement("div",{className:"mwai-avatar"},React.createElement("img",{alt:"AI Engine",src:a}))):React.createElement("div",{className:"mwai-name-text"},e)}(a,c,s,l):null;return React.createElement(React.Fragment,null,e&&React.createElement(React.Fragment,null,t,React.createElement("div",{className:"mwai-name"},React.createElement("small",null,"Discuss with"),React.createElement("div",null,a)),React.createElement("div",{style:{flex:"auto"}})),React.createElement("div",{className:"mwai-buttons"},i&&React.createElement("div",{className:"mwai-resize-button",onClick:function(){return d(!f)}}),React.createElement("div",{className:"mwai-close-button",onClick:function(){return p(!u)}})))}),[o,null==r?void 0:r.themeId,a,c,s,l,i,d,f,p,u]);return React.createElement("div",{className:"mwai-header"},h)};var Er=wp.element,Sr=Er.useMemo,Or=Er.useEffect;const kr=function(){var e=pe(),t=e.state,n=e.actions,r=t.isWindow,o=t.iconText,i=t.showIconMessage,a=t.iconAlt,c=t.iconUrl,u=t.open,s=n.setShowIconMessage,l=n.setOpen;Or((function(){u&&i&&s(!1)}),[u,s,i]);var f=Sr((function(){return r?React.createElement("div",{className:"mwai-trigger mwai-open-button"},React.createElement(b,{className:"mwai-icon-text-container",if:o&&i},React.createElement("div",{className:"mwai-icon-text-close",onClick:function(){return s(!1)}},"✕"),React.createElement("div",{className:"mwai-icon-text",onClick:function(){return l(!0)}},o)),React.createElement("div",{className:"mwai-icon-container",onClick:function(){return l(!0)}},G(c)?React.createElement("div",{className:"mwai-icon mwai-emoji",style:{fontSize:"48px",lineHeight:"64px",width:"64px",height:"64px",display:"flex",justifyContent:"center",alignItems:"center"}},c):React.createElement("img",{className:"mwai-icon",width:"64",height:"64",alt:a,src:c}))):null}),[r,o,i,a,c,s,l]);return React.createElement(React.Fragment,null,f)};function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){Ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e,t,n){return t=function(e){var t=function(e,t){if("object"!=jr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jr(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pr=wp.element,Tr=Pr.useState,Lr=Pr.useMemo,Nr=Pr.useLayoutEffect,Fr={overrides:{a:{props:{target:"_blank"}}}};const Mr=function(e){var t=v(),n=e.style,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Tr(!0),2),o=r[0],i=r[1],a=pe(),c=a.state,u=a.actions,s=c.theme,l=c.botId,f=c.customId,p=c.messages,d=c.textCompliance,h=c.isWindow,m=c.fullscreen,y=c.iconPosition,g=c.iconBubble,w=c.windowed,x=c.cssVariables,E=c.error,S=c.conversationRef,O=c.open,k=c.busy,j=c.uploadIconPosition,R=u.resetError,I=Lr((function(){return"css"===(null==s?void 0:s.type)?null==s?void 0:s.style:null}),[s]),A=t("mwai-chatbot",Ar(Ar(Ar(Ar(Ar(Ar(Ar(Ar({},"mwai-".concat(null==s?void 0:s.themeId,"-theme"),!0),"mwai-window",h),"mwai-bubble",g),"mwai-open",O),"mwai-fullscreen",!w||!h&&m),"mwai-bottom-left","bottom-left"===y),"mwai-top-right","top-right"===y),"mwai-top-left","top-left"===y));Nr((function(){o&&S.current&&(S.current.scrollTop=S.current.scrollHeight)}),[p,o,S,k]);var C=Lr((function(){return null==p?void 0:p.map((function(e){return React.createElement(zn,{key:e.id,message:e})}))}),[p]);return React.createElement(b,{id:"mwai-chatbot-".concat(f||l),className:A,style:Ir(Ir({},x),n),if:!0,disableTransition:!h},I&&React.createElement("style",null,I),React.createElement(kr,null),React.createElement(xr,null),React.createElement("div",{className:"mwai-content"},React.createElement("div",{ref:S,className:"mwai-conversation",onScroll:function(){if(S.current){var e=S.current,t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;i(n-t<=r+1)}}},C),E&&React.createElement("div",{className:"mwai-error",onClick:function(){return R()}},React.createElement(un,{options:Fr},E)),React.createElement("div",{className:"mwai-input"},React.createElement(mr,null),React.createElement(br,null)),React.createElement("div",{className:"mwai-footer"},React.createElement("div",{className:"mwai-tools"},"mwai-tools"===j&&React.createElement(ur,null)),d&&React.createElement("div",{className:"mwai-compliance",dangerouslySetInnerHTML:{__html:d}}))))},Ur=function(e){return React.createElement(de,e,React.createElement(Mr,e))};function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}var Br=["children"];function _r(){_r=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:j(e,n,c)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==n&&r.call(E,a)&&(w=E);var S=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Dr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=R(c,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?m:d,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=m,r.method="throw",r.arg=s.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Dr(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},O(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){var r,o,i;r=e,o=t,i=n[t],o=function(e){var t=function(e,t){if("object"!=Dr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dr(t)?t:String(t)}(o),o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $r(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Gr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$r(i,r,o,a,c,"next",e)}function c(e){$r(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vr=wp.element,Qr=Vr.useContext,Jr=Vr.createContext,Yr=Vr.useState,Xr=Vr.useMemo,Zr=Vr.useEffect,Kr=Vr.useCallback,eo=Jr(),to=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Br),r=n.system,i=n.theme,a=Wr(Yr([]),2),c=a[0],u=a[1],s=Wr(Yr(null),2),l=s[0],f=s[1],p=Wr(Yr(!1),2),d=p[0],h=p[1],m=Xr((function(){return(null==i?void 0:i.settings)||{}}),[i]),y=r.botId,v=r.customId,g=r.restNonce,b=r.pluginUrl,w=r.restUrl,x=r.debugMode,E=Xr((function(){return Object.keys(m).reduce((function(e,t){return e["--mwai-".concat(t)]=m[t],e}),{})}),[m]),S=Kr(Gr(_r().mark((function e(){var t,n,r,i,a,c=arguments;return _r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,t||h(!0),n={botId:y||v},x&&console.log("[DISCUSSIONS] OUT: ",n),e.next=7,fetch("".concat(w,"/mwai-ui/v1/discussions/list"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":g},body:o(n)});case 7:return r=e.sent,e.next=10,r.json();case 10:if((i=e.sent).success){e.next=13;break}throw new Error("Could not retrieve the discussions: ".concat(i.message));case 13:x&&console.log("[DISCUSSIONS] IN: ",i),a=i.chats.map((function(e){var t=JSON.parse(e.messages),n=JSON.parse(e.extra);return zr(zr({},e),{},{messages:t,extra:n})})),u(a),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:return e.prev=21,t||h(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])}))),[]);Zr((function(){S();var e=setInterval((function(){S(!0)}),5e3);return function(){return clearInterval(e)}}),[]);var O=function(e){var t=MwaiAPI.getChatbot(e);if(!t)throw new Error("Chatbot not found.",{botId:e,chatbots:MwaiAPI.chatbots});return t},k=function(){var e=Gr(_r().mark((function e(t){var n;return _r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.find((function(e){return e.chatId===t}))){e.next=4;break}return console.error("Discussion not found.",{chatId:t,discussions:c}),e.abrupt("return");case 4:O(y).setContext({chatId:t,messages:n.messages}),f(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Gr(_r().mark((function e(){return _r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(y).clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R={onDiscussionClick:k,onNewChatClick:j},I={botId:y,pluginUrl:b,busy:d,setBusy:h,cssVariables:E,discussions:c,discussion:l,theme:i};return React.createElement(eo.Provider,{value:{state:I,actions:R}},t)};function no(e){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(e)}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n){return t=function(e){var t=function(e,t){if("object"!=no(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=no(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==no(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ao=wp.element,co=ao.useMemo,uo=ao.useEffect,so=function(e){var t=e.discussion,n=e.onClick,r=void 0===n?function(){}:n,o=e.selected,i=void 0!==o&&o,a=v(),c=t.messages,u=c[c.length-1],s=u.content.length>64?u.content.substring(0,64)+"...":u.content,l=a("mwai-discussion",{"mwai-active":i});return React.createElement("li",{className:l,onClick:r},s)};const lo=function(e){var t=e.theme,n=e.style,r=e.params,o=v(),i=co((function(){return"css"===(null==t?void 0:t.type)?null==t?void 0:t.style:null}),[t]),a=function(){var e=Qr(eo);if(!e)throw new Error("useDiscussionsContext must be used within a DiscussionsContextProvider");return e}(),c=a.state,u=a.actions,s=c.botId,l=c.cssVariables,f=c.discussions,p=c.discussion,d=c.busy,h=u.onDiscussionClick,m=u.onNewChatClick,y=r.textNewChat;uo((function(){}));var g=o("mwai-discussions",io({},"mwai-".concat(null==t?void 0:t.themeId,"-theme"),!0));return React.createElement(React.Fragment,null,React.createElement("div",{id:"mwai-discussions-".concat(s),className:g,style:oo(oo({},l),n)},i&&React.createElement("style",null,i),React.createElement("div",{className:o("mwai-header")},React.createElement("button",{onClick:function(){return m()},disabled:d},React.createElement("span",null,null!=y?y:"+ New chat"))),React.createElement("ul",{className:o("mwai-content")},f.map((function(e){return React.createElement(so,{key:e.id,discussion:e,selected:(null==p?void 0:p.id)===e.id,onClick:function(){return h(e.chatId)}})})))))},fo=function(e){return React.createElement(to,e,React.createElement(lo,e))};var po=wp.element.render;function ho(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}document.addEventListener("DOMContentLoaded",(function(){function e(e,t){e.forEach((function(e){var n=JSON.parse(ho(e.getAttribute("data-params"))),r=JSON.parse(ho(e.getAttribute("data-system"))),o=JSON.parse(ho(e.getAttribute("data-theme")));e.removeAttribute("data-params"),e.removeAttribute("data-system"),e.removeAttribute("data-theme"),po(t({system:r,params:n,theme:o}),e)}))}e(document.querySelectorAll(".mwai-chatbot-container"),Ur),e(document.querySelectorAll(".mwai-discussions-container"),fo)}))})();