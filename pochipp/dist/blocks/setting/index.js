(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var l in a)e.o(a,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:a[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,a=window.wp.data,l=window.wp.blocks,n=window.wp.blockEditor,r=window.wp.components,o=JSON.parse('{"apiVersion":2,"name":"pochipp/setting","category":"design","keywords":[],"supports":{"className":false,"customClassName":false,"multiple":false,"reusable":false,"html":false,"__experimentalToolbar":false},"Y4":{"title":{"type":"string","default":""},"meta":{"type":"string","source":"meta","meta":"pochipp_data","default":""}}}'),c=window.wp.hooks,s=window.wp.serverSideRender;var i=e.n(s);const m=(0,t.memo)((({postId:e,postTitle:a,customImgUrl:l,parsedMeta:n})=>{if(!a&&0===Object.keys(n).length)return(0,t.createElement)("div",{className:"__preview -null"},(0,t.createElement)("p",null,"商品を選択してください"));const{asin:r,info:o,price:s,showPrice:m,hidePrice:p,hideReviewUrl:u,image_url:d,price_at:h,searched_at:_}=n,b=window.pchppVars||{};let E=b.btnStyle||"dflt";"default"===E&&(E="dflt");const w=(y="off"!==b.displayPrice,!!m||!p&&y);var y;const v=(0,c.hasFilter)("pochipp.exReviewCheckbox","pochipp-pro")&&!!r&&!u;return(0,t.createElement)("div",{className:"__preview"},(0,t.createElement)("div",{className:"pochipp-box","data-img":b.imgPosition||"l","data-lyt-pc":b.boxLayoutPC||"dflt","data-lyt-mb":b.boxLayoutMB||"vrtcl","data-btn-style":E,"data-btn-radius":b.btnRadius||"off"},(0,t.createElement)("div",{className:"pochipp-box__image"},(0,t.createElement)("img",{src:l||d,alt:""})),(0,t.createElement)("div",{className:"pochipp-box__body"},(0,t.createElement)("div",{className:"pochipp-box__title"},a),o&&(0,t.createElement)("div",{className:"pochipp-box__info"},o),s&&w&&(0,t.createElement)("div",{className:"pochipp-box__price"},"¥",s.toLocaleString(),(0,t.createElement)("span",null,"（",h,"時点 | ",_,"調べ）")),v&&(0,t.createElement)("div",{className:"pochipp-box__review"},(0,t.createElement)("span",{className:"dashicons dashicons-format-chat"}),(0,t.createElement)("span",null,"口コミを見る")),(0,t.createElement)(i(),{block:"pochipp/setting-preview",attributes:{meta:JSON.stringify({pid:e,...n})},className:"_components-disabled"}))),(0,t.createElement)("div",{className:"__helpText -with-margin"},"※ プレビュー内のボタンはアフィリエイトリンク化されていません。"),(0,c.hasFilter)("pochipp.exReviewCheckbox","pochipp-pro")&&(0,t.createElement)("div",{className:"__helpText"},"※ レビューリンクは検索元がAmazonの場合にのみ、表示されます。"))})),p="customImg",u="customSale",d=({textkey:e})=>{const a={[p]:"メディアライブラリ内から商品画像を設定",[u]:"カスタムボタンのセール情報を設定"};return(0,t.createElement)("p",{style:{fontSize:"13px"}},(0,t.createElement)("a",{href:"https://pochipp.com/pochipp-pro/",target:"_blank",rel:"noreferrer"},"Pochipp Pro"),"を導入すると、",a[e],"できるようになります。")},h=[{value:"",label:"ポチップ設定のまま"},{value:"fit",label:"自動フィット"},{value:"text",label:"テキストに応じる"},{value:"3",label:"3列幅"},{value:"2",label:"2列幅"}],_=[{value:"",label:"ポチップ設定のまま"},{value:"1",label:"1列幅"},{value:"2",label:"2列幅"}],b=({postTitle:e,parsedMeta:a,updateMetadata:l,customImgUrl:n,isShopLinkType:o})=>{const s=window.pchppVars||{},{editPost:i}=wp.data.dispatch("core/editor");return(0,t.createElement)(t.Fragment,null,o&&(0,t.createElement)(r.TextControl,{label:"検索キーワード",value:a.keywords,onChange:e=>{l({keywords:e})}}),(0,t.createElement)(r.TextControl,{label:"商品タイトル",value:e,onChange:e=>{i({title:e})}}),(0,t.createElement)(r.TextControl,{label:"タイトル下に表示するテキスト",value:a.info,onChange:e=>{l({info:e})}}),(0,t.createElement)(r.BaseControl,null,(0,t.createElement)(r.BaseControl.VisualLabel,null,"カスタムボタン1"),(0,t.createElement)("div",{className:"__textArea"},(0,t.createElement)("span",null,"テキスト"),(0,t.createElement)("input",{type:"text",value:a.custom_btn_text,onChange:e=>{l({custom_btn_text:e.target.value})}})),(0,t.createElement)("div",{className:"__textArea -fullWidth"},(0,t.createElement)("span",null,"リンク先"),(0,t.createElement)("input",{type:"text",value:a.custom_btn_url,onChange:e=>{l({custom_btn_url:e.target.value})}}))),(0,t.createElement)(r.BaseControl,null,(0,t.createElement)(r.BaseControl.VisualLabel,null,"カスタムボタン2"),(0,t.createElement)("div",{className:"__textArea"},(0,t.createElement)("span",null,"テキスト"),(0,t.createElement)("input",{type:"text",value:a.custom_btn_text_2,onChange:e=>{l({custom_btn_text_2:e.target.value})}})),(0,t.createElement)("div",{className:"__textArea -fullWidth"},(0,t.createElement)("span",null,"リンク先"),(0,t.createElement)("input",{type:"text",value:a.custom_btn_url_2,onChange:e=>{l({custom_btn_url_2:e.target.value})}}))),(0,t.createElement)(r.RadioControl,{className:"-radio",label:"ボタン幅（PC）",selected:a.btnLayoutPC||"",options:h,onChange:e=>{l({btnLayoutPC:e})}}),(0,t.createElement)(r.RadioControl,{className:"-radio",label:"ボタン幅（SP）",selected:a.btnLayoutSP||"",options:_,onChange:e=>{l({btnLayoutSP:e})}}),o&&(0,t.createElement)(r.BaseControl,null,(0,t.createElement)(r.BaseControl.VisualLabel,null,"情報の表示"),"off"===s.displayPrice?(0,t.createElement)(r.CheckboxControl,{label:"価格情報を表示する",checked:a.showPrice,onChange:e=>{l({showPrice:e})}}):(0,t.createElement)(r.CheckboxControl,{label:"価格情報を隠す",checked:a.hidePrice,onChange:e=>{l({hidePrice:e})}}),(0,c.hasFilter)("pochipp.exReviewCheckbox","pochipp-pro")&&(0,t.createElement)(r.CheckboxControl,{label:"レビューリンクを隠す",checked:a.hideReviewUrl,onChange:e=>{l({hideReviewUrl:e})}})),o&&(0,t.createElement)("div",{className:"components-base-control -custom-image"},(0,t.createElement)("div",{className:"components-base-control__field"},(0,t.createElement)("div",{className:"components-base-control__label"},"商品カスタム画像"),(0,t.createElement)((()=>{if(!(0,c.hasFilter)("pochipp.exSetting","pochipp-pro"))return(0,t.createElement)(d,{textkey:p});const e={customImgUrl:n,parsedMeta:a,updateMetadata:l};return(0,c.applyFilters)("pochipp.exSetting",null,e)}),null))))},E=({parsedMeta:e,updateMetadata:a})=>(0,c.hasFilter)("pochipp.exSaleSetting","pochipp-pro")?(0,c.applyFilters)("pochipp.exSaleSetting",null,{parsedMeta:e,updateMetadata:a}):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"components-base-control components-base-control__label"},"カスタムセール情報"),(0,t.createElement)(d,{textkey:u})),w=({parsedMeta:e,updateMetadata:a,isShopLinkType:l})=>{const n=[{name:"amazon",label:"Amazonセール情報",value:e.amazon_sale_text||"",saleStart:e.amazon_sale_start||"",saleEnd:e.amazon_sale_end||""},{name:"rakuten",label:"楽天セール情報",value:e.rakuten_sale_text||"",saleStart:e.rakuten_sale_start||"",saleEnd:e.rakuten_sale_end||""},{name:"yahoo",label:"Yahooセール情報",value:e.yahoo_sale_text||"",saleStart:e.yahoo_sale_start||"",saleEnd:e.yahoo_sale_end||""},{name:"mercari",label:"メルカリセール情報",value:e.mercari_sale_text||"",saleStart:e.mercari_sale_start||"",saleEnd:e.mercari_sale_end||""}];return(0,t.createElement)(r.BaseControl,null,l&&n.map((e=>(0,t.createElement)(t.Fragment,{key:e.name},(0,t.createElement)("span",{className:"components-base-control components-base-control__label"},e.label),(0,t.createElement)("div",{className:"__textArea -fullWidth"},(0,t.createElement)("span",null,"表示"),(0,t.createElement)("input",{type:"text",value:e.value,onChange:t=>{a({[`${e.name}_sale_text`]:t.target.value})}})),(0,t.createElement)("div",{className:"__textArea"},(0,t.createElement)("span",null,"期間"),(0,t.createElement)("input",{type:"datetime-local",value:e.saleStart,onChange:t=>{a({[`${e.name}_sale_start`]:t.target.value})}}),(0,t.createElement)("span",{className:"__nami"},"~"),(0,t.createElement)("input",{type:"datetime-local",value:e.saleEnd,onChange:t=>{a({[`${e.name}_sale_end`]:t.target.value})}}))))),(0,t.createElement)(E,{parsedMeta:e,updateMetadata:a}))},y=(0,t.memo)((({tabs:e,selectedTab:a,setSelectedTab:l})=>(0,t.createElement)("nav",{className:"__tabs"},(0,t.createElement)("div",{className:"__tablist"},Object.values(e).map((({key:e,label:n})=>(0,t.createElement)("button",{key:e,className:e===a&&"-selected",onClick:()=>l(e)},n)))))));function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,"string");if("object"!==v(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}const f=function(e){var a=e.icon,l=e.size,n=void 0===l?24:l,r=function(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,["icon","size"]);return(0,t.cloneElement)(a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({width:n,height:n},r))},x=window.wp.primitives,C=(0,t.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(x.Path,{d:"M13.5 6C10.5 6 8 8.5 8 11.5c0 1.1.3 2.1.9 3l-3.4 3 1 1.1 3.4-2.9c1 .9 2.2 1.4 3.6 1.4 3 0 5.5-2.5 5.5-5.5C19 8.5 16.5 6 13.5 6zm0 9.5c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"})),S=(0,t.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(x.Path,{d:"M12 4V2.2L9 4.8l3 2.5V5.5c3.6 0 6.5 2.9 6.5 6.5 0 2.9-1.9 5.3-4.5 6.2v.2l-.1-.2c-.4.1-.7.2-1.1.2l.2 1.5c.3 0 .6-.1 1-.2 3.5-.9 6-4 6-7.7 0-4.4-3.6-8-8-8zm-7.9 7l1.5.2c.1-1.2.5-2.3 1.2-3.2l-1.1-.9C4.8 8.2 4.3 9.6 4.1 11zm1.5 1.8l-1.5.2c.1.7.3 1.4.5 2 .3.7.6 1.3 1 1.8l1.2-.8c-.3-.5-.6-1-.8-1.5s-.4-1.1-.4-1.7zm1.5 5.5c1.1.9 2.4 1.4 3.8 1.6l.2-1.5c-1.1-.1-2.2-.5-3.1-1.2l-.9 1.1z"})),P=(0,t.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(x.Path,{d:"M15.6 7.2H14v1.5h1.6c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.8 0 5.2-2.3 5.2-5.2 0-2.9-2.3-5.2-5.2-5.2zM4.7 12.4c0-2 1.7-3.7 3.7-3.7H10V7.2H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H10v-1.5H8.4c-2 0-3.7-1.7-3.7-3.7zm4.6.9h5.3v-1.5H9.3v1.5z"})),N=(0,t.memo)((({text:e,onClick:a})=>(0,t.createElement)(r.Button,{icon:(0,t.createElement)(f,{icon:C}),className:"__searchBtn thickbox",isPrimary:!0,onClick:()=>{a()}},e))),B=(0,t.memo)((({onClick:e})=>(0,t.createElement)(r.Button,{icon:(0,t.createElement)(f,{icon:S}),className:"__updateBtn",isSecondary:!0,onClick:()=>{e()}},"最新情報に更新"))),O=(0,t.memo)((({text:e,imageId:a,selectCreateSimpleLink:l})=>(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(n.MediaUpload,{onSelect:e=>{e&&e.url&&l(e.id)},allowedTypes:"image",value:a,render:({open:a})=>(0,t.createElement)(r.Button,{icon:(0,t.createElement)(f,{icon:P}),className:"__simpleLinkBtn",isPrimary:!0,onClick:()=>{a()}},e)})))),z=(0,t.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(x.Path,{d:"M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"})),T=(0,t.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(x.Path,{d:"M13 11.9l3.3-3.4-1.1-1-3.2 3.3-3.2-3.3-1.1 1 3.3 3.4-3.5 3.6 1 1L12 13l3.5 3.5 1-1z"})),M=e=>{try{return JSON.parse(e)}catch(e){return{}}},j=(e,t)=>{const a=document.querySelector("#postcustomstuff");if(null===a)return;const l=a.querySelector(`input[value="${e}"]`);if(null===l)return;const n=l.parentNode.nextElementSibling;if(null===n)return;const r=n.querySelector("textarea");null!==r&&(r.value=t)},L=(e,t)=>"amazon"===e?"https://www.amazon.co.jp/s?k="+encodeURIComponent(t):"rakuten"===e?"https://search.rakuten.co.jp/search/mall/"+encodeURIComponent(t):"yahoo"===e?"https://shopping.yahoo.co.jp/search?p="+encodeURIComponent(t):"mercari"===e?"https://jp.mercari.com/search?keyword="+encodeURIComponent(t):"",V={amazon:"Amazon",rakuten:"楽天",yahoo:"Yahoo",mercari:"メルカリ"},F=(0,t.memo)((({url:e,isProductPage:a})=>(0,t.createElement)("span",{className:"__urlConfBtn"},(0,t.createElement)("span",null,"リンク先 : "),(0,t.createElement)("a",{href:e,target:"_blank",rel:"noreferrer noopener"},a?"商品ページ":"検索結果ページ",(0,t.createElement)(f,{icon:z}))))),I=({type:e,isSearchedSource:a,isProductPage:l,showSearchConf:n,keywords:o,openThickbox:c,deleteSearchResult:s})=>{const i=V[e];return"mercari"===e?(0,t.createElement)("span",{className:"__mainLabel"},"商品詳細検索ができないサービスです"):(0,t.createElement)(t.Fragment,null,a&&(0,t.createElement)("span",{className:"__mainLabel"},"検索元"),!a&&(0,t.createElement)(t.Fragment,null,n&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.Button,{icon:(0,t.createElement)(f,{icon:C}),isSecondary:!0,onClick:()=>{c(e,o)}},l?`${i}で再検索`:`${i}でも検索`),(0,t.createElement)(r.Button,{className:l?"":"-hide",icon:(0,t.createElement)(f,{icon:T}),isSecondary:!0,onClick:()=>{s()}},"詳細リンクを削除")),!n&&(0,t.createElement)("span",{className:"__mainLabel"},"「すべて検索結果ページを表示」するため検索できません")))},A=({current:e,searchedAt:a,link:l,isProductPage:n,showSearchConf:r,keywords:o,openThickBox:c,deleteFunc:s})=>{const i=e===a;return(0,t.createElement)("tr",null,(0,t.createElement)("th",null,V[e]),(0,t.createElement)("td",null,(0,t.createElement)(F,{url:l,isProductPage:n})),(0,t.createElement)("td",null,(0,t.createElement)(I,{type:e,isSearchedSource:i,isProductPage:n,showSearchConf:r,keywords:o,openThickbox:(e,t)=>c(e,t),deleteSearchResult:()=>{s()}})))},R=({attrs:e,openThickbox:a,deleteAmazon:l,deleteRakuten:n,deleteYahoo:r})=>{const o=e.keywords||"",c=e.asin||"",s=e.searched_at,i=!!e.is_all_search_result,m=c?`https://www.amazon.co.jp/dp/${c}`:"",p=e.rakuten_detail_url||"",u=e.yahoo_detail_url||"",d=!i&&""!==m,h=!i&&""!==p,_=!i&&""!==u,b=d?m:L("amazon",o),E=h?p:L("rakuten",o),w=_?u:L("yahoo",o),y=L("mercari",o),v=window.pchppVars.hasAffi;return(0,t.createElement)("div",{className:"pchpp-btnTable"},(0,t.createElement)("table",{className:"__table"},(0,t.createElement)("tbody",null,v.amazon?(0,t.createElement)(A,{current:"amazon",searchedAt:s,link:b,isProductPage:d,showSearchConf:!i,keywords:o,openThickBox:a,deleteFunc:l}):null,v.rakuten?(0,t.createElement)(A,{current:"rakuten",searchedAt:s,link:E,isProductPage:h,showSearchConf:!i,keywords:o,openThickBox:a,deleteFunc:n}):null,v.yahoo?(0,t.createElement)(A,{current:"yahoo",searchedAt:s,link:w,isProductPage:_,showSearchConf:!i,keywords:o,openThickBox:a,deleteFunc:r}):null,v.mercari?(0,t.createElement)(A,{current:"mercari",searchedAt:s,link:y,isProductPage:!1,showSearchConf:!i,keywords:o,openThickBox:a,deleteFunc:()=>{}}):null)))},{apiVersion:U,name:$,category:H,keywords:D,supports:Y}=o,q="shop",G="simple",J="simple",W={basic:{key:"basic",label:"基本設定"},sale:{key:"sale",label:"セール設定"}};window.setItemMetaData=(e,t)=>{const{editPost:a}=wp.data.dispatch("core/editor"),{getEditedPostAttribute:l}=wp.data.select("core/editor");e.title&&(a({title:e.title}),delete e.title);const n=l("meta");"amazon"!==e.searched_at&&"rakuten"!==e.searched_at||(e.link_broken=!1);let r={};r=t?{...M(n.pochipp_data),...e}:e;const o=JSON.stringify(r);a({meta:{...n,pochipp_data:o}}),j("pochipp_data",o)};const K=(e,t)=>{const a=new URLSearchParams;a.append("action","pochipp_update_data"),a.append("itemcode",e),a.append("searched_at",t);const l=document.querySelector(".pochipp-block--setting .__btns");l.classList.add("-updating"),(async(e,t,a)=>{if(void 0===window.pchppVars)return;const n=window.pchppVars.ajaxUrl,r=window.pchppVars.ajaxNonce;e.append("nonce",r),await fetch(n,{method:"POST",cache:"no-cache",body:e}).then((e=>{if(e.ok)return e.json();throw new TypeError("Failed ajax!")})).then((e=>{if(e.error)throw new TypeError(e.error.message);(e=>{const t=e.data;window.setItemMetaData(t,!0),alert("更新が完了しました！"),l.classList.remove("-updating")})(e)})).catch((e=>{var t;t=e,alert("更新に失敗しました。"),console.error(t),l.classList.remove("-updating")}))})(a)};(0,l.registerBlockType)($,{apiVersion:U,title:"商品データ",icon:"pets",category:H,keywords:D,supports:Y,attributes:o.Y4,edit:({attributes:e,setAttributes:l,clientId:o})=>{const{meta:c}=e,s=(0,t.useMemo)((()=>M(c)),[c]),{keywords:i,searched_at:p,image_id:u=0,custom_btn_text:d="",custom_btn_url:h="",custom_btn_text_2:_="",custom_btn_url_2:E="",asin:v="",amazon_affi_url:g="",itemcode:k="",is_all_search_result:f=!1}=s,[x,C]=(0,t.useState)(!1),[S,P]=(0,t.useState)(p===J?G:q),[z,T]=(0,t.useState)(W.basic.key),{postId:L}=(0,a.useSelect)((e=>({postId:e("core/editor").getCurrentPostId()})),[]),{editPost:V}=wp.data.dispatch("core/editor"),F=(0,a.useSelect)((e=>e("core/editor").getEditedPostAttribute("title")),[]),I=(0,a.useSelect)((e=>{if(!u)return"";const t=e("core").getMedia(u);return t?t.source_url:""}),[u]),A=(0,t.useCallback)((e=>{const t=JSON.stringify({...s,...e});l({meta:t}),j("pochipp_data",t)}),[s,l]),U=(0,t.useCallback)(((e,t)=>{let a="media-upload.php?type=pochipp";a+="&at=setting",a+=`&blockid=${o}`,a+=`&postid=${L}`,e?(a+=`&tab=pochipp_search_${e}`,a+=`&only=${e}`):a+="&tab=pochipp_search_amazon",t&&(a+=`&keyword=${t}`),a+="&TB_iframe=true",window.tb_show("商品検索",a);const l=document.querySelector("#TB_window");l&&l.classList.add("by-pochipp")}),[L,o]),$=!!p,H=S===q,D=!$||H,Y=!$||S===G,Q={amazon:{itemCode:v,showUpdateBtn:!(!v||!g)},rakuten:{itemCode:k,showUpdateBtn:!!k},default:{itemCode:"",showUpdateBtn:!1}},{itemCode:X,showUpdateBtn:Z}=Q[p]||Q.default,ee=(0,t.useCallback)((()=>K(X,p)),[X,p]);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{...(0,n.useBlockProps)({className:"pochipp-block--setting","data-sticky":x?"1":null})},(0,t.createElement)(m,{postId:L,postTitle:F,customImgUrl:I,parsedMeta:s}),(0,t.createElement)("div",{className:"__settings"},(0,t.createElement)("div",{className:"__btns"},D&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(N,{onClick:()=>U("",i),text:$?"商品を再検索":"商品を検索"}),Z&&(0,t.createElement)(B,{onClick:ee})),Y&&(0,t.createElement)(O,{text:$?"リンクを再作成":"手動でリンクを作成",imageId:u,selectCreateSimpleLink:e=>{P(G),F||V({title:"【商品タイトル】タイトルを入力してください"}),A({searched_at:J,image_id:e,custom_btn_text:d||"公式サイトで探す",custom_btn_url:h||"https://example.com",custom_btn_text_2:_||"近くのお店で探す",custom_btn_url_2:E||"https://example.com"})}})),$&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(y,{tabs:W,selectedTab:z,setSelectedTab:T}),z===W.basic.key&&(0,t.createElement)("div",{className:"__fields"},H&&(0,t.createElement)(r.BaseControl,null,(0,t.createElement)(r.BaseControl.VisualLabel,null,"ボタンリンク先"),(0,t.createElement)(R,{attrs:s,openThickbox:U,deleteAmazon:()=>{A({asin:""}),A({amazon_affi_url:""})},deleteRakuten:()=>{A({itemcode:""}),A({rakuten_detail_url:""})},deleteYahoo:()=>{A({yahoo_itemcode:""}),A({seller_id:""}),A({yahoo_detail_url:""})}}),(0,t.createElement)(r.CheckboxControl,{className:"__searchResultCheck",label:"リンク先をすべて検索結果ページにする",checked:f,onChange:e=>{A({is_all_search_result:e})}})),(0,t.createElement)(b,{postTitle:F,parsedMeta:s,updateMetadata:A,customImgUrl:I,isShopLinkType:H})),z===W.sale.key&&(0,t.createElement)("div",{className:"__fields"},(0,t.createElement)(w,{parsedMeta:s,updateMetadata:A,isShopLinkType:H}))))),(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(r.PanelBody,null,(0,t.createElement)(r.CheckboxControl,{label:"プレビューを画面上部に固定表示",checked:x,onChange:e=>{C(e)}}))))},save:()=>null})})();