(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1032:function(t,e,n){"use strict";var a=n(0),o=n(944),r=n(9),c=n.n(r),i=n(4),u=n(66),s=n(1);function m(t,e,n,a,o,r,c){try{var i=t[r](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function c(t){m(r,a,o,c,i,"next",t)}function i(t){m(r,a,o,c,i,"throw",t)}c(void 0)}))}}e.a=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,m=t.onError,b=t.onRequestClose,p=t.actionType,f=t.screenType,O=Object(a.useContext)(i.h),g=n?n.length:0,j=Object(o.a)(function(){var t=l(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c()({path:Object(i.u)("/automation/bulk-action"),method:"POST",data:{action:p,a_cids:e,status:f}}).then((function(t){O(t.message),Object(i.wb)(O,2e3)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return j.reset()}),2500),r&&setTimeout((function(){return r()}),2e3)},onError:function(){m&&m()}}),d=function(){var t=l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.mutate(n.map((function(t){return t.ID})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w={delete:{title:Object(s._n)("Delete Automation for Contact","Delete Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to delete ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(" from this automation. This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Delete","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to delete automation for contacts","wp-marketing-automations"),confirmDescription:Object(s.__)("This action is irreversible","wp-marketing-automations")},end:{title:Object(s._n)("End Automation for Contact","End Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to end automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk action has been scheduled, it will be executed within one minute.","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to end automation for contacts","wp-marketing-automations")},paused:{title:Object(s._n)("Pause Automation for Contact","Pause Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to pause automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to pause automation for contacts","wp-marketing-automations")},run_now:{title:Object(s._n)("Run Automation for Contact","Run Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to run automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to run automation for contacts","wp-marketing-automations")},unpaused:{title:Object(s._n)("Resume Automation for Contact","Resume Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to resume automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to resume automation for contacts","wp-marketing-automations")},retry:{title:Object(s._n)("Retry Automation for Contact","Retry Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to retry automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to re-run automation for contacts","wp-marketing-automations")},rerun:{title:Object(s._n)("Re-Run Automation for Contact","Re-Run Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to re-run automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to re-run automation for contacts","wp-marketing-automations")},startbegin:{title:Object(s._n)("Start From Beginning Automation for Contact","Start From Beginning Automation for Contacts",g,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to start automation from beginning for ","wp-marketing-automations"),Object(s._n)("contact","contacts",g,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to start automation from beginning for contacts","wp-marketing-automations")}};return Object(a.createElement)(u.a,{modalTitle:w.hasOwnProperty(p)&&w[p].hasOwnProperty("title")?w[p].title:Object(s._n)("Perform Actions","Perform Actions",g,"wp-marketing-automations"),deleteDescriptionText:w.hasOwnProperty(p)&&w[p].hasOwnProperty("description")?w[p].description:"",confirmButtonText:w.hasOwnProperty(p)&&w[p].hasOwnProperty("confirmBtn")?w[p].confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelButtonText:w.hasOwnProperty(p)&&w[p].hasOwnProperty("cancelBtn")?w[p].cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),onConfirm:d,isLoading:j.isLoading,successMessage:j.isSuccess&&(w.hasOwnProperty(p)&&w[p].hasOwnProperty("successMsg")?w[p].successMsg:Object(s.__)("Actions Done!","wp-marketing-automations")),errorMessage:j.isError&&(j.error&&j.error.message?j.error.message:w.hasOwnProperty(p)&&w[p].hasOwnProperty("errorMsg")?w[p].errorMsg:Object(s.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!b&&b()},isOpen:e,confirmDescription:w.hasOwnProperty(p)&&w[p].hasOwnProperty("confirmDescription")?w[p].confirmDescription:"",isDelete:!0})}},1265:function(t,e,n){},1334:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n(949),r=n(5),c=n(14),i=n(1),u=n(119),s=n(25),m=n(36),l=n.n(m),b=n(3),p=n(322);function f(t,e,n,a,o,r,c){try{var i=t[r](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,o)}var O=function(t){var e=t.selected,n=void 0===e?[]:e,o=t.placeholder,r=void 0===o?"":o,c=t.setSelected,u=function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(b.isArray)(e)){t.next=2;break}return t.abrupt("return");case 2:n=e.find((function(t){return l()(t,"searchTerm")})),Object(b.isUndefined)(n)&&e.length>0&&e[0].hasOwnProperty("key")&&c([e[e.length-1]]);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function c(t){f(r,a,o,c,i,"next",t)}function i(t){f(r,a,o,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}();return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(s.a,{autocompleter:p.a,multiple:!1,allowFreeTextSearch:!1,inlineTags:!0,selected:n,onChange:u,onRemoveTag:function(){return c([])},placeholder:""!==r?r:Object(i.__)("Search by automation","wp-marketing-automations"),showClearButton:!1,disabled:!1}))},g=n(4),j=n(6),d=n.n(j),w=n(9),_=n.n(w),y=n(19),h=n.n(y),k=n(37),v=n.n(k),E=n(20);function C(t,e,n,a,o,r,c){try{var i=t[r](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,o)}var P={name:"contacts",className:"bwf-search-bwf-contacts-result",options:function(t){return(e=regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v()(e)){t.next=2;break}return t.abrupt("return",[]);case 2:return n={search:e,limit:10,offset:0},t.next=5,_()({path:Object(g.u)("/v3/contacts?"+Object(E.stringify)(n)),method:"GET"});case 5:return a=t.sent,t.abrupt("return",l()(a,"result")?a.result:[]);case 7:case"end":return t.stop()}}),t)})),n=function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function c(t){C(r,a,o,c,i,"next",t)}function i(t){C(r,a,o,c,i,"throw",t)}c(void 0)}))},function(t){return n.apply(this,arguments)})(t);var e,n},isDebounced:!0,getOptionIdentifier:function(t){return t.id},getOptionKeywords:function(t){return[t.f_name,t.l_name,t.email,t.f_name+" "+t.l_name]},getFreeTextOptions:function(t,e){return[{key:"name",label:Object(a.createElement)("span",{key:"name",className:"bwf-search-result-name"},h()({mixedString:Object(i.__)("All contacts with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(a.createElement)("strong",{className:"components-form-token-field__suggestion-match"},t)}})),value:{id:t,name:t,contacts:e.map((function(t){return l()(t,"value")?t.value:t})),searchTerm:t}}]},getOptionLabel:function(t,e){var n=Object(g.m)(Object(g.E)(t),e)||{};return Object(a.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":Object(g.E)(t)},n.suggestionBeforeMatch,Object(a.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(t){return t}};function A(t,e,n,a,o,r,c){try{var i=t[r](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,o)}var T=function(t){var e=t.selected,n=void 0===e?[]:e,o=t.setSelected,r=function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var n,a,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(b.isArray)(e)){t.next=2;break}return t.abrupt("return");case 2:n=e.find((function(t){return l()(t,"searchTerm")})),Object(b.isUndefined)(n)&&e.length>0&&e[0].hasOwnProperty("id")&&(a=e[e.length-1],r=a.hasOwnProperty("f_name")?a.f_name:"",r=a.hasOwnProperty("l_name")?r+" "+a.l_name:r,a.hasOwnProperty("email")&&(r+="( ".concat(a.email," )")),c={key:a.hasOwnProperty("id")?a.id:"",label:r,value:r},o([c]));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function c(t){A(r,a,o,c,i,"next",t)}function i(t){A(r,a,o,c,i,"throw",t)}c(void 0)}))});return function(t){return e.apply(this,arguments)}}();return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(s.a,{autocompleter:P,multiple:!1,allowFreeTextSearch:!1,inlineTags:!0,selected:n,onChange:r,onRemoveTag:function(){return o([])},placeholder:Object(i.__)("Search by contact","wp-marketing-automations"),showClearButton:!1,disabled:!1}))},R=n(51);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var D=function(){var t=Object(R.a)("automationContactsList"),e=t.fetch,n=t.setStateProp;return x(x({},B(t,["fetch","setStateProp"])),{},{fetch:function(t,n,a,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],i=t.s,u={offset:n,limit:a,search:i,type:o};r.hasOwnProperty(0)&&r[0].hasOwnProperty("key")&&(u.automation=r[0].key),c.hasOwnProperty(0)&&c[0].hasOwnProperty("key")&&(u.contact=c[0].key),e("GET",Object(g.u)("/automations/contacts/"),u)},setAutomationContactsValues:function(t,e){n(t,e)}})},M=n(52);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var J=function(){var t=Object(M.a)("automationContactsList"),e=t.getStateProp;return L(L({},F(t,["getStateProp"])),{},{getAutomationContacts:function(){return e("acontacts")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getPageOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getCountData:function(){return e("countData")}})},q=n(122),Y=n(57),V=n(58),W=n(18),G=n(8),H=n(33),Q=n(945),z=n(995),K=n(66),$=(n(1265),n(1032)),X=n(328),Z=n.n(X),tt=n(41),et=n(306),nt=n(39),at=n(121),ot=n(74);function rt(t,e,n,a,o,r,c){try{var i=t[r](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,o)}function ct(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function c(t){rt(r,a,o,c,i,"next",t)}function i(t){rt(r,a,o,c,i,"throw",t)}c(void 0)}))}}function it(){return(it=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var c,i=t[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return n}(t,e)||bt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){if(t){if("string"==typeof t)return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var ft=function(t){var e=[];return"completed"!==t?(["active","delayed"].includes(t)&&(e.push({id:"run_now",icon:"play",hint:Object(i.__)("Run Now","wp-marketing-automations"),isPro:!0,featureTitle:Object(i.__)("Run Now Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Run+Now+Upgrade+Modal"})}),e.push({id:"paused",icon:"pause",hint:Object(i.__)("Pause Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(i.__)("Pause Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Pause+Upgrade+Modal"})})),"paused"===t&&e.push({id:"unpaused",icon:"play",hint:Object(i.__)("Resume Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(i.__)("Resume Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Resume+Upgrade+Modal"})}),"failed"===t&&(e.push({id:"retry",icon:"retry",hint:Object(i.__)("Retry Action","wp-marketing-automations"),isPro:!0,featureTitle:Object(i.__)("Retry Action","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Retry+Upgrade+Modal"})}),e.push({id:"startbegin",icon:"start-beginning",hint:Object(i.__)("Re-Enter Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(i.__)("Re-Enter Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Re+Enter+Upgrade+Modal"})})),"inactive"!==t&&e.push({id:"end",icon:"end-status",hint:Object(i.__)("End","wp-marketing-automations")})):e.push({id:"rerun",icon:"retry",hint:Object(i.__)("Retstart Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(i.__)("Retstart Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Retstart+Upgrade+Modal"})}),e.push({id:"delete",icon:"trash",hint:Object(i.__)("Delete","wp-marketing-automations")}),e};e.default=function(t){var e=t.match.params.type,n=void 0===e?"failed":e,s=Object(a.useContext)(g.h),m=Object(c.i)(),l=lt(Object(a.useState)(""),2),p=l[0],f=l[1],j=lt(Object(a.useState)({}),2),w=j[0],y=j[1],h=lt(Object(a.useState)([]),2),k=h[0],v=h[1],E=lt(Object(a.useState)([]),2),C=E[0],P=E[1],A=lt(Object(a.useState)({loading:!1,status:!1}),2),R=A[0],S=A[1],x=D(),N=x.fetch,B=x.setAutomationContactsValues,M=J(),I=M.getAutomationContacts,L=M.getLoading,U=M.getPageOffset,F=M.getPerPageCount,X=M.getTotalCount,rt=M.getPageNumber,ut=M.getCountData,mt=L(),pt=rt(),Ot=F(),gt=X(),jt=U(),dt=I(),wt=lt(Object(a.useState)([]),2),_t=wt[0],yt=wt[1],ht=lt(Object(a.useState)(!1),2),kt=ht[0],vt=ht[1],Et=lt(Object(a.useState)(""),2),Ct=Et[0],Pt=Et[1],At=lt(Object(a.useState)(!1),2),Tt=At[0],Rt=At[1],St=lt(Object(a.useState)({isFeature:!0}),2),xt=St[0],Nt=St[1],Bt=function(){zt&&zt(),yt([])},Dt=Object(a.useCallback)((function(t,e){yt(e),Pt(t),vt(!0)}),[]);Object(a.useEffect)((function(){Object(g.k)(Object(i.__)("Automation Contacts","wp-marketing-automations")),Bt()}),[]);var Mt=m.s,It=void 0===Mt?"":Mt;Object(a.useEffect)((function(){N(m,jt,Ot,n,k,C)}),[It,Ot,jt,n,k,C]),Object(o.a)("automation-contacts","","",!1,Object(a.createElement)(a.Fragment,null),0,!1,!0);var Lt=Object(at.a)().getPageCountData,Ut=Object(ot.a)().setPageCountData,Ft=Lt(),Jt=ut();Object(a.useEffect)((function(){Jt.hasOwnProperty("failed")&&Ut(st(st({},Ft),{},{"contact-activity":parseInt(Jt.failed)}))}),[Jt]);var qt,Yt=d()("bwfcrm-automation-contact-list-table",{"has-search":!0}),Vt=Object(a.useMemo)((function(){var t={};if(Array.isArray(dt)){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=bt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw r}}}}(dt);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.ID]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[dt]),Wt=Object(q.b)(Vt),Gt=Wt.singleSelectProps,Ht=Wt.selectAllProps,Qt=Wt.floatingBarProps,zt=Wt.resetSelection,Kt=Wt.selected,$t=Object.keys(Kt).filter((function(t){return Kt[t]})).length,Xt=[{key:"select_contact",label:Object(a.createElement)(tt.a,it({type:"checkbox",checked:!1,onChange:function(){}},Ht)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"contact",label:Object(i.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact bwf-w-150 bwf-table-col-sticky bwf-sticky-left "},{key:"automation",label:Object(i.__)("Automation","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details",isLeftAligned:!1},{key:"contact-data",label:Object(i.__)("Details","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details",isLeftAligned:!0},{key:"startedon ",label:Object(i.__)("Started On","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-210",isLeftAligned:!0},{key:"last_run",label:Object(i.__)("Last Run","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-210",isLeftAligned:!0},"failed"===n&&{key:"error_msg",label:Object(i.__)("Reason","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-210 bwf-word-break",isLeftAligned:!0},"active"===n&&{key:"next_last_run",label:Object(i.__)("Next Run Time","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-150",isLeftAligned:!0},{key:"journey",label:Object(i.__)("Journey","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-90 bwf-table-col-sticky bwf-sticky-right",isLeftAligned:!0}],Zt=function(t){t!==Ot&&B("limit",t)},te=function(){var t=ct(regeneratorRuntime.mark((function t(e,a,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(Object(i.__)("Updating status…","wp-marketing-automations")),t.prev=1,t.next=4,_()({path:Object(g.u)("/automation/".concat(e,"/contact/status")),method:"POST",data:{to:o,from:a}}).then((function(t){200===t.code?(s(t.message),N(m,jt,Ot,n)):s(t.message)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),s(t.t0.message);case 9:Object(g.wb)(s,3e3);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n,a){return t.apply(this,arguments)}}(),ee=function(){var t=ct(regeneratorRuntime.mark((function t(e){var a,o,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},o=r.length>2&&void 0!==r[2]?r[2]:0,S(st(st({},a),{},{status:!0})),t.prev=3,t.next=6,_()({path:Object(g.u)("/automation/".concat(a.aid,"/delete-contact")),method:"DELETE",data:{trail_id:e,ac_id:o,type:n}}).then((function(t){if(200!==t.code)throw Error(Object(g.p)(null==t?void 0:t.message));S({status:!1}),s(t.message),N(m,jt,Ot,n)})).catch((function(t){throw Error(Object(g.p)(null==t?void 0:t.message))}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),S(st(st({},a),{},{status:!0,error:t.t0.message}));case 11:Object(g.wb)(s,3e3);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),ne=function(t){return Object(a.createElement)("div",{className:"bwf-display-flex-column"},Object(a.createElement)(H.a,{href:"admin.php?page=autonami&path=/automation/"+t.aid,type:"bwf-crm",className:"bwf-crm-campaign-data-contact-link bwf-a-no-underline",key:t.aid},t.hasOwnProperty("title")?t.title:"-"),t.hasOwnProperty("event")&&""!==t.event&&Object(a.createElement)("span",null,Object(i.__)("Event","wp-marketing-automations"),": ",t.event))},ae=function(t){var e=t.trail,n=void 0===e?"":e;return Object(b.isEmpty)(n)?"-":Object(a.createElement)(r.Button,{isSecondary:!0,className:"bwf-btn-small is-light bwf-btn-gray",onClick:function(){Object(g.Jb)()?(f(n),y(t)):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Contact Journey","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Contact+Activity+Contact+Journey+Upgrade+Modal"})})),Rt(!0))}},!Object(g.Jb)()&&Object(a.createElement)(G.a,{icon:"king",size:16}),Object(i.__)("View","wp-marketing-automations"))},oe={1:Object(i.__)("Delay","wp-marketing-automations"),2:Object(i.__)("Action","wp-marketing-automations"),3:Object(i.__)("Goal","wp-marketing-automations"),4:Object(i.__)("Condition","wp-marketing-automations")},re=function(t){var e=t.data,n=void 0===e?{}:e;if(Object(b.isEmpty)(n))return Object(a.createElement)(a.Fragment,null,"-");var o=n.action,r=void 0===o?"":o,c=n.run_time,i=void 0===c?"":c,u=n.type,s=void 0===u?"":u;return Object(a.createElement)("div",{className:"bwf-c-contact-details-cell"},!Object(b.isEmpty)(s)&&!Object(b.isEmpty)(r)&&oe.hasOwnProperty(parseInt(s))&&Object(a.createElement)(W.a,{justify:"justify",align:"top"},Object(a.createElement)(W.c,null,Object(a.createElement)("span",{className:"bwf_bold",style:{color:"#99752B"}},oe[parseInt(s)]),Object(b.isEmpty)(r)?"":" : "+r)),!Object(b.isEmpty)(i)&&Object(a.createElement)(W.a,{justify:"justify",align:"top"},Object(a.createElement)(W.c,null,Object(g.W)(i))),(Object(b.isEmpty)(s)||!oe.hasOwnProperty(parseInt(s)))&&Object(b.isEmpty)(i)&&Object(a.createElement)("span",null,"-"))},ce=function(t){var e=t.data,n=void 0===e?{}:e;return!(!n.hasOwnProperty("type")||3!==parseInt(n.type))},ie=[{slug:"failed",name:Object(i.__)("Failed","wp-marketing-automations"),path:"/automation-contacts/failed"},{slug:"paused",name:Object(i.__)("Paused","wp-marketing-automations"),path:"/automation-contacts/paused"},{slug:"delayed",name:Object(i.__)("Delayed","wp-marketing-automations"),path:"/automation-contacts/delayed"},{slug:"active",name:Object(i.__)("Active","wp-marketing-automations"),path:"/automation-contacts/active"},{slug:"completed",name:Object(i.__)("Completed","wp-marketing-automations"),path:"/automation-contacts/completed"},{slug:"inactive",name:Object(i.__)("Inactive","wp-marketing-automations"),path:"/automation-contacts/inactive"}];return Object(a.createElement)("div",{className:"bwf-automation-all-contacts-wrap"},Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(i.__)("Contact Activity","wp-marketing-automations")),parseInt(gt)>0&&Object(a.createElement)("div",{className:"bwf-content-header-count"},Object(i.sprintf)(Object(i.__)("(%s Results)","wp-marketing-automations"),gt)))),Object(a.createElement)(et.a,{tabs:ie,selected:n,count:Jt}),Object(a.createElement)("div",{className:"bwf_clear_16"}),Object(a.createElement)(u.a,{className:Yt,rows:dt.map((function(t){var e,o,r,c,u,s,l,p,f,O,j,d,w,_,y,h=[];return h.push({display:Gt.hasOwnProperty(t.ID)?Object(a.createElement)(tt.a,it({type:"checkbox",checked:!1,onChange:function(){}},Gt[t.ID])):Object(a.createElement)(a.Fragment,null),value:null},{display:(p=t,f=p.status,O=void 0===f?"":f,j=p.trail,d=void 0===j?"":j,w=p.ID,_=p.aid,y=void 0===_?"":_,Object(a.createElement)(Y.a,{label:Object(i.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var e=t.onToggle;return Object(a.createElement)(a.Fragment,null,[1,4,6].includes(parseInt(O))&&"inactive"!==n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){Object(g.Jb)()?te(w,O,"now"):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Run Now Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Run+Now+Upgrade+Modal"})})),Rt(!0)),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Run Now","wp-marketing-automations")),!Object(g.Jb)()&&Object(a.createElement)(W.c,null,g.e))),[1,4,6].includes(parseInt(O))&&"inactive"!==n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){Object(g.Jb)()?te(w,O,3):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Pause Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Pause+Upgrade+Modal"})})),Rt(!0)),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Pause Automation","wp-marketing-automations")),!Object(g.Jb)()&&Object(a.createElement)(W.c,null,g.e))),3===parseInt(O)&&"inactive"!==n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){Object(g.Jb)()?te(w,O,1):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Resume Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Resume+Upgrade+Modal"})})),Rt(!0)),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Resume Automation","wp-marketing-automations")),!Object(g.Jb)()&&Object(a.createElement)(W.c,null,g.e))),2===parseInt(O)&&"inactive"!==n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){Object(g.Jb)()?te(w,O,1):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Retry Action","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Retry+Upgrade+Modal"})})),Rt(!0)),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Retry Action","wp-marketing-automations")),!Object(g.Jb)()&&Object(a.createElement)(W.c,null,g.e))),[2].includes(parseInt(O))&&"inactive"!==n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){Object(g.Jb)()?te(w,O,"startbegin"):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Re-Enter Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Start+From+Beginning+Upgrade+Modal"})})),Rt(!0)),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Re-Enter Automation","wp-marketing-automations")),!Object(g.Jb)()&&Object(a.createElement)(W.c,null,g.e))),!Object(b.isEmpty)(O)&&"inactive"!==n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){te(w,O,"end"),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("End Automation","wp-marketing-automations")))),"completed"===n&&Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){Object(g.Jb)()?te(w,O,"re_run"):(Nt(st(st({},xt),{},{featureTitle:Object(i.__)("Restart Automation","wp-marketing-automations"),proLink:Object(g.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Re+Run+Upgrade+Modal"})})),Rt(!0)),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Restart Automation","wp-marketing-automations")),!Object(g.Jb)()&&Object(a.createElement)(W.c,null,g.e))),Object(a.createElement)(V.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(a.createElement)(a.Fragment,null,Object(a.createElement)("span",{style:{fontWeight:"normal"}},Object(i.__)("contact ")),p.f_name," ",p.l_name),buttonConfirm:Object(i.__)("Delete","wp-marketing-automations"),buttonCancel:Object(i.__)("Cancel","wp-marketing-automations"),modalTitle:Object(i.__)("Delete Contact","wp-marketing-automations"),aid:y};S(st(st({},t),{},{onConfirm:function(){return ee(d,t,w)}})),e()}},Object(a.createElement)(W.a,{justify:"space-between"},Object(a.createElement)(W.c,null,Object(i.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:(o=t,r=o.f_name,c=void 0===r?"":r,u=o.l_name,s=void 0===u?"":u,l=Object(g.Ub)([c,s]," "),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(H.a,{href:"admin.php?page=autonami&path=/contact/"+o.cid+"&return_to=".concat(m.path),type:"bwf-crm",className:"bwf-crm-campaign-contactData-contact-link bwf-a-no-underline",key:o.cid},Object(a.createElement)("div",{className:"bwf-blue-content"},Object(b.isEmpty)(Z()(l))?"-":l)))),value:"-"},{display:ne(t),value:""},{display:(e=t,Object(a.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email?Object(a.createElement)(W.a,{justify:"justify",align:"top"},Object(a.createElement)(W.c,null,e.email)):"-",e.contact_no&&Object(a.createElement)(W.a,{justify:"justify",align:"top"},Object(a.createElement)(W.c,null,e.contact_no)),!e.email&&!e.contact_no&&"-")),value:""},{display:t.hasOwnProperty("c_date")?Object(g.W)(t.c_date):"-",value:t.hasOwnProperty("c_date")?t.c_date:"-"}),"active"===n&&h.push({display:re(t),value:""}),h.push({display:t.hasOwnProperty("e_time")&&!ce(t)?Object(g.W)(t.e_time):"-",value:"-"}),"failed"===n&&h.push({display:t.hasOwnProperty("error_msg")&&!Object(b.isEmpty)(t.error_msg)?t.error_msg:"-",value:""}),h.push({display:ae(t),value:"-"}),h})),headers:Xt.filter((function(t){return!!t})),query:{paged:pt},rowsPerPage:Ot,totalRows:gt,isLoading:mt,onPageChange:function(t,e){B("offset",(t-1)*Ot)},onQueryChange:function(t){return"per_page"!==t?function(){}:Zt},rowHeader:!0,showMenu:!1,actions:$t>0?[Object(a.createElement)(q.a,it({key:"automation-contact-bulk-action",actions:ft(n),onAction:Dt,inLine:!0,reset:Bt},Qt))]:[Object(a.createElement)(O,{key:"automation",selected:k,setSelected:v,placeholder:Object(i.__)("Search by automation","wp-marketing-automations")}),Object(a.createElement)(T,{key:"contact",selected:C,setSelected:P})],emptyMessage:Object(i.__)("No contact activities found","wp-marketing-automations")}),Object(a.createElement)(K.a,{modalTitle:R.modalTitle,content:R.content,deleteEntityName:R.deleteEntityName,confirmText:R.confirmText,confirmButtonText:R.buttonConfirm,cancelButtonText:R.buttonCancel,onConfirm:R.onConfirm,isLoading:R.loading,successMessage:R.success,errorMessage:R.error,onRequestClose:function(){return S({status:!1})},isOpen:R.status,isDelete:!0}),Object(a.createElement)($.a,{tasks:_t,isOpen:kt,onSuccess:function(){N(m,jt,Ot,n),Bt()},onError:Bt,onRequestClose:function(){return vt(!1)},screenType:"automation-contact",screenTypeId:n,actionType:Ct}),Object(g.Jb)()&&!Object(b.isEmpty)(p)&&Object(a.createElement)(r.Modal,{title:"",className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-fullsc-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-stretch-header-single"},Object(a.createElement)("div",{className:"bwf-modal-heading"},(qt="-",Object(b.isEmpty)(w)||(qt=Object(b.isEmpty)(w.f_name)&&Object(b.isEmpty)(w.l_name)?w.email:w.f_name+" "+w.l_name),qt)," ",Object(a.createElement)("span",{className:"bwf-tags bwf-tag-light-blue"},Object(i.__)("Customer Journey","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-display-flex gap-24"},Object(a.createElement)(r.Button,{isSecondary:!0,className:"bwf-btn-small is-light bwf-btn-gray",onClick:function(){Object(c.k)({page:"autonami",path:"/automation/"+w.aid},"/",{})}},Object(i.__)("View Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:function(){f(""),y({})},className:"bwf-modal-close"},Object(a.createElement)(G.a,{icon:"close",color:"#353030"})))),Object(a.createElement)(Q.e,null,Object(a.createElement)(z.a,{customerData:{trail:p},isConatctTab:!0,automatonID:w.aid,hasHeader:!0}))),!Object(g.Jb)()&&Object(a.createElement)(nt.b,{isOpen:Tt,onRequestClose:function(){return Rt(!1)},modalContent:xt}))}}}]);