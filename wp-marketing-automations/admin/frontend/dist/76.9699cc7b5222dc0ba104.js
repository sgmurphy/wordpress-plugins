(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1320:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(5),c=a(1),i=a(957),l=a(962),m=a(4),o=a(49),s=a(311),b=a(57),f=a(58),u=a(18),d=a(3),p=a(60),j=a(8),O=a(9),w=a.n(O),_=a(31);function g(e,t,a,n,r,c,i){try{var l=e[c](i),m=l.value}catch(e){return void a(e)}l.done?t(m):Promise.resolve(m).then(n,r)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function i(e){g(c,n,r,i,l,"next",e)}function l(e){g(c,n,r,i,l,"throw",e)}i(void 0)}))}}function v(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return a}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e){var t=e.mappedFields,a=e.formHeaders;if(!t)return Object(n.createElement)(_.a,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Error: ","wp-marketing-automations")),Object(c.__)("No email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"));var r=function(e){return"email"!==t[e]?"continue":a.find((function(t){return t.index.toString()===e}))?{v:null}:{v:Object(n.createElement)(_.a,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Error: ","wp-marketing-automations")),Object(c.__)("Invalid email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"))}};for(var i in t){var l=r(i);if("continue"!==l&&"object"===h(l))return l.v}return Object(n.createElement)(_.a,{status:"error",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Error: ","wp-marketing-automations")),Object(c.__)("No email mapping found. Email mapping is must. Click edit to map email.","wp-marketing-automations"))},C=function(e){var t=e.mappedFields,a=e.formHeaders;if(!t)return Object(n.createElement)(_.a,{status:"warning",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Warning: ","wp-marketing-automations")),Object(c.__)("Invalid / Empty Mapping Data. Click edit to map fields.","wp-marketing-automations"));var r=function(e){if(!a.find((function(t){return t.index.toString()===e})))return{v:Object(n.createElement)(_.a,{status:"warning",isDismissible:!1,className:"bwf-c-mapping-notice"},Object(n.createElement)("b",null,Object(c.__)("Warning: ","wp-marketing-automations")),Object(c.__)("Detected some invalid field mappings. Maybe your form fields have been changed. Click edit to map fields.","wp-marketing-automations"))}};for(var i in t){var l=r(i);if("object"===h(l))return l.v}return null};t.default=function(){var e=Object(i.a)(),t=e.getFeed,a=e.getFormFields,O=e.getFormHeaders,g=e.getLoading,k=e.getUpdateStatusStatus,N=Object(l.a)(),h=N.fetchMappingData,x=N.setEditMapMode,F=N.setStep,A=N.updateStatus,P=N.resetUpdateStatusStatus,D=t(),T=D.id,I=D.data,H=D.valid,R=y(Object(n.useState)(!H),2),U=R[0],M=R[1],L=y(Object(n.useState)(!0),2),Y=L[0],B=L[1],J=y(Object(n.useState)(!1),2),Q=J[0],V=J[1],W=a(),q=Array.isArray(W)?W.map((function(e){return e.fields})).reduce((function(e,t){return[].concat(v(e),v(t))}),[]):[],z=O(),$=I.mapped_fields,G=g(),K=y(Object(n.useState)(!1),2),X=K[0],Z=K[1];Object(n.useEffect)((function(){H&&h(T)}),[T]);var ee=k(),te=Object(n.useContext)(m.h);Object(n.useEffect)((function(){ee&&(1===ee&&te(Object(c.__)("Loadingâ€¦","wp-marketing-automations")),2===ee&&te(Object(c.__)("Status Changed Successfully!","wp-marketing-automations")),3===ee&&te(Object(c.__)("Unable to change status","wp-marketing-automations")),3!==ee&&2!==ee||setTimeout((function(){te(""),P()}),2e3))}),[ee]);var ae=Object(m.U)(),ne=!!D&&!!D.data&&!!D.data.incentivize_email,re=function(){var e=E(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),e.next=4,w()({path:Object(m.u)("/broadcast/email-preview"),method:"POST",data:t}).then((function(e){V(e.result.body.replace(/\\/g,"")),B(!1)}));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Object(n.createElement)(n.Fragment,null));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(o.a,null),Object(n.createElement)("div",{className:"bwfcrm-overview-wrap"},Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Overview","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},Object(m.Jb)()&&H&&Object(n.createElement)(b.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(f.a,{isClickable:!0,onInvoke:function(){var e=2===D.status?3:2;A(T,e),t()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,2===D.status?Object(c.__)("Deactivate","wp-marketing-automations"):Object(c.__)("Activate","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,null,U&&Object(n.createElement)(_.a,{className:"bwf-error-notice",isDismissible:!1,status:"error",onRemove:function(){return M(!1)}},Object(c.__)("Saved form does not exist.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Title","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.title)),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Source","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},ae&&ae[D.source]?ae[D.source]:D.source,H&&!!D.form_link&&D.data.hasOwnProperty("form_id")&&Object(n.createElement)(n.Fragment,null," ( ",Object(n.createElement)("a",{href:D.form_link,target:"_blank",className:"bwf-a-no-underline",rel:"noreferrer"},"#"+D.data.form_id)," )"))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Status","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},1===D.status?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-draft"},Object(c.__)("Draft","wp-marketing-automations")):2===D.status?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-active"},Object(c.__)("Active","wp-marketing-automations")):Object(n.createElement)("span",{className:"bwf-tags bwf-tag-inactive"},Object(c.__)("Inactive","wp-marketing-automations")))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Submissions","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.contacts_created)))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Mapping","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},Object(m.Jb)()&&H&&Object(n.createElement)(b.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(f.a,{isClickable:!0,onInvoke:function(){x(!0),F("mapping"),t()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,Object(c.__)("Edit","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,{className:"bwf-crm-overview-full"},!!H&&Object(n.createElement)(n.Fragment,null,!G&&z.length>0&&q.length>0?Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)(C,{mappedFields:$,formHeaders:z}),Object(n.createElement)(S,{mappedFields:$,formHeaders:z}),Object(n.createElement)("table",{className:"bwf-overview-table"},Object(n.createElement)("thead",null,Object(n.createElement)("tr",null,Object(n.createElement)("th",null,Object(c.__)("Form Field","wp-marketing-automations")),Object(n.createElement)("th",null,Object(c.__)("Contact Field","wp-marketing-automations")))),Object(n.createElement)("tbody",null,Object.keys($).map((function(e,t){var a=$[e],r=z.find((function(t){return t.index.toString()===e.toString()})),c=q.find((function(e){return e.id.toString()===a.toString()}));return Object(n.createElement)("tr",{key:t},Object(n.createElement)("td",null,Object(n.createElement)("div",{className:"bwf-c-field-label-wrapper"},!r&&Object(n.createElement)("span",{className:"bwf-mr-10"},Object(n.createElement)(j.a,{icon:"info",color:"#e15334"})),r&&r.header?r.header:e)),Object(n.createElement)("td",null,c&&c.name?c.name:a))})))))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Fields","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"flex-start",gap:"20px",padding:"12px 0"}},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-300 bwf-h-15"})))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)("table",{className:"bwf-overview-table"},Object(n.createElement)("tbody",null,D.data.hasOwnProperty("tags")&&!Object(d.isEmpty)(D.data.tags)&&Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Tags","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.tags.map((function(e,t){return Object(n.createElement)(p.a,{label:e.value,key:t})})))),D.data.hasOwnProperty("lists")&&!Object(d.isEmpty)(D.data.lists)&&Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Lists","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.lists.map((function(e,t){return Object(n.createElement)(p.a,{label:e.value,key:t})})))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Update Existing Contacts","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.hasOwnProperty("update_existing")&&D.data.update_existing?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Don't Update Blank Values","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.hasOwnProperty("update_blank")&&D.data.update_blank?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),Object(n.createElement)("tr",null,Object(n.createElement)("td",null,Object(c.__)("Trigger Automations","wp-marketing-automations")),Object(n.createElement)("td",null,D.data.hasOwnProperty("trigger_events")&&D.data.trigger_events?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))))))))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.Card,{className:"bwf-crm-form-feed-report-detail-wrap"},Object(n.createElement)(r.CardHeader,{className:"bwf-crm-form-feed-report-header"},Object(n.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Email Notification","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-display-flex bwf-form-status-header"},Object(m.Jb)()&&H&&Object(n.createElement)(b.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(f.a,{isClickable:!0,onInvoke:function(){x(!0),F("double_optin"),t()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,Object(c.__)("Edit","wp-marketing-automations"))))}}))),Object(n.createElement)(r.CardBody,null,Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Enabled","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},ne?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),!!ne&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Email","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},Object(n.createElement)(r.Button,{isSecondary:!0,className:"bwf-mr-5",onClick:E(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,re({content:"editor"===D.data.incentive_email.content[0].type?D.data.incentive_email.content[0].editor.body:D.data.incentive_email.content[0].body,type:D.data.incentive_email.content[0].type});case 3:case"end":return e.stop()}}),e)})))},Object(c.__)("View Details","wp-marketing-automations")),X&&Object(n.createElement)(s.a,{isOpen:X,isLoading:Y,onRequestClose:function(){return Z(!1)},subject:D.data.incentive_email.content[0].subject,preHeader:D.data.incentive_email.content[0].preheader,body:Q,type:D.data.incentive_email.content[0].type,sourceType:2,mode:1,utm:D.data.incentive_email.content[0].utmEnabled?D.data.incentive_email.content[0].utm:{}}))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Don't Send Email to Subscribed Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.data.not_send_to_subscribed?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Confirmation Redirect URL","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},!!D.data.redirect_url&&D.data.redirect_url)),D.data.hasOwnProperty("add_tag_enable")&&D.data.add_tag_enable&&D.data.hasOwnProperty("tag_to_add")&&!Object(d.isEmpty)(D.data.tag_to_add)&&Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Confirmation Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.data.tag_to_add.map((function(e){return Object(n.createElement)(p.a,{key:e.id,label:e.value,id:e.id,screenReaderLabel:e.value})}))))),Object(n.createElement)("div",{className:"bwf-form-feed-list"},Object(n.createElement)("div",{className:"bwf-form-feed-list-label"},Object(c.__)("Auto-Confirm Contacts","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-form-feed-list-value"},D.data.marketing_status?Object(c.__)("Yes","wp-marketing-automations"):Object(c.__)("No","wp-marketing-automations")))))))}}}]);