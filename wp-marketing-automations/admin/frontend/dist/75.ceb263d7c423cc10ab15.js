(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1304:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(985),c=n(49),o=n(4),i=n(1),s=n(303),u=n(66),l=n(5),m=n(8),b=n(31),d=n(3),O=n(182),f=n(14),p=n(9),j=n.n(p),g=n(16);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t,n,a,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}var h=function(e){var t=Object(f.i)(),n=e.filter,r=e.config,c=e.audienceDetail,s=e.modalData,u=e.setModal,l=e.setOpen,b=e.reloadList,O=e.title,p=void 0===O?"":O,w=e.desc,y=e.setError,h=e.setOpenProModal,v=Object(a.useContext)(o.h),E=function(){var e,a=(e=regeneratorRuntime.mark((function e(){var a,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(o.Jb)()){e.next=3;break}return h(!0),e.abrupt("return");case 3:if(y(!1),""!==p){e.next=7;break}return y(Object(i.__)("Name is required","wp-marketing-automations")),e.abrupt("return");case 7:if(a=Object(f.j)(n,t,r.filters),!Object(d.isEmpty)(a)){e.next=12;break}y(Object(i.__)("Please fill the filter","wp-marketing-automations")),e.next=23;break;case 12:return u({loading:!0}),m=c?Object(o.u)("/audience/".concat(c.ID)):Object(o.u)("/audience"),e.prev=14,e.next=17,j()({path:m,method:"POST",data:{name:p,data:{desc:w||"",filters:a}}}).then((function(e){if(200!==e.code)throw Error(Object(o.p)(null==e?void 0:e.message));v(e.message),Object(o.wb)(v,3e3),b(),u({loading:!1,success:!1,error:!1,message:""}),l(!1)})).catch((function(e){throw Error(Object(o.p)(null==e?void 0:e.message))}));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(14),y(e.t0.message),u(_(_({},s),{},{loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[14,19]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){k(c,a,r,o,i,"next",e)}function i(e){k(c,a,r,o,i,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(a.createElement)(g.a,{isPrimary:!0,onClick:function(){return E()},disabled:s.loading,isBusy:s.loading},Object(a.createElement)("span",{className:"bwf-display-flex"},!Object(o.Jb)()&&Object(a.createElement)(m.a,{icon:"king",size:16,color:"#fff"}),c?Object(i.__)("Save","wp-marketing-automations"):Object(i.__)("Add","wp-marketing-automations")))},v=n(971),E=n(1038),C=n(1039),x=n(315),S=n(39);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){Object(o.k)(Object(i.__)("Audiences","wp-marketing-automations"));var e=Object(v.a)(),t=Object(f.i)(),n=A(Object(a.useState)(!1),2),p=n[0],j=n[1],g=A(Object(a.useState)({loading:!1,status:!1}),2),w=g[0],_=g[1],y=A(Object(a.useState)({loading:!1,error:!1,success:!1,message:""}),2),k=y[0],N=y[1],P=A(Object(a.useState)(!1),2),D=P[0],M=P[1],T=Object(E.a)().fetch,J=Object(C.a)(),L=J.getOffset,B=(0,J.getPerPageCount)(),F=L(),R=t.s,U=function(){Object(o.Jb)()&&(T(B,F,R||""),M(!1))},q=A(Object(a.useState)(!1),2),I=q[0],z=q[1],G=A(Object(a.useState)(""),2),$=G[0],H=G[1],K=A(Object(a.useState)(!1),2),Q=K[0],V=K[1],W=A(Object(a.useState)(""),2),X=W[0],Y=W[1],Z=A(Object(a.useState)(!1),2),ee=Z[0],te=Z[1],ne=[{type:"heading",data:{title:Object(i.__)("Create Audiences & Send Personalised Messaging","wp-marketing-automations"),desc:Object(i.__)("Get started Segment your contacts based on various filters and send them targeted campaigns","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(o.o)()+"audience/audience1.png",title:Object(i.__)("Create dynamic audiences","wp-marketing-automations"),desc:Object(i.__)("Pick from over 60+ conditions to create audiences that auto-update based on activity","wp-marketing-automations")},{img:Object(o.o)()+"audience/audience2.png",title:Object(i.__)("Send targeted campaigns","wp-marketing-automations"),desc:Object(i.__)("Use dynamic audiences and reach them with targeted campaigns","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(i.__)("Create Audiences","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(o.Jb)()?(V(!0),H(""),z(!1),Y("")):j(!0)}}]}},{type:"link-wth-text",data:{text:Object(i.__)("Curious about audiences?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/audiences/",linkText:Object(i.__)("Learn More","wp-marketing-automations")}}],ae=Object(a.createElement)(l.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){Object(o.Jb)()?(V(!0),H(""),z(!1),Y("")):j(!0)}},!Object(o.Jb)()&&Object(a.createElement)(m.a,{icon:"king",size:"16",color:"#fff"}),Object(i.__)("Create Audience","wp-marketing-automations"));Object(x.a)("manage_audiences","",Object(i.__)("ALL AUDIENCE","wp-marketing-automations"),ae);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(c.a,null),0!==o.n?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.b,{setModelData:_,setDescription:Y,setTitle:H,setAudienceData:z,setOpen:V,setPreview:j,contactCountLoad:D,setContactCountLoad:M,menuButtons:ae,pitchData:ne}),Object(a.createElement)(u.a,{deleteEntityName:w.deleteEntityName,confirmButtonText:w.buttonConfirm,cancelButtonText:w.buttonCancel,onConfirm:w.onConfirm,isLoading:w.loading,successMessage:w.success,errorMessage:w.error,onRequestClose:function(){return _({status:!1})},isOpen:w.status,modalTitle:Object(i.__)("Delete Audience","wp-marketing-automations"),isDelete:!0})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(i.__)("Audiences","wp-marketing-automations")),!Object(o.Jb)()&&o.e)),Object(a.createElement)(s.a,{data:ne})),!Object(o.Jb)()&&Object(a.createElement)(S.b,{isOpen:p,onRequestClose:function(){return j(!1)},modalContent:{isFeature:!0,featureTitle:Object(i.__)("Audiences","wp-marketing-automations"),proLink:Object(o.T)("upgrade",{utm_medium:"Audiences+Upgrade+Modal"}),image:Object(o.db)("audience.png"),benefit:Object(i.__)("Unlock Audiences and other awesome features.","wp-marketing-automations")}}),Q&&Object(a.createElement)(l.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-audience-modal-update"},Object(a.createElement)("div",{className:"bwf-modal-header bwf-display-flex bwf-space-between"},Object(a.createElement)("div",{className:"bwf-modal-heading"},I?Object(i.__)("Edit Audience","wp-marketing-automations"):Object(i.__)("Add Audience","wp-marketing-automations")),Object(a.createElement)("span",{onClick:function(){return V(!1)},className:"bwf-modal-close bwf-cursor-pointer"},Object(a.createElement)(m.a,{icon:"close",color:"#353030"}))),Object(a.createElement)("div",{className:"bwf-audience-modal-content"},Object(a.createElement)("div",{className:"bwf-audience-content-wrap"},Object(a.createElement)("div",{className:"bwf_clear_30"}),ee&&Object(a.createElement)(b.a,{status:"error",onRemove:function(){return te(!1)}},ee),Object(a.createElement)(l.TextControl,{type:"text",value:$,autoFocus:!0,placeholder:Object(i.__)("Enter Name","wp-marketing-automations"),label:Object(i.__)("Name","wp-marketing-automations"),onChange:function(e){H(e),Object(d.isEmpty)(e)?te(Object(i.__)("Name is required","wp-marketing-automations")):te(!1)},disabled:k&&k.loading}),Object(a.createElement)(l.TextareaControl,{placeholder:Object(i.__)("Enter description","wp-marketing-automations"),label:Object(i.__)("Description","wp-marketing-automations"),value:X,onChange:function(e){return Y(e)},disabled:k&&k.loading}),Object(a.createElement)("div",{className:"bwf-normal-text bwf-n-b"},Object(i.__)("Filters","wp-marketing-automations")),Object(a.createElement)(O.a,{siteLocale:"en-US",currency:Object(o.Tb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(i.__)("Select Rules","wp-marketing-automations"),filters:e,enableGrouping:!0,hideAdvanceControl:!0,footerComponent:function(e){return Object(a.createElement)("div",{style:{marginBottom:"-24px"},className:"bwf-display-flex"},Object(a.createElement)(l.Button,{className:"bwf-cancel-btn",onClick:function(){return V(!1)}},Object(i.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(h,{filter:e.data,config:e.config,audienceDetail:I,setModal:N,modalData:k,setOpen:V,title:$,desc:X,error:ee,setError:te,reloadList:U,setOpenProModal:j}))}},disabled:k&&k.loading,path:"/manage/audience",query:I?I.data.filters:{}})))))}}}]);