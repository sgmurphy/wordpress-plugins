(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1033:function(e,t,a){"use strict";var n=a(0),r=a(6),c=a.n(r),o=a(3),i=a(63),s=a(1),l=a(9),m=a.n(l),u=a(8),b=(a(1034),a(4)),p=a(20);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.a=function(e){var t=e.header,a=void 0===t?Object(s.__)("View Analytics","wp-marketing-automations"):t,r=e.icon,l=void 0===r?"analytic":r,f=e.automationId,O=e.analyticsId,v=e.mode,w=void 0===v?"":v,y=e.extraData,g=void 0===y?{}:y,_=j(Object(n.useState)(!0),2),h=_[0],E=_[1],k=j(Object(n.useState)(!1),2),N=k[0],S=k[1],A=j(Object(n.useState)({}),2),P=A[0],I=A[1],C=function(){parseInt(O)>0&&Object(b.Jb)()?(E(!0),I({}),function(){try{var e=d(d({},g),{},{mode:w});m()({path:Object(b.u)("/automation/".concat(f,"/analytics/").concat(O,"?").concat(Object(p.stringify)(e))),method:"GET"}).then((function(e){200===e.code?Object(o.isEmpty)(e.result)||I(e.result):S(!0),E(!1)}))}catch(e){S(!0),E(!1)}}()):E(!1)},D=function(){var e,t=P.tile,a=void 0===t?[]:t;return N?Object(n.createElement)(n.Fragment,null,Object(s.__)("Error while fetching the Analytics.","wp-marketing-automations")):Object(b.Jb)()?Object(n.createElement)(n.Fragment,null,Object(o.isEmpty)(a)?Object(n.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("No analytics found.","wp-marketing-automations")):Object(n.createElement)("div",{className:"bwf-info-brick"},a.map((function(e,t){var a=e.label,r=void 0===a?"":a,c=e.value,o=void 0===c?"-":c;if(""!==r)return Object(n.createElement)("div",{className:"bwf-info-item",key:t},Object(n.createElement)("span",{className:"bwf-node-content-type"},r),Object(n.createElement)("span",{className:"bwf-node-content-label"},o))})))):(e=[{label:Object(s.__)("Sent","wp-marketing-automations")},{label:Object(s.__)("Open Rate","wp-marketing-automations")}],"email"===w&&e.push({label:Object(s.__)("Click Rate","wp-marketing-automations")},{label:Object(s.__)("Click to Open Rate","wp-marketing-automations")}),e.push({label:Object(s.__)("Revenue","wp-marketing-automations")},{label:Object(s.__)("Revenue/Contact","wp-marketing-automations")},{label:Object(s.__)("Unsubscribe Rate","wp-marketing-automations")}),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-info-brick"},e.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-info-item",key:t},Object(n.createElement)("span",{className:"bwf-node-content-type"},e.label),Object(n.createElement)("span",{className:"bwf-node-content-label"},"-"))}))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("Email Analytics is a PRO feature.","wp-marketing-automations")+" ",Object(n.createElement)("a",{target:"__blank",className:"bwf-normal-a-t bwf-font-light",href:Object(b.T)("upgrade",{utm_medium:"Automation+Email+Analytics"})},Object(s.__)("Upgrade to PRO","wp-marketing-automations")))))};return Object(n.createElement)("div",{className:"bwf-info-popup"},Object(n.createElement)(i.a,{contentClassName:"bwf-info__popover",position:"top center",renderToggle:function(e){var t=e.onToggle,r=e.isOpen,o=c()("bwf-info__toggle bwf-cursor-pointer",{"is-opened":r});return Object(n.createElement)("div",{className:o,onClick:function(){t(),C()},"aria-expanded":r},Object(n.createElement)(u.a,{size:14,icon:l}),a)},renderContent:function(e){var t=e.onToggle;return Object(n.createElement)("div",{className:"bwf-info-popover-container"},Object(n.createElement)("div",{className:"bwf-info-popover-header"},Object(n.createElement)("div",{className:"bwf-info-header-text"},a,!Object(b.Jb)()&&b.e),Object(n.createElement)("span",{className:"bwf-info-close",onClick:t},Object(n.createElement)(u.a,{icon:"close",size:20}))),Object(n.createElement)("div",{className:"bwf-info-popover-body"},Object(n.createElement)("div",{className:"bwf-info-wrapper"},Object(n.createElement)("div",{className:"bwf-info--content"},h?Object(n.createElement)("div",{className:"bwf-info-brick"},[1,2,3,4,5,6].map((function(e){return Object(n.createElement)("div",{className:"bwf-info-item",key:e},Object(n.createElement)("span",{className:"bwf-node-content-type"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(n.createElement)("span",{className:"bwf-node-content-label"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})))}))):D()))))},focusOnMount:!0}))}},1034:function(e,t,a){},1266:function(e,t,a){},1267:function(e,t,a){},1268:function(e,t,a){},1269:function(e,t,a){},1326:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(949),c=a(4),o=a(9),i=a.n(o),s=a(74),l=a(121),m=a(323),u=a(35),b=a(14);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var O=function(e){var t=e.query,a=e.children;return Object(n.createElement)("div",{className:"bwf-crm-emails-report-filter"},a,Object(n.createElement)(m.a,{siteLocale:"en-US",path:"/",query:t,onDateSelect:function(e){var a=f(f({},t),e);delete a.compare,Object(b.k)(a,"/",{})},showDatePicker:!0,isoDateFormat:u.g,hideCompare:!0,dateQuery:function(e){e.compare="previous_year";var t=Object(u.e)(e),a=t.period,n=t.compare,r=t.before,c=t.after,o=Object(u.c)(e);return{period:a,compare:n,before:r,after:c,primaryDate:o.primary,secondaryDate:o.secondary}}(t),currency:Object(c.kb)()}))},j=a(49),v=a(1),w=a(954),y=a(313),g=function(e){var t=e.type,a=e.metrics,r=(0,Object(w.a)().getAnalyticsLoading)();return Object(n.createElement)("div",{className:"bwf-crm-emails-report-tiles"},Object(n.createElement)(y.a,{items:a(t),title:Object(v.__)("Overview","wp-marketing-automations"),isLoading:r,rowTileCount:function(){switch(t){case"email":return Object(c.Tb)()?5:3;case"sms":return Object(c.Tb)()?4:2;case"contact":return Object(c.Tb)()?4:3;default:return!1}}()}))},_=a(969),h=a(120),E=a(302),k=a(3),N=a(309),S=a(5),A=a(6),P=a.n(A);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var D=function(e){var t,a=e.query,r=e.type,c=e.metrics,o=a.chart?a.chart:function(){switch(r){case"contact":return"active_contacts";default:return"email_sents"}}(),i=I(Object(n.useState)(c(r)[0]),2),s=i[0],l=i[1],m=Object(w.a)(),p=m.getAnalyticsData,f=m.getAnalyticsLoading,d=m.getAnalyticsTileData,O=f(),j=p(),y=d(),g=Object(u.f)(a),_=Object(u.b)(((t=a).period&&""!==t.period||(t.period="month"),t.compare&&""!==t.compare||(t.compare="previous_year"),a));_.includes(g)||(g=_[_.length-1]),Object(n.useEffect)((function(){l(c(r)[0])}),[r]);return Object(n.createElement)(N.a,{isRequesting:O,data:function(e){switch(r){case"email":return function(e){var t=[];if(!Object(k.isEmpty)(j)){j.map((function(a){switch(e){case"email_sents":t.push({date:a.start_date,email_sents:{label:Object(v.__)("Email Sent","wp-marketing-automations"),value:parseInt(a.subtotals.email_sents)}});break;case"open_rate":t.push({date:a.start_date,email_open:{label:Object(v.__)("Opens","wp-marketing-automations"),value:parseInt(a.subtotals.email_open)}});break;case"click_rate":t.push({date:a.start_date,email_click:{label:Object(v.__)("Clicks","wp-marketing-automations"),value:parseInt(a.subtotals.email_click)}});break;case"total_orders":t.push({date:a.start_date,total_orders:{label:Object(v.__)("Total Orders","wp-marketing-automations"),value:parseInt(a.subtotals.total_orders)}});break;case"total_revenue":t.push({date:a.start_date,total_revenue:{label:Object(v.__)("Total Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.total_revenue)}})}}))}return t}(e);case"sms":return function(e){var t=[];if(!Object(k.isEmpty)(j)){j.map((function(a){switch(e){case"email_sents":t.push({date:a.start_date,email_sents:{label:Object(v.__)("SMS Sent","wp-marketing-automations"),value:parseInt(a.subtotals.email_sents)}});break;case"email_click":t.push({date:a.start_date,email_click:{label:Object(v.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(a.subtotals.email_click)}});break;case"total_orders":t.push({date:a.start_date,total_orders:{label:Object(v.__)("Total Orders","wp-marketing-automations"),value:parseInt(a.subtotals.total_orders)}});break;case"total_revenue":t.push({date:a.start_date,total_revenue:{label:Object(v.__)("Total Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.total_revenue)}})}}))}return t}(e);case"contact":return function(e){var t=[];if(!Object(k.isEmpty)(j)){j.map((function(a){switch(e){case"active_contacts":t.push({date:a.start_date,active_contacts:{label:Object(v.__)("Active Contacts","wp-marketing-automations"),value:parseInt(a.subtotals.active_contacts)}});break;case"complete_contacts":t.push({date:a.start_date,complete_contacts:{label:Object(v.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(a.subtotals.complete_contacts)}});break;case"unsubscribers":t.push({date:a.start_date,unsubscribers:{label:Object(v.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(a.subtotals.unsubscribers)}});break;case"revenue":t.push({date:a.start_date,revenue:{label:Object(v.__)("Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.revenue)}});break;case"conversions":t.push({date:a.start_date,conversions:{label:Object(v.__)("Orders","wp-marketing-automations"),value:parseInt(a.subtotals.conversions)}});break;case"aov":t.push({date:a.start_date,conversions:{label:Object(v.__)("AOV","wp-marketing-automations"),value:parseInt(a.subtotals.aov)}})}}))}return t}(e)}}(o),title:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:""},Object(v.__)("Performance","wp-marketing-automations"))),interval:g,layout:"item-comparison",legendTotals:"aov"==o?{conversions:y.hasOwnProperty("aov")?y.aov:0}:null,interactiveLegend:!0,chartType:"curve-line",chartMeta:s,tabs:c(r),hideTypeSelect:!0,customHeaderItem:Object(n.createElement)(n.Fragment,null,c(r)&&Object(k.isArray)(c(r))&&Object(n.createElement)("div",{className:"bwf-chart-tabs"},c(r).filter((function(e){return"convert_time"!==e.key})).map((function(e){return Object(n.createElement)(S.Button,{className:P()({"is-gray-light":s.key!==e.key,"is-secondary-light":s.key===e.key}),key:e.key,onClick:function(t){l(e),t.preventDefault(),delete a.compare,Object(b.k)({chart:e.key},"/",a)}},e.title)}))))})},F=a(119),x=a(20),T=a(50);function M(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Y=function(e){var t=e.query,a=e.automationId,r=t.period,o=t.interval,s=void 0===o?"day":o,l=t.after,m=t.before,b=Object(T.a)(Object(c.kb)()).formatAmount,p=L(Object(n.useState)([]),2),f=p[0],d=p[1],O=L(Object(n.useState)(!0),2),j=O[0],y=O[1],g=L(Object(n.useState)(25),2),_=g[0],h=g[1],E=L(Object(n.useState)(0),2),N=E[0],S=E[1],A=L(Object(n.useState)(0),2),P=A[0],I=A[1],C=parseInt(N)/parseInt(_)+1,D=Object(w.a)(),R=D.getAnalyticsTileData,Y=D.getAnalyticsLoading,H=R(),z=Y();Object(n.useEffect)((function(){if(!Object(c.Jb)()){var e=H.email_click,t=void 0===e?0:e,a=H.email_open,n=void 0===a?0:a,r=H.email_sents,o=void 0===r?0:r,i=H.total_orders,s=void 0===i?0:i,l=H.revenue,m=void 0===l?0:l;d([{click_count:t,click_rate:(t/o*100).toFixed(2),conversions:s,oid:"5",open_count:n,open_rate:(n/o*100).toFixed(2),revenue:m,sent:o,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),y(!1)}}),[z]);var q=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),Object(c.Jb)()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,i()({method:"GET",path:Object(c.u)("/analytics/emails/tabular/")+"?"+Object(x.stringify)({after:t,before:n,oid:a,type:1,interval:"day",limit:_,offset:N,mode:1})}).then((function(e){e.hasOwnProperty("result")&&d(e.result),e.hasOwnProperty("total_count")&&I(e.total_count),y(!1)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),y(!1);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){M(c,n,r,o,i,"next",e)}function i(e){M(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){if(Object(c.Jb)()){var e=((r=t).compare="previous_year",Object(u.c)(r).primary),a="",n="";e&&(Object(k.isEmpty)(e.after)||(a=e.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(e.before)||(n=e.before.format("YYYY-MM-DD 23:59:59")),Object(k.isEmpty)(a)||Object(k.isEmpty)(n)||q(a,n))}var r}),[r,s,l,m]);var J,U=[{key:"subject",label:Object(v.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(v.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(v.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(v.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(v.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(c.Tb)()?{key:"orders",label:Object(v.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(c.Tb)()?{key:"revenue",label:Object(v.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],V=function(e){e!==_&&h(e)};return Object(n.createElement)("div",{className:"bwf-table-with-border"},Object(n.createElement)(F.a,{title:Object(v.__)("Email","wp-marketing-automations"),rows:(J=[],Object(k.isEmpty)(f)||f.map((function(e){J.push([{display:e.subject?e.subject:"-",value:e.subject},{display:e.title?e.title:"-",value:e.title},{display:parseInt(e.sent)?parseInt(e.sent):"-",value:e.sent},{display:parseInt(e.open_rate)?parseFloat(e.open_rate).toFixed(1)+"%":"-",value:e.open_count},{display:parseInt(e.click_rate)?parseFloat(e.click_rate).toFixed(1)+"%":"-",value:e.click_count},Object(c.Tb)()?{display:parseInt(e.conversions)?parseInt(e.conversions):"-",value:e.conversions}:{},Object(c.Tb)()?{display:parseFloat(e.revenue)>0?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-green"},b(parseFloat(e.revenue))):"-",value:e.revenue}:{}])})),J),headers:U,query:{paged:C},rowsPerPage:_,totalRows:P,isLoading:j,onPageChange:function(e,t){S((e-1)*_)},onQueryChange:function(e){return"per_page"!==e?function(){}:V},showMenu:!1,rowHeader:!0,emptyMessage:Object(v.__)("No emails found","wp-marketing-automations")}))};function H(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var J=function(e){var t=e.query,a=e.automationId,r=t.period,o=t.interval,s=void 0===o?"day":o,l=t.after,m=t.before,b=Object(T.a)(Object(c.kb)()).formatAmount,p=z(Object(n.useState)([]),2),f=p[0],d=p[1],O=z(Object(n.useState)(!0),2),j=O[0],y=O[1],g=z(Object(n.useState)(25),2),_=g[0],h=g[1],E=z(Object(n.useState)(0),2),N=E[0],S=E[1],A=z(Object(n.useState)(0),2),P=A[0],I=A[1],C=parseInt(N)/parseInt(_)+1,D=Object(w.a)(),M=D.getAnalyticsTileData,L=D.getAnalyticsLoading,R=M(),Y=L();Object(n.useEffect)((function(){if(!Object(c.Jb)()){var e=R.email_click,t=void 0===e?0:e,a=R.email_open,n=void 0===a?0:a,r=R.email_sents,o=void 0===r?0:r,i=R.total_orders,s=void 0===i?0:i,l=R.revenue,m=void 0===l?0:l;d([{click_count:t,click_rate:(t/o*100).toFixed(2),conversions:s,oid:"5",open_count:n,open_rate:(n/o*100).toFixed(2),revenue:m,sent:o,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),y(!1)}}),[Y]);var q=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),Object(c.Jb)()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,i()({method:"GET",path:Object(c.u)("/analytics/emails/tabular/")+"?"+Object(x.stringify)({after:t,before:n,oid:a,type:1,interval:"day",limit:_,offset:N,mode:2})}).then((function(e){e.hasOwnProperty("result")&&d(e.result),e.hasOwnProperty("total_count")&&I(e.total_count),y(!1)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),y(!1);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){H(c,n,r,o,i,"next",e)}function i(e){H(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){if(Object(c.Jb)()){var e=((r=t).compare="previous_year",Object(u.c)(r).primary),a="",n="";e&&(Object(k.isEmpty)(e.after)||(a=e.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(e.before)||(n=e.before.format("YYYY-MM-DD 23:59:59")),Object(k.isEmpty)(a)||Object(k.isEmpty)(n)||q(a,n))}var r}),[r,s,l,m]);var J,U=[{key:"message",label:Object(v.__)("Message","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(v.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(v.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(v.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(c.Tb)()?{key:"orders",label:Object(v.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(c.Tb)()?{key:"revenue",label:Object(v.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],V=function(e){e!==_&&h(e)};return Object(n.createElement)("div",{className:"bwf-table-with-border"},Object(n.createElement)(F.a,{title:Object(v.__)("SMS","wp-marketing-automations"),hideHeader:"yes",rows:(J=[],Object(k.isEmpty)(f)||f.map((function(e){var t=parseFloat(e.click_rate)?" ( "+parseFloat(e.click_rate).toFixed(2)+"% ) ":"";J.push([{display:e.template?Object(n.createElement)("div",{className:"bwf-pre-line"},e.template):"-",value:""},{display:e.title?e.title:"-",value:e.title},{display:parseInt(e.sent)?parseInt(e.sent):"-",value:e.sent},{display:parseInt(e.click_count)?e.click_count+t:"-",value:e.click_count},Object(c.Tb)()?{display:parseInt(e.conversions)?parseInt(e.conversions):"-",value:e.conversions}:{},Object(c.Tb)()?{display:parseFloat(e.revenue)>0?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-green"},b(parseFloat(e.revenue))):"-",value:e.revenue}:{}])})),J),headers:U,query:{paged:C},rowsPerPage:_,totalRows:P,isLoading:j,onPageChange:function(e,t){S((e-1)*_)},onQueryChange:function(e){return"per_page"!==e?function(){}:V},showMenu:!1,rowHeader:!0,emptyMessage:Object(v.__)("No SMS found","wp-marketing-automations")}))},U=a(8),V=a(125),G=(a(1266),a(61)),W=a(945),$=a(1011),B=(a(1006),a(1008)),Q=function(e){var t=e.readables;return Object(n.createElement)("div",{className:"bwf-step-brick"},t.map((function(e,t){var a=e.map((function(e,t){return Object(k.isEmpty)(e)?Object(n.createElement)(n.Fragment,null):Object(n.createElement)("div",{key:t},0!==t&&Object(n.createElement)("div",{className:"bwf-step-divider"},Object(n.createElement)("span",{className:"bwf-divider"},"AND")),Object(n.createElement)("div",{className:"bwf-step-content-content bwf-two-line-ellipse-text"},e))}));return 0!==t?Object(k.isEmpty)(a)?Object(n.createElement)(n.Fragment,null):Object(n.createElement)("div",{key:t+"-or"},Object(n.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(n.createElement)("span",{className:"bwf-divider"},"OR")),a):a})))},Z=function(e){var t,a,r=e.data,o=void 0===r?{}:r,i=e.id,s=Object(n.useContext)(c.b),l=s.automationId,m=void 0===l?"":l,u=s.eventSlug,b=void 0===u?"":u,p=o.stats,f=Object(k.isEmpty)(b)?{}:Object(B.a)(b,parseInt(m)),d=f.isLoading,O=f.error,j=f.getReadableTexts,w=f.rules,y=(t=o.sidebarValues,a=[],Object(k.isEmpty)(t)?[]:(Object.keys(t).map((function(e){var n=t[e],r=[];!Object(k.isEmpty)(n)&&Object(k.isArray)(n)&&(n.map((function(e){w.hasOwnProperty(e.filter)&&r.push(e)})),Object(k.isEmpty)(r)||a.push(r))})),a)),g=d||O||Object(k.isEmpty)(b)?[]:j(y);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(W.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon"},Object(n.createElement)(U.a,{size:26,icon:"condition"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(v.__)("Step","wp-marketing-automations")+" "+i),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(v.__)("Condition","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Array.isArray(g)&&g.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)(Q,{readables:g}))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(v.__)("Completed","wp-marketing-automations")),Object(n.createElement)("span",{className:"bwf-node-status-count"},p.hasOwnProperty("completed")?Object(c.Wb)(parseInt(p.completed)):0)))):Object(n.createElement)(n.Fragment,null,d?Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(v.__)("Loading","wp-marketing-automations")))))):Object(n.createElement)("div",{className:"bwf-control-event-error"},Object(n.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(v.__)("Not Configured","wp-marketing-automations")))))),Object(n.createElement)(W.d,{type:"source",position:"bottom",isConnectable:!1}))},K=a(123),X=a(1033),ee=function(e){var t,a=e.data,r=void 0===a?{}:a,o=e.id,i=r.desc_text,s=void 0===i?"":i,l=r.integration,m=void 0===l?"-":l,u=r.selected,b=void 0===u?"-":u,p=r.action_slug,f=void 0===p?"":p,d=r.stats,O=void 0===d?{}:d,j=r.stepId,w=void 0===j?"":j,y=Object(n.useContext)(c.b),g=y.automationId,_=void 0===g?"":g,h=y.stepId,E=void 0===h?"":h,N=function(){return Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle "},Object(n.createElement)(X.a,{automationId:_,analyticsId:w,mode:"email",extraData:{split:E}}))},S=function(){return Object(n.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(n.createElement)(X.a,{automationId:_,analyticsId:w,mode:"sms",extraData:{split:E}}))};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(W.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-action"},Object(n.createElement)(U.a,{size:22,icon:"charge"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(v.__)("Step","wp-marketing-automations")+" "+o),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(v.__)("Action","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},!Object(k.isEmpty)(r)&&r.hasOwnProperty("selected")&&(t=Object(n.createElement)(n.Fragment,null),"wp_sendemail"===f?t=N():"twilio_send_sms"===f&&(t=S()),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-content-type"},m),Object(n.createElement)("div",{className:"bwf-node-content-label"},b),""!==s&&!Object(k.isNull)(s)&&Object(n.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(k.isArray)(s)?"":" bwf-two-line-ellipse-text")},function(e){if(Object(k.isEmpty)(e))return Object(n.createElement)(n.Fragment,null);if(Object(k.isArray)(e)){var t="",a=[];return e.map((function(e){Object(k.isEmpty)(t)&&(t=e),a.push(Object(n.createElement)("span",{key:e},e))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-table-v-center"},Object(n.createElement)("span",null,!Object(k.isEmpty)(t)&&t),!Object(k.isEmpty)(a)&&a.length>1&&Object(n.createElement)("div",{className:"bwf-display-inline",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(n.createElement)(K.a,{items:a}))))}return e}(s)),t)))))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(v.__)("Completed","wp-marketing-automations")),Object(n.createElement)("span",{className:"bwf-node-status-count"},O.hasOwnProperty("completed")?Object(c.Wb)(parseInt(O.completed)):0))))),Object(n.createElement)(W.d,{type:"source",isConnectable:!1,position:"bottom"}))},te=a(78),ae=a(10),ne=a.n(ae),re={1:Object(v.__)("Delay for a specific period","wp-marketing-automations"),2:Object(v.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(v.__)("Delay until a custom field date","wp-marketing-automations"),4:Object(v.__)("Delay with variable","wp-marketing-automations")},ce={1:Object(v.__)("Sun","wp-marketing-automations"),2:Object(v.__)("Mon","wp-marketing-automations"),3:Object(v.__)("Tue","wp-marketing-automations"),4:Object(v.__)("Wed","wp-marketing-automations"),5:Object(v.__)("Thu","wp-marketing-automations"),6:Object(v.__)("Fri","wp-marketing-automations"),7:Object(v.__)("Sat","wp-marketing-automations")},oe=function(e){var t=e.data,a=e.id,r=t.stats,o=void 0===r?{}:r,i=t.sidebarValues,s=void 0===i?{}:i,l=s.type,m=void 0===l?0:l,u=s.data,b=void 0===u?{}:u,p=function(){switch(parseInt(m)){case 1:var e=b.day_delay,t=void 0===e?{}:e,a=b.enable_time_delay,r=void 0!==a&&a,c=b.enable_week_delay,o=void 0!==c&&c,i=b.time_delay,s=void 0===i?{time:""}:i,l=b.week_delay,u=void 0===l?[]:l;if(!Object(k.isEmpty)(t)){var p=t.text+" "+function(e,t){switch(e){case"min":return parseInt(t)>1?Object(v.__)("Minutes","wp-marketing-automations"):Object(v.__)("Minute","wp-marketing-automations");case"hours":return parseInt(t)>1?Object(v.__)("Hours","wp-marketing-automations"):Object(v.__)("Hour","wp-marketing-automations");case"days":return parseInt(t)>1?Object(v.__)("Days","wp-marketing-automations"):Object(v.__)("Day","wp-marketing-automations");case"weeks":return parseInt(t)>1?Object(v.__)("Weeks","wp-marketing-automations"):Object(v.__)("Week","wp-marketing-automations");case"months":return parseInt(t)>1?Object(v.__)("Months","wp-marketing-automations"):Object(v.__)("Month","wp-marketing-automations");default:return""}}(t.unit,t.text),f=[];return o&&!Object(k.isEmpty)(u)&&u.map((function(e){ce.hasOwnProperty(e)&&f.push(ce[e])})),r&&s.hasOwnProperty("time")&&!Object(k.isEmpty)(s.time)?(p+=" "+Object(v.__)("till","wp-marketing-automations")+" "+Object(te.format)(bwfcrm_contacts_data.time_format,ne()(s.time,"HH:mm:ss")),Object(k.isEmpty)(f)||(p+=" "+f.join("/")),s.hasOwnProperty("in_contact_timezone")&&s.in_contact_timezone&&(p+=" "+Object(v.__)("in Contact's Timezone","wp-marketing-automations"))):Object(k.isEmpty)(f)||(p+=" "+f.join("/")),p+"."}break;case 2:var d=b.date,O=void 0===d?"":d,j=b.time_delay,w=void 0===j?{time:"",in_contact_timezone:!1}:j,y=b.enable_step_skip,g=void 0!==y&&y,_=b.skip_to_step,h=void 0===_?{step:"",name:""}:_;if(!Object(k.isEmpty)(O)&&!Object(k.isEmpty)(w.time)){var E="",N="";return w.hasOwnProperty("in_contact_timezone")&&w.in_contact_timezone?E+=" "+Object(v.__)("in Contact's Timezone.","wp-marketing-automations"):E+=".",g&&!Object(k.isEmpty)(h)&&h.hasOwnProperty("step")&&""!=h.step&&h.hasOwnProperty("name")&&""!=h.name&&(N=" ".concat(Object(v.__)("Jump to","wp-marketing-automations")," ").concat(h.name,".")),Object(v.__)("Delay till","wp-marketing-automations")+" "+Object(te.format)(bwfcrm_contacts_data.date_format,ne()(O))+" at "+Object(te.format)(bwfcrm_contacts_data.time_format,ne()(w.time,"HH:mm:ss"))+" "+E+N}break;case 3:var S=b.custom_field,A=b.enable_time_delay,P=void 0!==A&&A,I=b.time_delay,C=b.enable_step_skip,D=void 0!==C&&C,F=b.skip_to_step;if(S.hasOwnProperty("field")&&""!==S.field){var x=Object(v.__)("Delay","wp-marketing-automations");return P?I.hasOwnProperty("duration")&&(x+=" ".concat(Object(v.__)("of","wp-marketing-automations")," ").concat(I.duration," ").concat(I.type," ").concat(I.timing," ")):x+=" "+Object(v.__)("till","wp-marketing-automations"),S.hasOwnProperty("custom_field_label")&&""!==S.custom_field_label?x+=" ".concat(Object(v.__)("Contacts","wp-marketing-automations")," '").concat(S.custom_field_label,"' ").concat(Object(v.__)("field value","wp-marketing-automations")):x+=" ".concat(Object(v.__)("Contacts","wp-marketing-automations")," ( ").concat(S.field," ) ").concat(Object(v.__)("field value","wp-marketing-automations")),S.hasOwnProperty("time")&&""!==S.time&&(x+=" till ".concat(Object(te.format)(bwfcrm_contacts_data.time_format,ne()(S.time,"HH:mm:ss")))),S.hasOwnProperty("in_contact_timezone")&&S.in_contact_timezone?x+=" ".concat(Object(v.__)("in Contact's Timezone","wp-marketing-automations"),"."):x+=".",D&&!Object(k.isEmpty)(F)&&F.hasOwnProperty("step")&&""!=F.step&&F.hasOwnProperty("name")&&""!=F.name&&(x+=" ".concat(Object(v.__)("Jump to","wp-marketing-automations")," ").concat(F.name,".")),x}break;case 4:var T=b.variable_field,M=b.enable_time_delay,L=void 0!==M&&M,R=b.time_delay,Y=b.enable_step_skip,H=void 0!==Y&&Y,z=b.skip_to_step;if(T.hasOwnProperty("variable")&&""!==T.variable){var q=Object(v.__)("Delay","wp-marketing-automations");return L?R.hasOwnProperty("duration")&&(q+=" of ".concat(R.duration," ").concat(R.type," ").concat(R.timing," ")):q+=" "+Object(v.__)("till","wp-marketing-automations"),T.hasOwnProperty("variable")&&""!==T.variable&&(q+=" ".concat(Object(v.__)("Orders meta key","wp-marketing-automations")," ").concat(T.variable," ").concat(Object(v.__)("value","wp-marketing-automations"))),T.hasOwnProperty("time")&&""!==T.time&&(q+=" ".concat(Object(v.__)("till","wp-marketing-automations")," ").concat(Object(te.format)(bwfcrm_contacts_data.time_format,ne()(T.time,"HH:mm:ss")))),T.hasOwnProperty("in_contact_timezone")&&T.in_contact_timezone?q+=" ".concat(Object(v.__)("in Contact's Timezone","wp-marketing-automations"),"."):q+=".",H&&!Object(k.isEmpty)(z)&&z.hasOwnProperty("step")&&""!=z.step&&z.hasOwnProperty("name")&&""!=z.name&&(q+=" ".concat(Object(v.__)("Jump to","wp-marketing-automations")," ").concat(z.name,".")),q}break;default:return Object(n.createElement)(n.Fragment,null)}return Object(n.createElement)(n.Fragment,null)};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(W.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(n.createElement)(U.a,{size:28,icon:"time-left"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(v.__)("Step","wp-marketing-automations")+" "+a),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(v.__)("Delay","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick"},Object(n.createElement)("div",{className:"bwf-step-content-content"},re.hasOwnProperty(m)&&Object(n.createElement)("div",{className:"bwf-node-content-type"},re[m]),Object(n.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text",title:p()},p()))))),Object(n.createElement)("div",{className:"bwf-node-status"},Object(n.createElement)("div",{className:"bwf-queued-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(v.__)("Queued","wp-marketing-automations")),Object(n.createElement)("span",{className:"bwf-node-status-count"},o.hasOwnProperty("queued")?Object(c.Wb)(parseInt(o.queued)):0)),Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(v.__)("Completed","wp-marketing-automations")),Object(n.createElement)("span",{className:"bwf-node-status-count"},o.hasOwnProperty("completed")?Object(c.Wb)(parseInt(o.completed)):0))))),Object(n.createElement)(W.d,{type:"source",position:"bottom",isConnectable:!1}))},ie=function(e){return Object(n.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(n.createElement)(W.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(n.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?Object(v.__)("No","wp-marketing-automations"):Object(v.__)("Yes","wp-marketing-automations")),Object(n.createElement)(W.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},se=function(e){var t=e.id,a=e.data,r=void 0===a?{}:a,o=r.stats,i=void 0===o?{}:o,s=r.desc_text,l=void 0===s?"":s,m=r.desc,u=void 0===m?"":m;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)("div",{className:"bwf-inner-wrapper "},Object(n.createElement)("div",{className:"bwf-node-brick"},Object(n.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(n.createElement)(U.a,{size:26,icon:"split-test"})),Object(n.createElement)("div",{className:"bwf-node-inner-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},Object(v.__)("Step","wp-marketing-automations")+" "+t),Object(n.createElement)("div",{className:"bwf-node-content-label"},Object(v.__)("Split Path","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-node-action"})),Object(n.createElement)("div",{className:"bwf-node-step-content"},Object(n.createElement)("div",{className:"bwf-step-content"},Object(n.createElement)("div",{className:"bwf-step-brick bwf-split-wrap"},Object(n.createElement)("div",{className:"bwf-step-content-content"},Object(n.createElement)("div",{className:"bwf-node-content-type"},""!==l?l:"-"),""!==u&&Object(n.createElement)("div",{className:"bwf-node-content-label bwf-node-desc bwf-two-line-ellipse-text"},u))))),Object(n.createElement)("div",{className:"bwf-node-status bwf-node-mt-10"},Object(n.createElement)("div",{className:"bwf-status-wrap"},Object(n.createElement)("span",{className:"bwf-node-status-label"},Object(v.__)("Completed","wp-marketing-automations")),Object(n.createElement)("span",{className:"bwf-node-status-count"},i.hasOwnProperty("completed")?Object(c.Wb)(parseInt(i.completed)):0))))),Object(n.createElement)(W.d,{type:"source",position:"bottom",isConnectable:!1}))},le=function(e){var t=e.data,a=void 0===t?{}:t,r=Object(c.kc)(),o=a.path,i=void 0===o?"1":o;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-splitpath-node-wrapper"},Object(n.createElement)(W.d,{type:"target",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-split-node split-path-"+i},Object(v.__)("Path","wp-marketing-automations")+" "+r[i])),Object(n.createElement)(W.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},me=function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-node-wrapper"},Object(n.createElement)(W.d,{type:"source",position:"top",isConnectable:!1}),Object(n.createElement)("div",{className:"bwf-node-content bwf-end"},Object(n.createElement)("div",{className:"bwf-node-content-item"},Object(v.__)("End","wp-marketing-automations")))))},ue=(a(1267),a(1005),a(31));function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var fe=function(e){var t=e.stepTitle,a=void 0===t?"":t,r=e.onClose,o=e.stepId,s=e.automationId,l=e.eventSlug,m=be(Object(n.useState)(!0),2),u=m[0],b=m[1],p=be(Object(n.useState)(!1),2),f=p[0],d=p[1],O=be(Object(n.useState)([]),2),j=O[0],w=O[1],y=Object(W.l)(),g=Object(W.n)().setCenter;Object(n.useEffect)((function(){!function(){try{i()({path:Object(c.u)("/automation/".concat(s,"/split/").concat(o,"/preview")),method:"GET"}).then((function(e){b(!1),200===e.code?Object(k.isEmpty)(e.result)||w(e.result):d(!0)}))}catch(e){d(!0),b(!1)}}()}),[o]);var _=Object(n.useRef)(),h={end:me,wait:oe,split:se,action:ee,yesNoNode:ie,splitpath:le,conditional:Z};Object(n.useEffect)((function(){Object(k.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(_.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect())}),[u]),Object(n.useEffect)((function(){var e=0,t=0,a=y.getState().nodes;if(a.length&&_.current&&!u){var n=a[0];n.hasOwnProperty("__rf")?(e=n.__rf.position.x+140,t=n.__rf.position.y):(e=n.position.x+140,t=n.position.y),t=parseFloat(t)+.4*parseFloat(_.current.height),g(e,t,.8)}}),[u,j,_.current]);return Object(n.createElement)(S.Modal,{title:Object(v.sprintf)(Object(v.__)("Preview - %s ","wp-marketing-automations"),a),onRequestClose:function(){return r(!0)},className:"bwf-admin-modal bwf-admin-modal-xxxl bwf-split-path-analytics-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(n.createElement)(c.b.Provider,{value:{automationId:s,eventSlug:l,stepId:o}},Object(n.createElement)("div",{className:"bwf-single-automation-wrap",id:"bwf-single-automation-wrap"},u?Object(n.createElement)(G.a,null):Object(n.createElement)(n.Fragment,null,f?Object(n.createElement)(ue.a,{status:"error"},Object(v.__)("Unable to fetch split path preview","wp-marketing-automations")):Object(n.createElement)(W.f,{defaultZoom:.9,minZoom:.5,maxZoom:3,nodeTypes:h,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:Object($.a)(j,!0)},Object(n.createElement)(W.a,{color:"#fff"}),Object(n.createElement)(W.c,{showInteractive:!1}))))))},de=(a(1268),function(e){var t=e.fill,a=e.height,r=void 0===a?16:a;return Object(n.createElement)("span",{className:"bwf-ripple-wrap",style:{height:"".concat(r,"px")}},Object(n.createElement)("span",{className:P()("dot",{transition:"#09B29C"===t,"bwf-mr-16":void 0!==t}),style:{"--ripple-var":t}}))});function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function je(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){if(e){if("string"==typeof e)return ge(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _e=function(e){var t=e.automationId,a=we(Object(n.useState)(!0),2),o=a[0],s=a[1],l=we(Object(n.useState)({}),2),m=l[0],u=l[1],b=we(Object(n.useState)({}),2),p=b[0],f=b[1],d=we(Object(n.useState)(""),2),O=d[0],j=d[1],w=we(Object(n.useState)(""),2),y=w[0],g=w[1];Object(n.useEffect)((function(){C()}),[]);var _=Object(c.kc)(),N=Object(h.a)().getAutomationData,S=Object(E.a)().setAutomationData,A=N().title,P=void 0===A?"":A;Object(r.a)("analytics",""!==P&&""===O?P:O,!0,!1,null,t,!1,!0);var I,C=function(){var e,a=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i()({path:Object(c.u)("/automation/".concat(t,"/split-stats")),method:"GET"}).then((function(e){if(200===e.code){if(e.hasOwnProperty("result")&&!Object(k.isEmpty)(e.result)&&e.result.hasOwnProperty("data")&&!Object(k.isEmpty)(e.result.data)&&u(e.result.data),e.hasOwnProperty("result")&&!Object(k.isEmpty)(e.result)&&e.result.hasOwnProperty("automation_data")&&!Object(k.isEmpty)(e.result.automation_data)){var t=e.result.automation_data,a=t.title,n=void 0===a?"":a,r=t.event,c=void 0===r?"":r;""!==n&&j(n),""!==c&&g(c),S("data",e.result.automation_data)}s(!1)}}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),s(!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){ve(c,n,r,o,i,"next",e)}function i(e){ve(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}(),D=Object(n.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(n.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(n.createElement)("div",{className:"bwf-split-analytics-header-title"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-split-analytics-header-date"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-split-analytics-header-tag bwf-split-ongoing"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-10"}))),Object(n.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(n.createElement)("div",{className:"bwf-split-analytics-header-preview"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))),F=Object(n.createElement)("div",{className:"bwf-split-analytics-item"},Object(n.createElement)("div",{className:"bwf-split-description"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},[1,2].map((function(e){return Object(n.createElement)("div",{className:"bwf-split-analytics-path-item",key:e},Object(n.createElement)("div",{className:"bwf-split-analytics-path-header"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-split-analytics-path-content"},je(Array(8)).map((function(e,t){return Object(n.createElement)("div",{className:"bwf-split-test-path-content-stat",key:t},Object(n.createElement)("span",{className:"bwf-split-test-path-content-value"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-30 bwf-h-15"})),Object(n.createElement)("span",{className:"bwf-split-test-path-content-label"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))}))))})))),x=function(e){var t=e.path,a=void 0===t?[]:t,r=e.desc,c=void 0===r?"":r;return Object(k.isEmpty)(a)?Object(n.createElement)("div",{className:"bwf-split-analytics-item"},""!==c&&Object(n.createElement)("div",{className:"bwf-split-description"},Object(n.createElement)("span",{className:"bwf-split-desc-heading"},Object(v.__)("Description","wp-marketing-automations")),":",Object(n.createElement)("span",{className:"bwf-split-desc-text"},c)),Object(n.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},Object(n.createElement)("div",{className:"bwf-mb-10"},Object(v.__)("No paths found","wp-marketing-automations")))):Object(n.createElement)("div",{className:"bwf-split-analytics-item"},""!==c&&Object(n.createElement)("div",{className:"bwf-split-description"},Object(n.createElement)("span",{className:"bwf-split-desc-heading"},Object(v.__)("Description","wp-marketing-automations")),":",Object(n.createElement)("span",{className:"bwf-split-desc-text"},c)),Object(n.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},a.map((function(e,t){var a=e.tile,r=void 0===a?[]:a,c=e.path,o=void 0===c?"":c,i=e.winner,s=void 0!==i&&i;return Object(n.createElement)("div",{className:"bwf-split-analytics-path-item",key:t},Object(n.createElement)("div",{className:"bwf-split-analytics-path-header splitpath-"+o},Object(n.createElement)("span",{className:"bwf-split-path-title"},Object(v.__)("Path","wp-marketing-automations")+" "+_[o]),s&&Object(n.createElement)(U.a,{icon:"winner"})),Object(n.createElement)("div",{className:"bwf-split-analytics-path-content"},r.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-split-test-path-content-stat",key:t},Object(n.createElement)("span",{className:"bwf-split-test-path-content-value"},e.v),Object(n.createElement)("span",{className:"bwf-split-test-path-content-label"},e.l))}))))}))))},T=function(e){var a=e.started,r=void 0===a?"":a,o=e.status,i=void 0===o?"":o,s=e.title,l=void 0===s?"":s,m=e.completed,u=void 0===m?"":m,b=e.step_id,p=void 0===b?"":b;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(n.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(n.createElement)("div",{className:"bwf-split-analytics-header-title"},""!==l?l:"-"),Object(n.createElement)("div",{className:"bwf-split-analytics-header-date"},""!==r?Object(n.createElement)(n.Fragment,null,Object(v.__)("Started on","wp-marketing-automations")," ",Object(c.W)(r),"completed"===i&&""!==u&&Object(n.createElement)(n.Fragment,null," | ",Object(v.__)(" Ended On","wp-marketing-automations")," ",Object(c.W)(u))):Object(n.createElement)(n.Fragment,null)),""!==i&&Object(n.createElement)("div",{className:"bwf-split-analytics-header-tag"},"ongoing"===i&&Object(n.createElement)(de,{fill:"#09B29C"}),Object(n.createElement)("span",null,i))),Object(n.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(n.createElement)("div",{className:"bwf-split-analytics-header-preview components-form-toggle__input",onClick:function(e){e.stopPropagation(),f({stepTitle:""!==l?l:"",stepId:p,automationId:t})}},Object(n.createElement)(U.a,{icon:"view",size:15}),Object(v.__)("Preview","wp-marketing-automations")))))},M=Object(n.createElement)("div",{className:"bwf-split-analytics-zero-state"},Object(n.createElement)(U.a,{icon:"split-analytics-zero"}),Object(n.createElement)("div",{className:"bwf-heading"},Object(v.__)("No Split Path Created","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-desc"},Object(v.__)("Once you create a split path in the work flow. You stats will start appear here.","wp-marketing-automations")));return Object(n.createElement)("div",{className:"bwf-split-analytics-wrapper"},!o&&Object(k.isEmpty)(m)?Object(n.createElement)(n.Fragment,null,M):Object(n.createElement)(n.Fragment,null,o?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(n.Fragment,null,[1,2].map((function(e){return Object(n.createElement)("div",{key:e,className:" bwf-c-s-collapsible"},Object(n.createElement)("div",{className:"bwf-c-s-heading"},Object(n.createElement)("div",{className:"bwf-accordion-label-elm"},D),Object(n.createElement)("span",{className:"acc-icon"})),Object(n.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion"},F))})))):Object(n.createElement)(V.a,{items:(I=[],m.map((function(e,t){I.push({key:t,label:T(e),display:x(e)})})),I)})),!Object(k.isEmpty)(p)&&Object(n.createElement)(W.e,null,Object(n.createElement)(fe,Oe({},p,{onClose:function(){return f({})},eventSlug:y}))))},he=a(306),Ee=(a(1269),a(975)),ke=a(950);function Ne(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ae(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){Ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=function(e){var t=e.match.params,a=t.automationId,o=t.type,m=void 0===o?"contact":o,p=e.isV2,f=void 0===p||p,d=Object(b.i)(),y=d.period,N=d.compare,S=d.interval,A=d.after,P=d.before,I=Object(s.a)(),C=I.setL2NavAlign,F=I.setL2Title,x=I.setPageCountData,M=(0,Object(l.a)().getPageCountData)(),L=Object(_.a)(),R=L.fetchAnalytics,H=L.setAnalyticsValues,z=Object(w.a)(),q=z.getAnalyticsAutomationData,U=z.getAnalyticsTileData,V=z.getAnalyticsSingleAutomationFailedCount,G=z.getAnalyticsLoading,W=q(),$=V(),B=W.title,Q=void 0===B?"":B,Z=Object(E.a)().setAutomationData,K=G();Object(n.useEffect)((function(){Object(k.isEmpty)(W)||Z("data",W)}),[W]),Object(n.useEffect)((function(){K||x(Ie(Ie({},M),{},{single_a_contacts:$}))}),[$]),Object(n.useEffect)((function(){return function(){H("automation",{})}}),[]);var X=Object(h.a)(),ee=X.getAutomationData,te=X.getAutomationId,ae=ee().title,ne=void 0===ae?"":ae,re=te(),ce=U(),oe=Object(T.a)(Object(c.kb)()).formatAmount;Object(r.a)("analytics","",!0,!1,null,a,!1,f),Object(n.useEffect)((function(){C("left"),Object(c.k)("Automation #"+a),H("automationId",a)}),[]),Object(n.useEffect)((function(){F(parseInt(a)===parseInt(re)&&""!==ne&&""===Q?ne:""!==Q?Q:Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[ne,Q,a]);var ie=function(e){return e.compare="previous_year",Object(u.c)(e).primary},se=function(){for(var e=ie(d),t=0,a=0,n=0,r=0,c=0,o=0,i=0,s=0,l=[],m=e.after;m.isBefore(e.before);m.add(1,"days")){var u=Math.floor(11*Math.random()),b=Math.floor(Math.random()*parseInt(u)),p=Math.floor(Math.random()*parseInt(u)),f=Math.floor(Math.random()*parseInt(p)),O=Math.floor(100*Math.random()).toFixed(2),j=Math.floor(10*Math.random()),v=Math.floor(10*Math.random()),w=Math.floor(10*Math.random()),y=parseFloat(O)>0&&parseInt(f)>0?parseFloat(parseFloat(O)/parseInt(f)).toFixed(2):0;l.push({date_end_gmt:m.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:m.format("YYYY-MM-DD")+" 00:00:00",end_date:m.format("YYYY-MM-DD")+" 23:59:59",interval:m.format("YYYY-MM-DD"),start_date:m.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(b/u*100).toFixed(2),email_click:b,email_open:p,email_sents:u,open_rate:(p/u*100).toFixed(2),total_orders:f,total_revenue:parseFloat(O).toFixed(2),active_contacts:j,complete_contacts:v,unsubscribers:w,revenue:parseFloat(O).toFixed(2),conversions:f,aov:parseFloat(y).toFixed(2)}}),t+=p,a+=u,n+=b,r+=f,c=parseFloat(c)+parseFloat(O),o+=j,i+=v,s+=w}H("tiles",{click_rate:(n/a*100).toFixed(2),email_click:n,email_open:t,email_sents:a,open_rate:(t/a*100).toFixed(2),total_orders:r,total_revenue:c,active_contacts:o,complete_contacts:i,unsubscribers:s,revenue:c,conversions:r,aov:(parseFloat(c)/parseInt(r)).toFixed(2)}),H("analytics",l),H("isLoading",!1)},le=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H("analytics",[]),H("tiles",[]),Object(c.Jb)()){e.next=13;break}return e.prev=3,e.next=6,i()({path:Object(c.u)("/automation/".concat(a,"/contacts?limit=1&offset=0&type=failed")),method:"GET"}).then((function(e){e.hasOwnProperty("result")&&e.result.hasOwnProperty("automation_data")&&Z("data",e.result.automation_data)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return setTimeout((function(){se()}),1e3),e.abrupt("return");case 13:if(r=ie(t),o="",s="",l="",!r){e.next=34;break}Object(k.isEmpty)(r.after)||(o=r.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(r.before)||(s=r.before.format("YYYY-MM-DD 23:59:59")),e.t1=m,e.next="email"===e.t1?23:"sms"===e.t1?25:"whatsapp"===e.t1?27:"contact"===e.t1?29:31;break;case 23:return l=1,e.abrupt("break",33);case 25:return l=2,e.abrupt("break",33);case 27:return l=3,e.abrupt("break",33);case 29:return l=4,e.abrupt("break",33);case 31:return l=1,e.abrupt("break",33);case 33:Object(k.isEmpty)(o)||Object(k.isEmpty)(s)||R(a,o,s,n,1,l);case 34:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){Ae(c,n,r,o,i,"next",e)}function i(e){Ae(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){if("split"!==m){var e=d.hasOwnProperty("interval")?d.interval:"day";le(d,e)}}),[y,N,S,A,P,m]);var me=[{slug:"contact",name:Object(v.__)("Contacts","wp-marketing-automations"),path:"/automation/".concat(a,"/analytics/contact")},{slug:"email",name:Object(v.__)("Emails","wp-marketing-automations"),path:"/automation/".concat(a,"/analytics/email")}];Object(k.isEmpty)(Object(c.s)())||me.push({slug:"sms",name:Object(v.__)("SMS","wp-marketing-automations"),path:"/automation/".concat(a,"/analytics/sms")}),Object(c.Jb)()&&me.push({slug:"split",name:Object(v.__)("Split Path","wp-marketing-automations"),path:"/automation/".concat(a,"/analytics/split")});var ue=function(e){return Object(k.isEmpty)(ce)||!ce.hasOwnProperty(e)||Object(k.isNull)(ce[e])?0:ce[e]},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contact";return"email"===e?[{key:"email_sents",title:Object(v.__)("Sent","wp-marketing-automations"),icon:"sent-new",value:parseInt(ue("email_sents"))},{key:"open_rate",title:Object(v.__)("Open Rate","wp-marketing-automations"),icon:"open-rate",value:parseFloat(ue("open_rate"))+" %"},{key:"click_rate",title:Object(v.__)("Click Rate","wp-marketing-automations"),icon:"click-rate",value:parseFloat(ue("click_rate"))+" %"}].concat(Ne(Object(c.Tb)()?[{key:"total_orders",title:Object(v.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:ue("total_orders")},{key:"total_revenue",title:Object(v.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:oe(ue("total_revenue")),isCurrency:!0}]:[])):"sms"===e?[{key:"email_sents",title:Object(v.__)("Sent","wp-marketing-automations"),icon:"sent",value:parseInt(ue("email_sents"))},{key:"email_click",title:Object(v.__)("Clicks","wp-marketing-automations"),icon:"click-rate",value:parseInt(ue("email_click"))}].concat(Ne(Object(c.Tb)()?[{key:"total_orders",title:Object(v.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:parseInt(ue("total_orders"))},{key:"total_revenue",title:Object(v.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:oe(ue("total_revenue")),isCurrency:!0}]:[])):"contact"===e?[{key:"active_contacts",title:Object(v.__)("Active Contacts","wp-marketing-automations"),icon:"add-contact-new",value:parseInt(ue("active_contacts"))},{key:"complete_contacts",title:Object(v.__)("Completed Contacts","wp-marketing-automations"),icon:"contact-new",value:parseInt(ue("complete_contacts"))}].concat(Ne(Object(c.Tb)()?[{key:"conversions",title:Object(v.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:ue("conversions")},{key:"revenue",title:Object(v.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:oe(ue("revenue")),isCurrency:!0},{key:"aov",title:Object(v.__)("AOV","wp-marketing-automations"),icon:"order-revenue",value:oe(parseFloat(ue("aov"))),isCurrency:!0}]:[]),[{key:"unsubscribers",title:Object(v.__)("Unsubscribes","wp-marketing-automations"),icon:"unsubscribes",value:parseInt(ue("unsubscribers"))}]):void 0};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(n.createElement)(j.a,null),Object(n.createElement)("div",{className:"bwf-single-automation-body-header",style:{paddingBottom:"8px"}},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title2"},Object(v.__)("Analytics","wp-marketing-automations")),!Object(c.Jb)()&&c.e)),Object(n.createElement)(he.a,{tabs:me,selected:m}),Object(n.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap bwf-table-with-border "},!c.Hb&&!Object(c.Jb)()&&Object(n.createElement)(ke.a,{onPage:!0,modalContent:{proLink:Object(c.T)("upgrade",{utm_medium:"Automation+Analytics+Upgrade+Modal"})}}),"split"!==m?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(O,{query:d},c.Hb&&Object(n.createElement)(Ee.a,{title:Object(v.__)("Analytics","wp-marketing-analytics"),message:"contact"===m?Object(v.__)("Analyse the sample data to review Contact Analytics. Use this report to assess key metrics for contacts within the automation.","wp-marketing-automations"):Object(v.__)("Analyse the sample data to review Email Analytics. Use this report to assess key email metrics with the automation.","wp-marketing-automations"),proLink:Object(c.T)("upgrade",{utm_medium:"Automation+Analytics+Sample+Data+Notice"})})),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(g,{query:d,type:m,automationId:a,metrics:function(e){return be(e)}}),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)(D,{query:d,type:m,metrics:function(e){return be(e)}}),function(){switch(m){case"email":return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(Y,{query:d,automationId:a}));case"sms":return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(J,{query:d,automationId:a}));default:return Object(n.createElement)(n.Fragment,null)}}()):Object(c.Jb)()?Object(n.createElement)(_e,{automationId:a}):null))}},949:function(e,t,a){"use strict";var n=a(74),r=a(0),c=a(1),o=a(4),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={workflow:{name:Object(c.__)("Workflow","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e):"admin.php?page=autonami-automations&edit=".concat(e),redirect:!t}};return t&&(a.single_a_contacts={name:Object(c.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/contacts"),showOnClick:!0},a.analytics={name:Object(c.__)("Analytics","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/analytics"),isPro:!0,showOnClick:!0}),a.engagement={name:Object(c.__)("Engagements","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/engagements"),isPro:!0,showOnClick:!0},Object(o.Tb)()&&(a.orders={name:Object(c.__)("Orders","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/orders"),isPro:!0,showOnClick:!0}),a};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},f=(p.automation_nav,p.automationv2_nav),d=Object(n.a)(),O=d.setActiveMultiple,j=d.resetHeaderMenu,v=d.setL2NavType,w=d.setL2Nav,y=d.setBackLink,g=d.setL2Title,_=d.setL2Content,h=d.setBackLinkLabel,E=d.setL2NavAlign,k=d.setPageHeader,N=d.setTabHeader;return Object(r.useEffect)((function(){j(!0),!o&&v("menu");var n=i(l,u);b||w(l?n:f),e&&n.hasOwnProperty(e)&&n[e].hasOwnProperty("name")&&N(n[e].name),O({leftNav:"automations-v2",rightNav:e}),a&&y(a),l&&y(a&&!u?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),o||u&&l&&h(Object(c.__)("All Automations","wp-marketing-automations")),!u&&l&&h(Object(c.__)("All Automations","wp-marketing-automations")),l&&E("left"),t&&""!==t&&g(t),!a&&s&&_(s),k(Object(c.__)("Automations","wp-marketing-automations")),m&&w({})}),[e,u,b]),!0}},950:function(e,t,a){"use strict";var n=a(0),r=a(6),c=a.n(r),o=a(1),i=a(8),s=(a(952),a(39)),l=a(4);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.a=function(e){var t=m(Object(n.useState)(!1),2),a=t[0],r=t[1],u=e.modalContent,b=void 0===u?{}:u,p=e.content,f=e.onPage,d=void 0!==f&&f;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:c()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||r(!0)}},d?Object(n.createElement)(s.a,{showHeader:!1,modalContent:b}):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-king-tag-pro"},Object(n.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(n.createElement)("span",{className:"bwf-mt-8"},p||(Object(l.Fb)()?Object(o.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(o.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(n.createElement)(s.b,{isOpen:a,onRequestClose:function(){return r(!1)},modalContent:b}))}},952:function(e,t,a){},954:function(e,t,a){"use strict";var n=a(52),r=a(124);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}t.a=function(){var e=Object(n.a)("automationList"),t=e.getStateProp,a=s(e,["getStateProp"]),c=Object(n.a)(r.a.recipient).getStateProp,i=Object(n.a)(r.a.conversion).getStateProp,l=Object(n.a)(r.a.contacts).getStateProp,m=Object(n.a)(r.a.analytics).getStateProp;return o(o({},a),{},{getAutomations:function(){return t("automations")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getRecipientData:function(){return c("data")},getRecipientLoading:function(){return c("isLoading")},getRecipientOffset:function(){return c("offset")},getRecipientAutomationId:function(){return c("automationId")},getRecipientTotal:function(){return c("total")},getRecipientAutomation:function(){return c("automation")},getRecipientPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getRecipientLimit:function(){return c("limit")},getRecipientSingleAutomationFailedCount:function(){return c("failedCount")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionAutomation:function(){return i("automation")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return t("countData")},getConversionSingleAutomationFailedCount:function(){return i("failedCount")},getContactData:function(){return l("data")},getContactLoading:function(){return l("isLoading")},getContactOffset:function(){return l("offset")},getContactAutomationId:function(){return l("automationId")},getContactTotal:function(){return l("total")},getContactAutomation:function(){return l("automation")},getContactPage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getContactLimit:function(){return l("limit")},getContactCountData:function(){return l("contactCount")},getContactSingleAutomationFailedCount:function(){return l("failedCount")},getAnalyticsData:function(){return m("analytics")},getAnalyticsTileData:function(){return m("tiles")},getAnalyticsTableData:function(){return m("tableData")},getAnalyticsLoading:function(){return m("isLoading")},getAnalyticsType:function(){return m("type")},getAnalyticsAutomationData:function(){return m("automation")},getAnalyticsSingleAutomationFailedCount:function(){return m("failedCount")}})}},969:function(e,t,a){"use strict";var n=a(51),r=a(4),c=a(124),o=a(20);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}t.a=function(){var e=Object(n.a)("automationList"),t=e.fetch,a=e.setStateProp,i=m(e,["fetch","setStateProp"]),l=Object(n.a)(c.a.recipient),u=l.fetch,b=l.setStateProp,p=Object(n.a)(c.a.conversion),f=p.fetch,d=p.setStateProp,O=Object(n.a)(c.a.contacts),j=O.fetch,v=O.setStateProp,w=Object(n.a)(c.a.analytics),y=w.fetch,g=w.setStateProp;return s(s({},i),{},{fetch:function(e,n,c,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a("automation",{});var s=n.s,l=void 0===s?"":s,u=(n.page,n.filter,n.path,m(n,["s","page","filter","path"])),b={offset:c,limit:o,status:e,search:l,filters:u,version:i?2:1};t("GET",Object(r.u)("/automations"),b)},setAutomationListValues:function(e,t){a(e,t)},fetchRecipient:function(e,t,a){u("GET",Object(r.u)("/v3/automation/".concat(e,"/recipients?limit=").concat(t,"&offset=").concat(a)))},setRecipientsValues:function(e,t){b(e,t)},fetchConversion:function(e,t,a){d("automation",{}),f("GET",Object(r.u)("/v3/automation/".concat(e,"/conversions?limit=").concat(t,"&offset=").concat(a)))},setConversionValues:function(e,t){d(e,t)},fetchContacts:function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";v("automation",{}),j("GET",Object(r.u)("/automation/".concat(e,"/contacts?limit=").concat(t,"&offset=").concat(a,"&type=").concat(n,"&search=").concat(c)))},setContactValues:function(e,t){v(e,t)},fetchAnalytics:function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(i)&&(s=1),y("GET",Object(r.u)("/analytics/emails/chart/")+"?"+Object(o.stringify)({after:t,before:a,interval:n,oid:e,type:c,mode:i,contact:s}))},setAnalyticsValues:function(e,t){g(e,t)}})}},975:function(e,t,a){"use strict";var n=a(0),r=a(1),c=a(6),o=a.n(c),i=a(109),s=(a(979),a(160));function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.a=function(e){var t,a=e.className,c=e.align,u=void 0===c?"left":c,b=e.title,p=e.message,f=e.proLink,d=p||Object(r.sprintf)(Object(r.__)("Use our sample data to explore %s. See how it summarises metrics across multiple funnels.","wp-marketing-automations"),b),O=m(Object(n.useState)(!1),2),j=O[0],v=O[1];return Object(n.useEffect)((function(){var e=document.querySelector("body:not(.modal-open) #bwf-header-upgrade-pro-cta");if(e){var t=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?v(!1):v(!0)}))}),{root:null,rootMargin:"0px",threshold:.1});return t.observe(e),function(){t.disconnect()}}v(!0)}),[]),Object(n.createElement)("div",{className:o()("bwf-lite-noticebar is-sample-data-notice",a,(t={},l(t,"bwf-notice-".concat(u),!!u),l(t,"is-btn-visible",j),t))},Object(n.createElement)("div",{className:"bwf-lite-noticebar__content-wrap"},Object(n.createElement)("div",{className:"bwf-lite-noticebar__title-wrap"},b," ",Object(n.createElement)(i.b,{content:Object(r.__)("Sample Data","wp-marketing-automations"),type:"black"})),Object(n.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(n.createElement)("div",{className:"bwf-noticebar-content"},d))),Object(n.createElement)(s.a,{isPrimary:!0,proLink:f}))}},979:function(e,t,a){}}]);