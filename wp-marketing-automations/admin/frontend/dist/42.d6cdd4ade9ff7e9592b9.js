(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1023:function(e,t,a){"use strict";var n=a(9),r=a.n(n),c=a(4),o=a(943),i=a(1);function s(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}var l=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r()({path:Object(c.u)("/messages/daily-limit")});case 2:if((t=e.sent)&&t.result&&200==t.code){e.next=5;break}throw Error(Object(i.__)("Unable to get daily limit","wp-marketing-automations"));case 5:return e.abrupt("return",t.result);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){s(c,n,r,o,i,"next",e)}function i(e){s(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();t.a=function(){return Object(o.a)(["bwfcrm-get-daily-limit"],l,{retry:!1})}},1246:function(e,t,a){},1335:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(20),c=a(1),o=a(51),i=a(4);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=function(){var e=Object(o.a)("campaignList"),t=e.fetch,a=e.setStateProp;return l(l({},m(e,["fetch","setStateProp"])),{},{fetch:function(e,n,r,c,o){a("isLoading",!0),a("error",null);var s=n.s,l=(n.page,n.filter,n.path,{offset:r,limit:c,type:e,search:s,filters:m(n,["s","page","filter","path"]),status:o});t("GET",Object(i.u)("/broadcasts"),l)},setCamapignListValues:function(e,t){a(e,t)}})},p=a(52);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var j=function(){var e=Object(p.a)("campaignList"),t=e.getStateProp;return d(d({},g(e,["getStateProp"])),{},{getCampaigns:function(){return t("campaigns")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getPageCountData:function(){return t("countData")}})},w=a(9),h=a.n(w),y=a(119),v=a(178),_=a(57),k=a(5),E=a(58),C=a(50),P=a(18),S=(a(1246),a(314)),N=a(316),x=a(61),D=a(3),L=a(6),A=a.n(L),I=a(8),B=a(122),T=a(953),R=a(14),M=a(944),F=a(66);function U(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function q(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){U(c,n,r,o,i,"next",e)}function i(e){U(c,n,r,o,i,"throw",e)}o(void 0)}))}}var J=function(e){var t=e.isOpen,a=e.tasks,r=e.onSuccess,o=e.onError,s=e.onRequestClose,l=e.actionType,u=a?a.length:0,m=Object(M.a)(function(){var e=q(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()({path:Object(i.u)("/bulk-action/broadcast"),method:"DELETE",data:{ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return m.reset()}),2500),r&&r()},onError:function(){o&&o()}}),b=function(){var e=q(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.mutate(a.map((function(e){return e.id})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p={delete:{title:Object(c._n)("Delete Broadcast","Delete Broadcasts",u,"wp-marketing-automations"),description:Object(n.createElement)(n.Fragment,null,Object(c.__)("You are about to delete ","wp-marketing-automations"),Object(c._n)("broadcast","broadcasts",u,"wp-marketing-automations"),Object(c.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(c.__)("Delete","wp-marketing-automations"),cancelBtn:Object(c.__)("Cancel","wp-marketing-automations"),successMsg:Object(c.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(c.__)("Unable to delete broadcast","wp-marketing-automations"),confirmDescription:Object(c.__)("This action is irreversible","wp-marketing-automations")}};return Object(n.createElement)(F.a,{modalTitle:p.hasOwnProperty(l)&&p[l].hasOwnProperty("title")?p[l].title:Object(c._n)("Perform Actions","Perform Actions",u,"wp-marketing-automations"),deleteDescriptionText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("description")?p[l].description:"",confirmButtonText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("confirmBtn")?p[l].confirmBtn:Object(c.__)("Confirm","wp-marketing-automations"),cancelButtonText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("cancelBtn")?p[l].cancelBtn:Object(c.__)("Cancel","wp-marketing-automations"),onConfirm:b,isLoading:m.isLoading,successMessage:m.isSuccess&&(p.hasOwnProperty(l)&&p[l].hasOwnProperty("successMsg")?p[l].successMsg:Object(c.__)("Actions Done!","wp-marketing-automations")),errorMessage:m.isError&&(m.error&&m.error.message?m.error.message:p.hasOwnProperty(l)&&p[l].hasOwnProperty("errorMsg")?p[l].errorMsg:Object(c.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!s&&s()},isOpen:t,confirmDescription:p.hasOwnProperty(l)&&p[l].hasOwnProperty("confirmDescription")?p[l].confirmDescription:"",isDelete:!0})},V=a(41),G=a(176),W=a(16),z=a(306),H=a(303),Y=a(31);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function Z(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){X(c,n,r,o,i,"next",e)}function i(e){X(c,n,r,o,i,"throw",e)}o(void 0)}))}}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function te(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=ne(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw c}}}}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?re(e,t):void 0}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ce={email:Object(c.__)("Email Broadcasts","wp-marketing-automations"),sms:Object(c.__)("SMS Broadcasts","wp-marketing-automations"),whatsapp:Object(c.__)("WhatsApp Broadcasts","wp-marketing-automations")},oe=function(e){var t=Object(n.useContext)(i.h),a=e.query,o=e.type,s=e.status,l=void 0===s?"all":s,u=e.onRequestSendUnopen,m=e.menuButton,p=e.pitchData,f=e.setOpenProModal,d=a.s,O=void 0===d?"":d,g=ae(Object(n.useState)({status:!1}),2),w=g[0],L=g[1],M=ae(Object(n.useState)(!1),2),F=M[0],U=M[1],q=ae(Object(n.useState)(!1),2),$=q[0],K=q[1],X=ae(Object(n.useState)({}),2),ne=X[0],re=X[1],oe=ae(Object(n.useState)(!1),2),ie=oe[0],se=oe[1],le=[],ue=b(),me=j(),be=Object(T.a)(),pe=Object(i.A)(),fe=ue.fetch,de=ue.setCamapignListValues,Oe=me.getCampaigns,ge=me.getPageNumber,je=me.getPerPageCount,we=me.getTotalCount,he=me.getOffset,ye=me.getLoadingStatus,ve=me.getPageCountData,_e=me.getError,ke=Oe(),Ee=he(),Ce=je(),Pe=ye(),Se=we(),Ne=ge(),xe=ve(),De=_e(),Le=Object(n.useRef)(new AbortController),Ae=Object(C.a)(Object(i.kb)()).formatAmount,Ie=0;Object(D.isEmpty)(o)||("email"===o?Ie=1:"sms"===o?Ie=2:"whatsapp"===o&&(Ie=3));var Be=ae(Object(n.useState)([]),2),Te=Be[0],Re=Be[1],Me=ae(Object(n.useState)(!1),2),Fe=Me[0],Ue=Me[1],qe=ae(Object(n.useState)(""),2),Je=qe[0],Ve=qe[1],Ge=function(){Ke&&Ke(),Re([])};Object(n.useEffect)((function(){Pe||K(!1)}),[Pe]);var We=Object(n.useCallback)((function(e,t){Re(t),Ve(e),Ue(!0)}),[]);Object(n.useEffect)((function(){U(!1),de("isLoading",!0),de("campaigns",[]),fe(Ie,a,Ee,Ce,l)}),[Ee,Ce,o,a.s,l]),Object(n.useEffect)((function(){if(!Pe&&!F&&!Object(D.isEmpty)(ke)||ie)try{var e={broadcast_ids:[],force:ie};ke.map((function(t){e.broadcast_ids.push(t.id)})),h()({method:"GET",path:Object(i.u)("/broadcasts-stats?"+Object(r.stringify)(e)),signal:Le.current.signal}).then((function(e){200==e.code&&(re(e.result),U(!0),ie&&(t(Object(c.__)("Stats Updated","wp-marketing-automations")),Object(i.wb)(t,3e3),se(!1)))})).catch((function(e){console.log(e)}))}catch(e){U(!0),se(!1),console.log(e)}}),[ke,ie]),Object(n.useEffect)((function(){return Ge(),function(){Le.current.abort()}}),[]);var ze=Object(n.useMemo)((function(){var e={};if(Array.isArray(ke)){var t,a=te(ke);try{for(a.s();!(t=a.n()).done;){var n=t.value;e[n.id]=n}}catch(e){a.e(e)}finally{a.f()}}return e}),[ke]),He=Object(B.b)(ze),Ye=He.singleSelectProps,$e=He.selectAllProps,Qe=He.floatingBarProps,Ke=He.resetSelection,Xe=He.selected,Ze=void 0===Xe?{}:Xe,et=Object.keys(Ze).filter((function(e){return Ze[e]})).length,tt=[{key:"select_template",label:Object(n.createElement)(V.a,ee({type:"checkbox",checked:!1,onChange:function(){}},$e)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"campaign",label:Object(c.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"}];tt.push({key:"created_on",label:Object(c.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-180"},{key:"schedule",label:Object(c.__)("Execution Date","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-180"},{key:"contacts",label:Object(c.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-90"},{key:"sent",label:Object(c.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-90"}),"sms"!==o&&tt.push({key:"open_rate",label:Object(c.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-90"}),tt.push({key:"click_rate",label:Object(c.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-90"}),Object(i.Tb)()&&(tt.push({key:"orders",label:Object(c.__)("Orders","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"}),tt.push({key:"revenue",label:Object(c.__)("Revenue","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"})),"all"===l&&tt.push({key:"status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-30 bwf-table-col-sticky bwf-sticky-right"});var at=function(e){e!==Ce&&de("limit",e)},nt=function(){var e=Z(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({path:Object(i.u)("/broadcast/".concat(n,"/")),method:"DELETE"}).then((function(e){200==e.code?(t(Object(c.__)("Broadcast deleted","wp-marketing-automations")),fe(Ie,a,0,Ce,l),L({status:!1})):L({status:!0,error:!0,message:e.message})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),L({status:!0,error:!0,message:e.t0.message});case 8:Object(i.wb)(t,3e3);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Z(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 7!==parseInt(r)&&(o={1:Object(c.__)("Drafting broadcast…","wp-marketing-automations"),3:Object(c.__)("Resuming broadcast…","wp-marketing-automations"),6:Object(c.__)("Pausing broadcast…","wp-marketing-automations"),7:Object(c.__)("Canceling broadcast…","wp-marketing-automations")},t(o[r])),e.prev=1,e.next=4,h()({path:Object(i.u)("/broadcast/".concat(n,"/pause-unpause")),method:"POST",data:{status:parseInt(r)}}).then((function(e){200==e.code?(t(e.message),7===parseInt(r)&&L({}),setTimeout((function(){L({}),fe(Ie,a,0,Ce,l)}),2e3)):7!==parseInt(r)?t(e.message):L({status:!0,error:!0,message:e.message})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),7!==parseInt(l)?t(e.t0.message):L({status:!0,error:!0,message:e.t0.message});case 9:Object(i.wb)(t,3e3);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}(),ct=function(){var e=Z(regeneratorRuntime.mark((function e(n){var r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],t(Object(c.__)("Cloning…","wp-marketing-automations")),e.prev=2,e.next=5,h()({path:Object(i.u)("/broadcast/".concat(n,"/clone")),method:"POST",data:{created_by:Object(i.G)(),send_to_unopen:r}}).then((function(e){200==e.code?(t(Object(c.__)("Broadcast cloned","wp-marketing-automations")),fe(Ie,a,0,Ce,l)):t(e.message)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),t(e.t0.message);case 10:Object(i.wb)(t,3e3);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),ot=function(e){return Object(n.createElement)(_.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var a=t.onToggle;return Object(n.createElement)(n.Fragment,null,parseInt(e.status)>1&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(v.a,{to:"wp-admin/admin.php?page=autonami&path=/broadcast/"+e.id,onClick:function(t){t.preventDefault(),be.setCampaignValues("listData",e),Object(R.k)({page:"autonami",path:"/broadcast/"+parseInt(e.id)},"/",{})},type:"bwf-crm",className:"bwf-a-no-underline"},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("View","wp-marketing-automations"))))),parseInt(e.status)<3&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){}},Object(n.createElement)(v.a,{to:"admin.php?page=autonami&path=/broadcast/".concat(e.id,"&edit=true"),type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),be.setCampaignValues("listData",e),Object(R.k)({page:"autonami",path:"/broadcast/"+parseInt(e.id)},"/",{})}},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("Edit","wp-marketing-automations"))))),Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){Object(i.Jb)()?ct(e.id):f(!0),a()}},Object(n.createElement)(P.a,{justify:"space-between"},Object(n.createElement)(P.c,null,Object(c.__)("Duplicate","wp-marketing-automations")),!Object(i.Jb)()&&Object(n.createElement)(P.c,null,i.e))),4===parseInt(e.status)&&"grandchild"!==e.level&&"email"===o&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){Object(i.Jb)()?u&&u(parseInt(e.id)):f(!0),a()}},Object(n.createElement)(P.a,{justify:"space-between"},Object(n.createElement)(P.c,null,Object(c.__)("Send to Unopen","wp-marketing-automations")),!Object(i.Jb)()&&Object(n.createElement)(P.c,null,i.e))),3===parseInt(e.status)&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){rt(e.id,6),a()}},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("Pause","wp-marketing-automations")))),6===parseInt(e.status)&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){rt(e.id,3),a()}},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("Resume","wp-marketing-automations")))),2===parseInt(e.status)&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){rt(e.id,1),a()}},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("Unschedule","wp-marketing-automations")))),[2,3,6].includes(parseInt(e.status))&&Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){L({status:!0,id:e.id,modalContent:Object(n.createElement)(n.Fragment,null,Object(c.__)("You are about to cancel broadcast ","wp-marketing-automations"),Object(n.createElement)("strong",null,e.title,"."),Object(c.__)(" Cancel to stop, Confirm to proceed.","wp-marketing-automations")),title:Object(c.__)("Cancel Broadcast","wp-marketing-automations"),confirmBtnText:Object(c.__)("Confirm","wp-marketing-automations"),onConfirm:function(t){L(Q(Q({},t),{},{status:!0,id:e.id,loading:!0})),rt(e.id,7)}}),a()}},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("Cancel","wp-marketing-automations")))),Object(n.createElement)(E.a,{isClickable:!0,onInvoke:function(){L({status:!0,id:e.id,entityName:e.title,title:Object(c.__)("Delete Broadcast","wp-marketing-automations"),confirmBtnText:Object(c.__)("Delete","wp-marketing-automations"),onConfirm:function(t){L(Q(Q({},t),{},{status:!0,id:e.id,loading:!0})),nt(e.id)}}),a()}},Object(n.createElement)(P.a,{justify:"flex-start"},Object(n.createElement)(P.c,null,Object(c.__)("Delete","wp-marketing-automations")))))}})},it=function(e){return Object(n.createElement)("a",{href:"admin.php?page=autonami&path=/broadcast/"+e.id,onClick:function(t){t.preventDefault(),be.setCampaignValues("listData",e),Object(R.k)({path:"/broadcast/"+parseInt(e.id)},"/",a)},className:"bwf-a-no-underline"},Object(n.createElement)("b",null,e.title.charAt(0).toUpperCase()+e.title.slice(1)+" "))},st=function(e){if(!F)return Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60",title:"Loading"},"Loading");var t=ne.hasOwnProperty(e.id)?ne[e.id]:{};return t.hasOwnProperty("revenue")&&parseFloat(t.revenue)>0?Object(n.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},Ae(parseFloat(t.revenue))):" - "},lt=function(e){if(!F)return Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60",title:Object(c.__)("Loading","wp-marketing-automations")},Object(c.__)("Loading","wp-marketing-automations"));var t=ne.hasOwnProperty(e.id)?ne[e.id]:{};return t.hasOwnProperty("conversions")&&parseFloat(t.conversions)>0?Object(n.createElement)(n.Fragment,null,parseInt(t.conversions)):" - "},ut=function(e){if(!F)return Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60",title:Object(c.__)("Loading","wp-marketing-automations")},Object(c.__)("Loading","wp-marketing-automations"));var t=ne.hasOwnProperty(e.id)?ne[e.id]:{};return Object(n.createElement)(n.Fragment,null,t.hasOwnProperty("sent")&&parseInt(t.sent)>0?t.sent:"-")},mt=function(e){if(!F)return Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60",title:Object(c.__)("Loading","wp-marketing-automations")},Object(c.__)("Loading","wp-marketing-automations"));var t=ne.hasOwnProperty(e.id)?ne[e.id]:{};return Object(n.createElement)(n.Fragment,null,t.hasOwnProperty("open_rate")&&t.open_rate?parseFloat(t.open_rate).toFixed(2)+"%":"-")},bt=function(e){if(!F)return Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60",title:Object(c.__)("Loading","wp-marketing-automations")},Object(c.__)("Loading","wp-marketing-automations"));var t=ne.hasOwnProperty(e.id)?ne[e.id]:{};return Object(n.createElement)(n.Fragment,null,t.hasOwnProperty("click_rate")&&t.open_rate?parseFloat(t.click_rate).toFixed(2)+"%":"-")},pt=Object(n.useMemo)((function(){var e,t=[],a=te(ke);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(n){var r=Q({},n);if(delete r.children,t.push(r),Array.isArray(n.children)&&!(n.children.length<=0)){var c,o=te(n.children);try{for(o.s();!(c=o.n()).done;){var i=c.value,s=Q(Q({},i),{},{level:"child"});if(delete s.children,t.push(s),Array.isArray(i.children)&&!(i.children.length<=0)){var l,u=te(i.children);try{for(u.s();!(l=u.n()).done;){var m=Q(Q({},l.value),{},{level:"grandchild"});t.push(m)}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}}}}}catch(e){a.e(e)}finally{a.f()}return t}),[ke]),ft=[],dt=pt?pt.map((function(e){e.level&&"child"===e.level?ft.push("bwf-c-broadcast-child"):e.level&&"grandchild"===e.level?ft.push("bwf-c-broadcast-grandchild"):ft.push("bwf-c-broadcast-parent");var t=[{display:Ye.hasOwnProperty(e.id)?Object(n.createElement)(V.a,ee({type:"checkbox",checked:!1,onChange:function(){}},Ye[e.id])):Object(n.createElement)(n.Fragment,null),value:null},{display:ot(e),value:null},{display:it(e),value:e.title},{display:e.created_at?Object(i.W)(e.created_at,!1,!1):" - ",value:e.created_at}];return t.push({display:e.execution_time?Object(i.W)(e.execution_time,!1,!0):" - ",value:e.execution_time},{display:parseInt(e.count)>0?e.count:"-",value:e.count>0?e.count:0},{display:ut(e),value:""}),"sms"!==o&&t.push({display:mt(e),value:""}),t.push({display:bt(e),value:""}),Object(i.Tb)()&&(t.push({display:lt(e),value:""}),t.push({display:st(e),value:""})),"all"===l&&t.push({display:pe.hasOwnProperty(e.status)?Object(n.createElement)("span",{className:i.B[e.status]},pe[e.status].label):e.status,value:e.status}),t})):[],Ot=A()("bwfcrm-campaign-list-table",{"has-search":!0}),gt=[{slug:"status_all",name:Object(c.__)("All","wp-marketing-automations"),path:"/broadcasts/".concat(o,"/")},{slug:"status_scheduled",name:Object(c.__)("Scheduled","wp-marketing-automations"),path:"/broadcasts/".concat(o,"/scheduled")},{slug:"status_ongoing",name:Object(c.__)("Ongoing","wp-marketing-automations"),path:"/broadcasts/".concat(o,"/ongoing")},{slug:"status_completed",name:Object(c.__)("Completed","wp-marketing-automations"),path:"/broadcasts/".concat(o,"/completed")},{slug:"status_paused",name:Object(c.__)("Paused","wp-marketing-automations"),path:"/broadcasts/".concat(o,"/paused")},{slug:"status_cancelled",name:Object(c.__)("Cancelled","wp-marketing-automations"),path:"/broadcasts/".concat(o,"/cancelled")}],jt=Pe||$||""!==O||!["","all"].includes(l)||0!==Se||De;return Object(n.createElement)(n.Fragment,null,w&&w.status&&Object(n.createElement)(k.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},w.success?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(S.a,null),Object(n.createElement)("div",{className:"bwf-h1"},w.message))):w.error?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(N.a,null),Object(n.createElement)("div",{className:"bwf-h1"},w.message))):w.confirm?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},!w.content&&Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(x.a,{spaceClass:w.content?"bwf_clear_15":"bwf_clear_30"}),w.content&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h1"},Object(c.__)("Please wait…")),Object(n.createElement)("div",{className:"bwf-h4 bwf-h4-grey",style:{margin:0,fontSize:"15px"}},w.content),Object(n.createElement)("div",{className:"bwf_clear_15"})))):Object(n.createElement)(n.Fragment,null,w.title&&Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},w.title),Object(n.createElement)("span",{onClick:function(){return L({status:!1})},className:"bwf-modal-close"},Object(n.createElement)(I.a,{icon:"close",color:"#353030"}))),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},w.hasOwnProperty("modalContent")?w.modalContent:Object(n.createElement)(n.Fragment,null,w.entityName?Object(n.createElement)(n.Fragment,null,Object(c.__)("You are about to delete broadcast ","wp-marketing-automations"),Object(n.createElement)("strong",null,w.entityName,"."),Object(c.__)(" Cancel to stop, Delete to proceed.","wp-marketing-automations")):Object(c.__)("Once you delete this item. It will no longer available.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf_text_right"},Object(n.createElement)(W.a,{className:"bwf-cancel-btn",onClick:function(){L({status:!1})}},Object(c.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(W.a,{className:"bwf-delete-btn",disabled:w.loading,isBusy:w.loading,onClick:function(){return w.onConfirm(w)}},w.hasOwnProperty("confirmBtnText")?w.confirmBtnText:Object(c.__)("Delete","wp-marketing-automations")))))),Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title"},ce[o]),parseInt(Se)>0&&Object(n.createElement)("div",{className:"bwf-content-header-count"},Object(c.sprintf)(Object(c._n)("(%s Result)","(%s Results)",Se,"wp-marketing-automations"),Se))),Object(n.createElement)("div",{className:"bwf-content-header-right"},jt&&m)),De&&Object(n.createElement)(Y.a,{status:"error"},De.message),jt?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(z.a,{tabs:gt,selected:l?"status_".concat(l):"status_all",count:xe,disableUrlUpdate:!0,onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};de("offset",0),K(!0),Object(R.k)({page:"autonami",path:t},"/",{})}}),Object(n.createElement)("div",{className:"bwf_clear_16"}),Object(n.createElement)(y.a,{className:Ot,rows:dt,headers:function(e){if(Object(D.isEmpty)(le))return e;var t=[];return e.map((function(e){le.includes(e.key)||(e.visible=!1),t.push(e)})),t}(tt),query:{paged:Ne},rowsPerPage:Ce,totalRows:Se,isLoading:Pe,onPageChange:function(e,t){de("offset",(e-1)*Ce)},onQueryChange:function(e){return"per_page"!==e?function(){}:at},showMenu:!1,onColumnsChange:function(e,t){h()({path:Object(i.u)("/user-preference/".concat(Object(i.G)(),"/")),method:"POST",data:{data:{campaign_column:e}}}).then((function(t){200===t.code&&(bwfcrm_contacts_data.table_column_data.campaign=e)}))},actions:et>0?[Object(n.createElement)(B.a,ee({key:"broadacst-bulk-action",actions:[{id:"delete",icon:"trash",hint:Object(c.__)("Delete","wp-marketing-automations")}],onAction:We,inLine:!0,reset:Ge},Qe))]:[Object(n.createElement)(G.a,{key:"search",isLoading:Pe,searchTerm:null==a?void 0:a.s,showResultCount:!1,setSearchData:function(e){if(Object(D.size)(e))Object(R.k)({s:e},"/",a);else{var t=Object(D.cloneDeep)(a);t.hasOwnProperty("s")&&(null==t||delete t.s),K(!0),Object(R.k)(t,"/",{})}}})],rowHeader:!0,emptyMessage:Object(c.__)("No broadcasts found","wp-marketing-automations"),rowClasses:ft,extraSectionBeforefilterCol:0===parseInt(et)&&Object(n.createElement)("div",{className:"bwf-display-flex gap-12"},Object(n.createElement)(W.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(c.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return U(!1),void se(!0)},disabled:!F,isBusy:!F&&ie},Object(n.createElement)(I.a,{icon:"retry",size:16}),Object(c.__)("Refresh","wp-marketing-automations")))})):Object(n.createElement)(H.a,{data:p}),Object(n.createElement)(J,{tasks:Te,isOpen:Fe,onSuccess:function(){fe(Ie,a,Ee,Ce,l),Ge()},onError:Ge,onRequestClose:function(){return Ue(!1)},screenType:"broadcast",screenTypeId:"broadcast-bulk-action",actionType:Je}))},ie=a(173);function se(e,t,a,n,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,r)}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var me=function(e){e.query;var t=e.onCloseModal,a=e.type,r=e.createUnopen,o=Object(n.useContext)(i.h),s=le(Object(n.useState)(!1),2),l=s[0],u=s[1],m=le(Object(n.useState)(""),2),b=m[0],p=m[1],f=le(Object(n.useState)({}),2),d=(f[0],f[1]),O=le(Object(n.useState)(null),2),g=O[0],j=O[1],w=le(Object(n.useState)(""),2),y=w[0],v=w[1],_=Object(T.a)().setCampaignValues;Object(n.useEffect)((function(){u(!1),d({}),j(""),v(""),p("")}),[]);var E=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),p(""),e.prev=2,t={title:g,description:y,type:a,created_by:Object(i.G)()},r&&(n=Object(c.__)("Send to Unopen","wp-marketing-automations"),g||(j(n),t.title=n),t.createUnopen=r),e.next=7,h()({path:Object(i.u)("/broadcast/"),method:"POST",data:t}).then((function(e){200==e.code?(Object(i.N)()||(bwfcrm_contacts_data.first_broadcast_id=1),o(e.message),_("listData",e.result),Object(R.k)({page:"autonami",path:"/broadcast/"+e.result.id},"/",{})):(u(!1),p(e.message))}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),u(!1),p(e.t0.message);case 13:Object(i.wb)(o,3e3);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){se(c,n,r,o,i,"next",e)}function i(e){se(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){r&&E()}),[r]);var C=function(){Object(ie.a)(g)?p(Object(c.__)("Name is required.","wp-marketing-automations")):(p(""),E())},P={1:Object(c.__)("Add Email Broadcast","wp-marketing-automations"),2:Object(c.__)("Add SMS Broadcast","wp-marketing-automations"),3:Object(c.__)("Add WhatsApp Broadcast","wp-marketing-automations")};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(k.Modal,{className:"bwf-admin-modal bwf-admin-modal-480 bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(n.createElement)("div",{className:"bwf-modal-header"},Object(n.createElement)("div",{className:"bwf-modal-heading"},P[a]),Object(n.createElement)("span",{onClick:function(){return t()},className:"bwf-modal-close"},Object(n.createElement)(I.a,{icon:"close",color:"#353030"}))),3!=a||Object(i.Rb)()?Object(n.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&C()}},b&&Object(n.createElement)(Y.a,{status:"error",onRemove:function(){return p("")}},b),Object(n.createElement)(k.TextControl,{placeholder:Object(c.__)("Type here...","wp-marketing-automations"),autoFocus:!0,label:Object(c.__)("Name","wp-marketing-automations"),value:g||"",onChange:function(e){return j(e)},disabled:l}),Object(n.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(n.createElement)(W.a,{onClick:function(){return t()},className:"bwf-cancel-btn"},Object(c.__)("Cancel","wp-marketing-automations")),Object(n.createElement)(W.a,{isPrimary:!0,disabled:l,isBusy:l,onClick:function(){C()}},Object(c.__)("Add","wp-marketing-automations")))):Object(n.createElement)(Y.a,{status:"error",isDismissible:!1},Object(c.__)("Whats service is not configured","wp-marketing-automations"))))},be=a(974),pe=a(49),fe=a(1023),de=a(33),Oe=a(121),ge=a(74),je=a(126),we=a(39);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){ve(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ee={email:Object(c.__)("Email Broadcasts","wp-marketing-automations"),sms:Object(c.__)("SMS Broadcasts","wp-marketing-automations"),whatsapp:Object(c.__)("WhatsApp Broadcasts","wp-marketing-automations")},Ce={email:Object(c.__)("Email","wp-marketing-automations"),sms:Object(c.__)("SMS","wp-marketing-automations"),whatsapp:Object(c.__)("WhatsApp","wp-marketing-automations")};t.default=function(e){var t=e.match.params,a=t.type,o=void 0===a?"email":a,s=t.status,l=void 0===s?"all":s,u=location&&location.search?Object(r.parse)(location.search.substring(1)):{};Object(i.k)("Broadcasts");var m=_e(Object(n.useState)(!1),2),p=m[0],f=m[1],d=_e(Object(n.useState)(!0),2),O=d[0],g=d[1],w=_e(Object(n.useState)(!1),2),h=w[0],y=w[1],v=_e(Object(n.useState)(!1),2),_=v[0],E=v[1],C=j().getPageCountData,P=b(),S=P.setCamapignListValues,N=P.setLoading,x=C(),L=Object(Oe.a)().getPageCountData,A=Object(ge.a)().setPageCountData,B=L();Object(n.useEffect)((function(){A(ye(ye({},B),x))}),[x]),Object(n.useEffect)((function(){N(!0),S("campaigns",[])}),[o]);var T=Object(n.createElement)(k.Button,{isPrimary:!0,onClick:function(){Object(i.Jb)()?(E(!1),f(!0)):y(!0)},className:"bwf-display-flex"},!Object(i.Jb)()&&Object(n.createElement)(I.a,{icon:"king",size:16,color:"#fff"}),Object(c.sprintf)(Object(c.__)("Create %s Broadcast","wp-marketing-automations"),Ce[o]));Object(be.a)(o,Object(c.__)("ALL BROADCASTS","wp-marketing-automations"),!1,!1,("sms"!==o||!Object(D.isEmpty)(Object(i.s)()))&&T,1,x);var M=(Object(i.Jb)()?Object(fe.a)():{}).data,F=M||{},U=F.reached,q=void 0!==U&&U,J=F.daily_limit,V=void 0===J?0:J,G={email:1,sms:2,whatsapp:3},W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{type:"heading",data:{title:"email"===o?Object(c.__)("Ping your contacts by initiating Email Broadcasts","wp-marketing-automations"):Object(c.sprintf)(Object(c.__)("Target your contacts by initiating %s","wp-marketing-automations"),Ee[o]),desc:Object(c.sprintf)(Object(c.__)("Create personalised %s, send, and analyse statistics seamlessly.","wp-marketing-automations"),Ee[o].toLowerCase())}},{type:"image-desc",data:[{img:Object(i.o)()+Object(c.sprintf)("%s-broadcast/broadcast1.png","email"===o?"email":"sms"),title:Object(c.__)("Segment contact","wp-marketing-automations"),desc:Object(c.__)("Effortlessly Organize Your Contacts: Streamline and Target.","wp-marketing-automations")},{img:Object(i.o)()+Object(c.sprintf)("%s-broadcast/broadcast2.png","email"===o?"email":"sms"),title:Object(c.__)("Prepare and Send","wp-marketing-automations"),desc:Object(c.sprintf)(Object(c.__)("Craft %s content and deliver them to your audience.","wp-marketing-automations"),Ee[o].toLowerCase())}]},{type:"buttons",data:{buttons:[e?{text:Object(c.__)("Go to Connectors","wp-marketing-automations"),onClick:function(){Object(R.k)({page:"autonami",path:"/connectors"},"/",{})}}:{text:Object(c.sprintf)(Object(c.__)("Create %s Broadcast","wp-marketing-automations"),Ce[o]),proCheck:!0,onClick:function(){Object(i.Jb)()?(E(!1),f(!0)):y(!0)}}]}},{type:"link-wth-text",data:{text:Object(c.sprintf)(Object(c.__)("Curious about %s broadcast?","wp-marketing-automations"),Ce[o].toLowerCase()),link:Object(c.sprintf)("https://funnelkit.com/docs/autonami-2/%s-broadcasts/",Ce[o].toLowerCase()),linkText:Object(c.__)("Learn More","wp-marketing-automations")}}]};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-broadcast-main-wrapper"},Object(n.createElement)("div",{className:"bwf-broadcast-section-sidebar"},Object(n.createElement)(je.a,{showHeaderLabal:!0})),Object(n.createElement)("div",{className:"bwf-broadcast-section-body"},0!==i.n?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(pe.a,null),Object(i.Jb)()&&"email"===o&&!!q&&!!O&&Object(n.createElement)(Y.a,{status:"warning",onRemove:function(){return g(!1)}},"".concat(Object(c.__)("Daily sending limit of","wp-marketing-automations")," ").concat(V," ").concat(Object(c.__)(" emails has been reached today. To send out more emails, go to ","wp-marketing-automations")," "),Object(n.createElement)(de.a,{href:"admin.php?page=autonami&path=/settings",className:"bwf-a-no-underline"},Object(c.__)("Settings > Emails","wp-marketing-automations")),Object(c.__)(" to increase the limit.","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwfcrm-campaign-list"},Object(i.Jb)()&&"sms"===o&&Object(D.isEmpty)(Object(i.s)())?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title"},Ee[o]))),Object(n.createElement)(H.a,{data:W(!0)})):Object(n.createElement)(oe,{query:u,type:o,status:l,onRequestSendUnopen:function(e){Object(i.Jb)()?(E(e),f(!0)):y(!0)},menuButton:T,pitchData:W(),setOpenProModal:y}))):Object(n.createElement)("div",{className:"bwfcrm-campaign-list"},Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-content-header-title"},Ee[o]),!Object(i.Jb)()&&i.e)),Object(n.createElement)(H.a,{data:W()})))),p&&Object(n.createElement)(me,{query:u,createUnopen:_,onCloseModal:function(){return f(!1)},type:G.hasOwnProperty(o)?G[o]:1}),!Object(i.Jb)()&&Object(n.createElement)(we.b,{isOpen:h,onRequestClose:function(){return y(!1)},modalContent:{isFeature:!0,featureTitle:Object(c.sprintf)(Object(c.__)("%s Broadcast","wp-marketing-automations"),Ce[o]),proLink:Object(i.T)("upgrade",{utm_medium:"Create+".concat(Ce[o],"+Broadcast+Upgrade+Modal")}),image:Object(i.db)("".concat(o,"-broadcast.png")),benefit:Object(c.sprintf)(Object(c.__)("Unlock %s Broadcast and other awesome features.","wp-marketing-automations"),Ce[o])}}))}},946:function(e,t,a){"use strict";var n=a(52),r=a(317),c=Object(n.a)(r.a.campaign).getStateProp,o=Object(n.a)(r.a.recipient).getStateProp,i=Object(n.a)(r.a.conversion).getStateProp;t.a={getCampaignData:function(){return c("data")},getStep:function(){return parseInt(c("step"))},getLoading:function(){return c("isLoading")},getLisData:function(){return c("listData")},getCampaignId:function(){return parseInt(c("campaignId"))},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientCampaignId:function(){return o("campaignId")},getRecipientTotal:function(){return o("total")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientOffset:function(){return o("offset")},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionCampaignId:function(){return i("campaignId")},getConversionTotal:function(){return i("total")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getExcludes:function(){var e=c("data");return e&&e.data&&Array.isArray(e.data.exclude)?e.data.exclude:[]},getEditableMode:function(){return c("editableMode")}}},953:function(e,t,a){"use strict";var n=a(51),r=a(4),c=a(317),o=a(946);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(){var e=Object(n.a)(c.a.campaign),t=e.fetch,a=e.setStateProp,i=Object(n.a)(c.a.recipient),l=i.fetch,u=i.setStateProp,m=Object(n.a)(c.a.conversion),b=m.fetch,p=m.setStateProp,f=o.a.getCampaignData();return{fetch:function(e){t("GET",Object(r.u)("/broadcast/".concat(e)))},setCampaignValues:function(e,t){a(e,t)},fetchRecipient:function(e,t,a){l("GET",Object(r.u)("/broadcasts/".concat(e,"/recipients?limit=").concat(t,"&offset=").concat(a)))},setRecipientsValues:function(e,t){u(e,t)},fetchConversion:function(e,t,a){b("GET",Object(r.u)("/broadcasts/".concat(e,"/conversions?limit=").concat(t,"&offset=").concat(a)))},setConversionValues:function(e,t){p(e,t)},setExclude:function(e){a("data",s(s({},f),{},{data:s(s({},f.data),{},{exclude:e})}))},resetCampaign:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a("data",e),a("step",1),a("campaignId",e.id),a("isLoading",!1),a("editableMode",!1)},setEditableMode:function(e){a("editableMode",e)}}}},974:function(e,t,a){"use strict";var n=a(0),r=a(74),c=a(1),o=a(14),i=a(20),s=a(946),l=a(4),u=function(e,t,a){return decodeURIComponent(Object(o.f)(e,t,a))};t.a=function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,b=location&&location.search?Object(i.parse)(location.search.substring(1)):{},p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},f=p.broadcasts_nav,d=s.a.getCampaignData(),O=s.a.getCampaignId(),g=s.a.getLoading(),j={overview:{name:Object(c.__)("Overview","wp-marketing-automations"),link:u({},"/broadcast/".concat(O,"/overview"),b)},analytics:{name:Object(c.__)("Analytics","wp-marketing-automations"),link:u({},"/broadcast/".concat(O,"/analytics"),b)},recipient:{name:Object(c.__)("Engagements","wp-marketing-automations"),link:u({},"/broadcast/".concat(O,"/engagements"),b)}};Object(l.Tb)()&&(j.orders={name:Object(c.__)("Orders","wp-marketing-automations"),link:u({},"/broadcast/".concat(O,"/orders"),b)});var w=Object(r.a)(),h=w.setActiveMultiple,y=w.resetHeaderMenu,v=w.setL2NavType,_=w.setL2Nav,k=w.setBackLink,E=w.setL2Title,C=w.setL2Content,P=w.setBackLinkLabel,S=w.setL2NavAlign,N=w.setPageHeader;return Object(n.useEffect)((function(){y(),a?(v("menu"),_(j)):(!t&&v("menu"),!t&&_(f)),h({leftNav:"broadcasts",rightNav:e}),t&&1===m&&(P(Object(c.__)("Email Broadcasts","wp-marketing-automations")),k(u({},"/broadcasts/email",b))),t&&2===m&&(P(Object(c.__)("SMS Broadcasts","wp-marketing-automations")),k(u({},"/broadcasts/sms",b))),t&&3===m&&(P(Object(c.__)("WhatsApp Broadcasts","wp-marketing-automations")),k(u({},"/broadcasts/whatsapp",b))),!g&&a&&E(Object(n.createElement)(n.Fragment,null,d.title)),a&&S("left"),!t&&o&&C(o),N(Object(c.__)("Broadcasts","wp-marketing-automations"))}),[e,m]),!0}}}]);