(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1009:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(79),a={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?[1|3]([0|5][0-45-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)(7[5-9])\d{1,7}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[689]\d{7}$/,"en-SL":/^(?:0|94|\+94)?(7(0|1|2|5|6|7|8)( |-)?\d)\d{6}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?([1-8]{1}|3[0-9]{2})?[2-9]{1}\d{6}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(5|79)\d{7}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[2-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([2689]))|(7([0|6-9]))|(8([1-6|89]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([3568][0-9]|4[579]|6[67]|7[01235678]|9[012356789])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};function c(e,t,n){if(Object(r.a)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(a.hasOwnProperty(t)&&a[t].test(e))return!0;return!1}));if(t in a)return a[t].test(e);if(!t||"any"===t){for(var c in a){if(a.hasOwnProperty(c))if(a[c].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"];Object.keys(a)},1010:function(e,t,n){},1035:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(0),a=n(5),c=n(1),o=n(3),i=n(963),l=n(972),s=n(18),u=n(49),m=n(8),b=n(31);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.headersData,n=e.onRequestImport,f=e.submitButtonText,j=e.secondaryButtonText,w=e.onSecondaryButtonClick,g=e.savedData,v=e.buttonAlignClass,y=e.backButtonText,h=e.backButtonClick,E=e.extra,_=e.isSubmitButtonBusy,k=e.sourceHeaderText,S=void 0===k?Object(c.__)("Columns To Import","wp-marketing-automations"):k,N=e.contactHeaderText,C=void 0===N?Object(c.__)("Map Into Field","wp-marketing-automations"):N,x=e.updateExistingText,I=void 0===x?Object(c.__)("Update Existing Contacts","wp-marketing-automations"):x,P=e.secondaryClass,A=void 0===P?"":P,T=t.headers,$=t.fields,D=O(Object(r.useState)(g&&g.mapped_fields?function(e,t){if(!e)return{};var n={},r=function(r){t.find((function(e){return e.index.toString()===r}))&&(n[r]=e[r])};for(var a in e)r(a);return n}(g.mapped_fields,T):{}),2),F=D[0],L=D[1],M=O(Object(r.useState)(0),2),R=M[0],B=M[1],U=g&&g.tags?g.tags.map((function(e){return{key:e.id,label:e.value}})):[],z=g&&g.lists?g.lists.map((function(e){return{key:e.id,label:e.value}})):[],q=O(Object(r.useState)(U),2),G=q[0],V=q[1],W=O(Object(r.useState)(z),2),H=W[0],K=W[1],J=O(Object(r.useState)(!(!g||!("update_existing"in g))&&g.update_existing),2),Z=J[0],Y=J[1],Q=O(Object(r.useState)(!g||!("update_blank"in g)||g.update_blank),2),X=Q[0],ee=Q[1],te=O(Object(r.useState)(!g||!("marketing_status"in g)||g.marketing_status),2),ne=te[0],re=(te[1],O(Object(r.useState)(!(!g||!("trigger_events"in g))&&g.trigger_events),2)),ae=re[0],ce=re[1],oe=O(Object(r.useState)(null),2),ie=oe[0],le=oe[1],se=(E||{}).disableMarketingStatusCheck,ue=void 0!==se&&se,me=function(){return le(null),0===Object(o.size)(F)?(setTimeout((function(){return le(Object(c.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values(F).includes("email")||(setTimeout((function(){return le(Object(c.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},be=function(){if(me()){var e={};T.map((function(t){t.index in F&&(e[t.index]=F[t.index])}));var t={map:e,tags:G.map((function(e){return{id:e.key,value:e.label}})),lists:H.map((function(e){return{id:e.key,value:e.label}})),update_existing:Z,trigger_events:ae,imported_contact_status:R,dont_update_blank:X};!ue&&(t.marketing_status=ne),n(t)}},fe=function(){if(me()){var e={};T.map((function(t){t.index in F&&(e[t.index]=F[t.index])}));var t={map:e,tags:G.map((function(e){return{id:e.key,value:e.label}})),lists:H.map((function(e){return{id:e.key,value:e.label}})),update_existing:Z,trigger_events:ae};!ue&&(t.marketing_status=ne),w(t)}},pe={0:Object(c.__)("Unverified","wp-marketing-automations"),1:Object(c.__)("Subscribed","wp-marketing-automations"),2:Object(c.__)("Bounced","wp-marketing-automations"),3:Object(c.__)("Unsubscribed","wp-marketing-automations")};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Mapping","wp-marketing-automations"))),ie&&Object(r.createElement)("div",{className:"bwf-mr-16 bwf-ml-16"},Object(r.createElement)(u.a,null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(b.a,{status:"error",onRemove:function(){return le(null)}},ie)),!Object(o.isArray)($)||!$.length>0||!Object(o.isArray)(T)||!T.length>0?!Object(o.isArray)($)||!$.length>0?Object(r.createElement)(b.a,{status:"error"},Object(c.__)("No contact fields found","wp-marketing-automations")):!Object(o.isArray)(T)||!T.length>0?Object(r.createElement)(b.a,{status:"error"},Object(c.__)("No mapping fields found")):void 0:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(r.createElement)("strong",null,S),Object(r.createElement)("span",null),Object(r.createElement)("strong",null,C)),T.map((function(e,t){return Object(r.createElement)("div",{key:t,className:"bwf-c-import-field"},Object(r.createElement)(a.TextControl,{disabled:!0,value:e.header}),Object(r.createElement)("span",{className:"bwf-display-flex"},Object(r.createElement)(m.a,{icon:"mapper"})),Object(r.createElement)("select",{value:e.index in F?F[e.index]:"",onChange:function(t){return function(e,t){var n=t.target.value,r="index"in e?e.index:"";""===n&&r in F?L(Object(o.omit)(F,r)):""!==n&&""!==r&&L(p(p({},F),{},d({},r,n)))}(e,t)},key:"bwf-select-field"},Object(r.createElement)("option",{value:"",key:"default-key"+t},Object(c.__)("Do Not Import This Field","wp-marketing-automations")),$.map((function(e,n){return"fields"in e&&e.fields.length>0&&Object(r.createElement)("optgroup",{key:e.id+"-"+n+"-"+t,label:e.name},e.fields.map((function(e){return Object(r.createElement)("option",{key:e.id,value:e.id},e.name)})))}))))}))),Object(r.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(r.createElement)(i.a,{onTagsChange:V,selected:G}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(l.a,{onListsChange:K,selected:H})),!ue&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(c.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(e){B(e.target.value)},key:"bwf-select-status",value:R},Object.keys(pe).map((function(e){return Object(r.createElement)("option",{key:e,value:e},pe[e])}))),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:I,checked:Z,className:"bwf-tooglecontrol-advance",onChange:Y})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Don't Update Blank Values","wp-marketing-automations"),checked:X,className:"bwf-tooglecontrol-advance",onChange:ee})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:ae,className:"bwf-tooglecontrol-advance",onChange:ce})))),Object(r.createElement)("div",{className:"bwf-pt-0"},v?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.a,null,!!y&&Object(r.createElement)(s.b,null,Object(r.createElement)(a.Button,{isSecondary:!0,onClick:h,className:A},y)),Object(r.createElement)(s.b,{className:v},Object(r.createElement)(a.Button,{onClick:be,isBusy:!!_,disabled:!!_,isPrimary:!0},Object(r.createElement)("span",null,f||Object(c.__)("Import","wp-marketing-automations"))),j&&Object(r.createElement)(a.Button,{onClick:fe,className:"bwf-ml-10",isSecondary:!0},j)))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{onClick:be,isPrimary:!0,isBusy:!!_,disabled:!!_,className:"bwf-display-flex"},Object(r.createElement)("span",null,f||Object(c.__)("Import","wp-marketing-automations"))),j&&Object(r.createElement)(a.Button,{onClick:fe,className:"bwf-ml-10",isSecondary:!0},j)))))}},1036:function(e,t,n){},1099:function(e,t,n){},1100:function(e,t,n){},1101:function(e,t,n){},1102:function(e,t,n){},1103:function(e,t,n){},1104:function(e,t,n){},1324:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n(20),o=n(6),i=n.n(o),l=n(4),s=n(119),u=n(3),m=n(178),b=n(57),f=n(58),p=n(5),d=n(18),O=n(970),j=n(958),w=n(9),g=n.n(w),v=n(331),y=n(8),h=n(145),E=n(31),_=n(16);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t=e.contact,n=Object(r.useContext)(l.h),c=x(Object(r.useState)(!1),2),o=c[0],i=c[1],s=x(Object(r.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),m=s[0],b=s[1],f=x(Object(r.useState)({status:!1,message:""}),2),d=f[0],O=f[1],j=[{value:"",label:Object(a.__)("Select Type","wp-marketing-automations")}].concat(Object(l.F)()),w=function(){var r,a=(r=regeneratorRuntime.mark((function r(a){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c={title:a.title,body:a.body,type:a.type,private:a.send,modified_by:Object(l.G)()}).created_by=Object(l.G)(),i(!0),r.prev=3,r.next=6,g()({path:Object(l.u)("/v3/contacts/".concat(t.id,"/notes/")),method:"POST",data:{notes:c},headers:{"Content-Type":"application/json"}}).then((function(t){if(200!=t.code)throw Error(Object(l.p)(null==t?void 0:t.message));n(t.message),e.setModelStatus({status:!1,contactInfo:{}})})).catch((function(e){throw Error(Object(l.p)(null==e?void 0:e.message))}));case 6:r.next=12;break;case 8:r.prev=8,r.t0=r.catch(3),O({status:!0,message:r.t0.message}),i(!1);case 12:Object(l.wb)(n,3e3);case 13:case"end":return r.stop()}}),r,null,[[3,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var c=r.apply(e,t);function o(e){C(c,n,a,o,i,"next",e)}function i(e){C(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Note","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return e.setModelStatus(!1)},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-fields"},d.status&&Object(r.createElement)(E.a,{status:"error",onRemove:function(){return O(!1)},className:"bwf-send-note-notice"},d.message?d.message:Object(a.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-message-wrap"},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Contact","wp-marketing-automations")),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-highlight-content"},Object(r.createElement)("b",null,t.f_name+" "+t.l_name)," ( "+t.email+" ) "))),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Type","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-select-full-wrap"},Object(r.createElement)(p.SelectControl,{value:m.type,className:"bwf-w-100p",options:j,onChange:function(e){return b(S(S({},m),{},{type:e}))},disabled:o}))),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Title","wp-marketing-automations")),Object(r.createElement)(p.TextControl,{type:"text",value:m.title,placeholder:Object(a.__)("Type here …","wp-marketing-automations"),disabled:o,onChange:function(e){return b(S(S({},m),{},{title:e}))}})),Object(r.createElement)("div",{className:"bwf-message-textarea"},Object(r.createElement)(h.a,{keyid:"bwf-note-editor",content:m.body,setContent:function(e){return b(S(S({},m),{},{body:e}))},height:200})),Object(r.createElement)("div",{className:"bwf-message-footer"},0==parseInt(m.id)&&Object(r.createElement)("div",{className:"bwf-note-send"},Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(m.send)),onChange:function(e){return b(S(S({},m),{},{send:e?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(r.createElement)("div",{className:"bwf-button-col"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return e.setModelStatus(!1)},disabled:o},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,isBusy:o,disabled:o,onClick:function(){Object(u.isEmpty)(m.title)||Object(u.isEmpty)(m.body)||Object(u.isEmpty)(m.type)?O({status:!0,message:""}):(O({status:!1,message:""}),b(S(S({},m),{},{loading:!0})),w(m))}},Object(a.__)("Add Note","wp-marketing-automations")))))))},A=n(61),T=n(123),$=n(14),D=n(310),F=n(122),L=(n(1036),n(971)),M=n(985),R=n(182),B=n(950),U=function(e){var t=e.isOpen,n=void 0!==t&&t,c=e.query,o=Object(L.a)(!0),i=o.loading,s=o.filters;return n&&!Object(l.Jb)()?Object(r.createElement)("div",{className:"bwf-filter-placeholder bwf-w-100p "+(Object(l.Jb)()?"":"bwf-position-relative bwf-h-200")},!!s&&Object(r.createElement)(R.a,{siteLocale:"en-US",currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(e){return Object(r.createElement)(M.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:{}}),Object(r.createElement)(B.a,{modalContent:{isFeature:!0,featureTitle:Object(a.__)("Contact Filters","wp-marketing-automations"),proLink:Object(l.T)("upgrade",{utm_medium:"Contacts+Filters"})},content:Object(a.__)("We're sorry, this feature is not available on your plan. Learn more about Contact Filters.","wp-marketing-automations")})):n&&i?Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start gap-12"},Object(r.createElement)("div",{className:"bwf-w-60"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-60"})),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"})):n&&!!s&&Object(r.createElement)(R.a,{siteLocale:"en-US",currency:Object(l.Tb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(e){return Object(r.createElement)(M.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:c})},z=n(41),q=n(90);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e.refreshTable,n=K(Object(r.useState)(!1),2),c=n[0],o=n[1],i=Object(l.mb)("table_sort_data"),s=i.hasOwnProperty("contact_sort_data")?i.contact_sort_data:{},m=Object(u.isObject)(s)&&!Object(u.isEmpty)(s)?s:{},f=m.orderby,p=void 0===f?"last_modified":f,d=m.order,O=void 0===d?"desc":d,j=Object(r.useContext)(l.h),w=[{value:"f_name",label:Object(a.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(a.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(a.__)("Country","wp-marketing-automations")},{value:"state",label:Object(a.__)("State","wp-marketing-automations")}];Object(l.Tb)()&&w.push({value:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(a.__)("Last Order Date","wp-marketing-automations")});var v=K(Object(r.useState)(p),2),h=v[0],E=v[1],k=K(Object(r.useState)(O),2),S=k[0],N=k[1],C=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,r={orderby:h,order:S},(c=V({},i)).contact_sort_data=r,e.next=7,g()({path:Object(l.u)("/user-preference/".concat(Object(l.G)(),"/")),method:"POST",data:{data:{table_sort_data:c}}}).then((function(e){if(200!==e.code)throw Error(Object(l.p)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=r,j(e.message),t(),n(),o(!1)})).catch((function(e){throw Error(Object(l.p)(null==e?void 0:e.message))}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),o(!1),j(e.t0.message?e.t0.message:Object(a.__)("Error in saving sort data","wp-marketing-automations"));case 13:Object(l.wb)(j,2e3);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){H(c,r,a,o,i,"next",e)}function i(e){H(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-custom-ellipsis bwf-sort-ellipsis-contact-list",style:{width:"30px"}},Object(r.createElement)(b.a,{label:"",buttonIcon:Object(r.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small",key:"import",style:{width:"30px",padding:"7px"},title:Object(a.__)("Sort Order","wp-marketing-automations")},Object(r.createElement)(y.a,{icon:"sort",size:14})),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-heading-1"},Object(a.__)("Sorting","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-heading-2 bwf-mt-16"},Object(a.__)("Sort Order","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-contact-sort-popover"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-sort-order-buttons"},Object(r.createElement)(_.a,{isSecondary:!S||"desc"===S,isTertiary:S&&"desc"!==S,onClick:function(){return N("desc")}},Object(a.__)("Descending","wp-marketing-automations")),Object(r.createElement)(_.a,{isSecondary:S&&"asc"===S,isTertiary:S&&"asc"!==S,onClick:function(){return N("asc")}},Object(a.__)("Ascending","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-sort-column-list bwf-mt-16"},Object(r.createElement)(q.a,{className:"bwfcrm-inline-option",selected:h,label:"",options:w,onChange:function(e){return E(e)}})),Object(r.createElement)("div",{className:"bwf-contact-sort-action bwf-mt-16"},Object(r.createElement)(_.a,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return C(t)},isBusy:c},Object(a.__)("Update","wp-marketing-automations")))))}}))},Y=n(246),Q=n(319);function X(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){re(c,r,a,o,i,"next",e)}function i(e){re(c,r,a,o,i,"throw",e)}o(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le=Object(Q.c)((function(){return Object(r.createElement)(y.a,{icon:"menu-2",size:20})})),se=Object(Q.b)((function(e){var t=e.item,n=e.onRemove;return Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-contact-preferences__item"},Object(r.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(r.createElement)(le,null),t.label),Object(r.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(r.createElement)("span",{className:"bwf-tags bwf-tag-gray bwf-w-fit-content"},t.groupLabel)),Object(r.createElement)("div",{className:"bwf-display-flex bwf-cursor-pointer",onClick:function(){n(Object.keys(t)[0],t.groupKey)}},Object(r.createElement)(y.a,{icon:"delete",size:20}))))})),ue=Object(Q.a)((function(e){var t=e.items,n=e.onRemove;return Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(t)?Object(r.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},Object(a.__)("No Additional Columns Selected. Click the Add New Columns button.","wp-marketing-automations")):t.map((function(e,t){return Object(r.createElement)(se,{item:e,key:"bwf-contact-preferences__item-".concat(t),index:t,onRemove:n})})))})),me=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],be=function(e){var t=e.onRequestClose,n=e.refreshTable,c=e.setModelData,o=Object(r.useContext)(l.h),i=ce(Object(r.useState)(!1),2),s=i[0],m=i[1],b=ce(Object(r.useState)(!1),2),f=b[0],d=b[1],O=ce(Object(r.useState)(!1),2),j=O[0],w=O[1],v=ce(Object(r.useState)(0),2),h=v[0],E=v[1],k=Object(r.useRef)(null),S=ce(Object(r.useState)([]),2),N=S[0],C=S[1],x=ce(Object(r.useState)([]),2),I=x[0],P=x[1],A=ce(Object(r.useState)({}),2),T=A[0],$=A[1],D=ce(Object(r.useState)(!1),2),F=D[0],M=D[1],R=Object(r.useRef)(new AbortController),B=Object(L.a)(!0),U=B.loading,q=void 0===U||U,G=B.filters,V=void 0===G?{}:G,W=function(){var e=ae(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({path:Object(l.u)("/contact/export/custom-selections"),signal:R.current.signal}).then((function(e){if(200===e.code){var t=Object.create({});Object.keys(e.result).forEach((function(n){"wishlist-member"!==n&&(t[n]={label:e.result[n].name},t[n].fields=Object.keys(e.result[n].selections).map((function(t){return{key:e.result[n].selections[t].slug,label:e.result[n].selections[t].name}})))})),$(t),d(!0)}})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(V).forEach((function(n){var r=ce(n,2),a=r[0],c=r[1];if(t.includes(a)||["email","creation_date"].includes(a))return!1;var o;o={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(o):e[c.group]={label:c.groupLabel,fields:[o]}})),te(te({},e),T)}),[V,T]);Object(r.useEffect)((function(){return Object(l.Jb)()?W():d(!0),function(){R.current.abort()}}),[]),Object(r.useEffect)((function(){if(Object(u.isEmpty)(N)&&f&&!F){if(H.hasOwnProperty("contact_details")){var e=[],t=[];if(!Object(u.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(t){Object(u.isObject)(t)&&e.push(t)})),Object.keys(H).forEach((function(n){H[n].fields.map((function(e){return e.key})).every((function(t){return e.some((function(e){return e.hasOwnProperty(t)}))}))&&t.push(ne({},n,H[n].label))}));C(e),P(t)}M(!0)}}),[H]);var K=function(e,t){var n=H[e].fields.map((function(e){return e.key}));if(I.some((function(t){return t.hasOwnProperty(e)})))C((function(e){return e.filter((function(e){return!n.some((function(t){return e.hasOwnProperty(t)}))}))})),P((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))}));else{var r=H[e].fields.map((function(n){var r;return ne(r={},n.key,n.label),ne(r,"label",n.label),ne(r,"groupKey",e),ne(r,"groupLabel",t),r}));C((function(e){return Object(u.uniqBy)([].concat(X(e),X(r)),(function(e){return Object.keys(e)[0]}))})),P((function(n){return[].concat(X(n),[ne({},e,t)])}))}},J=function(){var e=ae(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,g()({path:Object(l.u)("/user-preference/".concat(Object(l.G)(),"/")),method:"POST",data:{data:{contact_columnv2:N}}}).then((function(e){if(200!==e.code)throw Error(Object(l.p)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.contactv2=N,o(e.message),Object(l.wb)(o,2e3),n(),t(),m(!1)})).catch((function(e){throw Error(Object(l.p)(null==e?void 0:e.message))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),m(!1),c({status:!0,modalTitle:Object(a.__)("Save Columns","wp-marketing-automations"),error:e.t0.message?e.t0.message:Object(a.__)("Error in saving preferences","wp-marketing-automations")});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(a.__)("Table Columns","wp-marketing-automations"),Object(r.createElement)("span",null,Object(a.__)("Add new columns or arrange existing columns in contact table","wp-marketing-automations"))),ref:k,onRequestClose:function(){return t()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-contact-preferences-modal__content"},j?Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return w(!1)}},Object(r.createElement)(y.a,{icon:"arrow-left-long",width:20,height:14}),Object(r.createElement)("span",null,Object(a.__)("Back","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(Object.keys(H))||q?Object(r.createElement)(fe,null):[].concat(me,X(Object.keys(T))).map((function(e,t){return H.hasOwnProperty(e)&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(t)},Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return E((function(e){return e!==t&&t}))}},Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(r.createElement)(z.a,{checked:I.some((function(t){return t.hasOwnProperty(e)})),onChange:function(){return K(e,H[e].label)},onClick:function(t){t.stopPropagation(),K(e,H[e].label)}}),Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},H[e].label,function(e){var t=H[e].fields.map((function(e){return e.key})),n=0;return t.forEach((function(e){N.forEach((function(t){t.hasOwnProperty(e)&&n++}))})),n>0?Object(r.createElement)("span",null," (",n," Selected )"):""}(e))),Object(r.createElement)(_.a,{className:"bwf-contact-preferences__accordian-icon",onClick:function(e){e.stopPropagation(),E((function(e){return e!==t&&t}))}},Object(r.createElement)(y.a,{icon:h===t?"angle-up":"angle-down",width:"16",height:"18"}))),h===t&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},H[e].fields.map((function(t,n){return Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(n)},Object(r.createElement)(z.a,{checked:N.some((function(e){return e.hasOwnProperty(t.key)})),onChange:function(){return function(e,t,n,r){var a=H[n].fields.map((function(e){return e.key}));N.some((function(t){return t.hasOwnProperty(e)}))?C((function(t){var r=t.filter((function(t){return!t.hasOwnProperty(e)}));return a.every((function(e){return r.hasOwnProperty(e)}))||P((function(e){return e.filter((function(e){return!e.hasOwnProperty(n)}))})),r})):C((function(c){var o,i=[].concat(X(c),[(o={},ne(o,e,t),ne(o,"label",t),ne(o,"groupKey",n),ne(o,"groupLabel",r),o)]);return a.every((function(e){return i.some((function(t){return t.hasOwnProperty(e)}))}))&&P((function(e){return[].concat(X(e),[ne({},n,r)])})),i}))}(t.key,t.label,e,H[e].label)}}),Object(r.createElement)("div",null,t.label))}))))})))):Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(a.__)("Columns","wp-marketing-automations")),Object(r.createElement)(_.a,{isSecondary:!0,className:"bwf-btn-small is-border",onClick:function(){return w(!0)}},Object(a.__)("Add New Columns","wp-marketing-automations"))),f&&F?Object(r.createElement)(ue,{helperContainer:k.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:N,onRemove:function(e,t){var n=H[t].fields.map((function(e){return e.key}));C((function(r){var a=r.filter((function(t){return!t.hasOwnProperty(e)}));return n.every((function(e){return a.hasOwnProperty(e)}))||P((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))})),a}))},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;t!==n&&C((function(e){return Object(Q.d)(e,t,n)}))}}):Object(r.createElement)(fe,{type:"fields"}))),Object(r.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(r.createElement)(_.a,{onClick:function(){return t()},disabled:s},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,onClick:J,disabled:s,isBusy:s},Object(a.__)("Save","wp-marketing-automations"))))},fe=function(e){var t=e.type,n=void 0===t?"add-col":t;return X(Array(5)).map((function(e,t){return Object(r.createElement)("div",{key:"bwf-preferences-placeholder-".concat(t),className:"bwf-contact-preferences__add-col-group"},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===n?"bwf-w-90":"bwf-w-120")})),"fields"===n&&Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===n?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},pe=function(e){var t=e.refreshTable,n=e.setModelData,c=ce(Object(r.useState)(!1),2),o=c[0],i=c[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small "+(o?"is-active":""),onClick:function(){return i(!0)},style:{width:"30px",padding:"7px"},title:Object(a.__)("Column Preference","wp-marketing-automations")},Object(r.createElement)(y.a,{icon:"filters",size:16})),o&&Object(r.createElement)(be,{onRequestClose:function(){return i(!1)},refreshTable:t,setModelData:n}))},de=n(66),Oe=n(318),je=n(944),we=n(75),ge=n(176),ve=n(39),ye=n(304),he=n(303);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ne(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ne(c,r,a,o,i,"next",e)}function i(e){Ne(c,r,a,o,i,"throw",e)}o(void 0)}))}}function xe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=function(e){var t=Object(r.useContext)(l.h),n=Ie(Object(r.useState)(!1),2),c=n[0],o=n[1],w=Ie(Object(r.useState)(!1),2),h=w[0],E=w[1],k=Ie(Object(r.useState)({}),2),S=k[0],N=k[1],C=Ie(Object(r.useState)(!1),2),x=C[0],I=C[1],L=Ie(Object(r.useState)(!1),2),R=L[0],B=L[1],q=Object(O.a)(),G=Object(j.a)(),V=e.query,W=e.isExport,H=e.setExport,K=e.isImport,J=e.setImport,Q=e.menuButtons,X=e.pitchData,ee=V.path,te=V.page,ne=V.filter,re=xe(V,["path","page","filter"]),ae=Object(r.useRef)(re),ce=Ie(Object(r.useState)({status:!1}),2),oe=ce[0],ie=ce[1],le=Ie(Object(r.useState)({status:!1,contactInfo:{}}),2),se=le[0],ue=le[1],me=Ie(Object(r.useState)({loading:!1,status:!1}),2),be=me[0],fe=me[1],Ee=Ie(Object(r.useState)({status:!1,contactInfo:{}}),2),ke=Ee[0],Ne=Ee[1],Ae=G.fetchListing,Te=Object(Y.a)().setSingleContactListData,$e=Ie(Object(r.useState)([]),2),De=$e[0],Fe=$e[1],Le=Ie(Object(r.useState)(!1),2),Me=Le[0],Re=Le[1],Be=function(){ut&&ut(),Fe([]),setTimeout((function(){Ue.reset()}),2500)},Ue=Object(je.a)(function(){var e=Ce(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({path:Object(l.u)("/v3/contacts/"),method:"DELETE",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){Be(),Ae(V,0,Ye,!0)},onError:function(){}}),ze=Object(r.useCallback)((function(e,t){switch(e){case"delete":Fe(t),Re(!0)}}),[]),qe=q.getPageNumber,Ge=q.getPerPageCount,Ve=q.getTotalCount,We=q.getLoading,He=q.getContacts,Ke=q.getError,Je=He(),Ze=qe(),Ye=Ge(),Qe=Ve(),Xe=We(),et=Ke();Object(r.useEffect)((function(){Ae(V,0,25,!0),I(!0)}),[]),Object(r.useEffect)((function(){Object(l.Zb)(re,ae.current)||Ae(V,0,25,!0),ae.current=re}),[V]),Object(r.useEffect)((function(){Xe||B(!1)}),[Xe]),Object(r.useEffect)((function(){!W&&x&&Ae(V,0,25,!0)}),[W]),Object(r.useEffect)((function(){!K&&x&&Ae(V,0,25,!0)}),[K]);var tt,nt=function(e){var t=e.f_name,n=void 0===t?"":t,a=e.l_name,c=void 0===a?"":a,o=e.id,i=void 0===o?"":o;return Object(r.createElement)(m.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+i,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),Te(Object(l.Ub)([n,c]," ")),Object($.k)({page:"autonami",path:"/contact/"+parseInt(i)},"/",{})}},Object(r.createElement)(ye.a,{contact:e,hideJoiningDate:!0}))},rt=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email?Object(r.createElement)(d.a,{justify:"justify",align:"top"},Object(r.createElement)(d.c,null,e.email)):"-")},at=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){}},Object(r.createElement)(m.a,{to:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),Te(Object(l.Ub)([e.f_name,e.l_name]," ")),Object($.k)({path:"/contact/"+parseInt(e.id)},"/",{})}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){ue({status:!0,contactInfo:e}),n()}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){Ne({status:!0,contactInfo:e}),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){ie({status:!0,contactID:e.id,data:e}),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},ct=Object(r.useMemo)((function(){var e={};if(Array.isArray(Je)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Pe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}(Je);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[Je]),ot=Object(F.b)(ct),it=ot.singleSelectProps,lt=ot.selectAllProps,st=ot.floatingBarProps,ut=ot.resetSelection,mt=ot.selected,bt=void 0===mt?[]:mt,ft=Object.keys(bt).filter((function(e){return bt[e]})).length,pt=bwfcrm_contacts_data.table_column_data.contactv2,dt=function(e){e!==Ye&&Ae(V,0,e)},Ot=function(){Ae(V,0,Ye,!0)},jt=i()("bwfcrm-contacts-list",{"has-search":!0}),wt=function(){var e=Ce(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,g()({path:Object(l.u)("/v3/contacts/".concat(n,"/")),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.p)(null==e?void 0:e.message));t(e.message),o(!1),ie({}),Ae(V,0,Ye,!0)})).catch((function(e){throw Error(Object(l.p)(null==e?void 0:e.message))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),ie(_e(_e({},oe),{},{content:e.t0.message})),o(!1);case 10:Object(l.wb)(t,3e3);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),gt={0:{label:Object(a.__)("Unverified","wp-marketing-automations"),statusclass:"bwf-tags bwf-tag-gray"},1:{label:Object(a.__)("Subscribed","wp-marketing-automations"),statusclass:"bwf-tags bwf-tag-blue"},2:{label:Object(a.__)("Bounced","wp-marketing-automations"),statusclass:"bwf-tags bwf-tag-red"},3:{label:Object(a.__)("Unsubscribed","wp-marketing-automations"),statusclass:"bwf-tags bwf-tag-orange"}},vt=function(e,t){if(""===t||Object(u.isUndefined)(t)||Object(u.isNull)(t)||!e.hasOwnProperty(t)||Object(u.isNull)(e[t])||Object(u.isUndefined)(e[t])||""===e[t])return"-";if("status"===t){var n=gt.hasOwnProperty(parseInt(e[t]))?gt[parseInt(e[t])]:gt[0];return Object(r.createElement)("span",{className:n.statusclass},n.label)}if("country"===t){var c=e.country?D[e.country]:"";return Object(r.createElement)(d.a,{justify:"start"},Object(r.createElement)(Oe.a,{code:e[t],size:15}),c&&Object(r.createElement)("span",{style:{textAlign:"left"}},c))}return"total_order_value"===t?Object(r.createElement)("span",{className:"bwf-tags bwf-tag-revenue",dangerouslySetInnerHTML:{__html:e[t]}}):Object(u.isArray)(e[t])?(o=e[t],i=[],l=[],Object(u.isEmpty)(o)?"-":(o.map((function(e){Object(u.isEmpty)(e)||(i.length<5&&(e.hasOwnProperty("link")&&""!==e.link?i.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(e.link),target:"_blank",key:e.id,rel:"noreferrer"},e.name)):i.push(e.name)),e.hasOwnProperty("link")&&""!==e.link?l.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(e.link),target:"_blank ",key:e.id},e.name)):l.push(Object(r.createElement)("span",{key:e.id},e.name)))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},!Object(u.isEmpty)(i)&&i.map((function(e,t){return Object(r.createElement)("span",{key:t},e,t!==i.length-1&&", ")})),!Object(u.isEmpty)(l)&&l.length>5&&Object(r.createElement)(T.a,{items:l,count:5}))))):Object(u.isBoolean)(e[t])?e[t]?Object(a.__)("Yes","wp-marketing-automations"):Object(a.__)("No","wp-marketing-automations"):Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e[t]}});var o,i,l},yt=0===parseInt(ft)?Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)(_.a,{className:"bwf-btn-small is-light",key:"export",onClick:function(){Object(l.Jb)()?H(!0):(N({isFeature:!0,featureTitle:Object(a.__)("Contacts Export","wp-marketing-automations"),proLink:Object(l.T)("upgrade",{utm_medium:"Contacts+Export+Upgrade+Modal"})}),E(!0))}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.Jb)()?Object(r.createElement)(y.a,{icon:"export",size:14}):Object(r.createElement)(y.a,{icon:"king",size:16}),Object(a.__)("Export","wp-marketing-automations"))),Object(r.createElement)(_.a,{className:"bwf-btn-small is-light",key:"import",onClick:function(){Object(l.Jb)()?J(!0):(N({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations"),proLink:Object(l.T)("upgrade",{utm_medium:"Contacts+Import+Upgrade+Modal"})}),E(!0))}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.Jb)()?Object(r.createElement)(y.a,{icon:"import",size:14}):Object(r.createElement)(y.a,{icon:"king",size:16}),Object(a.__)("Import","wp-marketing-automations"))),Object(r.createElement)(Z,{refreshTable:Ot}),Object(r.createElement)(pe,{refreshTable:Ot,setModelData:fe})):Object(r.createElement)(r.Fragment,null),ht=Xe||et||Qe>0||"advanced"===ne||!Object(u.isEmpty)(re)&&re.hasOwnProperty("s")&&""!==re.s||R;return Object(r.createElement)(r.Fragment,null,oe&&oe.status&&Object(r.createElement)(p.Modal,{onRequestClose:function(){return ie({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},oe.confirm?Object(r.createElement)(A.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact?","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return ie({})},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{wordBreak:"break-word"}},oe.content?oe.content:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to delete this contact ","wp-marketing-automations"),Object(r.createElement)("strong",null,"".concat(oe.data&&oe.data.f_name," ").concat(oe.data&&oe.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-mt-20"},oe.content?Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){ie({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){ie({status:!1})},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{className:"bwf-delete-btn",isBusy:c,onClick:function(){wt(oe.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(r.createElement)("div",{className:"bwf-content-header-new"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(a.__)("All Contacts","wp-marketing-automations")),parseInt(Qe)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a._n)("(%s Result)","(%s Results)",Qe,"wp-marketing-automations"),Qe))),Object(r.createElement)("div",{className:"bwf-content-header-right"},ht&&!Xe&&Q)),ht?Object(r.createElement)(s.a,{className:jt,rows:Object(u.isEmpty)(Je)?[]:Je.map((function(e){var t=[{display:it[e.id]&&Object(r.createElement)(z.a,Se({type:"checkbox",checked:!1,onChange:function(){}},it[e.id])),value:null},{display:at(e),value:null},{display:nt(e),value:Object(l.Ub)([e.f_name,e.l_name]," ")},{display:rt(e),value:""},{display:Object(u.isEmpty)(Object(u.trim)(e.creation_date))?"-":e.creation_date,value:e.creation_date}];return pt.map((function(n){var r=_e({},n);delete r.label,delete r.groupKey,delete r.groupLabel;var a=Object.keys(r)[0];t.push({display:vt(e,a),value:"-"})})),t})),headers:(tt=[{key:"select_contact",label:Object(r.createElement)(z.a,Se({type:"checkbox",checked:!1,onChange:function(){}},lt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"f_name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"},{key:"contact_details",label:Object(a.__)("Email","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210 bwf-word-break"},{key:"created_on",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],pt.map((function(e){Object(u.isObject)(e)&&tt.push({key:Object.keys(e).find((function(t){return e[t]==(null==e?void 0:e.label)})),label:null==e?void 0:e.label,isLeftAligned:!0,cellClassName:e.hasOwnProperty("label")&&(e.label.toLocaleLowerCase().includes("tag")||e.label.toLocaleLowerCase().includes("list")||e.label.toLocaleLowerCase().includes("product")||e.label.toLocaleLowerCase().includes("category"))?"bwf-max-w-360":"bwf-w-150"})})),tt),query:{paged:Ze,order:V.order,orderby:V.orderby},rowsPerPage:Ye,totalRows:Qe,isLoading:Xe,onPageChange:function(e,t){Ae(V,(e-1)*Ye,Ye)},onQueryChange:function(e){return"per_page"!==e?function(){}:dt},actions:ft>0?[Object(r.createElement)(F.a,Se({key:"contact-bulk-action",actions:[{id:"delete",icon:"trash",hint:Object(a.__)("Delete","wp-marketing-automations")}],onAction:ze,inLine:!0,reset:Be},st))]:[Object(r.createElement)(ge.a,{key:"search",isLoading:Xe,searchTerm:null==re?void 0:re.s,showResultCount:!1,setSearchData:function(e){if(Object(u.size)(e))Object($.k)({s:e},"/",V);else{var t=Object(u.cloneDeep)(V);t.hasOwnProperty("s")&&(null==t||delete t.s),B(!0),Object($.k)(t,"/",{})}}}),Object(r.createElement)(we.b,{onChange:function(e){B(!0),"all"===e&&Object($.k)({page:te},ee,{}),"filters"===e&&Object($.k)({filter:"advanced"},ee,V)},options:[{key:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{key:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],selected:V.hasOwnProperty("filter")&&"advanced"===V.filter?"filters":"all",key:"select-contact",className:"bwf-w-150"}),Object(r.createElement)(M.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:yt,showMenu:!1,beforeTable:Object(r.createElement)(U,{query:V,isOpen:V.hasOwnProperty("filter")&&"advanced"===V.filter})}):Object(r.createElement)(he.a,{data:X}),se.status&&Object(r.createElement)(v.a,{contact:se.contactInfo,setSendMessageModel:ue}),ke.status&&Object(r.createElement)(P,{contact:ke.contactInfo,setModelStatus:Ne}),Object(r.createElement)(de.a,{modalTitle:Object(a._n)("Delete Contact","Delete Contacts",De.length,"wp-marketing-automations"),deleteEntityName:1===De.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations")," "),De[0].f_name," ",De[0].l_name):Object(r.createElement)(r.Fragment,null,De.length," ",Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations"))),confirmButtonText:Object(a.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var e={contacts:De.map((function(e){return e.id}))};Ue.mutate(e)},isLoading:Ue.isLoading,successMessage:Ue.isSuccess&&Object(a.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:Ue.isError&&(Ue.error&&Ue.error.message?Ue.error.message:Object(a.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){Be(),Re(!1)},isOpen:Me,confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}),Object(r.createElement)(de.a,{modalTitle:be.modalTitle,deleteEntityName:be.deleteEntityName,confirmText:be.confirmText,confirmButtonText:be.buttonConfirm,cancelButtonText:be.buttonCancel,onConfirm:be.onConfirm,isLoading:be.loading,successMessage:be.success,errorMessage:be.error,content:be.content,onRequestClose:function(){return fe({status:!1})},isOpen:be.status,isDelete:!be.hasOwnProperty("isDelete")||be.isDelete}),!Object(l.Jb)()&&Object(r.createElement)(ve.b,{isOpen:h,onRequestClose:function(){return E(!1)},modalContent:S}))};Te.defaultProps={contacts:[]};var $e=Te,De=n(76),Fe=n(152),Le=n(1009),Me=n(314),Re=n(316),Be=n(963),Ue=n(972);function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qe(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var We={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},He=function(e){var t=Object(r.useContext)(l.h),n=Ge(Object(r.useState)([]),2),c=n[0],o=n[1],i=Ge(Object(r.useState)([]),2),s=i[0],m=i[1],b=Ge(Object(r.useState)(null),2),f=b[0],d=b[1],O=Ge(Object(r.useState)(null),2),w=O[0],v=O[1],h=Ge(Object(r.useState)(We),2),k=h[0],S=h[1],N=Ge(Object(r.useState)(!1),2),C=N[0],x=N[1],I=Ge(Object(r.useState)({}),2),P=I[0],T=I[1],D=Object(Y.a)().setSingleContactListData,F=function(){var n,r=(n=regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x(!0),n.prev=1,n.next=4,g()({path:Object(l.u)("/v3/contacts"),method:"POST",data:r}).then((function(n){if(200!=n.code)throw Error(Object(l.p)(null==n?void 0:n.message));t(n.message),T({}),x(!1),D(Object(l.Ub)([r.f_name,r.l_name]," ")),Object($.k)({page:"autonami",path:"/contact/"+parseInt(n.result.id)},"/",{}),e.onCloseModal()})).catch((function(e){throw Error(Object(l.p)(null==e?void 0:e.message))}));case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(1),x(!1),d(n.t0);case 10:Object(l.wb)(t,3e3);case 11:case"end":return n.stop()}}),n,null,[[1,6]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var c=n.apply(e,t);function o(e){qe(c,r,a,o,i,"next",e)}function i(e){qe(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),L=function(e){var t={};return!Object(u.isEmpty)(e.email)&&Object(Fe.a)(e.email?e.email:"")||(t.email=Object(u.isEmpty)(e.email)?Object(a.__)("Email is required","wp-marketing-automations"):Object(a.__)("Email is not valid","wp-marketing-automations")),Object(u.isEmpty)(e.phone)||Object(Le.a)(e.phone?e.phone:"")||(t.phone=Object(a.__)("Phone is not valid","wp-marketing-automations")),t},M=Object(j.a)().fetch,R=e.query,B=function(){w&&(v(null),M(R,0,25)),e.onCloseModal()};return Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-add-new-contact-modal "},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Contact","wp-marketing-automations")),Object(r.createElement)("span",{onClick:B,className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),f&&Object(r.createElement)(E.a,{status:"error",onRemove:function(){return d(null)}},f.hasOwnProperty("message")?f.message:Object(a.__)("Unknown Error while creating contact","wp-marketing-automations")),P.error||P.success?P&&P.success&&P.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(Me.a,null),Object(r.createElement)("div",{className:"bwf-h1"},P.message)):P&&P.error&&P.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(Re.a,null),Object(r.createElement)("div",{className:"bwf-h1"},P.message)):Object(r.createElement)(A.a,null):Object(r.createElement)(De.a,{validate:L,onSubmitCallback:function(e){var t=e.email,n=e.f_name,r=e.l_name,a=e.marketing_status,o=e.phone,i=[];Object(u.isEmpty)(c)||c.map((function(e){i.push({id:e.key,value:e.label})}));var l=[];Object(u.isEmpty)(s)||s.map((function(e){l.push({id:e.key,value:e.label})})),S({email:t,f_name:n,l_name:r,contact_no:o,status:a,tags:i,lists:l}),F({email:t,f_name:n,l_name:r,contact_no:o,status:a,tags:i,lists:l})},initialValues:k},(function(e){var t=e.getInputProps,n=e.values,i=e.errors,l=e.handleSubmit,b=e.touched;return Object(r.createElement)("div",{className:"bwf-form-fields"},Object(r.createElement)("div",null,Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-input-label",id:"required"},Object(a.__)("Email","wp-marketing-automations")),Object(r.createElement)(p.TextControl,ze({disabled:C,type:"email",help:Object(a.__)("Required","wp-marketing-automations")},t("email"))),(null==b?void 0:b.email)&&(null==i?void 0:i.email)&&Object(r.createElement)("div",{className:"bwf-error-text"},null==i?void 0:i.email)),Object(r.createElement)(p.TextControl,ze({disabled:C,label:Object(a.__)("Phone","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("phone"))),(null==b?void 0:b.phone)&&i.hasOwnProperty("phone")&&Object(r.createElement)("div",{className:"bwf-error-text"},null==i?void 0:i.phone),Object(r.createElement)(p.TextControl,ze({disabled:C,label:Object(a.__)("First Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("f_name"))),Object(r.createElement)(p.TextControl,ze({disabled:C,label:Object(a.__)("Last Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("l_name"))),Object(r.createElement)(Be.a,{onTagsChange:o,selected:c}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(Ue.a,{onListsChange:m,selected:s}),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",null,Object(r.createElement)(z.a,ze({type:"checkbox",disabled:C,label:Object(a.__)("Mark Contact as Subscribed","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("marketing_status")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:B},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{onClick:function(){L(n)&&l()},className:Object(u.size)(i)||L(n)?"bwf-no-ripple":"",isPrimary:!0,isBusy:C},Object(a.__)("Add","wp-marketing-automations"))))})))};He.defaultProps={onCloseModal:function(){}};var Ke=He,Je=n(339),Ze=n(315),Ye=n(49),Qe=n(74),Xe=n(121),et=(n(1099),n(52));function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ct=function(){var e=Object(et.a)("exporter"),t=e.getStateProp;return nt(nt({},at(e,["getStateProp"])),{},{getExporter:function(){return t("export")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getExistingExport:function(){return t("existingExport")}})},ot=n(51);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){st(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var mt=function(){var e=Object(ot.a)("exporter"),t=e.fetch,n=e.setStateProp;return lt(lt({},ut(e,["fetch","setStateProp"])),{},{fetch:function(e,n,r){t("GET",Object(l.u)("/contact/export?limit=".concat(e,"&offset=").concat(n,"&search=").concat(r)))},setStateExportValues:function(e,t){n(e,t)}})},bt=n(984);function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gt=function(e){var t=e.isAdd,n=Object($.i)(),c=Object(L.a)(),o=jt(Object(r.useState)({loading:!1,status:!1}),2),i=o[0],m=o[1],O=jt(Object(r.useState)(!1),2),j=O[0],w=O[1],v=jt(Object(r.useState)({}),2),h=v[0],E=v[1],_=n.s,k=void 0===_?"":_,S=mt(),N=S.fetch,C=S.setStateExportValues,x=ct(),I=x.getExporter,P=x.getOffset,A=x.getLoading,T=x.getTotalCount,D=x.getPageNumber,F=x.getPerPageCount,M=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},{key:"status",label:"Status",isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],R=I(),B=D(),U=F(),z=T(),q=P(),G=A(),V=Object(Qe.a)().setPageCountData;Object(r.useEffect)((function(){V({contacts_export:z})}),[z]),Object(r.useEffect)((function(){t||N(U,q,k)}),[U,q,k,t]);var W,H=function(e){e!==U&&C("limit",e)},K=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},m(pt(pt({},n),{},{status:!0})),e.prev=2,e.next=5,g()({path:Object(l.u)("/contact/export/delete/".concat(t)),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.p)(null==e?void 0:e.message));m({}),N(U,q,k)})).catch((function(e){throw Error(Object(l.p)(null==e?void 0:e.message))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),m({status:!0,error:e.t0.message?e.t0.message:Object(a.__)("Error in deleting export","wp-marketing-automations")});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ot(c,r,a,o,i,"next",e)}function i(e){Ot(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),J=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){E(e),w(!0),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(r.createElement)(r.Fragment,null,Object(a.__)("item ")," ",e.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};m(pt(pt({},t),{},{onConfirm:function(){return K(e.id,t)}})),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},Z={1:"In Progress",2:"Failed",3:"Completed"},Y=function(e){return 3===parseInt(e.status)&&e.file?Object(r.createElement)("a",{target:"_blank",href:Object(l.hb)()+"/wp-json"+Object(l.u)("/contact/export/download/".concat(e.id,"?bwf-nonce=").concat(Object(l.z)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",rel:"noreferrer"},Object(r.createElement)("div",{className:"bwf-download-btn"},Object(r.createElement)("span",null,Object(r.createElement)(y.a,{icon:"download"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-download-btn disable"},Object(r.createElement)("span",null,Object(r.createElement)(y.a,{icon:"download",color:"#353030"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))},Q=Object(u.isEmpty)(R)?[]:R.map((function(e){return[{display:J(e),value:"action"},{display:e.title?e.title:"-",value:e.title},{display:(n=e.created_date,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(l.W)(n)))),value:""},{display:e.count,value:e.count},{display:(t=e,Object(r.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(t.status)},Z[parseInt(t.status)])),value:e.status},{display:Y(e),value:""}];var t,n}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)(s.a,{title:"",className:"bwf-export-contact-table",rows:Q,headers:M,query:{paged:B},rowsPerPage:U,totalRows:z,isLoading:G,onPageChange:function(e,t){C("offset",(e-1)*U)},onQueryChange:function(e){return"per_page"!==e?function(){}:H},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(a.__)("No export available","wp-marketing-automations")}),Object(r.createElement)(de.a,{modalTitle:Object(a.__)("Delete"),confirmText:i.confirmText,deleteEntityName:i.deleteEntityName,confirmButtonText:i.buttonConfirm,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,onRequestClose:function(){return m({status:!1})},isOpen:i.status,isDelete:!0}),j&&!Object(u.isEmpty)(h)&&Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Export Details","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return w(!1)},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),(W=[],Object(u.isEmpty)(h.fields)||h.fields.map((function(e){var t=jt(Object.entries(e)[0],2),n=t[0];t[1],c.hasOwnProperty(n)&&W.push(c[n].labels.add)})),Object(r.createElement)(r.Fragment,null,h.hasOwnProperty("filters")&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Filters","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(u.isEmpty)(e)?"-":Object(r.createElement)(r.Fragment,null,Object(bt.b)(e))}(h.filters))),!Object(u.isEmpty)(W)&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Fields","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},W.join(" | ")))))))},vt=function(e){var t=e.setAdd,n=e.isAdd;return Object(r.useEffect)((function(){Object(l.k)(Object(a.__)("Export List","wp-marketing-automations"))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt,{setAdd:t,isAdd:n}))},yt=n(312),ht=(n(172),n(943));function Et(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var _t=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({path:Object(l.u)("/contact/export/custom-selections")});case 2:if((t=e.sent)&&t.result){e.next=5;break}throw new Error(Object(a.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 5:return e.abrupt("return",t.result);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Et(c,r,a,o,i,"next",e)}function i(e){Et(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),kt=function(){return Object(ht.a)(["bwfcrm-get-export-selections"],_t)};function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xt=function(e){var t=e.checked,n=void 0!==t&&t,a=e.onChange,c=void 0===a?function(){}:a,o=e.title,i=void 0===o?"":o,l=e.count,s=void 0===l?0:l,u=e.groupKey,m=void 0===u?"":u,b=e.selectedGroup,f=void 0===b?"":b,p=e.setSelectedGroup,d=void 0===p?function(){}:p;return Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||d(f==m?"":m)}},Object(r.createElement)("div",null,Object(r.createElement)(z.a,{className:"bwf-export-toggler",checked:n,onChange:c,label:Object(r.createElement)(r.Fragment,null,i,s>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",s," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(y.a,{icon:"tailless-arrow-down-new",size:15})))},It=function(e){var t=e.selected,n=e.onChange,a=e.selectedGroup,c=e.setSelectedGroup,o=kt(),i=o.isLoading,l=o.data,s=Array.isArray(t)?t.map((function(e){return Object.keys(e)[0]})):[],u=function(e,r){if(e)n([].concat(Nt(t),[r]));else{var a=t.filter((function(e){return Object.keys(e)[0]!==Object.keys(r)[0]}));n(a)}},m=function(e,r){var a=l[r].selections,c=Object.keys(a);if(e){var o=c.map((function(e){return!s.includes(e)&&St({},e,a[e].name)})).filter(Boolean);n([].concat(Nt(t),Nt(o)))}else{var i=t.filter((function(e){return!c.includes(Object.keys(e)[0])}));n(i)}};return i?Object(r.createElement)(r.Fragment,null):Object.keys(l).map((function(e,n){var o,i=l[e],b=i.name,f=i.selections,p=Object.keys(l[e].selections).filter((function(e){return s.includes(e)}));return Object(r.createElement)("div",{className:"bwf-export-field-section",key:n},Object(r.createElement)(xt,{title:b,checked:(o=e,Object.keys(l[o].selections).filter((function(e){return s.includes(e)})).length===Object.keys(l[o].selections).length),groupKey:e,onChange:function(t){return m(t,e)},count:Array.isArray(p)?p.length:0,selectedGroup:a,setSelectedGroup:c}),a==e&&Object(r.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(f).map((function(e,n){var a=Array.isArray(t)&&t.find((function(t){return!!t[e]}));return Object(r.createElement)("div",{key:n},Object(r.createElement)(z.a,{label:f[e].name,className:"bwf-export-field",checked:a,onChange:function(t){return u(t,St({},e,f[e].name))}}))}))))}))};function Pt(e){return function(e){if(Array.isArray(e))return $t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||Tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){if(e){if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dt=function(e){var t=e.title,n=e.setTitle,c=e.selected,o=e.setSelected,i=e.setStep,l=e.expfilter,s=At(Object(r.useState)("contact_details"),2),m=s[0],b=s[1],f=At(Object(r.useState)(""),2),d=f[0],O=f[1],j=Object($.i)(),w=Object(L.a)(),g=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(w).map((function(n){var r=At(n,2),a=r[0],c=r[1];if(t.includes(a))return!1;var o;o={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(o):e[c.group]={label:c.groupLabel,fields:[o]}})),e}),[w]);Object(r.useEffect)((function(){if(Object(u.isEmpty)(c)&&g.hasOwnProperty("contact_details")){var e=[];g.contact_details.fields.map((function(t){var n={};n[t.key]=t.label,e.push(n)})),o(e)}}),[]);var v=function(e){var t=!1;return c.find((function(n){var r=At(Object.entries(n)[0],2),a=r[0];r[1];e==a&&(t=!0)})),t},h=function(e,t){var n=0,a=!1;return g[e].fields.map((function(e){v(e.key)&&n++})),parseInt(g[e].fields.length)===parseInt(n)&&(a=!0),Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||b(m==e?"":e)}},Object(r.createElement)("div",null,Object(r.createElement)(z.a,{checked:a,className:"bwf-export-toggler",onChange:function(t){!function(e,t){var n=Pt(c);e?g[t].fields.map((function(e){if(!v(e.key)){var t={};t[e.key]=e.label,n.push(t)}})):g[t].fields.map((function(e){v(e.key)&&(n=n.filter((function(t){var n=At(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))})),o(n)}(t,e)},label:Object(r.createElement)(r.Fragment,null,t,n>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",n," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(y.a,{icon:"tailless-arrow-down-new",size:15})))},_=Object(r.createElement)(r.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(e,t){return g.hasOwnProperty(e)?Object(r.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(t)},h(e,g[e].label),m==e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(r.createElement)("div",{className:"bwf-export-field-list"},e.map((function(e,t){return Object(r.createElement)(z.a,{label:e.label,checked:v(e.key),onChange:function(t){if(t){var n=Pt(c),r={};r[e.key]=e.label,n.push(r),o(n)}else o(c.filter((function(t){var n=At(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))},key:"bwf-export-field-".concat(t)})})))}(g[e].fields)):["woocommerce","contact_custom_fields"].includes(e)?"":function(e){return Object(r.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(e)},Object(r.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(r.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(e)&&Object(r.createElement)("div",{className:"bwf-export-field-list"},Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(t)})),Object(r.createElement)(It,{selected:c,onChange:function(e){o(e)},selectedGroup:m,setSelectedGroup:b}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)(E.a,{status:"error",onRemove:function(){return O("")}},d),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(r.createElement)(p.TextControl,{type:"text",value:t,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),label:Object(r.createElement)("span",{className:"bwf-h4"},Object(a.__)("Name","wp-marketing-automations")),onChange:function(e){n(e)}}),Object(r.createElement)("div",{className:"bwf-field-wrapper"},_)),Object(r.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(r.createElement)("div",null),Object(r.createElement)(p.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(u.isEmpty)(t)?O(Object(a.__)("Name is required.","wp-marketing-automations")):Object(u.isEmpty)(c)?O(Object(a.__)("Please select field to export.","wp-marketing-automations")):(Object(u.isEmpty)(l)||Object($.k)(l,"/",j),i(2))}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},Ft=n(50),Lt=n(33);function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bt=Object(Ft.a)(Object(l.kb)()).formatAmount,Ut=function(e){var t=e.setContactCount,n=function(e){var t=Object(u.isEmpty)(e.country)?"":D[e.country],n=Object(l.Ub)([e.city,e.state,t],", ");return Object(u.isEmpty)(Object(u.trim)(n))?"":n},c=function(e){var t=n(e);return e.country||t?Object(r.createElement)(d.a,{justify:"start"},!Object(u.isEmpty)(e.country)&&Object(r.createElement)(d.c,null,Object(r.createElement)(Oe.a,{code:e.country,size:18})),Object(r.createElement)(d.c,null,t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,n(e)),Object(r.createElement)("br",null)))):"-"},o=function(e){return Object(r.createElement)(Lt.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,className:"bwf-a-no-underline"},Object(r.createElement)(ye.a,{contact:e,hideJoiningDate:!0}))},m=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(d.a,{justify:"start",align:"top"},Object(r.createElement)(d.c,null,Object(r.createElement)(y.a,{icon:"mail"})),Object(r.createElement)(d.c,null,Object(r.createElement)(Lt.a,{href:"mailto:"+e.email,className:"bwf-a-no-underline",type:"external"},e.email))),e.phone&&Object(r.createElement)(d.a,{justify:"start",align:"top"},Object(r.createElement)(d.c,null,Object(r.createElement)(y.a,{icon:"phone"})),Object(r.createElement)(d.c,null,Object(r.createElement)(Lt.a,{href:"tel:"+e.phone,className:"bwf-a-no-underline",type:"external"},e.phone))))},b=Object(O.a)(),f=b.getPageNumber,p=b.getPerPageCount,w=b.getTotalCount,g=b.getLoading,v=b.getContacts,h=Object(j.a)(),E=h.fetch,_=h.setStateProp,k=e.query;Object(r.useEffect)((function(){return _("limit",10),function(){return _("limit",25)}}),[]);var S=v(),N=f(),C=p(),x=w(),I=g(),P=Mt(Object(r.useState)(!0),2),A=P[0],T=P[1];Object(r.useEffect)((function(){A&&x>0&&T(!1),t(x)}),[x]);var $=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.Tb)()?($.push({key:"total_spent",label:Object(a.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),$.push({key:"last_order",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):$.push({key:"column_location",label:Object(a.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var F=function(e){var t=e.wc,n=t.total_order_count,c=t.total_order_value;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},c&&n?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Bt(c)," |"," ",n," ",parseInt(n)>1?Object(a.__)("orders","wp-marketing-automations"):Object(a.__)("order","wp-marketing-automations")):"-"))},L=function(e){var t=e.wc.l_order_date;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,t&&"0000-00-00"!=t?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.V)(t)):"-"))},M=S.map((function(e){var t=function(e){return Object(u.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},e)}(e),r=[{display:o(t),value:Object(l.Ub)([t.first_name,t.last_name]," ")},{display:m(t),value:"'".concat(Object(a.__)("Email","wp-marketing-automations"),": ").concat(t.email,", ").concat(Object(a.__)("Phone","wp-marketing-automations"),": ").concat(t.phone)}];return Object(l.Tb)()?(r.push({display:F(t),value:""}),r.push({display:L(t),value:""})):r.push({display:c(t),value:n(t)}),r})),R=function(e){e!==C&&E(k,0,e,!0,!1,"",!1)},B=i()("bwfcrm-contacts-list",{"has-search":!0}),U=parseInt(x)>0?" ("+parseInt(x)+")":"";return Object(r.createElement)(s.a,{className:B,title:Object(a.__)("Contacts ","wp-marketing-automations")+U,rows:M,headers:$,query:{paged:N},rowsPerPage:C,totalRows:x,isLoading:I,onPageChange:function(e,t){E(k,(e-1)*C,C,!0,!1,"",!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:R},showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations")})};Ut.defaultProps={contacts:[]};var zt=Ut,qt=n(184);function Gt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Vt=function(e){var t=e.setStep,n=e.setExportFilter,c=e.contactCount,o=e.setContactCount,i=Object(L.a)(),s=Object($.i)(),m=s.page,b=s.path,f=(s.filter,Gt(s,["page","path","filter"])),d=Object(j.a)(),O=Object(r.useRef)(f),w=d.fetch;Object(r.useEffect)((function(){w(f,0,10,!0,!1,"",!1)}),[]),Object(r.useEffect)((function(){Object(l.Zb)(f,O.current)||w(f,0,10,!0,!1,"",!1),O.current=f}),[f]);var g=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(qt.a,{numberOfRows:5,headers:[{key:"2",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return!0===i?Object(r.createElement)(r.Fragment,null,g):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-mb-16",style:{justifyContent:"space-between"}},Object(r.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(a.__)("Segment Contacts","wp-marketing-automations")),Object(r.createElement)(M.c,{addAdvance:!1})),Object(r.createElement)("div",{className:"bwf-p-0"},Object(r.createElement)(R.a,{siteLocale:"en-US",currency:Object(l.Tb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:i,footerComponent:function(e){return Object(r.createElement)(M.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:s}))),Object(r.createElement)("div",{className:"bwf-export-table-wrapper"},Object(r.createElement)(zt,{setContactCount:o}))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)(p.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(u.isEmpty)(f)||Object($.k)({page:m,path:b},"/",{}),n(f),t(1)}},Object(r.createElement)("span",null,Object(a.__)("Previous","wp-marketing-automations"))),Object(r.createElement)(p.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(c>0),onClick:function(){Object(u.isEmpty)(f)||Object($.k)({page:m,path:b},"/",{}),n(f),c>0&&t(3)}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},Wt=n(308),Ht=n(955);function Kt(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yt=function(e){var t=e.exportId,n=void 0===t?"":t,c=e.setLoading,o=e.setComplete,i=Jt(Object(r.useState)(!1),2),s=i[0],m=i[1],b=Jt(Object(r.useState)({}),2),f=b[0],p=b[1],d=Jt(Object(r.useState)(0),2),O=d[0],j=d[1],w=Jt(Object(r.useState)(!1),2),v=w[0],y=w[1];Object(r.useEffect)((function(){100===parseInt(O)&&setTimeout((function(){y(!0)}),2e3)}),[O]);var h=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"GET",path:Object(l.u)("/contact/export/".concat(n))}).then((function(e){200==e.code&&p(e.result)}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Kt(c,r,a,o,i,"next",e)}function i(e){Kt(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(!Object(u.isEmpty)(f))if(3==f.status)c(!1),m(!0),j(100),o(!0);else{var e=parseInt(f.offset)/parseInt(f.count)*100;j(e<100?parseInt(e):100)}}),[f]),Object(Ht.a)((function(){s||h()}),5e3),Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},n&&s&&v?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("h2",null,Object(a.__)("Export Completed","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Export Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:parseInt(O),text:"".concat(parseInt(O),"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))})))};function Qt(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tn=function(e){var t=e.title,n=e.fields,c=e.expfilter,o=e.setPending,i=e.setAdd,s=e.contactCount,u=Xt(Object(r.useState)(!1),2),m=u[0],b=u[1],f=Xt(Object(r.useState)(""),2),d=f[0],O=f[1],j=Xt(Object(r.useState)(!1),2),w=j[0],v=j[1],y=Xt(Object(r.useState)(!1),2),h=y[0],_=y[1],k=Xt(Object(r.useState)(Object(a.__)("Unable to create export.","wp-marketing-automations")),2),S=k[0],N=k[1];Object(r.useEffect)((function(){o(!0),C()}),[]);var C=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={title:t,fields:n,filters:c,count:s},e.next=4,g()({method:"POST",data:r,path:Object(l.u)("/contact/export/add")}).then((function(e){200==e.code&&(Object(l.P)()||(bwfcrm_contacts_data.first_export_id=2),b(!0),e.result.hasOwnProperty("id")&&O(e.result.id))}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),b(!0),v(!0),e.t0.hasOwnProperty("message")&&N(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Qt(c,r,a,o,i,"next",e)}function i(e){Qt(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return h&&setTimeout((function(){document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps")[0].remove()}),2e3),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(r.createElement)("div",{style:{alignItems:"center"}},m?Object(r.createElement)(r.Fragment,null,d?Object(r.createElement)(Yt,{exportId:d,setLoading:o,setComplete:_}):Object(r.createElement)("div",{className:"bwf-h4"},w&&Object(r.createElement)(E.a,{status:"error",isDismissible:!1},S))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-display-flex"},m?Object(r.createElement)(r.Fragment,null,h?Object(r.createElement)(p.Button,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){window.open(Object(l.hb)()+"/wp-json"+Object(l.u)("/contact/export/download/".concat(d,"?bwf-nonce=").concat(Object(l.z)())),"_blank")}},Object(a.__)("Download File","wp-marketing-automations")):Object(r.createElement)(p.Button,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){i(!1)}},Object(r.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Go to Export List","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_30"}))};function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var an=function(e){var t=e.setAdd,n=nn(Object(r.useState)(!1),2),c=n[0],o=(n[1],nn(Object(r.useState)(1),2)),i=o[0],l=o[1],s=nn(Object(r.useState)(!1),2),u=s[0],m=s[1],b=nn(Object(r.useState)(""),2),f=b[0],d=b[1],O=nn(Object(r.useState)([]),2),j=O[0],w=O[1],g=nn(Object(r.useState)([]),2),v=g[0],y=g[1],h=nn(Object(r.useState)(0),2),E=h[0],_=h[1],k=function(e){switch(e){case 1:return Object(r.createElement)(Dt,{title:f,setTitle:d,selected:j,expfilter:v,setSelected:w,setStep:l});case 2:return Object(r.createElement)(Vt,{setStep:l,setExportFilter:y,contactCount:E,setContactCount:_});case 3:return Object(r.createElement)(tn,{title:f,fields:j,expfilter:v,contactCount:E,setPending:m,setAdd:t})}},S=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:k(1)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:k(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:k(3)}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Modal,{onRequestClose:function(){return t(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Create Export","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-crm-export-init"},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(A.a,null)):Object(r.createElement)(yt.a,{steps:S,currentStep:i,isPending:u}))))};function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return on(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ln=function(e){var t=e.setExport,n=cn(Object(r.useState)(!1),2),c=n[0],o=n[1];Object(r.useEffect)((function(){Object(l.k)(Object(a.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(y.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(a.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.Jb)()&&o(!0)}}]}}];return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-export-modal-header"},Object(r.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Export Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-display-flex gap-24"},!c&&Object(l.P)()&&Object(r.createElement)(p.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return o(!0)},isBusy:!1,disabled:!1},Object(a.__)("Create Export","wp-marketing-automations")),Object(r.createElement)("div",{onClick:function(){Object(l.k)(Object(a.__)("Contacts","wp-marketing-automations")),Object($.k)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(r.createElement)(y.a,{icon:"close"})))),c&&Object(r.createElement)(an,{setAdd:o}),Object(l.P)()?Object(r.createElement)(vt,{setAdd:o,isAdd:c}):Object(r.createElement)(he.a,{data:i}))};n(1010);function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fn=function(){var e=Object(et.a)("importerReducer"),t=e.getStateProp;return un(un({},bn(e,["getStateProp"])),{},{showBackButton:function(){return t("showBackButton")},getExistingImports:function(){return t("existingImports")}})};function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wn,gn,vn,yn,hn=function(){var e=Object(ot.a)("importerReducer"),t=e.fetch,n=e.setStateProp;return dn(dn({},jn(e,["fetch","setStateProp"])),{},{showBackButton:function(e){return n("showBackButton",e)},fetch:function(){return t("GET",Object(l.u)("/import/processes"))}})},En=n(7);function _n(){return(_n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var kn,Sn,Nn=function(e){return En.createElement("svg",_n({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},e),wn||(wn=En.createElement("defs",null,En.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),gn||(gn=En.createElement("g",{id:"wlm_svg__member"},En.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),vn||(vn=En.createElement("g",{id:"wlm_svg__WishList"},En.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),yn||(yn=En.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var xn=function(e){return En.createElement("svg",Cn({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},e),kn||(kn=En.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),Sn||(Sn=En.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},En.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},In=n(70),Pn=n(1035),An=n(342);n(1100);function Tn(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function $n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fn=function(e){var t=e.requestData,n=e.headersData,o=e.setImport,i=n.import_id,s=$n(Object(r.useState)(null),2),u=s[0],m=s[1],b=$n(Object(r.useState)(!0),2),f=b[0],d=b[1],O=u&&"log"in u?u.log:{},j=O.skipped,w=void 0===j?[]:j,v=O.failed,y=void 0===v?[]:v,h=O.succeed,_=void 0===h?[]:h,k=$n(Object(r.useState)(null),2),S=k[0],N=k[1],C=hn().showBackButton,x=$n(Object(r.useState)(!1),2),I=x[0],P=x[1],T=Object(r.useRef)(null),$=(location&&location.search&&Object(c.parse)(location.search.substring(1)),function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,a,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,r=t&&"useExisting"in t&&t.useExisting?{}:t,!t.useExisting&&(r.start_import=n),e.next=6,g()({method:"POST",data:r,path:Object(l.u)("/import/csv/status/".concat(i))});case 6:a=e.sent,m(a.result),a.result&&"status"in a.result&&"success"===a.result.status&&(clearInterval(T.current),C(!0),P(!0)),d(!1),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),clearInterval(T.current),C(!0),N(e.t0),d(!1);case 18:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Tn(c,r,a,o,i,"next",e)}function i(e){Tn(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}());return Object(r.useEffect)((function(){return C(!1),window.scrollTo(0,0),$(!0),T.current=setInterval((function(){return $()}),5e3),function(){clearInterval(T.current),C(!0),d(!1)}}),[]),f?Object(r.createElement)(A.a,null):S||u&&!1 in u?Object(r.createElement)(E.a,{status:"error"},S&&"message"in S?S.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):u&&"percent"in u?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:parseInt(u.percent),text:"".concat(u.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(r.createElement)("p",null,"Skipped: ",parseInt(w)>0?w:0,", Failed:"," ",parseInt(y)>0?y:0,", Success:"," ",parseInt(_)>0?_:0)),I&&Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!u&&!!u.has_log_file&&Object(r.createElement)("a",{target:"_blank",href:Object(l.hb)()+"/wp-json"+Object(l.u)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.z)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))))):null};function Ln(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bn=function(e){Object(l.k)(Object(a.__)("CSV Importer","wp-marketing-automations"));var t=Mn(Object(r.useState)(null),2),n=t[0],c=t[1],o=Mn(Object(r.useState)(null),2),i=o[0],s=o[1],u=Mn(Object(r.useState)(null),2),m=u[0],b=u[1],f=Mn(Object(r.useState)(!1),2),d=f[0],O=f[1],j=Object(r.useContext)(l.h),w=(0,fn().getExistingImports)().csv,v=e.step,y=e.setImport,h=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,(t=new FormData).append("csv",n),e.next=6,g()({method:"POST",body:t,path:Object(l.u)("/import/csv/upload")});case 6:r=e.sent,s(r.result),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),c(null),j(e.t0&&"message"in e.t0?e.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.wb)(j,3e3),O(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ln(c,r,a,o,i,"next",e)}function i(e){Ln(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&h()}),[n]),Object(r.useEffect)((function(){w&&(s({import_id:w}),b({useExisting:!0}))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==v&&!w&&!n&&!d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(An.a,{onFileSelected:function(e){return c(e)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(a.__)("Drop your CSV file here OR","wp-marketing-automations")})),d&&Object(r.createElement)(A.a,null),2==v&&i&&"import_id"in i&&!m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)(Pn.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:i,onRequestImport:function(t){b(t),e.setStep(3)},contactHeaderText:Object(a.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(a.__)("Update existing contact status","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf_clear_24"})),2==v&&!d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations")))),3==v&&m&&i&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(Fn,{requestData:m,setStep:e.setStep,setImporter:e.setImporter,headersData:i,setImport:y}))))};n(1101);function Un(e){return function(e){if(Array.isArray(e))return Gn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||qn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vn=function(e){var t=e.roles,n=void 0===t?{}:t,c=e.onRolesSelected,o=zn(Object(r.useState)(Object.keys(n)),2),i=o[0],l=o[1],s=zn(Object(r.useState)(!0),2),m=s[0],b=(s[1],zn(Object(r.useState)(!1),2)),f=b[0],d=b[1],O=zn(Object(r.useState)(!1),2),j=O[0],w=O[1],g=zn(Object(r.useState)([]),2),v=g[0],y=g[1],h=zn(Object(r.useState)([]),2),E=h[0],_=h[1],k=zn(Object(r.useState)(1),2),S=k[0],N=k[1],C={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("User Roles","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},n&&Object.keys(n).map((function(e){return Object(r.createElement)(z.a,{checked:i.includes(e),key:e,label:n[e],onChange:function(t){return function(e,t){l(e?[].concat(Un(i),[t]):i.filter((function(e){return e!==t})))}(t,e)}})})))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(Be.a,{onTagsChange:y,selected:v}),Object(r.createElement)(Ue.a,{onListsChange:_,selected:E})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){N(e.target.value)},value:Object(u.isEmpty)(S)?"":S},Object.keys(C).map((function(e){return Object(r.createElement)("option",{key:e,value:e},C[e])}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(p.ToggleControl,{checked:f,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return d(e)}}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:j,onChange:w})),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(r.createElement)(p.Button,{disabled:0===i.length,isPrimary:!0,onClick:function(){return c({roles:i,tags:v.map((function(e){return{id:e.key,value:e.label}})),lists:E.map((function(e){return{id:e.key,value:e.label}})),marketing_status:m,update_existing:f,disable_events:j,imported_contact_status:S})}},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Wn(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jn=function(e){var t=e.requestData,n=e.setImport,o=Hn(Object(r.useState)(!1),2),i=o[0],s=o[1],m=Hn(Object(r.useState)(null),2),b=m[0],f=m[1],d=Hn(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),O=d[0],j=d[1],w=b&&"log"in b?b.log:{},v=w.skipped,y=void 0===v?0:v,h=w.failed,_=void 0===h?0:h,k=w.succeed,S=void 0===k?0:k,N=Hn(Object(r.useState)(null),2),C=N[0],x=N[1],I=hn().showBackButton,P=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),A=Hn(Object(r.useState)(5e3),2),T=A[0],$=A[1],D=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P++,e.prev=1,n=parseInt(O)>0?{import_id:O}:t,parseInt(O)>0?n.start_import=!1:n.start_import=!0,e.next=6,g()({method:"POST",data:n,path:Object(l.u)("/import/wp/status")});case 6:r=e.sent,f(r.result),j(parseInt(r.result.import_id)),r.result&&"status"in r.result&&"success"===r.result.status&&($(null),I(!1),s(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),$(null),I(!1),x(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Wn(c,r,a,o,i,"next",e)}function i(e){Wn(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(Ht.a)((function(){Object(u.isEmpty)(O)&&0!=P||D()}),T),Object(r.useEffect)((function(){return I(!0),window.scrollTo(0,0),function(){I(!1)}}),[]),C||b&&!1 in b?Object(r.createElement)(E.a,{status:"error"},C&&"message"in C?C.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):b?b&&"percent"in b?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(Wt.a,{progress:parseInt(b.percent),noStriped:!0,size:"sm",text:"".concat(b.percent,"% Completed")}),Object(r.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(y)>0?y:0,", Failed:"," ",parseInt(_)>0?_:0,", Success:"," ",parseInt(S)>0?S:0)),i&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){n(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!b&&!!b.has_log_file&&Object(r.createElement)("a",{target:"_blank",href:Object(l.hb)()+"/wp-json"+Object(l.u)("/importer-log/download/".concat(O,"?bwf-nonce=").concat(Object(l.z)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(y)>0?y:0,", Failed: ",parseInt(_)>0?_:0,", Success: ",parseInt(S)>0?S:0)))};function Zn(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xn=function(e){Object(l.k)("WP Importer");var t=e.step,n=e.setImport,c=Yn(Object(r.useState)({}),2),o=c[0],i=c[1],s=Yn(Object(r.useState)(null),2),m=s[0],b=s[1],f=Yn(Object(r.useState)(!1),2),p=f[0],d=f[1],O=(0,fn().getExistingImports)().wp,j=Object(r.useContext)(l.h),w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,g()({method:"GET",path:Object(l.u)("/import/wp/roles")});case 4:t=e.sent,i(t.result),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i(null),j(e.t0&&"message"in e.t0?e.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(l.wb)(j,3e3),d(!1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Zn(c,r,a,o,i,"next",e)}function i(e){Zn(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){O?b({importId:O}):w()}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},p&&Object(r.createElement)(A.a,null),2==t&&!m&&o&&Object(u.size)(o)>0&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(Vn,{roles:o,setStep:e.setStep,setImporter:e.setImporter,onRolesSelected:function(t){b(t),e.setStep(3)}})),3==t&&m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(Jn,{setStep:e.setStep,requestData:m,setImporter:e.setImporter,setImport:n})))};n(1102);function er(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rr=function(e){var t=e.importData,n=e.setImport,o=t.importId,i=tr(Object(r.useState)(null),2),s=i[0],u=i[1],m=s&&"log"in s?s.log:{},b=m.skipped,f=void 0===b?0:b,d=m.failed,O=void 0===d?0:d,j=m.succeed,w=void 0===j?0:j,v=(location&&location.search&&Object(c.parse)(location.search.substring(1)),tr(Object(r.useState)(!1),2)),y=v[0],h=v[1],E=tr(Object(r.useState)(!1),2),_=E[0],k=E[1],S=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={start_import:!1,import_id:o},e.next=4,g()({method:"GET",path:Object(l.u)("/import/wc/status?"+Object(c.stringify)(t))});case 4:n=e.sent,u(n.result),n.result&&"status"in n.result&&"success"===n.result.status&&n.result.percent>=100&&(h(!0),k(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),setError(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){er(c,r,a,o,i,"next",e)}function i(e){er(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(Ht.a)((function(){_||S()}),5e3),s?s&&"percent"in s?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:parseInt(s.percent),text:"".concat(s.percent,"% Completed")}),Object(r.createElement)("p",null,"Skipped: ",parseInt(f)>0?f:0,", Failed:"," ",parseInt(O)>0?O:0,", Success:"," ",parseInt(w)>0?w:0)),y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){n(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!s&&!!s.has_log_file&&Object(r.createElement)("a",{target:"_blank",href:Object(l.hb)()+"/wp-json"+Object(l.u)("/importer-log/download/".concat(o,"?bwf-nonce=").concat(Object(l.z)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(f)>0?f:0,", Failed: ",parseInt(O)>0?O:0,", Success: ",parseInt(w)>0?w:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function ar(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function cr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ar(c,r,a,o,i,"next",e)}function i(e){ar(c,r,a,o,i,"throw",e)}o(void 0)}))}}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lr=function(e){Object(l.k)("WC Importer");var t=e.step,n=e.setImport,o=or(Object(r.useState)({}),2),i=o[0],s=o[1],m=or(Object(r.useState)(!0),2),b=m[0],f=m[1],d=or(Object(r.useState)(null),2),O=d[0],j=d[1],w=or(Object(r.useState)(!1),2),v=w[0],y=w[1],h=or(Object(r.useState)(!0),2),E=h[0],_=(h[1],or(Object(r.useState)(!1),2)),k=_[0],S=_[1],N=or(Object(r.useState)([]),2),C=N[0],x=N[1],I=or(Object(r.useState)([]),2),P=I[0],T=I[1],$=Object(r.useContext)(l.h),D=or(Object(r.useState)(1),2),F=D[0],L=D[1],M=(0,fn().getExistingImports)().wc,R={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")},B=function(){var t=cr(regeneratorRuntime.mark((function t(){var n,r,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]&&i[0],t.prev=1,r={start_import:n,tags:C.map((function(e){return{id:e.key,value:e.label}})),lists:P.map((function(e){return{id:e.key,value:e.label}})),marketing_status:E,update_existing:k,disable_events:v,imported_contact_status:F},t.next=5,g()({method:"GET",path:Object(l.u)("/import/wc/status?"+Object(c.stringify)(r))});case 5:o=t.sent,s({importId:o.result.import_id}),e.setStep(3),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),s(null),$(t.t0&&"message"in t.t0?t.t0.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 14:Object(l.wb)($,3e3),f(!1);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=cr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({method:"GET",path:Object(l.u)("/import/wc/get-orders")}).then((function(e){j(parseInt(e.result)),f(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){parseInt(M)>0?(s({importId:M}),f(!1)):U()}),[]);return Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&b&&(Object(u.isEmpty)(i)||1===i.status)&&Object(r.createElement)(A.a,null),2==t&&!b&&!Object(u.isNull)(O)&&(O>0?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},O+" "+Object(a.__)("paid orders are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(Be.a,{onTagsChange:x,selected:C}),Object(r.createElement)(Ue.a,{onListsChange:T,selected:P})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(e){L(e.target.value)},value:Object(u.isEmpty)(F)?"":F},Object.keys(R).map((function(e){return Object(r.createElement)("option",{key:e,value:e},R[e])}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(p.ToggleControl,{checked:k,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return S(e)}}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:y})),Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){e.setStep(3),f(!0),B(!0)}},Object(a.__)("Import","wp-marketing-automations"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("No Orders are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_20"})))),2==t&&!b&&Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))),3==t&&b&&Object(r.createElement)(A.a,null),3==t&&!b&&i&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(rr,{importData:i,setStep:e.setStep,setImporter:e.setImporter,setImport:n})))};n(1103);function sr(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ur(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){sr(c,r,a,o,i,"next",e)}function i(e){sr(c,r,a,o,i,"throw",e)}o(void 0)}))}}var mr=function(){return Object(ht.a)(["get-wlm-members-count"],ur(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({path:Object(l.u)("/import/wlm/get-members-count")});case 2:if((t=e.sent).code&&200===t.code){e.next=5;break}throw new Error(Object(a.__)("Unable to load members count","wp-marketing-automations"));case 5:return e.abrupt("return",parseInt(t.result));case 6:case"end":return e.stop()}}),e)}))))};function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pr={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")},dr=function(e){var t=e.onStartImport,n=e.setStep,c=e.setImporter,o=mr(),i=o.isLoading,s=o.data,m=void 0===s?0:s,b=o.isError,f=o.error,d=br(Object(r.useState)(!1),2),O=d[0],j=d[1],w=br(Object(r.useState)(!1),2),g=w[0],v=w[1],y=br(Object(r.useState)([]),2),h=y[0],E=y[1],_=br(Object(r.useState)([]),2),k=_[0],S=_[1],N=br(Object(r.useState)(1),2),C=N[0],x=N[1],I=Object(r.useContext)(l.h),P=Object(r.useCallback)((function(){return t({tags:h.map((function(e){return{id:e.key,value:e.label}})),lists:k.map((function(e){return{id:e.key,value:e.label}})),update_existing:O,disable_events:g,imported_contact_status:C})}),[h,k,O,g,C,t]);return Object(r.useEffect)((function(){b&&(I("string"==typeof f?f:f&&f.message?f.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.wb)(I,3e3))}),[b,f]),i?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)(A.a,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WishList Members","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},m+" "+Object(a.__)("members are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(Be.a,{onTagsChange:E,selected:h}),Object(r.createElement)(Ue.a,{onListsChange:S,selected:k})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){x(e.target.value)},value:Object(u.isEmpty)(C)?"":C},Object.keys(pr).map((function(e){return Object(r.createElement)("option",{key:e,value:e},pr[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(p.ToggleControl,{checked:O,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return j(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:g,onChange:v})),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(r.createElement)(p.Button,{disabled:0===parseInt(m),isPrimary:!0,onClick:P},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){n(1),c(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Or(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gr=function(e){var t=e.requestData,n=e.existingImport,o=(e.setStep,e.setImport),i=jr(Object(r.useState)(!1),2),s=i[0],m=i[1],b=jr(Object(r.useState)(null),2),f=b[0],d=b[1],O=jr(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),j=O[0],w=O[1],v=f&&"log"in f?f.log:{},y=v.skipped,h=void 0===y?0:y,_=v.failed,k=void 0===_?0:_,S=v.succeed,N=void 0===S?0:S,C=jr(Object(r.useState)(null),2),x=C[0],I=C[1],P=hn().showBackButton,A=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),T=jr(Object(r.useState)(5e3),2),$=T[0],D=T[1],F=jr(Object(r.useState)(!0),2),L=F[0],M=F[1],R=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A++,e.prev=1,r=parseInt(j)>0?{import_id:j}:t,L&&!n?(M(!1),r.start_import=!0):r.start_import=!1,e.next=6,g()({method:"POST",data:r,path:Object(l.u)("/import/wlm/status")});case 6:a=e.sent,d(a.result),w(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",D(null),P(!1),m(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),D(null),P(!1),I(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Or(c,r,a,o,i,"next",e)}function i(e){Or(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(Ht.a)((function(){Object(u.isEmpty)(j)&&0!=A||R()}),$),Object(r.useEffect)((function(){return P(!0),window.scrollTo(0,0),function(){P(!1)}}),[]),x||f&&!1 in f?Object(r.createElement)(E.a,{status:"error"},x&&"message"in x?x.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% Completed")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(h)>0?h:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(N)>0?N:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p bwf-t-center"},Object(a.__)("Skipped","wp-marketing-automations"),": ",parseInt(h)>0?h:0,",",Object(a.__)("Failed","wp-marketing-automations"),": ",parseInt(k)>0?k:0,",",Object(a.__)("Success","wp-marketing-automations"),": ",parseInt(N)>0?N:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hr=function(e){var t=e.step,n=e.setStep,c=e.setImporter,o=e.setImport;Object(l.k)("WLM Importer");var i=vr(Object(r.useState)(null),2),s=i[0],u=i[1],m=(0,fn().getExistingImports)().wlm;return Object(r.useEffect)((function(){parseInt(m)>0&&(u({importId:m}),n(3))}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(dr,{setStep:n,setImporter:c,onStartImport:function(e){u(e),n(3)}})),3==t&&s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(gr,{setStep:n,requestData:s,setImporter:c,existingImport:parseInt(m)>0,setImport:o})))};n(1104);function Er(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function _r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Er(c,r,a,o,i,"next",e)}function i(e){Er(c,r,a,o,i,"throw",e)}o(void 0)}))}}var kr=function(){return Object(ht.a)(["get-affwp-affiliate-count"],_r(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({path:Object(l.u)("/import/affwp/get-affiliate-count")});case 2:if((t=e.sent).code&&200===t.code){e.next=5;break}throw new Error(Object(a.__)("Unable to load affiliate count","wp-marketing-automations"));case 5:return e.abrupt("return",parseInt(t.result));case 6:case"end":return e.stop()}}),e)}))))};function Sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cr={0:Object(a.__)("Unverified","wp-marketing-automations"),1:Object(a.__)("Subscribed","wp-marketing-automations"),2:Object(a.__)("Bounced","wp-marketing-automations"),3:Object(a.__)("Unsubscribed","wp-marketing-automations")},xr=function(e){var t=e.onStartImport,n=e.setStep,c=e.setImporter,o=kr(),i=o.isLoading,s=o.data,u=void 0===s?0:s,m=o.isError,b=o.error,f=Sr(Object(r.useState)(!1),2),d=f[0],O=f[1],j=Sr(Object(r.useState)(!1),2),w=j[0],g=j[1],v=Sr(Object(r.useState)([]),2),y=v[0],h=v[1],E=Sr(Object(r.useState)([]),2),_=E[0],k=E[1],S=Sr(Object(r.useState)(1),2),N=S[0],C=S[1],x=Object(r.useContext)(l.h),I=Object(r.useCallback)((function(){return t({tags:y.map((function(e){return{id:e.key,value:e.label}})),lists:_.map((function(e){return{id:e.key,value:e.label}})),update_existing:d,disable_events:w,imported_contact_status:N})}),[y,_,d,w,N,t]);return Object(r.useEffect)((function(){m&&(x("string"==typeof b?b:b&&b.message?b.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.wb)(x,3e3))}),[m,b]),i?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)(A.a,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},u+" "+Object(a.__)("affiliates are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(Be.a,{onTagsChange:h,selected:y}),Object(r.createElement)(Ue.a,{onListsChange:k,selected:_})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){C(e.target.value)}},Object.keys(Cr).map((function(e){return Object(r.createElement)("option",{key:e,value:e,selected:N==e},Cr[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(p.ToggleControl,{checked:d,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return O(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:g})),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(r.createElement)(p.Button,{disabled:0===parseInt(u),isPrimary:!0,onClick:I},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){n(1),c(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Ir(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tr=function(e){var t=e.requestData,n=e.existingImport,o=(e.setStep,e.setImport),i=Pr(Object(r.useState)(!1),2),s=i[0],m=i[1],b=Pr(Object(r.useState)(null),2),f=b[0],d=b[1],O=Pr(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),j=O[0],w=O[1],v=f&&"log"in f?f.log:{},y=v.skipped,h=void 0===y?0:y,_=v.failed,k=void 0===_?0:_,S=v.succeed,N=void 0===S?0:S,C=Pr(Object(r.useState)(null),2),x=C[0],I=C[1],P=hn().showBackButton,A=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),T=Pr(Object(r.useState)(5e3),2),$=T[0],D=T[1],F=Pr(Object(r.useState)(!0),2),L=F[0],M=F[1],R=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A++,e.prev=1,r=parseInt(j)>0?{import_id:j}:t,L&&!n?(M(!1),r.start_import=!0):r.start_import=!1,e.next=6,g()({method:"POST",data:r,path:Object(l.u)("/import/affwp/status")});case 6:a=e.sent,d(a.result),w(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(D(null),P(!1),m(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),D(null),P(!1),I(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ir(c,r,a,o,i,"next",e)}function i(e){Ir(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(Ht.a)((function(){Object(u.isEmpty)(j)&&0!=A||R()}),$),Object(r.useEffect)((function(){return P(!0),window.scrollTo(0,0),function(){P(!1)}}),[]),x||f&&!1 in f?Object(r.createElement)(E.a,{status:"error"},x&&"message"in x?x.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(r.createElement)("p",null,"Skipped: ",parseInt(h)>0?h:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(N)>0?N:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Wt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(h)>0?h:0,", Failed: ",parseInt(k)>0?k:0,", Success: ",parseInt(N)>0?N:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function $r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fr=function(e){var t=e.step,n=e.setStep,c=e.setImporter,o=e.setImport;Object(l.k)(Object(a.__)("AFFWP Importer","wp-marketing-automations"));var i=$r(Object(r.useState)(null),2),s=i[0],u=i[1],m=(0,fn().getExistingImports)().affwp;return Object(r.useEffect)((function(){parseInt(m)>0&&(u({importId:m}),n(3))}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(xr,{setStep:n,setImporter:c,onStartImport:function(e){u(e),n(3)}})),3==t&&s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(Tr,{setStep:n,requestData:s,setImporter:c,existingImport:parseInt(m)>0,setImport:o})))};function Lr(){return(Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Br=function(e){var t=e.setImport,n=Object(r.useContext)(l.h),c=Mr(Object(r.useState)(null),2),o=c[0],i=c[1],s=Mr(Object(r.useState)(!0),2),m=(s[0],s[1]),b=fn(),f=(b.showBackButton,b.getLoading),d=b.getExistingImports,O=hn().fetch,j=f(),w=d(),g=Mr(Object(r.useState)(1),2),v=g[0],h=g[1],E=Mr(Object(r.useState)(!1),2),_=E[0];E[1];Object(r.useEffect)((function(){O(),m(!1),Object(l.k)(Object(a.__)("Import Contacts","wp-marketing-automations"))}),[]),Object(r.useEffect)((function(){w&&Object(u.size)(w)>0&&(i(Object.keys(w)[0]),h(3))}),[w]);var k=function(){var e=[{key:"csv",label:Object(a.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(l.Pb)()||e.push({key:"wp",label:Object(a.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(l.Tb)()&&e.push({key:"wc",label:Object(a.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(l.Ob)()&&e.push({key:"wlm",label:Object(r.createElement)(r.Fragment,null,Nn()," ",Object(a.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(l.xb)()&&e.push({key:"affwp",label:Object(r.createElement)(r.Fragment,null,xn()," ",Object(a.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(In.applyFilters)("bwfAddContactImporter",e)}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object($.g)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.isEmpty)(e)||Object($.k)(e,t,n)},N=function(e){return Object(r.createElement)(r.Fragment,null,function(e,a){switch(a){case"csv":return Object(r.createElement)(Bn,{step:e,setStep:h,setImporter:i,setImport:t});case"wp":return Object(r.createElement)(Xn,{step:e,setStep:h,setImporter:i,setImport:t});case"wc":return Object(r.createElement)(lr,{step:e,setStep:h,setImporter:i,setImport:t});case"wlm":return Object(r.createElement)(hr,{step:e,setStep:h,setImporter:i,setImport:t});case"affwp":return Object(r.createElement)(Fr,{step:e,setStep:h,setImporter:i,setImport:t});default:return Object(In.applyFilters)("bwfImporterSelectedContent",Object(r.createElement)(r.Fragment,null),a,e,h,i,w,n,l.wb,S,t)}}(e,o))},C=[{key:1,label:Object(a.__)("Source","wp-marketing-automations"),content:j?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(r.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-importer"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(e){return Object(r.createElement)(p.Button,{key:e,isTertiary:!0,className:"bwf-crm-importer-button"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(r.createElement)("div",{className:"bwf_clear_20"})))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Source","wp-marketing-automations"))),Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-importer"},Object(r.createElement)("div",{className:"bwf-h2"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),k.map((function(e,t){var n=e.key===o?{isPrimary:!0}:{};return Object(r.createElement)(p.Button,Lr({key:t,onClick:function(){i(e.key),h(2)}},n,{className:e.className}),e.label)})),Object(r.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(a.__)("Configuration","wp-marketing-automations"),content:N(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:N(3)}];return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-import-modal-header"},Object(r.createElement)("div",{className:"bwf-import-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(r.createElement)("div",{onClick:function(){Object(l.k)(Object(a.__)("Contacts","wp-marketing-automations")),Object($.k)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer"}},Object(r.createElement)(y.a,{icon:"close"}))),Object(r.createElement)("div",{className:"bwf-crm-main-import-wrapper bwf-crm-import-init"},Object(r.createElement)(yt.a,{steps:C,currentStep:v,isPending:_})),Object(r.createElement)("div",{className:"bwf_clear_24"}))};function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(O.a)(),t=Object(j.a)(),n=e.getError,o=e.getContacts,i=e.getCountData,s=t.clearError,u=t.startIndexing,m=t.setStateProp,b=Gr(Object(r.useState)(!1),2),f=b[0],p=b[1],d=Gr(Object(r.useState)(!1),2),w=d[0],g=d[1],v=Gr(Object(r.useState)(!1),2),y=v[0],h=v[1],k=Gr(Object(r.useState)({}),2),S=k[0],N=k[1],C=Gr(Object(r.useState)(!1),2),x=C[0],I=C[1],P=location&&location.search?Object(c.parse)(location.search.substring(1)):{},A=n(),T=Object(r.useRef)();Object(r.useEffect)((function(){T.current?s():T.current=A})),Object(r.useEffect)((function(){return Object(l.k)("Contacts"),function(){m("countData",{})}}),[]);var $=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,{isPrimary:!0,className:"bwf-display-flex bwf-no-ripple",label:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){return p(!0)}},Object(a.__)("Create Contact","wp-marketing-automations"))),D=i(),F=Object(Xe.a)().getPageCountData,L=Object(Qe.a)().setPageCountData,M=F();Object(r.useEffect)((function(){L(zr(zr({},M),D))}),[D]),Object(Ze.a)("contacts","",Object(a.__)("ALL CONTACTS","wp-marketing-automations"),$);var R=o();if("indexing_status"in R){var B="indexing_status"in R&&2===parseInt(R.indexing_status)?Object(a.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(a.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),U="indexing_status"in R&&2===parseInt(R.indexing_status)?null:Object(a.__)("Start Indexing","wp-marketing-automations");return Object(r.createElement)(Je.a,{text:B,buttonText:U,onButtonClick:function(){return u()}})}var z=[{type:"heading",data:{title:Object(a.__)("Create contact for smarter engagement","wp-marketing-automations"),desc:Object(a.__)("Increase engagement strategies by creating contacts, apply tags, lists, and personal details.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(l.o)()+"contact/contact1.png",title:Object(a.__)("Seamlessly Import Contacts","wp-marketing-automations"),desc:Object(a.__)("Import contacts from WordPress, WooCommerce, CSV files, or other supported sources","wp-marketing-automations")},{img:Object(l.o)()+"contact/contact2.png",title:Object(a.__)("Get 360° Contact view","wp-marketing-automations"),desc:Object(a.__)("View Complete profile with purchase history, tags, lists, open, clicks and more","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){N({}),p(!0)}},{text:Object(a.__)("Import Contact","wp-marketing-automations"),isSecondary:!0,proCheck:!0,onClick:function(){Object(l.Jb)()?h(!0):(I(!0),N({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations")}))}}]}},{type:"link-wth-text",data:{text:Object(a.__)("Curious about contact?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/",linkText:Object(a.__)("Learn More","wp-marketing-automations")}}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ye.a,null),Object(r.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),A&&!f&&Object(r.createElement)(E.a,{status:"error"},A.message),Object(r.createElement)($e,{query:P,isExport:w,setExport:g,isImport:y,setImport:h,menuButtons:$,pitchData:z}),f&&Object(r.createElement)(Ke,{query:P,onCloseModal:function(){p(!1)}}),w&&Object(r.createElement)(ln,{setExport:g}),y&&Object(r.createElement)(Br,{setImport:h}),!Object(l.Jb)()&&Object(r.createElement)(ve.b,{isOpen:x,onRequestClose:function(){return I(!1)},modalContent:S}))}},950:function(e,t,n){"use strict";var r=n(0),a=n(6),c=n.n(a),o=n(1),i=n(8),l=(n(952),n(39)),s=n(4);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=u(Object(r.useState)(!1),2),n=t[0],a=t[1],m=e.modalContent,b=void 0===m?{}:m,f=e.content,p=e.onPage,d=void 0!==p&&p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:c()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||a(!0)}},d?Object(r.createElement)(l.a,{showHeader:!1,modalContent:b}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-king-tag-pro"},Object(r.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(r.createElement)("span",{className:"bwf-mt-8"},f||(Object(s.Fb)()?Object(o.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(o.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(r.createElement)(l.b,{isOpen:n,onRequestClose:function(){return a(!1)},modalContent:b}))}},952:function(e,t,n){},955:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);var a=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},958:function(e,t,n){"use strict";var r=n(51),a=n(4),c=n(3);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.fetch,n=e.setStateProp;return i(i({},s(e,["fetch","setStateProp"])),{},{setStateProp:n,fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8];n("isLoading",!0);var p=e.s,d=void 0===p?"":p,O=(e.page,e.filter,e.path,s(e,["s","page","filter","path"])),j={offset:r,limit:o,search:d,filters:O,get_wc:Object(a.Tb)(),grab_totals:i,only_count:l,fetch_base:u,grab_custom_fields:!1,exclude_unsubs:m,exclude_unsubs_lists:b},w=Object(a.mb)("table_sort_data"),g=w.hasOwnProperty("contact_sort_data")?w.contact_sort_data:{},v=Object(c.isObject)(g)&&!Object(c.isEmpty)(g)?g:{},y=v.orderby,h=void 0===y?"last_modified":y,E=v.order,_=void 0===E?"desc":E;_&&h&&(j.order=_,j.order_by=h),f&&(j.unopen_broadcast=parseInt(f)),t("GET",Object(a.u)("/contacts"),j)},fetchListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8];n("isLoading",!0);var p=e.s,d=void 0===p?"":p,O=(e.page,e.filter,e.path,s(e,["s","page","filter","path"])),j={offset:r,limit:o,search:d,filters:O,get_wc:Object(a.Tb)(),grab_totals:i,only_count:l,fetch_base:u,grab_custom_fields:!1,exclude_unsubs:m,exclude_unsubs_lists:b},w=Object(a.mb)("table_sort_data"),g=w.hasOwnProperty("contact_sort_data")?w.contact_sort_data:{},v=Object(c.isObject)(g)&&!Object(c.isEmpty)(g)?g:{},y=v.orderby,h=void 0===y?"last_modified":y,E=v.order,_=void 0===E?"desc":E;_&&h&&(j.order=_,j.order_by=h),f&&(j.unopen_broadcast=parseInt(f)),t("GET",Object(a.u)("/v3/contacts/listing"),j)},startIndexing:function(){return t("GET",Object(a.u)("/contacts"),{start_indexing:!0})}})}},963:function(e,t,n){"use strict";var r=n(0),a=n(25),c=n(1),o=n(177);t.a=function(e){var t=e.selected,n=e.onTagsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e,r){var a=t.filter((function(t){return!(t.key==e&&t.label==r)}));n(a)},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},970:function(e,t,n){"use strict";var r=n(52);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.getStateProp;return c(c({},i(e,["getStateProp"])),{},{getContacts:function(){return t("contacts_list")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getCountData:function(){return t("countData")}})}},972:function(e,t,n){"use strict";var r=n(0),a=n(25),c=n(1),o=n(177);t.a=function(e){var t=e.selected,n=e.onListsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add to Lists","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.a,multiple:!1,allowFreeTextSearch:!0,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e){var r=t.filter((function(t){return t.key!=e}));n(r)},placeholder:Object(c.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}}}]);