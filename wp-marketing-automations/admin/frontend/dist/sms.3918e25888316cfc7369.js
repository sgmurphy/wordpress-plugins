(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1243:function(e,t,a){},1307:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(246),r=a(94),o=a(119),i=a(1),s=a(4),l=a(5),m=a(988),u=a(331),b=a(3);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){c=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(c)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(e){var t=e.contactId,a=e.tab,d=f(Object(n.useState)({}),2),p=d[0],O=d[1],w=f(Object(n.useState)(!1),2),j=w[0],v=w[1],g=f(Object(n.useState)({status:!1,contactInfo:{}}),2),y=g[0],h=g[1],E=Object(c.a)(),_=E.fetchSMSConversations,N=E.fetchWhatAppConversations,k=r.a.getContact,A=r.a.getSMSConversations,S=r.a.getSMSConversationTotal,C=r.a.getSMSConversationLimit,I=r.a.getSMSConversationOffset,T=r.a.getSMSConversationPage,M=r.a.getSMSConversationLoading,P=r.a.getContactLoading,L=k(),x=A(),J=I(),R=C(),U=M(),z=P(),F=T(),W=S();Object(n.useEffect)((function(){"sms"==a?_(t,0,R):"whatsapp"==a&&N(t,0,R)}),[a]);var D=[{key:"message",label:Object(i.__)("Message","wp-marketing-automations"),isLeftAligned:!1},{key:"sent_time",label:Object(i.__)("Sent On","wp-marketing-automations"),isLeftAligned:!0},{key:"last_activity",label:Object(i.__)("Last Activity","wp-marketing-automations"),isLeftAligned:!0},{key:"clicks",label:Object(i.__)("Clicks","wp-marketing-automations"),isLeftAligned:!0}],q=x&&x.length>0?x.map((function(e){return"ID"in e&&parseInt(e.ID)>0&&[{display:(c=e,Object(n.createElement)("a",{className:"bwf-a-no-underline bwf_bold",onClick:function(){O(c),v(!0)}},Object(n.createElement)("span",{className:"bwf-mr-5 bwf-limit-word-inside bwf-w-210"},c.message?c.message:"-"))),value:e.subject},{display:Object(s.W)(e.created_at,!1),value:e.created_at},{display:e.o_interaction?(t=JSON.parse(e.o_interaction),a=t[t.length-1],Object(s.W)(a,!1,!1)):"-",value:""},{display:e.click?e.click:0,value:e.click}];var t,a,c})):[];return Object(n.createElement)("div",{className:"bwf-cs-contact-tab-data"},Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},U||z?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"}):Object(n.createElement)("div",{className:"bwf-normal-text"},parseInt(W)>0&&Object(i.sprintf)(Object(i.__)("All %s (%s)","wp-marketing-automations"),"sms"==a?Object(b.toUpper)(a):Object(b.capitalize)(a),W))),Object(n.createElement)("div",{className:"bwf-content-header-right"},U||z?Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-30"}):Object(n.createElement)(l.Button,{className:"bwf-btn-small is-blue",isPrimary:!0,onClick:function(){h({status:!0,contactInfo:L})}},Object(i.sprintf)(Object(i.__)("Send %s Message","wp-marketing-automations"),"sms"==a?Object(b.toUpper)(a):Object(b.capitalize)(a))))),Object(n.createElement)("div",{className:"bwf-c-s-data"},Object(n.createElement)("div",{className:"bwf-c-s-section"},Object(n.createElement)(o.a,{className:"contact-single-table contact-emails",headers:D,hideHeader:"yes",rows:q,query:{paged:F},totalRows:W,rowsPerPage:R,isLoading:U||z,showMenu:!1,onPageChange:function(e,n){"sms"==a?_(t,(e-1)*R,R):"whatsapp"==a&&N(t,(e-1)*R,R)},onQueryChange:function(e){return"per_page"===e?function(e){e!==R&&("sms"==a?_(t,J,e):"whatsapp"==a&&N(t,J,e))}:function(){return{}}},emptyMessage:Object(i.__)("No messages found","wp-marketing-automations")}),Object(n.createElement)(m.a,{onRequestClose:function(){return v(!1)},conversation:p,contact:L,isOpen:j}),y.status&&Object(n.createElement)(u.a,{contact:y.contactInfo,setSendMessageModel:h,onSuccess:function(){"sms"==a?_(t,0,R):"whatsapp"==a&&N(t,0,R)},messageType:a}))))}},1308:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a(94),o=a(3),i=a(4),s=a(5),l=a(8),m=a(945),u=a(995),b=a(18),f=a(246),d=(a(1243),a(125)),p=a(14),O=a(466),w=a(987),j=a(39),v=a(20);function g(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){c=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(c)throw r}}return a}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _={1:Object(c.__)("Active","wp-marketing-automations"),2:Object(c.__)("Failed","wp-marketing-automations"),3:Object(c.__)("Paused","wp-marketing-automations"),4:Object(c.__)("Waiting","wp-marketing-automations"),5:Object(c.__)("Terminated","wp-marketing-automations"),6:Object(c.__)("Reattempt","wp-marketing-automations")},N={1:"bwf-tag-green",2:"bwf-tag-red",3:"bwf-tag-red",4:"bwf-tag-orange",5:"bwf-tag-red",6:"bwf-tag-blue"};t.default=function(){var e=location&&location.search?Object(v.parse)(location.search.substring(1)):{},t=Object(f.a)(),a=r.a.getContact(),h=r.a.getAutomationContactId(),E=r.a.getAutomations(),k=r.a.getAutomationLoading(),A=r.a.getContactLoading(),S=r.a.getAutomationsOffset(),C=r.a.getAutomationsLimit(),I=r.a.getAutomationsTotal(),T=parseInt(S)/parseInt(C)+1,M=Math.ceil(parseInt(I)/parseInt(C)),P=E&&"contacts"in E?E.contacts:[],L=y(Object(n.useState)(""),2),x=L[0],J=L[1],R=y(Object(n.useState)({status:!1}),2),U=R[0],z=R[1],F=y(Object(n.useState)({}),2),W=F[0],D=F[1],q=y(Object(n.useState)(!1),2),B=q[0],$=q[1];Object(n.useEffect)((function(){a&&"id"in a&&(parseInt(a.id)!==parseInt(h)||Object(o.isEmpty)(P))&&t.fetchAutomation(parseInt(a.id),S,C)}),[a]);var V,G={1:Object(c.__)("Delay","wp-marketing-automations"),2:Object(c.__)("Action","wp-marketing-automations"),3:Object(c.__)("Goal","wp-marketing-automations"),4:Object(c.__)("Condition","wp-marketing-automations")},H=function(t){return Object(n.createElement)("div",{className:"bwf-sc-automation-item-header"},Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-left"},Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-title"},t.hasOwnProperty("automation_title")&&""!==t.automation_title?t.automation_title:"-"),Object(n.createElement)("button",{className:"bwf-sc-automation-item-header-link",onClick:function(){return Object(p.k)({page:"autonami",path:"/automation/".concat(parseInt(t.aid))+"&return_to=".concat(e.path)},"/",{})}},Object(n.createElement)("span",null,Object(c.__)("View","wp-marketing-automations")),Object(n.createElement)(l.a,{icon:"external-link",size:14}))),Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-right"},t.hasOwnProperty("status")&&_.hasOwnProperty(parseInt(t.status))?Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-tag ".concat(N[t.status])},_[t.status]):Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-tag bwf-tag-green"},Object(c.__)("Completed","wp-marketing-automations"))))},K=function(e){return Object(n.createElement)("div",{className:"bwf-sc-automation-item-content-wrap"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(c.__)("Event","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},e.hasOwnProperty("event")&&!Object(o.isEmpty)(e.event)?e.event:"-")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(c.__)("Started On","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},e.hasOwnProperty("c_date")?Object(i.W)(e.c_date):"-")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(c.__)("Last Actions","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},function(e){var t=e.data,a=void 0===t?{}:t;if(Object(o.isEmpty)(a))return Object(n.createElement)(n.Fragment,null,"-");var c=a.action,r=void 0===c?"":c;return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},Object(o.isEmpty)(r)?"-":r)}(e))),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(c.__)("Last Run","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},function(e){var t=e.data,a=void 0===t?{}:t;if(Object(o.isEmpty)(a))return Object(n.createElement)(n.Fragment,null);var c=a.run_time,r=void 0===c?"":c,s=a.type,l=void 0===s?"":s;return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},!Object(o.isEmpty)(r)&&Object(n.createElement)(b.a,{justify:"justify",align:"top"},Object(n.createElement)(b.c,null,Object(i.W)(r))),(Object(o.isEmpty)(l)||!G.hasOwnProperty(parseInt(l)))&&Object(o.isEmpty)(r)&&Object(n.createElement)("span",null,"-"))}(e))),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(c.__)("Next Run Time","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},e.hasOwnProperty("e_time")&&!function(e){var t=e.data,a=void 0===t?{}:t;return!(!a.hasOwnProperty("type")||3!==parseInt(a.type))}(e)?Object(i.W)(e.e_time):"-")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item"},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(c.__)("Action","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},function(e){var t=e.trail,a=void 0===t?"":t;return Object(o.isEmpty)(a)?"-":Object(n.createElement)("a",{className:"bwf-cursor-pointer bwf-display-flex bwf-flex-start gap-8",onClick:function(){Object(i.Jb)()?(J(a),D(e)):z({status:!0,isFeature:!0,featureTitle:Object(c.__)("Contact Journey","wp-marketing-automations"),proLink:Object(i.T)("upgrade",{utm_medium:"Contact+Journey+Upgrade+Modal"})})}},!Object(i.Jb)()&&Object(n.createElement)(l.a,{icon:"king",size:16,color:"#0073aa"}),Object(c.__)("View Journey","wp-marketing-automations"))}(e))))};return Object(n.createElement)("div",{className:"bwf-c-s-full"},function(){if(!k&&!A&&0==P.length)return Object(n.createElement)("div",{className:"bwf-sc-automation-wrap"},Object(n.createElement)("div",{className:"bwf-sc-automation-no-ui"},Object(n.createElement)(l.a,{icon:"audiences-illustration"}),Object(n.createElement)("div",{className:"bwf-sc-automation-no-ui-content"},Object(n.createElement)("div",{className:"bwf-sc-automation-no-ui-header"},Object(c.__)("No Automation Assigned","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-sc-automation-no-ui-desc"},Object(c.__)("This contact is currently not assigned to any automation","wp-marketing-automations"))),!!a&&a.hasOwnProperty("id")&&Object(n.createElement)(s.Button,{isPrimary:!0,className:"bwf-btn-small is-blue",onClick:function(){Object(i.Jb)()?$(!0):z({status:!0,isFeature:!0,featureTitle:Object(c.__)("Adding Contacts to Automation","wp-marketing-automations"),proLink:Object(i.T)("upgrade",{utm_medium:"Contact+Add+To+Automation+Upgrade+Modal"})})}},!Object(i.Jb)()&&Object(n.createElement)(l.a,{size:16,icon:"king",color:"#fff"}),Object(c.__)("Add to Automation","wp-marketing-automations"))));var e,r=(e=[],k||A?([1,2,3].map((function(t){e.push({key:t,label:Object(n.createElement)("div",{className:"bwf-sc-automation-item-header"},Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-left"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-sc-automation-item-header-right"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20"}))),display:Object(n.createElement)("div",{className:"bwf-sc-automation-item-content-wrap"},[1,2,3,4,5].map((function(e){return Object(n.createElement)("div",{className:"bwf-sc-automation-content-item",key:e},Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-label"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-sc-automation-content-item-value"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))})))})})),e):(P.map((function(t,a){e.push({key:a,label:H(t),display:K(t)})})),e));return Object(n.createElement)("div",{className:"bwf-sc-automation-wrap"},k||A?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(n.createElement)("div",{className:"bwf-content-header-right"},Object(n.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-30"}))),Object(n.createElement)(w.a,null)):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-content-header-new"},Object(n.createElement)("div",{className:"bwf-content-header-left"},Object(n.createElement)("div",{className:"bwf-normal-text"},parseInt(I)>0&&Object(c.sprintf)(Object(c.__)("All Automations (%s) ","wp-marketing-automations"),I))),Object(n.createElement)("div",{className:"bwf-content-header-right"},Object(n.createElement)(s.Button,{className:"bwf-btn-small is-blue",isPrimary:!0,onClick:function(){Object(i.Jb)()?$(!0):z({status:!0,isFeature:!0,featureTitle:Object(c.__)("Adding Contacts to Automation","wp-marketing-automations"),proLink:Object(i.T)("upgrade",{utm_medium:"Contact+Add+To+Automation+Upgrade+Modal"})})}},!Object(i.Jb)()&&Object(n.createElement)(l.a,{icon:"king",size:16,color:"#fff"}),Object(c.__)("Add to Automation","wp-marketing-automations")))),Object(n.createElement)(d.a,{items:r,className:"bwf-accordion",openedKeys:g(Array(r.length)).map((function(e,t){return t}))})),parseInt(I)>0&&!(1===M&&1===T)&&Object(n.createElement)("div",{className:"bwf-accordian-footer bwf-mt-24"},Object(n.createElement)("div",{className:"bwf-accordian-footer-item "+(T>1?"":"is-disabled"),onClick:function(){if(T>1){var e=(T-1)*C-C;t.fetchAutomation(parseInt(a.id),e,C)}}},Object(n.createElement)(l.a,{icon:"arrow-back",size:12,color:T>1?"#0073AA":"#82838E"}),Object(n.createElement)("span",null,Object(c.__)("Previous","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-accordian-footer-item "+(M>T?"":"is-disabled"),onClick:function(){if(M>T){var e=T*C;t.fetchAutomation(parseInt(a.id),e,C)}}},Object(n.createElement)("span",null,Object(c.__)("Next","wp-marketing-automations")),Object(n.createElement)(l.a,{icon:"arrow-forward",size:12,color:M>T?"#0073AA":"#82838E"}))))}(),Object(i.Jb)()&&!Object(o.isEmpty)(x)&&Object(n.createElement)(s.Modal,{title:"",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-fullsc-modal"},Object(n.createElement)("div",{className:"bwf-stretch-header-single"},Object(n.createElement)("div",{className:"bwf-modal-heading"},(V="-",Object(o.isEmpty)(W)||(V=Object(o.isEmpty)(W.f_name)&&Object(o.isEmpty)(W.l_name)?W.email:W.f_name+" "+W.l_name),V),"Â ",Object(n.createElement)("span",{className:"bwf-tags bwf-tag-light-blue"},Object(c.__)("Customer Journey","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf-display-flex gap-24"},Object(n.createElement)(s.Button,{isSecondary:!0,className:"bwf-btn-small is-light bwf-btn-gray",onClick:function(){Object(p.k)({page:"autonami",path:"/automation/"+W.aid},"/",{})}},Object(c.__)("View Automation","wp-marketing-automations")),Object(n.createElement)("span",{onClick:function(){J(""),D({})},className:"bwf-modal-close"},Object(n.createElement)(l.a,{icon:"close",color:"#353030"})))),Object(n.createElement)(m.e,null,Object(n.createElement)(u.a,{customerData:{trail:x},isConatctTab:!0,automatonID:W.aid,hasHeader:!0}))),B&&Object(n.createElement)(O.a,{onRefresh:function(){return t.fetchAutomation(parseInt(a.id),0,C)},contactId:a.id,onClose:function(e){$(e)}}),!Object(i.Jb)()&&Object(n.createElement)(j.b,{isOpen:U.status,onRequestClose:function(){return z({status:!1})},modalContent:U}))}},987:function(e,t,a){"use strict";var n=a(0);a(485);function c(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.a=function(e){var t=e.count,a=void 0===t?5:t,r=e.className,o=void 0===r?"":r;return Object(n.createElement)("div",{className:"bwf-accordion-placeholder ".concat(o)},c(Array(a)).map((function(e,t){return Object(n.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(n.createElement)("div",{className:"bwf-placeholder-temp"}),Object(n.createElement)("div",{className:"bwf-placeholder-temp"}))})))}},988:function(e,t,a){"use strict";var n=a(0),c=a(1),r=a(9),o=a.n(r),i=a(4),s=a(311);function l(e,t,a,n,c,r,o){try{var i=e[r](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(n,c)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){c=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(c)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.a=function(e){var t=e.conversation,a=(t=void 0===t?{}:t).ID,r=t.mode,u=t.type,b=e.onRequestClose,f=e.isOpen,d=e.contact,p=void 0===d?{}:d,O=m(Object(n.useState)(null),2),w=O[0],j=O[1],v=m(Object(n.useState)(!1),2),g=v[0],y=v[1],h=m(Object(n.useState)(null),2),E=h[0],_=h[1],N=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&!(!parseInt(a)>0)){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.prev=3,e.next=6,o()({method:"GET",path:Object(i.u)("/v3/contacts/".concat(p.id,"/engagement/").concat(parseInt(a),"?mode=1"))});case 6:"result"in(t=e.sent)&&j(t.result),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.t0&&"message"in e.t0?_(e.t0.message):Object(c.__)("There are some technical difficulties while getting emails. Please contact support.","wp-marketing-automations");case 14:y(!1);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})),function(){var t=this,a=arguments;return new Promise((function(n,c){var r=e.apply(t,a);function o(e){l(r,n,c,o,i,"next",e)}function i(e){l(r,n,c,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){f&&N()}),[f]);return Object(n.createElement)(s.a,{isOpen:f,isLoading:g,onRequestClose:function(){b(),j(null),_(null)},error:E,subject:parseInt(r)<2&&w&&w.subject,body:w&&w.body?w.body:"",sourceType:u,mode:r,contact:e.contact,conversation:e.conversation,template:w})}}}]);