(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1028:function(t,e,n){"use strict";var a=n(0),r=n(1),o=n(4),i=(n(496),n(5)),c=n(8);e.a=function(t){var e=t.onFileSelected,n=t.filetypeArray,s=t.type,u=void 0===s?"automation":s,l=t.importText,m=void 0===l?"":l,b=t.importInfo,f=void 0===b?"":b,p=Object(a.useContext)(o.h),O=function(t){t&&t[0]&&"type"in t[0]?n.includes(t[0].type)?(e(t[0]),Object(o.wb)(p,3e3)):p(Object(r.__)("Uploaded file is not valid.","wp-marketing-automations")):p(Object(r.__)("Uploaded file not found","wp-marketing-automations"))};return Object(a.createElement)("div",{className:"bwf-component-import-wrapper"},Object(a.createElement)(i.DropZoneProvider,null,Object(a.createElement)("div",{className:"bwf-import-area-wrapper"},Object(a.createElement)(i.FormFileUpload,{isSecondary:!0,accept:"application/json",onChange:function(t){return O(t.target.files)},render:function(t){var e=t.openFileDialog;return Object(a.createElement)("div",{className:"bwf-import-area",onClick:e},Object(a.createElement)(c.a,{icon:"json-upload",size:72}),Object(a.createElement)("div",{className:"bwf-drop-import-heading"},""!==m?m:Object(r.__)("Click or Drag & Drop your JSON file","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-drop-import-content"},""!==f?f:Object(r.sprintf)(Object(r.__)("This tool allows you to import the %s from the JSON file.","wp-marketing-automations"),u)))}}),Object(a.createElement)(i.DropZone,{onFilesDrop:O,onHTMLDrop:O,onDrop:O}))))}},1029:function(t,e,n){"use strict";var a=n(0),r=n(955),o=(n(1030),n(8)),i=n(1),c=n(9),s=n.n(c),u=n(4),l=n(5),m=n(3);function b(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){b(o,a,r,i,c,"next",t)}function c(t){b(o,a,r,i,c,"throw",t)}i(void 0)}))}}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var d={automation:Object(i.__)("Automation","wp-marketing-automations"),templates:Object(i.__)("Templates","wp-marketing-automations"),carts:Object(i.__)("Carts","wp-marketing-automations")};e.a=function(t){var e=t.type,n=void 0===e?"":e,c=t.localData,b=void 0===c?{}:c,O=t.onDismiss,j=void 0===O?function(){}:O,g=Object(a.useContext)(u.h),w=p(Object(a.useState)(1),2),h=w[0],v=w[1],y=p(Object(a.useState)(!1),2),_=y[0],E=y[1],k=p(Object(a.useState)(!1),2),C=k[0],x=k[1],A=p(Object(a.useState)({}),2),P=A[0],S=A[1],N=function(){var t=f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s()({path:Object(u.u)("/export/status?type=".concat(n)),method:"GET"}).then((function(t){if(200!==t.code||!t.hasOwnProperty("result"))throw Error(Object(u.p)(null==t?void 0:t.message));var e=t.result,n=e.status,a=void 0===n?1:n,r=e.msg,o=void 0===r?[]:r,i=e.url,c=void 0===i?"":i;v(a),S({msg:o,url:c})}));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),g(t.t0.hasOwnProperty("message")&&""!==t.t0.message?t.t0.message:Object(i.__)("Unable to export.","wp-marketing-automations")),Object(u.wb)(g,3e3);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){if(Object(m.isEmpty)(b))""!==n&&N();else{var t=b.status,e=void 0===t?1:t,a=b.msg,r=void 0===a?[]:a,o=b.url,i=void 0===o?"":o;v(e),S({msg:r,url:i})}}),[]);var D=function(){var t=f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s()({path:Object(u.u)("/export/action?type=".concat(n,"&action=cancel")),method:"POST"}).then((function(t){if(200!==t.code||!t.hasOwnProperty("result"))throw Error(Object(u.p)(null==t?void 0:t.message));var e=t.result.status;(void 0===e?1:e)&&(bwfcrm_contacts_data.export_data.hasOwnProperty(n)&&delete bwfcrm_contacts_data.export_data[n],E(!0),j())}));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),g(t.t0.hasOwnProperty("message")&&""!==t.t0.message?t.t0.message:Object(i.__)("Unable to perform action.","wp-marketing-automations")),Object(u.wb)(g,3e3);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.open(Object(u.hb)()+"/wp-json"+Object(u.u)("/export/download?type=".concat(n,"&bwf-nonce=").concat(Object(u.z)(),"&user_id=").concat(Object(u.G)())),"_blank");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(Object(r.a)((function(){1==h&&""!==n&&N()}),5e3),""===n||_)return Object(a.createElement)(a.Fragment,null);var I=P.url,M=void 0===I?"":I,R=P.msg,z=void 0===R?[]:R,L={1:Object(i.__)("Exporting InProgress…","wp-marketing-automations"),2:Object(i.__)("File is ready","wp-marketing-automations"),3:Object(i.__)("Exporting Failed","wp-marketing-automations")},F={1:Object(i.__)("Cancel","wp-marketing-automations"),2:Object(i.__)("Download","wp-marketing-automations"),3:Object(i.__)("View Details","wp-marketing-automations")};return Object(a.createElement)("div",{className:"bwf-export-info-wrap bwf-status-".concat(h)},Object(a.createElement)("div",{className:"bwf-export-info-left"},Object(a.createElement)("div",{className:"bwf-export-status-icon"},Object(a.createElement)(o.a,{icon:"export-info",size:20})),Object(a.createElement)("div",{className:"bwf-export-status-message"},L[h])),Object(a.createElement)("div",{className:"bwf-export-info-right"},(2!==parseInt(h)||!(2===parseInt(h)&&""===M))&&Object(a.createElement)("div",{className:"bwf-export-status-button",onClick:function(){switch(parseInt(h)){case 1:D();break;case 2:T();break;case 3:x(!0)}}},F[h]),1!==parseInt(h)&&Object(a.createElement)("div",{className:"bwf-export-status-dismiss",onClick:D},Object(a.createElement)(o.a,{icon:"close",size:16,color:"#FFF"}))),C&&Object(a.createElement)(l.Modal,{onRequestClose:function(){return x(!1)},className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header bwf-export-info-modal"},Object(a.createElement)("div",{className:"bwf-admin-m-header-new"},Object(a.createElement)("div",{className:"bwf-admin-m-title"},Object(i.sprintf)(Object(i.__)("Error! Export %ss","wp-marketing-automations"),d.hasOwnProperty(n)?d[n]:n)),Object(a.createElement)("div",{className:"bwf-admin-m-close",onClick:function(){return x(!1)}},Object(a.createElement)(o.a,{icon:"close",size:20}))),Object(a.createElement)("div",{className:"bwf-export-info-content"},Object(a.createElement)("div",{className:"bwf-export-info-content-bold"},Object(i.__)("Following reasons while creating file for export","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-export-info-content-error-list"},Object(m.isEmpty)(z)?Object(a.createElement)("li",null,Object(i.__)("Unable to create export","wp-marketing-automations")):z.map((function(t,e){return Object(a.createElement)("li",{key:e},t)}))))))}},1030:function(t,e,n){},1261:function(t,e,n){},1262:function(t,e,n){},1329:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(49),o=n(1),i=n(119),c=n(52),s=n(124);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var f=function(){var t=Object(c.a)("automationv1List"),e=t.getStateProp,n=b(t,["getStateProp"]),a=Object(c.a)(s.a.recipient).getStateProp,r=Object(c.a)(s.a.conversion).getStateProp,o=Object(c.a)(s.a.contacts).getStateProp,i=Object(c.a)(s.a.analytics).getStateProp;return l(l({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return a("data")},getRecipientLoading:function(){return a("isLoading")},getRecipientOffset:function(){return a("offset")},getRecipientAutomationId:function(){return a("automationId")},getRecipientTotal:function(){return a("total")},getRecipientAutomation:function(){return a("automation")},getRecipientPage:function(){return parseInt(a("offset"))/parseInt(a("limit"))+1},getRecipientLimit:function(){return a("limit")},getConversionData:function(){return r("data")},getConversionLoading:function(){return r("isLoading")},getConversionOffset:function(){return r("offset")},getConversionAutomationId:function(){return r("automationId")},getConversionTotal:function(){return r("total")},getConversionAutomation:function(){return r("automation")},getConversionPage:function(){return parseInt(r("offset"))/parseInt(r("limit"))+1},getConversionLimit:function(){return r("limit")},getCountData:function(){return e("countData")},getContactData:function(){return o("data")},getContactLoading:function(){return o("isLoading")},getContactOffset:function(){return o("offset")},getContactAutomationId:function(){return o("automationId")},getContactTotal:function(){return o("total")},getContactAutomation:function(){return o("automation")},getContactPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getContactLimit:function(){return o("limit")},getContactCountData:function(){return o("contactCount")},getAnalyticsData:function(){return i("analytics")},getAnalyticsTileData:function(){return i("tiles")},getAnalyticsTableData:function(){return i("tableData")},getAnalyticsLoading:function(){return i("isLoading")},getAnalyticsType:function(){return i("type")},getAnalyticsAutomationData:function(){return i("automation")}})},p=n(51),O=n(4),d=n(20);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var v=function(){var t=Object(p.a)("automationv1List"),e=t.fetch,n=t.setStateProp,a=h(t,["fetch","setStateProp"]),r=Object(p.a)(s.a.recipient),o=r.fetch,i=r.setStateProp,c=Object(p.a)(s.a.conversion),u=c.fetch,l=c.setStateProp,m=Object(p.a)(s.a.contacts),b=m.fetch,f=m.setStateProp,j=Object(p.a)(s.a.analytics),w=j.fetch,v=j.setStateProp;return g(g({},a),{},{fetch:function(t,a,r,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{}),n("isLoading",!0);var c=a.s,s=(a.page,a.filter,a.path,h(a,["s","page","filter","path"])),u={offset:r,limit:o,status:t,search:c,filters:s,version:i?2:1};e("GET",Object(O.u)("/automations"),u)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){o("GET",Object(O.u)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){i(t,e)},fetchConversion:function(t,e,n){l("automation",{}),u("GET",Object(O.u)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){l(t,e)},fetchContacts:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";f("automation",{}),b("GET",Object(O.u)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(r)))},setContactValues:function(t,e){f(t,e)},fetchAnalytics:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=0;4===parseInt(o)&&(i=1),w("GET",Object(O.u)("/analytics/emails/chart/")+"?"+Object(d.stringify)({after:e,before:n,interval:a,oid:t,type:r,mode:o,contact:i}))},setAnalyticsValues:function(t,e){v(t,e)}})},y=n(3),_=n(57),E=n(58),k=n(18),C=n(5),x=n(66),A=n(9),P=n.n(A),S=n(6),N=n.n(S),D=n(14),T=n(949),I=n(314),M=n(316),R=n(61),z=n(8),L=n(31),F=n(302),B=n(16);function q(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var G=function(t){var e=U(Object(a.useState)(!1),2),n=e[0],r=e[1],i=U(Object(a.useState)(""),2),c=i[0],s=i[1],u=U(Object(a.useState)({}),2),l=u[0],m=u[1],b=U(Object(a.useState)(""),2),f=b[0],p=b[1],d=Object(F.a)().setAutomationData,j=t.onCloseModal,g=t.query,w=t.isV2,h=void 0!==w&&w;Object(a.useEffect)((function(){r(!1),m({}),p("")}),[]);var v=function(){var t,e=(t=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f){t.next=3;break}return s(Object(o.__)("Automation name is required field","wp-marketing-automations")),t.abrupt("return");case 3:return s(""),r(!0),t.prev=5,t.next=8,P()({path:Object(O.u)("/automations/create/"),method:"POST",data:{title:f,version:h}});case 8:if(!((e=t.sent)&&e.result&&e.result.automation_id)){t.next=18;break}if(!h){t.next=16;break}d("isNewAutomation",e.result.automation_id),bwfcrm_contacts_data.first_automation_id=e.result.automation_id,setTimeout((function(){return Object(D.k)({path:"/automation/"+e.result.automation_id},"/",g)}),500),t.next=18;break;case 16:return window.location.href="admin.php?page=autonami-automations&edit="+e.result.automation_id,t.abrupt("return");case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(5),r(!1),m({error:!0,message:t.t0.message});case 24:case"end":return t.stop()}}),t,null,[[5,20]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){q(o,a,r,i,c,"next",t)}function c(t){q(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(a.createElement)(C.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-modal-header"},Object(a.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:j,className:"bwf-modal-close"},Object(a.createElement)(z.a,{icon:"close",color:"#353030"}))),c&&Object(a.createElement)(L.a,{status:"error",onRemove:function(){return s("")}},c),l&&l.error||l&&l.success?l&&l.success&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(I.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):l&&l.error&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(M.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):Object(a.createElement)(R.a,null):Object(a.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(t){"Enter"==t.key&&v()}},Object(a.createElement)(C.TextControl,{placeholder:Object(o.__)("Enter automation name","wp-marketing-automations"),autoFocus:!0,label:Object(o.__)("Name","wp-marketing-automations"),value:f,onChange:function(t){return p(t)},disabled:n}),Object(a.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(a.createElement)(B.a,{onClick:function(){return j()},className:"bwf-cancel-btn"},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(B.a,{isPrimary:!0,disabled:n,onClick:v,isBusy:n},Object(o.__)("Add","wp-marketing-automations")))))},H=n(123),J=n(50),W=n(121),Y=n(74),$=n(303),Q=n(944);function Z(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function K(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Z(o,a,r,i,c,"next",t)}function c(t){Z(o,a,r,i,c,"throw",t)}i(void 0)}))}}var X=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,i=t.onError,c=t.onRequestClose,s=t.actionType,u=n?n.length:0,l=Object(Q.a)(function(){var t=K(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P()({path:Object(O.u)("/bulk-action/automation_v1"),method:"DELETE",data:{ids:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return l.reset()}),2500),r&&r()},onError:function(){i&&i()}}),m=function(){var t=K(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.mutate(n.map((function(t){return t.id})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b={delete:{title:Object(o._n)("Delete Automation","Delete Automations",u,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("automation","automations",u,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete automation","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(a.createElement)(x.a,{modalTitle:b.hasOwnProperty(s)&&b[s].hasOwnProperty("title")?b[s].title:Object(o._n)("Perform Actions","Perform Actions",u,"wp-marketing-automations"),deleteDescriptionText:b.hasOwnProperty(s)&&b[s].hasOwnProperty("description")?b[s].description:"",confirmButtonText:b.hasOwnProperty(s)&&b[s].hasOwnProperty("confirmBtn")?b[s].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:b.hasOwnProperty(s)&&b[s].hasOwnProperty("cancelBtn")?b[s].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:l.isLoading,successMessage:l.isSuccess&&(b.hasOwnProperty(s)&&b[s].hasOwnProperty("successMsg")?b[s].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:l.isError&&(l.error&&l.error.message?l.error.message:b.hasOwnProperty(s)&&b[s].hasOwnProperty("errorMsg")?b[s].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:b.hasOwnProperty(s)&&b[s].hasOwnProperty("confirmDescription")?b[s].confirmDescription:"",isDelete:!0})},tt=n(122),et=n(1028);function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var st,ut,lt,mt,bt,ft,pt,Ot,dt,jt,gt,wt,ht,vt,yt,_t,Et,kt,Ct,xt,At,Pt,St,Nt,Dt,Tt,It,Mt,Rt,zt,Lt,Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(a.createElement)(a.Fragment,null,"".concat(""!==t?t:Object(o.__)("It seems there was an issue during the import","wp-marketing-automations"),". ").concat(Object(o.__)("For further help, contact","wp-marketing-automations")," "),Object(a.createElement)("a",{href:Object(O.T)("support",{utm_medium:"Automation+Import+Failed"}),target:"_blank",rel:"noopener noreferrer"},Object(o.__)(" support. ","wp-marketing-automations")))},Bt=function(t){var e=t.onRequestClose,n=t.isV2,r=void 0!==n&&n,i=Object(D.i)(),c=it(Object(a.useState)({status:!1,modalTitle:Object(o.__)("Import Automation","wp-marketing-automations")}),2),s=c[0],u=c[1],l=it(Object(a.useState)(null),2),m=l[0],b=l[1],f=function(){var t,n=(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(at(at({},s),{},{loading:!0,title:Object(o.__)("Please wait…","wp-marketing-automations"),message:Object(a.createElement)(a.Fragment,null,Object(o.sprintf)(Object(o.__)("Please wait! We are importing %s data","wp-marketing-automations"),null==m?void 0:m.name))})),t.prev=1,(n=new FormData).append("files",m),n.append("version",r?2:1),t.next=7,P()({method:"POST",body:n,path:Object(O.u)("/automations/import")}).then((function(t){200==t.code?t.result.hasOwnProperty("automation_id")?r?(u(at(at({},s),{},{status:!0,loading:!1,title:Object(o.__)("Importing Done","wp-marketing-automations"),message:Object(o.__)("Successfully Imported and added in your Automation","wp-marketing-automations")})),setTimeout((function(){Object(D.k)({page:"autonami",path:"/automation/".concat(t.result.automation_id)},"/",{})}),1e3)):window.location.href="admin.php?page=autonami-automations&edit="+t.result.automation_id:(Object(D.k)({path:"/automations/"},"/",i),e()):(b(null),u(at(at({},s),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:Ft(t.message)})))}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),b(null),u(at(at({},s),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:Ft(t.t0.message)}));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){ot(o,a,r,i,c,"next",t)}function c(t){ot(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){m&&f()}),[m]),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(C.Modal,{className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-admin-m-header-new"},Object(a.createElement)("div",{className:"bwf-admin-m-title"},Object(o.__)("Import Automation","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-admin-m-close",onClick:e},Object(a.createElement)(z.a,{icon:"close",size:20}))),s.title&&Object(a.createElement)("div",{className:"bwf-import-modal-content bwf-t-center"},s.loading?Object(a.createElement)(z.a,{icon:"import-loading"}):Object(a.createElement)(z.a,{icon:s.status?"success-loader":"circle-close",size:48}),Object(a.createElement)("div",{className:"bwf-drop-import-content"},s.message)),!s.title&&Object(a.createElement)(et.a,{onFileSelected:function(t){return b(t)},filetypeArray:["application/json"],importText:Object(o.__)("Drag or Browse a json file to import automation","wp-marketing-automations"),importInfo:"( "+Object(o.__)("File size 10 MB max","wp-marketing-automations")+" )"})))},qt=n(7);function Ut(){return(Ut=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var Vt=function(t){return qt.createElement("svg",Ut({width:166,height:139,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),st||(st=qt.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.288 99.751c13.301-.656 27.057-1.253 39.407.396 14.214 1.898 31.561 4.641 33.579 9.35 2.065 4.817-20.179 7.415-24.385 12.101-4.582 5.103 11.567 11.667-.383 15.491-11.393 3.645-32.131 1.151-48.218.06-13.179-.894-23.004-3.715-34.857-5.693-14.297-2.386-35.486-2.466-41.67-7.079-6.138-4.581 4.583-9.768 13.58-13.881 7.4-3.383 20.187-4.884 31.8-6.867 10.035-1.713 19.805-3.318 31.147-3.878z",fill:"#ADD3E4",opacity:.3})),ut||(ut=qt.createElement("path",{d:"M13.017 105.034c4.122-7.56-8.892-11.114-12.03-8.115-3.137 2.998 7.264 16.853 12.03 8.115z",fill:"#E28CB5"})),lt||(lt=qt.createElement("path",{d:"M18.488 102.727c8.09 0 4.429-14.492.97-14.492-4.337 0-10.317 14.492-.97 14.492z",fill:"#E28CB5"})),mt||(mt=qt.createElement("path",{d:"M24.724 107.984c6.67 5.438 12.532-6.729 10.16-10.366-2.371-3.636-17.87 4.081-10.16 10.366z",fill:"#E28CB5"})),bt||(bt=qt.createElement("path",{d:"M16.219 111.582c-1.126-2.609-2.774-5.04-4.898-7.224-3.613-3.717-7.414-5.46-7.452-5.477a.225.225 0 00-.185.41c.037.017 3.772 1.732 7.326 5.392 2.083 2.145 3.698 4.529 4.8 7.087.124.29.24.583.353.878h.48a21.684 21.684 0 00-.424-1.066zM19.256 91.207a.224.224 0 10-.446-.053c-.015.122-1.15 9.834-1.092 21.494h.45c-.058-11.63 1.073-21.319 1.088-21.441zM32.64 99.246a.224.224 0 00-.313-.062c-.032.022-3.277 2.208-6.615 5.803-1.819 1.958-3.886 4.584-5.4 7.661h.503c1.48-2.942 3.466-5.458 5.219-7.347 3.303-3.559 6.511-5.721 6.543-5.743a.226.226 0 00.062-.312z",fill:"#CC6697"})),ft||(ft=qt.createElement("path",{d:"M18.169 112.648H9.887a.356.356 0 00-.338.466l.396 1.217.2.616 2.868 8.812a.58.58 0 00.552.401h10.337a.58.58 0 00.551-.401l2.868-8.812.2-.616.397-1.217a.355.355 0 00-.338-.466H18.17z",fill:"#D1E5ED"})),pt||(pt=qt.createElement("path",{d:"M27.522 114.331l-.2.616H10.144l-.2-.616h17.577z",fill:"#A6BFCA"})),Ot||(Ot=qt.createElement("path",{d:"M72.472 80.123H6.358a3.372 3.372 0 01-3.368-3.377v-63.1a3.372 3.372 0 013.368-3.377h66.114a3.372 3.372 0 013.368 3.376v63.101a3.372 3.372 0 01-3.368 3.377z",fill:"#ADD3E4"})),dt||(dt=qt.createElement("path",{d:"M58.75 33.574h-5.266l-.92 2.985H48.46l5.846-15.978h3.612l5.89 15.978H59.68l-.93-2.985zM54.402 30.6h3.427l-1.719-5.542-1.708 5.542zM44.238 20.38h-31.37a1.012 1.012 0 01-1.01-1.014c0-.56.452-1.014 1.01-1.014h31.37c.559 0 1.011.454 1.011 1.014s-.453 1.013-1.01 1.013zM34.154 25.436H12.869a1.012 1.012 0 01-1.011-1.013c0-.56.452-1.014 1.01-1.014h21.286c.558 0 1.01.454 1.01 1.014s-.452 1.013-1.01 1.013z",fill:"#fff"})),jt||(jt=qt.createElement("path",{d:"M18.186 33.72H12.58a.723.723 0 010-1.448h5.606a.723.723 0 010 1.448z",fill:"#0073AA"})),gt||(gt=qt.createElement("path",{d:"M59.316 58.577H41.99a.723.723 0 01-.722-.724V54.93c0-.4.323-.724.722-.724h17.325c.398 0 .722.324.722.724v2.924c0 .4-.324.724-.722.724zM66.296 66.525H41.991a.723.723 0 01-.722-.724v-2.924c0-.4.323-.724.722-.724h24.305c.399 0 .722.324.722.724V65.8c0 .4-.323.724-.722.724zM22.65 71.244c0-.746.603-1.35 1.347-1.35-5.241 0-9.505-4.275-9.505-9.528 0-5.254 4.264-9.529 9.505-9.529 5.24 0 9.504 4.275 9.504 9.529 0-.746.603-1.35 1.347-1.35s1.347.604 1.347 1.35c0-6.743-5.472-12.228-12.198-12.228S11.8 53.623 11.8 60.366c0 6.742 5.472 12.227 12.198 12.227a1.348 1.348 0 01-1.347-1.35z",fill:"#fff"})),wt||(wt=qt.createElement("path",{d:"M34.841 59.016c-.743 0-1.347.604-1.347 1.35 0 5.254-4.263 9.528-9.504 9.528-.744 0-1.347.605-1.347 1.35 0 .746.603 1.35 1.347 1.35 6.726 0 12.198-5.486 12.198-12.228 0-.746-.603-1.35-1.347-1.35z",fill:"#0073AA"})),ht||(ht=qt.createElement("path",{d:"M3.047 14.269a4 4 0 014-4H71.8a4 4 0 014 4v1.088H3.047v-1.088z",fill:"#005D89"})),vt||(vt=qt.createElement("ellipse",{cx:9.396,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),yt||(yt=qt.createElement("ellipse",{cx:13.624,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),_t||(_t=qt.createElement("ellipse",{cx:17.854,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),Et||(Et=qt.createElement("path",{d:"M96.251 9.667c.462 5.607 4.529 9.122 6.916 9.122.358 0 .748-.064 1.155-.176v2.797h6.054V14.3c.056-.148.11-.31.164-.485 2.684-.257 2.572-4.7.978-4.7-.291 0-.484.275-.607.552l-.395.396V8.056s-.891.084-2.645-2.592c-.757 1.15-6.792 2.955-11.635 2.147 0 0-.013.998.015 2.056z",fill:"#FCBEB7"})),kt||(kt=qt.createElement("path",{d:"M103.585 0c4.176 0 5.011 2.23 5.011 2.23 1.781 0 4.509 3.262 2.867 6.886l-.009.008-.938.94V8.057s-.891.083-2.644-2.593c-.757 1.15-6.792 2.955-11.636 2.147 0 0-.012.998.016 2.056v.003C94.443 4.43 98.074 0 103.585 0z",fill:"#311643"})),Ct||(Ct=qt.createElement("path",{d:"M105.38 10.277c.185 0 .334-.15.334-.334v-.625a.334.334 0 10-.668 0v.625c0 .185.15.334.334.334zM99.186 10.277c.185 0 .334-.15.334-.334v-.625a.334.334 0 10-.668 0v.625c0 .185.15.334.334.334zM102.924 15.103c.596 0 1.002-.225 1.248-.43.31-.257.438-.539.444-.55a.153.153 0 00-.279-.127c-.017.038-.441.927-1.671.785a.154.154 0 00-.035.304c.102.012.2.018.293.018z",fill:"#311643"})),xt||(xt=qt.createElement("path",{d:"M107.597 13.972c.912 0 1.651-.741 1.651-1.655a1.652 1.652 0 10-3.303 0c0 .914.739 1.655 1.652 1.655zM96.422 10.944c.21 1.11.56 2.123 1.004 3.025a1.652 1.652 0 001.568-1.652 1.652 1.652 0 00-2.572-1.373z",fill:"#F49795"})),At||(At=qt.createElement("path",{d:"M96.847 9.63a2.345 2.345 0 002.34 2.345 2.345 2.345 0 002.339-2.256 1.524 1.524 0 011.516-.002 2.345 2.345 0 002.338 2.258 2.345 2.345 0 000-4.688c-1.205 0-2.2.918-2.326 2.092a1.797 1.797 0 00-1.54.001 2.345 2.345 0 00-2.327-2.093c-1.29 0-2.34 1.051-2.34 2.344zm6.5 0c0-1.123.912-2.037 2.034-2.037a2.038 2.038 0 010 4.075 2.038 2.038 0 01-2.034-2.037zm-6.194 0c0-1.123.913-2.037 2.034-2.037a2.038 2.038 0 010 4.075 2.038 2.038 0 01-2.034-2.037z",fill:"#fff"})),Pt||(Pt=qt.createElement("path",{d:"M104.322 21.41v-2.797c1.369-.377 2.928-1.3 4.099-2.18l-4.099 4.977z",fill:"#F9AFAB"})),St||(St=qt.createElement("path",{d:"M89.85 111.672h6.412l6.219-33.125 4.563-14.356 11.044 47.481h6.412l-5.974-53.27H94.838l-4.988 53.27z",fill:"#0073AA"})),Nt||(Nt=qt.createElement("path",{d:"M95.752 114.254v4.538c0 .53-.428.958-.957.958H81.943a.221.221 0 01-.221-.221v-.874c0-.382.218-.73.561-.896l7.247-3.505h6.222zM118.783 114.254v4.538c0 .53.429.958.957.958h12.852a.221.221 0 00.221-.221v-.874a.995.995 0 00-.561-.896l-7.247-3.505h-6.222z",fill:"#2F3D6C"})),Dt||(Dt=qt.createElement("path",{d:"M96.26 111.672l-.484 2.582h-6.248l.32-2.582h6.411zM124.499 111.672l.507 2.582h-6.222l-.697-2.582h6.412z",fill:"#FCBEB7"})),Tt||(Tt=qt.createElement("path",{d:"M118.654 59.545l-24.051 1.361.234-2.503h23.689",fill:"#005D89"})),It||(It=qt.createElement("path",{d:"M104.332 19.024l-9.165 3.983a3.764 3.764 0 00-1.648 1.379l-3.669 5.537 5.174 4.573 1.383-1.183-1.57 25.09h23.689l-1.452-16.36.322-8.73 1.23 1.227 5.466-4.208-2.937-4.794a7.285 7.285 0 00-3.026-2.746l-7.753-3.769s-3.517 2.311-6.044 0z",fill:"#7EB9D6"})),Mt||(Mt=qt.createElement("path",{d:"M102.382 19.87a7.093 7.093 0 004.586 1.665c1.786 0 3.471-.65 4.787-1.84l-.239-.116a6.849 6.849 0 01-4.548 1.71 6.852 6.852 0 01-4.334-1.529l-.252.11z",fill:"#fff"})),Rt||(Rt=qt.createElement("path",{d:"M118.42 23.575a2.038 2.038 0 002.709 1.925 7.296 7.296 0 00-2.624-2.51 2.046 2.046 0 00-.085.585zM92.972 25.206a2.038 2.038 0 002.851-2.485l-.66.286a3.765 3.765 0 00-1.647 1.378l-.544.82zM117.191 82.664a3.072 3.072 0 003.07-3.074 3.072 3.072 0 00-3.07-3.074 3.071 3.071 0 00-3.069 3.074 3.071 3.071 0 003.069 3.074zM96.716 82.664a3.071 3.071 0 003.07-3.074 3.072 3.072 0 00-3.07-3.074 3.072 3.072 0 00-3.069 3.074 3.072 3.072 0 003.07 3.074z",fill:"#005D89"})),zt||(zt=qt.createElement("path",{d:"M63.675 23.922l.258-.043.04-.157a.708.708 0 01.638-.532l3.605-.244 2.509-1.022-1.4-1.75a.706.706 0 01.074-.961l2.954 2.28c.29.223.53.505.707.826l.924 1.687-.005.006 13.508 9.455 2.363-3.544 5.174 4.572-6.477 5.736a1.006 1.006 0 01-1.332-.014L72.01 26.516l-2.91.277a5.071 5.071 0 01-1.95-.195l-1.545-.467a.465.465 0 01-.295-.622l-1.1-.212a.475.475 0 01-.383-.418l-.02-.178h-.066a.392.392 0 01-.066-.779zM113.259 56.488l2.409-1.077a.673.673 0 00.359-.386l.349-.963-1.217.3-.388.834a.573.573 0 01-.746.285l.507-1.533c.095-.244.278-.444.512-.559l2.544-1.253 4.389-14.255-3.353-3.34 5.466-4.21 3.196 5.571c.44.766.493 1.695.145 2.506l-8.871 20.316-1.76.082a.574.574 0 01-.52-.28l-.192-.32-.927.075a.576.576 0 01-.51-.231l-.217-.295-.13.035a.792.792 0 01-.901-.393l-.643.215a.92.92 0 01.499-1.124z",fill:"#FCBEB7"})),Lt||(Lt=qt.createElement("path",{d:"M125.42 37.19c0 1.005.716 1.841 1.665 2.025l.347-.808a2.808 2.808 0 00-.145-2.505l-.396-.69a2.063 2.063 0 00-1.471 1.979zM85.752 38.9l1.461 1.318c.377.34.948.346 1.332.014l1.432-1.238a2.434 2.434 0 00-4.225-.094z",fill:"#F9AFAB"})))},Gt=(n(1261),n(41));function Ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Wt=function(t){var e=t.onRequestClose,n=t.onAction,r=Ht(Object(a.useState)(!1),2),i=r[0],c=r[1],s=Ht(Object(a.useState)(!1),2),u=s[0],l=s[1],m=Ht(Object(a.useState)(!1),2),b=m[0],f=m[1],p=Ht(Object(a.useState)(!1),2),d=p[0],j=p[1],g=Ht(Object(a.useState)(!1),2),w=g[0],h=g[1];return Object(a.createElement)("div",{className:"bwf-custom-experiment-modal"},Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-hero-svg"},Object(a.createElement)("div",null,Vt())),Object(a.createElement)("div",{className:"bwf-h1"},Object(o.__)("Note: You would need to manually create an equivalent Automation in Next-Gen Builder.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-content-list"},Object(a.createElement)("div",{className:"modal-content-list-heading"},Object(o.__)("Please confirm","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-wrap"},Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(Gt.a,{checked:u,className:"bwf-export-toggler",onChange:function(t){l(t)}}),Object(o.__)("Yes, I have manually created this automation in the Automation Next-Gen Builder (new version) and no longer need this automation to work in older version.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(Gt.a,{checked:b,className:"bwf-export-toggler",onChange:function(t){f(t)}}),Object(o.__)("Yes, I understand that this automation will not trigger for new contacts after I confirm migration.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(Gt.a,{checked:d,className:"bwf-export-toggler",onChange:function(t){j(t)}}),Object(o.__)("Yes, I  understand that all the Scheduled Tasks for older contacts will still run.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(Gt.a,{checked:w,className:"bwf-export-toggler",onChange:function(t){h(t)}}),Object(o.__)("Yes, I understand that I would not be able to edit the Automation after the migration is confirmed.","wp-marketing-automations")))),Object(a.createElement)("div",{className:"bwf-modal-note"},Object(a.createElement)("strong",null,Object(o.__)("Note: ","wp-marketing-automations")),Object(o.__)("If you are unsure about migration, click here to read our step-by-step guide to migrating the automation. You can also contact our support for any further questions.","wp-marketing-automations")," ",Object(a.createElement)("a",{href:Object(O.T)("migratefromv1",{utm_medium:"Migrate+New+Automation"}),target:"_blank",className:"bwf-a-no-underline",rel:"noreferrer"},Object(o.__)("Learn More","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-modal-action",style:{marginBottom:0}},Object(a.createElement)(C.Button,{isSecondary:!0,onClick:e,style:{marginRight:"20px"}},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(C.Button,{isPrimary:!0,onClick:function(){u&&b&&d&&w&&(c(!0),n())},isBusy:i,disabled:i||!(u&&b&&d&&w)},Object(o.__)("Yes, I Confirm Migration","wp-marketing-automations"))))},Yt=n(176),$t=n(504),Qt=n(306),Zt=n(24);function Kt(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function Xt(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){Kt(o,a,r,i,c,"next",t)}function c(t){Kt(o,a,r,i,c,"throw",t)}i(void 0)}))}}function te(t){return function(t){if(Array.isArray(t))return ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ie(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(){return(ee=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(n),!0).forEach((function(e){re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||ie(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e){if(t){if("string"==typeof t)return ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(t,e):void 0}}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var se=function(t){var e=Object(a.useContext)(O.h),n=t.type,r=void 0===n?"all":n,c=t.query,s=c.s,u=void 0===s?"":s,l=v(),m=f(),b=l.fetch,p=l.setAutomationListValues,j=m.getAutomations,g=m.getPageNumber,w=m.getPerPageCount,h=m.getTotalCount,C=m.getOffset,A=m.getLoadingStatus,S=m.getCountData,I=Object(a.useRef)(new AbortController),M=oe(Object(a.useState)({loading:!1,status:!1}),2),R=M[0],L=M[1],F=oe(Object(a.useState)(!1),2),q=F[0],U=F[1],V=oe(Object(a.useState)(!1),2),Q=V[0],Z=V[1],K=oe(Object(a.useState)(!1),2),et=K[0],nt=K[1],at=oe(Object(a.useState)({}),2),rt=at[0],ot=at[1],it=oe(Object(a.useState)(!1),2),ct=it[0],st=it[1],ut=oe(Object(a.useState)(!1),2),lt=ut[0],mt=ut[1],bt=oe(Object(a.useState)([]),2),ft=bt[0],pt=bt[1],Ot=oe(Object(a.useState)(!1),2),dt=Ot[0],jt=Ot[1],gt=oe(Object(a.useState)(""),2),wt=gt[0],ht=gt[1],vt=j(),yt=C(),_t=w(),Et=A(),kt=h(),Ct=g(),xt=S(),At="all";Object(y.isEmpty)(r)||("active"===r?At=1:"inactive"===r&&(At=2));var Pt=Object(W.a)().getPageCountData,St=Object(Y.a)(),Nt=St.setPageCountData,Dt=St.setPageData,Tt=Object(J.a)(Object(O.kb)()).formatAmount;Object(a.useEffect)((function(){nt(!1),p("isLoading",!0),b(At,c,yt,_t)}),[yt,_t,r,u]),Object(a.useEffect)((function(){if(!Et&&!et&&!Object(y.isEmpty)(vt)||lt)try{var t={automation_ids:[],version:1,force:lt};vt.map((function(e){t.automation_ids.push(e.id)})),P()({method:"GET",path:Object(O.u)("/automations-stats?"+Object(d.stringify)(t)),signal:I.current.signal}).then((function(t){200==t.code&&(ot(t.result),nt(!0),lt&&(e(Object(o.__)("Data Updated","wp-marketing-automations")),Object(O.wb)(e,3e3),mt(!1)))})).catch((function(t){console.log(t)}))}catch(t){nt(!0),mt(!1),console.log(t)}Dt("automation-v1-list")}),[vt,lt]);var It=function(){Vt&&Vt(),pt([])},Mt=Object(a.useCallback)((function(t,e){pt(e),ht(t),jt(!0)}),[]);Object(a.useEffect)((function(){return nt(!1),ot({}),It(),function(){I.current.abort()}}),[]);var Rt=Pt();Object(a.useEffect)((function(){Et||U(!1)}),[Et]),Object(a.useEffect)((function(){var t={};xt.hasOwnProperty("automations")&&(t["automations-v1_automations"]=parseInt(xt.automations),t["automations-v1_all"]=parseInt(xt.automations)),xt.hasOwnProperty("task_history")&&(t["automations-v1_task-history"]=parseInt(xt.task_history)),xt.hasOwnProperty("contact_activity")&&(t["contact-activity"]=parseInt(xt.contact_activity)),xt.hasOwnProperty("status_count")&&Object.keys(xt.status_count).map((function(e){t["automations-v1_".concat(e)]=parseInt(xt.status_count[e])})),Nt(ae(ae({},Rt),t))}),[xt]),Object(T.a)("automations-v1","","",!1,"",0,!1,!1);var zt=Object(a.useMemo)((function(){var t={};if(Array.isArray(vt)){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=ie(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(vt);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.id]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[vt]),Lt=Object(tt.b)(zt),Ft=Lt.singleSelectProps,qt=Lt.selectAllProps,Ut=Lt.floatingBarProps,Vt=Lt.resetSelection,Ht=Lt.selected,Jt=Object.keys(Ht).filter((function(t){return Ht[t]})).length,Kt=[{key:"select_template",label:Object(a.createElement)(Gt.a,ee({type:"checkbox",checked:!1,onChange:function(){}},qt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"actions",label:Object(o.__)("Actions","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"tasks",label:Object(o.__)("Tasks","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"total_run",label:Object(o.__)("Total Runs","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},Object(O.Tb)()&&{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-w-120"},{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-60"}],ne=function(t){t!==_t&&p("limit",t)},re=function(t){var e=[],n="";return Object(y.isEmpty)(t.automation_actions)||Object.entries(t.automation_actions).map((function(t){var a=oe(t,2),r=(a[0],a[1]);Object(y.isEmpty)(n)&&(n=r[0]),e=[].concat(te(e),te(r))})),Object(a.createElement)(a.Fragment,null,Object(y.isEmpty)(n)?"-":Object(a.createElement)(a.Fragment,null,!Object(y.isEmpty)(n)&&n,!Object(y.isEmpty)(e)&&e.length>1&&Object(a.createElement)(H.a,{items:e})))},ce=function(){var t=Xt(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(ae(ae({},a),{},{status:!0})),t.prev=1,t.next=4,P()({path:Object(O.u)("/automations"),method:"DELETE",data:{automation_ids:[n]}}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));L({status:!1}),e(t.message),b(At,c,0,_t),Object(O.wb)(e,3e3)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),L(ae(ae({},a),{},{error:t.t0.message}));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),se=function(){var t=Xt(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(o.__)("Duplicating…","wp-marketing-automations")),t.prev=1,t.next=4,P()({path:Object(O.u)("/automations/".concat(n,"/duplicate")),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));e(Object(o.__)("Automation Duplicated","wp-marketing-automations")),b(At,c,0,_t),Object(O.wb)(e,3e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(O.wb)(e,3e3),setTimeout((function(){L({status:!0,modalTitle:Object(o.__)("Duplicate Automation","wp-marketing-automations"),error:t.t0.message})}),[1500]);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),ue=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},le=function(){var t=Xt(regeneratorRuntime.mark((function t(){var n,a,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,a=i.length>1&&void 0!==i[1]?i[1]:"automation",e(Object(o.__)("Exporting…","wp-marketing-automations")),r="",r=parseInt(n)>0?Object(O.u)("/automations/".concat(n,"/export?version=1")):Object(O.u)("/automations/export/?version=1"),t.prev=5,t.next=8,P()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));ue(t.result,a),e(Object(o.__)("Automation exported","wp-marketing-automations")),Object(O.wb)(e,3e3)}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),Object(O.wb)(e,3e3),setTimeout((function(){L({status:!0,modalTitle:Object(o.__)("Export Automation","wp-marketing-automations"),error:t.t0.message})}),[1500]);case 14:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(){return t.apply(this,arguments)}}(),me=function(){var t=Xt(regeneratorRuntime.mark((function t(n,a){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e(4===n?Object(o.__)("Updating Automation…","wp-marketing-automations"):n?Object(o.__)("Activating Automation…","wp-marketing-automations"):Object(o.__)("Deactivating Automation…","wp-marketing-automations")),t.prev=2,t.next=5,P()({path:Object(O.u)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:a}}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));e(4===n?Object(o.__)("Automation migrated","wp-marketing-automations"):n?Object(o.__)("Automation activated","wp-marketing-automations"):Object(o.__)("Automation deactivated","wp-marketing-automations"));var r;r=vt.map((function(t){return t.id==a&&(1==n?t.status="1":4==n?t.migrated=!0:t.status="0"),t})),4==n&&L({status:!1}),p("automations",r),Object(O.wb)(e,3e3)}));case 5:t.next=12;break;case 7:t.prev=7,t.t0=t.catch(2),4==n&&L(ae(ae({},r),{},{error:t.t0.message})),Object(O.wb)(e,3e3),setTimeout((function(){L({status:!0,modalTitle:Object(o.__)("Automation Status Update","wp-marketing-automations"),error:t.t0.message})}),[1500]);case 12:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}(),be=function(t){if(t.hasOwnProperty("migrated")&&t.migrated)return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-blue"},Object(o.__)("Migrated","wp-marketing-automations"));switch(parseInt(t.status)){case 1:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(o.__)("Active","wp-marketing-automations"));default:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-red"},Object(o.__)("Inactive","wp-marketing-automations"))}},fe=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+t.id,className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},pe=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},Oe=function(t){if(!et)return Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15",title:"Loading"});var e=rt.hasOwnProperty(t.id)?rt[t.id]:{};return Object(a.createElement)(k.a,{gap:2,justify:"flex-start"},Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Active","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automations-v1/task-history/scheduled",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-scheduled",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("scheduled")?Object(O.Wb)(parseInt(e.scheduled)):0))))),Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Paused","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automations-v1/task-history/paused",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-paused",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("paused")?Object(O.Wb)(parseInt(e.paused)):0))))),Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Completed","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automations-v1/task-history/completed",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-completed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("completed")?Object(O.Wb)(parseInt(e.completed)):0))))),Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Failed","wp-marketing-automations"),position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automations-v1/task-history/failed",automation:t.id},"/",c)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-failed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("failed")?Object(O.Wb)(parseInt(e.failed)):0))))))},de=Array.isArray(vt)?vt.map((function(t){return[{display:Ft.hasOwnProperty(t.id)?Object(a.createElement)(Gt.a,ee({type:"checkbox",checked:!1,onChange:function(){}},Ft[t.id])):Object(a.createElement)(a.Fragment,null),value:null},{display:(e=t,Object(a.createElement)(_.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(E.a,null,Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+e.id,className:"bwf-a-no-underline"},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),!(e.hasOwnProperty("migrated")&&e.migrated)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){me(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){se(e.id),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Duplicate","wp-marketing-automations")))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:"",content:Object(a.createElement)(Wt,{onRequestClose:function(){return L({})},onAction:function(){return me(4,e.id,t)}}),isDelete:!1,closeIcon:!0,modalClass:"bwf-admin-modal-medium"};L(ae({},t)),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Confirm Migration","wp-marketing-automations")))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){le(e.id,e.name),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Export","wp-marketing-automations"))))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:Object(o.__)("Delete Automation","wp-marketing-automations"),deleteEntityName:e.name,isDelete:!0,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),closeIcon:!1};L(ae(ae({},t),{},{onConfirm:function(){return ce(e.id,t)}})),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:fe(t),value:t.name},{display:pe(t),value:t.event},{display:re(t),value:""},{display:Oe(t),value:""},{display:parseInt(t.run_count)>0?parseInt(t.run_count):"0",value:t.run_count},Object(O.Tb)()&&{display:t.revenue&&parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},Tt(t.revenue)):"-",value:""},{display:be(t),value:""}];var e})):[],je=N()("bwfcrm-campaign-list-table",{"has-search":!0}),ge=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(z.a,{icon:"zero-automation",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Grow your business with marketing automation","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Create Automations for abandoned cart, post-purchase, win-back, and more. Build automated workflows that generate profits while you sleep. Connect your site to Zapier, Slack, Twilio, Google Sheets and explore limitless automation possibilities.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Create Automation","wp-marketing-automations"),proCheck:!1,onClick:function(){Z(!0)}},{text:Object(o.__)("Import Automation","wp-marketing-automations"),isSecondary:!0,proCheck:!1,onClick:function(){return st(!0)}}]}}],we=Object(a.createElement)("div",{className:"bwf-display-flex gap-12"},Object(a.createElement)(B.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(o.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return nt(!1),void mt(!0)},disabled:!et,isBusy:!et&&lt},Object(a.createElement)(z.a,{icon:"retry",size:16}),Object(o.__)("Refresh","wp-marketing-automations")),Object(a.createElement)(B.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){return le()}},Object(a.createElement)(z.a,{icon:"export",size:16}),Object(o.__)("Export","wp-marketing-automations")),Object(a.createElement)(B.a,{isGray:!0,className:"bwf-btn-small bwf-btn-gray is-light",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){return st(!0)}},Object(a.createElement)(z.a,{icon:"import",size:16}),Object(o.__)("Import","wp-marketing-automations"))),he=[{slug:"automations-v1_all",name:Object(o.__)("All","wp-marketing-automations"),path:"/automations-v1/"},{slug:"automations-v1_active",name:Object(o.__)("Active","wp-marketing-automations"),path:"/automations-v1/list/active"},{slug:"automations-v1_inactive",name:Object(o.__)("Inactive","wp-marketing-automations"),path:"/automations-v1/list/inactive"}],ve=Et||!["","all"].includes(r)||0!==kt||""!==u||q;return Object(a.createElement)(a.Fragment,null,ve?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-automation-header"},Object(a.createElement)("div",{className:"bwf-automation-h-left"},Object(a.createElement)("div",{className:"bwf-automation-h-title"},Object(o.__)("Automations","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-automation-h-tag"},Object(o.__)("Legacy","wp-marketing-automations")),parseInt(kt)>0&&Object(a.createElement)("div",{className:"bwf-automation-h-count"},Object(o.sprintf)(Object(o.__)("(%s Results)","wp-marketing-automations"),kt))),Object(a.createElement)("div",{className:"bwf-automation-h-right"},Object(a.createElement)(B.a,{isSecondary:!0,onClick:function(){return Object(D.k)({page:"autonami",path:"/automations-v1/task-history/"},"/",{})}},Object(o.__)("Task History","wp-marketing-automations")),Object(a.createElement)(B.a,{isPrimary:!0,onClick:function(){return Z(!0)}},Object(o.__)("Create Automation","wp-marketing-automations")))),Object(a.createElement)($t.a,null),Object(a.createElement)(Qt.a,{tabs:he,selected:r?"automations-v1_".concat(r):"automations-v1_all",count:Rt,disableUrlUpdate:!0,onChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p("offset",0),U(!0),Object(D.k)({page:"autonami",path:e},"/",{})}}),Object(a.createElement)("div",{className:"bwf_clear_16"}),Object(a.createElement)(i.a,{className:je,rows:de,headers:Kt,query:{paged:Ct},rowsPerPage:_t,totalRows:kt,isLoading:Et,onPageChange:function(t,e){p("offset",(t-1)*_t)},onQueryChange:function(t){return"per_page"!==t?function(){}:ne},rowHeader:!0,showMenu:!1,actions:Jt>0?[Object(a.createElement)(tt.a,ee({key:"automation-contact-bulk-action",actions:[{id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}],onAction:Mt,inLine:!0,reset:It},Ut))]:[Object(a.createElement)(Yt.a,{key:"search",isLoading:Et,searchTerm:null==c?void 0:c.s,showResultCount:!1,setSearchData:function(t){if(Object(y.size)(t))Object(D.k)({s:t},"/",c);else{var e=Object(y.cloneDeep)(c);e.hasOwnProperty("s")&&(null==e||delete e.s),U(!0),Object(D.k)(e,"/",{})}}})],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations"),extraSectionBeforefilterCol:we}),Object(a.createElement)(x.a,{modalTitle:R.modalTitle,deleteEntityName:R.deleteEntityName,confirmText:R.confirmText,confirmButtonText:R.buttonConfirm,cancelButtonText:R.buttonCancel,onConfirm:R.onConfirm,isLoading:R.loading,successMessage:R.success,errorMessage:R.error,content:R.content,onRequestClose:function(){return L({status:!1})},confirmDescription:R.hasOwnProperty("confirmDescription")?R.confirmDescription:"",isOpen:R.status,isDelete:R.isDelete,closeIcon:!R.hasOwnProperty("closeIcon")||R.closeIcon,modalClass:R.modalClass}),Object(a.createElement)(X,{tasks:ft,isOpen:dt,onSuccess:function(){b(At,c,yt,_t),It()},onError:It,onRequestClose:function(){return jt(!1)},screenType:"automation-v1",screenTypeId:r,actionType:wt})):Object(a.createElement)($.a,{data:ge}),Q&&Object(a.createElement)(G,{onCloseModal:function(){return Z(!1)},query:c}),ct&&Object(a.createElement)(Bt,{onRequestClose:function(){return st(!1)}}))},ue=n(954),le=n(969),me=n(178),be=n(1029);function fe(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function pe(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){fe(o,a,r,i,c,"next",t)}function c(t){fe(o,a,r,i,c,"throw",t)}i(void 0)}))}}var Oe=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,i=t.onError,c=t.onRequestClose,s=t.actionType,u=n?n.length:0,l=Object(Q.a)(function(){var t=pe(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P()({path:Object(O.u)("/bulk-action/automation_v2"),method:"DELETE",data:{ids:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return l.reset()}),2500),r&&r()},onError:function(){i&&i()}}),m=function(){var t=pe(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.mutate(n.map((function(t){return t.id})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b={delete:{title:Object(o._n)("Delete Automation","Delete Automations",u,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("automation","automations",u,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete automation","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(a.createElement)(x.a,{modalTitle:b.hasOwnProperty(s)&&b[s].hasOwnProperty("title")?b[s].title:Object(o._n)("Perform Actions","Perform Actions",u,"wp-marketing-automations"),deleteDescriptionText:b.hasOwnProperty(s)&&b[s].hasOwnProperty("description")?b[s].description:"",confirmButtonText:b.hasOwnProperty(s)&&b[s].hasOwnProperty("confirmBtn")?b[s].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:b.hasOwnProperty(s)&&b[s].hasOwnProperty("cancelBtn")?b[s].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:l.isLoading,successMessage:l.isSuccess&&(b.hasOwnProperty(s)&&b[s].hasOwnProperty("successMsg")?b[s].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:l.isError&&(l.error&&l.error.message?l.error.message:b.hasOwnProperty(s)&&b[s].hasOwnProperty("errorMsg")?b[s].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:b.hasOwnProperty(s)&&b[s].hasOwnProperty("confirmDescription")?b[s].confirmDescription:"",isDelete:!0})},de=n(39);function je(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function ge(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){je(o,a,r,i,c,"next",t)}function c(t){je(o,a,r,i,c,"throw",t)}i(void 0)}))}}function we(){return(we=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function he(t){return function(t){if(Array.isArray(t))return Ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ke(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(n),!0).forEach((function(e){_e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||ke(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(t,e){if(t){if("string"==typeof t)return Ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(t,e):void 0}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var xe=function(t){var e=Object(a.useContext)(O.h),n=t.type,r=t.query,c=t.automationV2,s=r.s,u=void 0===s?"":s,l=Object(le.a)(),m=Object(ue.a)(),b=l.fetch,f=l.setAutomationListValues,p=m.getAutomations,j=m.getPageNumber,g=m.getPerPageCount,w=m.getTotalCount,h=m.getOffset,v=m.getLoadingStatus,C=m.getCountData,A=(0,m.getError)(),S=Object(F.a)().setAutomationData,I=Ee(Object(a.useState)({loading:!1,status:!1}),2),M=I[0],R=I[1],q=Ee(Object(a.useState)({status:!1}),2),U=q[0],V=q[1],G=Ee(Object(a.useState)(!1),2),H=G[0],Q=G[1],Z=Ee(Object(a.useState)(!1),2),K=Z[0],X=Z[1],et=Ee(Object(a.useState)(!1),2),nt=et[0],at=et[1],rt=Ee(Object(a.useState)(!1),2),ot=rt[0],it=rt[1],ct=Ee(Object(a.useState)({}),2),st=ct[0],ut=ct[1],lt=Ee(Object(a.useState)(!1),2),mt=lt[0],bt=lt[1],ft=Ee(Object(a.useState)([]),2),pt=ft[0],Ot=ft[1],dt=Ee(Object(a.useState)(!1),2),jt=dt[0],gt=dt[1],wt=Ee(Object(a.useState)(""),2),ht=wt[0],vt=wt[1],yt=function(){Jt&&Jt(),Ot([])};Object(a.useEffect)((function(){yt()}),[]);var _t=function(t,e){if("export"===t){var n=[];e.map((function(t){return n.push(t.id)})),ae(n)}else Ot(e),vt(t),gt(!0)},Et=p(),kt=h(),Ct=g(),xt=v(),At=w(),Pt=j(),St=C(),Nt="all";Object(y.isEmpty)(n)||("active"===n?Nt=1:"inactive"===n&&(Nt=2));var Dt=Object(O.qb)(),Tt=Object(a.useRef)(new AbortController),It=Object(J.a)(Object(O.kb)()).formatAmount;Object(a.useEffect)((function(){at(!1),b(Nt,r,kt,Ct,c)}),[kt,Ct,n,u,c]),Object(a.useEffect)((function(){xt||X(!1)}),[xt]),Object(a.useEffect)((function(){if(!xt&&!nt&&!Object(y.isEmpty)(Et)||ot)try{var t={automation_ids:[],version:2,force:ot};Et.map((function(e){t.automation_ids.push(e.id)})),P()({method:"GET",path:Object(O.u)("/automations-stats?"+Object(d.stringify)(t)),signal:Tt.current.signal}).then((function(t){200==t.code&&(ut(t.result),at(!0),ot&&(e(Object(o.__)("Data Updated","wp-marketing-automations")),Object(O.wb)(e,3e3),it(!1)))})).catch((function(t){console.log(t)}))}catch(t){at(!0),it(!1),console.log(t)}}),[Et,ot]);var Mt=Object(a.createElement)(B.a,{isPrimary:!0,onClick:function(){return Object(D.k)({path:"/automations/create"},"/",r)},className:"bwf-display-flex"},Object(o.__)("Create Automation","wp-marketing-automations")),Rt=Object(W.a)().getPageCountData,zt=Object(Y.a)().setPageCountData,Lt=Rt();Object(a.useEffect)((function(){var t=0,e=0,n=0;St.hasOwnProperty("status_count")&&(St.status_count.hasOwnProperty("active")&&(e=parseInt(St.status_count.active)),St.status_count.hasOwnProperty("inactive")&&(t=parseInt(St.status_count.inactive))),St.hasOwnProperty("contact_activity")&&(n=parseInt(St.contact_activity)),zt(ye(ye({},Lt),{"automations-v2_all":parseInt(t)+parseInt(e),"automations-v2_active":e,"automations-v2_inactive":t,"contact-activity":n}))}),[St]),Object(a.useEffect)((function(){return function(){Tt.current.abort()}}),[]),Object(T.a)("automations-v2","","",!1,Mt,0,!1,c);var Ft=Object(a.useMemo)((function(){var t={};if(Array.isArray(Et)){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=ke(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(Et);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.id]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[Et]),qt=Object(tt.b)(Ft),Ut=qt.singleSelectProps,Vt=qt.selectAllProps,Ht=qt.floatingBarProps,Jt=qt.resetSelection,Wt=qt.selected,$t=Object.keys(Wt).filter((function(t){return Wt[t]})).length,Kt=[{key:"select_template",label:Object(a.createElement)(Gt.a,we({type:"checkbox",checked:!1,onChange:function(){}},Vt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-word-break bwf-w-210"},{key:"contacts",label:Object(o.__)("Contact Activity","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-240"}].concat(he(Object(O.Tb)()?[{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-w-120"}]:[]),[{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-90"}]),Xt=function(t){t!==Ct&&f("limit",t)},te=function(){var t=ge(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(ye(ye({},a),{},{status:!0})),t.prev=1,t.next=4,P()({path:Object(O.u)("/automations"),method:"DELETE",data:{automation_ids:[n]}}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));R({status:!1}),e(t.message),b(Nt,r,0,Ct,c),Object(O.wb)(e,3e3)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),R(ye(ye({},a),{},{error:t.t0.message}));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),ee=function(){var t=ge(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(o.__)("Duplicating…","wp-marketing-automations")),t.prev=1,t.next=4,P()({path:Object(O.u)("/automations/".concat(n,"/duplicate?version=2")),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));e(Object(o.__)("Automation Duplicated","wp-marketing-automations")),b(Nt,r,0,Ct,c),Object(O.wb)(e,3e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(O.wb)(e,3e3),setTimeout((function(){R({status:!0,modalTitle:Object(o.__)("Duplicate Automation","wp-marketing-automations"),error:t.t0.message})}),[1500]);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),ne=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},ae=function(){var t=ge(regeneratorRuntime.mark((function t(){var n,a,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,a=i.length>1&&void 0!==i[1]?i[1]:"automation",e(Object(o.__)("Exporting…","wp-marketing-automations")),r="",!Object(y.isArray)(n)&&parseInt(n)>0?r=Object(O.u)("/automations/".concat(n,"/export?version=2")):(r=Object(O.u)("/automations/export/?version=2"),Object(y.isEmpty)(n)||(r+="&ids=".concat(n.join(",")))),t.prev=5,t.next=8,P()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));ne(t.result,a),e(Object(o.__)("Automation exported","wp-marketing-automations")),Object(y.isArray)(n)&&yt(),Object(O.wb)(e,3e3)}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),Object(O.wb)(e,3e3),setTimeout((function(){R({status:!0,modalTitle:Object(o.__)("Export Automation","wp-marketing-automations"),error:t.t0.message})}),[1500]);case 14:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(){return t.apply(this,arguments)}}(),re=function(){var t=ge(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(o.__)("Exporting…","wp-marketing-automations")),t.prev=1,t.next=4,P()({path:Object(O.u)("/export/action?type=automation&action=start"),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));t.hasOwnProperty("result")&&t.result.hasOwnProperty("data")&&!Object(y.isEmpty)(t.result.data)&&(bwfcrm_contacts_data.export_data=t.result.data,e(Object(o.__)("Automation export has started","wp-marketing-automations"))),Object(O.wb)(e,3e3)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),Object(O.wb)(e,3e3);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),oe=function(){var t=ge(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(n?Object(o.__)("Activating Automation…","wp-marketing-automations"):Object(o.__)("Deactivating Automation…","wp-marketing-automations")),t.prev=1,t.next=4,P()({path:Object(O.u)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:a}}).then((function(t){if(200!==t.code)throw Error(Object(O.p)(null==t?void 0:t.message));e(n?Object(o.__)("Automation activated","wp-marketing-automations"):Object(o.__)("Automation deactivated","wp-marketing-automations"));var r;r=Et.map((function(t){return t.id==a&&(t.status=n?"1":"0"),t})),f("automations",r),Object(O.wb)(e,3e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(O.wb)(e,3e3),setTimeout((function(){R({status:!0,modalTitle:Object(o.__)("Automation Status Update","wp-marketing-automations"),error:t.t0.message})}),[1500]);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),ie=function(t){switch(parseInt(t.status)){case 1:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(o.__)("Active","wp-marketing-automations"));default:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-red"},Object(o.__)("Inactive","wp-marketing-automations"))}},ce=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami&path=/automation/"+t.id,onClick:function(e){e.preventDefault(),S("listData",t.hasOwnProperty("name")?t.name:""),Object(D.k)({path:"/automation/".concat(t.id)},"/",r)},className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},se=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},fe=function(t){if(!nt||Object(y.isEmpty)(st))return Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15",title:Object(o.__)("Loading","wp-marketing-automations")});var e=st.hasOwnProperty(t.id)?st[t.id]:{};return Object(a.createElement)(k.a,{gap:2,justify:"center"},Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Active","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automation/".concat(t.id,"/contacts/active")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-scheduled",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("active")?Object(O.Wb)(parseInt(e.active)):0))))),Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Paused","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automation/".concat(t.id,"/contacts/paused")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-paused",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("paused")?Object(O.Wb)(parseInt(e.paused)):0))))),Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Completed","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automation/".concat(t.id,"/contacts/completed")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-completed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("complete")?Object(O.Wb)(parseInt(e.complete)):0))))),Object(a.createElement)(k.c,null,Object(a.createElement)(Zt.a,{toolTipText:Object(o.__)("Failed","wp-marketing-automations")},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(D.k)({path:"/automation/".concat(t.id,"/contacts/failed")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(z.a,{icon:"status-failed",width:16,height:16}),Object(a.createElement)("span",null,e.hasOwnProperty("failed")?Object(O.Wb)(parseInt(e.failed)):0))))))},pe=Array.isArray(Et)?Et.map((function(t){return[{display:Ut.hasOwnProperty(t.id)?Object(a.createElement)(Gt.a,we({type:"checkbox",checked:!1,onChange:function(){}},Ut[t.id])):Object(a.createElement)(a.Fragment,null),value:null},{display:(e=t,Object(a.createElement)(_.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(E.a,null,Object(a.createElement)(me.a,{to:"wp-admin/admin.php?page=autonami&path=/automation/"+e.id,onClick:function(t){t.preventDefault(),S("listData",e.hasOwnProperty("name")?e.name:""),Object(D.k)({path:"/automation/".concat(e.id)},"/",r)},className:"bwf-a-no-underline"},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){oe(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){Object(O.Jb)()?ee(e.id):V({status:!0,featureTitle:Object(o.__)("Duplicate Automation","wp-marketing-automations"),isFeature:!0,proLink:Object(O.T)("upgrade",{utm_medium:"Dupicate+Automation+Upgrade+Modal"})}),n()}},Object(a.createElement)(k.a,{justify:"space-between"},Object(a.createElement)(k.c,null,Object(o.__)("Duplicate","wp-marketing-automations")),!Object(O.Jb)()&&Object(a.createElement)(k.c,null,O.e))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){Object(O.Jb)()?ae(e.id,e.name):V({status:!0,featureTitle:Object(o.__)("Export Automation","wp-marketing-automations"),isFeature:!0,proLink:Object(O.T)("upgrade",{utm_medium:"Export+Automation+Upgrade+Modal"})}),n()}},Object(a.createElement)(k.a,{justify:"space-between"},Object(a.createElement)(k.c,null,Object(o.__)("Export","wp-marketing-automations")),!Object(O.Jb)()&&Object(a.createElement)(k.c,null,O.e))),Object(a.createElement)(E.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:Object(o.__)("Delete Automation"),deleteEntityName:e.name,isDelete:!0,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations")};R(ye(ye({},t),{},{onConfirm:function(){return te(e.id,t)}})),n()}},Object(a.createElement)(k.a,{justify:"flex-start"},Object(a.createElement)(k.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:ce(t),value:t.name},{display:se(t),value:t.event},{display:fe(t),value:""}].concat(he(Object(O.Tb)()?[{display:t.revenue&&parseFloat(t.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-revenue"},It(t.revenue)):"-",value:""}]:[]),[{display:ie(t),value:""}]);var e})):[],je=N()("bwfcrm-campaign-list-table",{"has-search":!0}),ve=[{type:"heading",data:{title:Object(o.__)("Explore easy automation to simply task","wp-marketing-automations"),desc:Object(o.__)("Initiate your automation journey for smoother workflows – Create your first automation for streamlined success","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(O.o)()+"automation/automation1.png",title:Object(o.__)("Pre-built recipes to get you quick started","wp-marketing-automations"),desc:Object(o.__)("Save time by importing and editing our ever-growing library of practical automation recipes to fit your needs","wp-marketing-automations")},{img:Object(O.o)()+"automation/automation2.png",title:Object(o.__)("Create any automation that you can imagine","wp-marketing-automations"),desc:Object(o.__)("Create personalized journeys with conditional branching, delays, and split paths","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(o.__)("Create Automation","wp-marketing-automations"),onClick:function(){Object(D.k)({path:"/automations/create"},"/",r)}},{text:Object(o.__)("Import Automation","wp-marketing-automations"),isSecondary:!0,onClick:function(){bt(!0)}}]}}],_e=Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-wrap bwf-flex-start gap-8"},Object(O.Jb)()&&Dt.hasOwnProperty("automation")&&Object(a.createElement)(be.a,{type:"automation",localData:Dt.automation,onDismiss:function(){return Q(!0)}}),Object(a.createElement)(B.a,{className:"bwf-btn-small is-light",isGray:!0,title:Object(o.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return at(!1),void it(!0)},disabled:!nt,isBusy:!nt&&ot},Object(a.createElement)(z.a,{icon:"retry",size:14}),Object(a.createElement)("span",{className:"bwf-ml-4"},Object(o.__)("Refresh","wp-marketing-automations"))),Object(a.createElement)(B.a,{className:"bwf-btn-small is-light",title:Object(o.__)("Export All","wp-marketing-automations"),onClick:function(){Object(O.Jb)()?re():V({status:!0,featureTitle:Object(o.__)("Export Automations","wp-marketing-automations"),isFeature:!0,proLink:Object(O.T)("upgrade",{utm_medium:"Export+Automation+Upgrade+Modal"})})},disabled:Dt.hasOwnProperty("automation")&&!H},Object(O.Jb)()?Object(a.createElement)(z.a,{icon:"export",size:14}):Object(a.createElement)(z.a,{icon:"king",size:16}),Object(a.createElement)("span",{className:"bwf-ml-4"},Object(o.__)("Export All","wp-marketing-automations"))),Object(a.createElement)(B.a,{className:"bwf-btn-small is-light",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){return bt(!0)}},Object(a.createElement)(z.a,{icon:"import",size:14}),Object(a.createElement)("span",{className:"bwf-ml-4"},Object(o.__)("Import","wp-marketing-automations")))),Ce=xt||A||!["","all"].includes(n)||0!==At||""!==u||K,xe=[{slug:"automations-v2_all",name:Object(o.__)("All","wp-marketing-automations"),path:"/automations/"},{slug:"automations-v2_active",name:Object(o.__)("Active","wp-marketing-automations"),path:"/automations/active"},{slug:"automations-v2_inactive",name:Object(o.__)("Inactive","wp-marketing-automations"),path:"/automations/inactive"}];return Object(a.createElement)(a.Fragment,null,Object(O.M)()&&Ce?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("Automations","wp-marketing-automations")),parseInt(At)>0&&Object(a.createElement)("div",{className:"bwf-content-header-count"},Object(o.sprintf)(Object(o.__)("(%s Results)","wp-marketing-automations"),At))),Object(a.createElement)("div",{className:"bwf-content-header-right"},Object(a.createElement)(B.a,{isPrimary:!0,onClick:function(){return Object(D.k)({page:"autonami",path:"/automations/create"},"/",{})}},Object(o.__)("Create Automation","wp-marketing-automations")))),Object(a.createElement)(Qt.a,{tabs:xe,selected:n?"automations-v2_".concat(n):"automations-v2_all",count:Lt,disableUrlUpdate:!0,onChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S("offset",0),X(!0),Object(D.k)({page:"autonami",path:e},"/",{})}}),Object(a.createElement)("div",{className:"bwf_clear_16"}),A&&Object(a.createElement)(L.a,{status:"error"},A.message),Object(a.createElement)(i.a,{className:je,rows:pe,headers:Kt,query:{paged:Pt},rowsPerPage:Ct,totalRows:At,isLoading:xt,onPageChange:function(t,e){f("offset",(t-1)*Ct)},onQueryChange:function(t){return"per_page"!==t?function(){}:Xt},rowHeader:!0,showMenu:!1,actions:$t>0?[Object(a.createElement)(tt.a,we({key:"automation-bulk-action",actions:[{id:"export",icon:"export",hint:Object(o.__)("Export","wp-marketing-automations"),isPro:!0,proLink:Object(O.T)("upgrade",{utm_medium:"Automation+Bulk+Action+Export+Upgrade+Modal"}),featureTitle:Object(o.__)("Export Automations","funnel-builder")},{id:"delete",icon:"delete",hint:Object(o.__)("Delete","wp-marketing-automations")}],onAction:_t,inLine:!0,reset:yt},Ht))]:[Object(a.createElement)(Yt.a,{key:"search",isLoading:xt,searchTerm:null==r?void 0:r.s,showResultCount:!1,setSearchData:function(t){if(Object(y.size)(t))Object(D.k)({s:t},"/",r);else{var e=Object(y.cloneDeep)(r);e.hasOwnProperty("s")&&(null==e||delete e.s),X(!0),Object(D.k)(e,"/",{})}}})],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations"),extraSectionBeforefilterCol:0===$t?_e:Object(a.createElement)(a.Fragment,null)}),Object(a.createElement)(x.a,{modalTitle:M.modalTitle,deleteEntityName:M.deleteEntityName,confirmText:M.confirmText,confirmButtonText:M.buttonConfirm,cancelButtonText:M.buttonCancel,onConfirm:M.onConfirm,isLoading:M.loading,successMessage:M.success,errorMessage:M.error,content:M.content,confirmDescription:M.hasOwnProperty("confirmDescription")?M.confirmDescription:"",onRequestClose:function(){return R({status:!1})},isOpen:M.status,isDelete:M.isDelete}),Object(a.createElement)(Oe,{tasks:pt,isOpen:jt,onSuccess:function(){b(Nt,r,kt,Ct,c),yt()},onError:yt,onRequestClose:function(){return gt(!1)},screenType:"automations",actionType:ht})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("Automations","wp-marketing-automations")))),Object(a.createElement)($.a,{data:ve})),mt&&Object(a.createElement)(Bt,{onRequestClose:function(){return bt(!1)},isV2:!0}),!Object(O.Jb)()&&Object(a.createElement)(de.b,{isOpen:U.status,onRequestClose:function(){return V({status:!1})},modalContent:U}))};n(1262),e.default=function(t){var e=t.match.params.type,n=void 0===e?"all":e,o=t.automationV2,i=void 0!==o&&o,c=Object(D.i)();return Object(O.k)("Automations"),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.a,null),Object(a.createElement)("div",{className:"bwfcrm-automations-list"},i?Object(a.createElement)(xe,{query:c,type:n,automationV2:i}):Object(a.createElement)(se,{query:c,type:n,automationV2:i})))}},955:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(0);var r=function(t,e){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=t}),[t]),Object(a.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){return clearInterval(t)}}}),[e])}}}]);