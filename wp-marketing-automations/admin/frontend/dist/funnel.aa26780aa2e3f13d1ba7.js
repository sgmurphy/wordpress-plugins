(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1041:function(e,t,n){},1344:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(246),l=n(94),c=n(119),i=n(1),s=n(3),o=n(50),u=n(4),b=n(8),m=n(303),p=(n(1041),function(e){var t=e.type,n=void 0===t?"optin":t,r=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(b.a,{icon:"optin"===n?"zero-carts":"zero-sales"})}},{type:"content",data:{class:"bwf-heading-1 bwf-pb-10",content:Object(i.__)("This contact has not gone through any Funnel.","wp-marketing-automations")}},{type:"content",data:{class:"bwf-heading-2 bwf-pb-gap",content:Object(i.__)("Your funnel will appear in the list once customers start purchasing the product","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(i.__)("Setup a Funnel","wp-marketing-automations"),proCheck:!1,onClick:function(){window.open(Object(u.hb)()+"/wp-admin/admin.php?page=bwf&path=/funnels/","_blank")}}]}}];return Object(a.createElement)(m.a,{data:r})}),f=Object(o.a)(Object(u.kb)()).formatAmount,d=function(e){var t=e.loading,n=void 0===t||t,r=l.a.getFunnels(),o=r&&"records"in r?r.records:[],b=[{key:"name",label:Object(i.__)("Funnel Name","wp-marketing-automations"),isLeftAligned:!0},{key:"checkout",label:Object(i.__)("Checkout","wp-marketing-automations"),isLeftAligned:!0},{key:"bump",label:Object(u.Jb)()?Object(i.__)("Order Bump","wp-marketing-automations"):Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(i.__)("Order Bump","wp-marketing-automations"),u.e),isLeftAligned:!0},{key:"upsell",label:Object(u.Jb)()?Object(i.__)("Upsell","wp-marketing-automations"):Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(i.__)("Upsell","wp-marketing-automations"),u.e),isLeftAligned:!0},{key:"total_revenue",label:Object(i.__)("Revenue","wp-marketing-automations"),isLeftAligned:!0}],m=o.map((function(e){return[{display:Object(s.isEmpty)(e.funnel_name)?"-":Object(a.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"admin.php?page=bwf&path=/funnels/"+e.funnel_id,rel:"noreferrer"},e.funnel_name),value:e.funnel_name},{display:Object(s.size)(e.checkout)?f(e.checkout):"-",value:""},{display:Object(s.size)(e.bump)&&Object(u.Jb)()?f(e.bump):"-",value:""},{display:Object(s.size)(e.upsell)&&Object(u.Jb)()?f(e.upsell):"-",value:""},{display:Object(s.size)(e.total_revenue)?(t=e.total_revenue,parseFloat(t)>0?Object(a.createElement)("div",{className:"bwf-tags bwf-tag-green"},f(t)):"-"):"-",value:""}];var t}));return Object(a.createElement)(a.Fragment,null,!Object(s.isEmpty)(m)||n?Object(a.createElement)(c.a,{className:"contact-funnel",title:"",hideHeader:"yes",rows:m,headers:b,rowsPerPage:1,totalRows:1,isLoading:n,rowHeader:!0,showMenu:!1,emptyMessage:Object(i.__)("No funnels found","wp-marketing-automations")}):Object(a.createElement)("div",{className:"bwf-empty-funnel-item"},Object(a.createElement)(p,{type:"funnel"})))},O=function(e){var t=e.loading,n=void 0===t||t,r=l.a.getFunnels(),o=r&&"optin"in r?r.optin:[],u=[{key:"funnel",label:Object(i.__)("Funnel Name","wp-marketing-automations"),isLeftAligned:!0},{key:"entry",label:Object(i.__)("Entry","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-word-break"}],b=o.map((function(e){return[{display:Object(s.isEmpty)(e.funnel_name)?"-":Object(a.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"admin.php?page=bwf&path=/funnels/"+e.funnel,rel:"noreferrer"},e.funnel_name),value:e.funnel_name},{display:m(e.entry),value:e.entry}]}));function m(e){var t=[];return Object(s.each)(JSON.parse(e),(function(e,n){var r=n.split("_");if(r.splice(0,1),!Object(s.isEmpty)(e)){for(var l=0;l<r.length;l++)r[l]=r[l].charAt(0).toUpperCase()+r[l].substring(1);var c=r.join(" ");t.push(Object(a.createElement)("li",{key:e.toString()},Object(a.createElement)("span",{style:{color:"#82838e"}},"".concat(Object(s.isEmpty)(c)?"-":c,":")),Object(a.createElement)("span",null," ".concat(e))))}})),Object(a.createElement)("ul",{className:"bwf-terms-inline"},t)}return Object(a.createElement)("div",{className:"bwf-c-s-list"},Object(a.createElement)("div",{className:"bwf-c-s-po-value"},!Object(s.isEmpty)(b)||n?Object(a.createElement)(c.a,{className:"contact-funnel",title:"",hideHeader:"yes",rows:b,headers:u,rowsPerPage:1,totalRows:1,isLoading:n,rowHeader:!0,showMenu:!1,emptyMessage:Object(i.__)("No optins data found","wp-marketing-automations")}):Object(a.createElement)("div",{className:"bwf-empty-funnel-item"},Object(a.createElement)(p,{type:"optin"})),Object(a.createElement)("div",{className:"bwf_clear_20"})))},g=n(5),j=n(148),w=n(31),y=n(14);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,l=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(e){var t=e.subtab,n=void 0===t?"sales":t,c=Object(r.a)(),s=l.a.getContact(),o=l.a.getFunnelContactId(),u=h(Object(a.useState)(""),2),b=u[0],m=u[1];Object(a.useEffect)((function(){m(n||"sales")}),[n]),Object(a.useEffect)((function(){s&&"id"in s&&parseInt(s.id)!==parseInt(o)&&c.fetchFunnel(parseInt(s.id))}),[s]);var p=l.a.getFunnelError(),f=l.a.getFunnelLoading(),_=l.a.getContactLoading();return p?Object(a.createElement)(w.a,null,"message"in p?p.message:p):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-funnel-buttons"},f||_?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(j.a,{h:30,w:56,br:8}),Object(a.createElement)(j.a,{h:30,w:56,br:8})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)(g.Button,{isSecondary:!b||"sales"===b,isTertiary:b&&"sales"!==b,onClick:function(){Object(y.k)({page:"autonami",path:"/contact/".concat(s.id,"/funnel/")},"/",{})},className:"bwf-btn-small "+(b&&"sales"!==b?"":"is-border is-blue-bg")},Object(i.__)("Sales","wp-marketing-automations")),Object(a.createElement)(g.Button,{isSecondary:"optin"===b,isTertiary:"optin"!==b,onClick:function(){Object(y.k)({page:"autonami",path:"/contact/".concat(s.id,"/funnel/optin")},"/",{})},className:"bwf-btn-small "+("optin"===b?"is-border is-blue-bg":"")},Object(i.__)("Optin","wp-marketing-automations")))),"sales"===b?Object(a.createElement)(d,{loading:f||_}):Object(a.createElement)(O,{loading:f||_}))}}}]);