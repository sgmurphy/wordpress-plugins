(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1076:function(t,e,n){"use strict";var r=n(73),a=n(0),o=n(1),i=n(3),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t),redirect:!e}};return e&&(n.single_a_contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),showOnClick:!0},n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isPro:!0,showOnClick:!0},Object(i.fc)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isPro:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},b=(p.automation_nav,p.automationv2_nav),d=Object(r.a)(),y=d.setActiveMultiple,v=d.resetHeaderMenu,h=d.setL2NavType,O=d.setL2Nav,w=d.setBackLink,j=d.setL2Title,g=d.setL2Content,_=d.setBackLinkLabel,E=d.setL2NavAlign,k=d.setPageHeader,N=d.setTabHeader;return Object(a.useEffect)((function(){v(!0),!i&&h("menu");var r=c(l,m);f||O(l?r:b),t&&r.hasOwnProperty(t)&&r[t].hasOwnProperty("name")&&N(r[t].name),y({leftNav:"automations-v2",rightNav:t}),n&&w(n),l&&w(n&&!m?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||m&&l&&_(Object(o.__)("All Automations","wp-marketing-automations")),!m&&l&&_(Object(o.__)("All Automations","wp-marketing-automations")),l&&E("left"),e&&""!==e&&j(e),!n&&s&&g(s),k(Object(o.__)("Automations","wp-marketing-automations")),u&&O({})}),[t,m,f]),!0}},1078:function(t,e,n){"use strict";var r=n(0),a=n(6),o=n.n(a),i=n(1),c=n(8),s=(n(1084),n(39)),l=n(3);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.a=function(t){var e=u(Object(r.useState)(!1),2),n=e[0],a=e[1],m=t.modalContent,f=void 0===m?{}:m,p=t.content,b=t.onPage,d=void 0!==b&&b;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||a(!0)}},d?Object(r.createElement)(s.a,{showHeader:!1,modalContent:f}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-king-tag-pro"},Object(r.createElement)(c.a,{icon:"king",size:38,color:"#fff"})),Object(r.createElement)("span",{className:"bwf-mt-8"},p||(Object(l.Ob)()?Object(i.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(i.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(r.createElement)(s.b,{isOpen:n,onRequestClose:function(){return a(!1)},modalContent:f}))}},1080:function(t,e,n){"use strict";var r=n(48),a=n(148);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=["getStateProp"];function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(){var t=Object(r.a)("automationList"),e=t.getStateProp,n=function(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(t,i),o=Object(r.a)(a.a.recipient).getStateProp,c=Object(r.a)(a.a.conversion).getStateProp,l=Object(r.a)(a.a.contacts).getStateProp,u=Object(r.a)(a.a.analytics).getStateProp;return s(s({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getRecipientSingleAutomationFailedCount:function(){return o("failedCount")},getConversionData:function(){return c("data")},getConversionLoading:function(){return c("isLoading")},getConversionOffset:function(){return c("offset")},getConversionAutomationId:function(){return c("automationId")},getConversionTotal:function(){return c("total")},getConversionAutomation:function(){return c("automation")},getConversionPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getConversionLimit:function(){return c("limit")},getCountData:function(){return e("countData")},getConversionSingleAutomationFailedCount:function(){return c("failedCount")},getContactData:function(){return l("data")},getContactLoading:function(){return l("isLoading")},getContactOffset:function(){return l("offset")},getContactAutomationId:function(){return l("automationId")},getContactTotal:function(){return l("total")},getContactAutomation:function(){return l("automation")},getContactPage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getContactLimit:function(){return l("limit")},getContactCountData:function(){return l("contactCount")},getContactSingleAutomationFailedCount:function(){return l("failedCount")},getAnalyticsData:function(){return u("analytics")},getAnalyticsTileData:function(){return u("tiles")},getAnalyticsTableData:function(){return u("tableData")},getAnalyticsLoading:function(){return u("isLoading")},getAnalyticsType:function(){return u("type")},getAnalyticsAutomationData:function(){return u("automation")},getAnalyticsSingleAutomationFailedCount:function(){return u("failedCount")}})}},1084:function(t,e,n){},1096:function(t,e,n){"use strict";var r=n(47),a=n(3),o=n(148),i=n(19);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=["fetch","setStateProp"],l=["s","page","filter","path"];function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}e.a=function(){var t=Object(r.a)("automationList"),e=t.fetch,n=t.setStateProp,c=p(t,s),u=Object(r.a)(o.a.recipient),f=u.fetch,b=u.setStateProp,d=Object(r.a)(o.a.conversion),y=d.fetch,v=d.setStateProp,h=Object(r.a)(o.a.contacts),O=h.fetch,w=h.setStateProp,j=Object(r.a)(o.a.analytics),g=j.fetch,_=j.setStateProp;return m(m({},c),{},{fetch:function(t,r,o,i){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var s=r.s,u=void 0===s?"":s,m=(r.page,r.filter,r.path,p(r,l)),f={offset:o,limit:i,status:t,search:u,filters:m,version:c?2:1};e("GET",Object(a.y)("/automations"),f)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){f("GET",Object(a.y)("/v3/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){b(t,e)},fetchConversion:function(t,e,n){v("automation",{}),y("GET",Object(a.y)("/v3/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){v(t,e)},fetchContacts:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";w("automation",{}),O("GET",Object(a.y)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(r,"&search=").concat(o)))},setContactValues:function(t,e){w(t,e)},fetchAnalytics:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(c)&&(s=1),g("GET",Object(a.y)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:n,interval:r,oid:t,type:o,mode:c,contact:s}))},setAnalyticsValues:function(t,e){_(t,e)}})}},1105:function(t,e,n){"use strict";var r=n(0),a=n(1),o=n(6),i=n.n(o),c=n(98),s=(n(1115),n(179));function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.a=function(t){var e=t.className,n=t.align,o=void 0===n?"left":n,l=t.title,f=t.message,p=t.proLink,b=f||Object(a.sprintf)(Object(a.__)("Use our sample data to explore %s. See how it summarises metrics across multiple funnels.","wp-marketing-automations"),l),d=m(Object(r.useState)(!1),2),y=d[0],v=d[1];return Object(r.useEffect)((function(){var t=document.querySelector("body:not(.modal-open) #bwf-header-upgrade-pro-cta");if(t){var e=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting?v(!1):v(!0)}))}),{root:null,rootMargin:"0px",threshold:.1});return e.observe(t),function(){e.disconnect()}}v(!0)}),[]),Object(r.createElement)("div",{className:i()("bwf-lite-noticebar is-sample-data-notice",e,u(u({},"bwf-notice-".concat(o),!!o),"is-btn-visible",y))},Object(r.createElement)("div",{className:"bwf-lite-noticebar__content-wrap"},Object(r.createElement)("div",{className:"bwf-lite-noticebar__title-wrap"},l," ",Object(r.createElement)(c.b,{content:Object(a.__)("Sample Data","wp-marketing-automations"),type:"black"})),Object(r.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(r.createElement)("div",{className:"bwf-noticebar-content"},b))),Object(r.createElement)(s.a,{isPrimary:!0,proLink:p}))}},1115:function(t,e,n){},1157:function(t,e,n){"use strict";var r=n(0),a=n(6),o=n.n(a),i=n(2),c=n(56),s=n(1),l=n(9),u=n.n(l),m=n(8),f=(n(1158),n(3)),p=n(19);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.a=function(t){var e=t.header,n=void 0===e?Object(s.__)("View Analytics","wp-marketing-automations"):e,a=t.icon,l=void 0===a?"analytic":a,b=t.automationId,d=t.analyticsId,v=t.mode,O=void 0===v?"":v,w=t.extraData,j=void 0===w?{}:w,g=h(Object(r.useState)(!0),2),_=g[0],E=g[1],k=h(Object(r.useState)(!1),2),N=k[0],S=k[1],P=h(Object(r.useState)({}),2),x=P[0],L=P[1],A=function(){parseInt(d)>0&&Object(f.Sb)()?(E(!0),L({}),function(){try{var t=y(y({},j),{},{mode:O});u()({path:Object(f.y)("/automation/".concat(b,"/analytics/").concat(d,"?").concat(Object(p.stringify)(t))),method:"GET"}).then((function(t){200===t.code?Object(i.isEmpty)(t.result)||L(t.result):S(!0),E(!1)}))}catch(t){S(!0),E(!1)}}()):E(!1)},I=function(){var t,e=x.tile,n=void 0===e?[]:e;return N?Object(r.createElement)(r.Fragment,null,Object(s.__)("Error while fetching the Analytics.","wp-marketing-automations")):Object(f.Sb)()?Object(r.createElement)(r.Fragment,null,Object(i.isEmpty)(n)?Object(r.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("No analytics found.","wp-marketing-automations")):Object(r.createElement)("div",{className:"bwf-info-brick"},n.map((function(t,e){var n=t.label,a=void 0===n?"":n,o=t.value,i=void 0===o?"-":o;if(""!==a)return Object(r.createElement)("div",{className:"bwf-info-item",key:e},Object(r.createElement)("span",{className:"bwf-node-content-type"},a),Object(r.createElement)("span",{className:"bwf-node-content-label"},i))})))):(t=[{label:Object(s.__)("Sent","wp-marketing-automations")},{label:Object(s.__)("Open Rate","wp-marketing-automations")}],"email"===O&&t.push({label:Object(s.__)("Click Rate","wp-marketing-automations")},{label:Object(s.__)("Click to Open Rate","wp-marketing-automations")}),t.push({label:Object(s.__)("Revenue","wp-marketing-automations")},{label:Object(s.__)("Revenue/Contact","wp-marketing-automations")},{label:Object(s.__)("Unsubscribe Rate","wp-marketing-automations")}),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-info-brick"},t.map((function(t,e){return Object(r.createElement)("div",{className:"bwf-info-item",key:e},Object(r.createElement)("span",{className:"bwf-node-content-type"},t.label),Object(r.createElement)("span",{className:"bwf-node-content-label"},"-"))}))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("Email Analytics is a PRO feature.","wp-marketing-automations")+" ",Object(r.createElement)("a",{target:"__blank",className:"bwf-normal-a-t bwf-font-light",href:Object(f.ab)("upgrade",{utm_medium:"Automation+Email+Analytics"})},Object(s.__)("Upgrade to PRO","wp-marketing-automations")))))};return Object(r.createElement)("div",{className:"bwf-info-popup"},Object(r.createElement)(c.a,{contentClassName:"bwf-info__popover",position:"top center",renderToggle:function(t){var e=t.onToggle,a=t.isOpen,i=o()("bwf-info__toggle bwf-cursor-pointer",{"is-opened":a});return Object(r.createElement)("div",{className:i,onClick:function(){e(),A()},"aria-expanded":a},Object(r.createElement)(m.a,{size:14,icon:l}),n)},renderContent:function(t){var e=t.onToggle;return Object(r.createElement)("div",{className:"bwf-info-popover-container"},Object(r.createElement)("div",{className:"bwf-info-popover-header"},Object(r.createElement)("div",{className:"bwf-info-header-text"},n,!Object(f.Sb)()&&f.e),Object(r.createElement)("span",{className:"bwf-info-close",onClick:e},Object(r.createElement)(m.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-info-popover-body"},Object(r.createElement)("div",{className:"bwf-info-wrapper"},Object(r.createElement)("div",{className:"bwf-info--content"},_?Object(r.createElement)("div",{className:"bwf-info-brick"},[1,2,3,4,5,6].map((function(t){return Object(r.createElement)("div",{className:"bwf-info-item",key:t},Object(r.createElement)("span",{className:"bwf-node-content-type"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(r.createElement)("span",{className:"bwf-node-content-label"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})))}))):I()))))},focusOnMount:!0}))}},1158:function(t,e,n){},1395:function(t,e,n){},1396:function(t,e,n){},1397:function(t,e,n){},1398:function(t,e,n){},1451:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(1076),o=n(3),i=n(9),c=n.n(i),s=n(73),l=n(145),u=n(353),m=n(33),f=n(13);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){var e=t.query,n=t.children;return Object(r.createElement)("div",{className:"bwf-crm-emails-report-filter"},n,Object(r.createElement)(u.a,{siteLocale:"en-US",path:"/",query:e,onDateSelect:function(t){var n=d(d({},e),t);delete n.compare,Object(f.k)(n,"/",{})},showDatePicker:!0,isoDateFormat:m.g,hideCompare:!0,dateQuery:function(t){t.compare="previous_year";var e=Object(m.e)(t),n=e.period,r=e.compare,a=e.before,o=e.after,i=Object(m.c)(t);return{period:n,compare:r,before:a,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}(e),currency:Object(o.sb)()}))},h=n(53),O=n(1),w=n(1080),j=n(343),g=function(t){var e=t.type,n=t.metrics,a=(0,Object(w.a)().getAnalyticsLoading)();return Object(r.createElement)("div",{className:"bwf-crm-emails-report-tiles"},Object(r.createElement)(j.a,{items:n(e),title:Object(O.__)("Overview","wp-marketing-automations"),isLoading:a,rowTileCount:function(){switch(e){case"email":return Object(o.fc)()?5:3;case"sms":return Object(o.fc)()?4:2;case"contact":return Object(o.fc)()?4:3;default:return!1}}()}))},_=n(1096),E=n(144),k=n(332),N=n(2),S=n(339),P=n(5),x=n(6),L=n.n(x);function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var C=function(t){var e,n=t.query,a=t.type,o=t.metrics,i=n.chart?n.chart:function(){switch(a){case"contact":return"active_contacts";default:return"email_sents"}}(),c=A(Object(r.useState)(o(a)[0]),2),s=c[0],l=c[1],u=Object(w.a)(),p=u.getAnalyticsData,b=u.getAnalyticsLoading,d=u.getAnalyticsTileData,y=b(),v=p(),h=d(),j=Object(m.f)(n),g=Object(m.b)(((e=n).period&&""!==e.period||(e.period="month"),e.compare&&""!==e.compare||(e.compare="previous_year"),n));g.includes(j)||(j=g[g.length-1]),Object(r.useEffect)((function(){l(o(a)[0])}),[a]);return Object(r.createElement)(S.a,{isRequesting:y,data:function(t){switch(a){case"email":return function(t){var e=[];if(!Object(N.isEmpty)(v)){v.map((function(n){switch(t){case"email_sents":e.push({date:n.start_date,email_sents:{label:Object(O.__)("Email Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"open_rate":e.push({date:n.start_date,email_open:{label:Object(O.__)("Opens","wp-marketing-automations"),value:parseInt(n.subtotals.email_open)}});break;case"click_rate":e.push({date:n.start_date,email_click:{label:Object(O.__)("Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":e.push({date:n.start_date,total_orders:{label:Object(O.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":e.push({date:n.start_date,total_revenue:{label:Object(O.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return e}(t);case"sms":return function(t){var e=[];if(!Object(N.isEmpty)(v)){v.map((function(n){switch(t){case"email_sents":e.push({date:n.start_date,email_sents:{label:Object(O.__)("SMS Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"email_click":e.push({date:n.start_date,email_click:{label:Object(O.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":e.push({date:n.start_date,total_orders:{label:Object(O.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":e.push({date:n.start_date,total_revenue:{label:Object(O.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return e}(t);case"contact":return function(t){var e=[];if(!Object(N.isEmpty)(v)){v.map((function(n){switch(t){case"active_contacts":e.push({date:n.start_date,active_contacts:{label:Object(O.__)("Active Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.active_contacts)}});break;case"complete_contacts":e.push({date:n.start_date,complete_contacts:{label:Object(O.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.complete_contacts)}});break;case"unsubscribers":e.push({date:n.start_date,unsubscribers:{label:Object(O.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(n.subtotals.unsubscribers)}});break;case"revenue":e.push({date:n.start_date,revenue:{label:Object(O.__)("Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.revenue)}});break;case"conversions":e.push({date:n.start_date,conversions:{label:Object(O.__)("Orders","wp-marketing-automations"),value:parseInt(n.subtotals.conversions)}});break;case"aov":e.push({date:n.start_date,conversions:{label:Object(O.__)("AOV","wp-marketing-automations"),value:parseInt(n.subtotals.aov)}})}}))}return e}(t)}}(i),title:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:""},Object(O.__)("Performance","wp-marketing-automations"))),interval:j,layout:"item-comparison",legendTotals:"aov"==i?{conversions:h.hasOwnProperty("aov")?h.aov:0}:null,interactiveLegend:!0,chartType:"curve-line",chartMeta:s,tabs:o(a),hideTypeSelect:!0,customHeaderItem:Object(r.createElement)(r.Fragment,null,o(a)&&Object(N.isArray)(o(a))&&Object(r.createElement)("div",{className:"bwf-chart-tabs"},o(a).filter((function(t){return"convert_time"!==t.key})).map((function(t){return Object(r.createElement)(P.Button,{className:L()({"is-gray-light":s.key!==t.key,"is-secondary-light":s.key===t.key}),key:t.key,onClick:function(e){l(t),e.preventDefault(),delete n.compare,Object(f.k)({chart:t.key},"/",n)}},t.title)}))))})},F=n(143),D=n(19),T=n(54);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(){Y=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new x(r||[]);return a(i,"_invoke",{value:k(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="executing",b="completed",d={};function y(){}function v(){}function h(){}var O={};l(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==n&&r.call(j,i)&&(O=j);var g=h.prototype=y.prototype=Object.create(O);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var s=m(t[a],t,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==M(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,n,r){var a=f;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=N(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var l=m(e,n,r);if("normal"===l.type){if(a=r.done?b:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=b,r.method="throw",r.arg=l.arg)}}}function N(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(M(e)+" is not iterable")}return v.prototype=h,a(g,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:v,configurable:!0}),v.displayName=l(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(g),l(g,s,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function G(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var H=function(t){var e=t.query,n=t.automationId,a=e.period,i=e.interval,s=void 0===i?"day":i,l=e.after,u=e.before,f=Object(T.a)(Object(o.sb)()).formatAmount,p=R(Object(r.useState)([]),2),b=p[0],d=p[1],y=R(Object(r.useState)(!0),2),v=y[0],h=y[1],j=R(Object(r.useState)(25),2),g=j[0],_=j[1],E=R(Object(r.useState)(0),2),k=E[0],S=E[1],P=R(Object(r.useState)(0),2),x=P[0],L=P[1],A=parseInt(k)/parseInt(g)+1,I=Object(w.a)(),C=I.getAnalyticsTileData,M=I.getAnalyticsLoading,z=C(),H=M();Object(r.useEffect)((function(){if(!Object(o.Sb)()){var t=z.email_click,e=void 0===t?0:t,n=z.email_open,r=void 0===n?0:n,a=z.email_sents,i=void 0===a?0:a,c=z.total_orders,s=void 0===c?0:c,l=z.revenue,u=void 0===l?0:l;d([{click_count:e,click_rate:(e/i*100).toFixed(2),conversions:s,oid:"5",open_count:r,open_rate:(r/i*100).toFixed(2),revenue:u,sent:i,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),h(!1)}}),[H]);var q=function(){var t,e=(t=Y().mark((function t(e,r){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h(!0),Object(o.Sb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,c()({method:"GET",path:Object(o.y)("/analytics/emails/tabular/")+"?"+Object(D.stringify)({after:e,before:r,oid:n,type:1,interval:"day",limit:g,offset:k,mode:1})}).then((function(t){t.hasOwnProperty("result")&&d(t.result),t.hasOwnProperty("total_count")&&L(t.total_count),h(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),h(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){G(o,r,a,i,c,"next",t)}function c(t){G(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){if(Object(o.Sb)()){var t=((a=e).compare="previous_year",Object(m.c)(a).primary),n="",r="";t&&(Object(N.isEmpty)(t.after)||(n=t.after.format("YYYY-MM-DD HH:mm:ss")),Object(N.isEmpty)(t.before)||(r=t.before.format("YYYY-MM-DD 23:59:59")),Object(N.isEmpty)(n)||Object(N.isEmpty)(r)||q(n,r))}var a}),[a,s,l,u]);var U,V=[{key:"subject",label:Object(O.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(O.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(O.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(O.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(O.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.fc)()?{key:"orders",label:Object(O.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.fc)()?{key:"revenue",label:Object(O.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],$=function(t){t!==g&&_(t)};return Object(r.createElement)("div",{className:"bwf-table-with-border"},Object(r.createElement)(F.a,{title:Object(O.__)("Email","wp-marketing-automations"),rows:(U=[],Object(N.isEmpty)(b)||b.map((function(t){U.push([{display:t.subject?t.subject:"-",value:t.subject},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.open_rate)?parseFloat(t.open_rate).toFixed(1)+"%":"-",value:t.open_count},{display:parseInt(t.click_rate)?parseFloat(t.click_rate).toFixed(1)+"%":"-",value:t.click_count},Object(o.fc)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.fc)()?{display:parseFloat(t.revenue)>0?Object(r.createElement)("span",{className:"bwf-tags bwf-tag-green"},f(parseFloat(t.revenue))):"-",value:t.revenue}:{}])})),U),headers:V,query:{paged:A},rowsPerPage:g,totalRows:x,isLoading:v,onPageChange:function(t,e){S((t-1)*g)},onQueryChange:function(t){return"per_page"!==t?function(){}:$},showMenu:!1,rowHeader:!0,emptyMessage:Object(O.__)("No emails found","wp-marketing-automations")}))};function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(){U=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new x(r||[]);return a(i,"_invoke",{value:k(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="executing",b="completed",d={};function y(){}function v(){}function h(){}var O={};l(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==n&&r.call(j,i)&&(O=j);var g=h.prototype=y.prototype=Object.create(O);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var s=m(t[a],t,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==q(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,n,r){var a=f;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=N(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var l=m(e,n,r);if("normal"===l.type){if(a=r.done?b:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=b,r.method="throw",r.arg=l.arg)}}}function N(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(q(e)+" is not iterable")}return v.prototype=h,a(g,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:v,configurable:!0}),v.displayName=l(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(g),l(g,s,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function V(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return B(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Q=function(t){var e=t.query,n=t.automationId,a=e.period,i=e.interval,s=void 0===i?"day":i,l=e.after,u=e.before,f=Object(T.a)(Object(o.sb)()).formatAmount,p=$(Object(r.useState)([]),2),b=p[0],d=p[1],y=$(Object(r.useState)(!0),2),v=y[0],h=y[1],j=$(Object(r.useState)(25),2),g=j[0],_=j[1],E=$(Object(r.useState)(0),2),k=E[0],S=E[1],P=$(Object(r.useState)(0),2),x=P[0],L=P[1],A=parseInt(k)/parseInt(g)+1,I=Object(w.a)(),C=I.getAnalyticsTileData,M=I.getAnalyticsLoading,Y=C(),G=M();Object(r.useEffect)((function(){if(!Object(o.Sb)()){var t=Y.email_click,e=void 0===t?0:t,n=Y.email_open,r=void 0===n?0:n,a=Y.email_sents,i=void 0===a?0:a,c=Y.total_orders,s=void 0===c?0:c,l=Y.revenue,u=void 0===l?0:l;d([{click_count:e,click_rate:(e/i*100).toFixed(2),conversions:s,oid:"5",open_count:r,open_rate:(r/i*100).toFixed(2),revenue:u,sent:i,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),h(!1)}}),[G]);var R=function(){var t,e=(t=U().mark((function t(e,r){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h(!0),Object(o.Sb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,c()({method:"GET",path:Object(o.y)("/analytics/emails/tabular/")+"?"+Object(D.stringify)({after:e,before:r,oid:n,type:1,interval:"day",limit:g,offset:k,mode:2})}).then((function(t){t.hasOwnProperty("result")&&d(t.result),t.hasOwnProperty("total_count")&&L(t.total_count),h(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),h(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){V(o,r,a,i,c,"next",t)}function c(t){V(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){if(Object(o.Sb)()){var t=((a=e).compare="previous_year",Object(m.c)(a).primary),n="",r="";t&&(Object(N.isEmpty)(t.after)||(n=t.after.format("YYYY-MM-DD HH:mm:ss")),Object(N.isEmpty)(t.before)||(r=t.before.format("YYYY-MM-DD 23:59:59")),Object(N.isEmpty)(n)||Object(N.isEmpty)(r)||R(n,r))}var a}),[a,s,l,u]);var z,H=[{key:"message",label:Object(O.__)("Message","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(O.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(O.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(O.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.fc)()?{key:"orders",label:Object(O.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.fc)()?{key:"revenue",label:Object(O.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],q=function(t){t!==g&&_(t)};return Object(r.createElement)("div",{className:"bwf-table-with-border"},Object(r.createElement)(F.a,{title:Object(O.__)("SMS","wp-marketing-automations"),hideHeader:"yes",rows:(z=[],Object(N.isEmpty)(b)||b.map((function(t){var e=parseFloat(t.click_rate)?" ( "+parseFloat(t.click_rate).toFixed(2)+"% ) ":"";z.push([{display:t.template?Object(r.createElement)("div",{className:"bwf-pre-line"},t.template):"-",value:""},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.click_count)?t.click_count+e:"-",value:t.click_count},Object(o.fc)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.fc)()?{display:parseFloat(t.revenue)>0?Object(r.createElement)("span",{className:"bwf-tags bwf-tag-green"},f(parseFloat(t.revenue))):"-",value:t.revenue}:{}])})),z),headers:H,query:{paged:A},rowsPerPage:g,totalRows:x,isLoading:v,onPageChange:function(t,e){S((t-1)*g)},onQueryChange:function(t){return"per_page"!==t?function(){}:q},showMenu:!1,rowHeader:!0,emptyMessage:Object(O.__)("No SMS found","wp-marketing-automations")}))},J=n(8),W=n(109),Z=(n(1395),n(68)),K=n(1072),X=n(1134),tt=(n(1129),n(1131)),et=function(t){var e=t.readables;return Object(r.createElement)("div",{className:"bwf-step-brick"},e.map((function(t,e){var n=t.map((function(t,e){return Object(N.isEmpty)(t)?Object(r.createElement)(r.Fragment,null):Object(r.createElement)("div",{key:e},0!==e&&Object(r.createElement)("div",{className:"bwf-step-divider"},Object(r.createElement)("span",{className:"bwf-divider"},"AND")),Object(r.createElement)("div",{className:"bwf-step-content-content bwf-two-line-ellipse-text"},t))}));return 0!==e?Object(N.isEmpty)(n)?Object(r.createElement)(r.Fragment,null):Object(r.createElement)("div",{key:e+"-or"},Object(r.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(r.createElement)("span",{className:"bwf-divider"},"OR")),n):n})))},nt=function(t){var e,n,a=t.data,i=void 0===a?{}:a,c=t.id,s=Object(r.useContext)(o.b),l=s.automationId,u=void 0===l?"":l,m=s.eventSlug,f=void 0===m?"":m,p=i.stats,b=Object(N.isEmpty)(f)?{}:Object(tt.a)(f,parseInt(u)),d=b.isLoading,y=b.error,v=b.getReadableTexts,h=b.rules,w=(e=i.sidebarValues,n=[],Object(N.isEmpty)(e)?[]:(Object.keys(e).map((function(t){var r=e[t],a=[];!Object(N.isEmpty)(r)&&Object(N.isArray)(r)&&(r.map((function(t){h.hasOwnProperty(t.filter)&&a.push(t)})),Object(N.isEmpty)(a)||n.push(a))})),n)),j=d||y||Object(N.isEmpty)(f)?[]:v(w);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(J.a,{size:26,icon:"condition"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(O.__)("Step","wp-marketing-automations")+" "+c),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(O.__)("Condition","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Array.isArray(j)&&j.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)(et,{readables:j}))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(O.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},p.hasOwnProperty("completed")?Object(o.ic)(parseInt(p.completed)):0)))):Object(r.createElement)(r.Fragment,null,d?Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(O.__)("Loading","wp-marketing-automations")))))):Object(r.createElement)("div",{className:"bwf-control-event-error"},Object(r.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(O.__)("Not Configured","wp-marketing-automations")))))),Object(r.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1}))},rt=n(147),at=n(1157),ot=function(t){var e,n=t.data,a=void 0===n?{}:n,i=t.id,c=a.desc_text,s=void 0===c?"":c,l=a.integration,u=void 0===l?"-":l,m=a.selected,f=void 0===m?"-":m,p=a.action_slug,b=void 0===p?"":p,d=a.stats,y=void 0===d?{}:d,v=a.stepId,h=void 0===v?"":v,w=Object(r.useContext)(o.b),j=w.automationId,g=void 0===j?"":j,_=w.stepId,E=void 0===_?"":_,k=function(){return Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle "},Object(r.createElement)(at.a,{automationId:g,analyticsId:h,mode:"email",extraData:{split:E}}))},S=function(){return Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(r.createElement)(at.a,{automationId:g,analyticsId:h,mode:"sms",extraData:{split:E}}))};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-action"},Object(r.createElement)(J.a,{size:22,icon:"charge"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(O.__)("Step","wp-marketing-automations")+" "+i),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(O.__)("Action","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},!Object(N.isEmpty)(a)&&a.hasOwnProperty("selected")&&(e=Object(r.createElement)(r.Fragment,null),"wp_sendemail"===b?e=k():"twilio_send_sms"===b&&(e=S()),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-content-type"},u),Object(r.createElement)("div",{className:"bwf-node-content-label"},f),""!==s&&!Object(N.isNull)(s)&&Object(r.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(N.isArray)(s)?"":" bwf-two-line-ellipse-text")},function(t){if(Object(N.isEmpty)(t))return Object(r.createElement)(r.Fragment,null);if(Object(N.isArray)(t)){var e="",n=[];return t.map((function(t){Object(N.isEmpty)(e)&&(e=t),n.push(Object(r.createElement)("span",{key:t},t))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,!Object(N.isEmpty)(e)&&e),!Object(N.isEmpty)(n)&&n.length>1&&Object(r.createElement)("div",{className:"bwf-display-inline",onClick:function(t){t.preventDefault(),t.stopPropagation()}},Object(r.createElement)(rt.a,{items:n}))))}return t}(s)),e)))))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(O.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},y.hasOwnProperty("completed")?Object(o.ic)(parseInt(y.completed)):0))))),Object(r.createElement)(K.d,{type:"source",isConnectable:!1,position:"bottom"}))},it=n(90),ct=n(10),st=n.n(ct),lt={1:Object(O.__)("Delay for a specific period","wp-marketing-automations"),2:Object(O.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(O.__)("Delay until a custom field date","wp-marketing-automations"),4:Object(O.__)("Delay with variable","wp-marketing-automations")},ut={1:Object(O.__)("Sun","wp-marketing-automations"),2:Object(O.__)("Mon","wp-marketing-automations"),3:Object(O.__)("Tue","wp-marketing-automations"),4:Object(O.__)("Wed","wp-marketing-automations"),5:Object(O.__)("Thu","wp-marketing-automations"),6:Object(O.__)("Fri","wp-marketing-automations"),7:Object(O.__)("Sat","wp-marketing-automations")},mt=function(t){var e=t.data,n=t.id,a=e.stats,i=void 0===a?{}:a,c=e.sidebarValues,s=void 0===c?{}:c,l=s.type,u=void 0===l?0:l,m=s.data,f=void 0===m?{}:m,p=function(){switch(parseInt(u)){case 1:var t=f.day_delay,e=void 0===t?{}:t,n=f.enable_time_delay,a=void 0!==n&&n,o=f.enable_week_delay,i=void 0!==o&&o,c=f.time_delay,s=void 0===c?{time:""}:c,l=f.week_delay,m=void 0===l?[]:l;if(!Object(N.isEmpty)(e)){var p=e.text+" "+function(t,e){switch(t){case"min":return parseInt(e)>1?Object(O.__)("Minutes","wp-marketing-automations"):Object(O.__)("Minute","wp-marketing-automations");case"hours":return parseInt(e)>1?Object(O.__)("Hours","wp-marketing-automations"):Object(O.__)("Hour","wp-marketing-automations");case"days":return parseInt(e)>1?Object(O.__)("Days","wp-marketing-automations"):Object(O.__)("Day","wp-marketing-automations");case"weeks":return parseInt(e)>1?Object(O.__)("Weeks","wp-marketing-automations"):Object(O.__)("Week","wp-marketing-automations");case"months":return parseInt(e)>1?Object(O.__)("Months","wp-marketing-automations"):Object(O.__)("Month","wp-marketing-automations");default:return""}}(e.unit,e.text),b=[];return i&&!Object(N.isEmpty)(m)&&m.map((function(t){ut.hasOwnProperty(t)&&b.push(ut[t])})),a&&s.hasOwnProperty("time")&&!Object(N.isEmpty)(s.time)?(p+=" "+Object(O.__)("till","wp-marketing-automations")+" "+Object(it.format)(bwfcrm_contacts_data.time_format,st()(s.time,"HH:mm:ss")),Object(N.isEmpty)(b)||(p+=" "+b.join("/")),s.hasOwnProperty("in_contact_timezone")&&s.in_contact_timezone&&(p+=" "+Object(O.__)("in Contact's Timezone","wp-marketing-automations"))):Object(N.isEmpty)(b)||(p+=" "+b.join("/")),p+"."}break;case 2:var d=f.date,y=void 0===d?"":d,v=f.time_delay,h=void 0===v?{time:"",in_contact_timezone:!1}:v,w=f.enable_step_skip,j=void 0!==w&&w,g=f.skip_to_step,_=void 0===g?{step:"",name:""}:g;if(!Object(N.isEmpty)(y)&&!Object(N.isEmpty)(h.time)){var E="",k="";return h.hasOwnProperty("in_contact_timezone")&&h.in_contact_timezone?E+=" "+Object(O.__)("in Contact's Timezone.","wp-marketing-automations"):E+=".",j&&!Object(N.isEmpty)(_)&&_.hasOwnProperty("step")&&""!=_.step&&_.hasOwnProperty("name")&&""!=_.name&&(k=" ".concat(Object(O.__)("Jump to","wp-marketing-automations")," ").concat(_.name,".")),Object(O.__)("Delay till","wp-marketing-automations")+" "+Object(it.format)(bwfcrm_contacts_data.date_format,st()(y))+" at "+Object(it.format)(bwfcrm_contacts_data.time_format,st()(h.time,"HH:mm:ss"))+" "+E+k}break;case 3:var S=f.custom_field,P=f.enable_time_delay,x=void 0!==P&&P,L=f.time_delay,A=f.enable_step_skip,I=void 0!==A&&A,C=f.skip_to_step;if(S.hasOwnProperty("field")&&""!==S.field){var F=Object(O.__)("Delay","wp-marketing-automations");return x?L.hasOwnProperty("duration")&&(F+=" ".concat(Object(O.__)("of","wp-marketing-automations")," ").concat(L.duration," ").concat(L.type," ").concat(L.timing," ")):F+=" "+Object(O.__)("till","wp-marketing-automations"),S.hasOwnProperty("custom_field_label")&&""!==S.custom_field_label?F+=" ".concat(Object(O.__)("Contacts","wp-marketing-automations")," '").concat(S.custom_field_label,"' ").concat(Object(O.__)("field value","wp-marketing-automations")):F+=" ".concat(Object(O.__)("Contacts","wp-marketing-automations")," ( ").concat(S.field," ) ").concat(Object(O.__)("field value","wp-marketing-automations")),S.hasOwnProperty("time")&&""!==S.time&&(F+=" till ".concat(Object(it.format)(bwfcrm_contacts_data.time_format,st()(S.time,"HH:mm:ss")))),S.hasOwnProperty("in_contact_timezone")&&S.in_contact_timezone?F+=" ".concat(Object(O.__)("in Contact's Timezone","wp-marketing-automations"),"."):F+=".",I&&!Object(N.isEmpty)(C)&&C.hasOwnProperty("step")&&""!=C.step&&C.hasOwnProperty("name")&&""!=C.name&&(F+=" ".concat(Object(O.__)("Jump to","wp-marketing-automations")," ").concat(C.name,".")),F}break;case 4:var D=f.variable_field,T=f.enable_time_delay,M=void 0!==T&&T,Y=f.time_delay,G=f.enable_step_skip,R=void 0!==G&&G,z=f.skip_to_step;if(D.hasOwnProperty("variable")&&""!==D.variable){var H=Object(O.__)("Delay","wp-marketing-automations");return M?Y.hasOwnProperty("duration")&&(H+=" of ".concat(Y.duration," ").concat(Y.type," ").concat(Y.timing," ")):H+=" "+Object(O.__)("till","wp-marketing-automations"),D.hasOwnProperty("variable")&&""!==D.variable&&(H+=" ".concat(Object(O.__)("Orders meta key","wp-marketing-automations")," ").concat(D.variable," ").concat(Object(O.__)("value","wp-marketing-automations"))),D.hasOwnProperty("time")&&""!==D.time&&(H+=" ".concat(Object(O.__)("till","wp-marketing-automations")," ").concat(Object(it.format)(bwfcrm_contacts_data.time_format,st()(D.time,"HH:mm:ss")))),D.hasOwnProperty("in_contact_timezone")&&D.in_contact_timezone?H+=" ".concat(Object(O.__)("in Contact's Timezone","wp-marketing-automations"),"."):H+=".",R&&!Object(N.isEmpty)(z)&&z.hasOwnProperty("step")&&""!=z.step&&z.hasOwnProperty("name")&&""!=z.name&&(H+=" ".concat(Object(O.__)("Jump to","wp-marketing-automations")," ").concat(z.name,".")),H}break;default:return Object(r.createElement)(r.Fragment,null)}return Object(r.createElement)(r.Fragment,null)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(r.createElement)(J.a,{size:28,icon:"time-left"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(O.__)("Step","wp-marketing-automations")+" "+n),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(O.__)("Delay","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick"},Object(r.createElement)("div",{className:"bwf-step-content-content"},lt.hasOwnProperty(u)&&Object(r.createElement)("div",{className:"bwf-node-content-type"},lt[u]),Object(r.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text",title:p()},p()))))),Object(r.createElement)("div",{className:"bwf-node-status"},Object(r.createElement)("div",{className:"bwf-queued-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(O.__)("Queued","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},i.hasOwnProperty("queued")?Object(o.ic)(parseInt(i.queued)):0)),Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(O.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},i.hasOwnProperty("completed")?Object(o.ic)(parseInt(i.completed)):0))))),Object(r.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1}))},ft=function(t){return Object(r.createElement)("div",{className:t&&t.data&&t.data.direction&&"no"===t.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(r.createElement)(K.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("span",{className:"bwf-yes-no-wrap"},t&&t.data&&t.data.direction&&"no"===t.data.direction?Object(O.__)("No","wp-marketing-automations"):Object(O.__)("Yes","wp-marketing-automations")),Object(r.createElement)(K.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},pt=function(t){var e=t.id,n=t.data,a=void 0===n?{}:n,i=a.stats,c=void 0===i?{}:i,s=a.desc_text,l=void 0===s?"":s,u=a.desc,m=void 0===u?"":u;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)("div",{className:"bwf-inner-wrapper "},Object(r.createElement)("div",{className:"bwf-node-brick"},Object(r.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(r.createElement)(J.a,{size:26,icon:"split-test"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(O.__)("Step","wp-marketing-automations")+" "+e),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(O.__)("Split Path","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-node-action"})),Object(r.createElement)("div",{className:"bwf-node-step-content"},Object(r.createElement)("div",{className:"bwf-step-content"},Object(r.createElement)("div",{className:"bwf-step-brick bwf-split-wrap"},Object(r.createElement)("div",{className:"bwf-step-content-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},""!==l?l:"-"),""!==m&&Object(r.createElement)("div",{className:"bwf-node-content-label bwf-node-desc bwf-two-line-ellipse-text"},m))))),Object(r.createElement)("div",{className:"bwf-node-status bwf-node-mt-10"},Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},Object(O.__)("Completed","wp-marketing-automations")),Object(r.createElement)("span",{className:"bwf-node-status-count"},c.hasOwnProperty("completed")?Object(o.ic)(parseInt(c.completed)):0))))),Object(r.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1}))},bt=function(t){var e=t.data,n=void 0===e?{}:e,a=Object(o.zc)(),i=n.path,c=void 0===i?"1":i;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-splitpath-node-wrapper"},Object(r.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-split-node split-path-"+c},Object(O.__)("Path","wp-marketing-automations")+" "+a[c])),Object(r.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},dt=function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-node-wrapper"},Object(r.createElement)(K.d,{type:"source",position:"top",isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content bwf-end"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(O.__)("End","wp-marketing-automations")))))},yt=(n(1396),n(1128),n(29));function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ht(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Ot=function(t){var e=t.stepTitle,n=void 0===e?"":e,a=t.onClose,i=t.stepId,s=t.automationId,l=t.eventSlug,u=vt(Object(r.useState)(!0),2),m=u[0],f=u[1],p=vt(Object(r.useState)(!1),2),b=p[0],d=p[1],y=vt(Object(r.useState)([]),2),v=y[0],h=y[1],w=Object(K.l)(),j=Object(K.n)().setCenter;Object(r.useEffect)((function(){!function(){try{c()({path:Object(o.y)("/automation/".concat(s,"/split/").concat(i,"/preview")),method:"GET"}).then((function(t){f(!1),200===t.code?Object(N.isEmpty)(t.result)||h(t.result):d(!0)}))}catch(t){d(!0),f(!1)}}()}),[i]);var g=Object(r.useRef)(),_={end:dt,wait:mt,split:pt,action:ot,yesNoNode:ft,splitpath:bt,conditional:nt};Object(r.useEffect)((function(){Object(N.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(g.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect())}),[m]),Object(r.useEffect)((function(){var t=0,e=0,n=w.getState().nodes;if(n.length&&g.current&&!m){var r=n[0];r.hasOwnProperty("__rf")?(t=r.__rf.position.x+140,e=r.__rf.position.y):(t=r.position.x+140,e=r.position.y),e=parseFloat(e)+.4*parseFloat(g.current.height),j(t,e,.8)}}),[m,v,g.current]);return Object(r.createElement)(P.Modal,{title:Object(O.sprintf)(Object(O.__)("Preview - %s ","wp-marketing-automations"),n),onRequestClose:function(){return a(!0)},className:"bwf-admin-modal bwf-admin-modal-xxxl bwf-split-path-analytics-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)(o.b.Provider,{value:{automationId:s,eventSlug:l,stepId:i}},Object(r.createElement)("div",{className:"bwf-single-automation-wrap",id:"bwf-single-automation-wrap"},m?Object(r.createElement)(Z.a,null):Object(r.createElement)(r.Fragment,null,b?Object(r.createElement)(yt.a,{status:"error"},Object(O.__)("Unable to fetch split path preview","wp-marketing-automations")):Object(r.createElement)(K.f,{defaultZoom:.9,minZoom:.5,maxZoom:3,nodeTypes:_,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:Object(X.a)(v,!0)},Object(r.createElement)(K.a,{color:"#fff"}),Object(r.createElement)(K.c,{showInteractive:!1}))))))},wt=(n(1397),function(t){var e=t.fill,n=t.height,a=void 0===n?16:n;return Object(r.createElement)("span",{className:"bwf-ripple-wrap",style:{height:"".concat(a,"px")}},Object(r.createElement)("span",{className:L()("dot",{transition:"#09B29C"===e,"bwf-mr-16":void 0!==e}),style:{"--ripple-var":e}}))});function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(){return(gt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(null,arguments)}function _t(t){return function(t){if(Array.isArray(t))return Pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||St(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(){Et=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new x(r||[]);return a(i,"_invoke",{value:k(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="executing",b="completed",d={};function y(){}function v(){}function h(){}var O={};l(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==n&&r.call(j,i)&&(O=j);var g=h.prototype=y.prototype=Object.create(O);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var s=m(t[a],t,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==jt(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,n,r){var a=f;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=N(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var l=m(e,n,r);if("normal"===l.type){if(a=r.done?b:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=b,r.method="throw",r.arg=l.arg)}}}function N(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(jt(e)+" is not iterable")}return v.prototype=h,a(g,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:v,configurable:!0}),v.displayName=l(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(g),l(g,s,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function kt(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function Nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){l=!0,a=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(t,e)||St(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(t,e){if(t){if("string"==typeof t)return Pt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(t,e):void 0}}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var xt=function(t){var e=t.automationId,n=Nt(Object(r.useState)(!0),2),i=n[0],s=n[1],l=Nt(Object(r.useState)({}),2),u=l[0],m=l[1],f=Nt(Object(r.useState)({}),2),p=f[0],b=f[1],d=Nt(Object(r.useState)(""),2),y=d[0],v=d[1],h=Nt(Object(r.useState)(""),2),w=h[0],j=h[1];Object(r.useEffect)((function(){A()}),[]);var g=Object(o.zc)(),_=Object(E.a)().getAutomationData,S=Object(k.a)().setAutomationData,P=_().title,x=void 0===P?"":P;Object(a.a)("analytics",""!==x&&""===y?x:y,!0,!1,null,e,!1,!0);var L,A=function(){var t,n=(t=Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c()({path:Object(o.y)("/automation/".concat(e,"/split-stats")),method:"GET"}).then((function(t){if(200===t.code){if(t.hasOwnProperty("result")&&!Object(N.isEmpty)(t.result)&&t.result.hasOwnProperty("data")&&!Object(N.isEmpty)(t.result.data)&&m(t.result.data),t.hasOwnProperty("result")&&!Object(N.isEmpty)(t.result)&&t.result.hasOwnProperty("automation_data")&&!Object(N.isEmpty)(t.result.automation_data)){var e=t.result.automation_data,n=e.title,r=void 0===n?"":n,a=e.event,o=void 0===a?"":a;""!==r&&v(r),""!==o&&j(o),S("data",t.result.automation_data)}s(!1)}}));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),s(!1);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){kt(o,r,a,i,c,"next",t)}function c(t){kt(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),I=Object(r.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(r.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(r.createElement)("div",{className:"bwf-split-analytics-header-title"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf-split-analytics-header-date"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf-split-analytics-header-tag bwf-split-ongoing"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-10"}))),Object(r.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(r.createElement)("div",{className:"bwf-split-analytics-header-preview"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))),C=Object(r.createElement)("div",{className:"bwf-split-analytics-item"},Object(r.createElement)("div",{className:"bwf-split-description"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},[1,2].map((function(t){return Object(r.createElement)("div",{className:"bwf-split-analytics-path-item",key:t},Object(r.createElement)("div",{className:"bwf-split-analytics-path-header"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf-split-analytics-path-content"},_t(Array(8)).map((function(t,e){return Object(r.createElement)("div",{className:"bwf-split-test-path-content-stat",key:e},Object(r.createElement)("span",{className:"bwf-split-test-path-content-value"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-30 bwf-h-15"})),Object(r.createElement)("span",{className:"bwf-split-test-path-content-label"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))}))))})))),F=function(t){var e=t.path,n=void 0===e?[]:e,a=t.desc,o=void 0===a?"":a;return Object(N.isEmpty)(n)?Object(r.createElement)("div",{className:"bwf-split-analytics-item"},""!==o&&Object(r.createElement)("div",{className:"bwf-split-description"},Object(r.createElement)("span",{className:"bwf-split-desc-heading"},Object(O.__)("Description","wp-marketing-automations")),":",Object(r.createElement)("span",{className:"bwf-split-desc-text"},o)),Object(r.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},Object(r.createElement)("div",{className:"bwf-mb-10"},Object(O.__)("No paths found","wp-marketing-automations")))):Object(r.createElement)("div",{className:"bwf-split-analytics-item"},""!==o&&Object(r.createElement)("div",{className:"bwf-split-description"},Object(r.createElement)("span",{className:"bwf-split-desc-heading"},Object(O.__)("Description","wp-marketing-automations")),":",Object(r.createElement)("span",{className:"bwf-split-desc-text"},o)),Object(r.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},n.map((function(t,e){var n=t.tile,a=void 0===n?[]:n,o=t.path,i=void 0===o?"":o,c=t.winner,s=void 0!==c&&c;return Object(r.createElement)("div",{className:"bwf-split-analytics-path-item",key:e},Object(r.createElement)("div",{className:"bwf-split-analytics-path-header splitpath-"+i},Object(r.createElement)("span",{className:"bwf-split-path-title"},Object(O.__)("Path","wp-marketing-automations")+" "+g[i]),s&&Object(r.createElement)(J.a,{icon:"winner"})),Object(r.createElement)("div",{className:"bwf-split-analytics-path-content"},a.map((function(t,e){return Object(r.createElement)("div",{className:"bwf-split-test-path-content-stat",key:e},Object(r.createElement)("span",{className:"bwf-split-test-path-content-value"},t.v),Object(r.createElement)("span",{className:"bwf-split-test-path-content-label"},t.l))}))))}))))},D=function(t){var n=t.started,a=void 0===n?"":n,i=t.status,c=void 0===i?"":i,s=t.title,l=void 0===s?"":s,u=t.completed,m=void 0===u?"":u,f=t.step_id,p=void 0===f?"":f;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(r.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(r.createElement)("div",{className:"bwf-split-analytics-header-title"},""!==l?l:"-"),Object(r.createElement)("div",{className:"bwf-split-analytics-header-date"},""!==a?Object(r.createElement)(r.Fragment,null,Object(O.__)("Started on","wp-marketing-automations")," ",Object(o.db)(a),"completed"===c&&""!==m&&Object(r.createElement)(r.Fragment,null," | ",Object(O.__)(" Ended On","wp-marketing-automations")," ",Object(o.db)(m))):Object(r.createElement)(r.Fragment,null)),""!==c&&Object(r.createElement)("div",{className:"bwf-split-analytics-header-tag"},"ongoing"===c&&Object(r.createElement)(wt,{fill:"#09B29C"}),Object(r.createElement)("span",null,c))),Object(r.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(r.createElement)("div",{className:"bwf-split-analytics-header-preview components-form-toggle__input",onClick:function(t){t.stopPropagation(),b({stepTitle:""!==l?l:"",stepId:p,automationId:e})}},Object(r.createElement)(J.a,{icon:"view",size:15}),Object(O.__)("Preview","wp-marketing-automations")))))},T=Object(r.createElement)("div",{className:"bwf-split-analytics-zero-state"},Object(r.createElement)(J.a,{icon:"split-analytics-zero"}),Object(r.createElement)("div",{className:"bwf-heading"},Object(O.__)("No Split Path Created","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-desc"},Object(O.__)("Once you create a split path in the work flow. You stats will start appear here.","wp-marketing-automations")));return Object(r.createElement)("div",{className:"bwf-split-analytics-wrapper"},!i&&Object(N.isEmpty)(u)?Object(r.createElement)(r.Fragment,null,T):Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,[1,2].map((function(t){return Object(r.createElement)("div",{key:t,className:" bwf-c-s-collapsible"},Object(r.createElement)("div",{className:"bwf-c-s-heading"},Object(r.createElement)("div",{className:"bwf-accordion-label-elm"},I),Object(r.createElement)("span",{className:"acc-icon"})),Object(r.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion"},C))})))):Object(r.createElement)(W.a,{items:(L=[],u.map((function(t,e){L.push({key:e,label:D(t),display:F(t)})})),L)})),!Object(N.isEmpty)(p)&&Object(r.createElement)(K.e,null,Object(r.createElement)(Ot,gt({},p,{onClose:function(){return b({})},eventSlug:w}))))},Lt=n(336),At=(n(1398),n(1105)),It=n(1078);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t){return function(t){if(Array.isArray(t))return Dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Dt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Tt(){Tt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),c=new x(r||[]);return a(i,"_invoke",{value:k(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="executing",b="completed",d={};function y(){}function v(){}function h(){}var O={};l(O,i,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==n&&r.call(j,i)&&(O=j);var g=h.prototype=y.prototype=Object.create(O);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(a,o,i,c){var s=m(t[a],t,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==Ct(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function k(e,n,r){var a=f;return function(o,i){if(a===p)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=N(c,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var l=m(e,n,r);if("normal"===l.type){if(a=r.done?b:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=b,r.method="throw",r.arg=l.arg)}}}function N(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Ct(e)+" is not iterable")}return v.prototype=h,a(g,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:v,configurable:!0}),v.displayName=l(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},_(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(g),l(g,s,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function Mt(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){Rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default=function(t){var e=t.match.params,n=e.automationId,i=e.type,u=void 0===i?"contact":i,p=t.isV2,b=void 0===p||p,d=Object(f.i)(),y=d.period,j=d.compare,S=d.interval,P=d.after,x=d.before,L=Object(s.a)(),A=L.setL2NavAlign,I=L.setL2Title,F=L.setPageCountData,D=(0,Object(l.a)().getPageCountData)(),M=Object(_.a)(),Y=M.fetchAnalytics,G=M.setAnalyticsValues,R=Object(w.a)(),z=R.getAnalyticsAutomationData,q=R.getAnalyticsTileData,U=R.getAnalyticsSingleAutomationFailedCount,V=R.getAnalyticsLoading,$=z(),B=U(),J=$.title,W=void 0===J?"":J,Z=Object(k.a)().setAutomationData,K=V();Object(r.useEffect)((function(){Object(N.isEmpty)($)||Z("data",$)}),[$]),Object(r.useEffect)((function(){K||F(Gt(Gt({},D),{},{single_a_contacts:B}))}),[B]),Object(r.useEffect)((function(){return function(){G("automation",{})}}),[]);var X=Object(E.a)(),tt=X.getAutomationData,et=X.getAutomationId,nt=tt().title,rt=void 0===nt?"":nt,at=et(),ot=q(),it=Object(T.a)(Object(o.sb)()).formatAmount;Object(a.a)("analytics","",!0,!1,null,n,!1,b),Object(r.useEffect)((function(){A("left"),Object(o.l)("Automation #"+n),G("automationId",n)}),[]),Object(r.useEffect)((function(){I(parseInt(n)===parseInt(at)&&""!==rt&&""===W?rt:""!==W?W:Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[rt,W,n]);var ct=function(t){return t.compare="previous_year",Object(m.c)(t).primary},st=function(){for(var t=ct(d),e=0,n=0,r=0,a=0,o=0,i=0,c=0,s=0,l=[],u=t.after;u.isBefore(t.before);u.add(1,"days")){var m=Math.floor(11*Math.random()),f=Math.floor(Math.random()*parseInt(m)),p=Math.floor(Math.random()*parseInt(m)),b=Math.floor(Math.random()*parseInt(p)),y=Math.floor(100*Math.random()).toFixed(2),v=Math.floor(10*Math.random()),h=Math.floor(10*Math.random()),O=Math.floor(10*Math.random()),w=parseFloat(y)>0&&parseInt(b)>0?parseFloat(parseFloat(y)/parseInt(b)).toFixed(2):0;l.push({date_end_gmt:u.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:u.format("YYYY-MM-DD")+" 00:00:00",end_date:u.format("YYYY-MM-DD")+" 23:59:59",interval:u.format("YYYY-MM-DD"),start_date:u.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(f/m*100).toFixed(2),email_click:f,email_open:p,email_sents:m,open_rate:(p/m*100).toFixed(2),total_orders:b,total_revenue:parseFloat(y).toFixed(2),active_contacts:v,complete_contacts:h,unsubscribers:O,revenue:parseFloat(y).toFixed(2),conversions:b,aov:parseFloat(w).toFixed(2)}}),e+=p,n+=m,r+=f,a+=b,o=parseFloat(o)+parseFloat(y),i+=v,c+=h,s+=O}G("tiles",{click_rate:(r/n*100).toFixed(2),email_click:r,email_open:e,email_sents:n,open_rate:(e/n*100).toFixed(2),total_orders:a,total_revenue:o,active_contacts:i,complete_contacts:c,unsubscribers:s,revenue:o,conversions:a,aov:(parseFloat(o)/parseInt(a)).toFixed(2)}),G("analytics",l),G("isLoading",!1)},lt=function(){var t,e=(t=Tt().mark((function t(e,r){var a,i,s,l;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G("analytics",[]),G("tiles",[]),Object(o.Sb)()){t.next=13;break}return t.prev=3,t.next=6,c()({path:Object(o.y)("/automation/".concat(n,"/contacts?limit=1&offset=0&type=failed")),method:"GET"}).then((function(t){t.hasOwnProperty("result")&&t.result.hasOwnProperty("automation_data")&&Z("data",t.result.automation_data)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0);case 11:return setTimeout((function(){st()}),1e3),t.abrupt("return");case 13:if(a=ct(e),i="",s="",l="",!a){t.next=34;break}Object(N.isEmpty)(a.after)||(i=a.after.format("YYYY-MM-DD HH:mm:ss")),Object(N.isEmpty)(a.before)||(s=a.before.format("YYYY-MM-DD 23:59:59")),t.t1=u,t.next="email"===t.t1?23:"sms"===t.t1?25:"whatsapp"===t.t1?27:"contact"===t.t1?29:31;break;case 23:return l=1,t.abrupt("break",33);case 25:return l=2,t.abrupt("break",33);case 27:return l=3,t.abrupt("break",33);case 29:return l=4,t.abrupt("break",33);case 31:return l=1,t.abrupt("break",33);case 33:Object(N.isEmpty)(i)||Object(N.isEmpty)(s)||Y(n,i,s,r,1,l);case 34:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){Mt(o,r,a,i,c,"next",t)}function c(t){Mt(o,r,a,i,c,"throw",t)}i(void 0)}))});return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){if("split"!==u){var t=d.hasOwnProperty("interval")?d.interval:"day";lt(d,t)}}),[y,j,S,P,x,u]);var ut=[{slug:"contact",name:Object(O.__)("Contacts","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/contact")},{slug:"email",name:Object(O.__)("Emails","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/email")}];Object(N.isEmpty)(Object(o.w)())||ut.push({slug:"sms",name:Object(O.__)("SMS","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/sms")}),Object(o.Sb)()&&ut.push({slug:"split",name:Object(O.__)("Split Path","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/split")});var mt=function(t){return Object(N.isEmpty)(ot)||!ot.hasOwnProperty(t)||Object(N.isNull)(ot[t])?0:ot[t]},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contact";return"email"===t?[{key:"email_sents",title:Object(O.__)("Sent","wp-marketing-automations"),icon:"sent-new",value:parseInt(mt("email_sents"))},{key:"open_rate",title:Object(O.__)("Open Rate","wp-marketing-automations"),icon:"open-rate",value:parseFloat(mt("open_rate"))+" %"},{key:"click_rate",title:Object(O.__)("Click Rate","wp-marketing-automations"),icon:"click-rate",value:parseFloat(mt("click_rate"))+" %"}].concat(Ft(Object(o.fc)()?[{key:"total_orders",title:Object(O.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:mt("total_orders")},{key:"total_revenue",title:Object(O.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:it(mt("total_revenue")),isCurrency:!0}]:[])):"sms"===t?[{key:"email_sents",title:Object(O.__)("Sent","wp-marketing-automations"),icon:"sent",value:parseInt(mt("email_sents"))},{key:"email_click",title:Object(O.__)("Clicks","wp-marketing-automations"),icon:"click-rate",value:parseInt(mt("email_click"))}].concat(Ft(Object(o.fc)()?[{key:"total_orders",title:Object(O.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:parseInt(mt("total_orders"))},{key:"total_revenue",title:Object(O.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:it(mt("total_revenue")),isCurrency:!0}]:[])):"contact"===t?[{key:"active_contacts",title:Object(O.__)("Active Contacts","wp-marketing-automations"),icon:"add-contact-new",value:parseInt(mt("active_contacts"))},{key:"complete_contacts",title:Object(O.__)("Completed Contacts","wp-marketing-automations"),icon:"contact-new",value:parseInt(mt("complete_contacts"))}].concat(Ft(Object(o.fc)()?[{key:"conversions",title:Object(O.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:mt("conversions")},{key:"revenue",title:Object(O.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:it(mt("revenue")),isCurrency:!0},{key:"aov",title:Object(O.__)("AOV","wp-marketing-automations"),icon:"order-revenue",value:it(parseFloat(mt("aov"))),isCurrency:!0}]:[]),[{key:"unsubscribers",title:Object(O.__)("Unsubscribes","wp-marketing-automations"),icon:"unsubscribes",value:parseInt(mt("unsubscribers"))}]):void 0};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(r.createElement)(h.a,null),Object(r.createElement)("div",{className:"bwf-single-automation-body-header",style:{paddingBottom:"8px"}},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title2"},Object(O.__)("Analytics","wp-marketing-automations")),!Object(o.Sb)()&&o.e)),Object(r.createElement)(Lt.a,{tabs:ut,selected:u}),Object(r.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap bwf-table-with-border "},!o.Qb&&!Object(o.Sb)()&&Object(r.createElement)(It.a,{onPage:!0,modalContent:{proLink:Object(o.ab)("upgrade",{utm_medium:"Automation+Analytics+Upgrade+Modal"})}}),"split"!==u?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v,{query:d},o.Qb&&Object(r.createElement)(At.a,{title:Object(O.__)("Analytics","wp-marketing-analytics"),message:"contact"===u?Object(O.__)("Analyse the sample data to review Contact Analytics. Use this report to assess key metrics for contacts within the automation.","wp-marketing-automations"):Object(O.__)("Analyse the sample data to review Email Analytics. Use this report to assess key email metrics with the automation.","wp-marketing-automations"),proLink:Object(o.ab)("upgrade",{utm_medium:"Automation+Analytics+Sample+Data+Notice"})})),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(g,{query:d,type:u,automationId:n,metrics:function(t){return ft(t)}}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(C,{query:d,type:u,metrics:function(t){return ft(t)}}),function(){switch(u){case"email":return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(H,{query:d,automationId:n}));case"sms":return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Q,{query:d,automationId:n}));default:return Object(r.createElement)(r.Fragment,null)}}()):Object(o.Sb)()?Object(r.createElement)(xt,{automationId:n}):null))}}}]);