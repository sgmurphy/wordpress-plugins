(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1165:function(e,t,n){},1470:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n(271),r=n(107),c=n(143),i=n(1),s=n(2),o=n(54),u=n(3),b=n(8),m=n(333),p=(n(1165),function(e){var t=e.type,n=void 0===t?"optin":t,l=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(b.a,{icon:"optin"===n?"zero-carts":"zero-sales"})}},{type:"content",data:{class:"bwf-heading-1 bwf-pb-10",content:Object(i.__)("This contact has not gone through any Funnel.","wp-marketing-automations")}},{type:"content",data:{class:"bwf-heading-2 bwf-pb-gap",content:Object(i.__)("Your funnel will appear in the list once customers start purchasing the product","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(i.__)("Setup a Funnel","wp-marketing-automations"),proCheck:!1,onClick:function(){window.open(Object(u.pb)()+"/wp-admin/admin.php?page=bwf&path=/funnels/","_blank")}}]}}];return Object(a.createElement)(m.a,{data:l})}),f=Object(o.a)(Object(u.sb)()).formatAmount,d=function(e){var t=e.loading,n=void 0===t||t,l=r.a.getFunnels(),o=l&&"records"in l?l.records:[],b=[{key:"name",label:Object(i.__)("Funnel Name","wp-marketing-automations"),isLeftAligned:!0},{key:"checkout",label:Object(i.__)("Checkout","wp-marketing-automations"),isLeftAligned:!0},{key:"bump",label:Object(u.Sb)()?Object(i.__)("Order Bump","wp-marketing-automations"):Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(i.__)("Order Bump","wp-marketing-automations"),u.e),isLeftAligned:!0},{key:"upsell",label:Object(u.Sb)()?Object(i.__)("Upsell","wp-marketing-automations"):Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(i.__)("Upsell","wp-marketing-automations"),u.e),isLeftAligned:!0},{key:"total_revenue",label:Object(i.__)("Revenue","wp-marketing-automations"),isLeftAligned:!0}],m=o.map((function(e){return[{display:Object(s.isEmpty)(e.funnel_name)?"-":Object(a.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"admin.php?page=bwf&path=/funnels/"+e.funnel_id,rel:"noreferrer"},e.funnel_name),value:e.funnel_name},{display:Object(s.size)(e.checkout)?f(e.checkout):"-",value:""},{display:Object(s.size)(e.bump)&&Object(u.Sb)()?f(e.bump):"-",value:""},{display:Object(s.size)(e.upsell)&&Object(u.Sb)()?f(e.upsell):"-",value:""},{display:Object(s.size)(e.total_revenue)?(t=e.total_revenue,parseFloat(t)>0?Object(a.createElement)("div",{className:"bwf-tags bwf-tag-green"},f(t)):"-"):"-",value:""}];var t}));return Object(a.createElement)(a.Fragment,null,!Object(s.isEmpty)(m)||n?Object(a.createElement)(c.a,{className:"contact-funnel",title:"",hideHeader:"yes",rows:m,headers:b,rowsPerPage:1,totalRows:1,isLoading:n,rowHeader:!0,showMenu:!1,emptyMessage:Object(i.__)("No funnels found","wp-marketing-automations")}):Object(a.createElement)("div",{className:"bwf-empty-funnel-item"},Object(a.createElement)(p,{type:"funnel"})))},O=function(e){var t=e.loading,n=void 0===t||t,l=r.a.getFunnels(),o=l&&"optin"in l?l.optin:[],u=[{key:"funnel",label:Object(i.__)("Funnel Name","wp-marketing-automations"),isLeftAligned:!0},{key:"entry",label:Object(i.__)("Entry","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-word-break"}],b=o.map((function(e){return[{display:Object(s.isEmpty)(e.funnel_name)?"-":Object(a.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"admin.php?page=bwf&path=/funnels/"+e.funnel,rel:"noreferrer"},e.funnel_name),value:e.funnel_name},{display:m(e.entry),value:e.entry}]}));function m(e){var t=[];return Object(s.each)(JSON.parse(e),(function(e,n){var l=n.split("_");if(l.splice(0,1),!Object(s.isEmpty)(e)){for(var r=0;r<l.length;r++)l[r]=l[r].charAt(0).toUpperCase()+l[r].substring(1);var c=l.join(" ");t.push(Object(a.createElement)("li",{key:e.toString()},Object(a.createElement)("span",{style:{color:"#82838e"}},"".concat(Object(s.isEmpty)(c)?"-":c,":")),Object(a.createElement)("span",null," ".concat(e))))}})),Object(a.createElement)("ul",{className:"bwf-terms-inline"},t)}return Object(a.createElement)("div",{className:"bwf-c-s-list"},Object(a.createElement)("div",{className:"bwf-c-s-po-value"},!Object(s.isEmpty)(b)||n?Object(a.createElement)(c.a,{className:"contact-funnel",title:"",hideHeader:"yes",rows:b,headers:u,rowsPerPage:1,totalRows:1,isLoading:n,rowHeader:!0,showMenu:!1,emptyMessage:Object(i.__)("No optins data found","wp-marketing-automations")}):Object(a.createElement)("div",{className:"bwf-empty-funnel-item"},Object(a.createElement)(p,{type:"optin"})),Object(a.createElement)("div",{className:"bwf_clear_20"})))},g=n(5),j=n(168),w=n(29),y=n(13);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,l,r,c,i=[],s=!0,o=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=r.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){o=!0,l=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(o)throw l}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(e){var t=e.subtab,n=void 0===t?"sales":t,c=Object(l.a)(),s=r.a.getContact(),o=r.a.getFunnelContactId(),u=_(Object(a.useState)(""),2),b=u[0],m=u[1];Object(a.useEffect)((function(){m(n||"sales")}),[n]),Object(a.useEffect)((function(){s&&"id"in s&&parseInt(s.id)!==parseInt(o)&&c.fetchFunnel(parseInt(s.id))}),[s]);var p=r.a.getFunnelError(),f=r.a.getFunnelLoading(),h=r.a.getContactLoading();return p?Object(a.createElement)(w.a,null,"message"in p?p.message:p):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-funnel-buttons"},f||h?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(j.a,{h:30,w:56,br:8}),Object(a.createElement)(j.a,{h:30,w:56,br:8})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)(g.Button,{isSecondary:!b||"sales"===b,isTertiary:b&&"sales"!==b,onClick:function(){Object(y.k)({page:"autonami",path:"/contact/".concat(s.id,"/funnel/")},"/",{})},className:"bwf-btn-small "+(b&&"sales"!==b?"":"is-border is-blue-bg")},Object(i.__)("Sales","wp-marketing-automations")),Object(a.createElement)(g.Button,{isSecondary:"optin"===b,isTertiary:"optin"!==b,onClick:function(){Object(y.k)({page:"autonami",path:"/contact/".concat(s.id,"/funnel/optin")},"/",{})},className:"bwf-btn-small "+("optin"===b?"is-border is-blue-bg":"")},Object(i.__)("Optin","wp-marketing-automations")))),"sales"===b?Object(a.createElement)(d,{loading:f||h}):Object(a.createElement)(O,{loading:f||h}))}}}]);