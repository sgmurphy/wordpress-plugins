(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1032:function(t,e,n){"use strict";var a=n(0),o=n(944),i=n(9),c=n.n(i),r=n(4),u=n(66),s=n(1);function m(t,e,n,a,o,i,c){try{var r=t[i](c),u=r.value}catch(t){return void n(t)}r.done?e(u):Promise.resolve(u).then(a,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function c(t){m(i,a,o,c,r,"next",t)}function r(t){m(i,a,o,c,r,"throw",t)}c(void 0)}))}}e.a=function(t){var e=t.isOpen,n=t.tasks,i=t.onSuccess,m=t.onError,b=t.onRequestClose,p=t.actionType,f=t.screenType,g=Object(a.useContext)(r.h),O=n?n.length:0,d=Object(o.a)(function(){var t=l(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c()({path:Object(r.u)("/automation/bulk-action"),method:"POST",data:{action:p,a_cids:e,status:f}}).then((function(t){g(t.message),Object(r.wb)(g,2e3)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return d.reset()}),2500),i&&setTimeout((function(){return i()}),2e3)},onError:function(){m&&m()}}),j=function(){var t=l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.mutate(n.map((function(t){return t.ID})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w={delete:{title:Object(s._n)("Delete Automation for Contact","Delete Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to delete ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(" from this automation. This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Delete","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to delete automation for contacts","wp-marketing-automations"),confirmDescription:Object(s.__)("This action is irreversible","wp-marketing-automations")},end:{title:Object(s._n)("End Automation for Contact","End Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to end automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk action has been scheduled, it will be executed within one minute.","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to end automation for contacts","wp-marketing-automations")},paused:{title:Object(s._n)("Pause Automation for Contact","Pause Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to pause automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to pause automation for contacts","wp-marketing-automations")},run_now:{title:Object(s._n)("Run Automation for Contact","Run Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to run automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to run automation for contacts","wp-marketing-automations")},unpaused:{title:Object(s._n)("Resume Automation for Contact","Resume Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to resume automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to resume automation for contacts","wp-marketing-automations")},retry:{title:Object(s._n)("Retry Automation for Contact","Retry Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to retry automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to re-run automation for contacts","wp-marketing-automations")},rerun:{title:Object(s._n)("Re-Run Automation for Contact","Re-Run Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to re-run automation for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to re-run automation for contacts","wp-marketing-automations")},startbegin:{title:Object(s._n)("Start From Beginning Automation for Contact","Start From Beginning Automation for Contacts",O,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(s.__)("You are about to start automation from beginning for ","wp-marketing-automations"),Object(s._n)("contact","contacts",O,"wp-marketing-automations"),Object(s.__)(". Confirm to proceed.","wp-marketing-automations")),confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),successMsg:Object(s.__)("Bulk Action has been scheduled, it will be executed within one minute","wp-marketing-automations"),errorMsg:Object(s.__)("Unable to start automation from beginning for contacts","wp-marketing-automations")}};return Object(a.createElement)(u.a,{modalTitle:w.hasOwnProperty(p)&&w[p].hasOwnProperty("title")?w[p].title:Object(s._n)("Perform Actions","Perform Actions",O,"wp-marketing-automations"),deleteDescriptionText:w.hasOwnProperty(p)&&w[p].hasOwnProperty("description")?w[p].description:"",confirmButtonText:w.hasOwnProperty(p)&&w[p].hasOwnProperty("confirmBtn")?w[p].confirmBtn:Object(s.__)("Confirm","wp-marketing-automations"),cancelButtonText:w.hasOwnProperty(p)&&w[p].hasOwnProperty("cancelBtn")?w[p].cancelBtn:Object(s.__)("Cancel","wp-marketing-automations"),onConfirm:j,isLoading:d.isLoading,successMessage:d.isSuccess&&(w.hasOwnProperty(p)&&w[p].hasOwnProperty("successMsg")?w[p].successMsg:Object(s.__)("Actions Done!","wp-marketing-automations")),errorMessage:d.isError&&(d.error&&d.error.message?d.error.message:w.hasOwnProperty(p)&&w[p].hasOwnProperty("errorMsg")?w[p].errorMsg:Object(s.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!b&&b()},isOpen:e,confirmDescription:w.hasOwnProperty(p)&&w[p].hasOwnProperty("confirmDescription")?w[p].confirmDescription:"",isDelete:!0})}},1323:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n(1),i=n(119),c=n(969),r=n(954),u=n(4),s=n(49),m=n(33),l=n(304),b=n(949),p=n(74),f=n(57),g=n(58),O=n(18),d=n(8),j=n(3),w=n(5),_=n(995),y=n(945),h=n(9),k=n.n(h),v=n(66),C=n(120),E=n(302),A=n(122),P=n(306),T=n(41),R=n(176),S=n(1032),I=n(39),D=n(14),L=n(121);function B(t,e,n,a,o,i,c){try{var r=t[i](c),u=r.value}catch(t){return void n(t)}r.done?e(u):Promise.resolve(u).then(a,o)}function M(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function c(t){B(i,a,o,c,r,"next",t)}function r(t){B(i,a,o,c,r,"throw",t)}c(void 0)}))}}function N(){return(N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){J(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,o=!1,i=void 0;try{for(var c,r=t[Symbol.iterator]();!(a=(c=r.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return n}(t,e)||q(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){if(t){if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Y=function(t){var e=[];return"completed"!==t?(["active","delayed"].includes(t)&&(e.push({id:"run_now",icon:"play",hint:Object(o.__)("Run Now","wp-marketing-automations"),isPro:!0,featureTitle:Object(o.__)("Run Now Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Run+Now+Upgrade+Modal"})}),e.push({id:"paused",icon:"pause",hint:Object(o.__)("Pause Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(o.__)("Pause Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Pause+Upgrade+Modal"})})),"paused"===t&&e.push({id:"unpaused",icon:"play",hint:Object(o.__)("Resume Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(o.__)("Resume Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Resume+Upgrade+Modal"})}),"failed"===t&&(e.push({id:"retry",icon:"retry",hint:Object(o.__)("Retry Action","wp-marketing-automations"),isPro:!0,featureTitle:Object(o.__)("Retry Action","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Retry+Upgrade+Modal"})}),e.push({id:"startbegin",icon:"start-beginning",hint:Object(o.__)("Re-Enter Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(o.__)("Re-Enter Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Re+Enter+Upgrade+Modal"})})),"inactive"!==t&&e.push({id:"end",icon:"end-status",hint:Object(o.__)("End","wp-marketing-automations")})):e.push({id:"rerun",icon:"retry",hint:Object(o.__)("Restart Automation","wp-marketing-automations"),isPro:!0,featureTitle:Object(o.__)("Retry Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Bulk+Action+Restart+Upgrade+Modal"})}),e.push({id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}),e};e.default=function(t){var e=Object(a.useContext)(u.h),n=t.match.params,h=n.automationId,B=n.type,x=void 0===B?"active":B,J=F(Object(a.useState)({loading:!1,status:!1}),2),V=J[0],G=J[1],H=F(Object(a.useState)(""),2),W=H[0],z=H[1],Q=F(Object(a.useState)(""),2),$=Q[0],K=Q[1],X=F(Object(a.useState)(!1),2),Z=X[0],tt=X[1],et=F(Object(a.useState)({isFeature:!0}),2),nt=et[0],at=et[1],ot=F(Object(a.useState)({}),2),it=ot[0],ct=ot[1],rt=Object(r.a)(),ut=rt.getContactData(),st=rt.getContactAutomation(),mt=st.title,lt=void 0===mt?"":mt,bt=rt.getContactSingleAutomationFailedCount(),pt=Object(p.a)(),ft=pt.setL2NavAlign,gt=pt.setL2Title,Ot=pt.setPageCountData,dt=Object(C.a)(),jt=dt.getAutomationData,wt=dt.getAutomationId,_t=Object(E.a)().setAutomationData,yt=Object(c.a)(),ht=yt.fetchContacts,kt=yt.setContactValues,vt=F(Object(a.useState)([]),2),Ct=vt[0],Et=vt[1],At=F(Object(a.useState)(!1),2),Pt=At[0],Tt=At[1],Rt=F(Object(a.useState)(""),2),St=Rt[0],It=Rt[1],Dt=(0,Object(L.a)().getPageCountData)();Object(a.useEffect)((function(){qt||Ot(U(U({},Dt),{},{single_a_contacts:bt}))}),[bt]),Object(a.useEffect)((function(){Object(j.isEmpty)(st)||_t("data",st)}),[st]);var Lt=function(){Zt&&Zt(),Et([])},Bt=Object(a.useCallback)((function(t,e){Et(e),It(t),Tt(!0)}),[]);Object(a.useEffect)((function(){return Lt(),function(){kt("automation",{})}}),[]);var Mt=jt(),Nt=Mt.title,xt=void 0===Nt?"":Nt,Ut=Mt.status,Jt=void 0===Ut?"":Ut,Ft=wt();Object(b.a)("single_a_contacts","",!0,!1,null,h,!1,!0);var qt=rt.getContactLoading(),Vt=rt.getContactLimit(),Yt=rt.getContactOffset(),Gt=rt.getContactTotal(),Ht=rt.getContactCountData();Object(a.useEffect)((function(){ht(h,Vt,Yt,x,$)}),[Vt,Yt,x,$]),Object(a.useEffect)((function(){["active","inactive"].includes(x)&&""!==Jt&&Object(D.k)({page:"autonami",path:"/automation/".concat(h,"/contacts/").concat(1===parseInt(Jt)?"active":"inactive")},"/",{})}),[Jt]),Object(a.useEffect)((function(){ft("left"),Object(u.k)("Automation #"+h)}),[qt]),Object(a.useEffect)((function(){gt(parseInt(h)===parseInt(Ft)&&""!==xt&&""===lt?xt:""!==lt?lt:Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[xt,lt,h]);var Wt,zt=Object(a.useMemo)((function(){var t={};if(Array.isArray(ut)){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=q(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,r=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){r=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(r)throw i}}}}(ut);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.ID]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[ut]),Qt=Object(A.b)(zt),$t=Qt.singleSelectProps,Kt=Qt.selectAllProps,Xt=Qt.floatingBarProps,Zt=Qt.resetSelection,te=Qt.selected,ee=void 0===te?{}:te,ne=Object.keys(ee).filter((function(t){return ee[t]})).length,ae=[{key:"select_contact",label:Object(a.createElement)(T.a,N({type:"checkbox",checked:!1,onChange:function(){}},Kt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"contact",label:Object(o.__)("Contact","wp-marketing-automations"),required:!0,cellClassName:"bwf-crm-col-contact bwf-w-210 bwf-table-col-sticky bwf-sticky-left"},{key:"details",label:Object(o.__)("Details","wp-marketing-automations"),cellClassName:"bwf-crm-col-contact-details"},{key:"startedon ",label:Object(o.__)("Started On","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m"},{key:"last_run",label:Object(o.__)("Last Run","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-180"},"failed"===x&&{key:"error_msg",label:Object(o.__)("Reason","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-210 bwf-word-break",isLeftAligned:!0},"active"===x&&{key:"next_last_run",label:Object(o.__)("Next Run Time","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-120"},{key:"journey",label:Object(o.__)("Journey","wp-marketing-automations"),cellClassName:"bwf-crm-col-stats-m bwf-w-90 bwf-table-col-sticky bwf-sticky-right"}],oe=function(){var t=M(regeneratorRuntime.mark((function t(n){var a,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:{},o=i.length>2&&void 0!==i[2]?i[2]:0,G(U(U({},a),{},{status:!0})),t.prev=3,t.next=6,k()({path:Object(u.u)("/automation/".concat(h,"/delete-contact")),method:"DELETE",data:{trail_id:n,ac_id:o,type:x}}).then((function(t){if(200!==t.code)throw Error(Object(u.p)(null==t?void 0:t.message));G({status:!1}),e(t.message),ht(h,Vt,Yt,x,$)})).catch((function(t){throw Error(Object(u.p)(null==t?void 0:t.message))}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),G(U(U({},a),{},{status:!0,error:t.t0.message}));case 11:Object(u.wb)(e,3e3);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),ie=function(){var t=M(regeneratorRuntime.mark((function t(n,a,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e("Updating status..."),t.prev=1,t.next=4,k()({path:Object(u.u)("/automation/".concat(n,"/contact/status")),method:"POST",data:{to:o,from:a}}).then((function(t){200===t.code?(e(t.message),ht(h,Vt,Yt,x,$)):e(t.message)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e(t.t0.message);case 9:Object(u.wb)(e,3e3);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n,a){return t.apply(this,arguments)}}(),ce=rt.getContactPage(),re=function(t){t!==Vt&&(kt("limit",t),kt("offset",0))},ue=function(t){return Object(a.createElement)(m.a,{href:"admin.php?page=autonami&path=/contact/"+t.cid,type:"bwf-crm",className:"bwf-crm-campaign-contactData-contact-link bwf-a-no-underline",key:t.cid},Object(a.createElement)(l.a,{contact:t,date:t.date,dateText:Object(o.__)("Joined on","wp-marketing-automations")}))},se=function(t){var e=t.trail,n=void 0===e?"":e;return Object(j.isEmpty)(n)?"-":Object(a.createElement)(w.Button,{isSecondary:!0,className:"bwf-btn-small is-light bwf-btn-gray",onClick:function(){Object(u.Jb)()?(z(n),ct(t)):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Contact Journey","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contacts+Journey+Upgrade+Modal"})})),tt(!0))}},!Object(u.Jb)()&&Object(a.createElement)(d.a,{icon:"king",size:16}),Object(o.__)("View","wp-marketing-automations"))},me={1:Object(o.__)("Delay","wp-marketing-automations"),2:Object(o.__)("Action","wp-marketing-automations"),3:Object(o.__)("Goal","wp-marketing-automations"),4:Object(o.__)("Condition","wp-marketing-automations")},le=function(t){var e=t.data,n=void 0===e?{}:e;if(Object(j.isEmpty)(n))return Object(a.createElement)(a.Fragment,null);var o=n.action,i=void 0===o?"":o,c=n.run_time,r=void 0===c?"":c,s=n.type,m=void 0===s?"":s;return Object(a.createElement)("div",{className:"bwf-c-contact-details-cell"},!Object(j.isEmpty)(m)&&!Object(j.isEmpty)(i)&&me.hasOwnProperty(parseInt(m))&&Object(a.createElement)(O.a,{justify:"justify",align:"top"},Object(a.createElement)(O.c,null,Object(a.createElement)("span",{className:"bwf_bold"},me[parseInt(m)]),Object(j.isEmpty)(i)?"":" : "+i)),!Object(j.isEmpty)(r)&&Object(a.createElement)(O.a,{justify:"justify",align:"top"},Object(a.createElement)(O.c,null,Object(u.W)(r))),(Object(j.isEmpty)(m)||!me.hasOwnProperty(parseInt(m)))&&Object(j.isEmpty)(r)&&Object(a.createElement)("span",null,"-"))},be=function(t){var e=t.data,n=void 0===e?{}:e;return!(!n.hasOwnProperty("type")||3!==parseInt(n.type))},pe=[{slug:1===parseInt(Jt)?"active":"inactive",name:1===parseInt(Jt)?Object(o.__)("Active","wp-marketing-automations"):Object(o.__)("Inactive","wp-marketing-automations"),path:"/automation/".concat(h,"/contacts/").concat(1===parseInt(Jt)?"active":"inactive")},{slug:"failed",name:Object(o.__)("Failed","wp-marketing-automations"),path:"/automation/".concat(h,"/contacts/failed")},{slug:"completed",name:Object(o.__)("Completed","wp-marketing-automations"),path:"/automation/".concat(h,"/contacts/completed")},{slug:"paused",name:Object(o.__)("Paused","wp-marketing-automations"),path:"/automation/".concat(h,"/contacts/paused")}];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(a.createElement)(s.a,null),Object(a.createElement)("div",{className:"bwf-single-automation-body-header",style:{paddingBottom:"8px"}},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title2"},Object(o.__)("Contacts","wp-marketing-automations")),parseInt(Gt)>0&&Object(a.createElement)("div",{className:"bwf-content-header-count"},Object(o.sprintf)(Object(o.__)("(%s Results)","wp-marketing-automations"),Gt)))),Object(a.createElement)(P.a,{tabs:pe,selected:x,count:Ht}),Object(a.createElement)(i.a,{className:"bwf-crm-automation-contact has-search",rows:ut.map((function(t){var e,n,i,c,r,s,m,l,b,p=[];return p.push({display:$t.hasOwnProperty(t.ID)?Object(a.createElement)(T.a,N({type:"checkbox",checked:!1,onChange:function(){}},$t[t.ID])):Object(a.createElement)(a.Fragment,null),value:null},{display:(n=t,i=n.status,c=void 0===i?"":i,r=n.trail,s=void 0===r?"":r,m=n.ID,l=n.aid,b=void 0===l?"":l,Object(a.createElement)(f.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var e=t.onToggle;return Object(a.createElement)(a.Fragment,null,[1,4,6].includes(parseInt(c))&&"inactive"!==x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(u.Jb)()?ie(m,c,"now"):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Run Now Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Run+Now+Upgrade+Modal"})})),tt(!0)),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Run Now","wp-marketing-automations")),!Object(u.Jb)()&&Object(a.createElement)(O.c,null,u.e))),[1,4,6].includes(parseInt(c))&&"inactive"!==x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(u.Jb)()?ie(m,c,3):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Pause Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Pause+Upgrade+Modal"})})),tt(!0)),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Pause Automation","wp-marketing-automations")),!Object(u.Jb)()&&Object(a.createElement)(O.c,null,u.e))),3===parseInt(c)&&"inactive"!==x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(u.Jb)()?ie(m,c,1):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Resume Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Resume+Upgrade+Modal"})})),tt(!0)),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Resume Automation","wp-marketing-automations")),!Object(u.Jb)()&&Object(a.createElement)(O.c,null,u.e))),2===parseInt(c)&&"inactive"!==x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(u.Jb)()?ie(m,c,1):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Retry Action","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Retry+Action+Upgrade+Modal"})})),tt(!0)),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Retry Action","wp-marketing-automations")),!Object(u.Jb)()&&Object(a.createElement)(O.c,null,u.e))),[2].includes(parseInt(c))&&"inactive"!==x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(u.Jb)()?ie(m,c,"startbegin"):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Re-Enter Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Re+Automation+Upgrade+Modal"})})),tt(!0)),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Re-Enter Automation","wp-marketing-automations")),!Object(u.Jb)()&&Object(a.createElement)(O.c,null,u.e))),!Object(j.isEmpty)(c)&&"inactive"!==x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){ie(m,c,"end"),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("End Automation","wp-marketing-automations")))),"completed"===x&&Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(u.Jb)()?ie(m,c,"re_run"):(at(U(U({},nt),{},{featureTitle:Object(o.__)("Restart Automation","wp-marketing-automations"),proLink:Object(u.T)("upgrade",{utm_medium:"Automation+Contact+Activity+Restart+Upgrade+Modal"})})),tt(!0)),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Restart Automation","wp-marketing-automations")),!Object(u.Jb)()&&Object(a.createElement)(O.c,null,u.e))),Object(a.createElement)(g.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(a.createElement)(a.Fragment,null,Object(a.createElement)("span",{style:{fontWeight:"normal"}},Object(o.__)("contact ")),n.f_name," ",n.l_name),buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),modalTitle:Object(o.__)("Delete Contact","wp-marketing-automations"),aid:b};G(U(U({},t),{},{onConfirm:function(){return oe(s,t,m)}})),e()}},Object(a.createElement)(O.a,{justify:"space-between"},Object(a.createElement)(O.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:ue(t),value:t.hasOwnProperty("contact_name")?t.contact_name:"-"},{display:(e=t,Object(a.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(a.createElement)(O.a,{justify:"justify",align:"top"},Object(a.createElement)(O.c,null,e.email)),e.contact_no&&Object(a.createElement)(O.a,{justify:"justify",align:"top"},Object(a.createElement)(O.c,null,e.contact_no)),!e.email&&!e.contact_no&&"-")),value:""},{display:t.hasOwnProperty("c_date")?Object(u.W)(t.c_date):"-",value:t.hasOwnProperty("c_date")?t.c_date:"-"}),"active"===x&&p.push({display:le(t),value:""}),p.push({display:t.hasOwnProperty("e_time")&&!be(t)?Object(u.W)(t.e_time):"-",value:"-"}),"failed"===x&&p.push({display:t.hasOwnProperty("error_msg")&&!Object(j.isEmpty)(t.error_msg)?t.error_msg:"-",value:""}),p.push({display:se(t),value:"-"}),p})),headers:ae.filter((function(t){return!!t})),query:{paged:ce},rowsPerPage:Vt,totalRows:Gt,isLoading:qt,onPageChange:function(t){kt("offset",(t-1)*Vt)},onQueryChange:function(t){return"per_page"!==t?function(){}:re},rowHeader:!0,showMenu:!1,emptyMessage:Object(o.__)("No contacts found","wp-marketing-automations"),actions:ne>0?[Object(a.createElement)(A.a,N({key:"list-bulk-action",actions:Y(x),onAction:Bt,inLine:!0,reset:Lt},Xt))]:[Object(a.createElement)(R.a,{key:"search",isLoading:qt,searchTerm:$,showResultCount:!1,setSearchData:function(t){Object(j.size)(t)?K(t):K("")}})]}),Object(u.Jb)()&&!Object(j.isEmpty)(W)&&Object(a.createElement)(w.Modal,{title:"",className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-fullsc-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-stretch-header-single"},Object(a.createElement)("div",{className:"bwf-modal-heading"},(Wt="-",Object(j.isEmpty)(it)||(Wt=Object(j.isEmpty)(it.f_name)&&Object(j.isEmpty)(it.l_name)?it.email:it.f_name+" "+it.l_name),Wt)," ",Object(a.createElement)("span",{className:"bwf-tags bwf-tag-light-blue"},Object(o.__)("Customer Journey","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-display-flex gap-24"},Object(a.createElement)(w.Button,{isSecondary:!0,className:"bwf-btn-small is-light bwf-btn-gray",onClick:function(){Object(D.k)({page:"autonami",path:"/automation/"+it.aid},"/",{})}},Object(o.__)("View Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:function(){z(""),ct({})},className:"bwf-modal-close"},Object(a.createElement)(d.a,{icon:"close",color:"#353030"})))),Object(a.createElement)(y.e,null,Object(a.createElement)(_.a,{customerData:{trail:W},isConatctTab:!0,automatonID:h,hasHeader:!0}))),Object(a.createElement)(v.a,{modalTitle:V.modalTitle,content:V.content,deleteEntityName:V.deleteEntityName,confirmText:V.confirmText,confirmButtonText:V.buttonConfirm,cancelButtonText:V.buttonCancel,onConfirm:V.onConfirm,isLoading:V.loading,successMessage:V.success,errorMessage:V.error,onRequestClose:function(){return G({status:!1})},isOpen:V.status,isDelete:!0}),!Object(u.Jb)()&&Object(a.createElement)(I.b,{isOpen:Z,onRequestClose:function(){return tt(!1)},modalContent:nt}),Object(a.createElement)(S.a,{tasks:Ct,isOpen:Pt,onSuccess:function(){ht(h,Vt,Yt,x,$),Lt()},onError:Lt,onRequestClose:function(){return Tt(!1)},screenType:"automation-contact",screenTypeId:x,actionType:St}))}},949:function(t,e,n){"use strict";var a=n(74),o=n(0),i=n(1),c=n(4),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(i.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t),redirect:!e}};return e&&(n.single_a_contacts={name:Object(i.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),showOnClick:!0},n.analytics={name:Object(i.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(i.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isPro:!0,showOnClick:!0},Object(c.Tb)()&&(n.orders={name:Object(i.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isPro:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},f=(p.automation_nav,p.automationv2_nav),g=Object(a.a)(),O=g.setActiveMultiple,d=g.resetHeaderMenu,j=g.setL2NavType,w=g.setL2Nav,_=g.setBackLink,y=g.setL2Title,h=g.setL2Content,k=g.setBackLinkLabel,v=g.setL2NavAlign,C=g.setPageHeader,E=g.setTabHeader;return Object(o.useEffect)((function(){d(!0),!c&&j("menu");var a=r(s,l);b||w(s?a:f),t&&a.hasOwnProperty(t)&&a[t].hasOwnProperty("name")&&E(a[t].name),O({leftNav:"automations-v2",rightNav:t}),n&&_(n),s&&_(n&&!l?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),c||l&&s&&k(Object(i.__)("All Automations","wp-marketing-automations")),!l&&s&&k(Object(i.__)("All Automations","wp-marketing-automations")),s&&v("left"),e&&""!==e&&y(e),!n&&u&&h(u),C(Object(i.__)("Automations","wp-marketing-automations")),m&&w({})}),[t,l,b]),!0}},954:function(t,e,n){"use strict";var a=n(52),o=n(124);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}e.a=function(){var t=Object(a.a)("automationList"),e=t.getStateProp,n=u(t,["getStateProp"]),i=Object(a.a)(o.a.recipient).getStateProp,r=Object(a.a)(o.a.conversion).getStateProp,s=Object(a.a)(o.a.contacts).getStateProp,m=Object(a.a)(o.a.analytics).getStateProp;return c(c({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return i("data")},getRecipientLoading:function(){return i("isLoading")},getRecipientOffset:function(){return i("offset")},getRecipientAutomationId:function(){return i("automationId")},getRecipientTotal:function(){return i("total")},getRecipientAutomation:function(){return i("automation")},getRecipientPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getRecipientLimit:function(){return i("limit")},getRecipientSingleAutomationFailedCount:function(){return i("failedCount")},getConversionData:function(){return r("data")},getConversionLoading:function(){return r("isLoading")},getConversionOffset:function(){return r("offset")},getConversionAutomationId:function(){return r("automationId")},getConversionTotal:function(){return r("total")},getConversionAutomation:function(){return r("automation")},getConversionPage:function(){return parseInt(r("offset"))/parseInt(r("limit"))+1},getConversionLimit:function(){return r("limit")},getCountData:function(){return e("countData")},getConversionSingleAutomationFailedCount:function(){return r("failedCount")},getContactData:function(){return s("data")},getContactLoading:function(){return s("isLoading")},getContactOffset:function(){return s("offset")},getContactAutomationId:function(){return s("automationId")},getContactTotal:function(){return s("total")},getContactAutomation:function(){return s("automation")},getContactPage:function(){return parseInt(s("offset"))/parseInt(s("limit"))+1},getContactLimit:function(){return s("limit")},getContactCountData:function(){return s("contactCount")},getContactSingleAutomationFailedCount:function(){return s("failedCount")},getAnalyticsData:function(){return m("analytics")},getAnalyticsTileData:function(){return m("tiles")},getAnalyticsTableData:function(){return m("tableData")},getAnalyticsLoading:function(){return m("isLoading")},getAnalyticsType:function(){return m("type")},getAnalyticsAutomationData:function(){return m("automation")},getAnalyticsSingleAutomationFailedCount:function(){return m("failedCount")}})}},969:function(t,e,n){"use strict";var a=n(51),o=n(4),i=n(124),c=n(20);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}e.a=function(){var t=Object(a.a)("automationList"),e=t.fetch,n=t.setStateProp,r=m(t,["fetch","setStateProp"]),s=Object(a.a)(i.a.recipient),l=s.fetch,b=s.setStateProp,p=Object(a.a)(i.a.conversion),f=p.fetch,g=p.setStateProp,O=Object(a.a)(i.a.contacts),d=O.fetch,j=O.setStateProp,w=Object(a.a)(i.a.analytics),_=w.fetch,y=w.setStateProp;return u(u({},r),{},{fetch:function(t,a,i,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var u=a.s,s=void 0===u?"":u,l=(a.page,a.filter,a.path,m(a,["s","page","filter","path"])),b={offset:i,limit:c,status:t,search:s,filters:l,version:r?2:1};e("GET",Object(o.u)("/automations"),b)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){l("GET",Object(o.u)("/v3/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){b(t,e)},fetchConversion:function(t,e,n){g("automation",{}),f("GET",Object(o.u)("/v3/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){g(t,e)},fetchContacts:function(t,e,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";j("automation",{}),d("GET",Object(o.u)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(i)))},setContactValues:function(t,e){j(t,e)},fetchAnalytics:function(t,e,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=0;4===parseInt(r)&&(u=1),_("GET",Object(o.u)("/analytics/emails/chart/")+"?"+Object(c.stringify)({after:e,before:n,interval:a,oid:t,type:i,mode:r,contact:u}))},setAnalyticsValues:function(t,e){y(t,e)}})}}}]);