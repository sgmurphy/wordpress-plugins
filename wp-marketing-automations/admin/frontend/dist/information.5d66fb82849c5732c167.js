(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1108:function(e,t,n){},1332:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),c=n.n(a),o=n(1),i=n(246),l=n(94),s=n(981),u=n(125),m=n(345),b=n(4),f=n(5),d=n(41),p=n(3),O=n(53),y=n(8),j=n(45),v=n.n(j),w=n(75);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.index,n=e.label,a=e.value,c=e.type,i=e.options,l=e.onChange,s=e.placeholder,u=e.fieldSaving,m=void 0===u?"":u,j=Object(r.useRef)(),g=Object(o.__)("Click to Edit","wp-marketing-automations"),E=h(Object(r.useState)(a),2),k=E[0],_=E[1],S=h(Object(r.useState)(!1),2),N=S[0],C=S[1],P=Object(b.ob)();Object(b.lc)(j,(function(){return C(!1)}));var A=function(e,t){var n=!1;try{e&&JSON.parse(e).includes(t)&&(n=!0)}catch(e){}return n};return Object(r.createElement)("div",{className:"bwf-c-s-list"},Object(r.createElement)("div",{className:"bwf-c-s-label"},n||t),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("span",{className:"bwf-editable-span",title:g,onClick:function(e){C(!0)}},N&&Object(r.createElement)(O.a,{ref:j,focusOnMount:!0,onFocusOutside:function(e){C(!1)}},Object(r.createElement)("div",{className:"bwf-form-fields bwf-field-edit-popover bwf-s-c-field-t-".concat(parseInt(c))},Object(r.createElement)("div",{className:"bwf-form-header"},n),[4,5,6].includes(parseInt(c))&&Object(p.isEmpty)(i)?Object(o.__)("Add Options to select here","wp-marketing-automations"):Object(r.createElement)(r.Fragment,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";switch(e){case 1:return Object(r.createElement)(f.TextControl,{value:n,className:"bwf-pop-input-field",placeholder:c||Object(o.__)("Type here","wp-marketing-automations"),onChange:function(e){_(e)},maxLength:99,onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))},help:Object(o.__)("Max 99 characters","wp-marketing-automations")});case 2:return Object(r.createElement)(f.TextControl,{type:"number",value:n,className:"bwf-pop-input-field",placeholder:c||Object(o.__)("Type here","wp-marketing-automations"),onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))},onChange:function(e){parseInt(e)>=-9999999999&&parseInt(e)<=9999999999&&_(e)},max:9999999999,help:Object(o.__)("Max 9999999999","wp-marketing-automations")});case 3:return Object(r.createElement)(f.TextareaControl,{value:n,onChange:function(e){_(e)}});case 4:var i=[{key:"",label:Object(o.__)("Select Option","wp-marketing-automations")}];return a.map((function(e){i.push({key:e,label:e})})),Object(r.createElement)(w.b,{onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))},onChange:function(e){_(e)},options:i,selected:n,key:"s-c-dynamic-field-select"});case 5:var s=[];return a.map((function(e){s.push({value:e,label:e})})),Object(r.createElement)("div",{onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))}},Object(r.createElement)(f.RadioControl,{label:Object(o.__)("Select an Option","wp-marketing-automations"),selected:n,options:s,onChange:function(e){_(e)}}));case 6:return Object(r.createElement)("div",{className:"bwf-display-flex-column gap-8"},a.map((function(e,a){return Object(r.createElement)(d.a,{key:a,label:e,checked:A(n,e),onChange:function(t){var r=[];try{r=n?JSON.parse(n):[],t?r.push(e):r=r.filter((function(t){return t!==e})),_(JSON.stringify(r))}catch(t){r.push(e),_(JSON.stringify(r))}},onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))}})})));case 7:return Object(r.createElement)("input",{type:"date",value:n,style:{width:"100%"},onChange:function(e){_(e.target.value)},onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))}});case 9:var u=[{key:"",label:Object(o.__)("Select timezone","wp-marketing-automations")}];return Object.entries(P).map((function(e){var t=h(e,2),n=t[0],r=t[1];u.push({key:n,label:r})})),Object(r.createElement)(w.b,{onKeyPress:function(e){"Enter"==e.key&&(l(t,n),C(!1))},onChange:function(e){_(e)},options:u,selected:n,key:"s-c-dynamic-field-select"})}}(parseInt(c),k,i,s),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(f.Button,{className:"bwf-modal-cancel-btn",onClick:function(e){e.stopPropagation(),C(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(f.Button,{isPrimary:!0,className:"bwf-pop-button bwf-no-rippple",onClick:function(e){e.stopPropagation(),l(t,k),C(!1)}},Object(o.__)("Update","wp-marketing-automations")))))),function(){if(m==t)return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"});var e=Object(r.createElement)("div",{className:"bwf-info-empty-value"},Object(r.createElement)(y.a,{icon:"circle-plus",size:14}),Object(r.createElement)("span",null,Object(o.__)("Add","wp-marketing-automations")));if(Object(p.isEmpty)(a))return e;if(6===c)try{var n=JSON.parse(a);Object(p.isEmpty)(n)||(e=n.sort().join(", "))}catch(e){}else e=a;if(9===c&&P.hasOwnProperty(a)&&(e=P[a]),7===c)try{e=Object(b.V)(a,!1,!1)}catch(e){}if(8===c)try{e=a&&!["","0000-00-00 00:00:00"].includes(a)?v()(a).format("YYYY-MM-DD HH:mm:ss"):"-"}catch(e){}return Object(r.createElement)("div",{className:"bwf-non-empty-sc"},Object(r.createElement)("span",{className:"bwf-s-c-f-value"},e),!N&&Object(r.createElement)(y.a,{icon:"edit",color:"#fff",size:16}))}())))},k=n(60),_=n(16),S=n(25),N=n(136),C=n(31);function P(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){A(c,r,a,o,i,"next",e)}function i(e){A(c,r,a,o,i,"throw",e)}o(void 0)}))}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=Object(r.useContext)(b.h),n=e.contactId,a=e.lists,i=e.saveList,l=I(Object(r.useState)(a),2),s=l[0],u=l[1],m=I(Object(r.useState)(!1),2),d=m[0],O=m[1],j=I(Object(r.useState)(!1),2),v=j[0],w=j[1],h=I(Object(r.useState)([]),2),g=h[0],E=h[1],A=I(Object(r.useState)(""),2),T=A[0],D=A[1],F=function(){var e=x(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c()({path:Object(b.u)("/v3/contacts/".concat(n,"/lists")),method:"DELETE",data:{lists:[parseInt(r.ID)]}}).then((function(e){200==e.code?(t(e.message),u(s.filter((function(e){return e.ID!=r.ID}))),i("lists",s.filter((function(e){return e.ID!=r.ID})))):t(e.message),Object(b.wb)(t,3e3)}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),t(e.t0.message),Object(b.wb)(t,3e3);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=x(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),a=r.map((function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("name")&&(t.value=e.name),t})),e.prev=2,e.next=5,c()({path:Object(b.u)("/v3/contacts/".concat(n,"/lists")),method:"POST",data:{lists:a},headers:{"Content-Type":"application/json"}}).then(function(){var e=x(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.message),Object(p.isEmpty)(n.result)||(r=n.result.list_added.map((function(e){return e})),a=[].concat(P(s),P(r)),a=Object(p.uniqBy)(a,"ID"),u(a),i("lists",a)),E([]),O(!1),w(!1),Object(b.wb)(t,3e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw Error(Object(b.p)(null==e?void 0:e.message))}));case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(2),D(e.t0.message),w(!1),u(r);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),M=g&&g.map((function(e){return{key:e.id,label:e.name}})),B=function(){0===g.length?D(Object(o.__)("Please select a list.","wp-marketing-automations")):(D(""),R(g))};return Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(o.__)("Lists","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-sc-tag-value"},s&&s.map((function(e,t){return Object(r.createElement)(k.a,{key:t,label:e.name,id:e.id,screenReaderLabel:e.name,remove:function(){return F(e)}})})),Object(r.createElement)("span",{className:"bwf-tag bwf-c-s-tag-add bwf-cursor-pointer",onClick:function(){return O(!0)}},Object(r.createElement)(y.a,{icon:"circle-plus",size:14})," ",Object(r.createElement)("span",null,Object(o.__)("Add","wp-marketing-automations")))),d&&Object(r.createElement)(f.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-overflow-visible bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Lists","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return O(!1)},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),T&&Object(r.createElement)(C.a,{status:"error",onRemove:function(){return D("")}},T),Object(r.createElement)("div",{onKeyPress:function(e){"Enter"==e.key&&B()}},Object(r.createElement)("div",{style:v?{pointerEvents:"none"}:{}},Object(r.createElement)(S.a,{autocompleter:N.a,multiple:!0,allowFreeTextSearch:!0,inlineTags:!1,selected:M,onChange:function(e){e=e.map((function(e){return e.hasOwnProperty("key")&&(e.id=e.key,delete e.key),e.hasOwnProperty("label")&&(e.name=e.label,delete e.label),e})),E(e)},onRemoveTag:function(e){E(g.filter((function(t){return t.id!==e})))},placeholder:Object(o.__)("Search by list name","wp-marketing-automations"),bwfEnableEmptySearch:!0,showClearButton:!1,disabled:!1})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",disabled:v,onClick:function(){O(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,isBusy:v,disabled:v,onClick:function(){B()},className:"bwf-ml-0"},Object(o.__)("Add","wp-marketing-automations")))))))};F.defaultProps={contactId:0,lists:[]};var R=F,M=n(102);function B(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){L(c,r,a,o,i,"next",e)}function i(e){L(c,r,a,o,i,"throw",e)}o(void 0)}))}}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=Object(r.useContext)(b.h),n=e.contactId,a=e.tags,i=e.saveTags,l=G(Object(r.useState)(a),2),s=l[0],u=l[1],m=G(Object(r.useState)(!1),2),d=m[0],O=m[1],j=G(Object(r.useState)([]),2),v=j[0],w=j[1],h=G(Object(r.useState)(!1),2),g=h[0],E=h[1],N=G(Object(r.useState)(""),2),P=N[0],A=N[1],x=function(){var e=z(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c()({path:Object(b.u)("/v3/contacts/".concat(n,"/tags")),method:"DELETE",data:{tags:[parseInt(r.ID)]}}).then((function(e){t(e.message),u(s.filter((function(e){return e.ID!=r.ID}))),i("tags",s.filter((function(e){return e.ID!=r.ID}))),Object(b.wb)(t,3e3)}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),t(e.t0.message),Object(b.wb)(t,3e3);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=z(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),a=r.map((function(e){var t={};return e.hasOwnProperty("id")&&(t.id=e.id),e.hasOwnProperty("name")&&(t.value=e.name),t})),e.prev=2,e.next=5,c()({path:Object(b.u)("/v3/contacts/".concat(n,"/tags")),method:"POST",data:{tags:a},headers:{"Content-Type":"application/json"}}).then(function(){var e=z(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.message),Object(p.isEmpty)(n.result)||(r=n.result.tags_added.map((function(e){return e})),a=[].concat(B(s),B(r)),a=Object(p.uniqBy)(a,"ID"),u(a),i("tags",a)),O(!1),w([]),E(!1),Object(b.wb)(t,3e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw Error(Object(b.p)(null==e?void 0:e.message))}));case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(2),A(e.t0.message),E(!1),u(r);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),T=v&&v.map((function(e){return{key:e.id,label:e.name}})),D=function(){0==v.length?A(Object(o.__)("Please select a tag.","wp-marketing-automations")):(A(""),I(v))};return Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(o.__)("Tags","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-sc-tag-value"},s&&s.map((function(e,t){return Object(r.createElement)(k.a,{key:t,label:e.name,id:e.id,screenReaderLabel:e.name,remove:function(){return x(e)}})})),Object(r.createElement)("span",{className:"bwf-tag bwf-c-s-tag-add bwf-cursor-pointer",onClick:function(){return O(!0)}},Object(r.createElement)(y.a,{icon:"circle-plus",size:14})," ",Object(r.createElement)("span",null,Object(o.__)("Add","wp-marketing-automations")))),d&&Object(r.createElement)(f.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-overflow-visible bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return O(!1)},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),P&&Object(r.createElement)(C.a,{status:"error",onRemove:function(){return A("")}},P),Object(r.createElement)("div",{onKeyPress:function(e){"Enter"==e.key&&D()}},Object(r.createElement)("div",{style:g?{pointerEvents:"none"}:{}},Object(r.createElement)(S.a,{autocompleter:M.a,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:T,onChange:function(e){e=e.map((function(e){return e.hasOwnProperty("key")&&(e.id=e.key,delete e.key),e.hasOwnProperty("label")&&(e.name=e.label,delete e.label),e})),w(e)},onRemoveTag:function(e){w(v.filter((function(t){return t.id!==e})))},placeholder:Object(o.__)("Search by tag name","wp-marketing-automations"),bwfEnableEmptySearch:!0,showClearButton:!1,disabled:!1})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",disabled:g,onClick:function(){O(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,isBusy:g,disabled:g,onClick:function(){D()},className:"bwf-ml-0"},Object(o.__)("Add","wp-marketing-automations")))))))};$.defaultProps={contactId:0,tags:[]};var J=$;function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){var t=e.links,n=q(Object(r.useState)(t),1)[0];return Object(r.createElement)("div",{className:"bwf-c-s-list bwf-c-s-tags-ui"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(o.__)("Link Triggers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-sc-tag-value"},Object(p.isEmpty)(n)?"-":n.map((function(e){return Object(r.createElement)(k.a,{key:e.ID,label:e.title,id:e.ID,screenReaderLabel:e.title})})))))};Y.defaultProps={contactId:0,links:[]};var H=Y,Q=n(310);function Z(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=function(e){var t=e.meta,n=void 0===t?{}:t,a=e.onChange,c=e.contact,i=void 0===c?{}:c,l=e.fieldSaving,u=void 0===l?"":l,m=Object(s.a)().getFieldBySlug,d={addressOne:m("address-1"),addressTwo:m("address-2"),pinCode:m("postcode"),city:m("city")},j=X(Object(r.useState)(""),2),v=j[0],w=j[1],h=X(Object(r.useState)(""),2),g=h[0],E=h[1],k=X(Object(r.useState)(""),2),_=k[0],S=k[1],N=X(Object(r.useState)(""),2),C=N[0],P=N[1],A=X(Object(r.useState)(""),2),x=A[0],I=A[1],T=X(Object(r.useState)(""),2),D=T[0],F=T[1],R=X(Object(r.useState)(!1),2),M=R[0],B=R[1],L=Object(b.t)();Object(r.useEffect)((function(){w(n[d.addressOne]),E(n[d.addressTwo]),S(n[d.pinCode]),P(n[d.city]),I(i.state),F(i.country)}),[M]);var z=Object(o.__)("Click to Edit","wp-marketing-automations"),G=Object.entries(Q).map((function(e){var t=X(e,2),n=t[0];return{label:t[1],value:n}}));return Object(r.createElement)("div",{className:"bwf-c-s-list"},Object(r.createElement)("div",{className:"bwf-c-s-label"},Object(o.__)("Address","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-s-value"},Object(r.createElement)("div",{className:"bwf-editable-span",title:z,onClick:function(){return B(!0)}},Object(r.createElement)("div",{className:"bwf-non-empty-sc"},function(){if("address"===u)return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"});var e=[];return L.map((function(t){var r=function(e){var t="";switch(e){case"address-1":d.hasOwnProperty("addressOne")&&n.hasOwnProperty(d.addressOne)&&""!==n[d.addressOne]&&(t=n[d.addressOne]);break;case"address-2":d.hasOwnProperty("addressTwo")&&n.hasOwnProperty(d.addressTwo)&&""!==n[d.addressTwo]&&(t=n[d.addressTwo]);break;case"postcode":d.hasOwnProperty("pinCode")&&n.hasOwnProperty(d.pinCode)&&""!==n[d.pinCode]&&(t=n[d.pinCode]);break;case"city":d.hasOwnProperty("city")&&n.hasOwnProperty(d.city)&&""!==n[d.city]&&(t=n[d.city]);break;case"country":""!==(t=i.hasOwnProperty("country")?i.country:"")&&Q.hasOwnProperty(t)&&(t=Q[i.country]);break;case"state":i.hasOwnProperty("state")&&""!==i.state&&(t=i.state)}return t}(t);""!==r&&e.push(r)})),e=Object(p.isEmpty)(e)?Object(o.__)("Click to enter Address","wp-marketing-automations"):e.filter((function(e){return!!e})).join(", "),Object(r.createElement)(r.Fragment,null,e)}(),!M&&Object(r.createElement)(y.a,{icon:"edit",color:"#fff",size:16}))),Object(r.createElement)("div",{className:"bwf-editable-span bwf-w-30 bwf-h-0",style:{display:"block",position:"relative"}},M&&Object(r.createElement)(O.a,{className:"bwf-address-field",onFocusOutside:function(){B(!1)},placement:"bottom-end",shift:!0},Object(r.createElement)("div",{className:"bwf-form-fields bwf-field-edit-popover"},Object(r.createElement)("div",{className:"bwf-form-header"},Object(o.__)("Address","wp-marketing-automations")),Object(r.createElement)(f.TextControl,{type:"text",key:"1",value:v,className:"bwf-pop-input-field",placeholder:Object(o.__)("Enter Address 1","wp-marketing-automations"),onChange:function(e){w(e)}}),Object(r.createElement)(f.TextControl,{type:"text",key:"2",value:g,className:"bwf-pop-input-field",placeholder:Object(o.__)("Enter Address 2","wp-marketing-automations"),onChange:function(e){E(e)}}),Object(r.createElement)(f.TextControl,{type:"text",key:"3",value:_,className:"bwf-pop-input-field",placeholder:Object(o.__)("Postal/ Zip Code","wp-marketing-automations"),onChange:function(e){S(e)}}),Object(r.createElement)(f.TextControl,{type:"text",key:"4",value:C,className:"bwf-pop-input-field",placeholder:Object(o.__)("Enter City","wp-marketing-automations"),onChange:function(e){P(e)}}),Object(r.createElement)(f.SelectControl,{value:D,className:"bwf-c-s-width-full bwf-pop-input-field",options:[{label:Object(o.__)("Select country","wp-marketing-automations"),value:""}].concat(Z(G)),onChange:function(e){F(e)}}),Object(r.createElement)(f.TextControl,{type:"text",key:"5",value:x,className:"bwf-pop-input-field",placeholder:Object(o.__)("Enter State","wp-marketing-automations"),onChange:function(e){I(e)}}),Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(f.Button,{key:"cancel",className:"bwf-modal-cancel-btn",onClick:function(e){e.stopPropagation(),B(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(f.Button,{key:"save",isPrimary:!0,className:"bwf-pop-button",onClick:function(e){var t;e.stopPropagation(),W(t={},d.addressOne,Object(p.isEmpty)(v)?"":v.trim()),W(t,d.addressTwo,Object(p.isEmpty)(g)?"":g.trim()),W(t,d.pinCode,Object(p.isEmpty)(_)?"":_.trim()),W(t,d.city,Object(p.isEmpty)(C)?"":C.trim()),W(t,"state",Object(p.isEmpty)(x)?"":x.trim()),W(t,"country",Object(p.isEmpty)(D)?"":D.trim()),a(t),B(!1)}},Object(o.__)("Update","wp-marketing-automations"))))))))},re=(n(1108),n(314)),ae=n(316),ce=n(61),oe=n(986),ie=n(240);function le(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de=function(e){var t=e.options,n=e.field,a=e.setField,c="";return Object(p.isEmpty)(t)||(c=t.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-m-f-option-wrapper",key:t},Object(r.createElement)(f.TextControl,{value:e,className:"bwf-m-f-add-option",placeholder:Object(o.__)("Add Option Name","wp-marketing-automations"),onChange:function(e){var r=n.meta&&n.meta.options?n.meta.options:[];r[t]=e,a(be(be({},n),{},{meta:be(be({},n.meta),{},{options:r})}))}}),Object(r.createElement)("span",{onClick:function(){var e=n.meta.options;e.splice(t,1),a(be(be({},n),{},{meta:be(be({},n.meta),{},{options:e})}))}},Object(r.createElement)(y.a,{icon:"trash",size:20})))}))),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(o.__)("Options","wp-marketing-automations")),c),Object(r.createElement)(_.a,{isTertiary:!0,className:"is-light is-small is-tertiary bwf-m-f-add-option-btn",onClick:function(){var e=n.meta&&n.meta.options?n.meta.options:[];e.push(""),a(be(be({},n),{},{meta:be(be({},n.meta),{},{options:e})}))}},Object(o.__)("Add Option","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}))},pe=function(e){var t=e.state;return t.success?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(re.a,null),Object(r.createElement)("div",{className:"bwf-h1"},t.message))):t.error?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(ae.a,null),Object(r.createElement)("div",{className:"bwf-h1"},t.message))):Object(r.createElement)(ce.a,null)},Oe=function(){var e=Object(r.useContext)(b.h),t=Object(oe.a)(),n=se(Object(r.useState)([]),2),a=n[0],i=n[1],l=se(Object(r.useState)({group:0}),2),u=l[0],m=l[1],d=se(Object(r.useState)(!1),2),O=d[0],j=d[1],v=se(Object(r.useState)({status:!1,message:""}),2),h=v[0],g=v[1],E=Object(ie.b)(),k=function(){var n,r=(n=regeneratorRuntime.mark((function n(r){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c()({path:Object(b.u)("/v3/fields/"),method:"POST",data:{group_id:r.group,field:{name:r.name,type:r.type,search:r.search,options:r.meta&&r.meta.options&&[4,5,6].includes(parseInt(r.type))?r.meta.options:[],placeholder:r.meta&&r.meta.placeholder?r.meta.placeholder:""}},headers:{"Content-Type":"application/json"}});case 3:if(!(a=n.sent)||200!==a.code){n.next=14;break}E.getQueryData(["get-bwf-fields"])&&E.removeQueries(["get-bwf-fields"]),g({status:!1}),t.fetch(),j(!1),e(a.message),Object(b.wb)(e,3e3),n.next=15;break;case 14:throw Error(Object(b.p)(null==a?void 0:a.message));case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(0),i([null===n.t0||void 0===n.t0?void 0:n.t0.message]),g({status:!1});case 21:case"end":return n.stop()}}),n,null,[[0,17]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var c=n.apply(e,t);function o(e){le(c,r,a,o,i,"next",e)}function i(e){le(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(s.a)(),n=t.getGroups(),a=Object(oe.a)();Object(r.useEffect)((function(){Object(p.isEmpty)(n)&&a.fetch()}),[]);var c=[{key:"",label:Object(o.__)("Select Group","wp-marketing-automations")}];return n&&n.map((function(t){0!==parseInt(e)&&parseInt(t.id)===parseInt(e)||c.push({key:t.id,label:t.name})})),c}(),N=u&&u.id?Object(o.__)("Edit Field","wp-marketing-automations"):Object(o.__)("Create New Field","wp-marketing-automations"),P=function(){var e,t=[];if(u.name||t.push(Object(o.__)("Please enter field name.","wp-marketing-automations")),""===u.group&&t.push(Object(o.__)("Please select a group for field.","wp-marketing-automations")),u.type||t.push(Object(o.__)("Please select a type for field.","wp-marketing-automations")),![4,5,6].includes(parseInt(u.type))||(e=u).meta&&e.meta.options&&Object(p.isArray)(e.meta.options)&&0!==e.meta.options.length&&0!==e.meta.options.filter((function(e){return null!=e&&""!=e})).length||t.push(Object(o.__)("Please enter options for field.","wp-marketing-automations")),Object(p.isEmpty)(t)){var n=[];u.meta&&!Object(p.isEmpty)(u.meta.options)&&(n=u.meta.options.filter((function(e){return null!=e&&""!=e}))),m(be(be({},u),{},{meta:be(be({},u.meta),{},{options:n})})),g({status:!0}),k(be(be({},u),{},{meta:be(be({},u.meta),{},{options:n})}))}else i(t)};return Object(r.createElement)(r.Fragment,null,O&&Object(r.createElement)(f.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-m-f-field-model bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},N),Object(r.createElement)("span",{onClick:function(){return j(!1)},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),h.success||h.error?Object(r.createElement)(pe,{state:h}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&P()}},Array.isArray(a)&&a.length>0&&Object(r.createElement)(C.a,{status:"error",onRemove:function(){return i([])}},a.map((function(e,t){return Object(r.createElement)("p",{className:"bwf-error-notice-p",key:t},e)}))),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(o.__)("Name","wp-marketing-automations")),Object(r.createElement)(f.TextControl,{className:"bwf-m-f-model-field-name",autoFocus:!0,value:u&&u.name?u.name:"",placeholder:Object(o.__)("Type here …","wp-marketing-automations"),onChange:function(e){m(be(be({},u),{},{name:e}))},disabled:h.status})),(!u||!parseInt(u.id))&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(o.__)("Group","wp-marketing-automations")),Object(r.createElement)(w.a,{selected:u.group,className:"bwf-m-f-model-group-name",options:S,onChange:function(e){var t;return m(be(be({},u),{},{group:Object(p.isArray)(e)?null===(t=e[0])||void 0===t?void 0:t.key:e}))},disabled:h.status})),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(o.__)("Type","wp-marketing-automations")),Object(r.createElement)(w.a,{selected:u?u.type:1,className:"bwf-m-f-model-field-type",options:Object(b.L)(),onChange:function(e){var t;return m(be(be({},u),{},{type:Object(p.isArray)(e)?null===(t=e[0])||void 0===t?void 0:t.key:e}))},disabled:h.status}))),!!u&&[1,2,3].includes(parseInt(u.type))&&Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(o.__)("Placeholder","wp-marketing-automations")),Object(r.createElement)(f.TextControl,{className:"bwf-m-f-model-placeholder-name",value:u&&u.meta?u.meta.placeholder:"",placeholder:Object(o.__)("Type here …","wp-marketing-automations"),onChange:function(e){m(be(be({},u),{},{meta:be(be({},u.meta),{},{placeholder:e})}))},disabled:h.status})),!!u&&[4,5,6].includes(parseInt(u.type))&&Object(r.createElement)(de,{options:u.meta&&u.meta.options?u.meta.options:[],field:u,setField:m}),Object(r.createElement)(f.ToggleControl,{label:Object(o.__)("Is searchable","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:!u||!u.search||2!=parseInt(u.search),onChange:function(e){var t=1;e||(t=2),m(be(be({},u),{},{search:t}))},disabled:h.status}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return j(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){P()},className:"bwf-m-f-model-save-btn bwf-ml-0",disabled:h.status,isBusy:h.status},Object(o.__)("Add","wp-marketing-automations")))))),Object(r.createElement)(_.a,{className:" bwf-btn-small is-blue",isPrimary:!0,onClick:function(){m({group:0}),i([]),j(!0)}},Object(o.__)("Add Field","wp-marketing-automations")))};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||Ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _e=function(){var e=Object(oe.a)().setStateGroupValues,t=Object(r.useContext)(b.h),n=Object(s.a)().getGroups(),a=ge(Object(r.useState)([]),2),i=a[0],l=a[1],u=ge(Object(r.useState)({}),2),m=u[0],d=u[1],O=ge(Object(r.useState)(!1),2),j=O[0],v=O[1],w=ge(Object(r.useState)({status:!1,message:""}),2),h=w[0],g=w[1],E=function(){var r,a=(r=regeneratorRuntime.mark((function r(a){var o,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c()({path:Object(b.u)("/v3/groupfields/"),method:"POST",data:{group_name:a.name},headers:{"Content-Type":"application/json"}});case 3:if(200!=(o=r.sent).code){r.next=13;break}i=o.result?o.result[0]:{},Object(p.isEmpty)(i)||e([].concat(we(n),[{id:i.id,name:i.name,fields:[]}])),g({status:!1}),v(!1),t(o.message),Object(b.wb)(t,3e3),r.next=14;break;case 13:throw Error(Object(b.p)(null==o?void 0:o.message));case 14:r.next=20;break;case 16:r.prev=16,r.t0=r.catch(0),l([null===r.t0||void 0===r.t0?void 0:r.t0.message]),g({status:!1});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var c=r.apply(e,t);function o(e){he(c,n,a,o,i,"next",e)}function i(e){he(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}(),k=Object(p.isEmpty)(m.group_id)&&"0"!=m.group_id?Object(o.__)("Create New Fields Group","wp-marketing-automations"):Object(o.__)("Edit Field Group","wp-marketing-automations"),S=function(){var e=[];m.name||e.push(Object(o.__)("Please enter group name.","wp-marketing-automations")),Object(p.isEmpty)(e)?(g({status:!0}),E(m)):l(e)};return Object(r.createElement)(r.Fragment,null,j&&Object(r.createElement)(f.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-m-f-field-model bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},k),Object(r.createElement)("span",{onClick:function(){return v(!1)},className:"bwf-modal-close"},Object(r.createElement)(y.a,{icon:"close",color:"#353030"}))),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&S()}},!Object(p.isEmpty)(i)&&Object(r.createElement)(C.a,{status:"error",onRemove:function(){return l([])}},i.map((function(e,t){return Object(r.createElement)("p",{className:"bwf-error-notice-p",key:t},e)}))),Object(r.createElement)("div",{className:"bwf-m-f-field-wrapper"},Object(r.createElement)("div",{className:"bwf-m-f-label"},Object(o.__)("Name","wp-marketing-automations")),Object(r.createElement)(f.TextControl,{type:"text",value:m&&m.name?m.name:"",autoFocus:!0,placeholder:Object(o.__)("Type here…","wp-marketing-automations"),onChange:function(e){d(je(je({},m),{},{name:e}))},disabled:h.status})),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(_.a,{className:"bwf-cancel-btn",onClick:function(){return v(!1)}},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){S()},className:"bwf-m-f-model-save-btn bwf-ml-0",disabled:h.status,isBusy:h.status},Object(p.isEmpty)(m)?Object(o.__)("Add","wp-marketing-automations"):Object(o.__)("Save","wp-marketing-automations")))))),Object(r.createElement)(_.a,{className:" bwf-btn-small is-border",isSecondary:!0,onClick:function(){d({}),l([]),v(!0)}},Object(o.__)("Create Field Group","wp-marketing-automations")))},Se=n(987);function Ne(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(i.a)().setStateProps,t=Object(r.useContext)(b.h),n=l.a.getContactLoading(),a=Pe(Object(r.useState)(""),2),f=a[0],d=a[1],O=l.a.getContact(),y=Object(s.a)(),j=y.getLoading(),v=y.getGroups(),w=Object(oe.a)();if(Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return Object(p.isEmpty)(v)&&w.fetch(t),function(){null==e||e.abort()}}),[]),n||j)return Object(r.createElement)(m.b,null);var h,g=O.id,k=void 0===g?0:g,_=O.tags,S=void 0===_?[]:_,N=O.lists,C=void 0===N?[]:N,P=O.link_triggers,A=void 0===P?[]:P,x=function(){var n,r=(n=regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(Object(o.__)("Saving…","wp-marketing-automations")),n.prev=1,n.next=4,c()({path:Object(b.u)("/v3/contacts/".concat(k,"/fields/")),method:"POST",data:{email:O.email,fields:r}}).then((function(n){200===parseInt(n.code)?(d(""),t(n.message),e(n.result)):(d(""),t(n.message)),Object(b.wb)(t,3e3)}));case 4:n.next=11;break;case 6:n.prev=6,n.t0=n.catch(1),t(n.t0.hasOwnProperty("message")?n.t0.message:Object(o.__)("Unable to update field","wp-marketing-automations")),d(""),Object(b.wb)(t,3e3);case 11:case"end":return n.stop()}}),n,null,[[1,6]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var c=n.apply(e,t);function o(e){Ce(c,r,a,o,i,"next",e)}function i(e){Ce(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),I=function(e,t){var n={};n[e]=t,d(e),x(n)},T=function(t,n){e(O,t,n)},D=function(e){d("address"),x(e)};return j?Object(r.createElement)(Se.a,null):Object(r.createElement)("div",{className:"bwf-cs-contact-tab-data"},Object(r.createElement)("div",{className:"bwf-c-s-section"}),Object(r.createElement)(u.a,{items:(h=[],v&&v.map((function(e,t){var n,a;h.push({key:e.hasOwnProperty("id")?e.id:t,label:e.name,display:(n=e.fields,a=e.id,Object(r.createElement)(r.Fragment,null,Object(p.isEmpty)(n)?Object(r.createElement)("div",{style:{padding:"0 15px"}},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(o.__)("No fields Found","wp-marketing-automations"),Object(r.createElement)("div",{className:"bwf_clear_10"})):n.map((function(e){if("marketing_status"!==e.id){if("f_name"===e.id||"l_name"===e.id)return Object(r.createElement)(E,{key:e.id,index:e.id,label:e.name,type:e.type?parseInt(e.type):1,options:e.meta&&e.meta.options?e.meta.options:[],value:O&&O[e.id]?O[e.id]:"",placeholder:e.meta&&e.meta.placeholder?e.meta.placeholder:"",onChange:I,fieldSaving:f});var t=e.meta&&e.meta.options?e.meta.options:[],n=e.type?parseInt(e.type):1;if("0"==a){if("address"===e.id)return Object(r.createElement)(ne,{key:e.id,meta:O.fields,contact:O,onChange:D,fieldSaving:f});if("gender"===e.id&&(t=["Male","Female","Others"],n=4),"timezone"===e.id)return Object(r.createElement)(E,{key:e.id,index:e.id,label:e.name,type:9,options:[],value:O[e.id],placeholder:"",onChange:I,fieldSaving:f});if("email"==e.id)return Object(r.createElement)(E,{key:e.id,index:e.id,label:Object(o.__)("Email","wp-marketing-automations"),type:1,value:O.email,placeholder:"",onChange:I,fieldSaving:f});if("contact_no"==e.id)return Object(r.createElement)(E,{key:e.id,index:e.id,label:e.name,type:n,options:t,value:O[e.id]?O[e.id]:"",placeholder:e.meta&&e.meta.placeholder?e.meta.placeholder:"",onChange:I,fieldSaving:f})}return Object(r.createElement)(E,{key:e.id,index:e.id,label:e.name,type:n,options:t,value:O.fields&&O.fields[e.id]?O.fields[e.id]:"",placeholder:e.meta&&e.meta.placeholder?e.meta.placeholder:"",onChange:I,fieldSaving:f})}})),0==a&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(J,{tags:S,saveTags:T,contactId:k}),Object(r.createElement)(R,{lists:C,saveList:T,contactId:k}),Object(r.createElement)(H,{links:A}))))})})),h),openedKeys:Ne(Array(v.length)).map((function(e,t){return t}))}),Object(r.createElement)("div",{className:"bwf-sc-contact-header bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)(_e,null),Object(r.createElement)(Oe,null))))}},981:function(e,t,n){"use strict";var r=n(52),a=(n(94),n(3));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e,t){if(!Array.isArray(e)||0===e.length)return!1;var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!(!1 in a)){var c,o=s(a.fields);try{for(o.s();!(c=o.n()).done;){var i=c.value;if(!(!1 in i)&&t===i.slug)return i}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){r.e(e)}finally{r.f()}return!1},b=function(e,t){if(0===Object(a.size)(e))return!1;for(var n in e){var r=e[n];if(r&&r.slug&&t===r.slug)return r}return!1};t.a=function(){var e=Object(r.a)("groupdata"),t=e.getStateProp;return o(o({},l(e,["getStateProp"])),{},{getGroups:function(){return t("groups")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getFieldBySlug:function(e){var n=t("groups"),r=t("extra_fields"),a=m(n,e);return(!1!==a||!1!==(a=b(r,e)))&&a.ID},getCountData:function(){return t("countData")}})}},986:function(e,t,n){"use strict";var r=n(51),a=n(4);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("groupdata"),t=e.fetch,n=e.setStateProp;return o(o({},l(e,["fetch","setStateProp"])),{},{fetch:function(e){t("GET",Object(a.u)("/v3/groupfields"),"","",e)},setStateGroupValues:function(e){n("groups",e)},setGroupValues:function(e,t){n(e,t)}})}},987:function(e,t,n){"use strict";var r=n(0);n(485);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.count,n=void 0===t?5:t,c=e.className,o=void 0===c?"":c;return Object(r.createElement)("div",{className:"bwf-accordion-placeholder ".concat(o)},a(Array(n)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))})))}}}]);