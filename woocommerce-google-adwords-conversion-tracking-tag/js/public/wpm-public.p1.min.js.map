{"version":3,"file":"wpm-public.p1.min.js","mappings":"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CA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,yBACA,sBACA,wBACA,wBACA,mBACA,mBACA,kBACA,iBACA,mBACA,oBACA,oBACA,mBACA,kBACA,oBACA,kBACA,mBACA,mBACA,mBACA,iBACA,mBACA,iBACA,iBACA,iBACA,kBACA,kBACA,oBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,kBACA,kBACA,iBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,kBACA,kBACA,kBACA,iBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBAGgB,CAChB,iBACA,kBACA,kBACA,iBACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,gBACA,kBACA,gBACA,gBACA,kBACA,kBACA,kBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,kBACA,iBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,gBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,gBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,iBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,kBACA,mBACA,kBACA,mBACA,mBACA,mBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,kBACA,mBACA,mBACA,mBACA,kBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,kBACA,iBACA,mBACA,iBACA,sBACA,sBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,iBACA,iBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,iBACA,iBACA,mBACA,mBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,sBACA,sBACA,sBACA,mBACA,mBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,mBACA,mBACA,sBACA,sBACA,sBACA,sBACA,oBACA,mBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,oBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBACA,oBACA,yBACA,kBAGe,CACf,kBACA,kBACA,mBAGY,CACZ,iBACA,iBACA,iBACA,iBACA,iBACA,kBACA,iBACA,kBACA,mBACA,kBACA,qBACA,kBACA,kBACA,mBACA,mBACA,kBACA,mBACA,iBACA,mBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBAGiB,CACjB,gBACA,gBACA,gBACA,gBACA,iBACA,iBACA,iBACA,mBAGc,CACd,eACA,iBACA,iBAGa,CACb,kBACA,kBAGc,CACd,iBACA,eAGa,CACb,iBACA,kBACA,mBACA,kBACA,kBACA,kBACA,gBACA,gBACA,gBACA,kBACA,mBACA,kBACA,kBACA,oBACA,oBACA,kBACA,mBACA,mBACA,mBACA,mBACA,iBACA,kBACA,mBACA,mBACA,mBAGkB,CAClB,gBACA,eACA,gBACA,cACA,eACA,gBACA,eACA,gBACA,gBACA,eACA,gBACA,iBAGa,CACb,iBACA,eACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,iBACA,gBACA,cACA,eACA,eACA,eACA,eACA,eACA,gBACA,eACA,gBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,iBACA,mBACA,kBAGc,CACd,iBACA,gBACA,kBACA,gBACA,gBACA,gBACA,gBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,oBACA,kBACA,kBACA,iBACA,kBACA,iBACA,mBACA,qBACA,iBACA,kBACA,mBACA,mBACA,mBACA,mBACA,cACA,eACA,iBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,kBACA,iBACA,gBACA,iBACA,kBACA,kBACA,iBACA,iBACA,iBACA,iBACA,qBACA,qBACA,qBACA,qBAGa,CACb,mBACA,mBACA,mBACA,gBACA,gBACA,iBAGc,CACd,oBACA,qBAyBAs2B,EACA,CAGF,CAn2CA,CAm2CC5oB,OAAOpB,IAAMoB,OAAOpB,KAAO,CAAC,EAAGR,O,WCz0CjC6oB,GAAGC,MAAM6B,UACR,iDACA,iCACA3nB,IAKCxC,IAAIma,iBAAiB3X,EAAKiD,QAAQ3C,GAAI,EAAE,IAO1CulB,GAAGC,MAAM6B,UACR,0DACA,iCACA3nB,IAGKA,EAAK0D,SAAW1D,EAAKiD,QAAQS,UAChClG,IAAIma,iBAAiB3X,EAAKiD,QAAQ3C,GAAIN,EAAK0D,SAAW1D,EAAKiD,QAAQS,UAGhE1D,EAAK0D,SAAW1D,EAAKiD,QAAQS,UAChClG,IAAIoX,sBAAsB5U,EAAKiD,QAAQ3C,GAAIN,EAAKiD,QAAQS,SAAW1D,EAAK0D,SACzE,IAOFmiB,GAAGC,MAAM6B,UACR,oDACA,iCACA3nB,IAECxC,IAAIoX,sBAAsB5U,EAAKiD,QAAQ3C,GAAIN,EAAK0D,SAAS,IAoB3DmiB,GAAGC,MAAM6B,UACR,mDACA,iCACA,KAEC3qB,OAAOC,UAAU2H,QAAQ,gBAAiB,CAAC,EAAE,G,GC7F3CgjB,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBruB,IAAjBsuB,EACH,OAAOA,EAAaz7B,QAGrB,IAAIqG,EAASi1B,EAAyBE,GAAY,CAGjDx7B,QAAS,CAAC,GAOX,OAHA07B,EAAoBF,GAAUrxB,KAAK9D,EAAOrG,QAASqG,EAAQA,EAAOrG,QAASu7B,GAGpEl1B,EAAOrG,OACf,CCrBAu7B,EAAoBztB,EAAI,CAAC9N,EAAS27B,KACjC,IAAI,IAAI/iB,KAAO+iB,EACXJ,EAAoBlb,EAAEsb,EAAY/iB,KAAS2iB,EAAoBlb,EAAErgB,EAAS4Y,IAC5EnX,OAAOmK,eAAe5L,EAAS4Y,EAAK,CAAElX,YAAY,EAAMC,IAAKg6B,EAAW/iB,IAE1E,ECND2iB,EAAoBK,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOv1B,MAAQ,IAAIw1B,SAAS,cAAb,EAChB,CAAE,MAAOjpB,GACR,GAAsB,iBAAXP,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBipB,EAAoBlb,EAAI,CAACia,EAAKyB,IAAUt6B,OAAO8F,UAAUy0B,eAAe7xB,KAAKmwB,EAAKyB,GCClFR,EAAoB5a,EAAK3gB,IACH,oBAAXi8B,QAA0BA,OAAOC,aAC1Cz6B,OAAOmK,eAAe5L,EAASi8B,OAAOC,YAAa,CAAE/yB,MAAO,WAE7D1H,OAAOmK,eAAe5L,EAAS,aAAc,CAAEmJ,OAAO,GAAO,ECDjDkK,WAEZtT,EAAQ,KACRA,EAAQ,WAGFmR,IAAI4nB,qBAGJ5nB,IAAIioB,0BAMVp5B,EAAQ,KAGR2Q,OAAOC,UAAUC,GAAG,aAAa,KAChC7Q,EAAQ,IAAiC,IAI1CA,EAAQ,KAERmR,IAAIuoB,uBAGJvoB,IAAIwmB,oBAIAxmB,IAAIomB,8BAGRv3B,EAAQ,KACRA,EAAQ,KACRA,EAAQ,KAuBR4Q,SAAS0V,cAAc,IAAIC,MAAM,qBAGjC3V,SAAS0V,cAAc,IAAIC,MAAM,kBAG3BpV,IAAIilB,aACVjlB,IAAI+mB,uBAGJ/mB,IAAI4P,sBAAqB,EAI1Bqb,E","sources":["webpack://Pixel-Manager-for-WooCommerce/../../src/index.ts","webpack://Pixel-Manager-for-WooCommerce/../../src/ipRange.ts","webpack://Pixel-Manager-for-WooCommerce/../../src/ipv4.ts","webpack://Pixel-Manager-for-WooCommerce/../../src/ipv6.ts","webpack://Pixel-Manager-for-WooCommerce/../../src/util.ts","webpack://Pixel-Manager-for-WooCommerce/../node_modules/ipaddr.js/lib/ipaddr.js","webpack://Pixel-Manager-for-WooCommerce/../node_modules/ip6/ip6.js","webpack://Pixel-Manager-for-WooCommerce/../src/range-check.ts","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/facebook/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/facebook/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/facebook/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/ads/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/ads/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/ads/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/analytics/ga4/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/analytics/ga4/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/analytics/ga4/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/analytics/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/base/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/base/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/base/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/google/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/hotjar/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/hotjar/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/hotjar/loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/version.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/cookie_consent.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/event_listeners.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/event_listeners_on_ready.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/functions.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/functions_loader.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/functions_main.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/ip_check.js","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/wpm/wc_hooks.js","webpack://Pixel-Manager-for-WooCommerce/webpack/bootstrap","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/define property getters","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/global","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/hasOwnProperty shorthand","webpack://Pixel-Manager-for-WooCommerce/webpack/runtime/make namespace object","webpack://Pixel-Manager-for-WooCommerce/./src/js-src/public/main.js"],"sourcesContent":[null,null,null,null,null,"(function() {\n  var expandIPv6, ipaddr, ipv4Part, ipv4Regexes, ipv6Part, ipv6Regexes, matchCIDR, root, zoneIndex;\n\n  ipaddr = {};\n\n  root = this;\n\n  if ((typeof module !== \"undefined\" && module !== null) && module.exports) {\n    module.exports = ipaddr;\n  } else {\n    root['ipaddr'] = ipaddr;\n  }\n\n  matchCIDR = function(first, second, partSize, cidrBits) {\n    var part, shift;\n    if (first.length !== second.length) {\n      throw new Error(\"ipaddr: cannot match CIDR for objects with different lengths\");\n    }\n    part = 0;\n    while (cidrBits > 0) {\n      shift = partSize - cidrBits;\n      if (shift < 0) {\n        shift = 0;\n      }\n      if (first[part] >> shift !== second[part] >> shift) {\n        return false;\n      }\n      cidrBits -= partSize;\n      part += 1;\n    }\n    return true;\n  };\n\n  ipaddr.subnetMatch = function(address, rangeList, defaultName) {\n    var k, len, rangeName, rangeSubnets, subnet;\n    if (defaultName == null) {\n      defaultName = 'unicast';\n    }\n    for (rangeName in rangeList) {\n      rangeSubnets = rangeList[rangeName];\n      if (rangeSubnets[0] && !(rangeSubnets[0] instanceof Array)) {\n        rangeSubnets = [rangeSubnets];\n      }\n      for (k = 0, len = rangeSubnets.length; k < len; k++) {\n        subnet = rangeSubnets[k];\n        if (address.kind() === subnet[0].kind()) {\n          if (address.match.apply(address, subnet)) {\n            return rangeName;\n          }\n        }\n      }\n    }\n    return defaultName;\n  };\n\n  ipaddr.IPv4 = (function() {\n    function IPv4(octets) {\n      var k, len, octet;\n      if (octets.length !== 4) {\n        throw new Error(\"ipaddr: ipv4 octet count should be 4\");\n      }\n      for (k = 0, len = octets.length; k < len; k++) {\n        octet = octets[k];\n        if (!((0 <= octet && octet <= 255))) {\n          throw new Error(\"ipaddr: ipv4 octet should fit in 8 bits\");\n        }\n      }\n      this.octets = octets;\n    }\n\n    IPv4.prototype.kind = function() {\n      return 'ipv4';\n    };\n\n    IPv4.prototype.toString = function() {\n      return this.octets.join(\".\");\n    };\n\n    IPv4.prototype.toNormalizedString = function() {\n      return this.toString();\n    };\n\n    IPv4.prototype.toByteArray = function() {\n      return this.octets.slice(0);\n    };\n\n    IPv4.prototype.match = function(other, cidrRange) {\n      var ref;\n      if (cidrRange === void 0) {\n        ref = other, other = ref[0], cidrRange = ref[1];\n      }\n      if (other.kind() !== 'ipv4') {\n        throw new Error(\"ipaddr: cannot match ipv4 address with non-ipv4 one\");\n      }\n      return matchCIDR(this.octets, other.octets, 8, cidrRange);\n    };\n\n    IPv4.prototype.SpecialRanges = {\n      unspecified: [[new IPv4([0, 0, 0, 0]), 8]],\n      broadcast: [[new IPv4([255, 255, 255, 255]), 32]],\n      multicast: [[new IPv4([224, 0, 0, 0]), 4]],\n      linkLocal: [[new IPv4([169, 254, 0, 0]), 16]],\n      loopback: [[new IPv4([127, 0, 0, 0]), 8]],\n      carrierGradeNat: [[new IPv4([100, 64, 0, 0]), 10]],\n      \"private\": [[new IPv4([10, 0, 0, 0]), 8], [new IPv4([172, 16, 0, 0]), 12], [new IPv4([192, 168, 0, 0]), 16]],\n      reserved: [[new IPv4([192, 0, 0, 0]), 24], [new IPv4([192, 0, 2, 0]), 24], [new IPv4([192, 88, 99, 0]), 24], [new IPv4([198, 51, 100, 0]), 24], [new IPv4([203, 0, 113, 0]), 24], [new IPv4([240, 0, 0, 0]), 4]]\n    };\n\n    IPv4.prototype.range = function() {\n      return ipaddr.subnetMatch(this, this.SpecialRanges);\n    };\n\n    IPv4.prototype.toIPv4MappedAddress = function() {\n      return ipaddr.IPv6.parse(\"::ffff:\" + (this.toString()));\n    };\n\n    IPv4.prototype.prefixLengthFromSubnetMask = function() {\n      var cidr, i, k, octet, stop, zeros, zerotable;\n      zerotable = {\n        0: 8,\n        128: 7,\n        192: 6,\n        224: 5,\n        240: 4,\n        248: 3,\n        252: 2,\n        254: 1,\n        255: 0\n      };\n      cidr = 0;\n      stop = false;\n      for (i = k = 3; k >= 0; i = k += -1) {\n        octet = this.octets[i];\n        if (octet in zerotable) {\n          zeros = zerotable[octet];\n          if (stop && zeros !== 0) {\n            return null;\n          }\n          if (zeros !== 8) {\n            stop = true;\n          }\n          cidr += zeros;\n        } else {\n          return null;\n        }\n      }\n      return 32 - cidr;\n    };\n\n    return IPv4;\n\n  })();\n\n  ipv4Part = \"(0?\\\\d+|0x[a-f0-9]+)\";\n\n  ipv4Regexes = {\n    fourOctet: new RegExp(\"^\" + ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part + \"$\", 'i'),\n    longValue: new RegExp(\"^\" + ipv4Part + \"$\", 'i')\n  };\n\n  ipaddr.IPv4.parser = function(string) {\n    var match, parseIntAuto, part, shift, value;\n    parseIntAuto = function(string) {\n      if (string[0] === \"0\" && string[1] !== \"x\") {\n        return parseInt(string, 8);\n      } else {\n        return parseInt(string);\n      }\n    };\n    if (match = string.match(ipv4Regexes.fourOctet)) {\n      return (function() {\n        var k, len, ref, results;\n        ref = match.slice(1, 6);\n        results = [];\n        for (k = 0, len = ref.length; k < len; k++) {\n          part = ref[k];\n          results.push(parseIntAuto(part));\n        }\n        return results;\n      })();\n    } else if (match = string.match(ipv4Regexes.longValue)) {\n      value = parseIntAuto(match[1]);\n      if (value > 0xffffffff || value < 0) {\n        throw new Error(\"ipaddr: address outside defined range\");\n      }\n      return ((function() {\n        var k, results;\n        results = [];\n        for (shift = k = 0; k <= 24; shift = k += 8) {\n          results.push((value >> shift) & 0xff);\n        }\n        return results;\n      })()).reverse();\n    } else {\n      return null;\n    }\n  };\n\n  ipaddr.IPv6 = (function() {\n    function IPv6(parts, zoneId) {\n      var i, k, l, len, part, ref;\n      if (parts.length === 16) {\n        this.parts = [];\n        for (i = k = 0; k <= 14; i = k += 2) {\n          this.parts.push((parts[i] << 8) | parts[i + 1]);\n        }\n      } else if (parts.length === 8) {\n        this.parts = parts;\n      } else {\n        throw new Error(\"ipaddr: ipv6 part count should be 8 or 16\");\n      }\n      ref = this.parts;\n      for (l = 0, len = ref.length; l < len; l++) {\n        part = ref[l];\n        if (!((0 <= part && part <= 0xffff))) {\n          throw new Error(\"ipaddr: ipv6 part should fit in 16 bits\");\n        }\n      }\n      if (zoneId) {\n        this.zoneId = zoneId;\n      }\n    }\n\n    IPv6.prototype.kind = function() {\n      return 'ipv6';\n    };\n\n    IPv6.prototype.toString = function() {\n      return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/, '::');\n    };\n\n    IPv6.prototype.toRFC5952String = function() {\n      var bestMatchIndex, bestMatchLength, match, regex, string;\n      regex = /((^|:)(0(:|$)){2,})/g;\n      string = this.toNormalizedString();\n      bestMatchIndex = 0;\n      bestMatchLength = -1;\n      while ((match = regex.exec(string))) {\n        if (match[0].length > bestMatchLength) {\n          bestMatchIndex = match.index;\n          bestMatchLength = match[0].length;\n        }\n      }\n      if (bestMatchLength < 0) {\n        return string;\n      }\n      return string.substring(0, bestMatchIndex) + '::' + string.substring(bestMatchIndex + bestMatchLength);\n    };\n\n    IPv6.prototype.toByteArray = function() {\n      var bytes, k, len, part, ref;\n      bytes = [];\n      ref = this.parts;\n      for (k = 0, len = ref.length; k < len; k++) {\n        part = ref[k];\n        bytes.push(part >> 8);\n        bytes.push(part & 0xff);\n      }\n      return bytes;\n    };\n\n    IPv6.prototype.toNormalizedString = function() {\n      var addr, part, suffix;\n      addr = ((function() {\n        var k, len, ref, results;\n        ref = this.parts;\n        results = [];\n        for (k = 0, len = ref.length; k < len; k++) {\n          part = ref[k];\n          results.push(part.toString(16));\n        }\n        return results;\n      }).call(this)).join(\":\");\n      suffix = '';\n      if (this.zoneId) {\n        suffix = '%' + this.zoneId;\n      }\n      return addr + suffix;\n    };\n\n    IPv6.prototype.toFixedLengthString = function() {\n      var addr, part, suffix;\n      addr = ((function() {\n        var k, len, ref, results;\n        ref = this.parts;\n        results = [];\n        for (k = 0, len = ref.length; k < len; k++) {\n          part = ref[k];\n          results.push(part.toString(16).padStart(4, '0'));\n        }\n        return results;\n      }).call(this)).join(\":\");\n      suffix = '';\n      if (this.zoneId) {\n        suffix = '%' + this.zoneId;\n      }\n      return addr + suffix;\n    };\n\n    IPv6.prototype.match = function(other, cidrRange) {\n      var ref;\n      if (cidrRange === void 0) {\n        ref = other, other = ref[0], cidrRange = ref[1];\n      }\n      if (other.kind() !== 'ipv6') {\n        throw new Error(\"ipaddr: cannot match ipv6 address with non-ipv6 one\");\n      }\n      return matchCIDR(this.parts, other.parts, 16, cidrRange);\n    };\n\n    IPv6.prototype.SpecialRanges = {\n      unspecified: [new IPv6([0, 0, 0, 0, 0, 0, 0, 0]), 128],\n      linkLocal: [new IPv6([0xfe80, 0, 0, 0, 0, 0, 0, 0]), 10],\n      multicast: [new IPv6([0xff00, 0, 0, 0, 0, 0, 0, 0]), 8],\n      loopback: [new IPv6([0, 0, 0, 0, 0, 0, 0, 1]), 128],\n      uniqueLocal: [new IPv6([0xfc00, 0, 0, 0, 0, 0, 0, 0]), 7],\n      ipv4Mapped: [new IPv6([0, 0, 0, 0, 0, 0xffff, 0, 0]), 96],\n      rfc6145: [new IPv6([0, 0, 0, 0, 0xffff, 0, 0, 0]), 96],\n      rfc6052: [new IPv6([0x64, 0xff9b, 0, 0, 0, 0, 0, 0]), 96],\n      '6to4': [new IPv6([0x2002, 0, 0, 0, 0, 0, 0, 0]), 16],\n      teredo: [new IPv6([0x2001, 0, 0, 0, 0, 0, 0, 0]), 32],\n      reserved: [[new IPv6([0x2001, 0xdb8, 0, 0, 0, 0, 0, 0]), 32]]\n    };\n\n    IPv6.prototype.range = function() {\n      return ipaddr.subnetMatch(this, this.SpecialRanges);\n    };\n\n    IPv6.prototype.isIPv4MappedAddress = function() {\n      return this.range() === 'ipv4Mapped';\n    };\n\n    IPv6.prototype.toIPv4Address = function() {\n      var high, low, ref;\n      if (!this.isIPv4MappedAddress()) {\n        throw new Error(\"ipaddr: trying to convert a generic ipv6 address to ipv4\");\n      }\n      ref = this.parts.slice(-2), high = ref[0], low = ref[1];\n      return new ipaddr.IPv4([high >> 8, high & 0xff, low >> 8, low & 0xff]);\n    };\n\n    IPv6.prototype.prefixLengthFromSubnetMask = function() {\n      var cidr, i, k, part, stop, zeros, zerotable;\n      zerotable = {\n        0: 16,\n        32768: 15,\n        49152: 14,\n        57344: 13,\n        61440: 12,\n        63488: 11,\n        64512: 10,\n        65024: 9,\n        65280: 8,\n        65408: 7,\n        65472: 6,\n        65504: 5,\n        65520: 4,\n        65528: 3,\n        65532: 2,\n        65534: 1,\n        65535: 0\n      };\n      cidr = 0;\n      stop = false;\n      for (i = k = 7; k >= 0; i = k += -1) {\n        part = this.parts[i];\n        if (part in zerotable) {\n          zeros = zerotable[part];\n          if (stop && zeros !== 0) {\n            return null;\n          }\n          if (zeros !== 16) {\n            stop = true;\n          }\n          cidr += zeros;\n        } else {\n          return null;\n        }\n      }\n      return 128 - cidr;\n    };\n\n    return IPv6;\n\n  })();\n\n  ipv6Part = \"(?:[0-9a-f]+::?)+\";\n\n  zoneIndex = \"%[0-9a-z]{1,}\";\n\n  ipv6Regexes = {\n    zoneIndex: new RegExp(zoneIndex, 'i'),\n    \"native\": new RegExp(\"^(::)?(\" + ipv6Part + \")?([0-9a-f]+)?(::)?(\" + zoneIndex + \")?$\", 'i'),\n    transitional: new RegExp((\"^((?:\" + ipv6Part + \")|(?:::)(?:\" + ipv6Part + \")?)\") + (ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part + \"\\\\.\" + ipv4Part) + (\"(\" + zoneIndex + \")?$\"), 'i')\n  };\n\n  expandIPv6 = function(string, parts) {\n    var colonCount, lastColon, part, replacement, replacementCount, zoneId;\n    if (string.indexOf('::') !== string.lastIndexOf('::')) {\n      return null;\n    }\n    zoneId = (string.match(ipv6Regexes['zoneIndex']) || [])[0];\n    if (zoneId) {\n      zoneId = zoneId.substring(1);\n      string = string.replace(/%.+$/, '');\n    }\n    colonCount = 0;\n    lastColon = -1;\n    while ((lastColon = string.indexOf(':', lastColon + 1)) >= 0) {\n      colonCount++;\n    }\n    if (string.substr(0, 2) === '::') {\n      colonCount--;\n    }\n    if (string.substr(-2, 2) === '::') {\n      colonCount--;\n    }\n    if (colonCount > parts) {\n      return null;\n    }\n    replacementCount = parts - colonCount;\n    replacement = ':';\n    while (replacementCount--) {\n      replacement += '0:';\n    }\n    string = string.replace('::', replacement);\n    if (string[0] === ':') {\n      string = string.slice(1);\n    }\n    if (string[string.length - 1] === ':') {\n      string = string.slice(0, -1);\n    }\n    parts = (function() {\n      var k, len, ref, results;\n      ref = string.split(\":\");\n      results = [];\n      for (k = 0, len = ref.length; k < len; k++) {\n        part = ref[k];\n        results.push(parseInt(part, 16));\n      }\n      return results;\n    })();\n    return {\n      parts: parts,\n      zoneId: zoneId\n    };\n  };\n\n  ipaddr.IPv6.parser = function(string) {\n    var addr, k, len, match, octet, octets, zoneId;\n    if (ipv6Regexes['native'].test(string)) {\n      return expandIPv6(string, 8);\n    } else if (match = string.match(ipv6Regexes['transitional'])) {\n      zoneId = match[6] || '';\n      addr = expandIPv6(match[1].slice(0, -1) + zoneId, 6);\n      if (addr.parts) {\n        octets = [parseInt(match[2]), parseInt(match[3]), parseInt(match[4]), parseInt(match[5])];\n        for (k = 0, len = octets.length; k < len; k++) {\n          octet = octets[k];\n          if (!((0 <= octet && octet <= 255))) {\n            return null;\n          }\n        }\n        addr.parts.push(octets[0] << 8 | octets[1]);\n        addr.parts.push(octets[2] << 8 | octets[3]);\n        return {\n          parts: addr.parts,\n          zoneId: addr.zoneId\n        };\n      }\n    }\n    return null;\n  };\n\n  ipaddr.IPv4.isIPv4 = ipaddr.IPv6.isIPv6 = function(string) {\n    return this.parser(string) !== null;\n  };\n\n  ipaddr.IPv4.isValid = function(string) {\n    var e;\n    try {\n      new this(this.parser(string));\n      return true;\n    } catch (error1) {\n      e = error1;\n      return false;\n    }\n  };\n\n  ipaddr.IPv4.isValidFourPartDecimal = function(string) {\n    if (ipaddr.IPv4.isValid(string) && string.match(/^(0|[1-9]\\d*)(\\.(0|[1-9]\\d*)){3}$/)) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  ipaddr.IPv6.isValid = function(string) {\n    var addr, e;\n    if (typeof string === \"string\" && string.indexOf(\":\") === -1) {\n      return false;\n    }\n    try {\n      addr = this.parser(string);\n      new this(addr.parts, addr.zoneId);\n      return true;\n    } catch (error1) {\n      e = error1;\n      return false;\n    }\n  };\n\n  ipaddr.IPv4.parse = function(string) {\n    var parts;\n    parts = this.parser(string);\n    if (parts === null) {\n      throw new Error(\"ipaddr: string is not formatted like ip address\");\n    }\n    return new this(parts);\n  };\n\n  ipaddr.IPv6.parse = function(string) {\n    var addr;\n    addr = this.parser(string);\n    if (addr.parts === null) {\n      throw new Error(\"ipaddr: string is not formatted like ip address\");\n    }\n    return new this(addr.parts, addr.zoneId);\n  };\n\n  ipaddr.IPv4.parseCIDR = function(string) {\n    var maskLength, match, parsed;\n    if (match = string.match(/^(.+)\\/(\\d+)$/)) {\n      maskLength = parseInt(match[2]);\n      if (maskLength >= 0 && maskLength <= 32) {\n        parsed = [this.parse(match[1]), maskLength];\n        Object.defineProperty(parsed, 'toString', {\n          value: function() {\n            return this.join('/');\n          }\n        });\n        return parsed;\n      }\n    }\n    throw new Error(\"ipaddr: string is not formatted like an IPv4 CIDR range\");\n  };\n\n  ipaddr.IPv4.subnetMaskFromPrefixLength = function(prefix) {\n    var filledOctetCount, j, octets;\n    prefix = parseInt(prefix);\n    if (prefix < 0 || prefix > 32) {\n      throw new Error('ipaddr: invalid IPv4 prefix length');\n    }\n    octets = [0, 0, 0, 0];\n    j = 0;\n    filledOctetCount = Math.floor(prefix / 8);\n    while (j < filledOctetCount) {\n      octets[j] = 255;\n      j++;\n    }\n    if (filledOctetCount < 4) {\n      octets[filledOctetCount] = Math.pow(2, prefix % 8) - 1 << 8 - (prefix % 8);\n    }\n    return new this(octets);\n  };\n\n  ipaddr.IPv4.broadcastAddressFromCIDR = function(string) {\n    var cidr, error, i, ipInterfaceOctets, octets, subnetMaskOctets;\n    try {\n      cidr = this.parseCIDR(string);\n      ipInterfaceOctets = cidr[0].toByteArray();\n      subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n      octets = [];\n      i = 0;\n      while (i < 4) {\n        octets.push(parseInt(ipInterfaceOctets[i], 10) | parseInt(subnetMaskOctets[i], 10) ^ 255);\n        i++;\n      }\n      return new this(octets);\n    } catch (error1) {\n      error = error1;\n      throw new Error('ipaddr: the address does not have IPv4 CIDR format');\n    }\n  };\n\n  ipaddr.IPv4.networkAddressFromCIDR = function(string) {\n    var cidr, error, i, ipInterfaceOctets, octets, subnetMaskOctets;\n    try {\n      cidr = this.parseCIDR(string);\n      ipInterfaceOctets = cidr[0].toByteArray();\n      subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n      octets = [];\n      i = 0;\n      while (i < 4) {\n        octets.push(parseInt(ipInterfaceOctets[i], 10) & parseInt(subnetMaskOctets[i], 10));\n        i++;\n      }\n      return new this(octets);\n    } catch (error1) {\n      error = error1;\n      throw new Error('ipaddr: the address does not have IPv4 CIDR format');\n    }\n  };\n\n  ipaddr.IPv6.parseCIDR = function(string) {\n    var maskLength, match, parsed;\n    if (match = string.match(/^(.+)\\/(\\d+)$/)) {\n      maskLength = parseInt(match[2]);\n      if (maskLength >= 0 && maskLength <= 128) {\n        parsed = [this.parse(match[1]), maskLength];\n        Object.defineProperty(parsed, 'toString', {\n          value: function() {\n            return this.join('/');\n          }\n        });\n        return parsed;\n      }\n    }\n    throw new Error(\"ipaddr: string is not formatted like an IPv6 CIDR range\");\n  };\n\n  ipaddr.isValid = function(string) {\n    return ipaddr.IPv6.isValid(string) || ipaddr.IPv4.isValid(string);\n  };\n\n  ipaddr.parse = function(string) {\n    if (ipaddr.IPv6.isValid(string)) {\n      return ipaddr.IPv6.parse(string);\n    } else if (ipaddr.IPv4.isValid(string)) {\n      return ipaddr.IPv4.parse(string);\n    } else {\n      throw new Error(\"ipaddr: the address has neither IPv6 nor IPv4 format\");\n    }\n  };\n\n  ipaddr.parseCIDR = function(string) {\n    var e;\n    try {\n      return ipaddr.IPv6.parseCIDR(string);\n    } catch (error1) {\n      e = error1;\n      try {\n        return ipaddr.IPv4.parseCIDR(string);\n      } catch (error1) {\n        e = error1;\n        throw new Error(\"ipaddr: the address has neither IPv6 nor IPv4 CIDR format\");\n      }\n    }\n  };\n\n  ipaddr.fromByteArray = function(bytes) {\n    var length;\n    length = bytes.length;\n    if (length === 4) {\n      return new ipaddr.IPv4(bytes);\n    } else if (length === 16) {\n      return new ipaddr.IPv6(bytes);\n    } else {\n      throw new Error(\"ipaddr: the binary input is neither an IPv6 nor IPv4 address\");\n    }\n  };\n\n  ipaddr.process = function(string) {\n    var addr;\n    addr = this.parse(string);\n    if (addr.kind() === 'ipv6' && addr.isIPv4MappedAddress()) {\n      return addr.toIPv4Address();\n    } else {\n      return addr;\n    }\n  };\n\n}).call(this);\n","/**\n * Created by elgs on 3/5/16.\n */\nconst normalize = function (a) {\n   if (!_validate(a)) {\n      throw new Error('Invalid address: ' + a);\n   }\n   a = a.toLowerCase()\n\n   const nh = a.split(/\\:\\:/g);\n   if (nh.length > 2) {\n      throw new Error('Invalid address: ' + a);\n   }\n\n   let sections = [];\n   if (nh.length == 1) {\n      // full mode\n      sections = a.split(/\\:/g);\n      if (sections.length !== 8) {\n         throw new Error('Invalid address: ' + a);\n      }\n   } else if (nh.length == 2) {\n      // compact mode\n      const n = nh[0];\n      const h = nh[1];\n      const ns = n.split(/\\:/g);\n      const hs = h.split(/\\:/g);\n      for (let i in ns) {\n         sections[i] = ns[i];\n      }\n      for (let i = hs.length; i > 0; --i) {\n         sections[7 - (hs.length - i)] = hs[i - 1];\n      }\n   }\n   for (let i = 0; i < 8; ++i) {\n      if (sections[i] === undefined) {\n         sections[i] = '0000';\n      }\n      sections[i] = _leftPad(sections[i], '0', 4);\n   }\n   return sections.join(':');\n};\n\nconst abbreviate = function (a) {\n   if (!_validate(a)) {\n      throw new Error('Invalid address: ' + a);\n   }\n   a = normalize(a);\n   a = a.replace(/0000/g, 'g');\n   a = a.replace(/\\:000/g, ':');\n   a = a.replace(/\\:00/g, ':');\n   a = a.replace(/\\:0/g, ':');\n   a = a.replace(/g/g, '0');\n   const sections = a.split(/\\:/g);\n   let zPreviousFlag = false;\n   let zeroStartIndex = -1;\n   let zeroLength = 0;\n   let zStartIndex = -1;\n   let zLength = 0;\n   for (let i = 0; i < 8; ++i) {\n      const section = sections[i];\n      let zFlag = (section === '0');\n      if (zFlag && !zPreviousFlag) {\n         zStartIndex = i;\n      }\n      if (!zFlag && zPreviousFlag) {\n         zLength = i - zStartIndex;\n      }\n      if (zLength > 1 && zLength > zeroLength) {\n         zeroStartIndex = zStartIndex;\n         zeroLength = zLength;\n      }\n      zPreviousFlag = (section === '0');\n   }\n   if (zPreviousFlag) {\n      zLength = 8 - zStartIndex;\n   }\n   if (zLength > 1 && zLength > zeroLength) {\n      zeroStartIndex = zStartIndex;\n      zeroLength = zLength;\n   }\n   //console.log(zeroStartIndex, zeroLength);\n   //console.log(sections);\n   if (zeroStartIndex >= 0 && zeroLength > 1) {\n      sections.splice(zeroStartIndex, zeroLength, 'g');\n   }\n   //console.log(sections);\n   a = sections.join(':');\n   //console.log(a);\n   a = a.replace(/\\:g\\:/g, '::');\n   a = a.replace(/\\:g/g, '::');\n   a = a.replace(/g\\:/g, '::');\n   a = a.replace(/g/g, '::');\n   //console.log(a);\n   return a;\n};\n\n// Basic validation\nconst _validate = function (a) {\n   return /^[a-f0-9\\\\:]+$/ig.test(a);\n};\n\nconst _leftPad = function (d, p, n) {\n   const padding = p.repeat(n);\n   if (d.length < padding.length) {\n      d = padding.substring(0, padding.length - d.length) + d;\n   }\n   return d;\n};\n\nconst _hex2bin = function (hex) {\n   return parseInt(hex, 16).toString(2)\n};\nconst _bin2hex = function (bin) {\n   return parseInt(bin, 2).toString(16)\n};\n\nconst _addr2bin = function (addr) {\n   const nAddr = normalize(addr);\n   const sections = nAddr.split(\":\");\n   let binAddr = '';\n   for (const section of sections) {\n      binAddr += _leftPad(_hex2bin(section), '0', 16);\n   }\n   return binAddr;\n};\n\nconst _bin2addr = function (bin) {\n   const addr = [];\n   for (let i = 0; i < 8; ++i) {\n      const binPart = bin.substr(i * 16, 16);\n      const hexSection = _leftPad(_bin2hex(binPart), '0', 4);\n      addr.push(hexSection);\n   }\n   return addr.join(':');\n};\n\nconst divideSubnet = function (addr, mask0, mask1, limit, abbr) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask0 *= 1;\n   mask1 *= 1;\n   limit *= 1;\n   mask1 = mask1 || 128;\n   if (mask0 < 1 || mask1 < 1 || mask0 > 128 || mask1 > 128 || mask0 > mask1) {\n      throw new Error('Invalid masks.');\n   }\n   const ret = [];\n   const binAddr = _addr2bin(addr);\n   const binNetPart = binAddr.substr(0, mask0);\n   const binHostPart = '0'.repeat(128 - mask1);\n   const numSubnets = Math.pow(2, mask1 - mask0);\n   for (let i = 0; i < numSubnets; ++i) {\n      if (!!limit && i >= limit) {\n         break;\n      }\n      const binSubnet = _leftPad(i.toString(2), '0', mask1 - mask0);\n      const binSubAddr = binNetPart + binSubnet + binHostPart;\n      const hexAddr = _bin2addr(binSubAddr);\n      if (!!abbr) {\n         ret.push(abbreviate(hexAddr));\n      } else {\n         ret.push(hexAddr);\n      }\n\n   }\n   // console.log(numSubnets);\n   // console.log(binNetPart, binSubnetPart, binHostPart);\n   // console.log(binNetPart.length, binSubnetPart.length, binHostPart.length);\n   // console.log(ret.length);\n   return ret;\n};\n\nconst range = function (addr, mask0, mask1, abbr) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask0 *= 1;\n   mask1 *= 1;\n   mask1 = mask1 || 128;\n   if (mask0 < 1 || mask1 < 1 || mask0 > 128 || mask1 > 128 || mask0 > mask1) {\n      throw new Error('Invalid masks.');\n   }\n   const binAddr = _addr2bin(addr);\n   const binNetPart = binAddr.substr(0, mask0);\n   const binHostPart = '0'.repeat(128 - mask1);\n   const binStartAddr = binNetPart + '0'.repeat(mask1 - mask0) + binHostPart;\n   const binEndAddr = binNetPart + '1'.repeat(mask1 - mask0) + binHostPart;\n   if (!!abbr) {\n      return {\n         start: abbreviate(_bin2addr(binStartAddr)),\n         end: abbreviate(_bin2addr(binEndAddr)),\n         size: Math.pow(2, mask1 - mask0)\n      };\n   } else {\n      return {\n         start: _bin2addr(binStartAddr),\n         end: _bin2addr(binEndAddr),\n         size: Math.pow(2, mask1 - mask0)\n      };\n   }\n};\n\nconst randomSubnet = function (addr, mask0, mask1, limit, abbr) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask0 *= 1;\n   mask1 *= 1;\n   limit *= 1;\n   mask1 = mask1 || 128;\n   limit = limit || 1;\n   if (mask0 < 1 || mask1 < 1 || mask0 > 128 || mask1 > 128 || mask0 > mask1) {\n      throw new Error('Invalid masks.');\n   }\n   const ret = [];\n   const binAddr = _addr2bin(addr);\n   const binNetPart = binAddr.substr(0, mask0);\n   const binHostPart = '0'.repeat(128 - mask1);\n   const numSubnets = Math.pow(2, mask1 - mask0);\n   for (let i = 0; i < numSubnets && i < limit; ++i) {\n      // generate an binary string with length of mask1 - mask0\n      let binSubnet = '';\n      for (let j = 0; j < mask1 - mask0; ++j) {\n         binSubnet += Math.floor(Math.random() * 2);\n      }\n      const binSubAddr = binNetPart + binSubnet + binHostPart;\n      const hexAddr = _bin2addr(binSubAddr);\n      if (!!abbr) {\n         ret.push(abbreviate(hexAddr));\n      } else {\n         ret.push(hexAddr);\n      }\n   }\n   // console.log(numSubnets);\n   // console.log(binNetPart, binSubnetPart, binHostPart);\n   // console.log(binNetPart.length, binSubnetPart.length, binHostPart.length);\n   // console.log(ret.length);\n   return ret;\n};\n\nconst ptr = function (addr, mask) {\n   if (!_validate(addr)) {\n      throw new Error('Invalid address: ' + addr);\n   }\n   mask *= 1;\n   if (mask < 1 || mask > 128 || Math.floor(mask / 4) != mask / 4) {\n      throw new Error('Invalid masks.');\n   }\n   const fullAddr = normalize(addr);\n   const reverse = fullAddr.replace(/:/g, '').split('').reverse();\n   return reverse.slice(0, (128 - mask) / 4).join('.');\n};\n\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n   exports.normalize = normalize;\n   exports.abbreviate = abbreviate;\n   exports.divideSubnet = divideSubnet;\n   exports.range = range;\n   exports.randomSubnet = randomSubnet;\n   exports.ptr = ptr;\n} else {\n   window.normalize = normalize;\n   window.abbreviate = abbreviate;\n   window.divideSubnet = divideSubnet;\n   window.range = range;\n   window.randomSubnet = randomSubnet;\n   window.ptr = ptr;\n}\n","import ipaddr from 'ipaddr.js';\n// @ts-ignore: Can't find a @types/ip6 package\nimport ip6 from 'ip6';\n\nexport function isIP(addr: string) {\n  return ipaddr.isValid(addr);\n}\n\nexport function version(addr: string): number {\n  try {\n    const parse_addr = ipaddr.parse(addr);\n    const kind = parse_addr.kind();\n\n    if (kind === 'ipv4') {\n      return 4; //IPv4\n    } else if (kind === 'ipv6') {\n      return 6; //IPv6\n    } else {\n      /* istanbul ignore next */\n      return 0; //not 4 or 6\n    }\n  } catch (err) {\n    return 0; //not 4 or 6\n  }\n}\n\nexport function isV4(addr: string) {\n  return version(addr) === 4;\n}\n\nexport function isV6(addr: string) {\n  return version(addr) === 6;\n}\n\nexport function isRange(range: string) {\n  try {\n    const cidr = ipaddr.parseCIDR(range);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n\nexport function inRange(addr: string, range: string | string[]) {\n  if (typeof range === 'string') {\n    if (range.indexOf('/') !== -1) {\n      try {\n        const range_data = range.split('/');\n\n        const parse_addr = ipaddr.parse(addr);\n        const parse_range = ipaddr.parse(range_data[0]);\n\n        //@ts-ignore:  It works.\n        return parse_addr.match(parse_range, range_data[1]);\n      } catch (err) {\n        return false;\n      }\n    } else {\n      addr = isV6(addr) ? ip6.normalize(addr) : addr; //v6 normalize addr\n      range = isV6(range) ? ip6.normalize(range) : range; //v6 normalize range\n\n      return isIP(range as string) && addr === range;\n    }\n  } else if (range && typeof range === 'object') {\n    //list\n    for (const check_range in range) {\n      if (inRange(addr, range[check_range]) === true) {\n        return true;\n      }\n    }\n    return false;\n  } else {\n    return false;\n  }\n}\n\nexport function storeIP(addr: string) {\n  try {\n    var parse_addr = ipaddr.parse(addr);\n    var kind = parse_addr.kind();\n\n    if (kind === 'ipv4') {\n      //is a plain v4 address\n      return addr;\n    } else if (kind === 'ipv6') {\n      //@ts-ignore:  it exists!\n      if (parse_addr.isIPv4MappedAddress()) {\n        //convert v4 mapped to v6 addresses to a v4 in it's original format\n        //@ts-ignore:  it exists!\n        return parse_addr.toIPv4Address().toString();\n      } //is a v6, abbreviate it\n      else {\n        return ip6.abbreviate(addr);\n      }\n    } else {\n      return null; //invalid IP address\n    }\n  } catch (err) {\n    return null; //invalid IP address\n  }\n}\n\n// searchIP is a aliases of storeIP\nexport { storeIP as searchIP };\n\nexport function displayIP(addr: string) {\n  try {\n    var parse_addr = ipaddr.parse(addr);\n    var kind = parse_addr.kind();\n\n    if (kind === 'ipv4') {\n      //is a plain v4 address\n      return addr;\n    } else if (kind === 'ipv6') {\n      //@ts-ignore:  it exists!\n      if (parse_addr.isIPv4MappedAddress()) {\n        //convert v4 mapped to v6 addresses to a v4 in it's original format\n        //@ts-ignore:  it exists!\n        return parse_addr.toIPv4Address().toString();\n      } //is a v6, normalize it\n      else {\n        return ip6.normalize(addr);\n      }\n    } else {\n      return ''; //invalid IP address\n    }\n  } catch (err) {\n    return ''; //invalid IP address\n  }\n}\n","/**\n * All event listeners\n *\n * https://developers.facebook.com/docs/meta-pixel/reference\n * */\n\n// Load pixel event\njQuery(document).on(\"wpmLoadPixels\", () => {\n\n\tif (\n\t\twpmDataLayer?.pixels?.facebook?.pixel_id\n\t\t&& !wpmDataLayer?.pixels?.facebook?.loaded\n\t\t&& !wpm.doesUrlContainPatterns(wpmDataLayer?.pixels?.facebook?.exclusion_patterns)\n\t) {\n\t\tif (wpm.canIFire(\"ads\", \"facebook-ads\")) wpm.loadFacebookPixel()\n\t}\n})\n\n// AddToCart event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmClientSideAddToCart\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"AddToCart\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t})\n\t\twpm.consoleLog(\"Facebook Pixel: AddToCart event sent\", payload.facebook)\n\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n\n// InitiateCheckout event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmClientSideBeginCheckout\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"InitiateCheckout\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t})\n\t\twpm.consoleLog(\"Facebook Pixel: InitiateCheckout event sent\", payload.facebook)\n\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n\n// AddToWishlist event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmClientSideAddToWishlist\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"AddToWishlist\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t})\n\t\twpm.consoleLog(\"Facebook Pixel: AddToWishlist event sent\", payload.facebook)\n\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n\n// ViewContent event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmClientSideViewItem\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"ViewContent\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t})\n\t\twpm.consoleLog(\"Facebook Pixel: ViewContent event sent\", payload.facebook)\n\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n\n\n// view search event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmClientSideSearch\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"Search\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t})\n\t\twpm.consoleLog(\"Facebook Pixel: Search event sent\", payload.facebook)\n\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n\n// load always event\njQuery(document).on(\"wpmLoadAlways\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\twpm.setFbUserData()\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n\n// view order received page event\n// https://developers.facebook.com/docs/meta-pixel/reference\njQuery(document).on(\"wpmClientSideOrderReceivedPage\", (event, payload) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\tfbq(\"track\", \"Purchase\", payload.facebook.custom_data, {\n\t\t\teventID: payload.facebook.event_id,\n\t\t})\n\t\twpm.consoleLog(\"Facebook Pixel: Purchase event sent\", payload.facebook)\n\n\t} catch (error) {\n\t\tconsole.error(error)\n\t}\n})\n","/**\n * Add functions for Facebook\n * */\n\n(function (wpm, $, undefined) {\n\n\tlet fbUserData\n\n\twpm.fbeventsJsUrl = () => {\n\n\t\tlet searchParams = new URLSearchParams(window.location.search)\n\n\t\tif (searchParams.has(\"fbevents-version\")) {\n\t\t\treturn `https://connect.facebook.net/en_US/fbevents.js?v=${searchParams.get(\"fbevents-version\")}`\n\t\t}\n\n\t\treturn wpmDataLayer?.pixels?.facebook?.fbevents_js_url\n\t}\n\n\twpm.loadFacebookPixel = () => {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.facebook.loaded = true\n\n\t\t\t// @formatter:off\n\t\t\t!function(f,b,e,v,n,t,s)\n\t\t\t{if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n\t\t\t\tn.callMethod.apply(n,arguments):n.queue.push(arguments)};\n\t\t\t\tif(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n\t\t\t\tn.queue=[];t=b.createElement(e);t.async=!0;\n\t\t\t\tt.src=v;s=b.getElementsByTagName(e)[0];\n\t\t\t\ts.parentNode.insertBefore(t,s)}(window, document,'script',\n\t\t\t\twpm.fbeventsJsUrl());\n\t\t\t// @formatter:on\n\n\t\t\tlet data = {}\n\n\t\t\t// Add user identifiers to data,\n\t\t\t// and only if fbp was set\n\t\t\tif (wpm.isFbpSet() && wpm.isFbAdvancedMatchingEnabled()) {\n\t\t\t\tdata = {...wpm.getUserIdentifiersForFb()}\n\t\t\t}\n\n\t\t\t// https://developers.facebook.com/docs/meta-pixel/advanced/#automatic-configuration\n\t\t\t// fbq(\"set\", \"autoConfig\", false, wpmDataLayer.pixels.facebook.pixel_id)\n\n\t\t\t// Initialize the Facebook Pixel and send the first PageView event\n\t\t\tfbq(\"init\", wpmDataLayer.pixels.facebook.pixel_id, data)\n\n\t\t\tif (wpmDataLayer?.pixels?.facebook?.mobile_bridge_app_id) {\n\t\t\t\tfbq(\"set\", \"mobileBridge\", wpmDataLayer.pixels.facebook.pixel_id, wpmDataLayer?.pixels?.facebook?.mobile_bridge_app_id)\n\t\t\t}\n\n\t\t\tfbq(\"track\", \"PageView\")\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// https://developers.facebook.com/docs/meta-pixel/advanced/advanced-matching\n\twpm.getUserIdentifiersForFb = () => {\n\n\t\tlet data = {}\n\n\t\t// external ID\n\t\tif (wpmDataLayer?.user?.id?.raw) data.external_id = wpmDataLayer.user.id.raw\n\t\tif (wpmDataLayer?.order?.user_id) data.external_id = wpmDataLayer.order.user_id\n\n\t\t// email\n\t\tif (wpmDataLayer?.user?.email?.facebook) data.em = wpmDataLayer.user.email.facebook\n\t\tif (wpmDataLayer?.order?.billing_email_hashed) data.em = wpmDataLayer.order.billing_email_hashed\n\n\t\t// first name\n\t\tif (wpmDataLayer?.user?.first_name?.facebook) data.fn = wpmDataLayer.user.first_name.facebook\n\t\tif (wpmDataLayer?.order?.billing_first_name) data.fn = wpmDataLayer.order.billing_first_name.toLowerCase()\n\n\t\t// last name\n\t\tif (wpmDataLayer?.user?.last_name?.facebook) data.ln = wpmDataLayer.user.last_name.facebook\n\t\tif (wpmDataLayer?.order?.billing_last_name) data.ln = wpmDataLayer.order.billing_last_name.toLowerCase()\n\n\t\t// phone\n\t\tif (wpmDataLayer?.user?.phone?.facebook) data.ph = wpmDataLayer.user.phone.facebook\n\t\tif (wpmDataLayer?.order?.billing_phone) data.ph = wpmDataLayer.order.billing_phone.replace(\"+\", \"\")\n\n\t\t// city\n\t\tif (wpmDataLayer?.user?.city?.facebook) data.ct = wpmDataLayer.user.city.facebook\n\t\tif (wpmDataLayer?.order?.billing_city) data.ct = wpmDataLayer.order.billing_city.toLowerCase().replace(/ /g, \"\")\n\n\t\t// state\n\t\tif (wpmDataLayer?.user?.state?.facebook) data.st = wpmDataLayer.user.state.facebook\n\t\tif (wpmDataLayer?.order?.billing_state) data.st = wpmDataLayer.order.billing_state.toLowerCase().replace(/[a-zA-Z]{2}-/, \"\")\n\n\t\t// postcode\n\t\tif (wpmDataLayer?.user?.postcode?.facebook) data.zp = wpmDataLayer.user.postcode.facebook\n\t\tif (wpmDataLayer?.order?.billing_postcode) data.zp = wpmDataLayer.order.billing_postcode\n\n\t\t// country\n\t\tif (wpmDataLayer?.user?.country?.facebook) data.country = wpmDataLayer.user.country.facebook\n\t\tif (wpmDataLayer?.order?.billing_country) data.country = wpmDataLayer.order.billing_country.toLowerCase()\n\n\t\treturn data\n\t}\n\n\twpm.getFbRandomEventId = () => (Math.random() + 1).toString(36).substring(2)\n\n\twpm.getFbUserData = () => {\n\n\t\t/**\n\t\t * We need to cache the FB user data for InitiateCheckout\n\t\t * where getting the user data from the browser is too slow\n\t\t * using wpm.getCookie().\n\t\t *\n\t\t * And we need the object merge because the ViewContent hit happens too fast\n\t\t * after adding a variation to the cart because the function to cache\n\t\t * the user data is too slow.\n\t\t *\n\t\t * But we can get the user_data using wpm.getCookie()\n\t\t * because we don't move away from the page and can wait for the browser\n\t\t * to get it.\n\t\t *\n\t\t * Also, the merge ensures that new data will be added to fbUserData if new\n\t\t * data is being added later, like user ID, or fbc.\n\t\t */\n\n\t\tfbUserData = {...fbUserData, ...wpm.getFbUserDataFromBrowser()}\n\n\t\treturn fbUserData\n\t}\n\n\twpm.isFbAdvancedMatchingEnabled = () => {\n\t\tif (wpmDataLayer?.pixels?.facebook?.advanced_matching) {\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\twpm.setFbUserData = () => {\n\t\tfbUserData = wpm.getFbUserDataFromBrowser()\n\t}\n\n\twpm.getFbUserDataFromBrowser = () => {\n\n\t\tlet\n\t\t\tdata = {}\n\n\t\tif (wpm.getCookie(\"_fbp\") && wpm.isValidFbp(wpm.getCookie(\"_fbp\"))) {\n\t\t\tdata.fbp = wpm.getCookie(\"_fbp\")\n\t\t}\n\n\t\tif (wpm.getCookie(\"_fbc\") && wpm.isValidFbc(wpm.getCookie(\"_fbc\"))) {\n\t\t\tdata.fbc = wpm.getCookie(\"_fbc\")\n\t\t}\n\n\t\tif (wpm.isFbAdvancedMatchingEnabled()) {\n\t\t\tif (wpmDataLayer?.user?.id?.raw) data.external_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\tif (navigator.userAgent) data.client_user_agent = navigator.userAgent\n\n\t\t// If a IPv6 address is available in the data store, add it to the user data\n\t\tif (wpm.retrieveData(\"ipv6\")) data.client_ip_address = wpm.retrieveData(\"ipv6\")\n\n\t\treturn data\n\t}\n\n\twpm.isFbpSet = () => {\n\t\treturn !!wpm.getCookie(\"_fbp\")\n\t}\n\n\t// https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc/\n\twpm.isValidFbp = fbp => {\n\n\t\tlet re = new RegExp(/^fb\\.[0-2]\\.\\d{13}\\.\\d{8,20}$/)\n\n\t\treturn re.test(fbp)\n\t}\n\n\t// https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/fbp-and-fbc/\n\twpm.isValidFbc = fbc => {\n\n\t\tlet re = new RegExp(/^fb\\.[0-2]\\.\\d{13}\\.[\\da-zA-Z_-]{8,}/)\n\n\t\treturn re.test(fbc)\n\t}\n\n\t// wpm.fbViewContent = (product = null) => {\n\t//\n\t// \ttry {\n\t// \t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\t//\n\t// \t\tlet eventId = wpm.getFbRandomEventId()\n\t//\n\t// \t\tlet data = {}\n\t//\n\t// \t\tif (product) {\n\t// \t\t\tdata.content_type = \"product\"\n\t// \t\t\tdata.content_name = product.name\n\t// \t\t\t// data.content_category = product.category\n\t// \t\t\tdata.content_ids  = product.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]\n\t// \t\t\tdata.currency     = wpmDataLayer.shop.currency\n\t// \t\t\tdata.value        = product.price\n\t// \t\t}\n\t//\n\t// \t\tfbq(\"track\", \"ViewContent\", data, {\n\t// \t\t\teventID: eventId,\n\t// \t\t})\n\t//\n\t// \t\tlet capiData = {\n\t// \t\t\tevent_name      : \"ViewContent\",\n\t// \t\t\tevent_id        : eventId,\n\t// \t\t\tuser_data       : wpm.getFbUserData(),\n\t// \t\t\tevent_source_url: window.location.href,\n\t// \t\t}\n\t//\n\t// \t\tif (product) {\n\t// \t\t\tproduct[\"currency\"]  = wpmDataLayer.shop.currency\n\t// \t\t\tcapiData.custom_data = wpm.fbGetProductDataForCapiEvent(product)\n\t// \t\t}\n\t//\n\t// \t\tjQuery(document).trigger(\"wpmFbCapiEvent\", capiData)\n\t// \t} catch (e) {\n\t// \t\tconsole.error(e)\n\t// \t}\n\t// }\n\n\twpm.fbGetProductDataForCapiEvent = product => {\n\t\treturn {\n\t\t\tcontent_type: \"product\",\n\t\t\tcontent_name: product.name,\n\t\t\tcontent_ids : [\n\t\t\t\tproduct.dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type],\n\t\t\t],\n\t\t\tvalue       : parseFloat(product.quantity * product.price),\n\t\t\tcurrency    : product.currency,\n\t\t}\n\t}\n\n\twpm.facebookContentIds = () => {\n\t\tlet prodIds = []\n\n\t\tObject.values(wpmDataLayer.order.items).forEach(item => {\n\t\t\tif (wpmDataLayer?.shop?.variations_output && 0 !== item.variation_id) {\n\t\t\t\tprodIds.push(String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]))\n\t\t\t} else {\n\t\t\t\tprodIds.push(String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type]))\n\t\t\t}\n\t\t})\n\n\t\treturn prodIds\n\t}\n\n\twpm.trackCustomFacebookEvent = (eventName, customData = {}) => {\n\t\ttry {\n\t\t\tif (!wpmDataLayer?.pixels?.facebook?.loaded) return\n\n\t\t\tlet eventId = wpm.getFbRandomEventId()\n\n\t\t\tfbq(\"trackCustom\", eventName, customData, {\n\t\t\t\teventID: eventId,\n\t\t\t})\n\n\t\t\tjQuery(document).trigger(\"wpmFbCapiEvent\", {\n\t\t\t\tevent_name      : eventName,\n\t\t\t\tevent_id        : eventId,\n\t\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\t\tevent_source_url: window.location.href,\n\t\t\t\tcustom_data     : customData,\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.fbGetContentIdsFromCart = () => {\n\n\t\tlet content_ids = []\n\n\t\tfor (const key in wpmDataLayer.cart) {\n\t\t\tcontent_ids.push(wpmDataLayer.products[key].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type])\n\t\t}\n\n\t\treturn content_ids\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Facebook loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n\n","/**\n * Load Google Ads event listeners\n * */\n\n// view_item_list event\njQuery(document).on(\"wpmViewItemList\", (event, product) => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\n\t\tif (\n\t\t\twpmDataLayer?.shop?.variations_output &&\n\t\t\tproduct.is_variable &&\n\t\t\twpmDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t) return\n\n\t\t// try to prevent that WC sends cached hits to Google\n\t\tif (!product) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\titems  : [{\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}],\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item_list\", data)\n\t\t\twpm.consoleLog(\"Google Ads: view_item_list event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// add_to_cart event\njQuery(document).on(\"wpmAddToCart\", (event, product) => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\tvalue  : product.quantity * product.price,\n\t\t\titems  : [{\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tquantity                : product.quantity,\n\t\t\t\tprice                   : product.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}],\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_cart\", data)\n\t\t\twpm.consoleLog(\"Google Ads: add_to_cart event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view_item event\njQuery(document).on(\"wpmViewItem\", (event, product = null) => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t}\n\n\t\tif (product) {\n\t\t\tdata.value = (product.quantity ? product.quantity : 1) * product.price\n\t\t\tdata.items = [{\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tquantity                : (product.quantity ? product.quantity : 1),\n\t\t\t\tprice                   : product.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}]\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item\", data)\n\t\t\twpm.consoleLog(\"Google Ads: view_item event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// view search event\njQuery(document).on(\"pmwEvent:Search\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\n\t\tlet products = []\n\n\t\tObject.values(wpmDataLayer.products).forEach(product => {\n\n\t\t\tif (\n\t\t\t\twpmDataLayer?.shop?.variations_output &&\n\t\t\t\tproduct.is_variable &&\n\t\t\t\twpmDataLayer.pixels.google.ads.dynamic_remarketing.send_events_with_parent_ids === false\n\t\t\t) return\n\n\t\t\tproducts.push({\n\t\t\t\tid                      : product.dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type],\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t})\n\t\t})\n\n\t\t// console.log(products);\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\t// value  : 1 * product.price,\n\t\t\titems: products,\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_search_results\", data)\n\t\t\twpm.consoleLog(\"Google Ads: view_search_results event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// user log in event\njQuery(document).on(\"wpmLogin\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) return\n\t\tif (!wpmDataLayer?.pixels?.google?.ads?.dynamic_remarketing?.status) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"login\", data)\n\t\t\twpm.consoleLog(\"Google Ads: login event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n/**\n * Google Ads remarketing purchase\n *\n * https://support.google.com/google-ads/answer/7305793\n */\njQuery(document).on(\"wpmOrderReceivedPage\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpm.getGoogleAdsConversionIdentifiersWithLabel())) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpm.getGoogleAdsConversionIdentifiers(),\n\t\t\tvalue  : wpmDataLayer.order.value.marketing,\n\t\t\t// currency: wpmDataLayer.order.currency,\n\t\t\titems: wpm.getGoogleAdsRegularOrderItems(),\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"purchase\", data)\n\t\t\twpm.consoleLog(\"Google Ads: purchase event sent (for remarketing lists)\", data)\n\t\t})\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n/**\n * Google Ads conversion event\n *\n * new_customer parameter: https://support.google.com/google-ads/answer/9917012\n * cart data: https://support.google.com/google-ads/answer/9028614\n * customer_lifetime_value is undocumented, but available in gtag.js\n */\njQuery(document).on(\"wpmOrderReceivedPage\", () => {\n\n\ttry {\n\t\tif (jQuery.isEmptyObject(wpm.getGoogleAdsConversionIdentifiersWithLabel())) return\n\t\tif (!wpm.googleConfigConditionsMet(\"ads\")) return\n\n\t\tlet data = {\n\t\t\tsend_to       : wpm.getGoogleAdsConversionIdentifiersWithLabel(),\n\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\tvalue         : wpmDataLayer.order.value.marketing,\n\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\tnew_customer  : wpmDataLayer.order.new_customer,\n\t\t}\n\n\t\tif (wpmDataLayer?.order?.value?.ltv?.marketing) {\n\t\t\tdata.customer_lifetime_value = wpmDataLayer.order.value.ltv.marketing\n\t\t}\n\n\t\tif (wpmDataLayer?.user?.id?.raw) {\n\t\t\tdata.user_id = wpmDataLayer.user.id.raw\n\t\t}\n\n\t\t// https://support.google.com/google-ads/answer/9028614\n\t\tif (wpmDataLayer?.order?.aw_merchant_id) {\n\t\t\tdata.discount         = wpmDataLayer.order.discount\n\t\t\tdata.aw_merchant_id   = wpmDataLayer.order.aw_merchant_id\n\t\t\tdata.aw_feed_country  = wpmDataLayer.order.aw_feed_country\n\t\t\tdata.aw_feed_language = wpmDataLayer.order.aw_feed_language\n\t\t\tdata.items            = wpm.getGoogleAdsRegularOrderItems()\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\t// Event needs to be \"purchase\" (not \"conversion\") in order to be able to track cart data:\n\t\t\t// https://support.google.com/google-ads/answer/9028614\n\t\t\tgtag(\"event\", \"purchase\", data)\n\t\t\twpm.consoleLog(\"Google Ads: conversion event sent\", data)\n\t\t})\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n","/**\n * Load Google Ads functions\n * */\n\n(function (wpm, $, undefined) {\n\n\n\twpm.getGoogleAdsConversionIdentifiersWithLabel = () => {\n\n\t\tlet conversionIdentifiers = []\n\n\t\tif (wpmDataLayer?.pixels?.google?.ads?.conversionIds) {\n\t\t\tObject.entries(wpmDataLayer.pixels.google.ads.conversionIds).forEach(([key, item]) => {\n\t\t\t\tif (item) {\n\t\t\t\t\tconversionIdentifiers.push(key + \"/\" + item)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn conversionIdentifiers\n\t}\n\n\twpm.getGoogleAdsConversionIdentifiers =  () => {\n\n\t\tlet conversionIdentifiers = []\n\n\t\tObject.keys(wpmDataLayer.pixels.google.ads.conversionIds).forEach((key) => {\n\t\t\tconversionIdentifiers.push(key)\n\t\t})\n\n\t\treturn conversionIdentifiers\n\t}\n\n\twpm.getGoogleAdsRegularOrderItems = () => {\n\n\t\tlet orderItems = []\n\n\t\tObject.values(wpmDataLayer.order.items).forEach((item) => {\n\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity                : item.quantity,\n\t\t\t\tprice                   : item.price,\n\t\t\t\tgoogle_business_vertical: wpmDataLayer.pixels.google.ads.google_business_vertical,\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.shop?.variations_output && 0 !== item.variation_id) {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t} else {\n\n\t\t\t\torderItem.id = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.ads.dynamic_remarketing.id_type])\n\t\t\t\torderItems.push(orderItem)\n\t\t\t}\n\t\t})\n\n\t\treturn orderItems\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Load Google Ads\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","/**\n * Load GA4 event listeners\n * */\n\n// view_item_list event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item_list\njQuery(document).on(\"wpmViewItemList\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to       : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\titems         : [wpm.ga4GetFullProductItemData(product)],\n\t\t\titem_list_name: wpmDataLayer.shop.list_name, // doesn't make sense on mini_cart\n\t\t\titem_list_id  : wpmDataLayer.shop.list_id, // doesn't make sense on mini_cart\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item_list\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: view_item_list event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// select_item event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#select_item\njQuery(document).on(\"wpmSelectItem\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\titems  : [wpm.ga4GetFullProductItemData(product)],\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"select_item\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: select_item event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// add_to_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_cart\njQuery(document).on(\"wpmAddToCart\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : product.price * product.quantity,\n\t\t\titems   : [wpm.ga4GetFullProductItemData(product)],\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_cart\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: add_to_cart event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view_item event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_item\njQuery(document).on(\"wpmViewItem\", (event, product = null) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tlet data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t}\n\n\t\tif (product) {\n\t\t\tdata.currency = wpmDataLayer.shop.currency\n\t\t\t// data.value = 0\n\t\t\tdata.items    = [wpm.ga4GetFullProductItemData(product)]\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_item\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: view_item event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// add_to_wishlist event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#add_to_wishlist\njQuery(document).on(\"wpmAddToWishlist\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : product.price * product.quantity,\n\t\t\titems   : [wpm.ga4GetFullProductItemData(product)],\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"add_to_wishlist\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: add_to_wishlist event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// remove_from_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#remove_from_cart\njQuery(document).on(\"wpmRemoveFromCart\", (event, product) => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : product.price * product.quantity,\n\t\t\titems   : [wpm.ga4GetFullProductItemData(product)],\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"remove_from_cart\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: remove_from_cart event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// begin_checkout event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#begin_checkout\njQuery(document).on(\"wpmBeginCheckout\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to: wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\t// coupon: \"\",\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : wpm.getCartValue(),\n\t\t\titems   : wpm.getCartItemsGa4(),\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"begin_checkout\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: begin_checkout event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view_cart event\n// https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#view_cart\njQuery(document).on(\"wpmViewCart\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tif (jQuery.isEmptyObject(wpmDataLayer.cart)) return\n\n\t\tlet products  = []\n\t\tlet cartValue = null\n\n\t\tObject.values(wpmDataLayer.cart).forEach(product => {\n\t\t\tproducts.push(wpm.ga4GetFullProductItemData(product))\n\t\t\tcartValue = cartValue + product.quantity * product.price\n\t\t})\n\n\t\tconst data = {\n\t\t\tsend_to : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tcurrency: wpmDataLayer.shop.currency,\n\t\t\tvalue   : cartValue.toFixed(2),\n\t\t\titems   : products,\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_cart\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: view_cart event sent\", data)\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view search event\njQuery(document).on(\"pmwEvent:Search\", () => {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.eec) return\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tlet products = []\n\n\t\tObject.values(wpmDataLayer.products).forEach(product => {\n\t\t\tproducts.push(wpm.ga4GetFullProductItemData(product))\n\t\t})\n\n\t\tconst data = {\n\t\t\tsend_to    : wpmDataLayer.pixels.google.analytics.ga4.measurement_id,\n\t\t\tsearch_term: wpm.getSearchTermFromUrl(),\n\t\t\titems      : products,\n\t\t}\n\n\t\twpm.gtagLoaded().then(() => {\n\t\t\tgtag(\"event\", \"view_search_results\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: view_search_results event sent\", data)\n\t\t})\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// view order received page event\njQuery(document).on(\"wpmOrderReceivedPage\", function () {\n\n\ttry {\n\t\tif (!wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) return\n\n\t\t// ga4_server_and_browser_tracking experiment\n\t\t// https://app.asana.com/0/1110999795232049/1204453591507565\n\t\t// ga4e: if (wpmDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) {\n\t\t// \tif (wpmDataLayer?.experiments?.ga4_server_and_browser_tracking) {\n\t\t// \t\tbreak ga4e\n\t\t// \t}\n\t\t// \treturn\n\t\t// }\n\n\t\t// Deactivated for the ga4_server_and_browser_tracking experiment\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.mp_active) return\n\t\tif (!wpm.googleConfigConditionsMet(\"analytics\")) return\n\n\t\tconst data = {\n\t\t\tsend_to       : [wpmDataLayer.pixels.google.analytics.ga4.measurement_id],\n\t\t\ttransaction_id: wpmDataLayer.order.number,\n\t\t\taffiliation   : wpmDataLayer.order.affiliation,\n\t\t\tcurrency      : wpmDataLayer.order.currency,\n\t\t\tvalue         : wpmDataLayer.order.value.total,\n\t\t\tdiscount      : wpmDataLayer.order.discount,\n\t\t\ttax           : wpmDataLayer.order.tax,\n\t\t\tshipping      : wpmDataLayer.order.shipping,\n\t\t\tcoupon        : wpmDataLayer.order.coupon,\n\t\t\titems         : wpm.getGA4OrderItems(),\n\t\t}\n\n\t\twpm.gtagLoaded().then(function () {\n\t\t\tgtag(\"event\", \"purchase\", data)\n\t\t\twpm.consoleLog(\"Google Analytics: purchase event sent\", data)\n\t\t})\n\n\t\t// wpm.gtagLoaded().then(function () {\n\t\t// \tgtag(\"get\", wpmDataLayer.pixels.google.analytics.ga4.measurement_id, \"client_id\", (client_id) => {\n\t\t// \t\tconsole.log(\"transaction_id: \" + wpmDataLayer.order.number + \" client_id: \" + client_id)\n\t\t// \t})\n\t\t// })\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n","/**\n * Load GA4 functions\n * */\n\n(function (wpm, $, undefined) {\n\n\twpm.getGA4OrderItems = function () {\n\n\t\t// \"item_id\"      : \"34\",\n\t\t// \"item_name\"    : \"Hoodie\",\n\t\t// \"quantity\"     : 1,\n\t\t// \"item_brand\"   : \"\",\n\t\t// \"item_variant\" : \"Color: blue | Logo: yes\",\n\t\t// \"price\"        : 45,\n\t\t// \"currency\"     : \"CHF\",\n\t\t// \"item_category\": \"Hoodies\"\n\n\n\t\tlet orderItems = []\n\n\t\tObject.values(wpmDataLayer.order.items).forEach((item) => {\n\t\t\tlet orderItem\n\n\t\t\torderItem = {\n\t\t\t\tquantity     : item.quantity,\n\t\t\t\tprice        : item.price,\n\t\t\t\titem_name    : item.name,\n\t\t\t\tcurrency     : wpmDataLayer.order.currency,\n\t\t\t\titem_category: wpmDataLayer.products[item.id].category.join(\"/\"),\n\t\t\t}\n\n\t\t\tif (0 !== item.variation_id) {\n\n\t\t\t\torderItem.item_id      = String(wpmDataLayer.products[item.variation_id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type])\n\t\t\t\torderItem.item_variant = wpmDataLayer.products[item.variation_id].variant_name\n\t\t\t\torderItem.item_brand   = wpmDataLayer.products[item.variation_id].brand\n\t\t\t} else {\n\n\t\t\t\torderItem.item_id    = String(wpmDataLayer.products[item.id].dyn_r_ids[wpmDataLayer.pixels.google.analytics.id_type])\n\t\t\t\torderItem.item_brand = wpmDataLayer.products[item.id].brand\n\t\t\t}\n\n\t\t\torderItems.push(orderItem)\n\t\t})\n\n\t\treturn orderItems\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * GA4 loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n","/**\n * Google Analytics loader\n */\n\nrequire(\"./ga4/loader\")\n","/**\n * Load Google base event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"wpmLoadPixels\", function () {\n\n\tif (typeof wpmDataLayer?.pixels?.google?.state === \"undefined\") {\n\t\tif (wpm.canGoogleLoad()) {\n\t\t\twpm.loadGoogle()\n\t\t} else {\n\t\t\twpm.logPreventedPixelLoading(\"google\", \"analytics / ads\")\n\t\t}\n\t}\n})\n","/**\n * Load Google base functions\n */\n\n(function (wpm, $, undefined) {\n\n\twpm.googleConfigConditionsMet = (type) => {\n\n\t\t// always returns true if Google Consent Mode is active\n\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\t\t\treturn true\n\t\t} else if (wpm.getConsentValues().mode === \"category\") {\n\t\t\treturn wpm.getConsentValues().categories[type] === true\n\t\t} else if (wpm.getConsentValues().mode === \"pixel\") {\n\t\t\treturn wpm.getConsentValues().pixels.includes(\"google-\" + type)\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.getVisitorConsentStatusAndUpdateGoogleConsentSettings = (google_consent_settings) => {\n\n\t\tif (wpm.getConsentValues().mode === \"category\") {\n\n\t\t\tif (wpm.getConsentValues().categories.analytics) google_consent_settings.analytics_storage = \"granted\"\n\t\t\tif (wpm.getConsentValues().categories.ads) {\n\t\t\t\tgoogle_consent_settings.ad_storage         = \"granted\"\n\t\t\t\tgoogle_consent_settings.ad_user_data       = \"granted\"\n\t\t\t\tgoogle_consent_settings.ad_personalization = \"granted\"\n\t\t\t}\n\t\t} else if ((wpm.getConsentValues().mode === \"pixel\")) {\n\n\t\t\tgoogle_consent_settings.analytics_storage  = wpm.getConsentValues().pixels.includes(\"google-analytics\") ? \"granted\" : \"denied\"\n\t\t\tgoogle_consent_settings.ad_storage         = wpm.getConsentValues().pixels.includes(\"google-ads\") ? \"granted\" : \"denied\"\n\t\t\tgoogle_consent_settings.ad_user_data       = wpm.getConsentValues().pixels.includes(\"google-ads\") ? \"granted\" : \"denied\"\n\t\t\tgoogle_consent_settings.ad_personalization = wpm.getConsentValues().pixels.includes(\"google-ads\") ? \"granted\" : \"denied\"\n\t\t}\n\n\t\treturn google_consent_settings\n\t}\n\n\twpm.fireGtagGoogleAds = () => {\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.ads.state = \"loading\"\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.ads?.enhanced_conversions?.active) {\n\t\t\t\tObject.keys(wpmDataLayer.pixels.google.ads.conversionIds).forEach((key) => {\n\t\t\t\t\tgtag(\"config\", key, {\"allow_enhanced_conversions\": true})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tObject.keys(wpmDataLayer.pixels.google.ads.conversionIds).forEach((key) => {\n\t\t\t\t\tgtag(\"config\", key)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.ads?.conversionIds && wpmDataLayer?.pixels?.google?.ads?.phone_conversion_label && wpmDataLayer?.pixels?.google?.ads?.phone_conversion_number) {\n\t\t\t\tgtag(\"config\", Object.keys(wpmDataLayer.pixels.google.ads.conversionIds)[0] + \"/\" + wpmDataLayer.pixels.google.ads.phone_conversion_label, {\n\t\t\t\t\tphone_conversion_number: wpmDataLayer.pixels.google.ads.phone_conversion_number,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// https://support.google.com/google-ads/answer/9888145#zippy=%2Cvalidate-your-implementation-using-chrome-developer-tools\n\t\t\tif (\n\t\t\t\twpmDataLayer?.shop?.page_type\n\t\t\t\t&& \"order_received_page\" === wpmDataLayer.shop.page_type\n\t\t\t\t&& wpmDataLayer?.order?.google?.ads?.enhanced_conversion_data\n\t\t\t) {\n\t\t\t\tgtag(\"set\", \"user_data\", wpmDataLayer.order.google.ads.enhanced_conversion_data)\n\t\t\t}\n\n\t\t\twpmDataLayer.pixels.google.ads.state = \"ready\"\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// https://developers.google.com/tag-platform/gtagjs/reference\n\twpm.fireGtagGoogleAnalyticsGA4 = () => {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.google.analytics.ga4.state = \"loading\"\n\n\t\t\tlet parameters = wpmDataLayer.pixels.google.analytics.ga4.parameters\n\n\t\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.debug_mode) {\n\t\t\t\tparameters.debug_mode = true\n\t\t\t}\n\n\t\t\tgtag(\"config\", wpmDataLayer.pixels.google.analytics.ga4.measurement_id, parameters)\n\n\t\t\twpmDataLayer.pixels.google.analytics.ga4.state = \"ready\"\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.isGoogleActive = () => {\n\n\t\tif (\n\t\t\twpmDataLayer?.pixels?.google?.analytics?.universal?.property_id ||\n\t\t\twpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id ||\n\t\t\t!jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)\n\t\t) {\n\t\t\treturn true\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.getGoogleGtagId = () => {\n\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {\n\t\t\treturn wpmDataLayer.pixels.google.analytics.ga4.measurement_id\n\t\t}\n\n\t\tif (\n\t\t\twpmDataLayer?.pixels?.google?.ads?.conversionIds\n\t\t\t&& Object.keys(wpmDataLayer.pixels.google.ads.conversionIds)[0]\n\t\t) {\n\t\t\treturn Object.keys(wpmDataLayer.pixels.google.ads.conversionIds)[0]\n\t\t}\n\n\t\tif (wpmDataLayer?.pixels?.google?.analytics?.universal?.property_id) {\n\t\t\tconsole.log(\"UA analytics ID\")\n\t\t\treturn wpmDataLayer.pixels.google.analytics.universal.property_id\n\t\t}\n\n\t\treturn \"\"\n\t}\n\n\n\twpm.loadGoogle = () => {\n\n\t\tif (!wpm.isGoogleActive()) {\n\t\t\treturn\n\t\t}\n\n\t\twpmDataLayer.pixels.google.state = \"loading\"\n\n\t\twpm.loadScriptAndCacheIt(\"https://www.googletagmanager.com/gtag/js?id=\" + wpm.getGoogleGtagId())\n\t\t\t.then((script, textStatus) => {\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// If Google TCF is active, output the TCF script\n\t\t\t\t\t// https://developers.google.com/tag-platform/security/guides/implement-TCF-strings\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.tcf_support) {\n\t\t\t\t\t\twindow[\"gtag_enable_tcf_support\"] = true\n\t\t\t\t\t}\n\n\t\t\t\t\t// Initiate Google dataLayer and gtag\n\t\t\t\t\twindow.dataLayer = window.dataLayer || []\n\t\t\t\t\twindow.gtag      = function gtag() {\n\t\t\t\t\t\tdataLayer.push(arguments)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Google Consent Mode\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\n\t\t\t\t\t\tlet google_consent_settings = {\n\t\t\t\t\t\t\tad_storage             : wpmDataLayer.pixels.google.consent_mode.ad_storage,\n\t\t\t\t\t\t\tad_user_data           : wpmDataLayer.pixels.google.consent_mode.ad_user_data,\n\t\t\t\t\t\t\tad_personalization     : wpmDataLayer.pixels.google.consent_mode.ad_personalization,\n\t\t\t\t\t\t\tanalytics_storage      : wpmDataLayer.pixels.google.consent_mode.analytics_storage,\n\t\t\t\t\t\t\tfunctionality_storage  : \"granted\",\n\t\t\t\t\t\t\tpersonalization_storage: \"granted\",\n\t\t\t\t\t\t\tsecurity_storage       : \"granted\",\n\t\t\t\t\t\t\twait_for_update        : wpmDataLayer.pixels.google.consent_mode.wait_for_update,\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.region) {\n\t\t\t\t\t\t\tgoogle_consent_settings.region = wpmDataLayer.pixels.google.consent_mode.region\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgoogle_consent_settings = wpm.getVisitorConsentStatusAndUpdateGoogleConsentSettings(google_consent_settings)\n\n\t\t\t\t\t\tgtag(\"consent\", \"default\", google_consent_settings)\n\t\t\t\t\t\tgtag(\"set\", \"ads_data_redaction\", wpmDataLayer.pixels.google.consent_mode.ads_data_redaction)\n\t\t\t\t\t\tgtag(\"set\", \"url_passthrough\", wpmDataLayer.pixels.google.consent_mode.url_passthrough)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Google Linker\n\t\t\t\t\t// https://developers.google.com/gtagjs/devguide/linker\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.linker?.settings) {\n\t\t\t\t\t\tgtag(\"set\", \"linker\", wpmDataLayer.pixels.google.linker.settings)\n\t\t\t\t\t}\n\n\t\t\t\t\tgtag(\"js\", new Date())\n\t\t\t\t\tgtag(\"set\", \"developer_id.dNDI5Yz\", true)\n\n\t\t\t\t\t// Google Ads loader\n\t\t\t\t\tif (!jQuery.isEmptyObject(wpmDataLayer?.pixels?.google?.ads?.conversionIds)) {  // Only run if the pixel has set up\n\t\t\t\t\t\tif (wpm.googleConfigConditionsMet(\"ads\")) {  \t\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\twpm.fireGtagGoogleAds()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twpm.logPreventedPixelLoading(\"google-ads\", \"ads\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// GA4 loader\n\t\t\t\t\tif (wpmDataLayer?.pixels?.google?.analytics?.ga4?.measurement_id) {  \t\t\t// Only run if the pixel has set up\n\n\t\t\t\t\t\tif (wpm.googleConfigConditionsMet(\"analytics\")) {\t\t\t\t\t\t// Only run if cookie consent has been given\n\t\t\t\t\t\t\twpm.fireGtagGoogleAnalyticsGA4()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twpm.logPreventedPixelLoading(\"ga4\", \"analytics\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\twpmDataLayer.pixels.google.state = \"ready\"\n\n\t\t\t\t\twpm.triggerQueuedEvents(\"gtag\")\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e)\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\twpm.canGoogleLoad = () => {\n\n\t\tif (wpmDataLayer?.pixels?.google?.consent_mode?.is_active) {\n\t\t\treturn true\n\t\t} else if (\"category\" === wpm.getConsentValues().mode) {\n\t\t\treturn !!(wpm.getConsentValues().categories[\"ads\"] || wpm.getConsentValues().categories[\"analytics\"])\n\t\t} else if (\"pixel\" === wpm.getConsentValues().mode) {\n\t\t\treturn wpm.getConsentValues().pixels.includes(\"google-ads\") || wpm.getConsentValues().pixels.includes(\"google-analytics\")\n\t\t} else {\n\t\t\tconsole.error(\"Couldn't find a valid load condition for Google mode in wpmConsentValues\")\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.gtagLoaded = () => {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tif (typeof wpmDataLayer?.pixels?.google?.state === \"undefined\") reject()\n\n\t\t\tlet startTime = 0\n\t\t\tlet timeout   = 5000\n\t\t\tlet frequency = 200;\n\n\t\t\t(function wait() {\n\t\t\t\tif (wpmDataLayer?.pixels?.google?.state === \"ready\") return resolve()\n\t\t\t\tif (startTime >= timeout) {\n\t\t\t\t\twpm.consoleError(\"Google gtag failed to load. Probably a third party script is blocking it.\")\n\t\t\t\t\treturn reject()\n\t\t\t\t}\n\t\t\t\tstartTime += frequency\n\t\t\t\tsetTimeout(wait, frequency)\n\t\t\t})()\n\t\t})\n\t}\n\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Load Google base\n */\n\n// Load base\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// \trequire(\"./event_listeners_premium\")\n// }\n// #endif\n","/**\n * Load Google\n */\n\n// Load base\nrequire(\"./base/loader\")\n\n//Load additional Google libraries\nrequire(\"./ads/loader\")\nrequire(\"./analytics/loader\")\n\n","/**\n * Load Hotjar event listeners\n */\n\n// Pixel load event listener\njQuery(document).on(\"wpmLoadPixels\", function () {\n\n\tif (wpmDataLayer?.pixels?.hotjar?.site_id && !wpmDataLayer?.pixels?.hotjar?.loaded) {\n\t\tif (wpm.canIFire(\"analytics\", \"hotjar\") && !wpmDataLayer?.pixels?.hotjar?.loaded) wpm.load_hotjar_pixel()\n\t}\n})\n","/**\n * Load Hotjar functions\n */\n\n(function (wpm, $, undefined) {\n\n\twpm.load_hotjar_pixel = function () {\n\n\t\ttry {\n\t\t\twpmDataLayer.pixels.hotjar.loaded = true;\n\n\t\t\t// @formatter:off\n\t\t\t(function(h,o,t,j,a,r){\n\t\t\t\th.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n\t\t\t\th._hjSettings={hjid:wpmDataLayer.pixels.hotjar.site_id,hjsv:6};\n\t\t\t\ta=o.getElementsByTagName('head')[0];\n\t\t\t\tr=o.createElement('script');r.async=1;\n\t\t\t\tr.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n\t\t\t\ta.appendChild(r);\n\t\t\t})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');\n\t\t\t// @formatter:on\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n","/**\n * Hotjar loader\n */\n\nrequire(\"./functions\")\nrequire(\"./event_listeners\")\n","(function (wpm, $, undefined) {\n\n\tconst PMW_LIBRARY_VERSION = \"1.41.0\"\n\n\twpm.getLibraryVersion = () => {\n\t\treturn PMW_LIBRARY_VERSION\n\t}\n\n\twpm.checkLibraryVersion = () => {\n\n\t\tif (wpm.getLibraryVersion() !== wpmDataLayer?.version?.number) {\n\t\t\tconsole.error(`Pixel Manager: ${wpm.getLibraryVersion()} and wpmDataLayer.version.number ${wpmDataLayer.version.number} do not match. Delete the server-side cache and try again.`)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n\n","/**\n * Consent Mode functions\n */\n\n(function (wpm, $, undefined) {\n\n\t/**\n\t * Handle Cookie Management Platforms\n\t */\n\n\tconst getComplianzCookies = () => {\n\n\t\tlet cmplz_statistics     = wpm.getCookie(\"cmplz_statistics\") || wpm.getCookie(\"cmplz_rt_statistics\")\n\t\tlet cmplz_marketing      = wpm.getCookie(\"cmplz_marketing\") || wpm.getCookie(\"cmplz_rt_marketing\")\n\t\tlet cmplz_consent_status = wpm.getCookie(\"cmplz_consent_status\") || wpm.getCookie(\"cmplz_banner-status\") || wpm.getCookie(\"cmplz_rt_banner-status\")\n\n\t\tif (cmplz_consent_status) {\n\t\t\treturn {\n\t\t\t\tanalytics       : cmplz_statistics === \"allow\",\n\t\t\t\tads             : cmplz_marketing === \"allow\",\n\t\t\t\tvisitorHasChosen: true,\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\tconst getCookieYesCookies = () => {\n\n\t\t/**\n\t\t * Process the new cookieyes-consent cookie that contains all the information\n\t\t */\n\n\t\tlet cookie = wpm.getCookie(\"cookieyes-consent\")\n\n\t\tif (cookie) {\n\n\t\t\t// This cookie has the following structure:\n\t\t\t// consentid:OERmMEJCSVQxRk1SRWVwZkJTUjFBZTJHSEhkdjhLbUI,consent:yes,action:yes,necessary:yes,functional:yes,analytics:yes,performance:yes,advertisement:yes\n\t\t\t// First split the comma-separated values into an array\n\t\t\t// Then split each array item into a key value pair. The key and the value are separated by a colon.\n\t\t\t// Then create an object from the key value pairs.\n\t\t\t// Then console.log the object to see what it looks like.\n\n\t\t\tcookie = cookie\n\t\t\t\t.split(\",\")\n\t\t\t\t.map(item => item.split(\":\"))\n\t\t\t\t.reduce((acc, [key, value]) => ({\n\t\t\t\t\t...acc,\n\t\t\t\t\t[key]: value,\n\t\t\t\t}), {})\n\n\t\t\t// console.log(\"new cookie\", cookie)\n\n\t\t\treturn {\n\t\t\t\tanalytics       : cookie.analytics && cookie.analytics === \"yes\",\n\t\t\t\tads             : cookie.advertisement && cookie.advertisement === \"yes\",\n\t\t\t\tvisitorHasChosen: cookie.advertisement && cookie.advertisement === \"yes\",\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process the old cookieyes-* cookies\n\t\t *\n\t\t * @param cookieNames\n\t\t * @returns {string|string|boolean}\n\t\t */\n\n\t\tfunction checkCookie(cookieNames) {\n\t\t\tfor (let name of cookieNames) {\n\n\t\t\t\tconst cookieValue = wpm.getCookie(name)\n\n\t\t\t\tif (cookieValue) {\n\t\t\t\t\treturn cookieValue\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t}\n\n\t\tlet analyticsCookieNames = [\n\t\t\t\"cookielawinfo-checkbox-analytics\",\n\t\t\t\"cookielawinfo-checkbox-analytiques\",\n\t\t\t\"cookieyes-analytics\",\n\t\t]\n\n\t\tconst adsCookieNames = [\n\t\t\t\"cookielawinfo-checkbox-advertisement\",\n\t\t\t\"cookielawinfo-checkbox-performance\",\n\t\t\t\"cookielawinfo-checkbox-publicite\",\n\t\t\t\"cookieyes-advertisement\",\n\t\t]\n\n\t\tconst visitorHasChosenCookieNames = [\n\t\t\t\"CookieLawInfoConsent\",\n\t\t\t\"cky-action\",\n\t\t]\n\n\t\t// let analyticsCookie  = wpm.getCookie(\"cookielawinfo-checkbox-analytics\") || wpm.getCookie(\"cookielawinfo-checkbox-analytiques\")\n\t\t// let adsCookie        = wpm.getCookie(\"cookielawinfo-checkbox-advertisement\") || wpm.getCookie(\"cookielawinfo-checkbox-performance\") || wpm.getCookie(\"cookielawinfo-checkbox-publicite\")\n\t\t// let visitorHasChosen  = wpm.getCookie(\"CookieLawInfoConsent\")\n\n\t\tconst analyticsCookie  = checkCookie(analyticsCookieNames)\n\t\tconst adsCookie        = checkCookie(adsCookieNames)\n\t\tconst visitorHasChosen = checkCookie(visitorHasChosenCookieNames)\n\n\t\tif (analyticsCookie || adsCookie) {\n\n\t\t\treturn {\n\t\t\t\tanalytics       : analyticsCookie === \"yes\",\n\t\t\t\tads             : adsCookie === \"yes\",\n\t\t\t\tvisitorHasChosen: !!visitorHasChosen,\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\t/**\n\t * Get the Iubenda cookie.\n\t * Then parse it and return the analytics and marketing values.\n\t *\n\t * 1 = Necessary\n\t * 2 = Functionality\n\t * 3 = n/a\n\t * 4 = Measurement\n\t * 5 = Marketing\n\t */\n\tconst getIubendaCookieInfo = () => {\n\n\t\t// Regex that matches _iub_cs-59340121 but not _iub_cs-59340121-granular\n\n\t\tlet regex = new RegExp(\"_iub_cs-\\\\d{8,}\")\n\n\t\t// let cookie = wpm.getCookieThatContainsRegex(\"_iub_cs-\")\n\t\tlet cookie = wpm.getCookieThatContainsRegex(regex)\n\n\t\t// Parse the cookie into an object\n\t\t// The structure looks like this:\n\t\t// %7B%22timestamp%22%3A%222023-07-11T06%3A43%3A40.886Z%22%2C%22version%22%3A%221.48.0%22%2C%22purposes%22%3A%7B%221%22%3Atrue%2C%222%22%3Atrue%2C%224%22%3Atrue%2C%225%22%3Atrue%7D%2C%22id%22%3A63374232%7D\n\n\t\tif (cookie) {\n\n\t\t\tcookie = decodeURIComponent(cookie)\n\n\t\t\t// Now the structure looks like this:\n\t\t\t// _iub_cs-63374232={\"timestamp\":\"2023-07-11T06:43:40.886Z\",\"version\":\"1.48.0\",\"purposes\":{\"1\":true,\"2\":true,\"4\":true,\"5\":true},\"id\":63374232}\n\t\t\t// Remove the _iub_cs- prefix until and with the equal sign. The rest is the object we want to keep and parse.\n\t\t\tcookie = cookie.replace(/_iub_cs-.*=/, \"\")\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\treturn {\n\t\t\t\tanalytics       : cookie.purposes[\"4\"],\n\t\t\t\tads             : cookie.purposes[\"5\"],\n\t\t\t\tvisitorHasChosen: true,\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\tconst getTermlyCookies = () => {\n\n\t\t// Get Termly cookies from localStorage from termly_gtm_template_default_consents for ad_storage and for analytics_storage\n\t\tlet termlyConsent = localStorage.getItem(\"termly_gtm_template_default_consents\")\n\n\t\tif (termlyConsent) {\n\t\t\ttermlyConsent = JSON.parse(termlyConsent)\n\n\t\t\treturn {\n\t\t\t\tanalytics       : termlyConsent.analytics_storage === \"granted\",\n\t\t\t\tads             : termlyConsent.ad_storage === \"granted\",\n\t\t\t\tvisitorHasChosen: true,\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\n\t/**\n\t * Initialize and set default values\n\t */\n\n\tlet\n\t\twpmConsentValues              = {}\n\twpmConsentValues.categories       = {}\n\twpmConsentValues.pixels           = []\n\twpmConsentValues.mode             = \"category\"\n\twpmConsentValues.visitorHasChosen = false\n\n\t// Return current consent values\n\twpm.getConsentValues = () => wpmConsentValues\n\n\twpm.setConsentValueCategories = (analytics = false, ads = false) => {\n\t\twpmConsentValues.categories.analytics = analytics\n\t\twpmConsentValues.categories.ads       = ads\n\t}\n\n\t// Update the PMW consent values with values coming from a CMP\n\twpm.updateConsentCookieValues = (analytics = null, ads = null, explicitConsent = false) => {\n\n\t\t// ad_storage\n\t\t// analytics_storage\n\t\t// functionality_storage\n\t\t// personalization_storage\n\t\t// security_storage\n\n\t\tlet cookie\n\n\t\t/**\n\t\t * Setup defaults\n\t\t */\n\n\t\t// consentValues.categories.analytics = true\n\t\t// consentValues.categories.ads       = true\n\n\t\twpmConsentValues.categories.analytics = !explicitConsent\n\t\twpmConsentValues.categories.ads       = !explicitConsent\n\n\n\t\tif (analytics || ads) {\n\n\t\t\tif (analytics) {\n\t\t\t\twpmConsentValues.categories.analytics = !!analytics\n\t\t\t}\n\n\t\t\tif (ads) {\n\t\t\t\twpmConsentValues.categories.ads = !!ads\n\t\t\t}\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * PMW Cookie Consent\n\t\t *\n\t\t * Must be processed before every other CMP for the case that one of the included CMPs\n\t\t * decides to implement the PMW cookie consent API. In that case\n\t\t * the PMW consent cookie must take precedence.\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"pmw_cookie_consent\")) {\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Cookiebot\n\t\t * https://wordpress.org/plugins/cookiebot/\n\t\t * https://support.cookiebot.com/hc/en-us/articles/360016047000-Cookiebot-and-Google-Consent-Mode\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"CookieConsent\")) {\n\n\t\t\tcookie = decodeURI(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = cookie.indexOf(\"statistics:true\") >= 0\n\t\t\twpmConsentValues.categories.ads       = cookie.indexOf(\"marketing:true\") >= 0\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * WP Consent API\n\t\t * https://github.com/rlankhorst/wp-consent-level-api\n\t\t * https://wordpress.org/plugins/wp-consent-api/\n\t\t */\n\n\t\t// if a at least one cookie exists that starts with wp_consent_ then the visitor has chosen\n\t\tif (wpm.getCookieThatContainsRegex(/^wp_consent_/)) {\n\t\t\t// console.log(\"WP Consent API settings detected\")\n\n\t\t\t// if the cookie wp_consent_statistics exists and is set to allow, then analytics is true\n\t\t\t// If it is set to deny, then analytics is false\n\t\t\twpmConsentValues.categories.analytics = wpm.getCookie(\"wp_consent_statistics\") === \"allow\"\n\t\t\twpmConsentValues.categories.ads       = wpm.getCookie(\"wp_consent_marketing\") === \"allow\"\n\n\t\t\twpmConsentValues.visitorHasChosen = true\n\n\t\t\t// console log the consent values\n\t\t\t// console.log(\"WP Consent API settings detected: \", wpmConsentValues)\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Cookie Script\n\t\t * https://wordpress.org/plugins/cookie-script-com/\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"CookieScriptConsent\")) {\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\t// if cookie.categories is not an array, but a string, parse it\n\t\t\tif (typeof cookie.categories === \"string\") cookie.categories = JSON.parse(cookie.categories)\n\n\t\t\tif (\n\t\t\t\tcookie.action\n\t\t\t\t&& cookie.action === \"reject\"\n\t\t\t) {\n\t\t\t\twpmConsentValues.categories.analytics = false\n\t\t\t\twpmConsentValues.categories.ads       = false\n\t\t\t} else if (\n\t\t\t\tcookie.categories\n\t\t\t\t&& cookie.categories.length > 0\n\t\t\t) {\n\t\t\t\twpmConsentValues.categories.analytics = cookie.categories.indexOf(\"performance\") >= 0\n\t\t\t\twpmConsentValues.categories.ads       = cookie.categories.indexOf(\"targeting\") >= 0\n\t\t\t} else {\n\t\t\t\twpmConsentValues.categories.analytics = true\n\t\t\t\twpmConsentValues.categories.ads       = true\n\t\t\t}\n\n\t\t\twpmConsentValues.visitorHasChosen = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Borlabs Cookie\n\t\t * https://borlabs.io/borlabs-cookie/\n\t\t */\n\t\tif (cookie = wpm.getCookie(\"borlabs-cookie\")) {\n\n\t\t\tcookie = decodeURI(cookie)\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = !!cookie?.consents?.statistics\n\t\t\twpmConsentValues.categories.ads       = !!cookie?.consents?.marketing\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\t\t\twpmConsentValues.pixels               = [...cookie?.consents?.statistics || [], ...cookie?.consents?.marketing || []]\n\t\t\twpmConsentValues.mode                 = \"pixel\"\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Complianz Cookie\n\t\t * https://wordpress.org/plugins/complianz-gdpr/\n\t\t */\n\n\t\tif (cookie = getComplianzCookies()) {\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = cookie.visitorHasChosen\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Cookie Compliance (free version)\n\t\t * https://wordpress.org/plugins/cookie-notice/\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"cookie_notice_accepted\")) {\n\n\t\t\twpmConsentValues.categories.analytics = true\n\t\t\twpmConsentValues.categories.ads       = true\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Cookie Compliance (pro version)\n\t\t * https://wordpress.org/plugins/cookie-notice/\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"hu-consent\")) {\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = !!cookie.categories[\"3\"]\n\t\t\twpmConsentValues.categories.ads       = !!cookie.categories[\"4\"]\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * CookieYes, GDPR Cookie Consent (Cookie Law Info)\n\t\t * https://wordpress.org/plugins/cookie-law-info/\n\t\t */\n\n\t\tif (cookie = getCookieYesCookies()) {\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = cookie.visitorHasChosen === true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * GDPR Cookie Compliance Plugin by Moove Agency\n\t\t * https://wordpress.org/plugins/gdpr-cookie-compliance/\n\t\t *\n\t\t * TODO write documentation on how to set up the plugin in order for this to work properly\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"moove_gdpr_popup\")) {\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = cookie.thirdparty === \"1\"\n\t\t\twpmConsentValues.categories.ads       = cookie.advanced === \"1\"\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Iubenda\n\t\t * https://www.iubenda.com\n\t\t */\n\n\t\tif (cookie = getIubendaCookieInfo()) {\n\n\t\t\tcookie = cookie\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\t// console.log(\"Iubenda settings detected: \", wpmConsentValues)\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * WP AutoTerms\n\t\t * https://wordpress.org/plugins/auto-terms-of-service-and-privacy-policy/\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"wpautoterms-cookies-notice\")) {\n\n\t\t\tif (cookie !== \"1\") return\n\n\t\t\twpmConsentValues.categories.analytics = true\n\t\t\twpmConsentValues.categories.ads       = true\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Usercentrics\n\t\t *\n\t\t * https://usercentrics.com/\n\t\t * https://docs.usercentrics.com/#/cmp-v2-ui-api\n\t\t * https://docs.usercentrics.com/#/cmp-v2-ui-api?id=getservicesbaseinfo\n\t\t */\n\n\t\tif (window.localStorage && window.localStorage.getItem(\"uc_settings\")) {\n\n\t\t\twpm.consoleLog(\"Usercentrics settings detected\")\n\n\t\t\tif (typeof UC_UI === \"undefined\") {\n\n\t\t\t\t// register event to block unblock after UC_UI library is loaded\n\t\t\t\twindow.addEventListener(\"UC_UI_INITIALIZED\", (event) => {\n\t\t\t\t\twpm.ucUiProcessConsent()\n\t\t\t\t})\n\n\t\t\t\t// Don't continue because in here the UC_UI library is not loaded yet\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (UC_UI.areAllConsentsAccepted()) {\n\t\t\t\twpmConsentValues.categories.analytics = true\n\t\t\t\twpmConsentValues.categories.ads       = true\n\t\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\twpm.ucUiProcessConsent()\n\t\t}\n\n\t\t/**\n\t\t * OneTrust\n\t\t *\n\t\t * https://www.onetrust.com/\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"OptanonConsent\")) {\n\n\t\t\t// console.log(\"OneTrust settings detected\")\n\n\t\t\tlet params = new URLSearchParams(cookie)\n\t\t\tlet groups = params.get(\"groups\").split(\",\")\n\n\t\t\t// Groups is an array like this ['1:1', '2:0', '3:1', '4:1']. Make it an object with key value pairs\n\t\t\tlet groupsObject = {}\n\t\t\tgroups.forEach((group) => {\n\n\t\t\t\tlet groupArray              = group.split(\":\")\n\t\t\t\tgroupsObject[groupArray[0]] = groupArray[1]\n\t\t\t})\n\n\t\t\t// group mapping\n\t\t\t// 1 = necessary\n\t\t\t// 2 = analytics\n\t\t\t// 3 = functional\n\t\t\t// 4 = ads\n\n\t\t\twpmConsentValues.categories.analytics = groupsObject[\"2\"] === \"1\"\n\t\t\twpmConsentValues.categories.ads       = groupsObject[\"4\"] === \"1\"\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Termly\n\t\t *\n\t\t * https://www.termly.io/\n\t\t */\n\n\t\tif (cookie = getTermlyCookies()) {\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === true\n\t\t\twpmConsentValues.categories.ads       = cookie.ads === true\n\t\t\twpmConsentValues.visitorHasChosen     = cookie.visitorHasChosen === true\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * Real Cookie Banner\n\t\t *\n\t\t * https://devowl.io/wordpress-real-cookie-banner/\n\t\t */\n\t\tif (wpm.doesACookieForTheRealCookieBannerExist()) {\n\n\t\t\t// console.log(\"Real Cookie Banner settings detected\")\n\n\t\t\twpmConsentValues.mode             = \"pixel\"\n\t\t\twpmConsentValues.visitorHasChosen = true\n\n\t\t\twpm.waitForLibrary(\"consentApi\")\n\n\t\t\t// console.log(\"Real Cookie Banner consentApi loaded\")\n\n\t\t\tif (!window.consentApi) {\n\t\t\t\twpm.consoleError(\"window.consentApi is not available\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst settings = [\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"adroll-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"__adroll_fpc\", \"_ar_v4\", \"_adroll\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"bing-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_uetsid\", \"_uetvid\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"facebook-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_fbp\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"google-analytics\",\n\t\t\t\t\t\"type\"   : \"statistics\",\n\t\t\t\t\t\"cookies\": [\"_ga\", \"_gid\", \"_gat\", \"_gat_gtag_UA_*\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"google-optimize\",\n\t\t\t\t\t\"type\"   : \"statistics\",\n\t\t\t\t\t\"cookies\": [\"_ga\", \"_gid\", \"_gat\", \"_gat_gtag_UA_*\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"google-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_gcl_au\", \"_gcl_aw\", \"_gcl_dc\", \"_gac_*\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"hotjar\",\n\t\t\t\t\t\"type\"   : \"statistics\",\n\t\t\t\t\t\"cookies\": [\"_hj*\", \"_hjid\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"linkedin-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_li_ss\", \"_li_id\", \"_li_mk_*\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"microsoft-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_uetsid\", \"_uetvid\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"outbrain-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"pinterest-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_pinterest_ct_ua\", \"_pinterest_ct_rt\", \"_pin_unauth\", \"_derived_epik\", \"_pinterest_sess\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"reddit-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_rdt_uuid\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"snapchat-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"sc_at\", \"sc_anonymous_id\", \"sc_id\", \"_scid\", \"_scid_r\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"taboola-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"tiktok-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"_ttp\", \"_ttclid\", \"ttwid\"],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"service\": \"twitter-ads\",\n\t\t\t\t\t\"type\"   : \"marketing\",\n\t\t\t\t\t\"cookies\": [\"twitter_ads_id\", \"twid\", \"_twclid\", \"muc_ads\"],\n\t\t\t\t},\n\t\t\t]\n\n\n\t\t\t// For each service in settings\n\t\t\t// and each cookie in service.cookies\n\t\t\t// check if consentApi.consentSync(\"http\", cookie, \"*\") returns an object that contains a not empty object called \"cookie\"\n\t\t\t// If one of the cookies returns true, then push service.service to wpmConsentValues.pixels\n\t\t\tsettings.forEach((service) => {\n\n\t\t\t\tservice.cookies.forEach((cookie) => {\n\n\t\t\t\t\tlet consent = window.consentApi.consentSync(\"http\", cookie, \"*\")\n\n\t\t\t\t\tif (consent?.cookie && consent?.cookieOptIn) {\n\n\t\t\t\t\t\twpmConsentValues.pixels.push(service.service)\n\n\t\t\t\t\t\tif (service.type === \"statistics\") {\n\t\t\t\t\t\t\twpmConsentValues.categories.analytics = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (service.type === \"marketing\") {\n\t\t\t\t\t\t\twpmConsentValues.categories.ads = true\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// continue with the next service\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\treturn\n\t\t}\n\n\t\t/**\n\t\t * WP Cookie Consent\n\t\t *\n\t\t * Source: https://wordpress.org/plugins/gdpr-cookie-consent/\n\t\t */\n\n\t\tif (cookie = wpm.getCookie(\"wpl_user_preference\")) {\n\n\t\t\tcookie = JSON.parse(cookie)\n\n\t\t\twpmConsentValues.categories.analytics = cookie.analytics === \"yes\"\n\t\t\twpmConsentValues.categories.ads       = cookie.marketing === \"yes\"\n\t\t\twpmConsentValues.visitorHasChosen     = true\n\t\t\treturn\n\t\t}\n\t}\n\n\twpm.doesACookieForTheRealCookieBannerExist = () => {\n\n\t\t// Find a cookie that has a prefix of real_cookie_banner\n\t\t// If one is found, then return true\n\t\t// If none is found, then return false\n\n\t\tlet cookies = document.cookie.split(\";\")\n\n\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\tlet cookie = cookies[i].trim()\n\n\t\t\tif (cookie.startsWith(\"real_cookie_banner\")) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\t// Only run after having made sure that the UC_UI library is loaded\n\twpm.ucUiProcessConsent = () => {\n\n\t\tif (typeof UC_UI === \"undefined\") return\n\n\t\tif (UC_UI.areAllConsentsAccepted()) {\n\t\t\tpmw.consentAcceptAll()\n\t\t}\n\n\t\tconst ucStatisticsSlug = UC_UI.getSettingsLabels().categories.filter(data => data.label === \"Statistics\")[0].slug\n\n\t\tpmw.consentAdjustSelectively(\n\t\t\t{\n\t\t\t\tanalytics: !UC_UI.getServicesBaseInfo().filter(data => data.categorySlug === ucStatisticsSlug && data.consent.status === false).length > 0,\n\t\t\t\tads      : !UC_UI.getServicesBaseInfo().filter(data => data.categorySlug === \"marketing\" && data.consent.status === false).length > 0,\n\t\t\t},\n\t\t)\n\t}\n\n\twpm.updateConsentCookieValues()\n\n\twpm.setConsentDefaultValuesToExplicit = () => {\n\t\twpmConsentValues.categories = {\n\t\t\tanalytics: false,\n\t\t\tads      : false,\n\t\t}\n\t}\n\n\twpm.canIFire = (category, pixelName) => {\n\n\t\tlet canIFireMode\n\n\t\tif (\"category\" === wpmConsentValues.mode) {\n\t\t\tcanIFireMode = !!wpmConsentValues.categories[category]\n\t\t} else if (\"pixel\" === wpmConsentValues.mode) {\n\t\t\tcanIFireMode = wpmConsentValues.pixels.includes(pixelName)\n\n\t\t\t// If a user sets \"bing-ads\" in Borlabs Cookie instead of\n\t\t\t// \"microsoft-ads\" in the Borlabs settings, we need to check\n\t\t\t// for that too.\n\t\t\tif (false === canIFireMode && \"microsoft-ads\" === pixelName) {\n\t\t\t\tcanIFireMode = wpmConsentValues.pixels.includes(\"bing-ads\")\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error(\"Couldn't find a valid consent mode in wpmConsentValues\")\n\t\t\tcanIFireMode = false\n\t\t}\n\n\t\tif (canIFireMode) {\n\t\t\treturn true\n\t\t} else {\n\t\t\tif (true || wpm.urlHasParameter(\"debugConsentMode\")) {\n\t\t\t\twpm.logPreventedPixelLoading(pixelName, category)\n\t\t\t}\n\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.logPreventedPixelLoading = (pixelName, category) => {\n\n\t\tif (wpmDataLayer?.general?.cookie_consent_mgmt?.explicit_consent) {\n\t\t\twpm.consoleLog(\"The \\\"\" + pixelName + \" (category: \" + category + \")\\\" pixel has not fired because you have not given consent for it yet. (PMW is in explicit consent mode.)\")\n\t\t} else {\n\t\t\twpm.consoleLog(\"The \\\"\" + pixelName + \" (category: \" + category + \")\\\" pixel has not fired because you have removed consent for this pixel. (PMW is in implicit consent mode.)\")\n\t\t}\n\t}\n\n\t/**\n\t * Runs through each script in <head> and blocks / unblocks it according to the plugin settings\n\t * and user consent.\n\t */\n\n\t// https://stackoverflow.com/q/65453565/4688612\n\twpm.scriptTagObserver = new MutationObserver((mutations) => {\n\t\tmutations.forEach(({addedNodes}) => {\n\t\t\t[...addedNodes]\n\t\t\t\t.forEach(node => {\n\n\t\t\t\t\tif ($(node).data(\"wpm-cookie-category\")) {\n\n\t\t\t\t\t\t// If the pixel category has been approved > unblock\n\t\t\t\t\t\t// If the pixel belongs to more than one category, then unblock if one of the categories has been approved\n\t\t\t\t\t\t// If no category has been approved, but the Google Consent Mode is active, then only unblock the Google scripts\n\n\t\t\t\t\t\tif (wpm.shouldScriptBeActive(node)) {\n\t\t\t\t\t\t\twpm.unblockScript(node)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twpm.blockScript(node)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t})\n\t})\n\n\twpm.scriptTagObserver.observe(document.head, {childList: true, subtree: true})\n\t// jQuery(document).on(\"DOMContentLoaded\", () => wpm.scriptTagObserver.disconnect())\n\tdocument.addEventListener(\"DOMContentLoaded\", () => wpm.scriptTagObserver.disconnect())\n\n\twpm.shouldScriptBeActive = node => {\n\n\t\tif (\n\t\t\twpmDataLayer.general.cookie_consent_mgmt.explicit_consent ||\n\t\t\twpmConsentValues.visitorHasChosen\n\t\t) {\n\n\t\t\tif (wpmConsentValues.mode === \"category\" && $(node).data(\"wpm-cookie-category\").split(\",\").some(element => wpmConsentValues.categories[element])) {\n\t\t\t\treturn true\n\t\t\t} else if (wpmConsentValues.mode === \"pixel\" && wpmConsentValues.pixels.includes($(node).data(\"wpm-pixel-name\"))) {\n\t\t\t\treturn true\n\t\t\t} else if (wpmConsentValues.mode === \"pixel\" && $(node).data(\"wpm-pixel-name\") === \"google\" && [\"google-analytics\", \"google-ads\"].some(element => wpmConsentValues.pixels.includes(element))) {\n\t\t\t\treturn true\n\t\t\t} else if (wpmDataLayer?.pixels?.google?.consent_mode?.is_active && $(node).data(\"wpm-pixel-name\") === \"google\") {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\n\twpm.unblockScript = (scriptNode, removeAttach = false) => {\n\n\t\tif (removeAttach) $(scriptNode).remove()\n\n\t\tlet wpmSrc = $(scriptNode).data(\"wpm-src\")\n\t\tif (wpmSrc) $(scriptNode).attr(\"src\", wpmSrc)\n\n\t\tscriptNode.type = \"text/javascript\"\n\n\t\tif (removeAttach) $(scriptNode).appendTo(\"head\")\n\n\t\t// jQuery(document).trigger(\"wpmPreLoadPixels\")\n\t\tdocument.dispatchEvent(new Event(\"wpmPreLoadPixels\"))\n\t}\n\n\twpm.blockScript = (scriptNode, removeAttach = false) => {\n\n\t\tif (removeAttach) $(scriptNode).remove()\n\n\t\tif ($(scriptNode).attr(\"src\")) $(scriptNode).removeAttr(\"src\")\n\t\tscriptNode.type = \"blocked/javascript\"\n\n\t\tif (removeAttach) $(scriptNode).appendTo(\"head\")\n\t}\n\n\twpm.unblockAllScripts = (analytics = true, ads = true) => {\n\t\t// jQuery(document).trigger(\"wpmPreLoadPixels\")\n\t\twpm.setConsentValueCategories(analytics, ads)\n\t\tdocument.dispatchEvent(new Event(\"wpmPreLoadPixels\"))\n\t}\n\n\twpm.unblockSelectedPixels = () => {\n\t\t// jQuery(document).trigger(\"wpmPreLoadPixels\")\n\t\tdocument.dispatchEvent(new Event(\"wpmPreLoadPixels\"))\n\t}\n\n\twpm.explicitConsentStateAlreadySet = () => {\n\n\t\tif (wpmConsentValues.explicitConsentStateAlreadySet) {\n\t\t\treturn true\n\t\t} else {\n\t\t\twpmConsentValues.explicitConsentStateAlreadySet = true\n\t\t}\n\t}\n\n\twpm.updatePixelConsentForPixelTypeCMPs = () => {\n\n\t\twpm.updateConsentCookieValues()\n\n\t\tif (wpmConsentValues.mode === \"pixel\") {\n\n\t\t\twpm.unblockSelectedPixels()\n\t\t\twpm.updateGoogleConsentMode(wpmConsentValues.pixels.includes(\"google-analytics\"), wpmConsentValues.pixels.includes(\"google-ads\"))\n\t\t} else {\n\n\t\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t}\n\t}\n\n\n\t/**\n\t * Block or unblock scripts for each CMP immediately after cookie consent has been updated\n\t * by the visitor.\n\t */\n\n\t/**\n\t * Borlabs Cookie\n\t * If the visitor accepts cookies in Borlabs Cookie unblock the scripts.\n\t */\n\tdocument.addEventListener(\"borlabs-cookie-consent-saved\", () => {\n\t\twpm.updatePixelConsentForPixelTypeCMPs()\n\t})\n\n\t/**\n\t * Real Cookie Banner\n\t * If the visitor accepts cookies in Real Cookie Banner unblock the scripts.\n\t */\n\n\tdocument.addEventListener(\"RCB/OptIn/All\", () => {\n\t\twpm.consoleLog(\"consent given or changed, check again with consentSync...\")\n\n\t\twpm.updatePixelConsentForPixelTypeCMPs()\n\t})\n\n\n\t/**\n\t * Cookiebot\n\t * \tIf visitor accepts cookies in Cookiebot unblock the scripts\n\t * \thttps://www.cookiebot.com/en/developer/\n\t */\n\twindow.addEventListener(\"CookiebotOnAccept\", () => {\n\t\tif (Cookiebot.consent.statistics) wpmConsentValues.categories.analytics = true\n\t\tif (Cookiebot.consent.marketing) wpmConsentValues.categories.ads = true\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\n\t}, false)\n\n\t/**\n\t * WP Consent API\n\t * https://github.com/rlankhorst/wp-consent-level-api\n\t * https://wordpress.org/plugins/wp-consent-api/\n\t */\n\n\tdocument.addEventListener(\"wp_listen_for_consent_change\", e => {\n\n\t\tconst changedConsentCategory = e.detail\n\n\t\tfor (const key in changedConsentCategory) {\n\n\t\t\t// console.log(\"consent given or changed, check again with consentSync...\", key, changedConsentCategory[key])\n\n\t\t\t// if the key is marketing\n\t\t\tif (key === \"marketing\") {\n\t\t\t\twpmConsentValues.categories.ads = changedConsentCategory[key] === \"allow\"\n\t\t\t}\n\n\t\t\t// if the key is statistics\n\t\t\tif (key === \"statistics\") {\n\t\t\t\twpmConsentValues.categories.analytics = changedConsentCategory[key] === \"allow\"\n\t\t\t}\n\n\t\t}\n\n\t\t// console log the consent values\n\t\t// console.log(\"WP Consent API settings detected: \", wpmConsentValues)\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t})\n\n\n\t/**\n\t * Cookie Script\n\t * If visitor accepts cookies in Cookie Script unblock the scripts\n\t * https://support.cookie-script.com/article/20-custom-events\n\t */\n\t// jQuery(document).on(\"CookieScriptAccept\", e => {\n\tdocument.addEventListener(\"CookieScriptAccept\", e => {\n\n\t\tif (e.detail.categories.includes(\"performance\")) wpmConsentValues.categories.analytics = true\n\t\tif (e.detail.categories.includes(\"targeting\")) wpmConsentValues.categories.ads = true\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t})\n\n\t/**\n\t * Cookie Script\n\t * If visitor accepts cookies in Cookie Script unblock the scripts\n\t * https://support.cookie-script.com/\n\t */\n\t// jQuery(document).on(\"CookieScriptAcceptAll\", () => {\n\tdocument.addEventListener(\"CookieScriptAcceptAll\", () => {\n\n\t\twpm.setConsentValueCategories(true, true)\n\t\twpm.unblockAllScripts(true, true)\n\t\twpm.updateGoogleConsentMode(true, true)\n\t})\n\n\t/**\n\t * Complianz Cookie\n\t *\n\t * If visitor accepts cookies in Complianz unblock the scripts\n\t */\n\n\twpm.cmplzStatusChange = (cmplzConsentData) => {\n\n\t\tif (cmplzConsentData.detail.categories.includes(\"statistics\")) wpm.updateConsentCookieValues(true, null)\n\t\tif (cmplzConsentData.detail.categories.includes(\"marketing\")) wpm.updateConsentCookieValues(null, true)\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t}\n\n\t// jQuery(document).on(\"cmplzStatusChange\", wpm.cmplzStatusChange)\n\tdocument.addEventListener(\"cmplzStatusChange\", wpm.cmplzStatusChange)\n\t// jQuery(document).on(\"cmplz_status_change\", wpm.cmplzStatusChange)\n\tdocument.addEventListener(\"cmplz_status_change\", wpm.cmplzStatusChange)\n\n\t// Cookie Compliance by hu-manity.co (free and pro)\n\t// If visitor accepts cookies in Cookie Notice by hu-manity.co unblock the scripts (free version)\n\t// https://wordpress.org/support/topic/events-on-consent-change/#post-15202792\n\t// jQuery(document).on(\"setCookieNotice\", () => {\n\tdocument.addEventListener(\"setCookieNotice\", () => {\n\t\twpm.updateConsentCookieValues()\n\n\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t})\n\n\t/**\n\t * Cookie Compliance by hu-manity.co (free and pro)\n\t * If visitor accepts cookies in Cookie Notice by hu-manity.co unblock the scripts (pro version)\n\t * https://wordpress.org/support/topic/events-on-consent-change/#post-15202792\n\t * Because Cookie Notice has no documented API or event that is being triggered on consent save or update\n\t * we have to solve this by using a mutation observer.\n\t *\n\t * @type {MutationObserver}\n\t */\n\n\twpm.huObserver = new MutationObserver(mutations => {\n\t\tmutations.forEach(({addedNodes}) => {\n\t\t\t[...addedNodes]\n\t\t\t\t.forEach(node => {\n\n\t\t\t\t\tif (node.id === \"hu\") {\n\n\t\t\t\t\t\t// jQuery(\".hu-cookies-save\").on(\"click\", function () {\n\t\t\t\t\t\t// jQuery(\".hu-cookies-save\") in pure JavaScript\n\t\t\t\t\t\tdocument.querySelector(\".hu-cookies-save\").addEventListener(\"click\", () => {\n\t\t\t\t\t\t\twpm.updateConsentCookieValues()\n\t\t\t\t\t\t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t\t\t\t\t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t})\n\t})\n\n\tif (window.hu) {\n\t\twpm.huObserver.observe(document.documentElement || document.body, {childList: true, subtree: true})\n\t}\n\n\t/**\n\t * Iubenda CMP\n\t *\n\t * https://www.iubenda.com/en/help/1205-how-to-configure-your-cookie-solution-advanced-guide\n\t *\n\t * If visitor accepts cookies in Iubenda CMP unblock the scripts\n\t *\n\t * This might not work as of now (11.07.2023) the Iubenda CMP does not trigger any events.\n\t *\n\t * We might have to use a mutation observer to detect changes in the DOM.\n\t * This is also risky because we might read out the values faster than Iubenda can update them.\n\t */\n\n\t// Load after the document is fully loaded\n\t// Check if a button with one of the following classes was clicked\n\t// iubenda-cs-btn-primary\n\t// If it was clicked, recheck the cookies and unblock the scripts\n\t// jQuery(document).ready(() => {\n\t//\n\t// \tjQuery(document).on(\"click\", \".iubenda-cs-btn-primary\", () => {\n\t// \t\twpm.updateConsentCookieValues()\n\t// \t\twpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t// \t\twpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t// \t})\n\t//\n\t// \t// if the event save-button-clicked is triggered, recheck the cookies and unblock the scripts\n\t// \tjQuery(document).on(\"iubenda-cs-btn-primary\", () => {\n\t// \t\t// wpm.updateConsentCookieValues()\n\t// \t\t// wpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t// \t\t// wpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t// \t\tconsole.log(\"iubenda-cs-btn-primary clicked\")\n\t// \t})\n\t//\n\t// })\n\t//\n\t// wpm.iubObserver = new MutationObserver(mutations => {\n\t// \tmutations.forEach(({addedNodes}) => {\n\t// \t\t[...addedNodes]\n\t// \t\t\t.forEach(node => {\n\t//\n\t// \t\t\t\t// console.log(node)\n\t//\n\t// \t\t\t\tif (node.id === \"iubenda-cs-banner\") {\n\t//\n\t// \t\t\t\t\t// jQuery(\".hu-cookies-save\").on(\"click\", function () {\n\t// \t\t\t\t\t// jQuery(\".hu-cookies-save\") in pure JavaScript\n\t// \t\t\t\t\tdocument.querySelector(\".iubenda-cs-btn-primary\").addEventListener(\"click\", () => {\n\t// \t\t\t\t\t\t// wpm.updateConsentCookieValues()\n\t// \t\t\t\t\t\t// wpm.unblockAllScripts(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t// \t\t\t\t\t\t// wpm.updateGoogleConsentMode(wpmConsentValues.categories.analytics, wpmConsentValues.categories.ads)\n\t//\n\t// \t\t\t\t\t\tconsole.log(\"iubenda-cs-btn-primary clicked\")\n\t// \t\t\t\t\t})\n\t// \t\t\t\t}\n\t// \t\t\t})\n\t// \t})\n\t// })\n\t//\n\t// if (window._iub) {\n\t// \twpm.iubObserver.observe(document.documentElement || document.body, {childList: true, subtree: true})\n\t// }\n\n\t// doesn't work if the PMW is lazy loaded\n\t// checkIubendaLoaded = setInterval(function() {\n\t// \tif (window?._iub && window?._iub?.csConfiguration) {\n\t// \t\twindow._iub.csConfiguration.callback = {\n\t// \t\t\tonPreferenceExpressed: function (preference) {\n\t// \t\t\t\tconsole.log('onPreferenceExpressed after load', preference);\n\t// \t\t\t}\n\t// \t\t};\n\t// \t\tclearInterval(checkIubendaLoaded);\n\t// \t}\n\t// }, 100);\n\n\t// if (window?._iub && window?._iub?.csConfiguration) {\n\t// \twindow._iub.csConfiguration.callback = {\n\t// \t\tonPreferenceExpressed: function (preference) {\n\t// \t\t\tconsole.log('onPreferenceExpressed after load X', preference);\n\t// \t\t}\n\t// \t};\n\t// }\n\t//\n\t// console.log('iubenda loaded');\n\n\n\t/**\n\t * Usercentrics Event Listeners\n\t *\n\t * https://docs.usercentrics.com/#/v2-events?id=usage-as-window-event\n\t */\n\n\twindow.addEventListener(\"ucEvent\", e => {\n\t\tif (e.detail && e.detail.event == \"consent_status\") {\n\t\t\t// check for consent status of service \"Google Ads Remarketing\"\n\t\t\tif (e.detail[\"Google Ads Remarketing\"] === true) {\n\t\t\t\twpm.consoleLog(\"Google Ads Remarketing has consent\")\n\t\t\t} else {\n\t\t\t\twpm.consoleLog(\"Google Ads Remarketing has no consent\")\n\t\t\t}\n\t\t}\n\t})\n\n\t// https://docs.usercentrics.com/#/v2-events?id=uc_ui_cmp_event\n\twindow.addEventListener(\"UC_UI_CMP_EVENT\", event => {\n\n\t\tif (event.detail.type === \"ACCEPT_ALL\") {\n\t\t\t// console.log('accept all');\n\n\t\t\tpmw.consentAcceptAll()\n\t\t}\n\n\t\tif (event.detail.type === \"DENY_ALL\") {\n\t\t\tpmw.consentRevokeAll()\n\t\t}\n\n\t\tif (event.detail.type === \"SAVE\") {\n\t\t\twpm.consoleLog(\"event.detail\", event.detail)\n\t\t}\n\t})\n\n\n\t/**\n\t * OneTrust Event Listeners\n\t *\n\t * CookiePro by OneTrust doesn't emit any events when the user accepts or declines cookies.\n\t */\n\n\t// There are two accept all buttons. One in the first banner and one in the settings window. Both have different identifiers.\n\tjQuery(\"#accept-recommended-btn-handler, #onetrust-accept-btn-handler\").on(\"click\", () => {\n\n\t\t// If OneTrust is not loaded, return\n\t\tif (typeof window.OneTrust === \"undefined\") return\n\n\t\tpmw.consentAcceptAll()\n\t})\n\n\t// There are two revoke all buttons. One in the first banner and one in the settings window. Both have different identifiers.\n\tjQuery(\".ot-pc-refuse-all-handler, #onetrust-reject-all-handler\").on(\"click\", () => {\n\t\tpmw.consentRevokeAll()\n\t})\n\n\t// There is one save button that saves mixed consent. It is in the settings window. We reload the page after saving to reflect the changes.\n\tjQuery(\".save-preference-btn-handler.onetrust-close-btn-handler\").on(\"click\", () => {\n\t\tlocation.reload()\n\n\t\t// OneTrust.OnConsentChanged(function (e) {\n\t\t// \tpmw.consentAdjustSelectively({\n\t\t// \t\tanalytics: e.detail.includes(\"2\"),\n\t\t// \t\tads      : e.detail.includes(\"4\"),\n\t\t// \t})\n\t\t// })\n\t})\n\n\t/**\n\t * Termly Event Listeners\n\t *\n\t * The event listener is within /sources/termly_web/resource-blocker/src/constants/lifeCycle.js\n\t */\n\n\tdocument.addEventListener(\"termlyConsent\", function (e) {\n\n\t\tconst consent = e.detail\n\n\t\tif (consent.advertising && consent.analytics) {\n\t\t\tpmw.consentAcceptAll()\n\t\t} else if (!consent.advertising && !consent.analytics) {\n\t\t\tpmw.consentRevokeAll()\n\t\t} else {\n\t\t\tpmw.consentAdjustSelectively({\n\t\t\t\tanalytics: consent.analytics,\n\t\t\t\tads      : consent.advertising,\n\t\t\t})\n\t\t}\n\t})\n\n\t/**\n\t * WP Cookie Consent Event Listeners\n\t *\n\t * Source: https://club.wpeka.com/docs/wp-cookie-consent/settings/integrating-your-actions/\n\t * Support ticket: https://wordpress.org/support/topic/gdprcookieconsentonaccept-event-never-triggered/\n\t */\n\n\t// document.addEventListener(\"GdprCookieConsentOnAccept\", function (e) {\n\t//\n\t// \tconsole.log(\"GdprCookieConsentOnAccept\", e.detail)\n\t//\n\t// \t// const consent = e.detail\n\t// \t//\n\t// \t// if (consent.advertising && consent.analytics) {\n\t// \t// \tpmw.consentAcceptAll()\n\t// \t// } else if (!consent.advertising && !consent.analytics) {\n\t// \t// \tpmw.consentRevokeAll()\n\t// \t// } else {\n\t// \t// \tpmw.consentAdjustSelectively({\n\t// \t// \t\tanalytics: consent.analytics,\n\t// \t// \t\tads      : consent.advertising,\n\t// \t// \t})\n\t// \t// }\n\t// })\n\n\t// WP Cookie Consent emits a custom event called GdprCookieConsentOnAccept\n\t// Listen to it and console log its detail\n\n\tdocument.addEventListener(\"GdprCookieConsentOnAccept\", function (e) {\n\t\tconsole.log(\"GdprCookieConsentOnAccept\", e.detail)\n\t})\n\n\n\t/**\n\t * Updates the consent mode for Google services.\n\t *\n\t * @param {string} consentMode - The consent mode to be set for Google services.\n\t */\n\twpm.updateGoogleConsentMode = (analytics = true, ads = true) => {\n\n\t\ttry {\n\t\t\tif (\n\t\t\t\t!window.gtag ||\n\t\t\t\t!wpmDataLayer.general.cookie_consent_mgmt.explicit_consent\n\t\t\t) return\n\n\t\t\tgtag(\"consent\", \"update\", {\n\t\t\t\tanalytics_storage : analytics ? \"granted\" : \"denied\",\n\t\t\t\tad_storage        : ads ? \"granted\" : \"denied\",\n\t\t\t\tad_user_data      : ads ? \"granted\" : \"denied\",\n\t\t\t\tad_personalization: ads ? \"granted\" : \"denied\",\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery));\n\n\n(function (pmw, $, undefined) {\n\n\t/**\n\t * Pixel Manager Cookie Consent API\n\t */\n\n\t// Accept consent for all cookies\n\tpmw.consentAcceptAll = (settings = {}) => {\n\n\t\tsettings.duration = settings.duration || 365\n\n\t\tpmw.consentSetCookie(true, true, settings.duration)\n\t\twpm.unblockAllScripts(true, true)\n\t\twpm.updateGoogleConsentMode(true, true)\n\t}\n\n\t// Accept consent selectively\n\tpmw.consentAdjustSelectively = (settings) => {\n\n\t\t// if settings.marketing is set\n\t\t// write its value to settings.ads\n\t\t// and delete settings.marketing\n\t\tif (settings.marketing !== undefined) {\n\t\t\tsettings.ads = settings.marketing\n\t\t\tdelete settings.marketing\n\t\t}\n\n\t\t// If settings.analytics is set, keep it, otherwise set it to wpm.getConsentValues().categories.analytics\n\t\tsettings.analytics = settings.analytics !== undefined ? settings.analytics : wpm.getConsentValues().categories.analytics\n\t\tsettings.ads       = settings.ads !== undefined ? settings.ads : wpm.getConsentValues().categories.ads\n\t\tsettings.duration  = settings.duration || 365\n\n\t\t// console.log(\"settings\", settings)\n\n\t\tpmw.consentSetCookie(settings.analytics, settings.ads, settings.duration)\n\t\twpm.unblockAllScripts(settings.analytics, settings.ads)\n\t\twpm.updateGoogleConsentMode(settings.analytics, settings.ads)\n\t}\n\n\t// Remove consent for all cookies\n\tpmw.consentRevokeAll = (settings = {}) => {\n\n\t\tsettings.duration = settings.duration || 365\n\n\t\twpm.setConsentValueCategories(false, false)\n\t\tpmw.consentSetCookie(false, false, settings.duration)\n\t\twpm.updateGoogleConsentMode(false, false)\n\t}\n\n\t// Set a cookie called pmw_cookie_consent with the value of pmw_cookie_consent\n\t// and set the default expiration date to 1 year from now\n\tpmw.consentSetCookie = (analytics, ads, duration = 365) => {\n\t\twpm.setCookie(\"pmw_cookie_consent\", JSON.stringify({analytics, ads}), duration)\n\t}\n\n\tpmw.triggerPmwCookieConsentManagementLoaded = () => {\n\t\t// Trigger an event once the PMW consent management has been loaded\n\t\tdocument.dispatchEvent(new Event(\"pmw_cookie_consent_management_loaded\"))\n\t\tdocument.dispatchEvent(new Event(\"pmwCookieConsentManagementLoaded\"))\n\t}\n\n\tpmw.triggerPmwCookieConsentManagementLoaded()\n\n\t// Get that state for the statistics or marketing cookies\n\tpmw.getConsentValues = () => {\n\t\treturn wpm.getConsentValues()\n\t}\n\n}(window.pmw = window.pmw || {}, jQuery))\n","/**\n * remove_from_cart event\n *\n * Cannot be attached directly because the mini cart doesn't necessarily contain the remove button on page load.\n */\njQuery(document).on(\"click\", \".remove_from_cart_button, .remove\", (event) => {\n\n\t// console.log(\"remove_from_cart event\" + new Date().getTime())\n\n\ttry {\n\n\t\tlet url       = new URL(jQuery(event.currentTarget).attr(\"href\"))\n\t\tlet productId = wpm.getProductIdByCartItemKeyUrl(url)\n\n\t\twpm.removeProductFromCart(productId)\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n/**\n * begin_checkout event\n *\n * Cannot be attached directly because the mini cart doesn't necessarily contain the remove button on page load.\n */\nlet checkoutButtonClasses = [\n\t// \".checkout\", // this is too generic. It triggers on the checkout page on some themes fore each interaction with the checkout form.\n\t\".checkout-button\",\n\t\".cart-checkout-button\",\n\t\".button.checkout\",\n\t\".xoo-wsc-ft-btn-checkout\", // https://xootix.com/side-cart-for-woocommerce/\n\t\".elementor-button--checkout\",\n\t\".xt_woofc-checkout\", // https://wordpress.org/plugins/woo-floating-cart-lite/\n\t\".fkcart-checkout--text\", // https://funnelkit.com/\n]\n\nconst checkoutButtonSelectors = wpm.prepareSelectors(checkoutButtonClasses, \"beginCheckout\")\n\n// https://wordpress.stackexchange.com/a/352171/68337\njQuery(document).on(\"click init_checkout\", checkoutButtonSelectors, () => {\n\n\tjQuery(document).trigger(\"wpmBeginCheckout\")\n})\n\njQuery(document).on(\"updated_cart_totals\", () => {\n\tjQuery(document).trigger(\"wpmViewCart\")\n})\n\n/**\n * Set up PWM events\n */\n\n// track checkout option event: purchase click\n// https://wordpress.stackexchange.com/a/352171/68337\njQuery(document).on(\"wpmLoad\", (event) => {\n\tjQuery(document).on(\"payment_method_selected\", () => {\n\n\t\tif (false === wpm.paymentMethodSelected) {\n\t\t\twpm.fireCheckoutProgress(3)\n\t\t}\n\n\t\twpm.fireCheckoutOption(3, jQuery(\"input[name='payment_method']:checked\").val())\n\t\twpm.paymentMethodSelected = true\n\t})\n})\n\n// populate the wpmDataLayer with the cart items\njQuery(document).on(\"wpmLoad\", () => {\n\n\ttry {\n\t\twpm.initCart()\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// get all add-to-cart= products from backend\njQuery(document).on(\"wpmLoad\", () => {\n\n\twpmDataLayer.products = wpmDataLayer.products || {}\n\n\t// scan page for add-to-cart= links\n\tlet productIds = wpm.getAddToCartLinkProductIds()\n\n\twpm.getProductsFromBackend(productIds)\n})\n\n/**\n * Save the referrer into a cookie\n */\n\njQuery(document).on(\"wpmLoad\", () => {\n\n\t// If the referrer is already stored, then return\n\tif (wpm.retrieveData(\"referrer\")) {\n\t\treturn\n\t}\n\n\tif (document.referrer) {\n\t\tlet referrerUrl      = new URL(document.referrer)\n\t\tlet referrerHostname = referrerUrl.hostname\n\n\t\tif (referrerHostname !== window.location.host) {\n\t\t\twpm.storeData(\"referrer\", referrerHostname)\n\t\t}\n\t}\n})\n\n\n/**\n * Create our own load event in order to better handle script flow execution when JS \"optimizers\" shuffle the code.\n */\njQuery(document).on(\"wpmLoad\", () => {\n\t// document.addEventListener(\"wpmLoad\", function () {\n\ttry {\n\t\tif (typeof wpmDataLayer != \"undefined\" && !wpmDataLayer?.pmw_loaded) {\n\n\t\t\tjQuery(document).trigger(\"wpmLoadAlways\")\n\n\t\t\tif (wpmDataLayer?.shop) {\n\t\t\t\tif (\n\t\t\t\t\t\"product\" === wpmDataLayer.shop.page_type &&\n\t\t\t\t\t\"variable\" !== wpmDataLayer.shop.product_type &&\n\t\t\t\t\twpm.getMainProductIdFromProductPage()\n\t\t\t\t) {\n\t\t\t\t\tlet product = wpm.getProductDataForViewItemEvent(wpm.getMainProductIdFromProductPage())\n\t\t\t\t\tjQuery(document).trigger(\"wpmViewItem\", product)\n\t\t\t\t} else if (\"product_category\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tjQuery(document).trigger(\"wpmCategory\")\n\t\t\t\t} else if (\"search\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tjQuery(document).trigger(\"pmwEvent:Search\")\n\t\t\t\t} else if (\"cart\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tjQuery(document).trigger(\"wpmViewCart\")\n\t\t\t\t} else if (\"order_received_page\" === wpmDataLayer.shop.page_type) {\n\t\t\t\t\tif (wpmDataLayer?.order && !wpm.isOrderIdStored(wpmDataLayer.order.id)) {\n\t\t\t\t\t\tjQuery(document).trigger(\"wpmOrderReceivedPage\")\n\t\t\t\t\t\twpm.writeOrderIdToStorage(wpmDataLayer.order.id, wpmDataLayer.order.key)\n\t\t\t\t\t\tif (typeof wpm.acrRemoveCookie === \"function\") wpm.acrRemoveCookie()\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(document).trigger(\"wpmEverywhereElse\")\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjQuery(document).trigger(\"wpmEverywhereElse\")\n\t\t\t}\n\n\t\t\tif (wpmDataLayer?.user?.id && !wpm.hasLoginEventFired()) {\n\t\t\t\tjQuery(document).trigger(\"wpmLogin\")\n\t\t\t\twpm.setLoginEventFired()\n\t\t\t}\n\n\t\t\twpmDataLayer.pmw_loaded = true\n\t\t}\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\njQuery(document).on(\"wpmLoad\", async () => {\n\tif (wpm.retrieveData(\"restEndpointAvailable\") === false) wpm.consoleError(\"REST endpoint is not available. Using admin-ajax.php instead.\")\n})\n\n\n/**\n * Load all pixels\n */\njQuery(document).on(\"wpmPreLoadPixels\", () => {\n\n\tif (wpmDataLayer?.general?.cookie_consent_mgmt?.explicit_consent && !wpm.explicitConsentStateAlreadySet()) {\n\t\twpm.updateConsentCookieValues(null, null, true)\n\t}\n\n\tjQuery(document).trigger(\"wpmLoadPixels\", {})\n})\n\n\n/**\n * All ecommerce events\n */\n\n/**\n * Add to cart event\n */\njQuery(document).on(\"wpmAddToCart\", (event, product) => {\n\n\twpm.consoleLog(\"wpmAddToCart event fired\", {event, product})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent  : \"addToCart\",\n\t\tproduct: product,\n\t}\n\n\t// Facebook\n\t// If Facebook pixel is loaded, add Facebook server to server event data to the payload\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"AddToCart\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : wpm.fbGetProductDataForCapiEvent(product),\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData()\n\n\t\tpayload.pinterest.event_name  = \"addtocart\"\n\t\tpayload.pinterest.custom_data = wpm.pinterestGetProductDataForCapiEvent(product)\n\t}\n\n\t// TikTok\n\t// https://ads.tiktok.com/gateway/docs/index?identify_key=c0138ffadd90a955c1f0670a56fe348d1d40680b3c89461e09f78ed26785164b&language=ENGLISH&doc_id=1739585702922241#item-link-Adding%20parameters%20to%20event%20code\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"AddToCart\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tcontext   : wpm.getTikTokUserDataFromBrowser(),\n\t\t\tproperties: {\n\t\t\t\tvalue   : product.price * product.quantity,\n\t\t\t\tcurrency: product.currency,\n\t\t\t\tcontents: [{\n\t\t\t\t\tcontent_id  : product.dyn_r_ids[wpmDataLayer.pixels.tiktok.dynamic_remarketing.id_type],\n\t\t\t\t\tcontent_type: \"product\",\n\t\t\t\t\tcontent_name: product.name,\n\t\t\t\t\tquantity    : product.quantity,\n\t\t\t\t\tprice       : product.price,\n\t\t\t\t}],\n\t\t\t},\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideAddToCart\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * Begin checkout event\n */\njQuery(document).on(\"wpmBeginCheckout\", (event) => {\n\n\twpm.consoleLog(\"wpmBeginCheckout event fired\", {event})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"beginCheckout\",\n\t}\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"InitiateCheckout\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {},\n\t\t}\n\n\t\tif (wpmDataLayer?.cart && !jQuery.isEmptyObject(wpmDataLayer.cart)) {\n\t\t\tpayload.facebook.custom_data = {\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tcontent_ids : wpm.fbGetContentIdsFromCart(),\n\t\t\t\tvalue       : wpm.getCartValue(),\n\t\t\t\tcurrency    : wpmDataLayer.shop.currency,\n\t\t\t}\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"InitiateCheckout\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tcontext   : wpm.getTikTokUserDataFromBrowser(),\n\t\t\tproperties: wpm.tiktokGetPropertiesFromCart(),\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideBeginCheckout\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * Add to wishlist event\n */\njQuery(document).on(\"wpmAddToWishlist\", (event, product) => {\n\n\twpm.consoleLog(\"wpmAddToWishlist event fired\", {event, product})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent  : \"addToWishlist\",\n\t\tproduct: product,\n\t}\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"AddToWishlist\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : wpm.fbGetProductDataForCapiEvent(product),\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"AddToWishlist\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tcontext   : wpm.getTikTokUserDataFromBrowser(),\n\t\t\tproperties: {\n\t\t\t\tvalue   : product.price * product.quantity,\n\t\t\t\tcurrency: product.currency,\n\t\t\t\tcontents: [{\n\t\t\t\t\tcontent_id  : product.dyn_r_ids[wpmDataLayer.pixels.tiktok.dynamic_remarketing.id_type],\n\t\t\t\t\tcontent_type: \"product\",\n\t\t\t\t\tcontent_name: product.name,\n\t\t\t\t\tquantity    : product.quantity,\n\t\t\t\t\tprice       : product.price,\n\t\t\t\t}],\n\t\t\t},\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideAddToWishlist\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * View Item event\n */\njQuery(document).on(\"wpmViewItem\", (event, product = null) => {\n\n\twpm.consoleLog(\"wpmViewItem event fired\", {event, product})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent  : \"viewItem\",\n\t\tproduct: product,\n\t}\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"ViewContent\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {},\n\t\t}\n\n\t\tif (product) {\n\t\t\tpayload.facebook.custom_data = wpm.fbGetProductDataForCapiEvent(product)\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData()\n\n\t\tpayload.pinterest.event_name = \"pagevisit\"\n\n\t\tif (product) {\n\t\t\tpayload.pinterest.custom_data = wpm.pinterestGetProductDataForCapiEvent(product)\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent   : \"ViewContent\",\n\t\t\tevent_id: wpm.getRandomEventId(),\n\t\t\tcontext : wpm.getTikTokUserDataFromBrowser(),\n\t\t}\n\n\t\tif (product) {\n\t\t\tpayload.tiktok.properties = {\n\t\t\t\tvalue   : product.price * product.quantity,\n\t\t\t\tcurrency: product.currency,\n\t\t\t\tcontents: [{\n\t\t\t\t\tcontent_id  : product.dyn_r_ids[wpmDataLayer.pixels.tiktok.dynamic_remarketing.id_type],\n\t\t\t\t\tcontent_type: \"product\",\n\t\t\t\t\tcontent_name: product.name,\n\t\t\t\t\tquantity    : product.quantity,\n\t\t\t\t\tprice       : product.price,\n\t\t\t\t}],\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideViewItem\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * View category event\n */\njQuery(document).on(\"wpmCategory\", (event, product = null) => {\n\n\twpm.consoleLog(\"wpmCategory event fired\", {event, product})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"viewCategory\",\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData()\n\n\t\tpayload.pinterest.event_name = \"viewcategory\"\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideViewCategory\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * Search event\n */\njQuery(document).on(\"pmwEvent:Search\", (event) => {\n\n\twpm.consoleLog(\"pmwEvent:Search event fired\", {event})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"search\",\n\t}\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"Search\",\n\t\t\tevent_id        : wpm.getFbRandomEventId(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {\n\t\t\t\tsearch_string: wpm.getSearchTermFromUrl(),\n\t\t\t},\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData()\n\n\t\tpayload.pinterest.event_name  = \"search\"\n\t\tpayload.pinterest.custom_data = {\n\t\t\tsearch_string: wpm.getSearchTermFromUrl(),\n\t\t}\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"Search\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tcontext   : wpm.getTikTokUserDataFromBrowser(),\n\t\t\tproperties: {\n\t\t\t\tquery: wpm.getSearchTermFromUrl(),\n\t\t\t},\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideSearch\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * Place order event\n */\njQuery(document).on(\"wpmPlaceOrder\", (event) => {\n\n\twpm.consoleLog(\"wpmPlaceOrder event fired\", {event})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"placeOrder\",\n\t}\n\n\t// TikTok\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"PlaceAnOrder\",\n\t\t\tevent_id  : wpm.getRandomEventId(),\n\t\t\tcontext   : wpm.getTikTokUserDataFromBrowser(),\n\t\t\tproperties: wpm.tiktokGetPropertiesFromCart(),\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientPlaceOrder\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\twpm.sendEventPayloadToServer(payload)\n})\n\n/**\n * Order received event\n */\njQuery(document).on(\"wpmOrderReceivedPage\", (event) => {\n\n\twpm.consoleLog(\"wpmOrderReceivedPage event fired\", {event})\n\n\t/**\n\t * Prepare the payload\n\t */\n\n\tlet payload = {\n\t\tevent: \"orderReceived\",\n\t}\n\n\t// Facebook\n\tif (wpmDataLayer?.pixels?.facebook?.loaded) {\n\t\tpayload.facebook = {\n\t\t\tevent_name      : \"Purchase\",\n\t\t\tevent_id        : wpmDataLayer.order.id.toString(),\n\t\t\tuser_data       : wpm.getFbUserData(),\n\t\t\tevent_source_url: window.location.href,\n\t\t\tcustom_data     : {\n\t\t\t\tcontent_type: \"product\",\n\t\t\t\tvalue       : wpmDataLayer.order.value.marketing,\n\t\t\t\tcurrency    : wpmDataLayer.order.currency,\n\t\t\t\tcontent_ids : wpm.facebookContentIds(),\n\t\t\t},\n\t\t}\n\t}\n\n\t// Pinterest\n\t// https://developers.pinterest.com/docs/conversions/best/\n\t// https://developers.pinterest.com/docs/api/v5/#operation/events/create\n\t// https://developers.pinterest.com/docs/conversions/event/\n\tif (wpmDataLayer?.pixels?.pinterest?.loaded) {\n\n\t\tpayload.pinterest = wpm.getPinterestS2SBaseData()\n\n\t\tpayload.pinterest.event_name = \"checkout\"\n\t}\n\n\t// TikTok\n\t// https://ads.tiktok.com/help/article/standard-events-parameters\n\tif (wpmDataLayer?.pixels?.tiktok?.loaded) {\n\t\tpayload.tiktok = {\n\t\t\tevent     : \"CompletePayment\",\n\t\t\tevent_id  : wpmDataLayer.order.id.toString(),\n\t\t\tcontext   : wpm.getTikTokUserDataFromBrowser(),\n\t\t\tproperties: {\n\t\t\t\tvalue   : wpmDataLayer.order.value.marketing,\n\t\t\t\tcurrency: wpmDataLayer.order.currency,\n\t\t\t\tcontents: wpm.getTikTokOrderItemIds(),\n\t\t\t},\n\t\t}\n\t}\n\n\t/**\n\t * Process the client-to-server event\n\t */\n\n\tjQuery(document).trigger(\"wpmClientSideOrderReceivedPage\", payload)\n\n\t/**\n\t * Process the server-to-server event\n\t */\n\n\t// ! No server-to-server event is sent for this event because it is compiled and sent from the server directly\n})\n\n/**\n * Run WooCommerce specific functions\n */\njQuery(document).on(\"pmw:ready\", async () => {\n\n\t// Only run if WooCommerce is active\n\tif (!wpm.isWooCommerceActive()) {\n\t\treturn\n\t}\n\n\t/**\n\t * Run as soon as wpm namespace is loaded\n\t */\n\n\t// Watch for products visible in viewport\n\twpm.startIntersectionObserverToWatch()\n\n\t// Watch for lazy loaded products\n\twpm.startProductsMutationObserverToWatch()\n})\n","/**\n * Register event listeners\n */\n\n\n/**\n * add_to_cart event\n *\n * WC is inconsistent with events that emit add-to-cart events.\n * adding_to_cart and added_to_are legacy events. Also, they only work\n * on Ajax buttons on shop pages.\n *\n * Never add document or body selectors.\n * The document selector doesn't work.\n * The body selector will cause the events to fire twice and other erratic behavior if used along with other selectors.\n */\nconst addToCartSelectorsArray = [\n\t// \"document\",\n\t// \"body\",\n\t\".add_to_cart_button:not(.product_type_variable)\",\n\t\".ajax_add_to_cart\",\n\t\".single_add_to_cart_button\",\n]\n\nconst addToCartSelectors = wpm.prepareSelectors(addToCartSelectorsArray, \"addToCart\")\n\njQuery(addToCartSelectors).on(\"click adding_to_cart\", (event, data) => {\n\n\t// console.log(\"add_to_cart event fired at: \" + new Date().getTime())\n\t// console.log('add to cart data', data)\n\t// console.log('add to cart event', event)\n\t// console.log('add to cart jQuery(event.target.dataset)', jQuery(event.target.dataset))\n\t// console.log(\"add to cart event.target.dataset\", event.target.dataset)\n\t// console.log(\"add to cart event.target.dataset.quantity\", event.target.dataset.quantity)\n\t// console.log(\"add to cart event.target.dataset.product_id\", event.target.dataset.product_id)\n\n\ttry {\n\n\t\t// console.log(\"add_to_cart event detected\")\n\n\t\tlet quantity  = event?.target?.dataset?.quantity ? event.target.dataset.quantity : null\n\t\tlet productId = event?.target?.dataset?.product_id ? event.target.dataset.product_id : null\n\n\t\t// let quantity  = event.target.dataset.quantity ? event.target.dataset.quantity : 1\n\t\t// let productId = event.target.dataset.product_id ? event.target.dataset.product_id : null\n\n\t\t// Only process on product pages\n\t\tif (wpmDataLayer.shop.page_type === \"product\") {\n\n\t\t\t// First process related and upsell products\n\t\t\tif (\n\t\t\t\ttypeof jQuery(event.currentTarget).attr(\"href\") !== \"undefined\"\n\t\t\t\t&& jQuery(event.currentTarget).attr(\"href\").includes(\"add-to-cart\")\n\t\t\t) {\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(event.currentTarget).data(\"product_id\")\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, 1)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// If is simple product\n\t\t\tif (wpmDataLayer.shop.product_type === \"simple\") {\n\n\t\t\t\tif (quantity === null) {\n\t\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1\n\t\t\t\t}\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(event.currentTarget).val()\n\t\t\t\t}\n\n\t\t\t\t// Fallback if the body selector is used\n\t\t\t\tif (!productId) {\n\t\t\t\t\t// get the product ID from the element that has the class .product\n\t\t\t\t\t// that element will also have an ID that start with product- and ends with the product ID\n\t\t\t\t\t// example: product-123\n\t\t\t\t\t// save the product ID in the variable productId\n\t\t\t\t\tproductId = jQuery(\".product\").attr(\"id\").replace(\"product-\", \"\")\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// If is variable product or variable-subscription\n\t\t\tif ([\"variable\", \"variable-subscription\"].indexOf(wpmDataLayer.shop.product_type) >= 0) {\n\n\t\t\t\tif (quantity === null) {\n\t\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1\n\t\t\t\t}\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(\"[name='variation_id']\").val()\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// If is grouped product\n\t\t\tif (wpmDataLayer.shop.product_type === \"grouped\") {\n\n\t\t\t\tjQuery(\".woocommerce-grouped-product-list-item\").each((index, element) => {\n\n\t\t\t\t\t// Can't rely on  event.target.dataset as it always is sent with the parent product ID and the quantity 1\n\n\t\t\t\t\tquantity = Number(jQuery(element).find(\".input-text.qty\").val()) ? Number(jQuery(element).find(\".input-text.qty\").val()) : 1\n\n\t\t\t\t\tlet classes = jQuery(element).attr(\"class\")\n\t\t\t\t\tproductId   = wpm.getPostIdFromString(classes)\n\n\t\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// If is bundle product\n\t\t\tif (wpmDataLayer.shop.product_type === \"bundle\") {\n\n\t\t\t\tif (quantity === null) {\n\t\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1\n\t\t\t\t}\n\n\t\t\t\tif (!productId) {\n\t\t\t\t\tproductId = jQuery(\"input[name=add-to-cart]\").val()\n\t\t\t\t}\n\n\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// everything else\n\t\t\tif (quantity === null) {\n\t\t\t\tquantity = Number(jQuery(\".input-text.qty\").val()) ? Number(jQuery(\".input-text.qty\").val()) : 1\n\t\t\t}\n\n\t\t\twpm.addProductToCart(productId, quantity)\n\n\t\t} else {\n\n\t\t\tif (quantity === null) {\n\t\t\t\tquantity = 1\n\t\t\t}\n\n\t\t\tif (!productId) {\n\t\t\t\t// console.log(\"add to cart event.currentTarget\", event.currentTarget)\n\t\t\t\tproductId = jQuery(event.currentTarget).data(\"product_id\") ? jQuery(event.currentTarget).data(\"product_id\") : null\n\t\t\t}\n\n\t\t\t// Another fallback to retrieve the product ID in case the ID is saved in the value attribute\n\t\t\tif (!productId) {\n\t\t\t\tproductId = jQuery(event.currentTarget).val() ? jQuery(event.currentTarget).val() : null\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tproductId\n\t\t\t\t&& quantity\n\t\t\t) {\n\t\t\t\twpm.addProductToCart(productId, quantity)\n\t\t\t}\n\t\t}\n\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n/**\n * If someone clicks anywhere on a custom /?add-to-cart=123 link\n * trigger the add to cart event\n */\n\n// jQuery(document).one(\"click\", \"a:not(.add_to_cart_button, .ajax_add_to_cart, .single_add_to_cart_button)\", (event) => {\njQuery(\"a:not(.add_to_cart_button, .ajax_add_to_cart, .single_add_to_cart_button)\").one(\"click\", (event) => {\n\n\ttry {\n\t\tif (jQuery(event.target).closest(\"a\").attr(\"href\")) {\n\n\t\t\tlet url = new URL(jQuery(event.currentTarget).attr(\"href\"), window.location.origin)\n\n\t\t\tif (url.searchParams.has(\"add-to-cart\")) {\n\n\t\t\t\tlet productId = url.searchParams.get(\"add-to-cart\")\n\t\t\t\twpm.addProductToCart(productId, 1)\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n// select item event\n// jQuery(document).on(\"click\", \".woocommerce-LoopProduct-link, .wc-block-grid__product, .product, .product-small, .type-product\", (event) => {\njQuery(\".woocommerce-LoopProduct-link, .wc-block-grid__product, .product, .product-small, .type-product\").on(\"click\", (event) => {\n\n\ttry {\n\n\t\t/**\n\t\t * On some pages the event fires multiple times, and on product pages\n\t\t * even on page load. Using e.stopPropagation helps to prevent this,\n\t\t * but I don't know why. We don't even have to use this, since only a real\n\t\t * product click yields a valid productId. So we filter the invalid click\n\t\t * events out later down in the code. I'll keep it that way because this is\n\t\t * the most compatible way across shops.\n\t\t *\n\t\t * e.stopPropagation();\n\t\t * */\n\n\t\tlet productId = jQuery(event.currentTarget).nextAll(\".wpmProductId:first\").data(\"id\")\n\n\t\t/**\n\t\t * On product pages, for some reason, the click event is triggered on the main product on page load.\n\t\t * In that case no ID is found. But we can discard it, since we only want to trigger the event on\n\t\t * related products, which are found below.\n\t\t */\n\n\t\tif (productId) {\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tif (wpmDataLayer.products && wpmDataLayer.products[productId]) {\n\n\t\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\t\t\t\tjQuery(document).trigger(\"wpmSelectContentGaUa\", product)\n\t\t\t\tjQuery(document).trigger(\"wpmSelectItem\", product)\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n// checkout_progress event\n// track checkout option event: entered valid billing email\n// jQuery(document).on(\"input\", \"#billing_email\", (event) => {\njQuery(\"#billing_email\").on(\"input\", (event) => {\n\n\tif (wpm.isEmail(jQuery(event.currentTarget).val())) {\n\t\t// wpm.fireCheckoutOption(2);\n\t\twpm.fireCheckoutProgress(2)\n\t\twpm.emailSelected = true\n\t}\n})\n\n\n/**\n * Place order button\n *\n * Track checkout option event: purchase click\n * https://stackoverflow.com/a/34112407/4688612\n * jQuery(document).one(\"click\", \"#place_order\", () => {\n *\n * Has to be hooked after document ready !\n */\njQuery(\"form.checkout\").on(\"checkout_place_order_success\", () => {\n\n\t// console log current time\n\t// console.log(\"checkout_place_order_success event fired at: \" + new Date().getTime())\n\n\tif (false === wpm.emailSelected) {\n\t\twpm.fireCheckoutProgress(2)\n\t}\n\n\tif (false === wpm.paymentMethodSelected) {\n\t\twpm.fireCheckoutProgress(3)\n\t\twpm.fireCheckoutOption(3, jQuery(\"input[name='payment_method']:checked\").val())\n\t}\n\n\twpm.fireCheckoutProgress(4)\n\n\tjQuery(document).trigger(\"wpmPlaceOrder\", {})\n})\n\n/**\n * Update cart event\n *\n * Has to be hooked after document ready !\n */\njQuery(\"[name='update_cart']\").on(\"click\", () => {\n\n\t// console.log(\"update_cart event fired at: \" + new Date().getTime())\n\n\ttry {\n\t\tjQuery(\".cart_item\").each((index, element) => {\n\n\t\t\tconst productId = wpm.getProductIdByCartItemElement(element)\n\n\t\t\tif (!productId) {\n\t\t\t\tconsole.error(\"Pixel Manager: Wasn't able to retrieve a productId\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst quantity = wpm.getProductQuantityByCartItemElement(element)\n\n\t\t\tif (!quantity) {\n\t\t\t\tconsole.error(\"Pixel Manager: Wasn't able to retrieve a quantity\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// console.log(\"productId\", productId)\n\t\t\t// console.log(\"quantity\", quantity)\n\n\t\t\tif (quantity === 0) {\n\t\t\t\twpm.removeProductFromCart(productId)\n\t\t\t} else if (quantity < wpmDataLayer.cart[productId].quantity) {\n\t\t\t\twpm.removeProductFromCart(productId, wpmDataLayer.cart[productId].quantity - quantity)\n\t\t\t} else if (quantity > wpmDataLayer.cart[productId].quantity) {\n\t\t\t\twpm.addProductToCart(productId, quantity - wpmDataLayer.cart[productId].quantity)\n\t\t\t}\n\t\t})\n\t} catch (e) {\n\t\tconsole.error(e)\n\t\twpm.getCartItemsFromBackend()\n\t}\n})\n\n// Supports the following plugins:\n// WooCommerce Wishlist: https://woo.com/products/woocommerce-wishlists/\n// YITH WooCommerce Wishlist: https://wordpress.org/plugins/yith-woocommerce-wishlist/\n// add_to_wishlist\njQuery(\".add_to_wishlist,.wl-add-to\").on(\"click\", event => {\n\n\ttry {\n\n\t\tlet productId\n\n\t\tif (jQuery(event.currentTarget).data(\"productid\")) { // for the WooCommerce wishlist plugin\n\n\t\t\tproductId = jQuery(event.currentTarget).data(\"productid\")\n\t\t} else if (jQuery(event.currentTarget).data(\"product-id\")) {  // for the YITH wishlist plugin\n\n\t\t\tproductId = jQuery(event.currentTarget).data(\"product-id\")\n\t\t}\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\n\t\tjQuery(document).trigger(\"wpmAddToWishlist\", product)\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n})\n\n\n/**\n * Called when the user selects all the required dropdowns / attributes\n *\n * Has to be hooked after document ready !\n *\n * https://stackoverflow.com/a/27849208/4688612\n * https://stackoverflow.com/a/65065335/4688612\n */\n\nlet previousVariationId = null;\n\njQuery(\".single_variation_wrap\").on(\"show_variation\", (event, variation) => {\n    try {\n        let productId = wpm.getIdBasedOndVariationsOutputSetting(variation.variation_id);\n\n        if (!productId) throw Error(\"Wasn't able to retrieve a productId\");\n\n        // If the variation id is not the same as the previous one, run the function\n        if (previousVariationId !== variation.variation_id) {\n            wpm.triggerViewItemEventPrep(productId);\n            previousVariationId = variation.variation_id;\n        }\n\n    } catch (e) {\n        console.error(e);\n    }\n});\n\n\n/**\n * Called on variable products when no selection has been done yet\n * or when the visitor deselects his choice.\n *\n * Has to be hooked after document ready !\n */\n\n// jQuery(function () {\n//\n// \tjQuery(\".single_variation_wrap\").on(\"hide_variation\", function () {\n//\n// \t\ttry {\n// \t\t\tlet classes   = jQuery(\"body\").attr(\"class\")\n// \t\t\tlet productId = classes.match(/(postid-)(\\d+)/)[2]\n//\n// \t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n//\n// \t\t\t/**\n// \t\t\t * If we have a variable product with no preset,\n// \t\t\t * and variations output is enabled,\n// \t\t\t * then we send a viewItem event with the first\n// \t\t\t * variation we find for the parent.\n// \t\t\t * If variations output is disabled,\n// \t\t\t * we just send the parent ID.\n// \t\t\t *\n// \t\t\t * And if Facebook microdata is active, use the\n// \t\t\t * microdata product ID.\n// \t\t\t */\n//\n// \t\t\tif (\n// \t\t\t\t\"variable\" === wpmDataLayer.shop.product_type &&\n// \t\t\t\twpmDataLayer?.shop?.variations_output\n// \t\t\t) {\n// \t\t\t\tfor (const [key, product] of Object.entries(wpmDataLayer.products)) {\n// \t\t\t\t\tif (\"parent_id\" in product) {\n//\n// \t\t\t\t\t\tproductId = product.id\n// \t\t\t\t\t\tbreak\n// \t\t\t\t\t}\n// \t\t\t\t}\n//\n// \t\t\t\tif (wpmDataLayer?.pixels?.facebook?.microdata_product_id) {\n// \t\t\t\t\tproductId = wpmDataLayer.pixels.facebook.microdata_product_id\n// \t\t\t\t}\n// \t\t\t}\n//\n// \t\t\t// console.log(\"hmm\")\n// \t\t\twpm.triggerViewItemEventPrep(productId)\n//\n// \t\t} catch (e) {\n// \t\t\tconsole.error(e)\n// \t\t}\n// \t})\n// })\n\n// jQuery(function () {\n//\n// \tjQuery(\".single_variation_wrap\").on(\"hide_variation\", function () {\n// \t\tjQuery(document).trigger(\"wpmviewitem\")\n// \t})\n// })\n","/**\n * Create a wpm namespace under which all functions are declared\n */\n\n// https://stackoverflow.com/a/5947280/4688612\n\n(function (wpm, $, undefined) {\n\n\tconst wpmDeduper = {\n\t\tkeyName          : \"_wpm_order_ids\",\n\t\tcookieExpiresDays: 365,\n\t}\n\n\tconst wpmRestSettings = {\n\t\t// cookiesAvailable                  : '_wpm_cookies_are_available',\n\t\tcookiePmwRestEndpointAvailable: \"restEndpointAvailable\",\n\t\trestEndpointPost              : \"pmw/v1/test/\",\n\t\trestFails                     : 0,\n\t\trestFailsThreshold            : 10,\n\t}\n\n\twpm.emailSelected         = false\n\twpm.paymentMethodSelected = false\n\n\twpm.isBelowRestErrorThreshold = () => wpm.retrieveData(wpmRestSettings.restFails) <= wpmRestSettings.restFailsThreshold\n\n\twpm.isRestEndpointAvailable = async () => {\n\n\t\t// If we already tested the endpoint and have a stored value, return it\n\t\tif (wpm.retrieveData(wpmRestSettings.cookiePmwRestEndpointAvailable)) {\n\t\t\treturn wpm.retrieveData(wpmRestSettings.cookiePmwRestEndpointAvailable)\n\t\t}\n\n\t\treturn await wpm.testEndpoint()\n\t}\n\n\t/**\n\t * Tests a given endpoint by sending a POST request. If the response status is 200, it stores `true` in the dataStorage with given cookie name; else it stores `false`.\n\t *\n\t * @param {string} url - The URL of the endpoint to test. Defaults to concatenation of `wpm.root` and `wpmRestSettings.restEndpointPost`.\n\t * @param {string} cookieName - The name of the cookie where the test result will be stored. Defaults to `wpmRestSettings.cookiePmwRestEndpointAvailable`.\n\t * @returns {Promise<boolean>} - Returns a promise that resolves to `true` if the response status is 200, and `false` otherwise.\n\t * @async\n\t */\n\twpm.testEndpoint = async (\n\t\turl        = wpm.root + wpmRestSettings.restEndpointPost,\n\t\tcookieName = wpmRestSettings.cookiePmwRestEndpointAvailable,\n\t) => {\n\n\t\tconst response = await fetch(url, {\n\t\t\tmethod   : \"POST\",\n\t\t\tmode     : \"cors\",\n\t\t\tcache    : \"no-cache\",\n\t\t\tkeepalive: true,\n\t\t})\n\n\t\tif (response.status === 200) {\n\t\t\twpm.storeData(cookieName, true)\n\t\t\treturn true\n\t\t}\n\n\t\tif (response.status === 404) {\n\t\t\twpm.storeData(cookieName, false)\n\t\t\treturn false\n\t\t}\n\n\t\tif (response.status === 0) {\n\t\t\twpm.storeData(cookieName, false)\n\t\t\treturn false\n\t\t}\n\t}\n\n\twpm.isWpmRestEndpointAvailable = (cookieName = wpmRestSettings.cookiePmwRestEndpointAvailable) => !!wpm.retrieveData(cookieName)\n\n\t/**\n\t * This function writes the provided orderId into storage. It will first retrieve the existing orderIds\n\t * from the storage if any, then add the new orderId into this existing array of orderIds  and stores\n\t * the updated array back to the storage.\n\t * If the function wpm.storeOrderIdOnServer exists and order_duplication_prevention is set to true in wpmDataLayer.shop,\n\t * this function will also store the orderId, orderKey and source on the server side using wpm.storeOrderIdOnServer.\n\t *\n\t * @param {String}  orderId  - The ID of the order to be stored.\n\t * @param {String}  orderKey - The Key of the order to be stored.\n\t * @param {String}  source - The source from which the order originated (default: 'thankyou_page').\n\t */\n\twpm.writeOrderIdToStorage = (orderId, orderKey, source = \"thankyou_page\") => {\n\n\t\t// Get existing order ids\n\t\tlet orderIds = wpm.retrieveData(\"orderIds\", true) || []\n\n\t\t// Add the new order id\n\t\torderIds.push(orderId)\n\n\t\t// Store the order ids\n\t\twpm.storeData(\"orderIds\", orderIds, true)\n\n\t\tif (typeof wpm.storeOrderIdOnServer === \"function\") {\n\t\t\twpm.storeOrderIdOnServer({\n\t\t\t\torderId : orderId,\n\t\t\t\torderKey: orderKey,\n\t\t\t\tsource  : source,\n\t\t\t})\n\t\t}\n\t}\n\n\twpm.isOrderIdStored = orderId => {\n\n\t\t// If order deduplication is disabled, return false\n\t\tif (!wpmDataLayer.shop.order_duplication_prevention) {\n\t\t\twpm.consoleLog(\"order duplication prevention is off\")\n\t\t\treturn false\n\t\t}\n\n\t\tconst orderIds = wpm.retrieveData(\"orderIds\", true) || []\n\t\treturn orderIds.includes(orderId)\n\t}\n\n\t/**\n\t * Check if the email address is valid\n\t *\n\t * https://stackoverflow.com/questions/201323/how-can-i-validate-an-email-address-using-a-regular-expression\n\t * https://www.w3.org/TR/html5/forms.html#valid-e-mail-address\n\t * https://fightingforalostcause.net/content/misc/2006/compare-email-regex.php\n\t *\n\t * @param email\n\t * @returns {boolean}\n\t */\n\twpm.isEmail = email => {\n\n\t\t/**\n\t\t * GitHub Copilot generated RFC 5322 compliant regex\n\t\t * - Don't allow emails without a top-level domain like \"john@localhost\"\n\t\t * - Don't allow emails with dots at the end of the name like \"john.doe.@example.com\"\n\t\t */\n\t\tconst regex = new RegExp(\n\t\t\t\"^(([^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+)*)|(\\\".+\\\"))\"\n\t\t\t+ \"@\"\n\t\t\t+ \"((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])\"\n\t\t\t+ \"|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$\",\n\t\t)\n\n\t\treturn regex.test(email)\n\t}\n\n\twpm.removeProductFromCart = async (productId, quantityToRemove = null) => {\n\n\t\ttry {\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tlet quantity\n\n\t\t\tif (quantityToRemove == null) {\n\t\t\t\tquantity = wpmDataLayer.cart[productId].quantity\n\t\t\t} else {\n\t\t\t\tquantity = quantityToRemove\n\t\t\t}\n\n\t\t\tif (!wpmDataLayer.cart[productId]) {\n\t\t\t\tawait wpm.getProductsFromBackend([productId])\n\t\t\t}\n\n\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId, quantity)\n\n\t\t\tjQuery(document).trigger(\"wpmRemoveFromCart\", product)\n\n\t\t\tif (quantityToRemove == null || wpmDataLayer.cart[productId].quantity === quantityToRemove) {\n\t\t\t\tdelete wpmDataLayer.cart[productId]\n\t\t\t} else {\n\t\t\t\twpmDataLayer.cart[productId].quantity = wpmDataLayer.cart[productId].quantity - quantity\n\t\t\t}\n\n\t\t\twpm.storeCartData(wpmDataLayer.cart)\n\n\t\t} catch (e) {\n\t\t\twpm.consoleError(e)\n\t\t}\n\t}\n\n\twpm.getIdBasedOndVariationsOutputSetting = productId => {\n\n\t\ttry {\n\t\t\tif (wpmDataLayer?.shop?.variations_output) return productId\n\n\t\t\tif (wpmDataLayer.products[productId].is_variation) return wpmDataLayer.products[productId].parent_id\n\n\t\t\treturn productId\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.prepareSelectors = (selectors, type) => {\n\n\t\tif (wpmDataLayer?.shop?.selectors?.[type]) {\n\n\t\t\t// merge the selectors from the addToCartSelectors array with the selectors from the wpmDataLayer.shop.selectors.addToCart array\n\t\t\tselectors = selectors.concat(wpmDataLayer.shop.selectors[type])\n\n\t\t\t// Remove duplicates\n\t\t\tselectors = [...new Set(selectors)]\n\n\t\t\t// If one of the selectors is document, remove it\n\t\t\tif (selectors.indexOf(\"document\") >= 0) {\n\t\t\t\tselectors.splice(selectors.indexOf(\"document\"), 1)\n\t\t\t}\n\n\t\t\t// If one of the selectors is body, remove all others\n\t\t\tif (selectors.indexOf(\"body\") >= 0) {\n\t\t\t\tselectors = [\"body\"]\n\t\t\t}\n\t\t}\n\n\t\treturn selectors.join(\", \")\n\t}\n\n\t// add_to_cart\n\twpm.addProductToCart = async (productId, quantity) => {\n\n\t\t// Cast quantity to number to make sure it's a number\n\t\tquantity = Number(quantity)\n\n\t\ttry {\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\t\tif (!wpmDataLayer?.products[productId]) {\n\t\t\t\tawait wpm.getProductsFromBackend([productId])\n\t\t\t}\n\n\t\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId, quantity)\n\n\t\t\tjQuery(document).trigger(\"wpmAddToCart\", product)\n\n\t\t\t// add product to cart wpmDataLayer['cart']\n\n\t\t\t// if the product already exists in the object, only add the additional quantity\n\t\t\t// otherwise create that product object in the wpmDataLayer['cart']\n\t\t\tif (wpmDataLayer?.cart[productId]) {\n\n\t\t\t\twpmDataLayer.cart[productId].quantity = wpmDataLayer.cart[productId].quantity + quantity\n\t\t\t} else {\n\n\t\t\t\tif (!(\"cart\" in wpmDataLayer)) wpmDataLayer.cart = {}\n\n\t\t\t\twpmDataLayer.cart[productId] = wpm.getProductDetailsFormattedForEvent(productId, quantity)\n\t\t\t}\n\n\t\t\twpm.storeCartData(wpmDataLayer.cart)\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\n\t\t\t// fallback if wpmDataLayer.cart and wpmDataLayer.products got out of sync in case cart caching has an issue\n\t\t\twpm.getCartItemsFromBackend()\n\t\t}\n\t}\n\n\twpm.initCart = () => {\n\n\t\t// If the WC cart doesn't exist, eg. after a confirmed purchase,\n\t\t// and we still have a cart object in the storage, reset it.\n\t\tif (\n\t\t\t!wpm.doesWooCommerceCartExist()\n\t\t\t&& Object.keys(wpm.retrieveCartData()).length !== 0\n\t\t) {\n\t\t\twpm.storeCartData({})\n\t\t\treturn\n\t\t}\n\n\t\t// If the cart object is in the storage, use it\n\t\tif (wpm.retrieveCartData()) {\n\t\t\twpm.saveCartObjectToDataLayer(wpm.retrieveCartData())\n\t\t\treturn\n\t\t}\n\n\t\t// If the cart object is missing in the storage, create an empty one and get the cart items from the backend\n\t\twpm.storeCartData({})\n\t\twpm.getCartItemsFromBackend()\n\t}\n\n\t// get all cart items from the backend\n\twpm.getCartItemsFromBackend = () => {\n\t\ttry {\n\n\t\t\t/**\n\t\t\t * Can't use a REST API endpoint, as the cart session will not be loaded if the\n\t\t\t * endpoint is called.\n\t\t\t *\n\t\t\t * https://wordpress.org/support/topic/wc-cart-is-null-in-custom-rest-api/#post-11442843\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * Get the cart items from the backend the data object using fetch API\n\t\t\t * and log success or error messages\n\t\t\t * and url encoded data\n\t\t\t */\n\t\t\tfetch(wpm.ajax_url, {\n\t\t\t\tmethod   : \"POST\",\n\t\t\t\tcache    : \"no-cache\",\n\t\t\t\tbody     : new URLSearchParams({action: \"pmw_get_cart_items\"}),\n\t\t\t\tkeepalive: true,\n\t\t\t})\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn response.json()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow Error(\"Error getting cart items from backend\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(data => {\n\n\t\t\t\t\tif (data.success) {\n\n\t\t\t\t\t\tif (!data.data[\"cart\"]) data.data[\"cart\"] = {}\n\t\t\t\t\t\twpm.saveCartObjectToDataLayer(data.data[\"cart\"])\n\t\t\t\t\t\twpm.storeCartData(data.data[\"cart\"])\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow Error(\"Error getting cart items from backend\")\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// Get product IDs from the backend\n\twpm.getProductsFromBackend = async productIds => {\n\n\t\tif (wpmDataLayer?.products) {\n\t\t\t// If productIds already exists as key in wpmDataLayer.products, remove it from the array\n\t\t\tproductIds = productIds.filter(productId => !(productId in wpmDataLayer.products))\n\t\t}\n\n\t\t// If no product IDs are in the object, don't try to get anything from the server\n\t\tif (!productIds || productIds.length === 0) return\n\n\t\t// if no page_id is set, don't try to get anything from the server\n\t\tif (!wpmDataLayer.general.page_id) return\n\n\t\t// if productIds is not an array, or it's an empty array, don't try to get anything from the server\n\t\tif (!Array.isArray(productIds) || productIds.length === 0) return\n\n\t\ttry {\n\n\t\t\tlet data = {\n\t\t\t\taction     : \"pmw_get_product_ids\",  // for the AJAX call\n\t\t\t\tpage_id    : wpmDataLayer.general.page_id,\n\t\t\t\tpage_type  : wpmDataLayer.shop.page_type,\n\t\t\t\tproduct_ids: productIds,\n\t\t\t}\n\n\t\t\tconst isRestEndpointAvailable = await wpm.isRestEndpointAvailable()\n\t\t\tconst url                     = isRestEndpointAvailable ? wpm.root + \"pmw/v1/products/\" : wpm.ajax_url\n\n\t\t\tconst options = {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tcache : \"no-cache\",\n\t\t\t\tbody  : isRestEndpointAvailable ? JSON.stringify(data) : new URLSearchParams(data),\n\t\t\t}\n\n\t\t\t// If the REST API is available, set the headers to JSON\n\t\t\tif (isRestEndpointAvailable) {\n\t\t\t\toptions.headers = {\"Content-Type\": \"application/json\"}\n\t\t\t}\n\n\t\t\tlet response = await fetch(url, options)\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(\"Error getting products from backend. Status: \" + response.status + \" Status text: \" + response.statusText)\n\t\t\t}\n\n\t\t\tlet responseData = await response.json()\n\n\t\t\tif (!responseData.success) {\n\t\t\t\tthrow new Error(\"Error getting products from backend: \" + responseData.data)\n\t\t\t}\n\n\t\t\twpmDataLayer.products = Object.assign({}, wpmDataLayer.products, responseData.data)\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\n\t\treturn true\n\t}\n\n\twpm.saveCartObjectToDataLayer = cartObject => {\n\n\t\twpmDataLayer.cart     = cartObject\n\t\twpmDataLayer.products = Object.assign({}, wpmDataLayer.products, cartObject)\n\t}\n\n\twpm.triggerViewItemEventPrep = async productId => {\n\n\t\tif (wpmDataLayer.products && wpmDataLayer.products[productId]) {\n\n\t\t\twpm.triggerViewItemEvent(productId)\n\t\t} else {\n\t\t\tawait wpm.getProductsFromBackend([productId])\n\t\t\twpm.triggerViewItemEvent(productId)\n\t\t}\n\t}\n\n\twpm.triggerViewItemEvent = productId => {\n\n\t\tlet product = wpm.getProductDetailsFormattedForEvent(productId)\n\n\t\tjQuery(document).trigger(\"wpmViewItem\", product)\n\t}\n\n\twpm.triggerViewItemEventNoProduct = () => {\n\t\tjQuery(document).trigger(\"wpmViewItem\")\n\t}\n\n\twpm.fireCheckoutOption = (step, checkout_option = null, value = null) => {\n\n\t\tlet data = {\n\t\t\tstep           : step,\n\t\t\tcheckout_option: checkout_option,\n\t\t\tvalue          : value,\n\t\t}\n\n\t\tjQuery(document).trigger(\"wpmFireCheckoutOption\", data)\n\t}\n\n\twpm.fireCheckoutProgress = step => {\n\n\t\tlet data = {\n\t\t\tstep: step,\n\t\t}\n\n\t\tjQuery(document).trigger(\"wpmFireCheckoutProgress\", data)\n\t}\n\n\twpm.getPostIdFromString = string => {\n\n\t\ttry {\n\t\t\treturn string.match(/(post-)(\\d+)/)[2]\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.triggerViewItemList = productId => {\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\tproductId = wpm.getIdBasedOndVariationsOutputSetting(productId)\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\tjQuery(document).trigger(\"wpmViewItemList\", wpm.getProductDataForViewItemEvent(productId))\n\t}\n\n\twpm.getProductDataForViewItemEvent = productId => {\n\n\t\tif (!productId) throw Error(\"Wasn't able to retrieve a productId\")\n\n\t\ttry {\n\t\t\tif (wpmDataLayer.products[productId]) {\n\n\t\t\t\treturn wpm.getProductDetailsFormattedForEvent(productId)\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.getMainProductIdFromProductPage = () => {\n\n\t\ttry {\n\t\t\tif ([\"simple\", \"variable\", \"grouped\", \"composite\", \"bundle\"].indexOf(wpmDataLayer.shop.product_type) >= 0) {\n\t\t\t\treturn jQuery(\".wpmProductId:first\").data(\"id\")\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.viewItemListTriggerTestMode = target => {\n\n\t\tjQuery(target).css({\"position\": \"relative\"})\n\t\tjQuery(target).append(\"<div id=\\\"viewItemListTriggerOverlay\\\"></div>\")\n\t\tjQuery(target).find(\"#viewItemListTriggerOverlay\").css({\n\t\t\t\"z-index\"         : \"10\",\n\t\t\t\"display\"         : \"block\",\n\t\t\t\"position\"        : \"absolute\",\n\t\t\t\"height\"          : \"100%\",\n\t\t\t\"top\"             : \"0\",\n\t\t\t\"left\"            : \"0\",\n\t\t\t\"right\"           : \"0\",\n\t\t\t\"opacity\"         : wpmDataLayer.shop.view_item_list_trigger.opacity,\n\t\t\t\"background-color\": wpmDataLayer.shop.view_item_list_trigger.background_color,\n\t\t})\n\t}\n\n\twpm.getSearchTermFromUrl = () => {\n\n\t\ttry {\n\t\t\tlet urlParameters = new URLSearchParams(window.location.search)\n\t\t\treturn urlParameters.get(\"s\")\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// we need this to track timeouts for intersection observers\n\tlet ioTimeouts = {}\n\n\twpm.observerCallback = (entries, observer) => {\n\n\t\tentries.forEach((entry) => {\n\n\t\t\ttry {\n\t\t\t\tlet productId\n\n\t\t\t\tlet elementId = jQuery(entry.target).data(\"ioid\")\n\n\t\t\t\t// Get the productId from next element, if wpmProductId is a sibling, like in Gutenberg blocks\n\t\t\t\t// otherwise go search in children, like in regular WC loop items\n\t\t\t\tif (jQuery(entry.target).next(\".wpmProductId\").length) {\n\t\t\t\t\t// console.log('test 1');\n\t\t\t\t\tproductId = jQuery(entry.target).next(\".wpmProductId\").data(\"id\")\n\t\t\t\t} else {\n\t\t\t\t\tproductId = jQuery(entry.target).find(\".wpmProductId\").data(\"id\")\n\t\t\t\t}\n\n\n\t\t\t\tif (!productId) throw Error(\"wpmProductId element not found\")\n\n\t\t\t\tif (entry.isIntersecting) {\n\n\t\t\t\t\tioTimeouts[elementId] = setTimeout(() => {\n\n\t\t\t\t\t\twpm.triggerViewItemList(productId)\n\t\t\t\t\t\tif (wpmDataLayer.shop.view_item_list_trigger.test_mode) wpm.viewItemListTriggerTestMode(entry.target)\n\t\t\t\t\t\tif (wpmDataLayer.shop.view_item_list_trigger.repeat === false) observer.unobserve(entry.target)\n\t\t\t\t\t}, wpmDataLayer.shop.view_item_list_trigger.timeout)\n\n\t\t\t\t} else {\n\n\t\t\t\t\tclearTimeout(ioTimeouts[elementId])\n\t\t\t\t\tif (wpmDataLayer.shop.view_item_list_trigger.test_mode) jQuery(entry.target).find(\"#viewItemListTriggerOverlay\").remove()\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t})\n\t}\n\n\t// fire view_item_list only on products that have become visible\n\tlet io\n\tlet ioid = 0\n\n\tconst getCommonIdentifiersToWatch = () => {\n\n\t\tlet listOfClassNames = {\n\t\t\tnested: [],\n\t\t\tflat  : [],\n\t\t}\n\n\t\ttry {\n\n\t\t\tconst haveSameNestingDepth = (element1, element2) => {\n\n\t\t\t\t// If both are the same, return the parent\n\t\t\t\treturn jQuery(element1).parents().length === jQuery(element2).parents().length\n\t\t\t}\n\n\t\t\tconst findCommonParentElement = (element1, element2) => {\n\t\t\t\t// If both are the same, return the parent\n\t\t\t\tif (jQuery(element1).parent().is(jQuery(element2).parent())) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnode: jQuery(element1).parent(),\n\t\t\t\t\t\ttype: \"flat\",\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tnode: jQuery(element1).parents().has(jQuery(element2).parents()).first(),\n\t\t\t\t\ttype: \"nested\",\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst countOfChildren = (element) => {\n\t\t\t\t// Return the count of \"wpmProductId\" elements\n\t\t\t\treturn jQuery(element).find(\".wpmProductId\").length\n\t\t\t}\n\n\t\t\tconst getCommonClass = (classes1, classes2) => {\n\n\t\t\t\t// console.log(\"classes1\", classes1);\n\t\t\t\t// console.log(\"classes2\", classes2);\n\t\t\t\t// classes 1 and 2 are arrays of classes\n\t\t\t\t// They may contain the same classes, but not in the same order\n\t\t\t\t// Return the first common class that's present in both arrays\n\n\t\t\t\treturn classes1.filter(value => classes2.includes(value))[0] || null\n\t\t\t}\n\n\t\t\tconst wpmProductIds = document.querySelectorAll(\".wpmProductId\")\n\n\t\t\t// If zero or only one product template is found, then we can't run the algorithm\n\t\t\tif (wpmProductIds.length === 1) {\n\t\t\t\t// console.log(\"No product or too few templates found\")\n\t\t\t\treturn listOfClassNames\n\t\t\t}\n\n\t\t\t// console.log(\"wpmProductIds\", wpmProductIds);\n\t\t\t// console.log(\"looping\")\n\n\t\t\tfor (let i = 0; i < wpmProductIds.length - 1; i++) {\n\n\t\t\t\t// console.log(\"i\", i)\n\n\t\t\t\tif (!haveSameNestingDepth(wpmProductIds[i], wpmProductIds[i + 1])) {\n\t\t\t\t\t// console.log(\"The nesting depth is not the same\")\n\t\t\t\t\ti++\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tlet productsNode = findCommonParentElement(wpmProductIds[i], wpmProductIds[i + 1])\n\t\t\t\t// console.log(\"productsNode.node\", productsNode.node)\n\t\t\t\t// console.log(\"productsNode.type\", productsNode.type)\n\n\t\t\t\t// If the productsNode is nested, get the first class of the first child. Then console log the class\n\t\t\t\tif (productsNode.type === \"nested\") {\n\n\t\t\t\t\tlet firstChildClasses  = productsNode.node.children().first().attr(\"class\").split(\" \")\n\t\t\t\t\tlet secondChildClasses = productsNode.node.children().first().next().attr(\"class\").split(\" \")\n\n\t\t\t\t\tconst commonClass = getCommonClass(firstChildClasses, secondChildClasses)\n\n\t\t\t\t\tlistOfClassNames.nested.push(commonClass)\n\t\t\t\t} else if (productsNode.type === \"flat\") {\n\n\t\t\t\t\t// If class is not found, continue\n\t\t\t\t\tif (!productsNode.node.children().first().attr(\"class\")) continue\n\n\t\t\t\t\t// firstProductTemplateClasses is the classes of the first child element of the productsNode\n\t\t\t\t\tlet firstProductTemplateClasses = productsNode.node.children().first().attr(\"class\").split(\" \")[0]\n\n\t\t\t\t\tlistOfClassNames.flat.push(firstProductTemplateClasses)\n\t\t\t\t}\n\n\t\t\t\t// which wpmProductIds is the last one in the productsNode? console log the index of the last wpmProductId in the productsNode\n\t\t\t\t// console.log(\"productsNode.children().length\", countOfChildren(productsNode));\n\n\t\t\t\ti = i + countOfChildren(productsNode.node) - 1\n\t\t\t}\n\n\t\t\t// Make the list of class names unique\n\t\t\tlistOfClassNames.nested = [...new Set(listOfClassNames.nested)]\n\t\t\tlistOfClassNames.flat   = [...new Set(listOfClassNames.flat)]\n\n\t\t\treturn listOfClassNames\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\treturn listOfClassNames\n\t\t}\n\t}\n\n\n\tlet detectedProductTemplateClasses = {\n\t\tnested: [],\n\t\tflat  : [],\n\t}\n\n\tconst isNestedClass = (elem) => {\n\t\tlet nestedClassNames = [\n\t\t\t\"product\",\n\t\t\t\"type-product\",\n\t\t\t\"product-item-inner\",\n\t\t\t...detectedProductTemplateClasses.nested,\n\t\t]\n\n\t\treturn nestedClassNames.some(className => jQuery(elem).closest(\".\" + className).length)\n\t}\n\n\tconst isFlatClass = (elem) => {\n\n\t\tlet flatClassNames = [\n\t\t\t\"wc-block-grid__product\",\n\t\t\t\"product\",\n\t\t\t\"product-small\",\n\t\t\t\"woocommerce-LoopProduct-link\",\n\t\t\t...detectedProductTemplateClasses.flat,\n\t\t]\n\n\t\treturn flatClassNames.some(className => jQuery(elem).prev().hasClass(className))\n\t}\n\n\tconst getAllElementsToWatch = () => {\n\n\t\tdetectedProductTemplateClasses = getCommonIdentifiersToWatch()\n\n\t\treturn jQuery(\".wpmProductId\")\n\t\t\t.map(function (i, elem) {\n\n\t\t\t\tif (isNestedClass(elem)) {\n\t\t\t\t\treturn jQuery(elem).parent()\n\t\t\t\t} else if (isFlatClass(elem)) {\n\t\t\t\t\treturn jQuery(this).prev()\n\t\t\t\t} else if (jQuery(elem).closest(\".product\").length) {\n\t\t\t\t\treturn jQuery(elem).closest(\".product\")\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\twpm.startIntersectionObserverToWatch = () => {\n\n\t\ttry {\n\t\t\t// enable view_item_list test mode from browser\n\t\t\tif (wpm.urlHasParameter(\"vildemomode\")) wpmDataLayer.shop.view_item_list_trigger.test_mode = true\n\n\t\t\t// set up intersection observer\n\t\t\t// https://stackoverflow.com/questions/62084306/intersectionobserver-not-working-in-safari-or-ios\n\t\t\tio = new IntersectionObserver(wpm.observerCallback, {\n\t\t\t\troot: null,\n\t\t\t\t// root     : document.body,\n\t\t\t\tthreshold: wpmDataLayer.shop.view_item_list_trigger.threshold,\n\t\t\t})\n\n\t\t\tgetAllElementsToWatch().each((i, elem) => {\n\n\t\t\t\tjQuery(elem[0]).data(\"ioid\", ioid++)\n\n\t\t\t\tio.observe(elem[0])\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// Watch DOM for new lazy loaded products and add them to the intersection observer\n\twpm.startProductsMutationObserverToWatch = () => {\n\n\t\ttry {\n\t\t\t// Pass in the target node, as well as the observer options\n\n\t\t\t// selects the most common parent node\n\t\t\t// https://stackoverflow.com/a/7648323/4688612\n\t\t\tlet productsNode = jQuery(\".wpmProductId:eq(0)\").parents().has(jQuery(\".wpmProductId:eq(1)\").parents()).first()\n\n\t\t\tif (productsNode.length) {\n\t\t\t\tproductsMutationObserver.observe(productsNode[0], {\n\t\t\t\t\tattributes   : true,\n\t\t\t\t\tchildList    : true,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\t// Create an observer instance\n\tconst productsMutationObserver = new MutationObserver(mutations => {\n\n\t\tmutations.forEach(mutation => {\n\t\t\tlet newNodes = mutation.addedNodes // DOM NodeList\n\t\t\tif (newNodes !== null) { // If there are new nodes added\n\t\t\t\tlet nodes = jQuery(newNodes) // jQuery set\n\t\t\t\tnodes.each((i, node) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t// jQuery(this).hasClass(\"type-product\") ||\n\t\t\t\t\t\t// jQuery(this).hasClass(\"product-small\") ||\n\t\t\t\t\t\t// jQuery(this).hasClass(\"wc-block-grid__product\")\n\t\t\t\t\t\t// jQuery(this).hasClass(\"type-product\")\n\t\t\t\t\t\tisNestedClass(node) || isFlatClass(node)\n\t\t\t\t\t) {\n\t\t\t\t\t\t// check if the node has a child or sibling wpmProductId\n\t\t\t\t\t\t// if yes add it to the intersectionObserver\n\t\t\t\t\t\tif (hasWpmProductIdElement(node)) {\n\t\t\t\t\t\t\tjQuery(node).data(\"ioid\", ioid++)\n\t\t\t\t\t\t\tio.observe(node)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t})\n\n\tlet hasWpmProductIdElement = elem =>\n\t\t!!(jQuery(elem).find(\".wpmProductId\").length ||\n\t\t\tjQuery(elem).siblings(\".wpmProductId\").length)\n\n\t/**\n\t * Sets a new cookie or updates an existing one with the provided name and value.\n\t *\n\t * @function setCookie\n\t * @global\n\t * @param {string} cookieName - The name of the cookie.\n\t * @param {string} [cookieValue=\"\"] - The value to set for the cookie. Default value is an empty string.\n\t * @param {number} [expiryDays=null] - The number of days until the cookie expires. If not provided, the cookie will last until the end of the session.\n\t * @returns {void}\n\t *\n\t * @example\n\t * // This will create a cookie \"username\" with the value \"JohnDoe\" that expires in 7 days\n\t * wpm.setCookie(\"username\", \"JohnDoe\", 7);\n\t */\n\twpm.setCookie = (cookieName, cookieValue = \"\", expiryDays = null) => {\n\n\t\tif (expiryDays) {\n\n\t\t\tlet d = new Date()\n\t\t\td.setTime(d.getTime() + (expiryDays * 24 * 60 * 60 * 1000))\n\t\t\tlet expires     = \"expires=\" + d.toUTCString()\n\t\t\tdocument.cookie = cookieName + \"=\" + cookieValue + \";\" + expires + \";path=/\"\n\t\t} else {\n\t\t\tdocument.cookie = cookieName + \"=\" + cookieValue + \";path=/\"\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the value of a specific cookie from the document's cookie string.\n\t *\n\t * @param {String} cookieName - The name of the cookie to retrieve.\n\t * @returns {String} - The value of the cookie if found, an empty string otherwise.\n\t *\n\t * @example\n\t * // returns 'value' if 'cookieName=value' exists in document.cookie\n\t * wpm.getCookie('cookieName')\n\t */\n\twpm.getCookie = cookieName => {\n\n\t\tlet name          = cookieName + \"=\"\n\t\tlet decodedCookie = decodeURIComponent(document.cookie)\n\t\tlet ca            = decodedCookie.split(\";\")\n\n\t\tfor (let i = 0; i < ca.length; i++) {\n\n\t\t\tlet c = ca[i]\n\n\t\t\twhile (c.charAt(0) == \" \") {\n\t\t\t\tc = c.substring(1)\n\t\t\t}\n\n\t\t\tif (c.indexOf(name) == 0) {\n\t\t\t\treturn c.substring(name.length, c.length)\n\t\t\t}\n\t\t}\n\n\t\treturn \"\"\n\t}\n\n\t/**\n\t * Find and get the cookie with a name that contains the string.\n\t * If one is found, then return the cookie.\n\t * If none is found, then return false.\n\t *\n\t * @param string\n\t * @returns {boolean|string}\n\t *\n\t * @since 1.32.5\n\t */\n\twpm.getCookieThatContainsRegex = (regex) => {\n\n\t\tlet cookies = document.cookie.split(\";\")\n\n\t\tfor (let i = 0; i < cookies.length; i++) {\n\t\t\tlet cookie = cookies[i].trim()\n\n\t\t\tif (regex.test(cookie)) {\n\t\t\t\treturn cookie\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\twpm.deleteCookie = cookieName => {\n\t\twpm.setCookie(cookieName, \"\", -1)\n\t}\n\n\t/**\n\t * Store data in the browser\n\t *\n\t * Try to store the data in the local storage (session or persistent) if available.\n\t * If not available, store the data in the cookie.\n\t *\n\t * Max cookie expiry is 400 days as specified by Google Chrome: https://developer.chrome.com/blog/cookie-max-age-expires/\n\t *\n\t * @param key\n\t * @param value\n\t * @param persistent\n\t * @param extension\n\t */\n\twpm.storeData = (key, value, persistent = false, extension = false) => {\n\n\t\tconst suffix = extension ? key : \"\"\n\n\t\tlet dataGetter = persistent ? wpm.getPersistentData : wpm.getSessionData\n\t\tlet dataSetter = persistent ? wpm.setPersistentData : wpm.setSessionData\n\n\t\tlet data = dataGetter(suffix)\n\t\textension ? data = value : data[key] = value\n\n\t\tdataSetter(data, suffix)\n\t}\n\n\twpm.retrieveData = (key, persistent = false, extension = false) => {\n\n\t\tconst suffix = extension ? key : \"\"\n\n\t\tlet data = persistent ? wpm.getPersistentData(suffix) : wpm.getSessionData(suffix)\n\n\t\treturn extension ? data : data[key]\n\t}\n\n\twpm.storeCartData = data => {\n\t\twpm.storeData(\"cart\", data, false, true)\n\t}\n\n\twpm.retrieveCartData = () => {\n\t\treturn wpm.retrieveData(\"cart\", false, true)\n\t}\n\n\twpm.getSessionDataKey = (suffix = \"\") => {\n\t\tconst defaultStorageKey = \"_pmw_session_data\"\n\n\t\tif (suffix) {\n\t\t\treturn defaultStorageKey + \"_\" + suffix\n\t\t}\n\n\t\treturn defaultStorageKey\n\t}\n\n\twpm.getPersistentDataKey = (storageKeySuffix) => {\n\n\t\tconst defaultStorageKey = \"_pmw_persistent_data\"\n\n\t\tif (storageKeySuffix) {\n\t\t\treturn defaultStorageKey + \"_\" + storageKeySuffix\n\t\t}\n\n\t\treturn defaultStorageKey\n\t}\n\n\twpm.getSessionData = (suffix = \"\") => {\n\n\t\tif (window.sessionStorage) {\n\n\t\t\tlet data = window.sessionStorage.getItem(wpm.getSessionDataKey(suffix))\n\n\t\t\treturn data !== null ? JSON.parse(data) : {}\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\tlet data = wpm.getCookie(wpm.getSessionDataKey(suffix))\n\n\t\t\treturn data !== \"\" ? JSON.parse(data) : {}\n\t\t}\n\t}\n\n\twpm.setSessionData = (data, storageKeySuffix = \"\") => {\n\t\tif (window.sessionStorage) {\n\t\t\twindow.sessionStorage.setItem(wpm.getSessionDataKey(storageKeySuffix), JSON.stringify(data))\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\twpm.setCookie(wpm.getSessionDataKey(storageKeySuffix), JSON.stringify(data))\n\t\t}\n\t}\n\n\twpm.getPersistentData = (storageKeySuffix) => {\n\n\t\tif (window.localStorage) {\n\n\t\t\tlet data = window.localStorage.getItem(wpm.getPersistentDataKey(storageKeySuffix))\n\n\t\t\treturn data !== null ? JSON.parse(data) : {}\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\tlet data = wpm.getCookie(wpm.getPersistentDataKey(storageKeySuffix))\n\n\t\t\treturn data !== \"\" ? JSON.parse(data) : {}\n\n\t\t}\n\t}\n\n\twpm.setPersistentData = (data, storageKeySuffix = \"\") => {\n\n\t\tif (window.localStorage) {\n\t\t\twindow.localStorage.setItem(wpm.getPersistentDataKey(storageKeySuffix), JSON.stringify(data))\n\t\t} else {\n\t\t\t// fallback to cookie\n\t\t\twpm.setCookie(wpm.getPersistentDataKey(storageKeySuffix), JSON.stringify(data), 400)\n\t\t}\n\t}\n\n\twpm.storeOrderIdOnServer = async (orderDetails) => {\n\n\t\ttry {\n\n\t\t\tlet response\n\n\t\t\tif (await wpm.isRestEndpointAvailable()) {\n\n\t\t\t\tresponse = await fetch(wpm.root + \"pmw/v1/pixels-fired/\", {\n\t\t\t\t\tmethod   : \"POST\",\n\t\t\t\t\theaders  : {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t// \"X-WP-Nonce\"  : wpm.nonce_wp_rest,\n\t\t\t\t\t},\n\t\t\t\t\tbody     : JSON.stringify({\n\t\t\t\t\t\torder_id : orderDetails.orderId,\n\t\t\t\t\t\torder_key: orderDetails.orderKey,\n\t\t\t\t\t\tsource   : orderDetails.source,\n\t\t\t\t\t\t// nonce   : wpm.pmw_nonce,\n\t\t\t\t\t}),\n\t\t\t\t\tkeepalive: true,\n\t\t\t\t\tcache    : \"no-cache\",\n\t\t\t\t})\n\n\t\t\t} else {\n\n\t\t\t\twpm.consoleLog(\"REST API not available, falling back to AJAX\")\n\n\t\t\t\t// save the state in the database\n\n\t\t\t\t// Send the data object with ajax request\n\t\t\t\t// and log success or error using fetch API and url encoded\n\t\t\t\tresponse = await fetch(wpm.ajax_url, {\n\t\t\t\t\tmethod   : \"POST\",\n\t\t\t\t\tbody     : new URLSearchParams({\n\t\t\t\t\t\taction   : \"pmw_purchase_pixels_fired\",\n\t\t\t\t\t\torder_id : orderDetails.orderId,\n\t\t\t\t\t\torder_key: orderDetails.orderKey,\n\t\t\t\t\t\tsource   : orderDetails.source,\n\t\t\t\t\t\t// nonce_ajax: wpm.nonce_ajax,\n\t\t\t\t\t}),\n\t\t\t\t\tkeepalive: true,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst responseJson = await response.json()\n\n\t\t\tif (responseJson.success) {\n\t\t\t\twpm.consoleLog(\"\", responseJson.data)\n\t\t\t} else {\n\t\t\t\twpm.consoleError(\"\", responseJson.data)\n\t\t\t}\n\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\twpm.getProductIdByCartItemElement = element => {\n\n\t\tconst href = jQuery(element).find(\".product-remove\").find(\"a\").attr(\"href\")\n\t\tif (href) return wpm.getProductIdByCartItemKeyUrl(new URL(href))\n\n\t\tconst productId = jQuery(element).find(\"[data-product_id]\").first().attr(\"data-product_id\")\n\t\treturn productId ? productId : null\n\t}\n\n\twpm.getProductQuantityByCartItemElement = element => {\n\n\t\treturn jQuery(element).find(\".qty\").val() || null\n\t}\n\n\twpm.getProductIdByCartItemKeyUrl = url => {\n\n\t\tlet searchParams = new URLSearchParams(url.search)\n\t\tlet cartItemKey  = searchParams.get(\"remove_item\")\n\n\t\tlet productId\n\n\t\tif (wpmDataLayer.cart_item_keys[cartItemKey][\"variation_id\"] === 0) {\n\t\t\tproductId = wpmDataLayer.cart_item_keys[cartItemKey][\"product_id\"]\n\t\t} else {\n\t\t\tproductId = wpmDataLayer.cart_item_keys[cartItemKey][\"variation_id\"]\n\t\t}\n\n\t\treturn productId\n\t}\n\n\twpm.getAddToCartLinkProductIds = () =>\n\t\tjQuery(\"a\").map(function () {\n\t\t\tlet href = jQuery(this).attr(\"href\")\n\n\t\t\tif (href && href.includes(\"?add-to-cart=\")) {\n\t\t\t\tlet matches = href.match(/(add-to-cart=)(\\d+)/)\n\t\t\t\tif (matches) return matches[2]\n\t\t\t}\n\t\t}).get()\n\n\twpm.getProductDetailsFormattedForEvent = (productId, quantity = 1) => {\n\n\t\tlet product = {\n\t\t\tid           : productId.toString(),\n\t\t\tdyn_r_ids    : wpmDataLayer.products[productId].dyn_r_ids,\n\t\t\tname         : wpmDataLayer.products[productId].name,\n\t\t\tlist_name    : wpmDataLayer.shop.list_name,\n\t\t\tbrand        : wpmDataLayer.products[productId].brand,\n\t\t\tcategory     : wpmDataLayer.products[productId].category,\n\t\t\tvariant      : wpmDataLayer.products[productId].variant,\n\t\t\tlist_position: wpmDataLayer.products[productId].position,\n\t\t\tquantity     : quantity,\n\t\t\tprice        : wpmDataLayer.products[productId].price,\n\t\t\tcurrency     : wpmDataLayer.shop.currency,\n\t\t\tis_variable  : wpmDataLayer.products[productId].is_variable,\n\t\t\tis_variation : wpmDataLayer.products[productId].is_variation,\n\t\t\tparent_id    : wpmDataLayer.products[productId].parent_id,\n\t\t}\n\n\t\tif (product.is_variation) product[\"parent_id_dyn_r_ids\"] = wpmDataLayer.products[productId].parent_id_dyn_r_ids\n\n\t\treturn product\n\t}\n\n\twpm.getClidFromBrowser = (clidId = \"gclid\") => {\n\n\t\tlet clidCookieId\n\n\t\tclidCookieId = {\n\t\t\tgclid: \"_gcl_aw\",\n\t\t\tdclid: \"_gcl_dc\",\n\t\t}\n\n\t\tif (wpm.getCookie(clidCookieId[clidId])) {\n\n\t\t\tlet clidCookie = wpm.getCookie(clidCookieId[clidId])\n\t\t\tlet matches    = clidCookie.match(/(GCL.[\\d]*.)(.*)/)\n\t\t\treturn matches[2]\n\t\t} else {\n\t\t\treturn \"\"\n\t\t}\n\t}\n\n\twpm.getUserAgent = () => navigator.userAgent\n\n\twpm.getViewPort = () => ({\n\t\twidth : Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0),\n\t\theight: Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0),\n\t})\n\n\n\twpm.consoleLogVersion = () => {\n\t\tconsole.log(wpmDataLayer.version)\n\t}\n\n\t/**\n\t * https://api.jquery.com/jquery.getscript/\n\t *\n\t * Switched back to jQuery.ajax as the fetch method on some sites returned a type error\n\t * Possible reasons are:\n\t *    * CORS mismatch\n\t *    * The user is using an ad blocker\n\t *\n\t * This code is .thenable\n\t */\n\n\twpm.loadScriptAndCacheIt = url => {\n\n\t\t// Get and load the script using fetch API, if possible from cache, and return it without using eval\n\t\t// return fetch(url, {\n\t\t// \tmethod   : \"GET\",\n\t\t// \tcache    : \"default\",\n\t\t// \tkeepalive: true,\n\t\t// })\n\t\t// \t.then(response => {\n\t\t// \t\tif (response.ok) {\n\t\t// \t\t\t// console.log(\"response\", response)\n\t\t// \t\t\treturn response.text()\n\t\t// \t\t\t// console.log(\"wpm.loadScriptAndCacheIt success: \" + url)\n\t\t// \t\t} else {\n\t\t// \t\t\tthrow new Error(\"Network response was not ok: \" + url)\n\t\t// \t\t}\n\t\t// \t})\n\t\t// \t.then(script => {\n\t\t// \t\t// Execute the script\n\t\t// \t\t// console.error(\"executing script: \" + script)\n\t\t// \t\teval(script)\n\t\t// \t\t// console.log(\"executed script: \" + script)\n\t\t// \t})\n\t\t// \t.catch(e => {\n\t\t// \t\tconsole.error(e)\n\t\t// \t})\n\n\t\tlet options = {\n\t\t\tdataType: \"script\",\n\t\t\tcache   : true,\n\t\t\turl     : url,\n\t\t}\n\n\t\treturn jQuery.ajax(options)\n\t}\n\n\twpm.getOrderItemPrice = orderItem => (orderItem.total + orderItem.total_tax) / orderItem.quantity\n\n\twpm.hasLoginEventFired = () => {\n\t\tlet data = wpm.getSessionData()\n\t\treturn data?.loginEventFired\n\t}\n\n\twpm.setLoginEventFired = () => {\n\t\tlet data                = wpm.getSessionData()\n\t\tdata[\"loginEventFired\"] = true\n\t\twpm.setSessionData(data)\n\t}\n\n\twpm.pageLoaded = async () => new Promise(resolve => {\n\t\t(function waitForVar() {\n\t\t\tif (\"complete\" === document.readyState) return resolve()\n\t\t\tsetTimeout(waitForVar, 50)\n\t\t})()\n\t})\n\n\twpm.pageReady = () => {\n\t\treturn new Promise(resolve => {\n\t\t\t(function waitForVar() {\n\t\t\t\tif (\"interactive\" === document.readyState || \"complete\" === document.readyState) return resolve()\n\t\t\t\tsetTimeout(waitForVar, 50)\n\t\t\t})()\n\t\t})\n\t}\n\n\twpm.isMiniCartActive = () => {\n\t\tif (window.sessionStorage) {\n\t\t\tObject.keys(window.sessionStorage).forEach(key => {\n\t\t\t\tif (key.includes(\"wc_fragments\")) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn false\n\t}\n\n\twpm.doesWooCommerceCartExist = () => document.cookie.includes(\"woocommerce_items_in_cart\")\n\n\twpm.urlHasParameter = parameter => {\n\t\tlet urlParams = new URLSearchParams(window.location.search)\n\t\treturn urlParams.has(parameter)\n\t}\n\n\twpm.getUrlParameter = parameter => {\n\t\tlet urlParams = new URLSearchParams(window.location.search)\n\t\treturn urlParams.get(parameter)\n\t}\n\n\t// https://stackoverflow.com/a/60606893/4688612\n\twpm.hashAsync = (algo, str) => {\n\t\treturn crypto.subtle.digest(algo, new TextEncoder(\"utf-8\").encode(str)).then(buf => {\n\t\t\treturn Array.prototype.map.call(new Uint8Array(buf), x => ((\"00\" + x.toString(16)).slice(-2))).join(\"\")\n\t\t})\n\t}\n\n\twpm.getCartValue = () => {\n\n\t\tlet value = 0\n\n\t\tif (wpmDataLayer?.cart) {\n\n\t\t\tfor (const key in wpmDataLayer.cart) {\n\t\t\t\t// content_ids.push(wpmDataLayer.products[key].dyn_r_ids[wpmDataLayer.pixels.facebook.dynamic_remarketing.id_type])\n\n\t\t\t\tlet product = wpmDataLayer.cart[key]\n\n\t\t\t\tvalue += product.quantity * product.price\n\t\t\t}\n\t\t}\n\n\t\treturn value\n\t}\n\n\t/**\n\t * Detect if the current URL contains at least one pattern\n\t *\n\t * @param patterns\n\t * @returns {boolean}\n\t */\n\twpm.doesUrlContainPatterns = patterns => {\n\n\t\tfor (const pattern of patterns) {\n\t\t\tif (new RegExp(pattern).test(window.location.href)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\t/**\n\t * Detect if the current URL contains at least one pattern that is on the tracking exclusion list\n\t *\n\t * https://www.linkedin.com/pulse/how-remove-google-robot-problem-via-gtm-facebook-pixel-hjelpdahl/\n\t * https://www.youtube.com/watch?v=b4I1ePZt8Z0\n\t *\n\t * @returns {boolean}\n\t */\n\twpm.excludeDomainFromTracking = () => {\n\n\t\tlet exclude_domains = [\n\t\t\t\"appspot.com\",\n\t\t\t\"translate.google.com\",\n\t\t]\n\n\t\tif (wpmDataLayer?.general?.exclude_domains) {\n\t\t\texclude_domains = [...exclude_domains, ...wpmDataLayer.general.exclude_domains]\n\t\t}\n\n\t\t// Abort if URL contains excluded domains\n\t\tif (exclude_domains.some(domain => window.location.href.includes(domain))) {\n\t\t\tconsole.debug(\"Pixel Manager: Aborted due to excluded domain\")\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\twpm.getRandomEventId = () => (Math.random() + 1).toString(36).substring(2)\n\n\twpm.pmwConsoleMessage = () => {\n\t\tlet message = \"Pixel Manager for WooCommerce: \"\n\t\tmessage += wpmDataLayer.version.pro ? \"pro\" : \"free\"\n\t\tmessage += \" | distro: \" + wpmDataLayer.version.distro\n\t\tif (wpmDataLayer.version.distro === \"fms\" && wpmDataLayer.version.pro) {\n\t\t\tmessage += \" | active license: \" + (wpmDataLayer.version.eligible_for_updates ? \"yes\" : \"no\")\n\t\t}\n\t\tmessage += \" | version: \" + wpmDataLayer.version.number\n\n\t\tconsole.log(message)\n\t}\n\n\twpm.canLoadPremiumFeatures = () => {\n\t\treturn (wpmDataLayer.version.distro === \"fms\" && wpmDataLayer.version.pro && wpmDataLayer.version.eligible_for_updates) || wpmDataLayer.version.distro === \"wcm\"\n\t}\n\n\tlet jQueryReadyFired = false\n\n\twpm.triggerDomReadyEvent = () => {\n\t\tif (jQueryReadyFired === false) {\n\t\t\tdocument.dispatchEvent(new Event(\"pmw:ready\"))\n\t\t}\n\t\tjQueryReadyFired = true\n\t}\n\n\t/**\n\t * jQuery ready event\n\t */\n\tjQuery(() => {\n\t\twpm.triggerDomReadyEvent()\n\t})\n\n\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\twpm.triggerDomReadyEvent()\n\t})\n\n\twpm.getEmailFromTarget = target => {\n\n\t\t// Only try to add the clicked email if href is set\n\t\tif (target.href) {\n\n\t\t\t// Get the email from the link\n\t\t\t// But only if there is a valid email address in the link\n\t\t\t// Also, the href may contain other parameters, so we need to check for that and remove them\n\t\t\tlet email = target.href.replace(\"mailto:\", \"\")\n\n\n\t\t\tif (email.indexOf(\"?\") > -1) {\n\t\t\t\temail = email.split(\"?\")[0]\n\t\t\t}\n\n\t\t\t// Trim the email and remove all whitespaces\n\t\t\temail = email.replace(/\\s/g, \"\")\n\n\t\t\t// If the email is not empty and valid, add it to the data object\n\t\t\tif (email && wpm.isEmail(email)) {\n\t\t\t\treturn email\n\t\t\t}\n\t\t}\n\n\t\treturn \"\"\n\t}\n\n\twpm.sendEventPayloadToServer = payload => {\n\t\tif (typeof wpm.sendEventPayloadToServerPremium === \"function\") {\n\t\t\twpm.sendEventPayloadToServerPremium(payload)\n\t\t}\n\t}\n\n\tconst urlLoggerOn = () => {\n\n\t\tif (wpm.urlHasParameter(\"pmwloggeron\")) {\n\t\t\twpm.storeData(\"loggerEnabled\", true)\n\t\t}\n\n\t\treturn wpm.urlHasParameter(\"pmwloggeron\")\n\t}\n\n\tconst urlLoggerOff = () => {\n\n\t\tif (wpm.urlHasParameter(\"pmwloggeroff\")) {\n\t\t\twpm.storeData(\"loggerEnabled\", false)\n\t\t}\n\n\t\treturn wpm.urlHasParameter(\"pmwloggeroff\")\n\t}\n\n\tconst sessionLoggerEnabled = () => {\n\t\treturn wpm.retrieveData(\"loggerEnabled\")\n\t}\n\n\tconst isLoggerEnabled = () => {\n\n\t\tif (urlLoggerOff()) return false\n\n\t\tif (sessionLoggerEnabled()) return true\n\n\t\tif (urlLoggerOn()) return true\n\n\t\treturn !!wpmDataLayer?.general?.logger?.is_active\n\t}\n\n\t// create a wpm.log function that takes in a message and one or more objects and passes it to console.log\n\twpm.consoleLog = (message, ...objects) => {\n\n\t\tif (!isLoggerEnabled()) return\n\n\t\tif (objects.length) {\n\t\t\tconsole.log(\"Pixel Manager: \" + message, ...objects)\n\t\t} else {\n\t\t\tconsole.log(\"Pixel Manager: \" + message)\n\t\t}\n\t}\n\n\twpm.consoleError = (message, ...objects) => {\n\n\t\t// if (!isLoggerEnabled()) return\n\n\t\tif (objects.length) {\n\t\t\tconsole.error(\"Pixel Manager: \" + message, ...objects)\n\t\t} else {\n\t\t\tconsole.error(\"Pixel Manager: \" + message)\n\t\t}\n\t}\n\n\t/**\n\t * Triggers the queued events for a pixel.\n\t * This function is responsible for executing the events that have been\n\t * queued up for a specific pixel.\n\t *\n\t * @param {string} pixel - The pixel function name.\n\t * @returns {void}\n\t */\n\twpm.triggerQueuedEvents = (pixel) => {\n\t\tif (window.pmw_event_queue && window.pmw_event_queue[pixel]) {\n\t\t\twindow.pmw_event_queue[pixel].forEach(func => {\n\t\t\t\tfunc()\n\t\t\t})\n\t\t}\n\t}\n\n\twpm.isWooCommerceActive = () => {\n\t\treturn !!wpmDataLayer.shop\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * Load all WPM functions\n *\n * Ignore event listeners. They need to be loaded after\n * we made sure that jQuery has been loaded.\n */\n\nrequire(\"./functions\")\nrequire(\"./cookie_consent\")\nrequire(\"./ip_check\")\n\n// #if process.env.TIER === 'premium'\n// if (wpm.canLoadPremiumFeatures()) {\n// \trequire(\"./functions_premium\")\n// }\n// #endif\n","(function (wpm, $, undefined) {\n\n\twpm.jQueryExists = async () => new Promise(resolve => {\n\n\t\t(function waitForjQuery() {\n\t\t\tif (typeof jQuery !== \"undefined\") return resolve()\n\t\t\tsetTimeout(waitForjQuery, 100)\n\t\t})()\n\t})\n\n\twpm.waitForLibrary = (library, timeout = 5000, interval = 100) => {\n\n\t\tconst startTime = Date.now()\n\t\twhile (typeof window[library] === \"undefined\") {\n\t\t\t// Check if timeout in milliseconds has passed\n\t\t\tif (Date.now() - startTime > timeout) {\n\t\t\t\tbreak // Maximum wait time reached, exit the loop\n\t\t\t}\n\t\t\t// Wait for the interval in milliseconds before checking again\n\t\t\tsetTimeout(() => {\n\t\t\t}, interval)\n\t\t}\n\t}\n\n\twpm.wpmDataLayerFullyLoaded = async () => {\n\n\t\t// Promise that checks if the nested object wpmDataLayer.version is defined.\n\t\t// If so, resolve.\n\t\t// We must check for the nested object wpmDataLayer.version,\n\t\t// because the wpmDataLayer object can be defined early by adding products to the data layer through\n\t\t// template inline scripts. So we need to wait until the wpmDataLayer configuration objects\n\t\t// are defined.\n\t\tlet checkVar = new Promise((resolve) => {\n\t\t\t(function waitForVar() {\n\t\t\t\tif (\n\t\t\t\t\ttypeof wpmDataLayer !== \"undefined\"\n\t\t\t\t\t&& typeof wpmDataLayer.version !== \"undefined\"\n\t\t\t\t) {\n\t\t\t\t\treturn resolve()\n\t\t\t\t}\n\t\t\t\tsetTimeout(waitForVar, 100)\n\t\t\t})()\n\t\t})\n\n\t\t// Set a timeout to log a message after 6 seconds\n\t\tlet logTimeoutId = setTimeout(() => {\n\t\t\tconsole.error(\"Pixel Manager error: The wpmDataLayer is not defined. Please make sure that the wpmDataLayer script snippet is inserted and not modified by any third-party plugin, such as a consent management platform or a JavaScript optimizer.\")\n\n\t\t}, 6000)\n\n\t\tcheckVar.then(() => {\n\t\t\tclearTimeout(logTimeoutId)\n\t\t})\n\n\t\treturn checkVar\n\t}\n\n\twpm.wpHooksExists = async () => new Promise(resolve => {\n\t\t(function waitForVar() {\n\n\t\t\t// Resolve if wp.hooks is defined\n\t\t\tif (typeof wp !== \"undefined\" && typeof wp.hooks !== \"undefined\") return resolve()\n\t\t\tsetTimeout(waitForVar, 50)\n\t\t})()\n\t})\n\n\t/**\n\t * Load all WooCommerce hooks functions\n\t *\n\t * Includes safeguard in case the user changed the default load order for wp-hooks, or removed it completely.\n\t *\n\t * @returns {Promise<void>}\n\t */\n\twpm.loadWcHooksFunctions = async () => {\n\t\t// Load all WooCommerce Blocks hooks\n\t\tawait wpm.wpHooksExists()\n\t\trequire(\"./wc_hooks\")\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * IP functions\n */\n\n(function (wpm, $, undefined) {\n\n\tconst {isRange, isIP, isV4, isV6, version: getIpVersion} = require(\"range_check\")\n\n\tconst ipServices = {\n\t\t\"cloudflare\": {\n\t\t\t\"any\": \"https://www.cloudflare.com/cdn-cgi/trace\",\n\t\t},\n\t\t// icanhazip seems to regularly be added to malware databases, despite being a legitimate service run by Cloudflare\n\t\t// https://blog.apnic.net/2021/06/17/how-a-small-free-ip-tool-survived/\n\t\t// https://major.io/p/a-new-future-for-icanhazip/\n\t\t// https://major.io/p/extra-icanhaz-services-going-offline/\n\t\t\"icanhazip\"   : {\n\t\t\t\"4\"  : \"https://ipv4.icanhazip.com\",\n\t\t\t\"6\"  : \"https://ipv6.icanhazip.com\",\n\t\t\t\"any\": \"https://icanhazip.com\",\n\t\t},\n\t\t\"ipinfo\"      : {\n\t\t\t\"any\": \"https://ipinfo.io/ip\",\n\t\t},\n\t\t\"myexternalip\": {\n\t\t\t\"any\": \"https://myexternalip.com/raw\",\n\t\t\t// \"6\": \"https://api-ipv6.myexternalip.com/raw\", // This can return an IPv4 address, so we can't use it\n\t\t},\n\t\t\"ipify\"       : {\n\t\t\t\"4\"  : \"https://api4.ipify.org\",\n\t\t\t\"6\"  : \"https://api6.ipify.org\",\n\t\t\t\"any\": \"https://api64.ipify.org\", // If IPv6 is available, AND the client is configured to prefer IPv6, this will return an IPv6 address\n\t\t},\n\t\t// Can't use amazon because its CORS policy blocks requests from the browser\n\t\t// \"amazon\"    : {\n\t\t// \t\"any\": \"https://checkip.amazonaws.com/\",\n\t\t// },\n\t\t// Can't use ip.sb because its CORS policy blocks requests from the browser\n\t\t// \"ip.sb\"     : {\n\t\t// \t\"any\": \"https://api.ip.sb/ip\",\n\t\t// },\n\t\t// Can't use seeip because its CORS policy blocks requests from the browser\n\t\t// \"seeip\"       : {\n\t\t// \t\"any\": \"https://api.seeip.org\",\n\t\t// \t\"4\": \"https://ipv4.seeip.org\",\n\t\t// \t\"6\": \"https://ipv6.seeip.org\",\n\t\t// },\n\t}\n\n\twpm.isIpAllowed = async () => {\n\n\t\t// Check the cache if the IP is allowed\n\t\tif (wpm.retrieveData(\"ipAllowed\")) {\n\t\t\treturn !!JSON.parse(wpm.retrieveData(\"ipAllowed\"))\n\t\t}\n\n\t\tconst ip = await wpm.getIp()\n\n\t\t// If the IP is blacklisted, return false and store the result in the cache\n\t\tif (isOnBlacklist(ip)) {\n\t\t\twpm.storeData(\"ipAllowed\", false)\n\t\t\treturn false\n\t\t}\n\n\t\t// If the IP is not blacklisted, return true and store the result in the cache\n\t\twpm.storeData(\"ipAllowed\", true)\n\t\treturn true\n\t}\n\n\twpm.getIp = async (ipVersion = \"any\", maxServicesToCheck = 3) => {\n\n\t\tconst validVersions = [\"any\", \"4\", \"6\"]\n\n\t\t// return null if the version is not valid and console log an error\n\t\tif (!validVersions.includes(ipVersion)) {\n\t\t\tconsole.error(\"The version argument must be one of the following: \" + validVersions.join(\", \"))\n\t\t\treturn null\n\t\t}\n\n\t\tif (ipVersion === \"any\" && wpm.retrieveData(\"ip\")) {\n\t\t\treturn wpm.retrieveData(\"ip\")\n\t\t}\n\n\t\t// Get the ipv data from the cache\n\t\tconst ipv = wpm.retrieveData(`ipv${ipVersion}`)\n\n\t\t// Return it if it is not undefined\n\t\t// The value can be an IP\n\t\t// or null if we ran the test but no IP could be retrieved\n\t\t// It is undefined if the ipVersion was not tested yet\n\t\tif (ipv !== undefined) return ipv\n\n\t\twpm.consoleLog(\"Testing the IP address of the browser because one ore more server-to-server APIs are enabled and require the browser IP. It may trigger connection request errors in the console while testing the IP address. This is normal and expected behavior.\")\n\n\t\ttry {// Check the cache if the IP is already stored\n\n\t\t\tconst ip = await wpm.getIpFromAnyService(ipVersion, maxServicesToCheck)\n\n\t\t\t// if (!isIP(ip)) throw new Error(\"The returned value is not an IP address\")\n\n\t\t\t// Store the IP in the cache\n\t\t\tif (ipVersion === \"any\") {\n\t\t\t\twpm.storeData(\"ip\", ip)\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tgetIpVersion(ip) === 4\n\t\t\t\t|| (ipVersion === \"4\" && ip === null)\n\t\t\t) {\n\t\t\t\twpm.storeData(\"ipv4\", ip)\n\t\t\t}\n\n\t\t\tif (getIpVersion(ip) === 6\n\t\t\t\t|| (ipVersion === \"6\" && ip === null)\n\t\t\t) {\n\t\t\t\twpm.storeData(\"ipv6\", ip)\n\t\t\t}\n\n\t\t\treturn ip\n\t\t} catch (error) {\n\t\t\t// console.error(error)\n\t\t\treturn null\n\t\t}\n\t}\n\n\t/**\n\t * Get the IP from the visitor using different services.\n\t * Return the first valid IP address that can be retrieved the fastest.\n\t *\n\t * @returns {Promise<IP>}\n\t */\n\twpm.getIpFromAnyService = async (ipVersion = \"any\", maxServicesToCheck = 3) => {\n\n\t\t// start tracking time\n\t\tconst startTime = performance.now()\n\n\t\t// take the ipServices object and filter it to only contain objects with an ipVersion key that matches the ipVersion argument\n\t\t// keep the original order of the ipServices object\n\t\t// also keep only the first maxServicesToCheck objects\n\n\t\tconst ipServicesFiltered = Object.keys(ipServices)\n\t\t\t.filter(service => ipServices[service][ipVersion])\n\t\t\t.slice(0, maxServicesToCheck)\n\t\t\t.reduce((obj, key) => {\n\t\t\t\t\tobj[key] = ipServices[key]\n\t\t\t\t\treturn obj\n\t\t\t\t}\n\t\t\t\t, {})\n\n\t\tlet promises = []\n\n\t\tObject.keys(ipServicesFiltered).forEach(service => {\n\t\t\t// only push if the ipVersion is available for the service\n\t\t\tif (ipServicesFiltered[service][ipVersion]) {\n\t\t\t\t// console.log(`pushing ${service} to promises array with ipVersion ${ipVersion}`)\n\t\t\t\tpromises.push(wpm.getIpFromService(service, ipVersion))\n\t\t\t}\n\t\t})\n\n\t\t// If the promises array is not empty, return the first promise that resolves the fastest\n\t\t// Ignore the promises that reject\n\t\tif (promises.length > 0) {\n\n\t\t\ttry {\n\t\t\t\tconst data = await Promise.any(promises)\n\t\t\t\t// console.log(`The Pixel Manager retrieved the IP address ${data.ip} from ${data.service} using IP version ${data.ipVersion}`)\n\n\t\t\t\t// stop tracking time\n\t\t\t\tconst endTime   = performance.now()\n\t\t\t\tconst timeTaken = (endTime - startTime).toFixed(2)\n\n\t\t\t\twpm.consoleLog(`Retrieved the IP address ${data.ip} from ${data.service} which took ${timeTaken} ms`)\n\t\t\t\treturn data.ip\n\t\t\t} catch (error) {\n\t\t\t\t// console.error(error)\n\t\t\t\twpm.consoleLog(`Could not retrieve an IP with version ${ipVersion} from any of the services.`)\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t} else {\n\t\t\twpm.consoleLog(\"No promises to resolve\")\n\t\t\treturn null\n\t\t}\n\t}\n\n\t/**\n\t * Fetches the IP address from a specified service.\n\t *\n\t * @async\n\t * @param {string} service - The name of the service to fetch the IP from.\n\t * @param {string} [ipVersion=\"any\"] - The version of the IP (e.g., \"any\" for global).\n\t * @returns {Promise<Object>} A promise that resolves to an object containing the IP address, service name, and IP version.\n\t * @throws {Error} Will reject the promise with an error if the IP version is not available for the service, the response from the service is not OK, the returned value from the service is not an IP address, or any other error occurs.\n\t */\n\twpm.getIpFromService = async (service, ipVersion = \"any\") => {\n\t\ttry {\n\n\t\t\tlet data = {\n\t\t\t\tip       : null,\n\t\t\t\tservice  : service,\n\t\t\t\tipVersion: ipVersion,\n\t\t\t}\n\n\t\t\t// Return reject if the ipVersion is not available for the service\n\t\t\tif (!ipServices[service][ipVersion]) return Promise.reject(new Error(`The IP version ${ipVersion} is not available for the service ${service}`))\n\n\t\t\twpm.consoleLog(`Fetching IP from ${service} using IP version ${ipVersion}`)\n\n\t\t\tconst response = await fetch(ipServices[service][ipVersion])\n\n\t\t\tif (!response.ok) {\n\t\t\t\treturn Promise.reject(new Error(`The response from ${service} was not OK. Status: ${response.status}`))\n\t\t\t}\n\n\t\t\tlet serviceResponseData = await response.text()\n\n\t\t\tif (service === \"cloudflare\") {\n\t\t\t\t// Convert key-value pairs to JSON\n\t\t\t\tserviceResponseData = serviceResponseData\n\t\t\t\t\t.trim()\n\t\t\t\t\t.split(\"\\n\")\n\t\t\t\t\t.reduce((obj, pair) => {\n\t\t\t\t\t\tpair = pair.split(\"=\")\n\t\t\t\t\t\treturn (obj[pair[0]] = pair[1]), obj\n\t\t\t\t\t}, {})\n\n\t\t\t\tdata.ip = serviceResponseData.ip\n\t\t\t} else {\n\t\t\t\tdata.ip = serviceResponseData.trim()\n\t\t\t}\n\n\t\t\tif (!isIP(data.ip)) {\n\t\t\t\treturn Promise.reject(new Error(`The returned value from ${service} is not an IP address`))\n\t\t\t}\n\n\t\t\treturn data\n\t\t} catch (error) {\n\t\t\treturn Promise.reject(error)\n\t\t}\n\t}\n\n\t/**\n\t * Cloudflare\n\t *\n\t * Response time: approx. 70ms\n\t * IPv: Returns IPv4 or IPv6 depending on the client\n\t * Dual stack: Doesn't offer dual stack detection\n\t *\n\t * @returns {Promise<*>}\n\t */\n\tconst getIpFromCloudflare = async () => {\n\n\t\tconst response = await fetch(\"https://www.cloudflare.com/cdn-cgi/trace\")\n\t\tlet data       = await response.text()\n\n\t\t// Convert key-value pairs to JSON\n\t\t// https://stackoverflow.com/a/39284735/452587\n\t\tdata = data\n\t\t\t.trim()\n\t\t\t.split(\"\\n\")\n\t\t\t.reduce((obj, pair) => {\n\t\t\t\tpair = pair.split(\"=\")\n\t\t\t\treturn obj[pair[0]] = pair[1], obj\n\t\t\t}, {})\n\n\t\t// return the data.ip not a promise\n\t\treturn data.ip\n\t}\n\n\twpm.isIpNotAllowed = async () => {\n\t\treturn await wpm.isIpAllowed() === false\n\t}\n\n\tconst isOnBlacklist = ip => {\n\n\t\tconst {isInSubnet} = require(\"is-in-subnet\")\n\n\t\tfor (const ipName of getBlacklist()) {\n\n\t\t\tif (isCidr(ipName)) {\n\t\t\t\ttry {\n\t\t\t\t\tif (isInSubnet(ip, ipName)) return true\n\t\t\t\t} catch (e) {\n\t\t\t\t\twpm.consoleError(e)\n\t\t\t\t\twpm.consoleLog(\"IP: \" + ip)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (ip === ipName) return true\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\tconst isCidr = ipName => {\n\t\treturn isRange(ipName)\n\t}\n\n\tconst getBlacklist = () => {\n\n\t\tconst blacklist = [\n\t\t\t// \"91.190.12.52/32\", // for testing\n\t\t\t// \"91.190.12.52\", // for testing\n\t\t]\n\n\t\tconst google = [\n\t\t\t\"2001:4860:4801:10::/64\",\n\t\t\t\"2001:4860:4801:11::/64\",\n\t\t\t\"2001:4860:4801:12::/64\",\n\t\t\t\"2001:4860:4801:13::/64\",\n\t\t\t\"2001:4860:4801:14::/64\",\n\t\t\t\"2001:4860:4801:15::/64\",\n\t\t\t\"2001:4860:4801:16::/64\",\n\t\t\t\"2001:4860:4801:17::/64\",\n\t\t\t\"2001:4860:4801:18::/64\",\n\t\t\t\"2001:4860:4801:19::/64\",\n\t\t\t\"2001:4860:4801:1a::/64\",\n\t\t\t\"2001:4860:4801:1b::/64\",\n\t\t\t\"2001:4860:4801:20::/64\",\n\t\t\t\"2001:4860:4801:21::/64\",\n\t\t\t\"2001:4860:4801:22::/64\",\n\t\t\t\"2001:4860:4801:23::/64\",\n\t\t\t\"2001:4860:4801:24::/64\",\n\t\t\t\"2001:4860:4801:25::/64\",\n\t\t\t\"2001:4860:4801:26::/64\",\n\t\t\t\"2001:4860:4801:27::/64\",\n\t\t\t\"2001:4860:4801:28::/64\",\n\t\t\t\"2001:4860:4801:29::/64\",\n\t\t\t\"2001:4860:4801:2::/64\",\n\t\t\t\"2001:4860:4801:2a::/64\",\n\t\t\t\"2001:4860:4801:2b::/64\",\n\t\t\t\"2001:4860:4801:2c::/64\",\n\t\t\t\"2001:4860:4801:2d::/64\",\n\t\t\t\"2001:4860:4801:2e::/64\",\n\t\t\t\"2001:4860:4801:2f::/64\",\n\t\t\t\"2001:4860:4801:30::/64\",\n\t\t\t\"2001:4860:4801:31::/64\",\n\t\t\t\"2001:4860:4801:32::/64\",\n\t\t\t\"2001:4860:4801:33::/64\",\n\t\t\t\"2001:4860:4801:34::/64\",\n\t\t\t\"2001:4860:4801:35::/64\",\n\t\t\t\"2001:4860:4801:36::/64\",\n\t\t\t\"2001:4860:4801:37::/64\",\n\t\t\t\"2001:4860:4801:38::/64\",\n\t\t\t\"2001:4860:4801:39::/64\",\n\t\t\t\"2001:4860:4801:3::/64\",\n\t\t\t\"2001:4860:4801:3a::/64\",\n\t\t\t\"2001:4860:4801:3b::/64\",\n\t\t\t\"2001:4860:4801:3c::/64\",\n\t\t\t\"2001:4860:4801:3d::/64\",\n\t\t\t\"2001:4860:4801:3e::/64\",\n\t\t\t\"2001:4860:4801:40::/64\",\n\t\t\t\"2001:4860:4801:41::/64\",\n\t\t\t\"2001:4860:4801:42::/64\",\n\t\t\t\"2001:4860:4801:43::/64\",\n\t\t\t\"2001:4860:4801:44::/64\",\n\t\t\t\"2001:4860:4801:45::/64\",\n\t\t\t\"2001:4860:4801:46::/64\",\n\t\t\t\"2001:4860:4801:47::/64\",\n\t\t\t\"2001:4860:4801:48::/64\",\n\t\t\t\"2001:4860:4801:49::/64\",\n\t\t\t\"2001:4860:4801:4a::/64\",\n\t\t\t\"2001:4860:4801:50::/64\",\n\t\t\t\"2001:4860:4801:51::/64\",\n\t\t\t\"2001:4860:4801:53::/64\",\n\t\t\t\"2001:4860:4801:60::/64\",\n\t\t\t\"2001:4860:4801:61::/64\",\n\t\t\t\"2001:4860:4801:62::/64\",\n\t\t\t\"2001:4860:4801:63::/64\",\n\t\t\t\"2001:4860:4801:64::/64\",\n\t\t\t\"2001:4860:4801:65::/64\",\n\t\t\t\"2001:4860:4801:66::/64\",\n\t\t\t\"2001:4860:4801:67::/64\",\n\t\t\t\"2001:4860:4801:68::/64\",\n\t\t\t\"2001:4860:4801:69::/64\",\n\t\t\t\"2001:4860:4801:6a::/64\",\n\t\t\t\"2001:4860:4801:6b::/64\",\n\t\t\t\"2001:4860:4801:6c::/64\",\n\t\t\t\"2001:4860:4801:6d::/64\",\n\t\t\t\"2001:4860:4801:6e::/64\",\n\t\t\t\"2001:4860:4801:6f::/64\",\n\t\t\t\"2001:4860:4801:70::/64\",\n\t\t\t\"2001:4860:4801:71::/64\",\n\t\t\t\"2001:4860:4801:72::/64\",\n\t\t\t\"2001:4860:4801:73::/64\",\n\t\t\t\"2001:4860:4801:74::/64\",\n\t\t\t\"2001:4860:4801:75::/64\",\n\t\t\t\"2001:4860:4801:76::/64\",\n\t\t\t\"2001:4860:4801:77::/64\",\n\t\t\t\"2001:4860:4801:80::/64\",\n\t\t\t\"2001:4860:4801:81::/64\",\n\t\t\t\"2001:4860:4801:82::/64\",\n\t\t\t\"2001:4860:4801:83::/64\",\n\t\t\t\"2001:4860:4801:84::/64\",\n\t\t\t\"2001:4860:4801:85::/64\",\n\t\t\t\"2001:4860:4801:86::/64\",\n\t\t\t\"2001:4860:4801:90::/64\",\n\t\t\t\"2001:4860:4801:91::/64\",\n\t\t\t\"2001:4860:4801:92::/64\",\n\t\t\t\"2001:4860:4801::/64\",\n\t\t\t\"2001:4860:4801:c::/64\",\n\t\t\t\"2001:4860:4801:f::/64\",\n\t\t\t\"34.100.182.96/28\",\n\t\t\t\"34.101.50.144/28\",\n\t\t\t\"34.118.254.0/28\",\n\t\t\t\"34.118.66.0/28\",\n\t\t\t\"34.126.178.96/28\",\n\t\t\t\"34.146.150.144/28\",\n\t\t\t\"34.147.110.144/28\",\n\t\t\t\"34.151.74.144/28\",\n\t\t\t\"34.152.50.64/28\",\n\t\t\t\"34.154.114.144/28\",\n\t\t\t\"34.155.98.32/28\",\n\t\t\t\"34.165.18.176/28\",\n\t\t\t\"34.175.160.64/28\",\n\t\t\t\"34.176.130.16/28\",\n\t\t\t\"34.64.82.64/28\",\n\t\t\t\"34.65.242.112/28\",\n\t\t\t\"34.80.50.80/28\",\n\t\t\t\"34.88.194.0/28\",\n\t\t\t\"34.89.10.80/28\",\n\t\t\t\"34.89.198.80/28\",\n\t\t\t\"34.96.162.48/28\",\n\t\t\t\"35.247.243.240/28\",\n\t\t\t\"66.249.64.0/27\",\n\t\t\t\"66.249.64.128/27\",\n\t\t\t\"66.249.64.160/27\",\n\t\t\t\"66.249.64.192/27\",\n\t\t\t\"66.249.64.224/27\",\n\t\t\t\"66.249.64.32/27\",\n\t\t\t\"66.249.64.64/27\",\n\t\t\t\"66.249.64.96/27\",\n\t\t\t\"66.249.65.0/27\",\n\t\t\t\"66.249.65.128/27\",\n\t\t\t\"66.249.65.160/27\",\n\t\t\t\"66.249.65.192/27\",\n\t\t\t\"66.249.65.224/27\",\n\t\t\t\"66.249.65.32/27\",\n\t\t\t\"66.249.65.64/27\",\n\t\t\t\"66.249.65.96/27\",\n\t\t\t\"66.249.66.0/27\",\n\t\t\t\"66.249.66.128/27\",\n\t\t\t\"66.249.66.192/27\",\n\t\t\t\"66.249.66.32/27\",\n\t\t\t\"66.249.66.64/27\",\n\t\t\t\"66.249.68.0/27\",\n\t\t\t\"66.249.68.32/27\",\n\t\t\t\"66.249.68.64/27\",\n\t\t\t\"66.249.69.0/27\",\n\t\t\t\"66.249.69.128/27\",\n\t\t\t\"66.249.69.160/27\",\n\t\t\t\"66.249.69.192/27\",\n\t\t\t\"66.249.69.224/27\",\n\t\t\t\"66.249.69.32/27\",\n\t\t\t\"66.249.69.64/27\",\n\t\t\t\"66.249.69.96/27\",\n\t\t\t\"66.249.70.0/27\",\n\t\t\t\"66.249.70.128/27\",\n\t\t\t\"66.249.70.160/27\",\n\t\t\t\"66.249.70.192/27\",\n\t\t\t\"66.249.70.224/27\",\n\t\t\t\"66.249.70.32/27\",\n\t\t\t\"66.249.70.64/27\",\n\t\t\t\"66.249.70.96/27\",\n\t\t\t\"66.249.71.0/27\",\n\t\t\t\"66.249.71.128/27\",\n\t\t\t\"66.249.71.160/27\",\n\t\t\t\"66.249.71.192/27\",\n\t\t\t\"66.249.71.32/27\",\n\t\t\t\"66.249.71.64/27\",\n\t\t\t\"66.249.71.96/27\",\n\t\t\t\"66.249.72.0/27\",\n\t\t\t\"66.249.72.128/27\",\n\t\t\t\"66.249.72.160/27\",\n\t\t\t\"66.249.72.192/27\",\n\t\t\t\"66.249.72.224/27\",\n\t\t\t\"66.249.72.32/27\",\n\t\t\t\"66.249.72.64/27\",\n\t\t\t\"66.249.72.96/27\",\n\t\t\t\"66.249.73.0/27\",\n\t\t\t\"66.249.73.128/27\",\n\t\t\t\"66.249.73.160/27\",\n\t\t\t\"66.249.73.192/27\",\n\t\t\t\"66.249.73.224/27\",\n\t\t\t\"66.249.73.32/27\",\n\t\t\t\"66.249.73.64/27\",\n\t\t\t\"66.249.73.96/27\",\n\t\t\t\"66.249.74.0/27\",\n\t\t\t\"66.249.74.32/27\",\n\t\t\t\"66.249.74.64/27\",\n\t\t\t\"66.249.74.96/27\",\n\t\t\t\"66.249.75.0/27\",\n\t\t\t\"66.249.75.128/27\",\n\t\t\t\"66.249.75.160/27\",\n\t\t\t\"66.249.75.192/27\",\n\t\t\t\"66.249.75.224/27\",\n\t\t\t\"66.249.75.32/27\",\n\t\t\t\"66.249.75.64/27\",\n\t\t\t\"66.249.75.96/27\",\n\t\t\t\"66.249.76.0/27\",\n\t\t\t\"66.249.76.128/27\",\n\t\t\t\"66.249.76.160/27\",\n\t\t\t\"66.249.76.192/27\",\n\t\t\t\"66.249.76.224/27\",\n\t\t\t\"66.249.76.32/27\",\n\t\t\t\"66.249.76.64/27\",\n\t\t\t\"66.249.76.96/27\",\n\t\t\t\"66.249.77.0/27\",\n\t\t\t\"66.249.77.128/27\",\n\t\t\t\"66.249.77.32/27\",\n\t\t\t\"66.249.77.64/27\",\n\t\t\t\"66.249.77.96/27\",\n\t\t\t\"66.249.79.0/27\",\n\t\t\t\"66.249.79.128/27\",\n\t\t\t\"66.249.79.160/27\",\n\t\t\t\"66.249.79.192/27\",\n\t\t\t\"66.249.79.224/27\",\n\t\t\t\"66.249.79.32/27\",\n\t\t\t\"66.249.79.64/27\",\n\t\t\t\"66.249.79.96/27\",\n\t\t]\n\n\t\tconst facebook = [\n\t\t\t\"69.63.176.0/20\",\n\t\t\t\"66.220.144.0/20\",\n\t\t\t\"66.220.144.0/21\",\n\t\t\t\"69.63.184.0/21\",\n\t\t\t\"69.63.176.0/21\",\n\t\t\t\"74.119.76.0/22\",\n\t\t\t\"69.171.255.0/24\",\n\t\t\t\"173.252.64.0/18\",\n\t\t\t\"69.171.224.0/19\",\n\t\t\t\"69.171.224.0/20\",\n\t\t\t\"103.4.96.0/22\",\n\t\t\t\"173.252.64.0/19\",\n\t\t\t\"31.13.64.0/18\",\n\t\t\t\"31.13.24.0/21\",\n\t\t\t\"66.220.152.0/21\",\n\t\t\t\"69.171.239.0/24\",\n\t\t\t\"69.171.240.0/20\",\n\t\t\t\"31.13.64.0/19\",\n\t\t\t\"31.13.64.0/24\",\n\t\t\t\"31.13.65.0/24\",\n\t\t\t\"31.13.67.0/24\",\n\t\t\t\"31.13.68.0/24\",\n\t\t\t\"31.13.69.0/24\",\n\t\t\t\"31.13.70.0/24\",\n\t\t\t\"31.13.71.0/24\",\n\t\t\t\"31.13.72.0/24\",\n\t\t\t\"31.13.73.0/24\",\n\t\t\t\"31.13.74.0/24\",\n\t\t\t\"31.13.75.0/24\",\n\t\t\t\"31.13.76.0/24\",\n\t\t\t\"31.13.77.0/24\",\n\t\t\t\"31.13.96.0/19\",\n\t\t\t\"31.13.66.0/24\",\n\t\t\t\"173.252.96.0/19\",\n\t\t\t\"69.63.178.0/24\",\n\t\t\t\"31.13.78.0/24\",\n\t\t\t\"31.13.79.0/24\",\n\t\t\t\"31.13.80.0/24\",\n\t\t\t\"31.13.82.0/24\",\n\t\t\t\"31.13.83.0/24\",\n\t\t\t\"31.13.84.0/24\",\n\t\t\t\"31.13.85.0/24\",\n\t\t\t\"31.13.86.0/24\",\n\t\t\t\"31.13.87.0/24\",\n\t\t\t\"31.13.88.0/24\",\n\t\t\t\"31.13.89.0/24\",\n\t\t\t\"31.13.91.0/24\",\n\t\t\t\"31.13.92.0/24\",\n\t\t\t\"31.13.93.0/24\",\n\t\t\t\"31.13.94.0/24\",\n\t\t\t\"31.13.95.0/24\",\n\t\t\t\"31.13.81.0/24\",\n\t\t\t\"179.60.192.0/22\",\n\t\t\t\"179.60.192.0/24\",\n\t\t\t\"179.60.193.0/24\",\n\t\t\t\"179.60.194.0/24\",\n\t\t\t\"179.60.195.0/24\",\n\t\t\t\"185.60.216.0/22\",\n\t\t\t\"45.64.40.0/22\",\n\t\t\t\"185.60.216.0/24\",\n\t\t\t\"185.60.217.0/24\",\n\t\t\t\"185.60.218.0/24\",\n\t\t\t\"185.60.219.0/24\",\n\t\t\t\"129.134.0.0/16\",\n\t\t\t\"157.240.0.0/16\",\n\t\t\t\"157.240.8.0/24\",\n\t\t\t\"157.240.0.0/24\",\n\t\t\t\"157.240.1.0/24\",\n\t\t\t\"157.240.2.0/24\",\n\t\t\t\"157.240.3.0/24\",\n\t\t\t\"157.240.5.0/24\",\n\t\t\t\"157.240.6.0/24\",\n\t\t\t\"157.240.7.0/24\",\n\t\t\t\"157.240.9.0/24\",\n\t\t\t\"157.240.10.0/24\",\n\t\t\t\"157.240.16.0/24\",\n\t\t\t\"157.240.19.0/24\",\n\t\t\t\"157.240.11.0/24\",\n\t\t\t\"157.240.12.0/24\",\n\t\t\t\"157.240.13.0/24\",\n\t\t\t\"157.240.14.0/24\",\n\t\t\t\"157.240.15.0/24\",\n\t\t\t\"157.240.17.0/24\",\n\t\t\t\"157.240.18.0/24\",\n\t\t\t\"157.240.20.0/24\",\n\t\t\t\"157.240.21.0/24\",\n\t\t\t\"157.240.22.0/24\",\n\t\t\t\"157.240.23.0/24\",\n\t\t\t\"157.240.0.0/17\",\n\t\t\t\"69.171.250.0/24\",\n\t\t\t\"204.15.20.0/22\",\n\t\t\t\"157.240.192.0/24\",\n\t\t\t\"157.240.198.0/24\",\n\t\t\t\"102.132.96.0/20\",\n\t\t\t\"102.132.96.0/24\",\n\t\t\t\"102.132.97.0/24\",\n\t\t\t\"157.240.26.0/24\",\n\t\t\t\"157.240.27.0/24\",\n\t\t\t\"157.240.28.0/24\",\n\t\t\t\"157.240.29.0/24\",\n\t\t\t\"157.240.30.0/24\",\n\t\t\t\"129.134.28.0/24\",\n\t\t\t\"129.134.29.0/24\",\n\t\t\t\"157.240.208.0/24\",\n\t\t\t\"157.240.193.0/24\",\n\t\t\t\"157.240.194.0/24\",\n\t\t\t\"157.240.195.0/24\",\n\t\t\t\"157.240.197.0/24\",\n\t\t\t\"157.240.196.0/24\",\n\t\t\t\"157.240.200.0/24\",\n\t\t\t\"157.240.201.0/24\",\n\t\t\t\"157.240.203.0/24\",\n\t\t\t\"157.240.204.0/24\",\n\t\t\t\"157.240.205.0/24\",\n\t\t\t\"157.240.206.0/24\",\n\t\t\t\"157.240.207.0/24\",\n\t\t\t\"157.240.209.0/24\",\n\t\t\t\"157.240.210.0/24\",\n\t\t\t\"157.240.211.0/24\",\n\t\t\t\"157.240.212.0/24\",\n\t\t\t\"157.240.213.0/24\",\n\t\t\t\"157.240.214.0/24\",\n\t\t\t\"157.240.215.0/24\",\n\t\t\t\"157.240.216.0/24\",\n\t\t\t\"157.240.222.0/24\",\n\t\t\t\"129.134.30.0/24\",\n\t\t\t\"129.134.31.0/24\",\n\t\t\t\"129.134.30.0/23\",\n\t\t\t\"129.134.25.0/24\",\n\t\t\t\"129.134.26.0/24\",\n\t\t\t\"129.134.27.0/24\",\n\t\t\t\"102.132.99.0/24\",\n\t\t\t\"102.132.101.0/24\",\n\t\t\t\"129.134.64.0/24\",\n\t\t\t\"129.134.65.0/24\",\n\t\t\t\"129.134.66.0/24\",\n\t\t\t\"129.134.67.0/24\",\n\t\t\t\"157.240.219.0/24\",\n\t\t\t\"157.240.217.0/24\",\n\t\t\t\"157.240.218.0/24\",\n\t\t\t\"157.240.199.0/24\",\n\t\t\t\"129.134.127.0/24\",\n\t\t\t\"157.240.223.0/24\",\n\t\t\t\"157.240.192.0/18\",\n\t\t\t\"157.240.221.0/24\",\n\t\t\t\"157.240.220.0/24\",\n\t\t\t\"173.252.88.0/21\",\n\t\t\t\"129.134.68.0/24\",\n\t\t\t\"129.134.69.0/24\",\n\t\t\t\"129.134.70.0/24\",\n\t\t\t\"157.240.24.0/24\",\n\t\t\t\"157.240.25.0/24\",\n\t\t\t\"102.132.100.0/24\",\n\t\t\t\"157.240.31.0/24\",\n\t\t\t\"157.240.224.0/24\",\n\t\t\t\"129.134.71.0/24\",\n\t\t\t\"157.240.225.0/24\",\n\t\t\t\"157.240.226.0/24\",\n\t\t\t\"157.240.227.0/24\",\n\t\t\t\"129.134.0.0/17\",\n\t\t\t\"129.134.72.0/24\",\n\t\t\t\"129.134.73.0/24\",\n\t\t\t\"129.134.74.0/24\",\n\t\t\t\"185.89.218.0/24\",\n\t\t\t\"185.89.219.0/24\",\n\t\t\t\"185.89.218.0/23\",\n\t\t\t\"157.240.228.0/24\",\n\t\t\t\"157.240.229.0/24\",\n\t\t\t\"129.134.76.0/24\",\n\t\t\t\"129.134.75.0/24\",\n\t\t\t\"157.240.239.0/24\",\n\t\t\t\"157.240.240.0/24\",\n\t\t\t\"157.240.241.0/24\",\n\t\t\t\"157.240.231.0/24\",\n\t\t\t\"157.240.232.0/24\",\n\t\t\t\"157.240.233.0/24\",\n\t\t\t\"157.240.234.0/24\",\n\t\t\t\"157.240.235.0/24\",\n\t\t\t\"157.240.236.0/24\",\n\t\t\t\"129.134.77.0/24\",\n\t\t\t\"129.134.78.0/24\",\n\t\t\t\"129.134.79.0/24\",\n\t\t\t\"157.240.237.0/24\",\n\t\t\t\"157.240.238.0/24\",\n\t\t\t\"157.240.242.0/24\",\n\t\t\t\"157.240.243.0/24\",\n\t\t\t\"129.134.112.0/24\",\n\t\t\t\"157.240.100.0/24\",\n\t\t\t\"157.240.98.0/24\",\n\t\t\t\"157.240.96.0/24\",\n\t\t\t\"157.240.99.0/24\",\n\t\t\t\"157.240.101.0/24\",\n\t\t\t\"129.134.113.0/24\",\n\t\t\t\"129.134.114.0/24\",\n\t\t\t\"157.240.97.0/24\",\n\t\t\t\"129.134.115.0/24\",\n\t\t\t\"157.240.244.0/24\",\n\t\t\t\"157.240.245.0/24\",\n\t\t\t\"157.240.246.0/24\",\n\t\t\t\"157.240.247.0/24\",\n\t\t\t\"157.240.248.0/24\",\n\t\t\t\"157.240.249.0/24\",\n\t\t\t\"157.240.250.0/24\",\n\t\t\t\"163.70.128.0/17\",\n\t\t\t\"163.77.128.0/17\",\n\t\t\t\"157.240.251.0/24\",\n\t\t\t\"157.240.252.0/24\",\n\t\t\t\"157.240.253.0/24\",\n\t\t\t\"147.75.208.0/20\",\n\t\t\t\"157.240.254.0/24\",\n\t\t\t\"185.89.219.0/24\",\n\t\t\t\"185.89.218.0/24\",\n\t\t\t\"185.89.218.0/23\",\n\t\t\t\"185.89.216.0/22\",\n\t\t\t\"147.75.208.0/20\",\n\t\t\t\"204.15.20.0/22\",\n\t\t\t\"69.63.176.0/20\",\n\t\t\t\"69.63.176.0/21\",\n\t\t\t\"69.63.184.0/21\",\n\t\t\t\"66.220.144.0/20\",\n\t\t\t\"69.63.176.0/20\",\n\t\t\t\"2620:0:1c00::/40\",\n\t\t\t\"2a03:2880::/32\",\n\t\t\t\"2a03:2880:fffe::/48\",\n\t\t\t\"2a03:2880:ffff::/48\",\n\t\t\t\"2620:0:1cff::/48\",\n\t\t\t\"2a03:2880:f001::/48\",\n\t\t\t\"2a03:2880:f003::/48\",\n\t\t\t\"2a03:2880:f004::/48\",\n\t\t\t\"2a03:2880:f005::/48\",\n\t\t\t\"2a03:2880:f006::/48\",\n\t\t\t\"2a03:2880:f007::/48\",\n\t\t\t\"2a03:2880:f008::/48\",\n\t\t\t\"2a03:2880:f00a::/48\",\n\t\t\t\"2a03:2880:f00c::/48\",\n\t\t\t\"2a03:2880:f00d::/48\",\n\t\t\t\"2a03:2880:f00e::/48\",\n\t\t\t\"2a03:2880:f00f::/48\",\n\t\t\t\"2a03:2880:f010::/48\",\n\t\t\t\"2a03:2880:f011::/48\",\n\t\t\t\"2a03:2880:f012::/48\",\n\t\t\t\"2a03:2880:f013::/48\",\n\t\t\t\"2a03:2880:f016::/48\",\n\t\t\t\"2a03:2880:f017::/48\",\n\t\t\t\"2a03:2880:f019::/48\",\n\t\t\t\"2a03:2880:f01b::/48\",\n\t\t\t\"2a03:2880:f01c::/48\",\n\t\t\t\"2a03:2880:f01f::/48\",\n\t\t\t\"2a03:2880:1000::/36\",\n\t\t\t\"2a03:2880:2000::/36\",\n\t\t\t\"2a03:2880:3000::/36\",\n\t\t\t\"2a03:2880:4000::/36\",\n\t\t\t\"2a03:2880:5000::/36\",\n\t\t\t\"2a03:2880:6000::/36\",\n\t\t\t\"2a03:2880:7000::/36\",\n\t\t\t\"2a03:2880:f021::/48\",\n\t\t\t\"2a03:2880:f023::/48\",\n\t\t\t\"2a03:2880:f024::/48\",\n\t\t\t\"2a03:2880:f027::/48\",\n\t\t\t\"2a03:2880:f028::/48\",\n\t\t\t\"2a03:2880:f029::/48\",\n\t\t\t\"2a03:2880:f02b::/48\",\n\t\t\t\"2a03:2880:f02c::/48\",\n\t\t\t\"2a03:2880:f02d::/48\",\n\t\t\t\"2a03:2880:f02e::/48\",\n\t\t\t\"2a03:2880:f02f::/48\",\n\t\t\t\"2a03:2880:f030::/48\",\n\t\t\t\"2a03:2880:f031::/48\",\n\t\t\t\"2a03:2880:f032::/48\",\n\t\t\t\"2a03:2880:f033::/48\",\n\t\t\t\"2a03:2880:f034::/48\",\n\t\t\t\"2a03:2880:f035::/48\",\n\t\t\t\"2a03:2880:f036::/48\",\n\t\t\t\"2a03:2880:f037::/48\",\n\t\t\t\"2a03:2880:f038::/48\",\n\t\t\t\"2a03:2880:f03a::/48\",\n\t\t\t\"2a03:2880:f03b::/48\",\n\t\t\t\"2a03:2880:f03d::/48\",\n\t\t\t\"2a03:2880:f03e::/48\",\n\t\t\t\"2a03:2880:f03f::/48\",\n\t\t\t\"2401:db00::/32\",\n\t\t\t\"2a03:2880::/36\",\n\t\t\t\"2a03:2880:f101::/48\",\n\t\t\t\"2a03:2880:f201::/48\",\n\t\t\t\"2a03:2880:f103::/48\",\n\t\t\t\"2a03:2880:f203::/48\",\n\t\t\t\"2a03:2880:f104::/48\",\n\t\t\t\"2a03:2880:f204::/48\",\n\t\t\t\"2a03:2880:f107::/48\",\n\t\t\t\"2a03:2880:f207::/48\",\n\t\t\t\"2a03:2880:f108::/48\",\n\t\t\t\"2a03:2880:f208::/48\",\n\t\t\t\"2a03:2880:f10a::/48\",\n\t\t\t\"2a03:2880:f20a::/48\",\n\t\t\t\"2a03:2880:f10d::/48\",\n\t\t\t\"2a03:2880:f20d::/48\",\n\t\t\t\"2a03:2880:f10e::/48\",\n\t\t\t\"2a03:2880:f20e::/48\",\n\t\t\t\"2a03:2880:f10f::/48\",\n\t\t\t\"2a03:2880:f20f::/48\",\n\t\t\t\"2a03:2880:f110::/48\",\n\t\t\t\"2a03:2880:f210::/48\",\n\t\t\t\"2a03:2880:f111::/48\",\n\t\t\t\"2a03:2880:f211::/48\",\n\t\t\t\"2a03:2880:f112::/48\",\n\t\t\t\"2a03:2880:f212::/48\",\n\t\t\t\"2a03:2880:f116::/48\",\n\t\t\t\"2a03:2880:f216::/48\",\n\t\t\t\"2a03:2880:f117::/48\",\n\t\t\t\"2a03:2880:f217::/48\",\n\t\t\t\"2a03:2880:f119::/48\",\n\t\t\t\"2a03:2880:f219::/48\",\n\t\t\t\"2a03:2880:f11f::/48\",\n\t\t\t\"2a03:2880:f21f::/48\",\n\t\t\t\"2a03:2880:f121::/48\",\n\t\t\t\"2a03:2880:f221::/48\",\n\t\t\t\"2a03:2880:f123::/48\",\n\t\t\t\"2a03:2880:f223::/48\",\n\t\t\t\"2a03:2880:f10c::/48\",\n\t\t\t\"2a03:2880:f20c::/48\",\n\t\t\t\"2a03:2880:f105::/48\",\n\t\t\t\"2a03:2880:f205::/48\",\n\t\t\t\"2a03:2880:f106::/48\",\n\t\t\t\"2a03:2880:f206::/48\",\n\t\t\t\"2a03:2880:f11b::/48\",\n\t\t\t\"2a03:2880:f21b::/48\",\n\t\t\t\"2a03:2880:f113::/48\",\n\t\t\t\"2a03:2880:f213::/48\",\n\t\t\t\"2a03:2880:f11c::/48\",\n\t\t\t\"2a03:2880:f21c::/48\",\n\t\t\t\"2a03:2880:f128::/48\",\n\t\t\t\"2a03:2880:f228::/48\",\n\t\t\t\"2a03:2880:f02a::/48\",\n\t\t\t\"2a03:2880:f12a::/48\",\n\t\t\t\"2a03:2880:f22a::/48\",\n\t\t\t\"2a03:2880:f12f::/48\",\n\t\t\t\"2a03:2880:f22f::/48\",\n\t\t\t\"2a03:2880:f124::/48\",\n\t\t\t\"2a03:2880:f127::/48\",\n\t\t\t\"2a03:2880:f129::/48\",\n\t\t\t\"2a03:2880:f12b::/48\",\n\t\t\t\"2a03:2880:f12c::/48\",\n\t\t\t\"2a03:2880:f12d::/48\",\n\t\t\t\"2a03:2880:f12e::/48\",\n\t\t\t\"2a03:2880:f130::/48\",\n\t\t\t\"2a03:2880:f131::/48\",\n\t\t\t\"2a03:2880:f132::/48\",\n\t\t\t\"2a03:2880:f133::/48\",\n\t\t\t\"2a03:2880:f134::/48\",\n\t\t\t\"2a03:2880:f135::/48\",\n\t\t\t\"2a03:2880:f136::/48\",\n\t\t\t\"2a03:2880:f137::/48\",\n\t\t\t\"2a03:2880:f138::/48\",\n\t\t\t\"2a03:2880:f13a::/48\",\n\t\t\t\"2a03:2880:f13b::/48\",\n\t\t\t\"2a03:2880:f13d::/48\",\n\t\t\t\"2a03:2880:f13e::/48\",\n\t\t\t\"2a03:2880:f13f::/48\",\n\t\t\t\"2a03:2880:f224::/48\",\n\t\t\t\"2a03:2880:f227::/48\",\n\t\t\t\"2a03:2880:f229::/48\",\n\t\t\t\"2a03:2880:f22b::/48\",\n\t\t\t\"2a03:2880:f22c::/48\",\n\t\t\t\"2a03:2880:f22d::/48\",\n\t\t\t\"2a03:2880:f22e::/48\",\n\t\t\t\"2a03:2880:f230::/48\",\n\t\t\t\"2a03:2880:f231::/48\",\n\t\t\t\"2a03:2880:f232::/48\",\n\t\t\t\"2a03:2880:f233::/48\",\n\t\t\t\"2a03:2880:f234::/48\",\n\t\t\t\"2a03:2880:f235::/48\",\n\t\t\t\"2a03:2880:f236::/48\",\n\t\t\t\"2a03:2880:f237::/48\",\n\t\t\t\"2a03:2880:f238::/48\",\n\t\t\t\"2a03:2880:f23a::/48\",\n\t\t\t\"2a03:2880:f23b::/48\",\n\t\t\t\"2a03:2880:f23d::/48\",\n\t\t\t\"2a03:2880:f23e::/48\",\n\t\t\t\"2a03:2880:f23f::/48\",\n\t\t\t\"2a03:2880:f0ff::/48\",\n\t\t\t\"2a03:2880:f1ff::/48\",\n\t\t\t\"2a03:2880:f2ff::/48\",\n\t\t\t\"2a03:2880:f044::/48\",\n\t\t\t\"2a03:2880:f144::/48\",\n\t\t\t\"2a03:2880:f244::/48\",\n\t\t\t\"2a03:2880:f042::/48\",\n\t\t\t\"2a03:2880:f043::/48\",\n\t\t\t\"2a03:2880:f045::/48\",\n\t\t\t\"2a03:2880:f046::/48\",\n\t\t\t\"2a03:2880:f047::/48\",\n\t\t\t\"2a03:2880:f048::/48\",\n\t\t\t\"2a03:2880:f04a::/48\",\n\t\t\t\"2a03:2880:f04c::/48\",\n\t\t\t\"2a03:2880:f04b::/48\",\n\t\t\t\"2a03:2880:f04d::/48\",\n\t\t\t\"2a03:2880:f259::/48\",\n\t\t\t\"2a03:2880:f258::/48\",\n\t\t\t\"2a03:2880:f257::/48\",\n\t\t\t\"2a03:2880:f256::/48\",\n\t\t\t\"2a03:2880:f255::/48\",\n\t\t\t\"2a03:2880:f254::/48\",\n\t\t\t\"2a03:2880:f253::/48\",\n\t\t\t\"2a03:2880:f252::/48\",\n\t\t\t\"2a03:2880:f250::/48\",\n\t\t\t\"2a03:2880:f24f::/48\",\n\t\t\t\"2a03:2880:f24d::/48\",\n\t\t\t\"2a03:2880:f24e::/48\",\n\t\t\t\"2a03:2880:f24c::/48\",\n\t\t\t\"2a03:2880:f24b::/48\",\n\t\t\t\"2a03:2880:f24a::/48\",\n\t\t\t\"2a03:2880:f248::/48\",\n\t\t\t\"2a03:2880:f247::/48\",\n\t\t\t\"2a03:2880:f246::/48\",\n\t\t\t\"2a03:2880:f245::/48\",\n\t\t\t\"2a03:2880:f243::/48\",\n\t\t\t\"2a03:2880:f242::/48\",\n\t\t\t\"2a03:2880:f241::/48\",\n\t\t\t\"2a03:2880:f240::/48\",\n\t\t\t\"2a03:2880:f159::/48\",\n\t\t\t\"2a03:2880:f158::/48\",\n\t\t\t\"2a03:2880:f157::/48\",\n\t\t\t\"2a03:2880:f156::/48\",\n\t\t\t\"2a03:2880:f155::/48\",\n\t\t\t\"2a03:2880:f154::/48\",\n\t\t\t\"2a03:2880:f153::/48\",\n\t\t\t\"2a03:2880:f152::/48\",\n\t\t\t\"2a03:2880:f150::/48\",\n\t\t\t\"2a03:2880:f14f::/48\",\n\t\t\t\"2a03:2880:f14e::/48\",\n\t\t\t\"2a03:2880:f14d::/48\",\n\t\t\t\"2a03:2880:f14c::/48\",\n\t\t\t\"2a03:2880:f14b::/48\",\n\t\t\t\"2a03:2880:f14a::/48\",\n\t\t\t\"2a03:2880:f148::/48\",\n\t\t\t\"2a03:2880:f147::/48\",\n\t\t\t\"2a03:2880:f146::/48\",\n\t\t\t\"2a03:2880:f145::/48\",\n\t\t\t\"2a03:2880:f143::/48\",\n\t\t\t\"2a03:2880:f142::/48\",\n\t\t\t\"2a03:2880:f141::/48\",\n\t\t\t\"2a03:2880:f140::/48\",\n\t\t\t\"2a03:2880:f059::/48\",\n\t\t\t\"2a03:2880:f058::/48\",\n\t\t\t\"2a03:2880:f057::/48\",\n\t\t\t\"2a03:2880:f056::/48\",\n\t\t\t\"2a03:2880:f055::/48\",\n\t\t\t\"2a03:2880:f054::/48\",\n\t\t\t\"2a03:2880:f053::/48\",\n\t\t\t\"2a03:2880:f052::/48\",\n\t\t\t\"2a03:2880:f050::/48\",\n\t\t\t\"2a03:2880:f04f::/48\",\n\t\t\t\"2a03:2880:f04e::/48\",\n\t\t\t\"2a03:2880:ff0b::/48\",\n\t\t\t\"2a03:2880:ff0c::/48\",\n\t\t\t\"2a03:2880:f040::/48\",\n\t\t\t\"2a03:2880:f041::/48\",\n\t\t\t\"2a03:2880:f0fc::/48\",\n\t\t\t\"2a03:2880:f0fd::/48\",\n\t\t\t\"2a03:2880:f0fc::/47\",\n\t\t\t\"2a03:2880:f1fc::/48\",\n\t\t\t\"2a03:2880:f1fd::/48\",\n\t\t\t\"2a03:2880:f1fc::/47\",\n\t\t\t\"2a03:2880:ff08::/48\",\n\t\t\t\"2a03:2880:ff09::/48\",\n\t\t\t\"2a03:2880:ff0a::/48\",\n\t\t\t\"2a03:2880:f05e::/48\",\n\t\t\t\"2a03:2880:f15e::/48\",\n\t\t\t\"2a03:2880:f25e::/48\",\n\t\t\t\"2620:0:1cfa::/48\",\n\t\t\t\"2a03:2880:f05b::/48\",\n\t\t\t\"2a03:2880:f05a::/48\",\n\t\t\t\"2a03:2880:f25a::/48\",\n\t\t\t\"2a03:2880:f15c::/48\",\n\t\t\t\"2a03:2880:f000::/36\",\n\t\t\t\"2a03:2880:f05d::/48\",\n\t\t\t\"2a03:2880:f25c::/48\",\n\t\t\t\"2a03:2880:f05c::/48\",\n\t\t\t\"2a03:2880:f260::/48\",\n\t\t\t\"2a03:2880:f060::/48\",\n\t\t\t\"2a03:2880:f160::/48\",\n\t\t\t\"2a03:2880:f15d::/48\",\n\t\t\t\"2a03:2880:f25b::/48\",\n\t\t\t\"2a03:2880:f25d::/48\",\n\t\t\t\"2a03:2880:f15b::/48\",\n\t\t\t\"2a03:2880:f15a::/48\",\n\t\t\t\"2a03:2880:f161::/48\",\n\t\t\t\"2a03:2880:f061::/48\",\n\t\t\t\"2a03:2880:f261::/48\",\n\t\t\t\"2a03:2881::/32\",\n\t\t\t\"2a03:2881::/48\",\n\t\t\t\"2a03:2881:1::/48\",\n\t\t\t\"2a03:2881:2::/48\",\n\t\t\t\"2a03:2881:3::/48\",\n\t\t\t\"2a03:2880:f162::/48\",\n\t\t\t\"2a03:2880:f262::/48\",\n\t\t\t\"2a03:2881:4000::/48\",\n\t\t\t\"2a03:2881:4003::/48\",\n\t\t\t\"2a03:2881:4001::/48\",\n\t\t\t\"2a03:2881:4002::/48\",\n\t\t\t\"2a03:2880:f065::/48\",\n\t\t\t\"2a03:2880:f163::/48\",\n\t\t\t\"2a03:2880:f066::/48\",\n\t\t\t\"2a03:2880:f263::/48\",\n\t\t\t\"2a03:2880:f264::/48\",\n\t\t\t\"2a03:2880:f164::/48\",\n\t\t\t\"2a03:2880:f067::/48\",\n\t\t\t\"2a03:2880:f165::/48\",\n\t\t\t\"2a03:2880:f265::/48\",\n\t\t\t\"2a03:2880:f068::/48\",\n\t\t\t\"2a03:2881:4004::/48\",\n\t\t\t\"2a03:2880:f06a::/48\",\n\t\t\t\"2a03:2880:f266::/48\",\n\t\t\t\"2a03:2880:f166::/48\",\n\t\t\t\"2a03:2880:f267::/48\",\n\t\t\t\"2a03:2880:f06b::/48\",\n\t\t\t\"2a03:2880:f167::/48\",\n\t\t\t\"2a03:2881:4006::/48\",\n\t\t\t\"2a03:2881:7::/48\",\n\t\t\t\"2a03:2881:9::/48\",\n\t\t\t\"2a03:2881:8::/48\",\n\t\t\t\"2a03:2881:4::/48\",\n\t\t\t\"2a03:2881:6::/48\",\n\t\t\t\"2a03:2881:5::/48\",\n\t\t\t\"2a03:2881:a::/48\",\n\t\t\t\"2a03:2880:f268::/48\",\n\t\t\t\"2a03:2880:f06d::/48\",\n\t\t\t\"2a03:2880:f168::/48\",\n\t\t\t\"2a03:2881:b::/48\",\n\t\t\t\"2a03:2881:c::/48\",\n\t\t\t\"2a03:2881:4007::/48\",\n\t\t\t\"2a03:2880:f269::/48\",\n\t\t\t\"2a03:2880:f169::/48\",\n\t\t\t\"2a03:2880:f06f::/48\",\n\t\t\t\"2a03:2880:f26a::/48\",\n\t\t\t\"2a03:2880:f16a::/48\",\n\t\t\t\"2a03:2880:f070::/48\",\n\t\t\t\"2a03:2881:d::/48\",\n\t\t\t\"2a03:2881:e::/48\",\n\t\t\t\"2a03:2880:f071::/48\",\n\t\t\t\"2a03:2880:f16b::/48\",\n\t\t\t\"2a03:2880:f26b::/48\",\n\t\t\t\"2a03:2881:4008::/48\",\n\t\t\t\"2a03:2881:10::/48\",\n\t\t\t\"2a03:2881:f::/48\",\n\t\t\t\"2a03:2881:11::/48\",\n\t\t\t\"2a03:2880:f26c::/48\",\n\t\t\t\"2a03:2880:f16c::/48\",\n\t\t\t\"2a03:2880:f073::/48\",\n\t\t\t\"2a03:2880:f16d::/48\",\n\t\t\t\"2a03:2880:f074::/48\",\n\t\t\t\"2a03:2880:f26d::/48\",\n\t\t\t\"2a03:2881:4009::/48\",\n\t\t\t\"2a03:2880:f26e::/48\",\n\t\t\t\"2a03:2880:f16e::/48\",\n\t\t\t\"2a03:2880:f076::/48\",\n\t\t\t\"2a03:2880:f16f::/48\",\n\t\t\t\"2a03:2880:f26f::/48\",\n\t\t\t\"2a03:2880:f077::/48\",\n\t\t\t\"2a03:2881:12::/48\",\n\t\t\t\"2a03:2881:13::/48\",\n\t\t\t\"2a03:2881:17::/48\",\n\t\t\t\"2a03:2881:15::/48\",\n\t\t\t\"2a03:2881:18::/48\",\n\t\t\t\"2a03:2881:14::/48\",\n\t\t\t\"2a03:2881:16::/48\",\n\t\t\t\"2a03:2881:19::/48\",\n\t\t\t\"2a03:2881:4005::/48\",\n\t\t\t\"2a03:2880:f078::/48\",\n\t\t\t\"2a03:2880:f170::/48\",\n\t\t\t\"2a03:2880:f270::/48\",\n\t\t\t\"2a03:2881:400a::/48\",\n\t\t\t\"2a03:2881:400c::/48\",\n\t\t\t\"2a03:2881:400b::/48\",\n\t\t\t\"2a03:2881:400d::/48\",\n\t\t\t\"2a03:2881:1a::/48\",\n\t\t\t\"2a03:2881:1c::/48\",\n\t\t\t\"2a03:2881:1b::/48\",\n\t\t\t\"2a03:2880:f271::/48\",\n\t\t\t\"2a03:2880:f07d::/48\",\n\t\t\t\"2a03:2880:f171::/48\",\n\t\t\t\"2a03:2880:f07e::/48\",\n\t\t\t\"2a03:2880:f172::/48\",\n\t\t\t\"2a03:2880:f272::/48\",\n\t\t\t\"2a03:2880:f080::/48\",\n\t\t\t\"2a03:2880:f173::/48\",\n\t\t\t\"2a03:2880:f273::/48\",\n\t\t\t\"2a03:2880:f081::/48\",\n\t\t\t\"2a03:2880:f174::/48\",\n\t\t\t\"2a03:2880:f274::/48\",\n\t\t\t\"2a03:2880:f175::/48\",\n\t\t\t\"2a03:2880:f275::/48\",\n\t\t\t\"2a03:2880:f082::/48\",\n\t\t\t\"2a03:2880:f176::/48\",\n\t\t\t\"2a03:2880:f276::/48\",\n\t\t\t\"2a03:2880:f083::/48\",\n\t\t\t\"2a03:2880:f277::/48\",\n\t\t\t\"2a03:2880:f084::/48\",\n\t\t\t\"2a03:2880:f177::/48\",\n\t\t\t\"2a03:2881:1e::/48\",\n\t\t\t\"2a03:2880:f085::/48\",\n\t\t\t\"2a03:2880:f178::/48\",\n\t\t\t\"2a03:2880:f278::/48\",\n\t\t\t\"2a03:2880:f179::/48\",\n\t\t\t\"2a03:2880:f086::/48\",\n\t\t\t\"2a03:2880:f279::/48\",\n\t\t\t\"2a03:2880:f17a::/48\",\n\t\t\t\"2a03:2880:f08a::/48\",\n\t\t\t\"2a03:2880:f27a::/48\",\n\t\t\t\"2a03:2881:48::/45\",\n\t\t\t\"2a10:f781:10:cee0::/64\",\n\t\t\t\"2a03:83e0::/32\",\n\t\t]\n\n\t\tconst twitter = [\n\t\t\t\"199.16.156.0/22\",\n\t\t\t\"199.59.148.0/22\",\n\t\t\t\"192.133.76.0/22\",\n\t\t]\n\n\t\tconst bing = [\n\t\t\t\"157.55.39.0/24\",\n\t\t\t\"207.46.13.0/24\",\n\t\t\t\"40.77.167.0/24\",\n\t\t\t\"13.66.139.0/24\",\n\t\t\t\"13.66.144.0/24\",\n\t\t\t\"52.167.144.0/24\",\n\t\t\t\"13.67.10.16/28\",\n\t\t\t\"13.69.66.240/28\",\n\t\t\t\"13.71.172.224/28\",\n\t\t\t\"139.217.52.0/28\",\n\t\t\t\"191.233.204.224/28\",\n\t\t\t\"20.36.108.32/28\",\n\t\t\t\"20.43.120.16/28\",\n\t\t\t\"40.79.131.208/28\",\n\t\t\t\"40.79.186.176/28\",\n\t\t\t\"52.231.148.0/28\",\n\t\t\t\"20.79.107.240/28\",\n\t\t\t\"51.105.67.0/28\",\n\t\t\t\"20.125.163.80/28\",\n\t\t\t\"40.77.188.0/22\",\n\t\t\t\"65.55.210.0/24\",\n\t\t\t\"199.30.24.0/23\",\n\t\t\t\"40.77.202.0/24\",\n\t\t\t\"40.77.139.0/25\",\n\t\t\t\"20.74.197.0/28\",\n\t\t]\n\n\t\tconst pinterest = [\n\t\t\t\"54.236.1.1/32\",\n\t\t\t\"54.236.1.2/31\",\n\t\t\t\"54.236.1.4/30\",\n\t\t\t\"54.236.1.8/29\",\n\t\t\t\"54.236.1.16/28\",\n\t\t\t\"54.236.1.32/27\",\n\t\t\t\"54.236.1.64/26\",\n\t\t\t\"54.236.1.128/25\",\n\t\t]\n\n\t\tconst hotjar = [\n\t\t\t\"18.203.61.76\",\n\t\t\t\"18.203.176.135\",\n\t\t\t\"52.17.197.221\",\n\t\t]\n\n\t\tconst alexa = [\n\t\t\t\"204.236.235.245\",\n\t\t\t\"75.101.186.145\",\n\t\t]\n\n\t\tconst amazon = [\n\t\t\t\"18.207.141.103\",\n\t\t\t\"52.1.113.12\",\n\t\t]\n\n\t\tconst baidu = [\n\t\t\t\"180.76.15.0/24\",\n\t\t\t\"119.63.196.0/24\",\n\t\t\t\"115.239.212.0/24\",\n\t\t\t\"119.63.199.0/24\",\n\t\t\t\"122.81.208.0/22\",\n\t\t\t\"123.125.71.0/24\",\n\t\t\t\"180.76.4.0/24\",\n\t\t\t\"180.76.5.0/24\",\n\t\t\t\"180.76.6.0/24\",\n\t\t\t\"185.10.104.0/24\",\n\t\t\t\"220.181.108.0/24\",\n\t\t\t\"220.181.51.0/24\",\n\t\t\t\"111.13.102.0/24\",\n\t\t\t\"123.125.67.144/29\",\n\t\t\t\"123.125.67.152/31\",\n\t\t\t\"61.135.169.0/24\",\n\t\t\t\"123.125.68.68/30\",\n\t\t\t\"123.125.68.72/29\",\n\t\t\t\"123.125.68.80/28\",\n\t\t\t\"123.125.68.96/30\",\n\t\t\t\"202.46.48.0/20\",\n\t\t\t\"220.181.38.0/24\",\n\t\t\t\"123.125.68.80/30\",\n\t\t\t\"123.125.68.84/31\",\n\t\t\t\"123.125.68.0/24\",\n\t\t]\n\n\t\tconst duckduckgo = [\n\t\t\t\"20.191.45.212\",\n\t\t\t\"40.88.21.235\",\n\t\t\t\"40.76.173.151\",\n\t\t\t\"40.76.163.7\",\n\t\t\t\"20.185.79.47\",\n\t\t\t\"52.142.26.175\",\n\t\t\t\"20.185.79.15\",\n\t\t\t\"52.142.24.149\",\n\t\t\t\"40.76.162.208\",\n\t\t\t\"40.76.163.23\",\n\t\t\t\"40.76.162.191\",\n\t\t\t\"40.76.162.247\",\n\t\t]\n\n\t\tconst yahoo = [\n\t\t\t\"5.255.250.0/24\",\n\t\t\t\"37.9.87.0/24\",\n\t\t\t\"67.195.37.0/24\",\n\t\t\t\"67.195.50.0/24\",\n\t\t\t\"67.195.110.0/24\",\n\t\t\t\"67.195.111.0/24\",\n\t\t\t\"67.195.112.0/23\",\n\t\t\t\"67.195.114.0/24\",\n\t\t\t\"67.195.115.0/24\",\n\t\t\t\"68.180.224.0/21\",\n\t\t\t\"72.30.132.0/24\",\n\t\t\t\"72.30.142.0/24\",\n\t\t\t\"72.30.161.0/24\",\n\t\t\t\"72.30.196.0/24\",\n\t\t\t\"72.30.198.0/24\",\n\t\t\t\"74.6.254.0/24\",\n\t\t\t\"74.6.8.0/24\",\n\t\t\t\"74.6.13.0/24\",\n\t\t\t\"74.6.17.0/24\",\n\t\t\t\"74.6.18.0/24\",\n\t\t\t\"74.6.22.0/24\",\n\t\t\t\"74.6.27.0/24\",\n\t\t\t\"74.6.168.0/24\",\n\t\t\t\"77.88.5.0/24\",\n\t\t\t\"77.88.47.0/24\",\n\t\t\t\"93.158.161.0/24\",\n\t\t\t\"98.137.72.0/24\",\n\t\t\t\"98.137.206.0/24\",\n\t\t\t\"98.137.207.0/24\",\n\t\t\t\"98.139.168.0/24\",\n\t\t\t\"114.111.95.0/24\",\n\t\t\t\"124.83.159.0/24\",\n\t\t\t\"124.83.179.0/24\",\n\t\t\t\"124.83.223.0/24\",\n\t\t\t\"141.8.144.0/24\",\n\t\t\t\"183.79.63.0/24\",\n\t\t\t\"183.79.92.0/24\",\n\t\t\t\"203.216.255.0/24\",\n\t\t\t\"211.14.11.0/24\",\n\t\t]\n\n\t\tconst yandex = [\n\t\t\t\"100.43.90.0/24\",\n\t\t\t\"37.9.115.0/24\",\n\t\t\t\"37.140.165.0/24\",\n\t\t\t\"77.88.22.0/25\",\n\t\t\t\"77.88.29.0/24\",\n\t\t\t\"77.88.31.0/24\",\n\t\t\t\"77.88.59.0/24\",\n\t\t\t\"84.201.146.0/24\",\n\t\t\t\"84.201.148.0/24\",\n\t\t\t\"84.201.149.0/24\",\n\t\t\t\"87.250.243.0/24\",\n\t\t\t\"87.250.253.0/24\",\n\t\t\t\"93.158.147.0/24\",\n\t\t\t\"93.158.148.0/24\",\n\t\t\t\"93.158.151.0/24\",\n\t\t\t\"93.158.153.0/32\",\n\t\t\t\"95.108.128.0/24\",\n\t\t\t\"95.108.138.0/24\",\n\t\t\t\"95.108.150.0/23\",\n\t\t\t\"95.108.158.0/24\",\n\t\t\t\"95.108.156.0/24\",\n\t\t\t\"95.108.188.128/25\",\n\t\t\t\"95.108.234.0/24\",\n\t\t\t\"95.108.248.0/24\",\n\t\t\t\"100.43.80.0/24\",\n\t\t\t\"130.193.62.0/24\",\n\t\t\t\"141.8.153.0/24\",\n\t\t\t\"178.154.165.0/24\",\n\t\t\t\"178.154.166.128/25\",\n\t\t\t\"178.154.173.29\",\n\t\t\t\"178.154.200.158\",\n\t\t\t\"178.154.202.0/24\",\n\t\t\t\"178.154.205.0/24\",\n\t\t\t\"178.154.239.0/24\",\n\t\t\t\"178.154.243.0/24\",\n\t\t\t\"37.9.84.253\",\n\t\t\t\"199.21.99.99\",\n\t\t\t\"178.154.162.29\",\n\t\t\t\"178.154.203.251\",\n\t\t\t\"178.154.211.250\",\n\t\t\t\"178.154.171.0/24\",\n\t\t\t\"178.154.200.0/24\",\n\t\t\t\"178.154.244.0/24\",\n\t\t\t\"178.154.246.0/24\",\n\t\t\t\"95.108.181.0/24\",\n\t\t\t\"95.108.246.252\",\n\t\t\t\"5.45.254.0/24\",\n\t\t\t\"5.255.253.0/24\",\n\t\t\t\"37.140.141.0/24\",\n\t\t\t\"37.140.188.0/24\",\n\t\t\t\"100.43.81.0/24\",\n\t\t\t\"100.43.85.0/24\",\n\t\t\t\"100.43.91.0/24\",\n\t\t\t\"199.21.99.0/24\",\n\t\t\t\"2a02:6b8:b000::/32\",\n\t\t\t\"2a02:6b8:b010::/32\",\n\t\t\t\"2a02:6b8:b011::/32\",\n\t\t\t\"2a02:6b8:c0e::/32\",\n\t\t]\n\n\t\tconst sogou = [\n\t\t\t\"220.181.125.0/24\",\n\t\t\t\"123.126.51.64/27\",\n\t\t\t\"123.126.51.96/28\",\n\t\t\t\"123.126.68.25\",\n\t\t\t\"61.135.189.74\",\n\t\t\t\"61.135.189.75\",\n\t\t]\n\n\t\tconst youdao = [\n\t\t\t\"61.135.249.200/29\",\n\t\t\t\"61.135.249.208/28\",\n\t\t]\n\n\t\tlet customExclusionList = []\n\n\t\t// if wpmDataLayer.general.server_2_server.ip_exclude_list is array\n\t\tif (Array.isArray(wpmDataLayer.general.server_2_server.ip_exclude_list)) {\n\t\t\tcustomExclusionList = wpmDataLayer.general.server_2_server.ip_exclude_list\n\t\t}\n\n\t\treturn blacklist.concat(\n\t\t\tgoogle,\n\t\t\tfacebook,\n\t\t\ttwitter,\n\t\t\tbing,\n\t\t\tpinterest,\n\t\t\thotjar,\n\t\t\talexa,\n\t\t\tamazon,\n\t\t\tbaidu,\n\t\t\tduckduckgo,\n\t\t\tyahoo,\n\t\t\tyandex,\n\t\t\tsogou,\n\t\t\tyoudao,\n\t\t\tcustomExclusionList,\n\t\t)\n\t}\n\n}(window.wpm = window.wpm || {}, jQuery))\n","/**\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/src/BlockTypes/AbstractProductGrid.php#L108\n * https://github.com/woocommerce/woocommerce-blocks/issues/3483\n * https://github.com/woocommerce/woocommerce-blocks/issues/1714\n *\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/third-party-developers/extensibility/hooks/actions.md#woocommerce_add_to_cart\n *\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/internal-developers/blocks/feature-flags-and-experimental-interfaces.md\n * https://github.com/woocommerce/woocommerce-blocks/blob/trunk/docs/internal-developers/blocks/feature-flags-and-experimental-interfaces.md#usages-of-experimental-prefix\n *\n * experimental__woocommerce_blocks-product-list-render\n *\n * https://github.com/woocommerce/woocommerce-blocks/blob/a1a6eb2b574b7d39d19d67bafb747d38017289da/docs/internal-developers/blocks/feature-flags-and-experimental-interfaces.md/#usages-of-experimental-prefix\n */\n\n// TODO experimental__woocommerce_blocks-checkout-set-email-address\n// TODO experimental__woocommerce_blocks-product-view-link > selectItem\n// TODO maybe experimental__woocommerce_blocks-product-list-render, when product list is rendered send some list event\n// TODO maybe experimental__woocommerce_blocks-product-search, if the current event trigger doesn't work\n// TODO experimental__woocommerce_blocks-product-render > viewItem\n// TODO various events during entering checkout details, such as email, address, etc.\n// TODO find a way to keep view_item_list events working with the mutation observer\n\n// import {createHooks, addAction, doAction} from \"@wordpress/hooks\"\n// console.log(wp.hooks)\n// console.log(wp.hooks.applyFilters(\"ndx_change_string\", \"\"))\n\n/**\n * Add-to-cart button\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-cart-add-item\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-cart-add-item\", data)\n\n\t\t// Works on the all product page\n\t\t// TODO make it work with variable quantities on product page\n\t\twpm.addProductToCart(data.product.id, 1)\n\t},\n)\n\n/**\n * Change cart quantity\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-cart-set-item-quantity\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-cart-set-item-quantity\", data)\n\n\t\tif (data.quantity > data.product.quantity) {\n\t\t\twpm.addProductToCart(data.product.id, data.quantity - data.product.quantity)\n\t\t}\n\n\t\tif (data.quantity < data.product.quantity) {\n\t\t\twpm.removeProductFromCart(data.product.id, data.product.quantity - data.quantity)\n\t\t}\n\t},\n)\n\n/**\n * Remove from cart\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-cart-remove-item\",\n\t\"pixel-manager-for-woocommerce\",\n\tdata => {\n\t\t// console.log(\"experimental__woocommerce_blocks-cart-remove-item\", data)\n\t\twpm.removeProductFromCart(data.product.id, data.quantity)\n\t},\n)\n\n/**\n * Start checkout\n */\n\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-checkout-render-checkout-form\",\n// \t\"pixel-manager-for-woocommerce\",\n// \tdata => {\n// \t\tconsole.log(\"experimental__woocommerce_blocks-checkout-render-checkout-form\", data)\n// \t\tjQuery(document).trigger(\"wpmBeginCheckout\")\n// \t},\n// )\n\n/**\n * Checkout form submit\n */\nwp.hooks.addAction(\n\t\"experimental__woocommerce_blocks-checkout-submit\",\n\t\"pixel-manager-for-woocommerce\",\n\t() => {\n\t\t// console.log(\"experimental__woocommerce_blocks-checkout-submit\")\n\t\tjQuery(document).trigger(\"wpmPlaceOrder\", {})\n\t},\n)\n\n\n/**\n * Only outputs an object with products. No other data or actions.\n */\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-product-list-render\",\n// \t\"pixel-manager-for-woocommerce\",\n// \t(value) => {\n//\n// \t\tif (value.products.length > 0) {\n// \t\t\tconsole.log(\"hello world 1\")\n// \t\t\tconsole.log(value)\n//\n// \t\t\tjQuery(\".add_to_cart_button\").on(\"click\", function (event) {\n//\n// \t\t\t\tconsole.log(jQuery(event.target.parentElement.parentElement))\n//\n// \t\t\t\t// console.log(\"hello world 5\");\n// \t\t\t\t//\n// \t\t\t\t// console.log(jQuery(this.parentElement.parentElement));\n// \t\t\t\t//\n// \t\t\t\t// console.log(\"hello world 6\");\n// \t\t\t\t//\n// \t\t\t\t// // element is part of a React component.\n// \t\t\t\t// // Get the parent element.\n// \t\t\t\t// const pe = event.target.parentElement.parentElement\n// \t\t\t\t// console.log(jQuery(pe)._reactInternalFiber.key)\n// \t\t\t\t//\n// \t\t\t\t// // pe is a react component. Get the key of that component.\n// \t\t\t\t// const key = pe.getAttribute(\"data-key\")\n// \t\t\t\t// console.log(key)\n//\n//\n// \t\t\t\t// console.log(element.currentTarget.dataset.key)\n// \t\t\t})\n// \t\t}\n// \t\treturn value\n// \t},\n// )\n\n// jQuery(document).on(\"pmw:ready\", () => {\n// \tjQuery(\".add_to_cart_button\").on(\"click\", function (element) {\n//\n// \t\tconsole.log(\"hello world 3\")\n// \t\t// element is part of a React component.\n// \t\t// Get the key of that component.\n// \t\tconsole.log(element.currentTarget.dataset.key)\n// \t})\n// })\n\n// wp.hooks.addAction(\n// \t'woocommerce_add_to_cart',\n// \t'pixel-manager-for-woocommerce',\n// \t( cart_item_key, product_id, quantity, variation_id, variation, cart_item_data ) => {\n// \t\tconsole.log( cart_item_key, product_id, quantity, variation_id, variation, cart_item_data );\n// \t},\n// \t()=>{\n// \t\tconsole.log(\"hello world 2\")\n// \t}\n// )\n\n/**\n * Product Search\n *\n * TODO: Make sure that it doesn't duplicate the event\n */\n// wp.hooks.addAction(\n// \t\"experimental__woocommerce_blocks-product-search\",\n// \t\"pixel-manager-for-woocommerce\",\n// \tdata => {\n// \t\t// console.log(\"experimental__woocommerce_blocks-product-search\", data)\n// \t\tjQuery(document).trigger(\"pmwEvent:Search\", data.searchTerm)\n// \t},\n// )\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Run PMW main loader\n */\n\nconst main = async () => {\n\n\trequire(\"./wpm/functions_main\")\n\trequire(\"./version.js\")\n\n\t// Wait until jQuery is loaded\n\tawait wpm.jQueryExists()\n\n\t// Wait until wpmDataLayer is loaded\n\tawait wpm.wpmDataLayerFullyLoaded()\n\n\t// wait 1000ms\n\t// await new Promise(resolve => setTimeout(resolve, 1000))\n\n\t// Load all essential scripts first\n\trequire(\"./wpm/functions_loader\")\n\n\t// Load all event listeners that depend on document ready\n\tjQuery(document).on(\"pmw:ready\", () => {\n\t\trequire(\"./wpm/event_listeners_on_ready\")\n\t})\n\n\t// Load remaining event listeners\n\trequire(\"./wpm/event_listeners\")\n\n\twpm.loadWcHooksFunctions()\n\n\t// Output PMW console message\n\twpm.pmwConsoleMessage()\n\n\t// Check if domain is excluded from tracking\n\t// If so, return\n\tif (wpm.excludeDomainFromTracking()) return\n\n\t// Load free pixels\n\trequire(\"./google/loader\")\n\trequire(\"./facebook/loader\")\n\trequire(\"./hotjar/loader\")\n\n\t// #if process.env.TIER === 'premium'\n// \t/**\n// \t *  Load all premium scripts\n// \t */\n// \tif (wpm.canLoadPremiumFeatures()) {\n// \t\trequire(\"./wpm/event_listeners_premium\")\n// \t\trequire(\"./adroll/loader\")\n// \t\trequire(\"./linkedin/loader\")\n// \t\trequire(\"./microsoft-ads/loader\")\n// \t\trequire(\"./outbrain/loader\")\n// \t\trequire(\"./pinterest/loader\")\n// \t\trequire(\"./snapchat/loader\")\n// \t\trequire(\"./taboola/loader\")\n// \t\trequire(\"./tiktok/loader\")\n// \t\trequire(\"./twitter/loader\")\n// \t\trequire(\"./reddit/loader\")\n// \t\trequire(\"./vwo/loader\")\n// \t}\n\t// #endif\n\n\t// Preload pixels\n\tdocument.dispatchEvent(new Event(\"wpmPreLoadPixels\"))\n\n\t// Trigger wpmLoad event\n\tdocument.dispatchEvent(new Event(\"wpmLoad\"))\n\n\t// Wait until page is loaded\n\tawait wpm.pageLoaded()\n\twpm.triggerDomReadyEvent()\n\n\t// Check if the library version matches the PMW version that's installed on the server\n\twpm.checkLibraryVersion()\n\n}\n\nmain()\n\n\n\n\n\n\n\n\n"],"names":["IPv4","require","exports","IPv6","util","util_1","isInSubnet","address","subnetOrSubnets","createChecker","Array","isArray","subnetsByVersion","reduce","acc","subnet","ip","split","isIP","push","length","Error","check4","check6","isIPv6","isIPv4MappedAddress","extractMappedIpv4","Object","enumerable","get","isIPv4","isPrivate","isLocalhost","isReserved","isSpecial","localhost","ipv4","ipv6","private","reserved","ipRange_1","ipv4ToLong","octets","parseInt","checks_1","map","createLongChecker","addressLong","some","check","_a","subnetAddress","prefixLengthString","prefixLength","Number","isInteger","subnetLong","specialNetsCache","default","__spreadArrays","dot","mappedIpv4","colon","doubleColon","getIpv6Segments","test","matches","match","prefix","parts","x","toString","mappedIpv4ToIpv6","beforeChunk","afterChunk","beforeParts","afterParts","missingSegments","concat","createSegmentChecker","segments","subnetSegments","addressSegments","i","bitCount","Math","min","Boolean","v4Seg","v4Str","IPv4Reg","RegExp","v6Seg","IPv6Reg","s","expandIPv6","ipaddr","ipv4Part","ipv4Regexes","ipv6Part","ipv6Regexes","matchCIDR","zoneIndex","module","this","first","second","partSize","cidrBits","part","shift","subnetMatch","rangeList","defaultName","k","len","rangeName","rangeSubnets","kind","apply","octet","prototype","join","toNormalizedString","toByteArray","slice","other","cidrRange","ref","SpecialRanges","unspecified","broadcast","multicast","linkLocal","loopback","carrierGradeNat","range","toIPv4MappedAddress","parse","prefixLengthFromSubnetMask","cidr","stop","zeros","zerotable","fourOctet","longValue","parser","string","parseIntAuto","value","results","reverse","zoneId","l","replace","toRFC5952String","bestMatchIndex","bestMatchLength","regex","exec","index","substring","bytes","addr","suffix","call","toFixedLengthString","padStart","uniqueLocal","ipv4Mapped","rfc6145","rfc6052","teredo","toIPv4Address","high","low","transitional","colonCount","lastColon","replacement","replacementCount","indexOf","lastIndexOf","substr","isValid","error1","isValidFourPartDecimal","parseCIDR","maskLength","parsed","defineProperty","subnetMaskFromPrefixLength","filledOctetCount","j","floor","pow","broadcastAddressFromCIDR","ipInterfaceOctets","subnetMaskOctets","networkAddressFromCIDR","fromByteArray","process","commonjsGlobal","normalize","a","_validate","nh","toLowerCase","sections","n","h","ns","hs","undefined","_leftPad","abbreviate","zPreviousFlag","zeroStartIndex","zeroLength","zStartIndex","zLength","section","zFlag","splice","d","p","padding","repeat","_bin2hex","bin","_addr2bin","binAddr","_bin2addr","binPart","hexSection","divideSubnet","mask0","mask1","limit","abbr","ret","binNetPart","binHostPart","numSubnets","binSubnet","hexAddr","binStartAddr","binEndAddr","start","end","size","randomSubnet","random","ptr","mask","version","err","isV4","isV6","isRange","inRange","check_range","ip6","range_data","parse_addr","parse_range","storeIP","displayIP","jQuery","document","on","wpmDataLayer","pixels","facebook","pixel_id","loaded","wpm","doesUrlContainPatterns","exclusion_patterns","canIFire","loadFacebookPixel","event","payload","fbq","custom_data","eventID","event_id","consoleLog","error","console","setFbUserData","$","fbUserData","fbeventsJsUrl","searchParams","URLSearchParams","window","location","search","has","fbevents_js_url","f","b","e","v","callMethod","arguments","queue","_fbq","t","createElement","async","src","getElementsByTagName","parentNode","insertBefore","data","isFbpSet","isFbAdvancedMatchingEnabled","getUserIdentifiersForFb","mobile_bridge_app_id","user","id","raw","external_id","order","user_id","email","em","billing_email_hashed","first_name","fn","billing_first_name","last_name","ln","billing_last_name","phone","ph","billing_phone","city","ct","billing_city","state","st","billing_state","postcode","zp","billing_postcode","country","billing_country","getFbRandomEventId","getFbUserData","getFbUserDataFromBrowser","advanced_matching","getCookie","isValidFbp","fbp","isValidFbc","fbc","navigator","userAgent","client_user_agent","retrieveData","client_ip_address","fbGetProductDataForCapiEvent","product","content_type","content_name","name","content_ids","dyn_r_ids","dynamic_remarketing","id_type","parseFloat","quantity","price","currency","facebookContentIds","prodIds","values","items","forEach","item","shop","variations_output","variation_id","String","products","trackCustomFacebookEvent","eventName","customData","eventId","trigger","event_name","user_data","event_source_url","href","fbGetContentIdsFromCart","key","cart","isEmptyObject","google","ads","conversionIds","status","googleConfigConditionsMet","is_variable","send_events_with_parent_ids","send_to","getGoogleAdsConversionIdentifiers","google_business_vertical","gtagLoaded","then","gtag","getGoogleAdsConversionIdentifiersWithLabel","marketing","getGoogleAdsRegularOrderItems","transaction_id","number","new_customer","ltv","customer_lifetime_value","aw_merchant_id","discount","aw_feed_country","aw_feed_language","conversionIdentifiers","entries","_ref","keys","orderItems","orderItem","analytics","eec","ga4","measurement_id","ga4GetFullProductItemData","item_list_name","list_name","item_list_id","list_id","getCartValue","getCartItemsGa4","cartValue","toFixed","search_term","getSearchTermFromUrl","mp_active","affiliation","total","tax","shipping","coupon","getGA4OrderItems","item_name","item_category","category","item_id","item_variant","variant_name","item_brand","brand","canGoogleLoad","loadGoogle","logPreventedPixelLoading","type","consent_mode","is_active","getConsentValues","mode","categories","includes","getVisitorConsentStatusAndUpdateGoogleConsentSettings","google_consent_settings","analytics_storage","ad_storage","ad_user_data","ad_personalization","fireGtagGoogleAds","enhanced_conversions","active","phone_conversion_label","phone_conversion_number","page_type","enhanced_conversion_data","fireGtagGoogleAnalyticsGA4","parameters","debug_mode","isGoogleActive","universal","property_id","getGoogleGtagId","log","loadScriptAndCacheIt","script","textStatus","tcf_support","dataLayer","functionality_storage","personalization_storage","security_storage","wait_for_update","region","ads_data_redaction","url_passthrough","linker","settings","Date","triggerQueuedEvents","Promise","resolve","reject","startTime","wait","consoleError","setTimeout","hotjar","site_id","load_hotjar_pixel","o","hj","q","_hjSettings","hjid","hjsv","r","appendChild","getLibraryVersion","checkLibraryVersion","wpmConsentValues","setConsentValueCategories","updateConsentCookieValues","cookie","explicitConsent","JSON","visitorHasChosen","decodeURI","getCookieThatContainsRegex","action","consents","statistics","getComplianzCookies","cmplz_statistics","cmplz_marketing","getCookieYesCookies","advertisement","checkCookie","cookieNames","cookieValue","analyticsCookie","adsCookie","thirdparty","advanced","getIubendaCookieInfo","decodeURIComponent","purposes","localStorage","getItem","UC_UI","addEventListener","ucUiProcessConsent","areAllConsentsAccepted","groups","groupsObject","group","groupArray","getTermlyCookies","termlyConsent","doesACookieForTheRealCookieBannerExist","waitForLibrary","consentApi","service","cookies","consent","consentSync","cookieOptIn","trim","startsWith","pmw","consentAcceptAll","ucStatisticsSlug","getSettingsLabels","filter","label","slug","consentAdjustSelectively","getServicesBaseInfo","categorySlug","setConsentDefaultValuesToExplicit","pixelName","canIFireMode","general","cookie_consent_mgmt","explicit_consent","scriptTagObserver","MutationObserver","mutations","_ref2","addedNodes","node","shouldScriptBeActive","unblockScript","blockScript","observe","head","childList","subtree","disconnect","element","scriptNode","removeAttach","remove","wpmSrc","attr","appendTo","dispatchEvent","Event","removeAttr","unblockAllScripts","unblockSelectedPixels","explicitConsentStateAlreadySet","updatePixelConsentForPixelTypeCMPs","updateGoogleConsentMode","Cookiebot","changedConsentCategory","detail","cmplzStatusChange","cmplzConsentData","huObserver","_ref3","querySelector","hu","documentElement","body","consentRevokeAll","OneTrust","reload","advertising","duration","consentSetCookie","setCookie","stringify","triggerPmwCookieConsentManagementLoaded","url","URL","currentTarget","productId","getProductIdByCartItemKeyUrl","removeProductFromCart","checkoutButtonSelectors","prepareSelectors","paymentMethodSelected","fireCheckoutProgress","fireCheckoutOption","val","initCart","productIds","getAddToCartLinkProductIds","getProductsFromBackend","referrer","referrerHostname","hostname","host","storeData","pmw_loaded","product_type","getMainProductIdFromProductPage","getProductDataForViewItemEvent","isOrderIdStored","writeOrderIdToStorage","acrRemoveCookie","hasLoginEventFired","setLoginEventFired","pinterest","getPinterestS2SBaseData","pinterestGetProductDataForCapiEvent","tiktok","getRandomEventId","context","getTikTokUserDataFromBrowser","properties","contents","content_id","sendEventPayloadToServer","tiktokGetPropertiesFromCart","search_string","query","getTikTokOrderItemIds","isWooCommerceActive","startIntersectionObserverToWatch","startProductsMutationObserverToWatch","addToCartSelectors","target","dataset","product_id","addProductToCart","each","find","classes","getPostIdFromString","one","closest","origin","nextAll","getIdBasedOndVariationsOutputSetting","getProductDetailsFormattedForEvent","isEmail","emailSelected","getProductIdByCartItemElement","getProductQuantityByCartItemElement","getCartItemsFromBackend","previousVariationId","variation","triggerViewItemEventPrep","wpmRestSettings","isBelowRestErrorThreshold","isRestEndpointAvailable","testEndpoint","root","cookieName","response","fetch","method","cache","keepalive","isWpmRestEndpointAvailable","orderId","orderKey","source","orderIds","storeOrderIdOnServer","order_duplication_prevention","quantityToRemove","storeCartData","is_variation","parent_id","selectors","Set","doesWooCommerceCartExist","retrieveCartData","saveCartObjectToDataLayer","ajax_url","ok","json","success","page_id","product_ids","options","headers","statusText","responseData","assign","cartObject","triggerViewItemEvent","triggerViewItemEventNoProduct","step","checkout_option","triggerViewItemList","viewItemListTriggerTestMode","css","append","view_item_list_trigger","opacity","background_color","io","ioTimeouts","observerCallback","observer","entry","elementId","next","isIntersecting","test_mode","unobserve","timeout","clearTimeout","ioid","detectedProductTemplateClasses","nested","flat","isNestedClass","elem","className","isFlatClass","prev","hasClass","getAllElementsToWatch","getCommonIdentifiersToWatch","listOfClassNames","haveSameNestingDepth","element1","element2","parents","findCommonParentElement","parent","is","countOfChildren","getCommonClass","classes1","classes2","wpmProductIds","querySelectorAll","productsNode","commonClass","children","firstProductTemplateClasses","urlHasParameter","IntersectionObserver","threshold","productsMutationObserver","attributes","characterData","mutation","newNodes","hasWpmProductIdElement","siblings","expiryDays","setTime","getTime","expires","toUTCString","ca","c","charAt","deleteCookie","persistent","extension","dataGetter","getPersistentData","getSessionData","dataSetter","setPersistentData","setSessionData","getSessionDataKey","defaultStorageKey","getPersistentDataKey","storageKeySuffix","sessionStorage","setItem","order_id","orderDetails","order_key","responseJson","cartItemKey","cart_item_keys","variant","list_position","position","parent_id_dyn_r_ids","getClidFromBrowser","clidCookieId","clidId","gclid","dclid","getUserAgent","getViewPort","width","max","clientWidth","innerWidth","height","clientHeight","innerHeight","consoleLogVersion","dataType","ajax","getOrderItemPrice","total_tax","loginEventFired","pageLoaded","waitForVar","readyState","pageReady","isMiniCartActive","parameter","getUrlParameter","hashAsync","algo","str","crypto","subtle","digest","TextEncoder","encode","buf","Uint8Array","patterns","pattern","excludeDomainFromTracking","exclude_domains","domain","debug","pmwConsoleMessage","message","pro","distro","eligible_for_updates","canLoadPremiumFeatures","jQueryReadyFired","triggerDomReadyEvent","getEmailFromTarget","sendEventPayloadToServerPremium","isLoggerEnabled","logger","_len","objects","_key","_len2","_key2","pixel","pmw_event_queue","func","jQueryExists","waitForjQuery","library","interval","now","wpmDataLayerFullyLoaded","checkVar","logTimeoutId","wpHooksExists","wp","hooks","loadWcHooksFunctions","getIpVersion","ipServices","isIpAllowed","getIp","isOnBlacklist","ipVersion","maxServicesToCheck","validVersions","ipv","getIpFromAnyService","performance","ipServicesFiltered","obj","promises","getIpFromService","any","timeTaken","serviceResponseData","text","pair","isIpNotAllowed","ipName","getBlacklist","isCidr","customExclusionList","server_2_server","ip_exclude_list","addAction","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","g","globalThis","Function","prop","hasOwnProperty","Symbol","toStringTag","main"],"sourceRoot":""}