!function(){var t={779:function(t,e){var n;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&t.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&t.push(s)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0!==(n=(function(){return i}).apply(e,[]))&&(t.exports=n)}()},334:function(){},28:function(t,e,n){"use strict";n.d(e,{P:function(){return d}});var r=n(896),i=n(307),o=n(18),a=n(818),s=n(694),l=n(736),u=n(168);n(462);let __=l.__,c="isInsertingPagePattern",p="automattic/full-site-editing/inserting-pattern";function d(t){let{setOpenState:e}=(0,a.useDispatch)(u.I),{setUsedPageOrPatternsModal:n}=(0,a.useDispatch)("automattic/wpcom-welcome-guide"),{replaceInnerBlocks:l}=(0,a.useDispatch)("core/block-editor"),{editPost:d}=(0,a.useDispatch)("core/editor"),{toggleFeature:g}=(0,a.useDispatch)("core/edit-post"),{disableTips:f}=(0,a.useDispatch)("core/nux"),m=(0,a.useSelect)(t=>{let{isOpen:e,isPatternPicker:n}=t(u.I);return{isOpen:e(),isWelcomeGuideActive:t("core/edit-post").isFeatureActive("welcomeGuide"),areTipsEnabled:!!t("core/nux")&&t("core/nux").areTipsEnabled(),...n()&&{title:__("Choose a Pattern","full-site-editing"),description:__("Pick a pre-defined layout or continue with a blank page","full-site-editing")}}},[]),{getMeta:h,postContentBlock:_}=(0,a.useSelect)(t=>{let e=t("core/editor").getBlocks();return{getMeta:()=>t("core/editor").getEditedPostAttribute("meta"),postContentBlock:e.find(t=>"a8c/post-content"===t.name)}},[]),b=(0,i.useCallback)((t,e)=>{let n=h(),r=Array.isArray(n._wpcom_template_layout_category)&&n._wpcom_template_layout_category||[];d({meta:{...n,_starter_page_template:t,_wpcom_template_layout_category:[...r,e]}})},[d,h]),y=(0,i.useCallback)((t,e)=>{(0,s.addFilter)(c,p,()=>!0),t&&d({title:t}),l(_?_.clientId:"",e,!1),(0,s.removeFilter)(c,p)},[d,_,l]),{isWelcomeGuideActive:w,areTipsEnabled:v}=m,P=(0,i.useCallback)(()=>{w?g("welcomeGuide"):v&&f()},[v,f,w,g]),k=(0,i.useCallback)(()=>{e("CLOSED"),n?.()},[e,n]);return(0,i.createElement)(o.Z,(0,r.Z)({},m,{onClose:k,savePatternChoice:b,insertPattern:y,hideWelcomeGuide:P},t))}},168:function(t,e,n){"use strict";n.d(e,{I:function(){return i}});var r=n(818);let i=(0,r.createReduxStore)("automattic/starter-page-layouts",{reducer:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CLOSED",{type:e,...n}=arguments.length>1?arguments[1]:void 0;return"SET_IS_OPEN"===e?n.openState:t},actions:{setOpenState:t=>({type:"SET_IS_OPEN",openState:t||"CLOSED"})},selectors:{isOpen:t=>"CLOSED"!==t,isPatternPicker:t=>"OPEN_FOR_BLANK_CANVAS"===t}});(0,r.register)(i)},18:function(t,e,n){"use strict";var r=n(666),i=n(307),o=n(981),a=n(609),s=n(333),l=n(736),u=n(779),c=n.n(u),p=n(819),d=n(531),g=n(988),f=n(480),m=n(656),h=n(884),_=n(958);let __=l.__,b=a.MenuItem;class y extends i.Component{constructor(t){super(t),(0,r.Z)(this,"getFormattedPatternsByPatternSlugs",(0,p.memoize)(t=>{let e=t.reduce((t,e)=>{let{name:n,title:r="",description:i="",html:a,pattern_meta:s}=e,l=s?.viewport_width?Number(s.viewport_width):1280;return t[n]={name:n,title:i||r,blocks:a?(0,o.parse)((0,m.Z)(a,this.props.siteInformation)):[],viewportWidth:Math.max(l,320)},t},{});return this.filterPatternsWithMissingBlocks(e)})),(0,r.Z)(this,"getBlocksForSelection",t=>{let e=this.getBlocksByPatternSlug(t);return(0,f.Z)(e,function(t){return"core/button"===t.name&&void 0!==t.attributes.url&&(t.attributes.url="#"),t})}),(0,r.Z)(this,"setPattern",t=>{(0,h.E2)(t);let{selectedCategory:e}=this.state;if(this.props.savePatternChoice(t,e),"blank"===t){this.props.insertPattern("",[]),this.props.onClose();return}let n=this.props.patterns.find(e=>e.name===t),r=(n?.categories||{}).hasOwnProperty("home"),i=this.getBlocksForSelection(t),o=r?null:n?.title||"";if(!i||!i.length){this.props.onClose();return}this.props.insertPattern(o,i),this.props.onClose()}),(0,r.Z)(this,"handleCategorySelection",t=>{this.setState({selectedCategory:t})}),(0,r.Z)(this,"closeModal",t=>{if(t?.type==="blur"){t.stopPropagation();return}(0,h.GI)(),this.props.onClose()}),(0,r.Z)(this,"getPatternGroups",()=>{if(!this.props.patterns.length)return null;let t={};for(let e of this.props.patterns)for(let n in e.categories)n in t||(t[n]=e.categories[n]);return(0,g.x)(["featured","about","blog","home","gallery","services","contact"],t)}),(0,r.Z)(this,"getPatternsForGroup",t=>{if(!this.props.patterns.length)return null;if("blank"===t)return[{name:"blank",title:"Blank",html:"",ID:null}];let e=[];for(let n of this.props.patterns)for(let r in n.categories)r===t&&e.push(n);return e}),(0,r.Z)(this,"getPatternCategories",()=>{let t=this.getPatternGroups();if(!t)return null;let e=[];for(let n in t)e.push({slug:n,name:t[n].title});return e}),(0,r.Z)(this,"renderPatternGroup",()=>{let{selectedCategory:t}=this.state;if(!t)return null;let e=this.getPatternsForGroup(t);return e?.length?this.renderPatternsList(e):null}),(0,r.Z)(this,"renderPatternsList",t=>{if(!t.length)return null;let e=this.getFormattedPatternsByPatternSlugs(this.props.patterns),n=Object.keys(e),r=t.filter(t=>n.includes(t.name));return r.length?(0,i.createElement)(_.Z,{label:__("Layout","full-site-editing"),patterns:r.map(t=>e[t.name]),onPatternSelect:this.setPattern}):null}),this.state={selectedCategory:this.getDefaultSelectedCategory()}}filterPatternsWithMissingBlocks(t){return Object.entries(t).reduce((t,e)=>{let[n,r]=e,i=(0,d.Z)(r.blocks);return i&&r.blocks.length||(t[n]=r),t},{})}componentDidMount(){this.props.isOpen&&this.trackCurrentView()}componentDidUpdate(t){!t.isOpen&&this.props.isOpen&&this.trackCurrentView(),(this.props.isWelcomeGuideActive||this.props.areTipsEnabled)&&this.props.hideWelcomeGuide()}trackCurrentView(){(0,h.Fk)("add-page")}getDefaultSelectedCategory(){let t=this.getPatternCategories();return t?.length?t[0].slug:null}getBlocksByPatternSlug(t){return this.getFormattedPatternsByPatternSlugs(this.props.patterns)?.[t]?.blocks??[]}render(){let{selectedCategory:t}=this.state,{isOpen:e,instanceId:n}=this.props;return e?(0,i.createElement)(a.Modal,{title:"",className:"page-pattern-modal",onRequestClose:this.closeModal,aria:{labelledby:`page-pattern-modal__heading-${n}`,describedby:`page-pattern-modal__description-${n}`}},(0,i.createElement)("div",{className:"page-pattern-modal__inner"},(0,i.createElement)("div",{className:"page-pattern-modal__sidebar"},(0,i.createElement)("h1",{id:`page-pattern-modal__heading-${n}`,className:c()("page-pattern-modal__heading",{"page-pattern-modal__heading--default":!this.props.title})},this.props.title||__("Add a page","full-site-editing")),(0,i.createElement)("p",{id:`page-pattern-modal__description-${n}`,className:"page-pattern-modal__description"},this.props.description||__("Pick a pre-defined layout or start with a blank page.","full-site-editing")),(0,i.createElement)("div",{className:"page-pattern-modal__button-container"},(0,i.createElement)(a.Button,{variant:"secondary",onClick:()=>this.setPattern("blank"),className:"page-pattern-modal__blank-button"},__("Blank page","full-site-editing")),(0,i.createElement)("select",{className:"page-pattern-modal__mobile-category-dropdown",value:t??void 0,onChange:t=>this.handleCategorySelection(t.currentTarget.value)},this.getPatternCategories()?.map(t=>{let{slug:e,name:n}=t;return i.createElement("option",{key:e,value:e},n)}))),(0,i.createElement)(a.VisuallyHidden,{as:"h2",id:`page-pattern-modal__list-heading-${n}`},__("Page categories","full-site-editing")),(0,i.createElement)(a.NavigableMenu,{className:"page-pattern-modal__category-list",orientation:"vertical","aria-labelledby":`page-pattern-modal__list-heading-${n}`,onNavigate:(t,e)=>this.handleCategorySelection(e.dataset.slug??null)},this.getPatternCategories()?.map(e=>{let{slug:n,name:r}=e;return i.createElement(b,{key:n,variant:"tertiary","aria-selected":n===t,"data-slug":n,onClick:()=>this.handleCategorySelection(n),className:"page-pattern-modal__category-button",tabIndex:n===t?void 0:-1},i.createElement("span",{className:"page-pattern-modal__category-item-selection-wrapper"},r))}))),(0,i.createElement)("div",{className:"page-pattern-modal__pattern-list-container"},this.renderPatternGroup()))):null}}e.Z=(0,s.withInstanceId)(y)},958:function(t,e,n){"use strict";var r=n(307),i=n(175),o=n(609),a=n(333);let s=()=>void 0;e.Z=(0,r.memo)((0,a.withInstanceId)(t=>{let{instanceId:e,label:n,patterns:l=[],onPatternSelect:u=s}=t,c=(0,a.useAsyncList)(l);return Array.isArray(l)&&l.length?(0,r.createElement)(o.BaseControl,{id:`pattern-selector-control__${e}`,label:n,className:"pattern-selector-control"},(0,r.createElement)(i.__experimentalBlockPatternsList,{blockPatterns:l,shownPatterns:c,onClickPattern:t=>u(t.name)})):null}))},531:function(t,e){"use strict";e.Z=function t(e){return!!e.find(e=>"core/missing"===e.name||!!e.innerBlocks&&!!e.innerBlocks.length&&t(e.innerBlocks))}},988:function(t,e,n){"use strict";function r(t,e){let n=Object.keys(e),r=t.filter(t=>n.includes(t)),i=n.filter(e=>!t.includes(e)),o=r.concat(i.sort());return o.reduce((t,n)=>(t[n]=e[n],t),{})}n.d(e,{x:function(){return r}})},480:function(t,e,n){"use strict";var r=n(981);e.Z=function t(e,n){return e.map(e=>((e=n((0,r.cloneBlock)(e))).innerBlocks&&e.innerBlocks.length&&(e.innerBlocks=t(e.innerBlocks,n)),e))}},656:function(t,e,n){"use strict";var r=n(736);let _x=r._x,i={Address:_x("123 Main St","default address","full-site-editing"),Phone:_x("555-555-5555","default phone number","full-site-editing"),CompanyName:_x("Your Company Name","default company name","full-site-editing"),Vertical:_x("Business","default vertical name","full-site-editing")},o={CompanyName:"title",Address:"address",Phone:"phone",Vertical:"vertical"};e.Z=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?t.replace(/{{(\w+)}}/g,(t,n)=>{let r=n in i?i[n]:"",a=n in o?o[n]:"";return e[a]||r||n}):""}},884:function(t,e,n){"use strict";n.d(e,{E2:function(){return s},Fk:function(){return o},GI:function(){return a},Z:function(){return i}}),window._tkq=window._tkq||[];let r=null,i=t=>{r=t,window._tkq.push(["identifyUser",t.userid,t.username])},o=t=>{r&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_view",{blog_id:r.blogid,source:t}])},a=()=>{r&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_dismiss",{blog_id:r.blogid}])},s=t=>{r&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_template_selected",{blog_id:r.blogid,pattern:t}])}},819:function(t){"use strict";t.exports=window.lodash},175:function(t){"use strict";t.exports=window.wp.blockEditor},981:function(t){"use strict";t.exports=window.wp.blocks},609:function(t){"use strict";t.exports=window.wp.components},333:function(t){"use strict";t.exports=window.wp.compose},818:function(t){"use strict";t.exports=window.wp.data},307:function(t){"use strict";t.exports=window.wp.element},694:function(t){"use strict";t.exports=window.wp.hooks},736:function(t){"use strict";t.exports=window.wp.i18n},462:function(t){"use strict";t.exports=window.wp.nux},817:function(t){"use strict";t.exports=window.wp.plugins},666:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(795);function i(t,e,n){return(e=(0,r.Z)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},896:function(t,e,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,{Z:function(){return r}})},745:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(522);function i(t,e){if("object"!==(0,r.Z)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==(0,r.Z)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},795:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(522),i=n(745);function o(t){var e=(0,i.Z)(t,"string");return"symbol"===(0,r.Z)(e)?e:String(e)}},522:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,{Z:function(){return r}})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r);var t=n(307),e=n(884),i=n(818),o=n(817),a=n(28),s=n(168);n(334);let{templates:l=[],tracksUserData:u,screenAction:c}=window.starterPageTemplatesConfig??{};u&&(0,e.Z)(u),"add"===c&&(0,i.dispatch)(s.I).setOpenState("OPEN_FROM_ADD_PAGE"),(0,o.registerPlugin)("page-patterns",{render:()=>(0,t.createElement)(a.P,{patterns:l}),icon:void 0})}(),window.EditingToolkit=r}();
//# sourceMappingURL=starter-page-templates.min.js.map