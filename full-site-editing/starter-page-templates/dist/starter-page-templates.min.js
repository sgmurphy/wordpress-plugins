(()=>{var e={870:(e,t)=>{var r;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var s=i.apply(null,r);s&&e.push(s)}}else if("object"===a){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0!==(r=(function(){return i}).apply(t,[]))&&(e.exports=r)}()},499:()=>{},626:(e,t,r)=>{"use strict";r.d(t,{i:()=>d});var n=r(575),i=r(468),a=r(263),s=r(143),o=r(619),l=r(723),c=r(496);r(518);let __=l.__,p="isInsertingPagePattern",u="automattic/full-site-editing/inserting-pattern";function d(e){let{setOpenState:t}=(0,s.useDispatch)(c.L),{setUsedPageOrPatternsModal:r}=(0,s.useDispatch)("automattic/wpcom-welcome-guide"),{replaceInnerBlocks:l}=(0,s.useDispatch)("core/block-editor"),{editPost:d}=(0,s.useDispatch)("core/editor"),{toggleFeature:g}=(0,s.useDispatch)("core/edit-post"),{disableTips:m}=(0,s.useDispatch)("core/nux"),h=(0,s.useSelect)(e=>{let{isOpen:t,isPatternPicker:r}=e(c.L);return{isOpen:t(),isWelcomeGuideActive:e("core/edit-post").isFeatureActive("welcomeGuide"),areTipsEnabled:!!e("core/nux")&&e("core/nux").areTipsEnabled(),...r()&&{title:__("Choose a Pattern","full-site-editing"),description:__("Pick a pre-defined layout or continue with a blank page","full-site-editing")}}},[]),{getMeta:_,postContentBlock:f}=(0,s.useSelect)(e=>{let t=e("core/editor").getBlocks();return{getMeta:()=>e("core/editor").getEditedPostAttribute("meta"),postContentBlock:t.find(e=>"a8c/post-content"===e.name)}},[]),b=(0,i.useCallback)((e,t)=>{let r=_(),n=Array.isArray(r._wpcom_template_layout_category)&&r._wpcom_template_layout_category||[];d({meta:{...r,_starter_page_template:e,_wpcom_template_layout_category:[...n,t]}})},[d,_]),y=(0,i.useCallback)((e,t)=>{(0,o.addFilter)(p,u,()=>!0),e&&d({title:e}),l(f?f.clientId:"",t,!1),(0,o.removeFilter)(p,u)},[d,f,l]),{isWelcomeGuideActive:w,areTipsEnabled:v}=h,P=(0,i.useCallback)(()=>{w?g("welcomeGuide"):v&&m()},[v,m,w,g]),k=(0,i.useCallback)(()=>{t("CLOSED"),r?.()},[t,r]);return(0,i.createElement)(a.A,(0,n.A)({},h,{onClose:k,savePatternChoice:b,insertPattern:y,hideWelcomeGuide:P},e))}},496:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});var n=r(143);let i=(0,n.createReduxStore)("automattic/starter-page-layouts",{reducer:(e="CLOSED",{type:t,...r})=>"SET_IS_OPEN"===t?r.openState:e,actions:{setOpenState:e=>({type:"SET_IS_OPEN",openState:e||"CLOSED"})},selectors:{isOpen:e=>"CLOSED"!==e,isPatternPicker:e=>"OPEN_FOR_BLANK_CANVAS"===e}});(0,n.register)(i)},263:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n=r(586),i=r(468),a=r(997),s=r(427),o=r(491),l=r(723),c=r(870),p=r.n(c),u=r(325),d=r(64),g=r(861),m=r(809),h=r(341),_=r(213),f=r(611);let __=l.__,b=s.MenuItem;class y extends i.Component{constructor(e){super(e),(0,n.A)(this,"getFormattedPatternsByPatternSlugs",(0,u.memoize)(e=>{let t=e.reduce((e,{name:t,title:r="",description:n="",html:i,pattern_meta:s})=>{let o=s?.viewport_width?Number(s.viewport_width):1280;return e[t]={name:t,title:n||r,blocks:i?(0,a.parse)((0,h.A)(i,this.props.siteInformation)):[],viewportWidth:Math.max(o,320)},e},{});return this.filterPatternsWithMissingBlocks(t)})),(0,n.A)(this,"getBlocksForSelection",e=>{let t=this.getBlocksByPatternSlug(e);return(0,m.A)(t,function(e){return"core/button"===e.name&&void 0!==e.attributes.url&&(e.attributes.url="#"),e})}),(0,n.A)(this,"setPattern",e=>{(0,_.m3)(e);let{selectedCategory:t}=this.state;if(this.props.savePatternChoice(e,t),"blank"===e){this.props.insertPattern("",[]),this.props.onClose();return}let r=this.props.patterns.find(t=>t.name===e),n=(r?.categories||{}).hasOwnProperty("home"),i=this.getBlocksForSelection(e),a=n?null:r?.title||"";if(!i||!i.length){this.props.onClose();return}this.props.insertPattern(a,i),this.props.onClose()}),(0,n.A)(this,"handleCategorySelection",e=>{this.setState({selectedCategory:e})}),(0,n.A)(this,"closeModal",e=>{if(e?.type==="blur"){e.stopPropagation();return}(0,_.mk)(),this.props.onClose()}),(0,n.A)(this,"getPatternGroups",()=>{if(!this.props.patterns.length)return null;let e={};for(let t of this.props.patterns)for(let r in t.categories)r in e||(e[r]=t.categories[r]);return(0,g.W)(["featured","about","blog","home","gallery","services","contact"],e)}),(0,n.A)(this,"getPatternsForGroup",e=>{if(!this.props.patterns.length)return null;if("blank"===e)return[{name:"blank",title:"Blank",html:"",ID:null}];let t=[];for(let r of this.props.patterns)for(let n in r.categories)n===e&&t.push(r);return t}),(0,n.A)(this,"getPatternCategories",()=>{let e=this.getPatternGroups();if(!e)return null;let t=[];for(let r in e)t.push({slug:r,name:e[r].title});return t}),(0,n.A)(this,"renderPatternGroup",()=>{let{selectedCategory:e}=this.state;if(!e)return null;let t=this.getPatternsForGroup(e);return t?.length?this.renderPatternsList(t):null}),(0,n.A)(this,"renderPatternsList",e=>{if(!e.length)return null;let t=this.getFormattedPatternsByPatternSlugs(this.props.patterns),r=Object.keys(t),n=e.filter(e=>r.includes(e.name));return n.length?(0,i.createElement)(f.A,{label:__("Layout","full-site-editing"),patterns:n.map(e=>t[e.name]),onPatternSelect:this.setPattern}):null}),this.state={selectedCategory:this.getDefaultSelectedCategory()}}filterPatternsWithMissingBlocks(e){return Object.entries(e).reduce((e,[t,r])=>{let n=(0,d.A)(r.blocks);return n&&r.blocks.length||(e[t]=r),e},{})}componentDidMount(){this.props.isOpen&&this.trackCurrentView()}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&this.trackCurrentView(),(this.props.isWelcomeGuideActive||this.props.areTipsEnabled)&&this.props.hideWelcomeGuide()}trackCurrentView(){(0,_.$3)("add-page")}getDefaultSelectedCategory(){let e=this.getPatternCategories();return e?.length?e[0].slug:null}getBlocksByPatternSlug(e){return this.getFormattedPatternsByPatternSlugs(this.props.patterns)?.[e]?.blocks??[]}render(){let{selectedCategory:e}=this.state,{isOpen:t,instanceId:r}=this.props;return t?(0,i.createElement)(s.Modal,{title:"",className:"page-pattern-modal",onRequestClose:this.closeModal,aria:{labelledby:`page-pattern-modal__heading-${r}`,describedby:`page-pattern-modal__description-${r}`}},(0,i.createElement)("div",{className:"page-pattern-modal__inner"},(0,i.createElement)("div",{className:"page-pattern-modal__sidebar"},(0,i.createElement)("h1",{id:`page-pattern-modal__heading-${r}`,className:p()("page-pattern-modal__heading",{"page-pattern-modal__heading--default":!this.props.title})},this.props.title||__("Add a page","full-site-editing")),(0,i.createElement)("p",{id:`page-pattern-modal__description-${r}`,className:"page-pattern-modal__description"},this.props.description||__("Pick a pre-defined layout or start with a blank page.","full-site-editing")),(0,i.createElement)("div",{className:"page-pattern-modal__button-container"},(0,i.createElement)(s.Button,{variant:"secondary",onClick:()=>this.setPattern("blank"),className:"page-pattern-modal__blank-button"},__("Blank page","full-site-editing")),(0,i.createElement)("select",{className:"page-pattern-modal__mobile-category-dropdown",value:e??void 0,onChange:e=>this.handleCategorySelection(e.currentTarget.value)},this.getPatternCategories()?.map(({slug:e,name:t})=>i.createElement("option",{key:e,value:e},t)))),(0,i.createElement)(s.VisuallyHidden,{as:"h2",id:`page-pattern-modal__list-heading-${r}`},__("Page categories","full-site-editing")),(0,i.createElement)(s.NavigableMenu,{className:"page-pattern-modal__category-list",orientation:"vertical","aria-labelledby":`page-pattern-modal__list-heading-${r}`,onNavigate:(e,t)=>this.handleCategorySelection(t.dataset.slug??null)},this.getPatternCategories()?.map(({slug:t,name:r})=>i.createElement(b,{key:t,variant:"tertiary","aria-selected":t===e,"data-slug":t,onClick:()=>this.handleCategorySelection(t),className:"page-pattern-modal__category-button",tabIndex:t===e?void 0:-1},i.createElement("span",{className:"page-pattern-modal__category-item-selection-wrapper"},r))))),(0,i.createElement)("div",{className:"page-pattern-modal__pattern-list-container"},this.renderPatternGroup()))):null}}let w=(0,o.withInstanceId)(y)},611:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(468),i=r(715),a=r(427),s=r(491);let o=()=>void 0,l=(0,n.memo)((0,s.withInstanceId)(({instanceId:e,label:t,patterns:r=[],onPatternSelect:l=o})=>{let c=(0,s.useAsyncList)(r);return Array.isArray(r)&&r.length?(0,n.createElement)(a.BaseControl,{id:`pattern-selector-control__${e}`,label:t,className:"pattern-selector-control"},(0,n.createElement)(i.__experimentalBlockPatternsList,{blockPatterns:r,shownPatterns:c,onClickPattern:e=>l(e.name)})):null}))},64:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function e(t){return!!t.find(t=>"core/missing"===t.name||!!t.innerBlocks&&!!t.innerBlocks.length&&e(t.innerBlocks))}},861:(e,t,r)=>{"use strict";function n(e,t){let r=Object.keys(t),n=e.filter(e=>r.includes(e)),i=r.filter(t=>!e.includes(t)),a=n.concat(i.sort());return a.reduce((e,r)=>(e[r]=t[r],e),{})}r.d(t,{W:()=>n})},809:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(997);let i=function e(t,r){return t.map(t=>((t=r((0,n.cloneBlock)(t))).innerBlocks&&t.innerBlocks.length&&(t.innerBlocks=e(t.innerBlocks,r)),t))}},341:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(723);let _x=n._x,i={Address:_x("123 Main St","default address","full-site-editing"),Phone:_x("555-555-5555","default phone number","full-site-editing"),CompanyName:_x("Your Company Name","default company name","full-site-editing"),Vertical:_x("Business","default vertical name","full-site-editing")},a={CompanyName:"title",Address:"address",Phone:"phone",Vertical:"vertical"},s=(e,t={})=>e?e.replace(/{{(\w+)}}/g,(e,r)=>{let n=r in i?i[r]:"",s=r in a?a[r]:"";return t[s]||n||r}):""},213:(e,t,r)=>{"use strict";r.d(t,{$3:()=>a,br:()=>i,m3:()=>o,mk:()=>s}),window._tkq=window._tkq||[];let n=null,i=e=>{n=e,window._tkq.push(["identifyUser",e.userid,e.username])},a=e=>{n&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_view",{blog_id:n.blogid,source:e}])},s=()=>{n&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_dismiss",{blog_id:n.blogid}])},o=e=>{n&&window._tkq.push(["recordEvent","a8c_full_site_editing_template_selector_template_selected",{blog_id:n.blogid,pattern:e}])}},325:e=>{"use strict";e.exports=window.lodash},715:e=>{"use strict";e.exports=window.wp.blockEditor},997:e=>{"use strict";e.exports=window.wp.blocks},427:e=>{"use strict";e.exports=window.wp.components},491:e=>{"use strict";e.exports=window.wp.compose},143:e=>{"use strict";e.exports=window.wp.data},468:e=>{"use strict";e.exports=window.wp.element},619:e=>{"use strict";e.exports=window.wp.hooks},723:e=>{"use strict";e.exports=window.wp.i18n},518:e=>{"use strict";e.exports=window.wp.nux},279:e=>{"use strict";e.exports=window.wp.plugins},586:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(205);function i(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},575:(e,t,r)=>{"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{A:()=>n})},824:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(545);function i(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=(0,n.A)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},205:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(545),i=r(824);function a(e){var t=(0,i.A)(e,"string");return"symbol"==(0,n.A)(t)?t:String(t)}},545:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>n})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n);var e=r(468),t=r(213),i=r(143),a=r(279),s=r(626),o=r(496);r(499);let{templates:l=[],tracksUserData:c,screenAction:p}=window.starterPageTemplatesConfig??{};c&&(0,t.br)(c),"add"===p&&(0,i.dispatch)(o.L).setOpenState("OPEN_FROM_ADD_PAGE"),(0,a.registerPlugin)("page-patterns",{render:()=>(0,e.createElement)(s.i,{patterns:l}),icon:void 0})})(),window.EditingToolkit=n})();
//# sourceMappingURL=starter-page-templates.min.js.map