jQuery(document).ready(function(e){var n,o,t,c,d,s=e("#podmotor_account_api_token"),a=e(".js-parent-category"),{}=wp.i18n;function l(){var s=e(this),n=s.data("subcategory"),a=s.find("option:selected").text();if(!n||!a)return!1;s=e("#"+n);s.find("optgroup").hide();n=s.find('optgroup[label="'+a+'"]');n.length&&"-- None --"!==a?n.show():s.val("")}function r(){return e(d+" input[type=checkbox]:checked")}function i(){t.prop("disabled",0===r().length)}o=e(".castos-connect"),0<s.length&&(s.length&&o.show(),s.on("focus change paste keydown keyup",function(){s.val()?o.prop("disabled","").removeClass("disabled"):o.prop("disabled","disabled")}),s.on("focus",function(){e(".connect-castos-message").html("").removeClass("error")}),o.on("click",function(s){s.preventDefault(),s.stopPropagation(),o.prop("disabled","disabled"),o.trigger("connecting");var n=e("#podmotor_account_api_token").val(),s=e("#podcast_settings_tab_nonce").val(),a=e(".connect-castos-message");a.length?a.html("").removeClass("error"):(a=e('<span class="connect-castos-message"></span>'),o.parent().append(a)),o.addClass("loader"),e.ajax({method:"GET",url:ajaxurl,data:{action:"connect_castos",api_token:n,nonce:s}}).done(function(s){o.trigger("connected",s),"success"===s.status?(o.addClass("connected"),o.data("no-reload")?a.html(s.message):window.location.reload()):(o.removeClass("loader"),a.addClass("error"),a.html(s.message))})})),(n=e("#disconnect_castos")).on("click",function(s){!0===confirm("If you disconnect from Castos hosting you will no longer be able to upload media files to the Castos hosting platform. If youâ€™re no longer a Castos customer your media files may no longer be available to your listeners.")&&(n.addClass("loader"),n.parent().find("label").remove(),e.ajax({method:"GET",url:ajaxurl,data:{action:"disconnect_castos",nonce:e("#podcast_settings_tab_nonce").val()}}).done(function(s){window.location.reload()}))}),a.length&&(a.each(l),a.on("change",l)),t=e("#trigger_sync"),c=e("#podcast_settings_tab_nonce").val(),d=".js-sync-podcast",t.length&&(i(),e(d+" input[type=checkbox]").change(function(){i()}),t.click(function(){t.addClass("loader");var n=e(".ssp-sync-msg"),s=r(),a=[];n.length||(n=e('<span class="ssp-sync-msg"></span>'),t.parent().append(n)),s.each(function(){a.push(e(this).val())}),e.ajax({method:"GET",url:ajaxurl,data:{action:"sync_castos",nonce:c,podcasts:a}}).done(function(s){var a='<div class="sync-overview">'+s.data.msg+"</div>";e.each(s.data.podcasts,function(s,n){!function(s,n,a=""){(s=s.closest(d).find(".js-sync-status")).removeClass("synced_with_errors success none sending failed").addClass(n),a&&s.find("span").html(a)}(e("#podcasts_sync_"+s),n.status,n.title),a+='<div class="sync-msg">'+n.msg+"</div>"}),t.removeClass("loader"),n.addClass(s.success?"success":"error"),n.html(a)})}))});