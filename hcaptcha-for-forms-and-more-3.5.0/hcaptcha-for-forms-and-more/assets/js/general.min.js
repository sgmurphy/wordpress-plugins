(()=>{var e=function(e){var t="#hcaptcha-message",a=e(t),n=e("form.hcaptcha-general"),c=e('[name="hcaptcha_settings[site_key]"]'),s=e('[name="hcaptcha_settings[secret_key]"]'),i=e('[name="hcaptcha_settings[theme]"]'),o=e('[name="hcaptcha_settings[size]"]'),r=e('[name="hcaptcha_settings[language]"]'),h=e('[name="hcaptcha_settings[mode]"]'),l=e('[name="hcaptcha_settings[custom_themes][]"]'),d=e('[name="hcaptcha_settings[config_params]"]'),p=n.find("#submit"),u={},m=c.val(),f=s.val();function v(){a.remove(),e('<div id="hcaptcha-message"></div>').insertAfter("#hcaptcha-options h2"),a=e(t)}function b(t,n){a.removeClass(),a.addClass(n+" notice is-dismissible");var c=t.split("\n").map((function(e){return"<p>".concat(e,"</p>")}));a.html(c.join("")),e(document).trigger("wp-updates-notice-added");var s=e("#wpwrap").position().top;e("html, body").animate({scrollTop:a.offset().top-s-parseInt(a.css("margin-bottom"))},1e3)}function g(e){b(e,"notice-error")}function C(e){var t=Object.assign(hCaptcha.getParams(),e);hCaptcha.setParams(t);var a=document.querySelector("#hcaptcha-options .h-captcha");for(var n in a.innerHTML="",e)a.setAttribute("data-".concat(n),"".concat(e[n]));hCaptcha.bindEvents()}function y(){var e,t=d.val().trim();t=t||null;try{e=JSON.parse(t)}catch(e){return d.css("background-color","#ffabaf"),p.attr("disabled",!0),void g("Bad JSON!")}l.prop("checked")||(e={sitekey:c.val(),theme:i.val(),size:o.val(),hl:r.val()}),C(e)}function j(){v(),p.attr("disabled",!0);var t={action:HCaptchaGeneralObject.checkConfigAction,nonce:HCaptchaGeneralObject.nonce,mode:h.val(),siteKey:c.val(),secretKey:s.val(),"h-captcha-response":e('textarea[name="h-captcha-response"]').val()};return e.post({url:HCaptchaGeneralObject.ajaxUrl,data:t}).done((function(e){e.success?(!function(e){b(e,"notice-success")}(e.data),p.attr("disabled",!1)):g(e.data)})).fail((function(e){g(e.statusText)})).always((function(){C({})}))}function O(){c.val()===m&&s.val()===f?(v(),p.attr("disabled",!1)):(g(HCaptchaGeneralObject.checkConfigNotice),p.attr("disabled",!0))}u[HCaptchaGeneralObject.modeLive]=HCaptchaGeneralObject.siteKey,u[HCaptchaGeneralObject.modeTestPublisher]=HCaptchaGeneralObject.modeTestPublisherSiteKey,u[HCaptchaGeneralObject.modeTestEnterpriseSafeEndUser]=HCaptchaGeneralObject.modeTestEnterpriseSafeEndUserSiteKey,u[HCaptchaGeneralObject.modeTestEnterpriseBotDetected]=HCaptchaGeneralObject.modeTestEnterpriseBotDetectedSiteKey,e("#check_config").on("click",(function(e){e.preventDefault(),j()})),c.on("change",(function(t){C({sitekey:e(t.target).val()}),O()})),s.on("change",(function(){O()})),i.on("change",(function(t){C({theme:e(t.target).val()})})),o.on("change",(function(t){var a=e("#hcaptcha-invisible-notice"),n=e(t.target).val();"invisible"===n?a.show():a.hide(),C({size:n})})),r.on("change",(function(t){C({hl:e(t.target).val()})})),h.on("change",(function(t){var a=e(t.target).val();u.hasOwnProperty(a)&&(a===HCaptchaGeneralObject.modeLive?(c.attr("disabled",!1),s.attr("disabled",!1)):(c.attr("disabled",!0),s.attr("disabled",!0)),C({sitekey:u[a]}))})),l.on("change",(function(){y()})),d.on("blur",(function(){y()})),d.on("focus",(function(){d.css("background-color","unset"),p.attr("disabled",!1)}))};window.hCaptchaGeneral=e,jQuery(document).ready(e)})();