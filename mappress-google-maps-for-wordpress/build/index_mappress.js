(()=>{var t={327:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappAutocomplete:()=>m});var o=n(55);const a=React.createElement,{Fragment:i,useCallback:l,useEffect:s,useLayoutEffect:r,useMemo:p,useRef:c,useState:u}=React,{__,sprintf}=wp.i18n;function m(e){e={buttonLabel:null,className:"",delay:null,focus:!1,onFetch:null,onSelect:null,placeholder:"",selected:null,suggestions:[],title:"",value:null,...e};const t=c(null),n=c(null),[i,l]=u({isOpen:!1,searchTerm:e.value?e.value:"",selected:null});function r(e){l((t=>({...t,...e})))}function p(e){if(e){}else i.isOpen&&r({isOpen:!1})}function m(){let t;r({isOpen:!1}),e.suggestions&&(t=null==i.selected?e.suggestions[0]:e.suggestions[i.selected]),e.onSelect({suggestion:t,value:d})}(0,o.useClickOutside)(t,(()=>p())),(0,o.useDebounce)((()=>{e.onFetch&&e.onFetch(i.searchTerm)}),[i.searchTerm],e.delay),s((()=>{e.focus&&n.current&&n.current.focus()}),[]),s((()=>{i.map&&setMapTypeId(e.mapTypeId)}),[e.mapTypeId,i.map]);const d=i.selected>=0&&e.suggestions&&e.suggestions[i.selected]?e.suggestions[i.selected].value:i.searchTerm;return a("div",{className:"mapp-autocomplete",ref:t},a("div",{className:"mapp-autocomplete-wrapper"},a("input",{className:e.className,onChange:t=>{!function(t){r({selected:null,searchTerm:t}),e.onChange&&e.onChange(t)}(t.target.value)},onKeyDownCapture:t=>function(t){if("Escape"!=t.code)switch(t.stopPropagation(),t.code){case"Backspace":r({isOpen:i.searchTerm.length>1});break;case"Enter":m();break;case"ArrowUp":if(t.preventDefault(),e.suggestions&&0!=i.selected){const t=null==i.selected?e.suggestions.length-1:i.selected-1;e.suggestions[t]&&r({isOpen:!0,selected:t})}else r({selected:null});break;case"ArrowDown":if(e.suggestions&&i.selected<e.suggestions.length-1){const t=null==i.selected?0:i.selected+1;e.suggestions[t]&&r({isOpen:!0,selected:t})}else r({selected:null});break;case"Tab":p();break;case"AltLeft":case"AltRight":case"ControlLeft":case"ControlRight":case"MetaLeft":case"MetaRight":break;default:r({isOpen:!0})}else i.isOpen&&(t.stopPropagation(),r({isOpen:!1}))}(t),placeholder:e.placeholder,ref:n,title:e.title,type:"text",value:d}),i.isOpen&&function(){if(e.suggestions&&e.suggestions.length)return a("div",{className:"mapp-autocomplete-list"},e.suggestions.map(((t,n)=>{const o="mapp-autocomplete-item"+(i.selected==n?" mapp-selected":"");return a("div",{className:o,index:n,key:n,onClick:()=>function(t,n){r({isOpen:!1,selected:n}),e.onSelect({suggestion:t})}(t,n)},t.value)})))}()),e.buttonLabel&&a("div",{className:"mapp-submit-button",onClick:()=>m()},e.buttonLabel))}},393:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Checkbox:()=>p,Checkboxes:()=>c,Container:()=>r,Control:()=>s,Input:()=>u,Radio:()=>m,Radios:()=>d,Select:()=>g,Textarea:()=>f});const o=React.createElement,{Fragment:a,useEffect:i,useState:l}=React;function s({controlType:e,value:t,...n}){const a=e=>"string"==typeof e?e.split(",").map((e=>e.trim())):e,i=e=>Array.isArray(e)?e.sort().join(","):e;switch(e){case"checkbox":return o(p,{checked:i(t),...n});case"checkboxes":return o(c,{selected:a(t),...n});case"radios":return o(d,{selected:a(t),...n});case"select":return o(g,{value:i(t),...n});case"textarea":return o(f,{value:i(t),...n});default:return o(u,{value:i(t),...n})}}function r({className:e,help:t,label:n,labelLeft:i,labelRight:l,labelTop:s,type:r,...p}){let c="mapp-control";r&&(c+=" mapp-control-"+r),e&&(c+=" "+e);const u=t&&t.text?o("div",{className:"mapp-help-text"+(r?" mapp-help-"+r:"")},t.text):null,m=Array.isArray(p.children)?a:"label";return o("div",{className:c},s&&o("div",{className:"mapp-label-top"},s),o(m,null,i?o("span",{className:"mapp-label-left",dangerouslySetInnerHTML:{__html:i}}):null,p.children,n||l?o("span",{className:"mapp-label-right",dangerouslySetInnerHTML:{__html:n||l}}):null),u)}function p({checked:e,className:t,disabled:n,onChange:a,value:i,...l}){return o(r,{className:t,type:"checkbox",...l},o("input",{checked:void 0!==e&&!1!==e&&e,disabled:n,onChange:e=>a(e.target.checked),type:"checkbox",value:i}))}function c({className:e,label:t,onChange:n,options:a,selected:i,...l}){let s=i||[];return o(r,{className:e,type:"checkboxes",...l},a?.map(((e,t)=>{const a=s.indexOf(e.value);return o(p,{key:t,label:e.label?e.label:e.value,checked:a>=0,disabled:e.disabled,onChange:t=>{t&&-1==a?s=s.concat(e.value):!t&&a>=0&&s.splice(a,1),n(s)},value:e.value})})))}function u({autoFocus:e,className:t,disabled:n,max:a,min:i,name:l,onBlur:s,onChange:p,placeholder:c,size:u,title:m,trim:d,type:g,value:f,...h}){return o(r,{className:t,type:"input",...h},o("input",{autoFocus:e,disabled:n,max:a,min:i,name:l,onBlur:e=>{if(s){const t=d?e.target.value.trim():e.target.value;s(t)}},onChange:e=>{if(p){const t=d?e.target.value.trim():e.target.value;p(t)}},placeholder:c,size:u,title:m,type:g||"text",value:f||""}))}function m({checked:e,className:t,disabled:n,onChange:a,value:i,...l}){return o(r,{className:t,type:"radio",...l},o("input",{checked:e,disabled:n,onChange:e=>a(e.target.value),type:"radio",value:i}))}function d({className:e,label:t,onChange:n,options:a,placeholder:i,selected:l,...s}){let p=a?[...a]:[];return void 0!==i&&p.unshift({value:"",label:i}),o(r,{className:e,type:"radios",...s},p.map(((e,t)=>{if(!e.hide)return o(m,{key:t,value:e.value,checked:l==e.value||null==l&&""==e.value,onChange:t=>n(e.value),disabled:e.disabled,label:e.label?e.label:e.value})})))}function g({className:e,onChange:t,options:n,placeholder:a,value:i,...l}){let s=n?[...n]:[];void 0!==a&&s.unshift({value:"",label:a});let p="";return s.map((e=>{p+='<option value="'+e.value+'"'+(e.value==i?" selected":"")+(e.disabled?" disabled":"")+">"+e.label+"</option>"})),o(r,{className:e,type:"select",...l},o("select",{value:null!=i?i:"",onChange:e=>t(e.target.value)},s.map(((e,t)=>o("option",{key:t,value:e.value,disabled:e.disabled,dangerouslySetInnerHTML:{__html:e.label}})))))}function f({className:e,onChange:t,placeholder:n,rows:a,value:i,...l}){return o(r,{className:e,type:"textarea",...l},o("textarea",{onChange:e=>t(e.target.value),rows:a,value:null!=i?i:""}))}},875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappDialog:()=>c});n(760);const o=React.createElement,a=ReactDOM.createPortal,{Fragment:i,useEffect:l,useLayoutEffect:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e){e={className:null,isModal:null,noCancel:null,noPadding:null,onClose:null,title:null,toolbar:null,...e};const t=React.createRef(),n=React.createRef();l((()=>{const o=t.current,a=getComputedStyle(document.body).overflow,i=o.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),l=i[0],s=i[i.length-1],r=e=>{"Tab"===e.key&&(e.shiftKey&&document.activeElement===l?(e.preventDefault(),s.focus()):e.shiftKey||document.activeElement!==s||(e.preventDefault(),l.focus()))};return e.isModal?o.showModal():(n.current=document.activeElement,o.show(),o.addEventListener("keydown",r)),"hidden"!=a&&document.body.classList.add("mapp-dialog-noscroll"),()=>{"hidden"!=a&&document.body.classList.remove("mapp-dialog-noscroll"),n.current&&n.current.focus(),e.isModal||o.removeEventListener("keydown",r),o.close()}}),[]);let s="mapp-dialog";return s+=e.isModal?"":" mapp-gt-dialog",s+=e.noPadding?" mapp-dialog-nopad":"",s+=e.className?" "+e.className:"",a(o(i,null,o("dialog",{className:s,ref:t,onClick:n=>function(n){if(n.clientY&&n.clientX){const o=t.current.getBoundingClientRect();(n.clientY<o.top||n.clientY>o.bottom||n.clientX<o.left||n.clientX>o.right)&&(n.stopPropagation(),e.onClose())}}(n),onClose:t=>function(t){t.stopPropagation(),e.onClose()}(t),onKeyDown:t=>function(t){"Escape"==t.key&&(t.stopPropagation(),e.isModal||e.onClose())}(t),tabIndex:0},e.isModal?null:o("div",{className:"mapp-gt-dialog-backdrop"}),o("div",{className:"mapp-dialog-close",onClick:()=>e.onClose()},"Ã—"),function(){if(e.title)return o("div",{className:"mapp-dialog-title"},e.title)}(),o("div",{className:"mapp-dialog-content"},e.children),function(){if(e.toolbar)return o("div",{className:"mapp-dialog-toolbar"},e.toolbar)}())),document.body)}},45:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappDirections:()=>c});var o=n(760);const a=React.createElement,{Fragment:i,useEffect:l,useLayoutEffect:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e){e={from:null,onClose:null,to:null,...e};const[t,n]=p({from:e.from?e.from:"",to:e.to?e.to:""});function i(e){n((t=>({...t,...e})))}function l(){e.onClose&&e.onClose()}function s(){o.mappLib.getDirections(t.from,t.to),l()}function r(e){13==e?s():27==e&&l()}return a("div",{className:"mapp-directions"},a("div",{className:"mapp-close",onClick:()=>l()}),a("div",null,a("input",{className:"mapp-dir-from",onChange:e=>i({from:e.target.value}),onKeyPress:e=>r(e.which),tabIndex:"1",placeholder:__("My location","mappress-google-maps-for-wordpress"),value:t.from}),a("div",{className:"mapp-dir-arrows",onClick:()=>{i({from:t.to,to:t.from})}})),a("div",null,a("input",{className:"mapp-dir-to",onChange:e=>i({to:e.target.value}),onKeyPress:e=>r(e.which),tabIndex:"2",value:t.to})),a("div",{className:"mapp-dir-toolbar"},a("div",{className:"mapp-submit-button",onClick:()=>s()},__("Get Directions","mappress-google-maps-for-wordpress"))))}},900:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappFilters:()=>m});var o=n(393),a=n(760),i=n(55);const l=React.createElement,{Fragment:s,useEffect:r,useLayoutEffect:p,useRef:c,useState:u}=React,{__,sprintf}=wp.i18n,m=e=>{e={onChange:null,filterType:null,name:null,poiCount:null,...e};const[t,n]=u({selected:e.selected?e.selected:{},filters:[],isBusy:!0,isOpen:null});function p(e){n((t=>({...t,...e})))}const m=c();function d(){p({isOpen:!t.isOpen})}function g(e){let n=e.format,a="";return"radios"==n?a=e.placeholder?e.placeholder:__("All","mappress-google-maps-for-wordpress"):"select"!=n&&"input"!=n||(a=e.placeholder?e.placeholder:""),l(o.Control,{controlType:n,onChange:n=>function(e,n){const o={...t.selected};!n||Array.isArray(n)&&0==n.length?delete o[e]:o[e]=n,p({selected:o})}(e.key,n),options:e.values,placeholder:a,value:t.selected[e.key]})}return(0,i.useClickOutside)({current:t.isOpen&&m.current?m.current:null},(()=>{p({isOpen:null})})),(0,i.useDebounce)((()=>{e.onChange&&e.onChange(t.selected)}),[t.selected],"poi"==e.filterType?0:500),r((()=>{"poi"==e.filterType?p({filters:mappl10n.options.poiFields,isBusy:!1}):(p({isBusy:!0}),a.mappLib.ajax({method:"GET",data:{action:"mapp_filters_get",nonce:mappl10n.options.nonce,type:e.filterType,name:e.name},callback:e=>{e&&"OK"==e.status?p({filters:e.data}):console.error("MapPress: unable to fetch filters"),p({isBusy:!1})}}))}),[]),l("div",{className:"mapp-filters",ref:m},l("div",{className:"mapp-filter mapp-filter-all"+(t.isOpen?" mapp-filter-open":"")},l("div",{className:"mapp-button mapp-button-caret mapp-filter-button"+(t.isBusy?" mapp-button-disabled":""),onClick:()=>d()},__("Filter","mappress-google-maps-for-wordpress")),l("div",{className:"mapp-filter-dropdown"},(Array.isArray(t.filters)&&t.filters,l("div",{className:"mapp-filter-values"},t.filters.map((e=>l(s,{key:e.key},l("div",{className:"mapp-filter-"+e.key},l("div",{className:"mapp-filter-label"},e.label),g(e))))))),function(t){let n=sprintf(e.poiCount>1?__("%d Results","mappress-google-maps-for-wordpress"):__("%d Result","mappress-google-maps-for-wordpress"),e.poiCount?e.poiCount:0);return l("div",{className:"mapp-filter-toolbar"},l("div",{className:"mapp-link-button",onClick:()=>{p({selected:{}})}},__("Reset","mappress-google-maps-for-wordpress")),l("div",{className:"mapp-filter-count"},n),l("div",{className:"mapp-submit-button",onClick:()=>d()},__("Done","mappress-google-maps-for-wordpress")))}())))}},296:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useGeocoding:()=>u});const o=n(760).mappLib.toJSON,{Fragment:a,useCallback:i,useEffect:l,useLayoutEffect:s,useRef:r,useState:p}=(React.createElement,React),{__,sprintf}=wp.i18n,c={google:function(){this.token=null;const e=document.createElement("div");this.placesService=new google.maps.places.PlacesService(e),this.autocompleteService=new google.maps.places.AutocompleteService}};c.google.prototype={getDetails:function({suggestion:e,callback:t}){this.token=this.token?this.token:new google.maps.places.AutocompleteSessionToken,this.token=null;var n={fields:["formatted_address","name","geometry"],placeId:e.place_id,sessionToken:this.token};this.placesService.getDetails(n,(function(e,n){if("OK"==n&&e&&e.geometry){if(e.geometry.location&&(e.geometry.location=o(e.geometry.location)),e.geometry.viewport){var a=o(e.geometry.viewport);e.geometry.viewport={sw:{lat:a.south,lng:a.west},ne:{lat:a.north,lng:a.east}}}t(e)}else t(null)}))},getFirstPrediction:function({map:e,value:t,callback:n}){this.getPredictions({map:e,value:t,callback:e=>{e&&Array.isArray(e)?this.getDetails({suggestion:e[0],callback:e=>n(e)}):n(null)}})},getPredictions:function({map:e,value:t,includeBusinesses:n,callback:o}){this.token=this.token?this.token:new google.maps.places.AutocompleteSessionToken;var a=e?e.getBounds():null;"leaflet"==mappl10n.options.engine&&(a=new google.maps.LatLngBounds(new google.maps.LatLng(a.getSouthWest().lat,a.getSouthWest().lng),new google.maps.LatLng(a.getNorthEast().lat,a.getNorthEast().lng)));var i={input:t,locationBias:a=a||new google.maps.LatLngBounds(new google.maps.LatLng(85,-180),new google.maps.LatLng(-85,180)),sessionToken:this.token,types:n?null:["geocode"]};this.autocompleteService.getPlacePredictions(i,(function(e,t){"OK"==t&&e&&e.length?(e=(e=e.map((e=>(e.value=e.description,e)))).filter((e=>e.place_id)),o(e)):(t==google.maps.places.PlacesServiceStatus.REQUEST_DENIED?alert("Google Maps API Key error: please enable the Places API in the Google Developer Console."):t==google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT&&alert("Google Maps API Key has exceeded its query limit"),o(null))}))}},c.liq=function(){},c.liq.prototype={getDetails:function({suggestion:e,callback:t}){let n=e.display_name,o=n.indexOf(","),a=n.indexOf(",",o+1);o>0&&(n=parseInt(n.substr(0,o))?n.substr(0,a).replace(",",""):n.substr(0,o));let i=e.boundingbox&&4==e.boundingbox.length?{sw:{lat:e.boundingbox[0],lng:e.boundingbox[2]},ne:{lat:e.boundingbox[1],lng:e.boundingbox[3]}}:null;t({formatted_address:e.display_name,name:n,geometry:{location:{lat:e.lat,lng:e.lon},viewport:i}})},getFirstPrediction:function({map:e,value:t,callback:n}){this.getPredictions({map:e,value:t,callback:e=>{e&&e.length?this.getDetails({suggestion:e[0],callback:e=>n(e)}):n(null)}})},getPredictions:function({map:e,value:t,callback:n}){var o="https://us1.locationiq.com/v1/search?key="+mappl10n.options.liq+"&dedupe=1&format=json&limit=5&q="+encodeURIComponent(t);if(o=mappl10n.options.country?o+"&countrycodes="+mappl10n.options.country.toLowerCase():o,o=mappl10n.options.language?o+"&accept-language="+mappl10n.options.language.toLowerCase():o,mappl10n.options.searchBox)o+="&viewbox="+mappl10n.options.searchBox,o+="&bounded=1";else{var a=e?e.getBounds():null;if(a){let e=a.getSouthWest().wrap(),t=a.getNorthEast().wrap();o+="&viewbox="+e.lng+","+e.lat+","+t.lng+","+t.lat}}fetch(o).then((e=>e.json())).then((e=>{e&&e.length?(e=e.map((e=>(e.value=e.display_name,e))),n(e)):n(null)}))}},c.mapbox=function(){},c.mapbox.prototype={getDetails:function({suggestion:e,callback:t}){let n=e.place_name,o=n.indexOf(","),a=n.indexOf(",",o+1);o>0&&(n=parseInt(n.substr(0,o))?n.substr(0,a).replace(",",""):n.substr(0,o));let i=e.bbox&&4==e.bbox.length?{sw:{lat:e.bbox[1],lng:e.bbox[0]},ne:{lat:e.bbox[3],lng:e.bbox[2]}}:null;t({formatted_address:e.place_name,name:n,geometry:{location:{lat:e.center[1],lng:e.center[0]},viewport:i}})},getFirstPrediction:function({map:e,value:t,callback:n}){this.getPredictions({map:e,value:t,callback:e=>{e&&e.length?this.getDetails({suggestion:e[0],callback:e=>n(e)}):n(null)}})},getPredictions:function({map:e,value:t,callback:n}){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?access_token="+mappl10n.options.mapbox;o=mappl10n.options.country?o+"&country="+mappl10n.options.country.toLowerCase():o,o=mappl10n.options.language?o+"&language="+mappl10n.options.language.toLowerCase():o;var a=e?e.getCenter():null;a&&(o+="&proximity="+a.lng+","+a.lat),mappl10n.options.searchBox&&(o+="&bbox="+mappl10n.options.searchBox),fetch(o).then((e=>e.json())).then((e=>{e&&e.features&&e.features.length>0?(e.features=e.features.map((e=>(e.value=e.label=e.place_name,e))),n(e.features)):n(null)}))}},c.nominatim=function(){},c.nominatim.prototype={getDetails:function({suggestion:e,callback:t}){let n=e.display_name,o=n.indexOf(","),a=n.indexOf(",",o+1);o>0&&(n=parseInt(n.substr(0,o))?n.substr(0,a).replace(",",""):n.substr(0,o));let i=e.boundingbox&&4==e.boundingbox.length?{sw:{lat:e.boundingbox[0],lng:e.boundingbox[2]},ne:{lat:e.boundingbox[1],lng:e.boundingbox[3]}}:null;t({formatted_address:e.display_name,name:n,geometry:{location:{lat:e.lat,lng:e.lon},viewport:i}})},getFirstPrediction:function({map:e,value:t,callback:n}){this.getPredictions({map:e,value:t,callback:e=>{e&&e.length?this.getDetails({suggestion:e[0],callback:e=>n(e)}):n(null)}})},getPredictions:function({map:e,value:t,callback:n}){var o="https://nominatim.openstreetmap.org/search?format=json&dedupe=1&limit=5&q="+encodeURIComponent(t);if(o=mappl10n.options.country?o+"&countrycodes="+mappl10n.options.country.toLowerCase():o,o=mappl10n.options.language?o+"&accept-language="+mappl10n.options.language.toLowerCase():o,mappl10n.options.searchBox)o+="&viewbox="+mappl10n.options.searchBox,o+="&bounded=1";else{var a=e?e.getBounds():null;if(a){let e=a.getSouthWest().wrap(),t=a.getNorthEast().wrap();o+="&viewbox="+e.lng+","+e.lat+","+t.lng+","+t.lat}}fetch(o).then((e=>e.json())).then((e=>{e&&e.length?(e=e.map((e=>(e.value=e.display_name,e))),n(e)):n(null)}))}};const u=({includeBusinesses:e})=>{function t(){let e="";return e="leaflet"!=mappl10n.options.engine?"google":mappl10n.options.geocoder?mappl10n.options.geocoder:"nominatim",new c[e]}return{geocode:function({map:n,suggestion:o,value:a,callback:i}){const l=t();a="string"==typeof a?a.trim():a,o||a?function({map:e,value:t,callback:n}){if(!t)return void n(null);if("string"!=typeof t){return void n(t.lat&&t.lng?{geometry:{location:{lat:t.lat,lng:t.lng}}}:null)}if("http"==t.substring(0,4))return void n(t);const o=t.split(",");if(2==o.length){const e=parseFloat(o[0]),t=parseFloat(o[1]);if(!isNaN(e)&&!isNaN(t))return void n({name:e+", "+t,geometry:{location:{lat:e,lng:t}}})}n(null)}({map:n,value:a,callback:t=>{t?i(t):o?l.getDetails({suggestion:o,callback:i}):l.getFirstPrediction({map:n,value:a,includeBusinesses:e,callback:i})}}):i(null)},geolocate:function(e,t){navigator&&navigator.geolocation||(alert(__("Unable to get your location","mappress-google-maps-for-wordpress")),e(null)),navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e({name:n.lat+", "+n.lng,geometry:{location:n}})}),(function(n){if(!t){var o=n&&n.message?" : "+n.message:"";alert(__("Unable to get your location","mappress-google-maps-for-wordpress")+" "+o)}e(null)}),{timeout:15e3,enableHighAccuracy:!0,maximumAge:3e4})},getPredictions:function({map:n,value:o,callback:a}){t().getPredictions({map:n,value:o,includeBusinesses:e,callback:a})}}}},55:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useClickOutside:()=>c,useDebounce:()=>u,useIntersectionObserver:()=>d,useResizeObserver:()=>m,useTimeout:()=>g});React.createElement;const{Fragment:o,useCallback:a,useEffect:i,useLayoutEffect:l,useMemo:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e,t){i((()=>{const n=n=>{e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}))}function u(e,t,n){const o=r(!1),a=r(null);React.useEffect((()=>{if(o.current)return clearTimeout(a.current),a.current=setTimeout((()=>{e()}),n),()=>{clearTimeout(a.current)};o.current=!0}),t)}function m(e,t){const n=r();n.current=t,i((()=>{if(!e)return;const t=new ResizeObserver(((e,t)=>{n.current()}));return t.observe(e),()=>{t.disconnect()}}),[e])}function d({container:e,element:t,options:n,callback:o}){const a=r(null),l=r(null);l.current=o,i((()=>(!a.current&&t&&e&&(a.current=new IntersectionObserver((e=>{e[0].isIntersecting&&l.current()}),{...n,root:e}),a.current.observe(t)),()=>{a.current&&(a.current.disconnect(),a.current=null)})),[e,t])}function g(e,t){const n=React.useRef(null),o=React.useRef(e);return i((()=>{o.current=e}),[e]),i((()=>(t>0&&(n.current=window.setTimeout((()=>o.current()),t)),()=>{n.current&&window.clearTimeout(n.current)})),[t]),n}},760:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mappEvent:()=>a,mappLib:()=>o,mappPoi:()=>i});const o={ajax:function(e){if("POST"==(e={cache:"no-cache",credentials:"same-origin",data:null,method:e.method?e.method:"GET",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer",responseType:"json",url:e.url?e.url:mappl10n.options.ajaxurl,...e}).method)if(e.data instanceof FormData)e.body=e.data;else{const t=new FormData;t.append("action",e.data.action),t.append("nonce",e.data.nonce),t.append("data",JSON.stringify(e.data)),e.body=t}else"GET"==e.method&&(e.url+="?"+o.jQueryParam(e.data));fetch(e.url,e).then((t=>{if("html"==e.responseType)return t.text();if(t.ok)return t.json();throw Error(`Request rejected with status ${t.status}`)})).then((t=>{e.url!=mappl10n.options.ajaxurl||t&&"OK"==t.status||o.alert(t.status),t.output&&o.alert("MapPress: invalid output from a plugin or theme file.  Deactivate plugins to find the problem.  Output:\r\n"+t.output),e.callback&&e.callback(t)})).catch((t=>{if(e.error)return void e.error();const n=void 0!==t.message?t.message:t.statusText;o.alert("AJAX error -- "+n)}))},alert:function(e){mappl10n.options.admin||mappl10n.options.debug?alert(e):window.console&&console.error(e)},boundsToViewport:function(e){return e?{sw:o.toJSON(e.getSouthWest()),ne:o.toJSON(e.getNorthEast())}:null},createRoot:function(e,t,n){if(void 0!==ReactDOM.createRoot){const o=ReactDOM.createRoot(e,n);return t&&o.render(t),o}t&&ReactDOM.render(t,e)},getDirections:function(e,t){let n=mappl10n.options.directionsServer;e=e?e.trim():"",t=t?t.trim():"",n="https://maps.google.com"==n?"https://www.google.com":n,-1==n.toLowerCase().indexOf("http")&&(n="https://"+n),n+="/maps/dir/?api=1&origin="+encodeURIComponent(e)+"&destination="+encodeURIComponent(t),window.open(n)},getDistance(e,t){const n=this.toJSON(e),o=this.toJSON(t);var a=n.lat*(Math.PI/180),i=o.lat*(Math.PI/180),l=i-a,s=(o.lng-n.lng)*(Math.PI/180),r=7917.6*Math.asin(Math.sqrt(Math.sin(l/2)*Math.sin(l/2)+Math.cos(a)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2)));return r=r.toFixed(1)},getIcon:function(e){{const t=this.getIconUrl(e);return"leaflet"==mappl10n.options.engine?L.icon({iconUrl:t,iconAnchor:[16,32],iconSize:[32,32],popupAnchor:[0,-32]}):{url:t}}},getIconUrl:function(e){return"geolocation"==e?mappl10n.options.baseurl+"/images/geolocation.svg":mappl10n.options.baseurl+"/images/red-dot.png"},jQueryParam:function(e){var t=[],n=function(e,n){n=null==(n="function"==typeof n?n():n)?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},o=function(e,a){var i,l,s;if(e)if(Array.isArray(a))for(i=0,l=a.length;i<l;i++)o(e+"["+("object"==typeof a[i]&&a[i]?i:"")+"]",a[i]);else if("[object Object]"===Object.prototype.toString.call(a))for(s in a)o(e+"["+s+"]",a[s]);else n(e,a);else if(Array.isArray(a))for(i=0,l=a.length;i<l;i++)n(a[i].name,a[i].value);else for(s in a)o(s,a[s]);return t};return o("",e).join("&")},map:(e,t,n)=>{const o=!isArrayLike(e)&&keys(e),a=(o||e).length;let i=Array(a);for(let n=0;n<a;n++){const a=o?o[n]:n;i[n]=t(e[a],a,e)}return i},nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},pointToLatLng:function(e){return e?"leaflet"==mappl10n.options.engine?L.latLng(e):new google.maps.LatLng(e.lat,e.lng):null},slugify:function(e){return e?e.replace(/[^a-z0-9]/gi,"").toLowerCase():e},template:function(e,t){if(o.templates=o.templates?o.templates:{},!o.templates[e]){var n=document.getElementById("mapp-tmpl-"+e).innerHTML;if(!n)return"";o.templates[e]=this.templateParse(n)}return o.templates[e](t)},templateParse(e,t){const n={escape:e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")};var o=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\u2028|\u2029/g;function l(e){return"\\"+a[e]}var s=RegExp([(/\{\{([^\}]+?)\}\}(?!\})/g||o).source,(/\{\{\{([\s\S]+?)\}\}\}/g||o).source,(/<#([\s\S]+?)#>/g||o).source].join("|")+"|$","g"),r=0,p="__p+='";e.replace(s,(function(t,n,o,a,s){return p+=e.slice(r,s).replace(i,l),r=s+t.length,n?p+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?p+="'+\n((__t=("+o+"))==null?'':__t)+\n'":a&&(p+="';\n"+a+"\n__p+='"),t})),p+="';\n";var c,u=t;if(u){if(!/^\s*(\w|\$)+\s*$/.test(u))throw new Error("variable is not a bare identifier: "+u)}else p="with(obj||{}){\n"+p+"}\n",u="obj";p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+p+"return __p;\n";try{c=new Function(u,"_",p)}catch(e){throw e.source=p,e}var m=function(e){return c.call(this,e,n)};return m.source="function("+u+"){\n"+p+"}",m},toJSON:e=>e.toJSON?e.toJSON():e&&e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||"undefined"!=typeof L&&e instanceof L.LatLng?{lat:e.lat,lng:e.lng}:"undefined"!=typeof L&&L.LatLngBounds&&e instanceof L.LatLngBounds?{south:e.getSouth(),west:e.getWest(),north:e.getNorth(),east:e.getEast()}:null,toUrlValue(e){return e.toUrlValue?e.toUrlValue():"undefined"!=typeof L&&e instanceof L.LatLng?Math.round(1e6*this.lat)/1e6+", "+Math.round(1e6*this.lng)/1e6:null},viewportToBounds:function(e){return e&&e.sw&&e.ne?"leaflet"==mappl10n.options.engine?new L.LatLngBounds(L.latLng(e.sw.lat,e.sw.lng),L.latLng(e.ne.lat,e.ne.lng)):new google.maps.LatLngBounds(new google.maps.LatLng(e.sw.lat,e.sw.lng),new google.maps.LatLng(e.ne.lat,e.ne.lng)):null}},a={addListener:function(e,t,n){let o=[];t=t.split(" ");for(var a=0;a<t.length;a++)"leaflet"==mappl10n.options.engine?(e.on(t[a],n),o.push({target:e,event:t[a],callback:n})):o.push(google.maps.event.addListener(e,t[a],n));return Array.isArray(o)?o:o[0]},addListenerOnce:function(e,t,n){t=t.split(" ");for(var o=0;o<t.length;o++)"leaflet"==mappl10n.options.engine?e.once(t[o],n):google.maps.event.addListenerOnce(e,t[o],n)},clearInstanceListeners:function(e){"leaflet"==mappl10n.options.engine?e.off():google.maps.event.clearInstanceListeners(e)},clearListeners:function(e,t){t=t.split(" ");for(var n=0;n<t.length;n++)"leaflet"==mappl10n.options.engine?e.off(t[n]):google.maps.event.clearListeners(e,t[n])},removeListener:function(e){const t=Array.isArray(e)?e:[e];for(let e=0;e<t.length;e++)"leaflet"==mappl10n.options.engine?t[e].target.off(t[e].event,t[e].callback):google.maps.event.removeListener(t[e])},trigger:function(e,t,n){"leaflet"==mappl10n.options.engine?e.fire(t,n):"undefined"!=typeof google&&google?.maps&&google?.maps?.event&&google.maps.event.trigger(e,t,n)}},i={parseOverlay:function(e,t){if("google"==mappl10n.options.engine){if("kml"==e){const e=t.getDefaultViewport();return{point:e?o.toJSON(e.getCenter()):null,viewport:e?o.boundsToViewport(e):null}}const n=t instanceof google.maps.Polyline?{strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight}:{fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:1,strokeWeight:t.strokeWeight};if("circle"==e)return{point:o.toJSON(t.getCenter()),poly:{radius:t.getRadius(),...n}};if("rectangle"==e)return{point:t.getBounds().getCenter().toJSON(),viewport:o.boundsToViewport(t.getBounds()),poly:{...n}};if("polyline"==e){const e=[];return t.getPath().forEach((function(t){e.push(o.toJSON(t))})),{poly:{path:e,...n}}}if("polygon"==e){const e={fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:1,strokeWeight:t.strokeWeight},n=[];return t.getPaths().forEach((function(e){var t=[];e.forEach((function(e){t.push(o.toJSON(e))})),n.push(t)})),{poly:{paths:n,...e}}}if(!e)return{point:o.toJSON(t.getPosition())}}else{if("kml"==e){const e=t.getBounds();return{point:e&&e.isValid()?o.toJSON(e.getCenter()):null,viewport:e&&e.isValid()?o.boundsToViewport(e):null}}if(!e)return{point:"leaflet"==mappl10n.options.engine?o.toJSON(t.getLatLng()):o.toJSON(t.getPosition())}}}}},756:(e,t,n)=>{"use strict";n.r(t);var o=n(760),a=n(351);window.mapp=window.mapp||{};const{Fragment:i}=React,l=React.createElement;class s extends HTMLElement{constructor(){super()}parseLatLng(e){if(!e)return null;const t="string"==typeof e?e.split(","):[];return 2==t.length?{lat:t[0],lng:t[1]}:4==t.length?{sw:{lat:t[0],lng:t[1]},ne:{lat:t[2],lng:t[3]}}:null}parseAttributes(e,t){const n=Object.values(e).filter((e=>"style"!=e.name&&"class"!=e.name));let o={};return n.map((e=>{const n=e.value?e.value.substring(0,1):null,a="["==n||"{"==n?JSON.parse(e.value):e.value,i=t&&void 0!==t[e.name]?t[e.name]:e.name;o[i]=a})),o}connectedCallback(){const e=this.parseAttributes(this.attributes,{initialopeninfo:"initialOpenInfo",mapopts:"mapOpts",maptypeid:"mapTypeId",poilist:"poiList"});e.center=this.parseLatLng(e.center),e.container=this,e.pois=[];for(let t=0;t<this.children.length;t++){const n=this.parseAttributes(this.children[t].attributes);n.body=this.children[t].innerHTML,n.id=o.mappLib.nanoid(),n.point=this.parseLatLng(n.point),n.viewport=this.parseLatLng(n.viewport),e.pois[t]=n}o.mappLib.createRoot(this,l(a.MappMap,e))}}window.customElements.get("mappress-map")||window.customElements.define("mappress-map",s),mapp.load=function(){const e=({data:e,container:t})=>{e.pois&&e.pois.map((e=>{e.id=o.mappLib.nanoid()})),t?o.mappLib.createRoot(t,l(a.MappMap,{...e,container:t})):console.log("Missing container for map "+e.name)};if(mapp.data)for(;mapp.data.length;){const t=mapp.data.pop();e({data:t,container:document.getElementById(t.name)})}},mapp.load()},516:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappFullscreenControl:()=>c,MappGeolocateControl:()=>u});const{Fragment:o,useCallback:a,useEffect:i,useLayoutEffect:l,useRef:s,useState:r}=React,p=React.createElement,{__,sprintf}=wp.i18n;function c(e){if(e={isFullscreen:null,onChange:null,layoutNode:null,...e},i((()=>{if(!e.layoutNode)return;const t=()=>{const t=document.fullscreenElement==e.layoutNode;t!=e.isFullscreen&&e.onChange(t)};return e.layoutNode.addEventListener("fullscreenchange",t),()=>{e.layoutNode&&e.layoutNode.removeEventListener("fullscreenchange",t)}})),void 0===document.fullscreenEnabled||!document.fullscreenEnabled)return null;const t="mapp-"+mappl10n.options.engine+"-control mapp-"+mappl10n.options.engine+"-fullscreen";return p("div",{className:t,onClick:()=>{e.layoutNode&&(document.fullscreenElement==e.layoutNode?document.exitFullscreen():e.layoutNode.requestFullscreen())},title:__("Toggle fullscreen view","mappress-google-maps-for-wordpress")},p("div",null))}function u(e){if(e={onClick:null,...e},!mappl10n.options.ssl)return null;const t="mapp-"+mappl10n.options.engine+"-control mapp-"+mappl10n.options.engine+"-geolocate"+name;return p("div",{className:t,onClick:()=>e.onClick(),title:__("Your Location","mappress-google-maps-for-wordpress")},p("div",null))}},351:(t,n,o)=>{"use strict";function a(e,t,n,o){return new(n||(n=Promise))((function(a,i){function l(e){try{r(o.next(e))}catch(e){i(e)}}function s(e){try{r(o.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}r((o=o.apply(e,t||[])).next())}))}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}o.r(n),o.d(n,{MappMap:()=>B}),"function"==typeof SuppressedError&&SuppressedError;var l=i((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var o,a,i;if(Array.isArray(t)){if((o=t.length)!=n.length)return!1;for(a=o;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((o=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=o;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=o;0!=a--;){var l=i[a];if(!e(t[l],n[l]))return!1}return!0}return t!=t&&n!=n}));const s="__googleMapsScriptId";var r;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(r||(r={}));class p{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:o,id:a=s,language:i,libraries:r=[],mapIds:c,nonce:u,region:m,retries:d=3,url:g="https://maps.googleapis.com/maps/api/js",version:f}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=o,this.id=a||s,this.language=i,this.libraries=r,this.mapIds=c,this.nonce=u,this.region=m,this.retries=d,this.url=g,this.version=f,p.instance){if(!l(this.options,p.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(p.instance.options)}`);return p.instance}p.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?r.FAILURE:this.done?r.SUCCESS:this.loading?r.LOADING:r.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n.error):e(window.google)}))}))}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))return void this.callback();const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach((e=>!n[e]&&delete n[e])),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,n,o,i="The Google Maps JavaScript API",l="google",s="importLibrary",r="__ib__",p=document,c=window;c=c[l]||(c[l]={});const u=c.maps||(c.maps={}),m=new Set,d=new URLSearchParams,g=()=>t||(t=new Promise(((s,c)=>a(this,void 0,void 0,(function*(){var a;for(o in yield n=p.createElement("script"),n.id=this.id,d.set("libraries",[...m]+""),e)d.set(o.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase())),e[o]);d.set("callback",l+".maps."+r),n.src=this.url+"?"+d,u[r]=s,n.onerror=()=>t=c(Error(i+" could not load.")),n.nonce=this.nonce||(null===(a=p.querySelector("script[nonce]"))||void 0===a?void 0:a.nonce)||"",p.head.append(n)})))));u[s]?console.warn(i+" only loads once. Ignoring:",e):u[s]=(e,...t)=>m.add(e)&&g().then((()=>u[s](e,...t)))})(n);const o=this.libraries.map((e=>this.importLibrary(e)));o.length||o.push(this.importLibrary("core")),Promise.all(o).then((()=>this.callback()),(e=>{const t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)}))}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setScript())}}}var c=o(760),u=(o(875),o(45)),m=(o(900),o(516)),d=o(28),g=o(195),f=o(727),h=o(191),v=o(660);const y=React.createElement,{Fragment:b,useEffect:w,useLayoutEffect:k,useMemo:E,useRef:C,useState:O}=React;function x(e){e={anchor:null,className:null,content:null,map:null,onMouseEnter:null,onMouseLeave:null,point:null,...e};const t=C(null),[n,o]=O({isLoaded:null,mapDiv:"leaflet"==mappl10n.options.engine?e.map.getContainer():e.map.getDiv(),overlayView:null});function a(e){o((t=>({...t,...e})))}function i(){const o=t.current;if(!o)return;let a;o.style.left=0,o.style.bottom=0;const{width:i,height:l}=o.getBoundingClientRect(),s=c.mappLib.pointToLatLng(e.point);if("leaflet"==mappl10n.options.engine)a=e.map.latLngToContainerPoint(s);else{const e=n.overlayView.getProjection();if(!e)return;a=e.fromLatLngToContainerPixel(s)}o.style.bottom=n.mapDiv.clientHeight-a.y-e.anchor.y+"px",o.style.left=a.x-i/2+e.anchor.x+"px"}return k((()=>{"google"==mappl10n.options.engine?n.overlayView||(n.overlayView=new google.maps.OverlayView,n.overlayView.onAdd=function(){a({isLoaded:!0})},n.overlayView.setMap(e.map)):(e.map.stop(),a({isLoaded:!0}))}),[]),k((()=>{if(!n.isLoaded)return;let t;return"google"==mappl10n.options.engine?n.overlayView.draw=()=>i():t=c.mappEvent.addListener(e.map,"move",(e=>i())),()=>{"google"==mappl10n.options.engine?n.overlayView.draw=null:c.mappEvent.removeListener(t)}})),k((()=>{n.isLoaded&&(i(),function(){const o=t.current;if(!o)return;const a=30,i=o.offsetWidth,l=o.offsetHeight,s=n.mapDiv.clientWidth,r=n.mapDiv.clientHeight,p=c.mappLib.pointToLatLng(e.point);let u;if("leaflet"==mappl10n.options.engine)u=e.map.latLngToContainerPoint(p);else{const e=n.overlayView.getProjection();u=e?e.fromLatLngToContainerPixel(p):null}if(!u)return;var m={x:u.x,y:u.y};u.x+i/2+e.anchor.x>s-a?m.x=Math.max(s-i/2-e.anchor.x-a,s/2-e.anchor.x):u.x-i/2+e.anchor.x<a&&(m.x=Math.min(i/2+e.anchor.x+a,s/2-e.anchor.x));u.y+e.anchor.y-l<a&&(m.y=l-e.anchor.y+a);m.y>=r&&(m.y=r-a);const d={x:u.x-m.x,y:u.y-m.y};(d.x<=-1||d.x>=1||d.y<=-1||d.y>=1)&&("leaflet"==mappl10n.options.engine?e.map.panBy([d.x,d.y]):e.map.panBy(d.x,d.y))}())}),[n.isLoaded]),n.isLoaded?y("div",{className:"mapp-ib-wrapper",ref:t,onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()},onMouseLeave:()=>{e.onMouseLeave&&e.onMouseLeave()}},y("div",{className:"mapp-ib-content"},y("div",{className:"mapp-ib"},y("div",{className:"mapp-iw "+(e.className?e.className:"")},e.content)),y("div",{className:"mapp-ib-tip"}))):null}var P=o(477),M=o(296),N=o(55);const S=c.mappLib.toJSON,{Fragment:R,useCallback:_,useEffect:I,useLayoutEffect:D,useRef:T,useState:A}=React,F=React.createElement,{__,sprintf}=wp.i18n;function B(t){t={alignment:null,center:null,centerPoi:null,container:null,geolocate:null,filter:null,height:null,initialOpenInfo:null,isEditable:null,layers:null,layout:null,lines:null,mapid:null,mapTypeId:null,metaKey:null,mapOpts:null,name:null,oid:null,otype:null,onDragDrop:null,onDrawingEvent:null,onPoiChange:null,onPopupHover:null,onRenderPopup:null,onRenderSidebar:null,onSearch:null,onViewportChange:null,poiList:null,poiListOpen:null,poiListPageSize:null,pois:null,popupStyle:null,query:null,search:null,width:null,zoom:null,...t};const[n,o]=A({clusterer:null,clustererDefaultRenderer:null,directionsTo:null,drawingManager:null,filters:mappl10n.options.filterParams?mappl10n.options.filterParams:{},hovered:null,hoveredDelay:null,hoveredPopup:null,init:null,isDirectionsOpen:null,isFetching:null,isFullscreen:null,isGeolocating:null,isHidden:!1,isLoaded:null,isMounted:null,isMini:null,isSidebarOpen:null!=t.poiListOpen?t.poiListOpen:mappl10n.options.poiListOpen,kmlEvent:null,layers:{},layout:t.layout?t.layout:mappl10n.options.layout,map:null,opened:null,oid:t.oid?t.oid:mappl10n.options.oid,otype:t.otype?t.otype:mappl10n.options.otype,overlays:[],page:1,pageCount:0,parsedCenter:null,poiList:void 0!==t.poiList&&null!=t.poiList?t.poiList:mappl10n.options.poiList,pois:[],polyline:null,templates:t.query?"user"==t.otype?{item:"user-mashup-item",popup:"user-mashup-popup"}:{item:"mashup-item",popup:"mashup-popup"}:{item:"map-item",popup:"map-popup"},userLocation:null}),a=window.parent?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),i=mappl10n.options.searchParam&&a.has(mappl10n.options.searchParam)?a.get(mappl10n.options.searchParam):null,l=T(t.container),s=T(null),r=T(null),{geocode:y,geolocate:b}=(T(),(0,M.useGeocoding)({includeBusinesses:t.isEditable}));function w(e){o((t=>({...t,...e})))}(0,N.useResizeObserver)(s.current,(function(){if(l.current&&0==l.current.offsetHeight)return;if(!n.mep)return;"leaflet"==mappl10n.options.engine?n.map.invalidateSize():c.mappEvent.trigger(n.map,"resize")})),(0,N.useResizeObserver)(l.current,(function(){if(l.current&&0==l.current.offsetHeight)return void(void 0===n.isHidden&&w({isHidden:!0}));n.isHidden&&(w({isHidden:!1}),$());if(n.poiList&&"inline"!=n.layout&&l.current){const e=l.current.clientWidth<mappl10n.options.mini;n.isMini!=e&&w({isSidebarOpen:!e}),e!=n.isMini&&(w({isMini:e}),l.current&&l.current.classList.toggle("mapp-mini",e))}})),I((()=>{switch(n.init){case null:if("google"!=mappl10n.options.engine&&"google"!=mappl10n.options.geocoder)return void w({init:1});const e=async()=>{await google.maps.importLibrary("places"),await google.maps.importLibrary("drawing"),w({init:1})};if("undefined"==typeof google||void 0===google.maps){new p({apiKey:mappl10n.options.apikey,version:mappl10n.options.dev?"beta":"3",language:mappl10n.options.language}).load().then(e())}else console.warn("Mappress WARNING: Another plugin or theme has loaded google maps with a different API key.\r\nDisable it to use the key defined in the MapPress settings."),e();break;case 1:!function(){const e=[__("MapPress FAQ","mappress-google-maps-for-wordpress")+": http://mappresspro.com/mappress-faq",__("Support","mappress-google-maps-for-wordpress")+": http://mappresspro.com/contact",__("Get an API Key","mappress-google-maps-for-wordpress")+": https://mappresspro.com/how-to-get-a-google-maps-api-key"];let t=[{condition:"leaflet"==mappl10n.options.engine&&("undefined"==typeof L||void 0===L.LatLng),title:__("Leaflet library not loaded","mappress-google-maps-for-wordpress"),text:__("A theme or plugin is preventing the Leaflet library from loading.","mappress-google-maps-for-wordpress")},{condition:"google"==mappl10n.options.engine&&"undefined"==typeof google,title:__("Google Maps API not loaded","mappress-google-maps-for-wordpress"),text:__("A theme or plugin is preventing Google Maps from loading.","mappress-google-maps-for-wordpress")},{condition:"google"==mappl10n.options.engine&&!mappl10n.options.apikey,title:__("Google Maps API key required","mappress-google-maps-for-wordpress")},{condition:document.querySelectorAll('script[src*="https://maps.googleapis.com/maps/api/js?v="]').length>1,title:__("Google Maps API loaded multiple times","mappress-google-maps-for-wordpress"),text:__("A theme or plugin has loaded Google Maps twice","mappress-google-maps-for-wordpress")}];t=t.filter((e=>e.condition));let n=t.map((e=>e.title+" : "+e.text));n.length&&(console.log(__("Map Error","mappress-google-maps-for-wordpress")+"\n----------------\n"+n.join("\n")+"\n----------------\n"+e.join("\n")),mappl10n.options.admin&&alert(__("Map error: please see the developer console (F12 in most browsers) for details.","mappress-google-maps-for-wordpress")))}();const o=window.location.origin;if(o&&o.includes("nfg.org")&&mappl10n.options.version>="2.85")return;let a,l={...t.mapOpts};if(l.minZoom=isNaN(parseInt(l.minZoom))?0:parseInt(l.minZoom),"leaflet"==mappl10n.options.engine?(a=new L.Map(s.current,{attribution:'&copy;<a href="https://openstreetmap.org">OpenStreetMap</a>',minZoom:0,scrollWheelZoom:mappl10n.options.scrollWheel,worldCopyJump:!0,zoomControl:null,...l}),L.control.zoom({position:"bottomright",zoomInTitle:"",zoomOutTitle:""}).addTo(a),a.attributionControl.setPrefix('<a href="https://mappresspro.com" target="_blank">MapPress</a>')):a=new google.maps.Map(s.current,{backgroundColor:"transparent",clickableIcons:!1,fullscreenControl:!1,mapTypeControl:!1,minZoom:0,scaleControl:!0,scrollWheelZoom:mappl10n.options.scrollWheel,streetViewControl:!t.query,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},...l}),w({map:a}),mappl10n.options.userLocation&&mappl10n.options.ssl&&b((e=>{e&&e.geometry&&e.geometry.location&&w({userLocation:e.geometry.location})}),!0),mappl10n.options.geolocate||t.geolocate||"user"==t.center)return void b((e=>{e&&e.geometry&&e.geometry.location&&w({parsedCenter:{lat:e.geometry.location.lat,lng:e.geometry.location.lng}}),w({init:2})}));y({value:t.center,callback:e=>{e&&e.geometry&&e.geometry.location&&w({parsedCenter:{lat:e.geometry.location.lat,lng:e.geometry.location.lng}}),w({init:2})}}),w({init:2});break;case 2:oe(t.mapTypeId),function(){if(t.isEditable&&"google"==mappl10n.options.engine&&google.maps.drawing){const e={fillColor:"#0000FF",fillOpacity:.4,strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:2};n.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.RECTANGLE,google.maps.drawing.OverlayType.CIRCLE]},circleOptions:e,polygonOptions:e,polylineOptions:e,rectangleOptions:e}),n.drawingManager.setMap(n.map)}}(),t.query&&!n.isIframe?k((()=>w({init:3}))):(w({pois:t.pois?t.pois:[]}),w({init:3}));break;case 3:const r="leaflet"==mappl10n.options.engine?"load":"tilesloaded";if(c.mappEvent.addListenerOnce(n.map,r,(()=>{w({bounds:O()}),function(){if(mappl10n.options.clustering&&!t.isEditable){let e,t=mappl10n.options.clusteringOptions?mappl10n.options.clusteringOptions:{};if(void 0!==t.disableClusteringAtZoom&&""==t.disableClusteringAtZoom&&(t.disableClusteringAtZoom=null),"leaflet"==mappl10n.options.engine)e=L.markerClusterGroup(t),n.map.addLayer(e);else{const o=new markerClusterer.DefaultRenderer;t.maxZoom=void 0!==t.maxZoom&&t.maxZoom?parseInt(t.maxZoom):void 0;const a=new markerClusterer.SuperClusterAlgorithm(t);e=new markerClusterer.MarkerClusterer({map:n.map,markers:[],algorithm:a,renderer:{render:({count:e,position:t},n)=>{const a=o.render({count:e,position:t},n);return a.title=null,a}}})}w({clusterer:e})}}(),(t.initialOpenInfo||mappl10n.options.initialOpenInfo)&&!t.isEditable&&n.pois&&n.pois.length&&("leaflet"==mappl10n.options.engine?setTimeout((()=>W(n.pois[0])),100):W(n.pois[0])),w({isLoaded:!0})})),i)return void y({value:i,callback:e=>{J(e)}});$()}}),[n.init]);(0,N.useTimeout)((()=>{w({hoveredDelay:0}),n.hoveredPopup||w({hovered:null})}),n.hoveredDelay);function k(e){}function E(e){return n.pois.find((t=>t.id==e))}function C(e){return n.map.fitBounds(e)}function O(){try{return n.map.getBounds()}catch(e){return null}}function _(){let e;try{e=n.map.getCenter()}catch(t){e=null}return e?S(e):null}function D(){if(t.embed)return{width:"100%",height:"100%"};const e=mappl10n.options.sizes[mappl10n.options.size]?mappl10n.options.sizes[mappl10n.options.size]:mappl10n.options.sizes[0],n=e=>"string"==typeof e&&(e.indexOf("px")>=0||e.indexOf("%")>=0||e.indexOf("vh")>=0||e.indexOf("vw")>=0)?e:e+"px";return{width:t.width?n(t.width):n(e.width),height:t.height?n(t.height):n(e.height)}}function B(e){let t;switch("leaflet"==mappl10n.options.engine&&"kml"!=e.type?null:e.type){case"polygon":t=new google.maps.LatLngBounds,e.poly.paths.map((e=>{e.map((e=>{t.extend(e)}))}));break;case"polyline":t=new google.maps.LatLngBounds,e.poly.path.map((e=>{t.extend(e)}));break;case"circle":const n=new google.maps.Circle({center:e.point,radius:e.poly.radius});t=n.getBounds();break;default:t=c.mappLib.viewportToBounds(e.viewport)}return t}function j(e,t){if(e.point&&!e.type)return"leaflet"==mappl10n.options.engine?L.latLng(e.point):new google.maps.LatLng(e.point.lat,e.point.lng);if("kml"==e.type&&t&&t.latLng)return t.latLng;const n=B(e);return"leaflet"==mappl10n.options.engine?n&&n.isValid()?n.getCenter():new L.latLng(0,0):n?n.getCenter():new google.maps.LatLng(0,0)}function z(){let e;try{e=n.map.getZoom()}catch(t){e=null}return e?parseInt(e):null}function V(){return!!(t.isEditable||t.search||mappl10n.options.search&&t.query)}function G(e){let t="";if(e.address)t=e.address;else{const n=S(j(e));t=n.lat+", "+n.lng}"inline"==mappl10n.options.directions?w({isDirectionsOpen:!0,directionsTo:t}):c.mappLib.getDirections("",t)}function U(e,n){let o;if("poi"!=mappl10n.options.mashupClick&&t.query&&"post"==e.otype&&e.oid&&e.url)switch(mappl10n.options.mashupClick){case"post":return void window.top.location.assign(e.url);case"postnew":return void window.open(e.url);case"postmodal":const t=document.createElement("div");document.body.appendChild(t),o=c.mappLib.createRoot(t);const n=F(P.MappPopupModal,{onClose:()=>{o?o.unmount():ReactDOM.unmountComponentAtNode(t),t.remove()},poi:e});if(!o)return ReactDOM.render(n,t);o.render(n)}else W(e,n)}function H(){w({hovered:null,opened:null,isDirectionsOpen:!1})}function K(e,t){e&&e.id==n.opened||n.opened||w(e?{hovered:e.id,hoveredDelay:0}:t?{hoveredDelay:300}:{hovered:null,hoveredDelay:0})}function W(e,t){H(),n.isMini&&q(!1),w({kmlEvent:t,opened:e.id})}function Z(e){e?w({hoveredPopup:e.id,hoveredDelay:0}):(w({hoveredPopup:null}),n.hovered&&!n.opened&&w({hoveredDelay:300}))}function J(e){if(!e||!e.geometry)return;const t=e.geometry.location?e.geometry.location:null,n=e.geometry.viewport?e.geometry.viewport:null;let o;if("leaflet"==mappl10n.options.engine){const e=new L.LatLng(t.lat,t.lng);o=n?new L.LatLngBounds(new L.LatLng(n.sw.lat,n.sw.lng),new L.LatLng(n.ne.lat,n.ne.lng)):e.toBounds(1e3*mappl10n.options.radius)}else{const e=new google.maps.Circle({center:t,radius:1e3*mappl10n.options.radius});o=n?new google.maps.LatLngBounds(new google.maps.LatLng(n.sw.lat,n.sw.lng),new google.maps.LatLng(n.ne.lat,n.ne.lng)).union(e.getBounds()):e.getBounds()}o&&C(o),ae(t)}function q(e){w({isSidebarOpen:e=void 0!==e?e:!n.isSidebarOpen})}function $(e){e=void 0===e?n.parsedCenter:e;const o=t.zoom&&parseInt(t.zoom)?parseInt(t.zoom):null;if(e)return void ae(e,o||1);if(0==n.pois.length)return void ae({lat:0,lng:0},o||1);if(1==n.pois.length&&!n.pois[0].type)return void ae(j(n.pois[0]),o||mappl10n.options.poiZoom);let a="leaflet"==mappl10n.options.engine?new L.LatLngBounds:new google.maps.LatLngBounds;for(var i=0;i<n.pois.length;i++){var l=B(n.pois[i]);a=l?"leaflet"==mappl10n.options.engine?a.extend(l):a.union(l):a.extend(j(n.pois[i]))}o?ae(S(a.getCenter()),o):(C(a),ie(a.getCenter()))}function Y(){return n.isDirectionsOpen?F(u.MappDirections,{from:"",to:n.directionsTo,onClose:()=>{w({isDirectionsOpen:!1,directionsTo:null})}}):null}function X(){if(V())return n.isLoaded?F("div",{className:"mapp-header"},V()&&n.map?F("div",{className:"mapp-search-container"},F(g.MappPlaces,{buttonLabel:t.isEditable?__("Add to map","mappress-google-maps-for-wordpress"):F("img",{src:mappl10n.options.baseurl+"/images/search.png",alt:"search"}),focus:t.isEditable,includeBusinesses:t.isEditable,map:n.map,onSearch:e=>{t.onSearch?t.onSearch(e):J(e)},placeholder:!t.isEditable&&mappl10n.options.searchPlaceholder?mappl10n.options.searchPlaceholder:__("Search","mappress-google-maps-for-wordpress"),value:i})):null,"top"==mappl10n.options.filtersPos&&null):F("div",{className:"mapp-header"})}function Q(){return F(R,null,n.isFetching||n.isGeolocating?F(R,null,F("div",{className:"mapp-spinner-overlay"}),F("div",{className:"mapp-spinner"})):null,X(),F("div",{className:"mapp-main"},"inline"!=n.layout&&ne(),F("div",{className:"mapp-canvas-panel"+("google"==mappl10n.options.engine?" mapp-google":" mapp-leaflet")},F("div",{className:"mapp-canvas",ref:s}),n.isLoaded&&n.userLocation?F(f.MappPoi,{isClusterable:!1,isEditable:!1,isOpen:!1,key:"user",map:n.map,poi:{point:n.userLocation,iconid:"geolocation"}}):null,function(){if(!n.isLoaded)return;const o=[],a=(e,t,a)=>{n.clusterer&&(t&&o.push(e),a==n.pois.length-1&&w({overlays:o}))};return n.pois.map(((o,i)=>{const l=o.id==n.hovered,s=o.id==n.opened||l&&mappl10n.options.tooltips&&!t.isEditable,r=mappl10n.options.tooltips&&!t.isEditable;return F(f.MappPoi,{key:o.id,isClusterable:!!n.clusterer&&!o.type,isEditable:!!t.isEditable,isHovered:l,isOpen:s,map:n.map,onChange:e=>{t.onPoiChange&&t.onPoiChange(o.id,e)},onClick:e=>U(o,e),onMouseOut:()=>{K(null,r)},onMouseOver:()=>K(o),onOverlayAdd:(e,t)=>a(e,t,i),onRenderPopup:"sidebar"==t.popupStyle?null:(o,a)=>function(o,a){const i=function(e){if(!n.clusterer)return;if("leaflet"==mappl10n.options.engine){var t=n.clusterer.getVisibleParent(e);return t&&t!=e?t.getLatLng():null}const o=n.clusterer.clusters;for(var a=0;a<o.length;a++){const t=o[a].markers;if(t.length>1)for(let n=0;n<t.length;n++)if(t[n]==e)return o[a].center_}}(a),l=j(o),s=S(i||l);let r,p,c={x:0,y:0};i?c={x:0,y:-14}:o.type||(c=mappl10n.options.iconScale&&mappl10n.options.iconScale[0]&&mappl10n.options.iconScale[1]?{x:0,y:0-mappl10n.options.iconScale[1]}:{x:0,y:-32});n.kmlEvent&&(n.kmlEvent.pixelOffset&&(c={x:e.pixelOffset.width,y:e.pixelOffset.height}),n.kmlEvent.featureData?r=n.kmlEvent.featureData:n.kmlEvent&&n.kmlEvent.propagatedFrom&&n.kmlEvent.propagatedFrom.feature&&n.kmlEvent.propagatedFrom.feature.properties&&(r=n.kmlEvent.propagatedFrom.feature.properties));p=t.onRenderPopup?t.onRenderPopup(o,H):F(h.MappPoiContent,{center:_(),context:"popup",feature:r,isEditable:t.isEditable,onDirectionsClick:()=>G(o),poi:o,template:n.templates.popup,thumbs:mappl10n.options.thumbsPopup});let u=!t.isEditable&&mappl10n.options.thumbsPopup?"mapp-thumb-"+mappl10n.options.thumbsPopup:"";return u+=o.images&&o.images.length?" mapp-has-thumb":"",F(x,{anchor:c,className:u,content:p,map:n.map,onMouseEnter:()=>Z(o),onMouseLeave:()=>Z(null),point:s})}(o,a),poi:o})}))}(),t.isEditable||"leaflet"==mappl10n.options.engine||!n.map?null:F(d.MappMenuControl,{layer:t.layers,map:n.map,onCenter:()=>{H(),$()}}),t.isEditable?null:F(m.MappFullscreenControl,{onChange:e=>function(e){w({isFullscreen:e,layout:e?"left":t.layout||mappl10n.options.layout})}(e),isFullscreen:n.isFullscreen,layoutNode:l.current}),F(m.MappGeolocateControl,{onClick:()=>(w({isGeolocating:!0}),void b((e=>{w({isGeolocating:!1}),e&&e.geometry&&e.geometry.location&&ae(e.geometry.location,mappl10n.options.poiZoom),w({userLocation:e.geometry.location})}),!1))}))),n.poiList&&"inline"!=n.layout&&n.isMini?F("div",{className:"mapp-footer"},!n.isSidebarOpen&&F("div",{className:"mapp-button mapp-view-list",onClick:()=>q(!0)},F("img",{alt:"list",src:mappl10n.options.baseurl+"/images/outline_format_list_bulleted_black_18dp.png"}),__("List","mappress-google-maps-for-wordpress")),n.isSidebarOpen&&F("div",{className:"mapp-button mapp-view-map",onClick:()=>q(!1)},F("img",{alt:"map",src:mappl10n.options.baseurl+"/images/outline_map_black_18dp.png"}),__("Map","mappress-google-maps-for-wordpress"))):null)}function ee(){const e=D(),t=n.isFullscreen?{height:"100%"}:{paddingBottom:e.height};return F(R,null,F("div",{className:"mapp-wrapper",style:t},F("div",{className:"mapp-content"},Q())),"inline"==n.layout&&ne())}function te(){if(!n.poiList||!n.isLoaded||n.isDirectionsOpen)return null;const e=(V()||mappl10n.options.poiListViewport)&&n.bounds&&!t.isEditable;let o=[];return o=e?n.pois.filter(((e,t)=>n.bounds.contains(j(e)))):n.pois,n.pageCount!=o.length&&w({pageCount:o.length}),F(v.MappPoiList,{className:!t.isEditable&&mappl10n.options.thumbsList?" mapp-thumb-"+mappl10n.options.thumbsList:"",hovered:n.hovered,isEditable:t.isEditable,isFiltered:e,isPaged:!!t.query,onClick:e=>U(E(e)),onDirectionsClick:e=>G(E(e)),onDragDrop:({from:e,to:n})=>function(e,n){t.onDragDrop&&t.onDragDrop(e,n)}(e,n),onMouseEnter:e=>K(E(e)),onMouseLeave:e=>K(null),onPage:e=>{w({page:e})},opened:n.opened,page:n.page,pois:o,template:t.isEditable?null:n.templates.item})}function ne(){const e=n.isSidebarOpen||n.isDirectionsOpen;let o="mapp-sidebar";if(o+="inline"==n.layout?" mapp-sidebar-inline":"",o+=e?" mapp-sidebar-open":"",n.isDirectionsOpen)return F("div",{className:o,ref:r},Y());if("sidebar"==t.popupStyle&&n.opened&&t.onRenderPopup){const e=E(n.opened);return F("div",{className:o,ref:r},t.onRenderPopup(e,H))}return n.poiList?F("div",{className:o,ref:r},F("div",{className:"mapp-sidebar-toggle",onClick:()=>q()}),"list"==mappl10n.options.filtersPos&&null,t.onRenderSidebar&&t.onRenderSidebar(),Y(),te()):void 0}function oe(e){const t=mappl10n.options.standardStyles.concat(mappl10n.options.userStyles);let o=t.find((t=>t.id==e));if(!mappl10n.options.style||"roadmap"!=e&&"streets"!=e&&o||(o=t.find((e=>e.id==mappl10n.options.style))),o=o||t[0],"leaflet"==mappl10n.options.engine){let e=mappl10n.options.tileProviders[o.provider],t={...e,...o};L.tileLayer(e.url,t).addTo(n.map)}else if(n.map.setMapTypeId("standard"==o.type?o.id:"roadmap"),o.json){let e=null;try{e=JSON.parse(o.json)}catch(e){console.log("Invalid JSON in map style")}n.map.setOptions({styles:e||null})}else n.map.setOptions({styles:null})}function ae(e,t,o){"leaflet"==mappl10n.options.engine?(null==t&&(t=n.map.getZoom()?n.map.getZoom():0),n.map.setView(e,t,o)):(e=S(e),e={lat:parseFloat(e.lat),lng:parseFloat(e.lng)},t=t?parseInt(t):null,e&&n.map.setCenter(e),t&&n.map.setZoom(t)),ie(e)}function ie(e){if(!mappl10n.options.sort||!e||t.isEditable)return;let o=[...n.pois];"distance"==mappl10n.options.sort?(o=o.map((t=>{const n=c.mappLib.getDistance(e,j(t));return{...t,distance:n}})),o.sort(((e,t)=>e.distance-t.distance))):"title"==mappl10n.options.sort&&o.sort(((e,t)=>e.title<t.title?-1:e.title>t.title?1:0)),w({pois:o})}return I((()=>{n.isLoaded&&!t.query&&w({pois:t.pois?t.pois:[]})}),[t.pois]),I((()=>{n.clusterer&&("leaflet"==mappl10n.options.engine?(n.clusterer.clearLayers(),n.clusterer.addLayers(n.overlays)):(n.clusterer.clearMarkers(),n.clusterer.addMarkers(n.overlays)))}),[n.clusterer,n.overlays]),I((()=>{n.isLoaded&&t.query&&k()}),[t.query]),I((()=>{if(n.isLoaded&&t.query)k();else if(t.pois&&n.filters){w({pois:t.pois.filter((e=>{for(const[t,o]of Object.entries(n.filters)){if(!e.data||!e.data[t])return!1;const n=Array.isArray(e.data[t])?e.data[t]:[e.data[t]];if(!(Array.isArray(o)?o:[o]).some((e=>n.includes(e))))return!1}return!0}))})}}),[n.filters]),I((()=>{n.isLoaded&&null==t.center&&$(null)}),[t.center]),I((()=>{n.isLoaded&&oe(t.mapTypeId)}),[t.mapTypeId]),I((()=>{if(n.isLoaded&&t.centerPoi){const n=t.centerPoi.poi;let o=null;if(t.centerPoi.zoom)if(n.viewport){var e=n.viewport.ne.lng-n.viewport.sw.lng;e<0&&(e+=360),o=Math.floor(Math.log(360*s.current.clientWidth/e/256)/Math.LN2)}else o=mappl10n.options.poiZoom;ae(j(n),o)}}),[t.centerPoi]),I((()=>{!function(){if(t.isEditable||!t.lines&&!mappl10n.options.lines||n.pois.length<2)return;n.polyline&&("leaflet"==mappl10n.options.engine?n.polyline.remove():n.polyline.setMap(null),w({polyline:null}));const e={...mappl10n.options.lineOpts},o=[];if(n.pois.map((e=>{o.push(j(e))})),"leaflet"==mappl10n.options.engine)w({polyline:new L.Polyline(o,e).addTo(n.map)});else{const t={strokeColor:e.color,strokeWeight:e.weight,strokeOpacity:e.opacity};e.icons&&(e.icons.map((e=>{e.icon.path=parseInt(e.icon.path)})),e.icons[0].repeat="50px"),w({polyline:new google.maps.Polyline({map:n.map,path:o,...e,...t})}),e.animate&&e.icons&&e.icons.length&&function(){let e=0;const t=n.polyline.get("icons");t[0].repeat.replace("%","").replace("px","");window.setInterval((()=>{e+=1;t[0].offset=e+(t[0].repeat.indexOf("%")>=0?"%":"px"),n.polyline.set("icons",t)}),20)}()}}()}),[n.pois]),I((()=>{if(!n.isLoaded)return;let e,o,a;return e=c.mappEvent.addListener(n.map,"moveend idle",(e=>(w({bounds:O(),page:1}),void(t.onViewportChange&&t.onViewportChange({center:_(),zoom:z()}))))),o=c.mappEvent.addListener(n.map,"click dragstart zoom_changed zoomstart",(e=>{"leaflet"==mappl10n.options.engine&&"click"==e.type&&e.originalEvent&&!e.originalEvent.target.matches(".mapp-canvas")||H()})),n.drawingManager&&(a=c.mappEvent.addListener(n.drawingManager,"overlaycomplete",(e=>{n.drawingManager.setDrawingMode(null),K(null),t.onDrawingEvent&&t.onDrawingEvent(e)}))),t.name&&(window[t.name]={getMap:()=>n.map,getPois:()=>n.pois,poiOpen:e=>w({opened:"string"==typeof e?e:e.id})}),()=>{c.mappEvent.removeListener(e),c.mappEvent.removeListener(o),a&&c.mappEvent.removeListener(a)}})),t.container?mappl10n.options.webComponent?Q(t.container):ee():function(){const e=D();t.name&&t.name;let n="mapp-layout";const o=t.alignment?t.alignment:mappl10n.options.alignment;o&&!document.body.classList.contains("block-editor-page")&&(n+=" align"+o,n+=" mapp-align-"+o);let a="full"==t.alignment?{width:"auto"}:{width:e.width};return F("div",{className:n,style:a,ref:l,tabIndex:"-1"},ee())}()}},473:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mappMarker:()=>a});var o=n(760);function a(e){this.anchorPoint=null,this.div=null,this.draggable=null,this.icon=null,this.map=null,this.position=null,this.visible=!0,this.zIndex=0,this.setValues(e),this.overlayView=new google.maps.OverlayView,this.overlayView.draw=()=>this.draw(),this.overlayView.onAdd=()=>this.onAdd(),this.overlayView.onRemove=()=>this.onRemove(),this.div=document.createElement("div"),this.div.classList.add("mapp-marker")}a.prototype={draw:function(){if(!this.div||!this.icon)return;let e=this.overlayView.getProjection();if(e){let t=e.fromLatLngToDivPixel(this.position),n=this.icon.scaledSize?this.icon.scaledSize:{width:32,height:32};this.div.style.left=t.x-n.width/2+"px",this.div.style.top=t.y-n.height+"px"}},getDiv:function(){return this.div},getDraggable:function(){return this.draggable},getMap:function(){return this.map},getPosition:function(){return this.position},getVisible:function(){return this.visible},handleEvent:function(e){let t="on"+e.type[0].toUpperCase()+e.type.slice(1);this[t]&&this[t](e)},onAdd:function(){let e=this.overlayView.getPanes();e&&(this.div||(this.div=document.createElement("div"),this.div.classList.add("mapp-marker")),e.overlayMouseTarget.append(this.div),this.icon&&this.setIcon(),google.maps.OverlayView.preventMapHitsAndGesturesFrom(this.div),this.div.addEventListener("click",(()=>{(!this.dragging||this.dragging&&!this.dragging.moved)&&o.mappEvent.trigger(this,"click"),this.dragging=null})),this.div.addEventListener("mouseenter",this),this.div.addEventListener("mouseleave",this),this.setDraggable(this.draggable))},onMouseenter:function(e){o.mappEvent.trigger(this,"mouseover")},onMouseleave:function(e){o.mappEvent.trigger(this,"mouseout")},onPointerdown:function(e){const t=this.map.getDiv().getBoundingClientRect(),n=this.overlayView.getProjection().fromLatLngToContainerPixel(this.position);this.dragging={moved:!1,startPixel:{x:e.clientX,y:e.clientY},offset:{x:n.x-(e.clientX-t.left),y:n.y-(e.clientY-t.top)}},this.toggleDragEvents(!0)},onPointermove:function(e){if(Math.abs(e.clientX-this.dragging.startPixel.x)+Math.abs(e.clientY-this.dragging.startPixel.y)<3)return;const t=this.map.getDiv().getBoundingClientRect();let n={x:e.clientX-t.left+this.dragging.offset.x,y:e.clientY-t.top+this.dragging.offset.y};this.setPosition(this.overlayView.getProjection().fromContainerPixelToLatLng(n)),this.dragging.moved=!0,o.mappEvent.trigger(this,"dragstart")},onPointercancel:function(e){this.onPointerup(e)},onPointerup:function(e){this.dragging&&this.dragging.moved&&o.mappEvent.trigger(this,"dragend"),this.toggleDragEvents(!1)},onRemove:function(){this.div&&(this.toggleDragEvents(!1),this.div.remove(),this.div=null)},set:function(e,t){let n="set"+e[0].toUpperCase()+e.slice(1);this[n]&&this[n](t)},setDraggable:function(e){this.draggable=e,this.map&&this.div&&(this.div.removeEventListener("pointerdown",this,{passive:!0}),e&&this.div.addEventListener("pointerdown",this,{passive:!0}))},setIcon:function(e){if(void 0!==e&&(this.icon=e),this.icon&&this.div){const e=this.icon.title?this.icon.title:"mappress marker";let t='<img draggable="false" src="'+this.icon.url+'" alt="'+e+'">';this.div.innerHTML=t;let n=this.icon.scaledSize?this.icon.scaledSize:{width:32,height:32};this.div.style.width=n.width+"px",this.div.style.height=n.height+"px",this.setZIndex(),this.draw()}},setMap:function(e){this.map=e,this.overlayView.setMap(e)},setPosition:function(e){this.position=e,this.draw()},setValues:function(e){for(const t in e)this.set(t,e[t])},setVisible:function(e){this.visible=e,this.div&&(this.div.style.visibility=e?"visible":"hidden")},setZIndex:function(e){this.zIndex=void 0!==e?e:this.zIndex,this.div&&(this.div.style.zIndex=e)},toggleDragEvents(e){document.removeEventListener("pointermove",this,{passive:!0}),document.removeEventListener("pointerup",this,{passive:!0}),document.removeEventListener("pointercancel",this,{passive:!0}),e&&(document.addEventListener("pointermove",this,{passive:!0}),document.addEventListener("pointerup",this,{passive:!0}),document.addEventListener("pointercancel",this,{passive:!0}))}}},28:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappMenuControl:()=>c});var o=n(55);const a=React.createElement,{Fragment:i,useEffect:l,useLayoutEffect:s,useRef:r,useState:p}=React,{__,sprintf}=wp.i18n;function c(e){e={layer:null,map:null,onCenter:null,...e};const[t,n]=p({activeLayer:null,layers:null,isOpen:!1}),s=r(null);function c(e){n((t=>({...t,...e})))}function u(){c({isOpen:!t.isOpen})}return(0,o.useClickOutside)(s,(()=>{t.isOpen&&u()})),l((()=>{if("google"==mappl10n.options.engine){c({layers:{traffic:{googleLayer:new google.maps.TrafficLayer,label:__("Traffic","mappress-google-maps-for-wordpress")},bicycling:{googleLayer:new google.maps.BicyclingLayer,label:__("Bicycling","mappress-google-maps-for-wordpress")},transit:{googleLayer:new google.maps.TransitLayer,label:__("Transit","mappress-google-maps-for-wordpress")}},activeLayer:e.layer})}}),[]),l((()=>{if(t.layers){for(const[n,o]of Object.entries(t.layers))o.googleLayer.setMap(n==t.activeLayer?e.map:null);c({isOpen:!1})}}),[t.activeLayer]),a("div",{ref:s},a("div",{className:"mapp-menu-toggle",onClick:()=>u()}),t.isOpen&&function(){let n=[];return Object.entries(t.layers).forEach((([e,o])=>{const i=t.activeLayer==e?"mapp-menu-item mapp-active":"mapp-menu-item";n.push(a("div",{className:i,key:e,onClick:()=>{return n=e,void(t.activeLayer==n?c({activeLayer:null}):c({activeLayer:n}));var n}},o.label))})),a("div",{className:"mapp-menu"},a("div",{className:"mapp-menu-items"},a("div",{className:"mapp-menu-item",onClick:()=>(c({isOpen:!1}),void e.onCenter())},__("Center map","mappress-google-maps-for-wordpress")),"google"==mappl10n.options.engine&&a(i,null,a("div",{className:"mapp-menu-separator"}),n)),a("div",{className:"mapp-menu-footer"},a("a",{className:"mapp-menu-help",href:"https://mappresspro.com/mappress-documentation",target:"_blank"},a("span",null,__("Help","mappress-google-maps-for-wordpress")))))}())}},558:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPaginate:()=>p});const o=React.createElement,{Fragment:a,useEffect:i,useLayoutEffect:l,useRef:s,useState:r}=React,{__,sprintf}=wp.i18n;function p(e){function t(t,n){const o=Math.ceil(e.count/e.pageSize);switch(t){case"first":e.onChange(1);break;case"last":e.onChange(o);break;case"next":e.page<o&&e.onChange(e.page+1);break;case"prev":e.page>1&&e.onChange(e.page-1)}}return function(){const n=Math.ceil(e.count/e.pageSize),a=e.isBusy||e.page<=1,i=e.isBusy||e.page>=n,l=a?"mapp-paginate-button mapp-disabled":"mapp-paginate-button",s=i?"mapp-paginate-button mapp-disabled":"mapp-paginate-button",r=sprintf(__("%d of %d","mappress-google-maps-for-wordpress"),e.page,n);return o("div",{className:"mapp-paginate"},o("div",{className:l,onClick:()=>{a||t("first")}},"Â«"),o("div",{className:l,onClick:()=>{a||t("prev")}},"â€¹"),o("div",{className:"mapp-paginate-count"},r),o("div",{className:s,onClick:()=>{i||t("next")}},"â€º"),o("div",{className:s,onClick:()=>{i||t("last")}},"Â»"))}()}},195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPlaces:()=>m});var o=n(327),a=n(296);const i=React.createElement,{Fragment:l,useCallback:s,useEffect:r,useLayoutEffect:p,useRef:c,useState:u}=React,{__,sprintf}=wp.i18n;function m(e){e={buttonLabel:null,focus:!1,includeBusinesses:!1,map:null,onChange:null,onSearch:null,placeholder:null,value:null,...e};const{geocode:t,getPredictions:n}=(0,a.useGeocoding)({map:e.map,includeBusinesses:e.includeBusinesses}),[l,s]=u({suggestions:[]});return i(o.MappAutocomplete,{buttonLabel:e.buttonLabel,className:"mapp-places",delay:"google"==mappl10n.options.geocoder||"mapbox"==mappl10n.options.geocoder?50:500,focus:e.focus,onChange:t=>function(t){e.onChange&&e.onChange(t)}(t),onFetch:function(t){n({map:e.map,value:t,callback:e=>{var t;t={suggestions:e},s((e=>({...e,...t})))}})},onSelect:function({suggestion:n,value:o}){t({map:e.map,suggestion:n,value:o,callback:t=>{t&&e.onSearch(t)}})},placeholder:e.placeholder,suggestions:l.suggestions,title:__("Enter an address, place, KML file URL, or lat,lng","mappress-google-maps-for-wordpress"),value:e.value})}},191:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPoiContent:()=>u});var o=n(760);const a=React.createElement,{Fragment:i,useEffect:l,useLayoutEffect:s,useMemo:r,useRef:p,useState:c}=React,{__,sprintf}=wp.i18n;function u(e){e={center:null,context:null,feature:null,isEditable:null,onDirectionsClick:null,poi:null,template:null,thumbs:null,...e};const[t,n]=c({imageNumber:0});function l(e){n((t=>({...t,...e})))}function s(){if("popup"!=e.context)return null;e.poi.data&&e.poi.data;const t=mappl10n.options.poiFields?mappl10n.options.poiFields:[];let n='<div class="mapp-table mapp-data">';return t.forEach((t=>{n+=function(t){let n=e.poi?.data?e.poi.data[t.key]:null,o="";if(null==n)return"";Array.isArray(t.values)&&t.values.length?(n=Array.isArray(n)?n:[n],o=t.values.filter((e=>n.indexOf(e.value)>=0)).map((e=>e.label||e.value)).join(", ")):o=n;return'<div class="mapp-row mapp-data-'+t.key+'"><div class="mapp-label">'+(t.label?t.label:t.key)+'</div><div class="mapp-cell">'+o+"</div></div>"}(t)})),n}return a(i,null,function(){const n="list"!=e.context&&mappl10n.options.thumbWidth&&mappl10n.options.thumbHeight?{width:mappl10n.options.thumbWidth+"px",height:mappl10n.options.thumbHeight+"px"}:null,o=e.thumbs&&e.poi.images&&e.poi.images.length&&e.poi.images[t.imageNumber]?e.poi.images[t.imageNumber]:null;if(!o)return null;const i=function(e){switch(e.type){case"avatar":if(e.html)return a("div",{className:"mapp-avatar",dangerouslySetInnerHTML:{__html:e.html}});break;case"embed":return a("div",{className:"mapp-embed",dangerouslySetInnerHTML:{__html:e.html}});default:if("image"==e.type||!e.type){const t=e.size?{src:e.url,width:e.size[0]+"px",height:e.size[1]+"px",alt:"mappress thumbnail"}:{src:e.url,alt:"mappress thumbnail"};return a("img",t)}}}(o);return a("div",{className:"mapp-thumbnail",onClick:()=>function(t){e.isEditable||"popup"!=e.context||"embed"==t.type||e.poi.url&&window.top.open(e.poi.url,"_blank")}(o),style:n},t.imageNumber>=1&&a("div",{className:"mapp-gallery-previous",onClick:e=>function(e){t.imageNumber>0&&(l({imageNumber:t.imageNumber-1}),e.stopPropagation())}(e)}),i,t.imageNumber<e.poi.images.length-1&&a("div",{className:"mapp-gallery-next",onClick:n=>function(n){t.imageNumber<e.poi.images.length-1&&(l({imageNumber:t.imageNumber+1}),n.stopPropagation())}(n)}))}(),a("div",{className:"mapp-info"},function(){let t={...e.poi};t.icon=o.mappLib.getIconUrl(e.poi.iconid),t.distance&&(t.distance+="imperial"==mappl10n.options.units?" mi":" km"),e.feature&&(t.body=e.feature.description,t.title=e.feature.name),mappl10n.options.betaPoiFields?t.dataTable=s():t.data="",t.props=t.props?t.props:{},t.data=t.data?t.data:{};const n=o.mappLib.template(e.template,{poi:t});return a("div",{className:"mapp-template",dangerouslySetInnerHTML:{__html:n}})}(),function(){if(!(e.template.indexOf("user")>=0))return"popup"==e.context&&mappl10n.options.directionsPopup||"list"==e.context&&mappl10n.options.directionsList?a("div",{className:"mapp-dir-wrapper"},a("span",{className:"mapp-dir",onClick:t=>function(t){t.stopPropagation(),e.onDirectionsClick()}(t)},__("Get Directions","mappress-google-maps-for-wordpress"))):void 0}()))}},660:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPoiList:()=>d});var o=n(760),a=n(558),i=n(191);const l=React.createElement,{Fragment:s,useEffect:r,useLayoutEffect:p,useMemo:c,useRef:u,useState:m}=React,{__,sprintf}=wp.i18n;function d(e){e={className:null,hovered:null,isEditable:!1,isFiltered:null,isPaged:!1,onClick:null,onDragDrop:null,onDirectionsClick:null,onMouseEnter:null,onMouseLeave:null,onPage:null,opened:null,page:1,pois:null,template:null,...e};const[t,n]=m({dragging:null,dragover:null,pageSize:!e.isEditable&&mappl10n.options.poiListPageSize?parseInt(mappl10n.options.poiListPageSize):20});function r(e){n((t=>({...t,...e})))}function p(n){let a,p="mapp-item";return e.opened!=n.id&&e.hovered!=n.id||(p+=" mapp-selected"),p+=t.dragover==n.id?" mapp-dragover":"",a=e.isEditable?l(s,null,l("img",{className:"mapp-icon",src:o.mappLib.getIconUrl(n.iconid)}),l("div",{className:"mapp-title"},n.title)):l(i.MappPoiContent,{context:"list",onDirectionsClick:()=>e.onDirectionsClick(n.id),poi:n,template:e.template,thumbs:mappl10n.options.thumbsList}),l("div",{className:p,dangerouslySetInnerHTML:null,draggable:e.isEditable,key:n.id,onClick:()=>e.onClick(n.id),onDragOver:e=>e.preventDefault(),onDragStart:e=>r({dragging:n.id}),onDragEnter:e=>r({dragover:n.id}),onDragEnd:e=>r({dragging:null,dragover:null}),onDrop:o=>{return a=n.id,void(e.onDragDrop&&e.onDragDrop({from:t.dragging,to:a}));var a},onMouseEnter:t=>{e.onMouseEnter(n.id)},onMouseLeave:t=>{e.onMouseLeave(n.id)}},a)}return l("div",{className:"mapp-list "+(e.className?e.className:"")},(e.isPaged||e.isFiltered)&&function(){let t=1!=e.pois.length?__("%d Results","mappress-google-maps-for-wordpress"):__("%d Result","mappress-google-maps-for-wordpress");return t=sprintf(t,e.pois.length),l("div",{className:"mapp-list-header"},l("div",{className:"mapp-list-count"},t))}(),function(){const n=t.pageSize*(e.page-1),o=n+t.pageSize-1;return l("div",{className:"mapp-items",key:e.page},e.pois.map(((t,a)=>{if(!e.isPaged||a>=n&&a<=o)return p(t)})))}(),e.isPaged&&(!e.isPaged||e.pois.length<=t.pageSize?null:l("div",{className:"mapp-list-footer"},l(a.MappPaginate,{count:e.pois.length,onChange:t=>e.onPage(t),page:e.page,pageSize:t.pageSize}))))}},727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPoi:()=>u});var o=n(760),a=n(473);React.createElement;const{Fragment:i,useEffect:l,useLayoutEffect:s,useMemo:r,useRef:p,useState:c}=React,{__,sprintf}=wp.i18n;function u(e){e={isClusterable:null,isEditable:null,isHovered:null,isOpen:null,map:null,onMouseOut:null,onMouseOver:null,onOverlayAdd:null,poi:null,...e};const t=p(null),[n,i]=c({overlay:null});function s(){return"google"==mappl10n.options.engine&&-1!=["polyline","polygon","circle","rectangle"].indexOf(e.poi.type)}function r(){const t=o.mappPoi.parseOverlay(e.poi.type,n.overlay);e.onChange(t)}function u(e,t){const n={};return e&&"object"==typeof e&&t&&Array.isArray(t)?(t.map((t=>{void 0!==e[t]&&(n[t]=e[t])})),n):n}function m(t,n){n?"leaflet"==mappl10n.options.engine?t.addTo(e.map):t.setMap(e.map):"leaflet"==mappl10n.options.engine?t.remove():t.setMap(null)}function d(t){"kml"==e.poi.type&&(t?"leaflet"==mappl10n.options.engine?(o.mappEvent.addListenerOnce(n.overlay,"ready",(()=>{const t=n.overlay.getBounds();t&&(e.map.fitBounds(t),r())})),o.mappEvent.addListenerOnce(n.overlay,"error",(t=>{alert(__("Error reading KML file.","mappress-google-maps-for-wordpress")+" "+__("This may be a CORS error.  See the MapPress FAQ for help.","mappress-google-maps-for-wordpress")+" : "+e.poi.kml.url)}))):(o.mappEvent.addListener(n.overlay,"defaultviewport_changed",(()=>{if(e.isEditable&&!e.poi.viewport){const t=n.overlay.getDefaultViewport();t&&e.map.fitBounds(t)}r()})),o.mappEvent.addListener(n.overlay,"status_changed",(()=>{"OK"!=n.overlay.getStatus()&&alert(__("Error reading KML file.","mappress-google-maps-for-wordpress")+" : "+e.poi.kml.url)}))):o.mappEvent.clearListeners(n.overlay,"ready error defaultviewport_changed status_changed"))}function g(t){s()&&"google"==mappl10n.options.engine&&e.isEditable&&("rectangle"==e.poi.type&&(o.mappEvent.clearListeners(n.overlay,"bounds_changed"),t&&o.mappEvent.addListener(n.overlay,"bounds_changed",(()=>{r()}))),"circle"==e.poi.type&&(o.mappEvent.clearListeners(n.overlay,"center_changed radius_changed"),t&&o.mappEvent.addListener(n.overlay,"center_changed radius_changed",(()=>{r()}))),"polygon"!=e.poi.type&&"polyline"!=e.poi.type||(o.mappEvent.clearListeners(n.overlay,"rightclick"),o.mappEvent.clearListeners(n.overlay.getPath(),"insert_at remove_at set_at"),t&&(o.mappEvent.addListener(n.overlay,"rightclick",(e=>{null!=e.vertex&&n.overlay.getPath().getLength()>2&&(n.overlay.getPath().removeAt(e.vertex),r())})),o.mappEvent.addListener(n.overlay.getPath(),"insert_at remove_at set_at",(()=>{r()})))))}return l((()=>{if(!n.overlay||!e.poi.point||e.poi.type)return;const t=o.mappLib.pointToLatLng(e.poi.point);"google"==mappl10n.options.engine?n.overlay.setPosition(t):n.overlay.setLatLng(t)}),[e.poi.point]),l((()=>{const n="leaflet"==mappl10n.options.engine&&"kml"!=e.poi.type?null:e.poi.type,l=u(e.poi.poly,["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity"]);let r;switch(n){case"polygon":r=new google.maps.Polygon({paths:e.poi.poly.paths,...l});break;case"polyline":r=new google.maps.Polyline({path:e.poi.poly.path,...l});break;case"circle":const t=new google.maps.LatLng(e.poi.point.lat,e.poi.point.lng);r=new google.maps.Circle({center:t,radius:parseFloat(e.poi.poly.radius),...l});break;case"rectangle":r=new google.maps.Rectangle({bounds:o.mappLib.viewportToBounds(e.poi.viewport),...l});break;case"kml":const n=e.poi.kml&&e.poi.kml.url?e.poi.kml.url:"";r="leaflet"==mappl10n.options.engine?n&&n.includes(".gpx")?omnivore.gpx(n):omnivore.kml(n):new google.maps.KmlLayer({url:n,preserveViewport:!0,suppressInfoWindows:!0});break;default:r="leaflet"==mappl10n.options.engine?L.marker([e.poi.point.lat,e.poi.point.lng]):new a.mappMarker({position:new google.maps.LatLng(e.poi.point.lat,e.poi.point.lng)}),r.setIcon(o.mappLib.getIcon(e.poi.iconid))}var p;return p={overlay:r},i((e=>({...e,...p}))),"kml"!=e.poi.type&&("leaflet"==mappl10n.options.engine?r.options.draggable=e.isEditable:r.setDraggable(e.isEditable)),s()&&r.setEditable(e.isEditable),e.isClusterable?"google"==mappl10n.options.engine&&m(r,e.map):m(r,e.map),e.onOverlayAdd&&e.onOverlayAdd(r,e.isClusterable),t.current=r,()=>{m(t.current,null)}}),[]),l((()=>{if(n.overlay){const t=u(e.poi.poly,["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity"]);n.overlay.setOptions({...t})}}),[e.poi.poly]),l((()=>{n.overlay&&n.overlay.setIcon(o.mappLib.getIcon(e.poi.iconid))}),[e.poi.iconid]),l((()=>{n.overlay&&function(t){if("kml"==e.poi.type)return;if(s())return void(e.isEditable&&n.overlay.setEditable(t));if("icon"==mappl10n.options.highlight&&"leaflet"==mappl10n.options.engine&&e.isEditable)return;var a="leaflet"==mappl10n.options.engine?n.overlay._icon:n.overlay.getDiv();if(!a)return;switch(e.isEditable?"circle":mappl10n.options.highlight){case"circle":a.classList.toggle("mapp-marker-circle",t);break;case"icon":var i=t?o.mappLib.getIcon(mappl10n.options.highlightIcon):o.mappLib.getIcon(e.poi.iconid);if("leaflet"==mappl10n.options.engine&&n.overlay.getIcon().options.iconUrl==i.options.iconUrl)return;n.overlay.setIcon(i);break;case"scale":a.classList.add("mapp-marker"),a.classList.toggle("mapp-marker-scale",t)}const l=t?1e4:0;"leaflet"==mappl10n.options.engine?e.poi.type||n.overlay.setZIndexOffset(l):n.overlay.set("zIndex",l)}(e.isHovered||e.isOpen)}),[e.isHovered,e.isOpen,n.overlay]),l((()=>{if(n.overlay)return o.mappEvent.addListener(n.overlay,"click",(t=>{e.onClick(t)})),o.mappEvent.addListener(n.overlay,"mouseover",(t=>{e.onMouseOver&&e.onMouseOver(t)})),o.mappEvent.addListener(n.overlay,"mouseout",(t=>{e.onMouseOut&&e.onMouseOut(t)})),g(!0),d(!0),e.isEditable&&(o.mappEvent.addListener(n.overlay,"dragstart",(()=>(g(!1),void(e.onChange&&e.onChange({viewport:null}))))),o.mappEvent.addListener(n.overlay,"dragend",(()=>(r(),void g(!0))))),()=>{o.mappEvent.clearListeners(n.overlay,"click mouseover mouseout dragstart dragend"),g(!1),d(!1)}})),e.isOpen&&e.onRenderPopup?e.onRenderPopup(e.poi,n.overlay):null}},477:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappPopupModal:()=>u});var o=n(875),a=n(760);const i=React.createElement,{Fragment:l,useEffect:s,useLayoutEffect:r,useRef:p,useState:c}=(ReactDOM.createPortal,React),{__,sprintf}=wp.i18n;function u(e){e={onClose:null,poi:null,...e};const[t,n]=c({isBusy:!1,html:null});function l(e){n((t=>({...t,...e})))}return s((()=>{e.poi.oid&&(l({isBusy:!0}),a.mappLib.ajax({method:"GET",data:{action:"mapp_get_post",oid:e.poi.oid,nonce:mappl10n.options.nonce},responseType:"html",callback:e=>{l({isBusy:!1,html:e})}}))}),[e.poi.oid]),i(o.MappDialog,{className:"mapp-modal",closeOnClickOutside:!0,isModal:!0,onClose:()=>e.onClose()},t.isBusy&&i("div",{className:"mapp-modal-spinner"}),!t.isBusy&&i("div",{className:"mapp-modal-template",dangerouslySetInnerHTML:{__html:t.html}}))}}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(327),o(393),o(875),o(45),o(900),o(296),o(55),o(760),o(351),o(516),o(473),o(28),o(558),o(195),o(727),o(191),o(660),o(477),o(756)})();